import{Cb as e,Nu as t,Z as n,mt as r}from"./index-CZ4oMP1N.js";import{n as i}from"./glsl-CQsgM67j.js";import{t as a}from"./Float2BindUniform-C046qJa3.js";import{t as o}from"./Float4BindUniform-DsRDgU9t.js";function s(e){e.fragment.uniforms.add(new o(`projInfo`,e=>c(e.camera))),e.fragment.uniforms.add(new a(`zScale`,e=>u(e.camera))),e.fragment.code.add(i`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}function c(e){let t=e.projectionMatrix;return t[11]===0?r(l,2/(e.fullWidth*t[0]),2/(e.fullHeight*t[5]),(1+t[12])/t[0],(1+t[13])/t[5]):r(l,-2/(e.fullWidth*t[0]),-2/(e.fullHeight*t[5]),(1-t[8])/t[0],(1-t[9])/t[5])}var l=n();function u(t){return t.projectionMatrix[11]===0?e(d,0,1):e(d,1,0)}var d=t();export{s as t};