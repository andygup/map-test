const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/intersectsOperator-CZFILw1Q.js","assets/SpatialReference-BzfAMI5E.js","assets/index-CzMixifc.js","assets/index-CDgdHpAj.css","assets/Envelope2D-n2TB2v9l.js","assets/Point2D-BslC4Gs9.js","assets/OperatorDefinitions-DoM9xd5U.js","assets/SimpleGeometryCursor-BbFgAuic.js","assets/Transformation2D-B6W9saMR.js","assets/OperatorIntersects-DuqsYQL9.js","assets/memoryEstimations-C3WUBUZI.js","assets/jsonConverter-CYYMdpyx.js","assets/OptimizedGeometry-5fDazGe-.js","assets/containsOperator-BuvTPfRf.js","assets/crossesOperator-BOivjZ5P.js","assets/OperatorCrosses-CLWzEGSs.js","assets/disjointOperator-C3wodYL0.js","assets/overlapsOperator-BX-MyYOI.js","assets/OperatorOverlaps-Bjzoa167.js","assets/touchesOperator-CYQsP1OE.js","assets/OperatorTouches-Cz6vlndN.js","assets/withinOperator-D4OK6OJ9.js","assets/OperatorWithin-xu0ULAJm.js"])))=>i.map(i=>d[i]);
import{BS as e,BT as t,Cv as n,Dv as r,Sv as i,cx as a,dD as o,dx as s,sx as c,ux as l,yS as u}from"./index-CzMixifc.js";import{S as d,s as f,t as p,v as m,y as h}from"./featureConversionUtils-VvJ2pauf.js";import{c as g}from"./queryUtils-fxq7u50x.js";function _(e,t,n,r=e.hasZ,i=e.hasM){if(t==null)return null;let a=e.hasZ&&r,o=e.hasM&&i;if(n){let e=h(t,`esriGeometryPoint`,n,r,i);return d(e,a,o)}return d(t,a,o)}function v(e,t,n,r,i,a){if(t==null)return null;let o=`coords`in t?t:t.geometry;if(o==null)return null;let{hasZ:s,hasM:c}=o,l=s&&(i??=s),u=c&&(a??=c);if(n){let t=m(o,e,n,i,a);return r&&(t=h(t,e,r)),f(t,e,l,u)}if(r){let t=h(o,e,r,i,a);return f(t,e,l,u)}return f(o,e,l,u)}function y(e){return e&&b in e?JSON.parse(JSON.stringify(e,x)):e}var b=`_geVersion`,x=(e,t)=>e===b?void 0:t;function S(e){return e===`mesh`?a:c(e)}function C(e,t){return T(e,t.coords[0],t.coords[1])}function w(e,t){let{coords:n,lengths:r,stride:i}=t;if(!r)return!1;for(let t=0,a=0;t<r.length;t++,a+=i)if(!T(e,n[a],n[a+1]))return!1;return!0}function T(e,t,n){if(!e)return!1;let{coords:r,lengths:i,stride:a}=e,o=!1,s=0;for(let e of i)o=E(o,r,a,s,e,t,n),s+=e*a;return o}function E(e,t,n,r,i,a,o){let s=e,c=r;for(let e=r,l=r+i*n;e<l;e+=n){c=e+n,c===l&&(c=r);let i=t[e],u=t[e+1],d=t[c],f=t[c+1];(u<o&&f>=o||f<o&&u>=o)&&i+(o-u)/(f-u)*(d-i)<a&&(s=!s)}return s}var D=`unsupported-query`,O={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!1,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function k(e){return e!=null&&!0===O.spatialRelationship[e]}function A(e){return e!=null&&!0===O.queryGeometry[r(e)]}function j(e){return e!=null&&!0===O.layerGeometry[e]}var M={esriSpatialRelIntersects:()=>e(()=>import(`./intersectsOperator-CZFILw1Q.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),esriSpatialRelContains:()=>e(()=>import(`./containsOperator-BuvTPfRf.js`),__vite__mapDeps([13,1,2,3,4,5,6,7,8,10,11,12])),esriSpatialRelCrosses:()=>e(()=>import(`./crossesOperator-BOivjZ5P.js`),__vite__mapDeps([14,1,2,3,4,5,6,7,8,15,10,11,12])),esriSpatialRelDisjoint:()=>e(()=>import(`./disjointOperator-C3wodYL0.js`),__vite__mapDeps([16,1,2,3,4,5,6,7,8,10,11,12])),esriSpatialRelEnvelopeIntersects:null,esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:()=>e(()=>import(`./overlapsOperator-BX-MyYOI.js`),__vite__mapDeps([17,1,2,3,4,5,6,7,8,18,10,11,12])),esriSpatialRelTouches:()=>e(()=>import(`./touchesOperator-CYQsP1OE.js`),__vite__mapDeps([19,1,2,3,4,5,6,7,8,20,10,11,12])),esriSpatialRelWithin:()=>e(()=>import(`./withinOperator-D4OK6OJ9.js`),__vite__mapDeps([21,1,2,3,4,5,6,7,8,22,10,11,12])),esriSpatialRelRelation:null};function N(e){let t=M[e];if(t==null)throw Error(`Cannot load unsupported spatial operator: ${e}`);return t()}async function P(e,t,r){if(n(t)){if(r===`esriGeometryPoint`&&(e===`esriSpatialRelIntersects`||e===`esriSpatialRelContains`)){let e=p(t,!1,!1);return t=>C(e,t)}if(r===`esriGeometryMultipoint`){let n=p(t,!1,!1);if(e===`esriSpatialRelContains`)return e=>w(n,e)}}if(i(t)){if(r===`esriGeometryPoint`&&(e===`esriSpatialRelIntersects`||e===`esriSpatialRelContains`))return e=>s(t,v(r,e));if(r===`esriGeometryMultipoint`&&e===`esriSpatialRelContains`)return e=>l(t,v(r,e));if(e===`esriSpatialRelIntersects`){let e=S(r);return n=>e(t,v(r,n))}}e===`esriSpatialRelEnvelopeIntersects`&&(e=`esriSpatialRelIntersects`);let a=await N(e);return e=>a.execute(t,v(r,e))}async function F(e,n,r){let{spatialRel:i,geometry:a}=e;if(a){if(!k(i))throw new t(D,`Unsupported query spatial relationship`,{query:e});if(u(a.spatialReference)&&u(r)){if(!A(a))throw new t(D,`Unsupported query geometry type`,{query:e});if(!j(n))throw new t(D,`Unsupported layer geometry type`,{query:e});if(e.outSR)return g(e.geometry?.spatialReference,e.outSR)}}}function I(e){if(i(e))return!0;if(n(e)){for(let t of e.rings)if(t.length!==5||t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1;return!0}return!1}async function L(e,t){if(!e)return null;let n=t.featureAdapter,{startTimeField:r,endTimeField:i}=e,a=1/0,s=-1/0;if(r&&i)await t.forEach(e=>{let t=n.getAttribute(o(e),r),c=n.getAttribute(o(e),i);t==null||isNaN(t)||(a=Math.min(a,t)),c==null||isNaN(c)||(s=Math.max(s,c))});else{let e=r||i;await t.forEach(t=>{let r=n.getAttribute(o(t),e);r==null||isNaN(r)||(a=Math.min(a,r),s=Math.max(s,r))})}return{start:a,end:s}}function R(e,t,n){if(!t||!e)return null;let{startTimeField:r,endTimeField:i}=e;if(!r&&!i)return null;let{start:a,end:o}=t;if(a===null&&o===null)return null;if(a===void 0&&o===void 0)return V();let s=n.getAttributeAsTimestamp?.bind(n)??n.getAttribute.bind(n);return r&&i?z(s,r,i,a,o):B(s,r||i,a,o)}function z(e,t,n,r,i){return r!=null&&i!=null?a=>{let o=e(a,t),s=e(a,n);return(o==null||o<=i)&&(s==null||s>=r)}:r==null?i==null?void 0:n=>{let r=e(n,t);return r==null||r<=i}:t=>{let i=e(t,n);return i==null||i>=r}}function B(e,t,n,r){return n!=null&&r!=null&&n===r?r=>e(r,t)===n:n!=null&&r!=null?i=>{let a=e(i,t);return a!=null&&a>=n&&a<=r}:n==null?r==null?void 0:n=>{let i=e(n,t);return i!=null&&i<=r}:r=>{let i=e(r,t);return i!=null&&i>=n}}function V(){return()=>!1}export{I as a,y as c,P as i,L as n,v as o,F as r,_ as s,R as t};