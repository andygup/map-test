import{Bh as e,Ga as t,Nw as n,Wl as r,im as i,mv as a,ng as o,pd as s,pv as c,ud as l}from"./index-BN8X5Ryz.js";import{n as u}from"./dehydratedPoint-CWZQBefp.js";import{h as d}from"./LineSnappingHint-CmFAetWF.js";var f=Symbol(`grid-placement-graphic`);function p(e,t){let n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function m(e,t){return Math.sqrt(p(e,t))}function h(e,t){t.sort((t,n)=>r(t.targetPoint,e)-r(n.targetPoint,e))}function g({parameters:{point:t,distance:n,returnEdge:r,vertexMode:a,coordinateHelper:{spatialReference:o},filter:c},mode:l,returnZ:d,filter:f}){let p=f?.clone()??new s({where:`1=1`});return p.returnZ=d??l===`3d`,c&&(p.geometry=c.geometry,p.distance=c.distance,p.spatialRelationship=c.spatialRelationship,p.where=i(p.where,c.where),p.timeExtent=e(p.timeExtent,c.timeExtent),p.objectIds=_(p.objectIds,c.objectIds)),{point:u(t[0],t[1],t[2],o.toJSON()),mode:l,distance:n,returnEdge:r,vertexMode:a,query:p.toJSON()}}function _(e,t){return e||t?t?e?Array.from(n(new Set(e),new Set(t))):t:e:null}function v(e,t,n){return{left:d(e.leftVertex.pos,t,n),right:d(e.rightVertex.pos,t,n)}}var y=Symbol(`snapping-toggle`);function b(e,t=()=>{}){let n=c(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:n,snappingOptions:r})=>{if(e.removeHandles(y),!n||!r)return;let i=o.TOOL,a=[n.on(`key-down`,e=>{e.key!==l.toggle||e.repeat||(r.enabledToggled=!0,t())},i),n.on(`key-up`,e=>{e.key===l.toggle&&(r.enabledToggled=!1,t())},i),n.on(`pointer-move`,e=>{let n=e.native.ctrlKey;r.enabledToggled!==n&&(r.enabledToggled=n,t())},i)];e.addHandles(a,y)},a);e.addHandles(n)}function x(e){return t(e)&&`utilityNetworks`in e&&!!e.utilityNetworks?.length}function S(e){return e?.type===`line`}export{v as a,x as c,g as i,h as l,m as n,S as o,p as r,b as s,f as t};