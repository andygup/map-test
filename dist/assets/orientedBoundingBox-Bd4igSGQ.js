import{$y as e,Al as t,Bl as n,Cl as r,Dl as i,El as a,Gy as o,Il as s,Jf as c,Ll as l,Ml as u,Nl as d,Ol as f,Rl as p,Ry as m,Sl as h,Tl as ee,Ul as te,Uu as ne,Vl as re,Z as ie,__ as ae,_t as oe,bl as se,gS as ce,h_ as le,jl as ue,n_ as de,p_ as fe,r_ as pe,x_ as me,xl as g,y_ as _,zS as he,zy as ge}from"./index-BN8X5Ryz.js";import{n as _e,t as ve}from"./quatf64-D37SEdPg.js";import{l as ye,o as be,r as xe}from"./quat-C8PgLo31.js";import{b as Se}from"./plane-Da5EsY0J.js";import{r as Ce,t as we}from"./vectorStacks-Cuo89CNO.js";import{t as Te}from"./computeTranslationToOriginAndRotation-0WDVmpJG.js";import{t as Ee}from"./spatialReferenceEllipsoidUtils-qw9wv8RL.js";var De=class{constructor(e,t,n=t){this.data=e,this.size=t,this.stride=n}},Oe=class extends De{constructor(e,t,n,r=!1,i=n){super(e,n,i),this.indices=t,this.exclusive=r}},ke=1e-6,Ae=_(),je=_();function Me(e,t){let{data:n,size:r}=e,i=n.length/r;if(i<=0)return;let a=new tt(e);it(Ae,a.minProj,a.maxProj),at(Ae,Ae,.5),L(je,a.maxProj,a.minProj);let o=rt(je),s=new nt;s.quality=o,i<14&&(e=new De(new Float64Array(a.buffer,112,42),3));let c=_(),l=_(),u=_(),d=_(),f=_(),p=_(),m=_();switch(Ne(a,e,m,c,l,u,d,f,p,s)){case 1:Ke(Ae,je,t);return;case 2:Ye(e,d,t);return}Ie(e,m,c,l,u,d,f,p,s),Xe(e,s.b0,s.b1,s.b2,M,N);let h=_();L(h,N,M),s.quality=rt(h),s.quality<o?et(s.b0,s.b1,s.b2,M,N,h,t):Ke(Ae,je,t)}function Ne(e,t,n,r,i,a,o,s,c,l){return Le(e,r,i),st(r,i)<ke?1:(L(o,r,i),B(o,o),Re(t,r,o,a)<ke?2:(L(s,i,a),B(s,s),L(c,a,r),B(c,c),z(n,s,o),B(n,n),O(t,n,o,s,c,l),0))}var Pe=_(),Fe=_(),v=_(),y=_(),b=_(),x=_(),S=_(),C=_();function Ie(e,t,n,r,i,a,o,s,c){ze(e,t,n,Pe,Fe),Pe[0]!==void 0&&(L(v,Pe,n),B(v,v),L(y,Pe,r),B(y,y),L(b,Pe,i),B(b,b),z(x,y,a),B(x,x),z(S,b,o),B(S,S),z(C,v,s),B(C,C),O(e,x,a,y,v,c),O(e,S,o,b,y,c),O(e,C,s,v,b,c)),Fe[0]!==void 0&&(L(v,Fe,n),B(v,v),L(y,Fe,r),B(y,y),L(b,Fe,i),B(b,b),z(x,y,a),B(x,x),z(S,b,o),B(S,S),z(C,v,s),B(C,C),O(e,x,a,y,v,c),O(e,S,o,b,y,c),O(e,C,s,v,b,c))}function Le(e,t,n){let r=st(e.maxVert[0],e.minVert[0]),i=0;for(let t=1;t<7;++t){let n=st(e.maxVert[t],e.minVert[t]);n>r&&(r=n,i=t)}R(t,e.minVert[i]),R(n,e.maxVert[i])}var w=[0,0,0];function Re(e,t,n,r){let{data:i,size:a}=e,o=-1/0,s=0;for(let e=0;e<i.length;e+=a){w[0]=i[e]-t[0],w[1]=i[e+1]-t[1],w[2]=i[e+2]-t[2];let r=n[0]*w[0]+n[1]*w[1]+n[2]*w[2],a=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],c=w[0]*w[0]+w[1]*w[1]+w[2]*w[2]-r*r/a;c>o&&(o=c,s=e)}return R(r,i,s),o}var T=ne();function ze(e,t,n,r,i){Ge(e,t,T,i,r);let a=ct(n,t);T[1]-ke<=a&&(r[0]=void 0),T[0]+ke>=a&&(i[0]=void 0)}var Be=_(),Ve=_(),He=_(),E=_(),D=_(),Ue=_();function O(e,t,n,r,i,a){if(ot(t)<ke)return;z(Be,n,t),z(Ve,r,t),z(He,i,t),k(e,t,T),D[1]=T[0],E[1]=T[1],Ue[1]=E[1]-D[1];let o=[n,r,i],s=[Be,Ve,He];for(let n=0;n<3;++n){k(e,o[n],T),D[0]=T[0],E[0]=T[1],k(e,s[n],T),D[2]=T[0],E[2]=T[1],Ue[0]=E[0]-D[0],Ue[2]=E[2]-D[2];let r=rt(Ue);r<a.quality&&(R(a.b0,o[n]),R(a.b1,t),R(a.b2,s[n]),a.quality=r)}}var We=_();function k(e,t,n){let{data:r,size:i}=e;n[0]=1/0,n[1]=-1/0;for(let e=0;e<r.length;e+=i){let i=r[e]*t[0]+r[e+1]*t[1]+r[e+2]*t[2];n[0]=Math.min(n[0],i),n[1]=Math.max(n[1],i)}}function Ge(e,t,n,r,i){let{data:a,size:o}=e;R(r,a),R(i,r),n[0]=ct(We,t),n[1]=n[0];for(let e=o;e<a.length;e+=o){let o=a[e]*t[0]+a[e+1]*t[1]+a[e+2]*t[2];o<n[0]&&(n[0]=o,R(r,a,e)),o>n[1]&&(n[1]=o,R(i,a,e))}}function Ke(e,t,n){n.center=e,n.halfSize=d(t,t,.5),n.quaternion=_e}var A=_(),j=_(),qe=_(),M=_(),N=_(),Je=_();function Ye(e,t,n){R(A,t),Math.abs(t[0])>Math.abs(t[1])&&Math.abs(t[0])>Math.abs(t[2])?A[0]=0:Math.abs(t[1])>Math.abs(t[2])?A[1]=0:A[2]=0,ot(A)<ke&&(A[0]=A[1]=A[2]=1),z(j,t,A),B(j,j),z(qe,t,j),B(qe,qe),Xe(e,t,j,qe,M,N),L(Je,N,M),et(t,j,qe,M,N,Je,n)}function Xe(e,t,n,r,i,a){k(e,t,T),i[0]=T[0],a[0]=T[1],k(e,n,T),i[1]=T[0],a[1]=T[1],k(e,r,T),i[2]=T[0],a[2]=T[1]}var P=_(),Ze=_(),Qe=_(),F=ge(1,0,0,0,1,0,0,0,1),$e=ve();function et(e,t,n,r,i,a,o){F[0]=e[0],F[1]=e[1],F[2]=e[2],F[3]=t[0],F[4]=t[1],F[5]=t[2],F[6]=n[0],F[7]=n[1],F[8]=n[2],o.quaternion=lt($e,F),it(P,r,i),at(P,P,.5),at(Ze,e,P[0]),at(Qe,t,P[1]),it(Ze,Ze,Qe),at(Qe,n,P[2]),o.center=te(Ze,Ze,Qe),o.halfSize=d(P,a,.5)}var I=7,tt=class{constructor(e){this.minVert=Array(I),this.maxVert=Array(I);let t=64*I;this.buffer=new ArrayBuffer(t);let n=0;this.minProj=new Float64Array(this.buffer,n,I),n+=8*I,this.maxProj=new Float64Array(this.buffer,n,I),n+=8*I;for(let e=0;e<I;++e)this.minVert[e]=new Float64Array(this.buffer,n,3),n+=24;for(let e=0;e<I;++e)this.maxVert[e]=new Float64Array(this.buffer,n,3),n+=24;for(let e=0;e<I;++e)this.minProj[e]=1/0,this.maxProj[e]=-1/0;let r=Array(I),i=Array(I),{data:a,size:o}=e;for(let e=0;e<a.length;e+=o){let t=a[e];t<this.minProj[0]&&(this.minProj[0]=t,r[0]=e),t>this.maxProj[0]&&(this.maxProj[0]=t,i[0]=e),t=a[e+1],t<this.minProj[1]&&(this.minProj[1]=t,r[1]=e),t>this.maxProj[1]&&(this.maxProj[1]=t,i[1]=e),t=a[e+2],t<this.minProj[2]&&(this.minProj[2]=t,r[2]=e),t>this.maxProj[2]&&(this.maxProj[2]=t,i[2]=e),t=a[e]+a[e+1]+a[e+2],t<this.minProj[3]&&(this.minProj[3]=t,r[3]=e),t>this.maxProj[3]&&(this.maxProj[3]=t,i[3]=e),t=a[e]+a[e+1]-a[e+2],t<this.minProj[4]&&(this.minProj[4]=t,r[4]=e),t>this.maxProj[4]&&(this.maxProj[4]=t,i[4]=e),t=a[e]-a[e+1]+a[e+2],t<this.minProj[5]&&(this.minProj[5]=t,r[5]=e),t>this.maxProj[5]&&(this.maxProj[5]=t,i[5]=e),t=a[e]-a[e+1]-a[e+2],t<this.minProj[6]&&(this.minProj[6]=t,r[6]=e),t>this.maxProj[6]&&(this.maxProj[6]=t,i[6]=e)}for(let e=0;e<I;++e){let t=r[e];R(this.minVert[e],a,t),t=i[e],R(this.maxVert[e],a,t)}}},nt=class{constructor(){this.b0=me(1,0,0),this.b1=me(0,1,0),this.b2=me(0,0,1),this.quality=0}};function rt(e){return e[0]*e[1]+e[0]*e[2]+e[1]*e[2]}function it(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}function L(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}function at(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}function R(e,t,n=0){e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}function z(e,t,n){let r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o}function B(e,t){let n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(n>0){let r=1/Math.sqrt(n);e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}}function ot(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function st(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function ct(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function lt(e,t){let n=t[0]+t[4]+t[8];if(n>0){let r=Math.sqrt(n+1);e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r}else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);let r=(n+1)%3,i=(n+2)%3,a=Math.sqrt(t[3*n+n]-t[3*r+r]-t[3*i+i]+1);e[n]=.5*a,a=.5/a,e[3]=(t[3*r+i]-t[3*i+r])*a,e[r]=(t[3*r+n]+t[3*n+r])*a,e[i]=(t[3*i+n]+t[3*n+i])*a}return e}var ut=class t{constructor(e=le,t=Et,n=_e){this._data=[e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3]]}clone(){return t.fromData(this._data)}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(e){let n=new t;return n._copyFromData(e),n}static fromJSON(e){return new t(e.center,e.halfSize,e.quaternion)}copy(e){this._copyFromData(e.data)}_copyFromData(e){for(let t=0;t<10;++t)this._data[t]=e[t]}get center(){return p(we.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(e){return e[0]=this._data[0],e[1]=this._data[1],e[2]=this._data[2],e}set center(e){this._data[0]=e[0],this._data[1]=e[1],this._data[2]=e[2]}setCenter(e,t,n){this._data[0]=e,this._data[1]=t,this._data[2]=n}get halfSize(){return p(we.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(e){return e[0]=this._data[3],e[1]=this._data[4],e[2]=this._data[5],e}set halfSize(e){this._data[3]=e[0],this._data[4]=e[1],this._data[5]=e[2]}get quaternion(){return be(Ce.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(e){return e[0]=this._data[6],e[1]=this._data[7],e[2]=this._data[8],e[3]=this._data[9],e}set quaternion(e){this._data[6]=e[0],this._data[7]=e[1],this._data[8]=e[2],this._data[9]=e[3]}get data(){return this._data}getCorners(e){let t=this._data,n=be(V,t[6],t[7],t[8],t[9]);for(let r=0;r<8;++r){let i=e[r];i[0]=(1&r?-1:1)*t[3],i[1]=(2&r?-1:1)*t[4],i[2]=(4&r?-1:1)*t[5],h(i,i,n),i[0]+=t[0],i[1]+=t[1],i[2]+=t[2]}return e}getAxes(e){let t=this._data,n=be(V,t[6],t[7],t[8],t[9]);return h(e[0],[1,0,0],n),h(e[1],[0,1,0],n),h(e[2],[0,0,1],n),e}intersectsFrustum(e){let t=this.center,n=e.planes;for(let e of n){let n=Se(e),r=this.projectedRadius(n);if(g(n,t)+e[3]-r>0)return!1}let r=this.getAxes(Tt),i=e.points,o=this.halfSize;for(let e=0;e<3;++e){let n=r[e],a=-g(n,t),s=o[e],c=!0,l=!0;for(let e of i){let t=g(e,n)+a;c&&=t>s,l&&=t<-s}if(c||l)return!1}if(this.getCorners(wt).some(t=>e.intersectsPoint(t)))return!0;let s=Ot;for(let e=0;e<3;++e){let n=r[e];s[e]=g(n,t)}let c=e=>{for(let t=0;t<3;++t){let n=r[t],i=o[t],a=g(n,e)-s[t];if(a>i||a<-i)return!1}return!0};if(e.points.some(e=>c(e)))return!0;let l=e.lines,u=Dt;for(let e=0;e<8;++e){let n=l[e].direction;for(let e of r){f(u,n,e);let r=a(u);if(!(r>0))continue;d(u,u,1/r);let o=this.projectedRadius(u),s=g(t,u),c=s-o,l=s+o,p=!1,m=!1,h=!0;for(let e of i){let t=g(u,e);if(t>l){if(m){h=!1;break}p=!0}else{if(!(t<c)){h=!1;break}if(p){h=!1;break}m=!0}}if(h)return!1}}return!0}doesIntersectFrustumConservativeApproximation(e){return this.intersectPlane(e[0])<=0&&this.intersectPlane(e[1])<=0&&this.intersectPlane(e[2])<=0&&this.intersectPlane(e[3])<=0&&this.intersectPlane(e[4])<=0&&this.intersectPlane(e[5])<=0}get radius(){let e=this._data[3],t=this._data[4],n=this._data[5];return Math.sqrt(e*e+t*t+n*n)}intersectsPoint(e){let t=this.getAxes(Tt),n=this.halfSize,{center:r}=this;for(let i=0;i<3;++i){let a=t[i],o=n[i],s=g(a,e)-g(a,r);if(s>o||s<-o)return!1}return!0}intersectSphere(e){let{center:t}=e,n=this._data;U[0]=n[0]-t[0],U[1]=n[1]-t[1],U[2]=n[2]-t[2];let r=this.getQuaternion(H);return xe(V,r),h(U,U,V),u(U,U),W[0]=Math.min(U[0],n[3]),W[1]=Math.min(U[1],n[4]),W[2]=Math.min(U[2],n[5]),ee(W,U)<e.radius*e.radius}intersectSphereWithMBS(e,t=this.radius){let n=this._data,{center:r}=e;U[0]=n[0]-r[0],U[1]=n[1]-r[1],U[2]=n[2]-r[2];let a=e.radius,o=a+t;return!(i(U)>o*o)&&(V[0]=-n[6],V[1]=-n[7],V[2]=-n[8],V[3]=n[9],h(U,U,V),u(U,U),W[0]=Math.min(U[0],n[3]),W[1]=Math.min(U[1],n[4]),W[2]=Math.min(U[2],n[5]),ee(W,U)<a*a)}intersectPlane(e){let t=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3],n=this.projectedRadius(Se(e));return t>n?1:t<-n?-1:0}intersectRay(e,t,n=0){let r=this._data,i=V;i[0]=-r[6],i[1]=-r[7],i[2]=-r[8],i[3]=r[9],U[0]=e[0]-r[0],U[1]=e[1]-r[1],U[2]=e[2]-r[2];let a=h(U,U,V),o=h(W,t,V),s=-1/0,c=1/0,l=this.getHalfSize(Ct);for(let e=0;e<3;e++){let t=a[e],r=o[e],i=l[e]+n;if(Math.abs(r)>1e-6){let e=(i-t)/r,n=(-i-t)/r;s=Math.max(s,Math.min(e,n)),c=Math.min(c,Math.max(e,n))}else if(t>i||t<-i)return!1}return s<=c}projectedArea(t,n,r,i){let a=this.getQuaternion(H);xe(V,a),U[0]=t[0]-this._data[0],U[1]=t[1]-this._data[1],U[2]=t[2]-this._data[2],h(U,U,V);let s=this.getHalfSize(Ct),c=U[0]<-s[0]?-1:U[0]>s[0]?1:0,l=U[1]<-s[1]?-1:U[1]>s[1]?1:0,u=U[2]<-s[2]?-1:U[2]>s[2]?1:0,d=Math.abs(c)+Math.abs(l)+Math.abs(u);if(d===0)return 1/0;let f=d===1?4:6,m=6*(c+3*l+9*u+13);e(Y,a),o(Y,Y,s);let ee=this.getCenter(J);for(let e=0;e<f;e++){let t=pt[m+e];p(U,((1&t)<<1)-1,(2&t)-1,((4&t)>>1)-1),se(U,U,Y),te(G,ee,U),G[3]=1,oe(G,G,n);let r=1/Math.max(1e-6,G[3]);K[2*e]=G[0]*r,K[2*e+1]=G[1]*r}let ne=2*f-2,re=K[0]*(K[3]-K[ne+1])+K[ne]*(K[1]-K[ne-1]);for(let e=2;e<ne;e+=2)re+=K[e]*(K[e+3]-K[e-1]);return Math.abs(re)*r*i*.125}projectedRadius(e){let t=this.getQuaternion(H);return xe(V,t),h(U,e,V),Math.abs(U[0]*this._data[3])+Math.abs(U[1]*this._data[4])+Math.abs(U[2]*this._data[5])}minimumDistancePlane(e){return e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3]-this.projectedRadius(Se(e))}maximumDistancePlane(e){return e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3]+this.projectedRadius(Se(e))}toAaBoundingBox(t){let n=this.getQuaternion(H),r=e(Y,n),i=this._data[3]*Math.abs(r[0])+this._data[4]*Math.abs(r[3])+this._data[5]*Math.abs(r[6]),a=this._data[3]*Math.abs(r[1])+this._data[4]*Math.abs(r[4])+this._data[5]*Math.abs(r[7]),o=this._data[3]*Math.abs(r[2])+this._data[4]*Math.abs(r[5])+this._data[5]*Math.abs(r[8]);t[0]=this._data[0]-i,t[1]=this._data[1]-a,t[2]=this._data[2]-o,t[3]=this._data[0]+i,t[4]=this._data[1]+a,t[5]=this._data[2]+o}transform(e,t,n,r=0,i=Ee(n),a=Ee(t),o=pe(t,a)){if(n===i)t.isGeographic?yt(this,e,t,r,a):vt(this,e,t,r,a,o);else if(t.isWGS84&&(n.isWebMercator||he(n)))ht(t,this,n,e,r);else if(t.isWebMercator&&he(n))gt(t,this,n,e,r);else{let i=this.getCenter(J);i[2]+=r,de(i,t,0,i,n,0),e.center=i,this!==e&&(e.quaternion=this.getQuaternion(H),e.halfSize=this.getHalfSize(Ct))}}},V=ve(),H=ve(),dt=ve(),U=_(),W=_(),G=ie();function ft(e,t=new ut){return Me(e,t),t}var K=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],pt=(()=>{let e=new Int8Array(162),t=0,n=n=>{for(let r=0;r<n.length;r++)e[t+r]=n[r];t+=6};return n([6,2,3,1,5,4]),n([0,2,3,1,5,4]),n([0,2,3,7,5,4]),n([0,1,3,2,6,4]),n([0,1,3,2,0,0]),n([0,1,5,7,3,2]),n([0,1,3,7,6,4]),n([0,1,3,7,6,2]),n([0,1,5,7,6,2]),n([0,1,5,4,6,2]),n([0,1,5,4,0,0]),n([0,1,3,7,5,4]),n([0,2,6,4,0,0]),n([0,0,0,0,0,0]),n([1,3,7,5,0,0]),n([2,3,7,6,4,0]),n([2,3,7,6,0,0]),n([2,3,1,5,7,6]),n([0,1,5,7,6,2]),n([0,1,5,7,6,4]),n([0,1,3,7,6,4]),n([4,5,7,6,2,0]),n([4,5,7,6,0,0]),n([4,5,1,3,7,6]),n([0,2,3,7,5,4]),n([6,2,3,7,5,4]),n([6,2,3,1,5,4]),e})();function mt(e,t,i,a,o){let c=e.getQuaternion(H);o.quaternion=c,xe(V,c);let f=e.getCenter(J),m=e.getHalfSize(Ct);if(a===1){h(Z,f,V),u(Q,Z),s($,Q,m),r($,Q,$);let a=re($);te($,Q,m);let c=re($);if(a<i)o.center=f,p(Z,i,i,i),o.halfSize=te(Z,m,Z);else{let r=c>0?1+t/c:1,s=a>0?1+i/a:1,u=(s+r)/2,f=(s-r)/2;d($,Q,f),o.halfSize=n($,$,m,u),d($,Q,u),n($,$,m,f),l(Z,Z),ue(Z,$,Z);let p=e.getQuaternion(dt);o.center=h(Z,Z,p)}}else{o.center=n(Z,f,fe,(i+t)/2);let e=h(Z,fe,V);u(e,e),o.halfSize=n(Q,m,e,(i-t)/2)}return o}function ht(e,t,n,r,i){t.getCenter(J),J[2]+=i;let a=Ee(n);de(J,e,0,J,a,0),_t(a,t,J,n,r)}function gt(e,t,n,r,i){t.getCenter(J),J[2]+=i,_t(e,t,J,n,r)}function _t(t,n,r,i,a){let o=n.getQuaternion(H),s=e(Y,o),c=n.getHalfSize(Ct);for(let e=0;e<8;++e){for(let t=0;t<3;++t)q[t]=c[t]*(e&1<<t?-1:1);for(let t=0;t<3;++t){let n=r[t];for(let e=0;e<3;++e)n+=q[e]*s[3*e+t];bt[3*e+t]=n}}de(bt,t,0,bt,i,0,8),ft(xt,a)}function vt(e,n,i,a,o=Ee(i),s=pe(i,o)){e.getCorners(wt),e.getCenter(q),q[2]+=a,Te(i,q,X,o),n.setCenter(X[12],X[13],X[14]);let c=2*Math.sqrt(1+X[0]+X[5]+X[10]);V[0]=(X[6]-X[9])/c,V[1]=(X[8]-X[2])/c,V[2]=(X[1]-X[4])/c,V[3]=.25*c;let l=e.getQuaternion(H);n.quaternion=ye(V,V,l),xe(V,V),p(Q,0,0,0);let d=n.getCenter(St);for(let e of wt)e[2]+=a,s(e,0,e,0),r(Z,e,d),h(Z,Z,V),u(Z,Z),t(Q,Q,Z);n.halfSize=Q}function yt(e,t,n,r,i=Ee(n)){let a=ce(n),o=1+Math.max(0,r)/(a.radius+e.centerZ);e.getCenter(q),q[2]+=r,de(q,n,0,q,i,0),t.center=q;let s=e.getQuaternion(H);t.quaternion=s,xe(V,s),p(Z,0,0,1),h(Z,Z,V);let c=e.getHalfSize(Ct);p(Z,c[0]*Math.abs(Z[0]),c[1]*Math.abs(Z[1]),c[2]*Math.abs(Z[2])),d(Z,Z,a.inverseFlattening),te(Z,c,Z),t.halfSize=d(Z,Z,o)}var bt=Array(24),xt=new De(bt,3),q=_(),J=_(),St=_(),Ct=_(),Y=m(),X=c(),wt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Tt=[_(),_(),_()],Z=_(),Q=_(),$=_(),Et=ae(-1,-1,-1),Dt=_(),Ot=[0,0,0];export{Oe as i,mt as n,De as r,ut as t};