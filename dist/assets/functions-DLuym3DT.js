import{$p as e,BT as t,Bx as n,Cx as r,Jy as i,Ky as a,Ov as o,Qp as s,Qy as c,Sy as l,Ty as u,Xy as d,Yy as f,ZC as p,Zy as m,_y as h,by as g,cy as _,dy as v,fy as y,kv as b,my as x,nb as S,oy as C,px as w,py as T,sy as E,uy as ee,wn as D,wy as O,xy as k,yn as A}from"./index-ByaFsVj4.js";import{W as j,Y as M,at as N,ct as P,g as F,t as I,tt as L,v as R}from"./Dictionary-CX-Dz5lT.js";function z(e,t,n){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]!==void 0&&t[2]!==void 0?(e[2]*n-t[2]*n)**2:0))}function te(e,t,n){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]!==void 0&&t[2]!==void 0?(e[2]*n-t[2]*n)**2:0)}var B=[];for(let e of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){let t=e[0];for(let n=1;n<e.length;n++)B[e[n]]=t}var V=[];function H(e){return e.vcsWkid&&B[e.vcsWkid]!==void 0?V[B[e.vcsWkid]]:e.latestVcsWkid&&B[e.latestVcsWkid]!==void 0?V[B[e.latestVcsWkid]]:1}function U(e,t,n){let r=t[0]-e[0],i=t[1]-e[1];if(n){let e=t[2]-t[2];return Math.sqrt(r*r+i*i+e*e)}return Math.sqrt(r*r+i*i)}function ne(e,t,n){let r=t[0]-e[0],i=t[1]-e[1];if(n){let e=t[2]-t[2];return r*r+i*i+e*e}return r*r+i*i}function re(e,t){return e.x*t.x+e.y*t.y}function ie(e,t){return e.x*t.y-t.x*e.y}function W(e,t,n=0){for(;e<n;)e+=t;let r=n+t;for(;e>=r;)e-=t;return e}function G(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function ae(e,t){return W(G(e,t),2*Math.PI)*(180/Math.PI)}function oe(e,t){return W(Math.PI/2-G(e,t),2*Math.PI)*(180/Math.PI)}function K(e,t,n){let r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Math.atan2(ie(r,i),re(r,i))}function q(e,t,n){return p(W(K(e,t,n),2*Math.PI))}function se(e,t,n){return p(W(-1*K(e,t,n),2*Math.PI))}function ce(e,t,n){return Math.max(t,Math.min(n,e))}function le(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ue(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function de(e,t,n){let r=[n[0]-t[0],n[1]-t[1],n[2]-t[2]],i=ce(le(r,[e[0]-t[0],e[1]-t[1],e[2]-t[2]])/ue(r),0,1);return[t[0]+(n[0]-t[0])*i,t[1]+(n[1]-t[1])*i,t[2]+(n[2]-t[2])*i]}function fe(e,t,n){let r=0,i=n[0]-t[0],a=n[1]-t[1],o=i*i+a*a;return o===0?r=.5:(r=((e[0]-t[0])*i+(e[1]-t[1])*a)/o,r<0?r=0:r>1&&(r=1)),r<=.5?[t[0]+(n[0]-t[0])*r,t[1]+(n[1]-t[1])*r]:[n[0]-(n[0]-t[0])*(1-r),n[1]-(n[1]-t[1])*(1-r)]}V[9002]=.3048,V[9003]=.3048006096012192,V[9095]=.3048007491;function pe(e,n,r){if(h(n))return f(e,n,r);if(k(n)){let i=m(e,n,r)[0];if(i==null)throw new t(`closestPointOnCurve:unexpected-error`,`Failed to find close point on bezier curve`);return i}if(l(n)){let t=O(e,n);return i(t,r)}if(x(n)){let t=v(e,n);return i(t,r)}let a=E(e,n);return _(a,r)}function me(e,t,n=1){if(k(t))return c(e,t,n);if(l(t)){let n=O(e,t);return n.isInvalid?Math.sqrt(S(e,t.c[0])):a(n)}if(x(t)){let n=v(e,t);return n.isInvalid?Math.sqrt(S(e,t.a[0])):a(n)}return C(e,t,n)}var J=1e-6;function he(e,t,n,r){let i=m(e,t,n).filter(({distance:e})=>e<=r),a=[],o=0,s=t;for(let{t}of i){let n=(t-o)/(1-o);if(n<J||1-n<J)continue;let[r,i]=d(e,s,t);a.push(r),s=i,o=t}return a.push(s),a}function ge(e,t,n,r){let a=O(e,t);if(a.isInvalid)return[g(t)];let{t:o,distance:s}=i(a,n);return s<=r?u(a,t,o):[g(t)]}function _e(e,t,n,r){let a=v(e,t);if(a.isInvalid)return[g(t)];let{t:o,distance:s}=i(a,n);return s<=r?y(a,t,o):[g(t)]}function ve(e,t,n,r){let i=E(e,t);if(i.isInvalid)return[g(t)];let{t:a,distance:o}=_(i,n);return o<=r?ee(i,t,a):[g(t)]}function ye(e,t,n,r){return h(t)?[g(t)]:k(t)?he(e,t,n,r):l(t)?ge(e,t,n,r):x(t)?_e(e,t,n,r):ve(e,t,n,r)}function be(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function xe(e){let t=be(e);return[e[0]/t,e[1]/t,e[2]/t]}function Y(e,t,n,r){let i=xe([t[0]-e[0],t[1]-e[1],t[2]*r-e[2]*r]);return[e[0]+i[0]*n,e[1]+i[1]*n,e[2]+i[2]*n]}function X(e,t,n,r){return e+(t-e)/n*r}function Z(e,t,n){let r=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(r*r+i*i);return r/=a,i/=a,r*=n,i*=n,[e[0]+r,e[1]+i]}function Se(e,t){if(!e)return null;switch(e.type){case`extent`:case`multipoint`:case`mesh`:case`point`:return null}let r=e.type===`polygon`?e.rings:e.paths,i=1;if((e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(i=H(e.spatialReference)/n(e.spatialReference)),r.length===0||r[0].length===0||!1===e.hasM)return null;let a=-1,o=0,{hasM:s,hasZ:c}=e,l=c?3:2;for(let n of r){if(a++,n.length>0&&n[0][l]===t)return{partId:a,distanceAlong:o,coordinate:new w({hasZ:c,hasM:s,spatialReference:e.spatialReference,x:n[0][0],y:n[0][1],...c?{z:n[0][2]}:{},...s?{m:n[0][l]}:{}}),segmentId:0};let r=-1;for(let u=1;u<n.length;u++){let d=Q(n[u-1],n[u],c,i);r++;let f=n[u][l]-n[u-1][l],p=n[u][l];if(p===t)return{partId:a,distanceAlong:d+o,coordinate:new w({hasZ:c,hasM:s,spatialReference:e.spatialReference,x:n[u][0],y:n[u][1],...c?{z:n[u][2]}:{},...s?{m:n[u][l]}:{}}),segmentId:r};if(p>t&&t>n[u-1][l]){let p=(t-n[u-1][l])/f*d,m=c?Y(n[u-1],n[u],p,i):Z(n[u-1],n[u],p);m=[...m,t];let h=new w({hasZ:c,hasM:s,spatialReference:e.spatialReference,x:m[0],y:m[1],...c?{z:m[2]}:{},...s?{m:m[l]}:{}});return{partId:a,distanceAlong:o+Q(n[u-1],[h.x,h.y,...c?[h.z]:[],...s?[h.m]:[]],c,i),coordinate:h,segmentId:r}}o+=d}}return null}function Ce(e,t){if(!e)return null;switch(e.type){case`extent`:case`multipoint`:case`mesh`:case`point`:return null}let r=e.type===`polygon`?e.rings:e.paths;if(t<0)return null;let i=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(i=H(e.spatialReference)/n(e.spatialReference));let a=0,{hasZ:o,hasM:s}=e,c=o?3:2,l=-1;if(t===0)return r.length===0||r[0].length===0?null:{partId:0,coordinate:new w({hasZ:o,hasM:s,spatialReference:e.spatialReference,x:r[0][0][0],y:r[0][0][1],...o?{z:r[0][0][2]}:{},...s?{m:r[0][0][c]}:{}}),segmentId:0};for(let n of r){l++;let r=-1;for(let u=1;u<n.length;u++){r++;let d=Q(n[u-1],n[u],o,i),f=a+d;if(f===t)return{partId:l,coordinate:new w({hasZ:o,hasM:s,spatialReference:e.spatialReference,x:n[u][0],y:n[u][1],...o?{z:n[u][2]}:{},...s?{m:n[u][c]}:{}}),segmentId:r};if(f>t){let f=o?Y(n[u-1],n[u],t-a,i):Z(n[u-1],n[u],t-a);return f=[...f,X(n[u-1][c],n[u][c],d,t-a)],{partId:l,coordinate:new w({hasZ:o,hasM:s,spatialReference:e.spatialReference,x:f[0],y:f[1],...o?{z:f[2]}:{},...s?{m:f[c]}:{}}),segmentId:r}}a=f}}return null}function we(e,t){if(!e||!t)return null;let r=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(r=H(t.spatialReference)/n(t.spatialReference));let i=null,a=0;return i=e,a=e.hasZ&&t.hasZ?z([t.x,t.y,t.z],[e.x,e.y,e.z],r):U([t.x,t.y],[e.x,e.y],!1),{coordinate:i,distance:a}}function Te(e,t){if(!e||!t)return null;let r=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(r=H(t.spatialReference)/n(t.spatialReference));let i=null,a=0,o=Number.MAX_VALUE,s=-1,c=-1;for(let n of e.points||[]){c++;let i=e.hasZ&&t.hasZ?te([n[0],n[1],n[2]],[t.x,t.y,t.z],r):ne([n[0],n[1]],[t.x,t.y],!1);i<o&&(o=i,s=c)}return s<0?null:(a=o,i=e.getPoint(s),{coordinate:i,distance:Math.sqrt(a)})}function Ee(e,t){if(!e||!t)return null;let r=e.type===`polygon`?e.curveRings??e.rings:e.curvePaths??e.paths,i=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(i=H(t.spatialReference)/n(t.spatialReference));let a=Number.MAX_VALUE,o=-1,s=-1,c=-1,l=e.hasZ&&t.hasZ,u=null,d=l?[t.x,t.y,t.z]:[t.x,t.y];for(let e of r){s++;for(let t=1;t<e.length;t++){let n=De(d,e[t-1],e[t],l,i);n.distance<a&&(a=n.distance,u=n.closestPoint,c=s,o=t-1)}}if(o<0||!u)return null;let f=e.hasM&&e.hasZ?3:2,p=r[c][o],m=T(p),g=r[c][o+1],_=T(g),v=null,y=null,b=l?u[2]:null,x=h(g)?u:ye(m,g,u,.001)[0],S=Q(m,x,l,i),C=Q(m,g,l,i);e.hasM&&(y=X(m[f],_[f],C,S)),!e.hasZ||!1!==t.hasZ&&h(x)||(b=X(m[2],_[2],C,S),T(x)[2]=b,S=Q(m,x,!0,i)),v=new w({hasZ:l,hasM:e.hasM,spatialReference:t.spatialReference,x:u[0],y:u[1],...e.hasZ?{z:b}:{},...e.hasM?{m:y}:{}});let E=0;for(let t=0;t<=c;t++){let n=r[t],a=t===c?o:n.length-1;for(let t=1;t<=a;t++)E+=Q(T(n[t-1]),n[t],e.hasZ,i)}return E+=S,{partId:c,segmentId:o,coordinate:v,distance:a,distanceAlong:E}}function De(e,n,r,i,a){let o=T(n);if(h(r)){let t=i?de(e,o,r):fe(e,o,r);return{closestPoint:t,distance:i?z(t,e,a):U(t,e,!1)}}let s=pe(o,r,e);if(!s)throw new t(`arcade:closestPointOnSegment`,`The given point is not on the curve`);return{closestPoint:s.curvePoint,distance:s.distance}}function Q(e,t,n,r){return h(t)?n?z(e,t,r):U(e,t,!1):me(e,t,.001)}function $(e,t){if(!e||!t)return null;if(e.type===`extent`){let t=e;e=new b({spatialReference:e.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}switch(e.type){case`point`:return we(e,t)??null;case`multipoint`:return Te(e,t)??null;case`polygon`:case`polyline`:return Ee(e,t)??null;default:return null}}function Oe(e,t,n){if(M(e,2,2,t,n),!(e[0]instanceof r&&e[1]instanceof r)&&!(e[0]instanceof r&&e[1]===null)&&!(e[1]instanceof r&&e[0]===null)&&(e[0]!==null||e[1]!==null))throw new D(t,`InvalidParameter`,n)}function ke(e){if(e.type!==`polygon`&&e.type!==`polyline`&&e.type!==`extent`)return 0;let t=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(t=H(e.spatialReference)/n(e.spatialReference));let r=0;if(e.type===`polyline`)for(let n of e.paths)for(let e=1;e<n.length;e++)r+=z(n[e],n[e-1],t);else if(e.type===`polygon`)for(let n of e.rings){for(let e=1;e<n.length;e++)r+=z(n[e],n[e-1],t);(n[0][0]!==n[n.length-1][0]||n[0][1]!==n[n.length-1][1]||n[0][2]!==void 0&&n[0][2]!==n[n.length-1][2])&&(r+=z(n[0],n[n.length-1],t))}else e.type===`extent`&&(r+=2*z([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],t),r+=2*z([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],t),r*=2,r+=4*Math.abs(P(e.zmax,0)*t-P(e.zmin,0)*t));return r}var Ae=(t,n,i)=>{if(i=F(i),M(i,2,2,t,n),i[0]===null)return null;let a=i[0];if((e(i[0])||L(i[0]))&&(a=N(i[0],t.spatialReference)),a===null)return null;if(!(a instanceof r)||!(a instanceof o)||!s(i[1]))throw new D(t,`InvalidParameter`,n);let c=Se(a,i[1]);return c?I.convertObjectToArcadeDictionary(c,R(t),!1,!0):null},je=(t,n,i)=>{if(i=F(i),M(i,2,2,t,n),i[0]===null)return null;let a=i[0];if((e(i[0])||L(i[0]))&&(a=N(i[0],t.spatialReference)),a===null)return null;if(!(a instanceof r)||!(a instanceof o))throw new D(t,`InvalidParameter`,n);let s=i[1];if(s===null)return null;if(!(s instanceof w))throw new D(t,`InvalidParameter`,n);let c=$(a,s);return c?I.convertObjectToArcadeDictionary(c,R(t),!1,!0):null},Me=(t,n,i)=>{if(i=F(i),M(i,2,2,t,n),i[0]===null)return null;let a=i[0];if((e(i[0])||L(i[0]))&&(a=N(i[0],t.spatialReference)),a===null)return null;if(!(a instanceof r)||!(a instanceof o)||!s(i[1]))throw new D(t,`InvalidParameter`,n);let c=Ce(a,i[1]);return c?I.convertObjectToArcadeDictionary(c,R(t),!1,!0):null},Ne=new A([`geodesic`,`great-elliptic`,`loxodrome`,`normal-section`,`shape-preserving`]);function Pe(e){return e==null?`geodesic`:Ne.get(j(e))}var Fe=new A([`geometric`,`labelPoint`]);function Ie(e){return e==null?`geometric`:Fe.get(j(e))}var Le=new A([`round`,`bevel`,`miter`,`square`]);function Re(e){return e==null?`round`:Le.lookup(j(e))??`round`}export{je as a,Re as c,oe as d,ae as f,Oe as i,q as l,Ae as n,Me as o,Ie as r,ke as s,Pe as t,se as u};