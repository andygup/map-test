import{RS as e,oC as t,vC as n}from"./index-ByaFsVj4.js";import{t as r}from"./urlUtils-7tPnOsRB.js";import{t as i}from"./AttachmentInfo-DAeGX-7a.js";function a(e){let t=e.toJSON();return t.attachmentTypes&&=t.attachmentTypes.join(`,`),t.keywords&&=t.keywords.join(`,`),t.globalIds&&=t.globalIds.join(`,`),t.objectIds&&=t.objectIds.join(`,`),t.size&&=t.size.join(`,`),t.orderByFields&&=t.orderByFields.join(`,`),t}function o(e,r){let a={};for(let o of r){let{parentObjectId:r,parentGlobalId:s,attachmentInfos:c}=o;for(let o of c){let{id:c}=o,l=n(t(`${e.path}/${r}/attachments/${c}`)),u=i.fromJSON(o);u.set({url:l,parentObjectId:r,parentGlobalId:s}),a[r]?a[r].push(u):a[r]=[u]}}return a}function s(t,n,i){let o={query:r({...t.query,f:`json`,...a(n)})};return i&&(o={...i,...o,query:{...i.query,...o.query}}),e(t.path+`/queryAttachments`,o).then(e=>e.data.attachmentGroups)}async function c(t,n,r){let{objectIds:i}=n,a=[];for(let n of i)a.push(e(t.path+`/`+n+`/attachments`,r));return Promise.all(a).then(e=>i.map((t,n)=>({parentObjectId:t,attachmentInfos:e[n].data.attachmentInfos})))}export{s as executeAttachmentQuery,c as fetchAttachments,o as processAttachmentQueryResult};