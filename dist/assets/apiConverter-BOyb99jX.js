import{Ov as e,Zv as t,ax as n,kv as r,px as i}from"./index-CzMixifc.js";import{cn as a,kt as o}from"./Point2D-BslC4Gs9.js";import{Wn as s,_n as c,zn as l}from"./SpatialReference-BzfAMI5E.js";import{i as u,n as d,o as f,t as p}from"./jsonConverter-CYYMdpyx.js";var m=`_gxVersion`,h=2,g=1;function _(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function v(e){switch(e.type){case`point`:return x(e);case`multipoint`:return b(e);case`polyline`:return C(e);case`polygon`:return S(e);case`extent`:return y(e);default:throw Error(`Unsupported geometry type: ${e.type}`)}}function y(e){if(!e.getCacheValue(m)){let t=new l;t.setCoords(e.xmin,e.ymin,e.xmax,e.ymax),e.hasM&&t.setInterval(h,0,e.mmin,e.mmax),e.hasZ&&t.setInterval(g,0,e.zmin,e.zmax),e.setCacheValue(m,t)}return e.getCacheValue(m)}function b(e){if(!e.getCacheValue(m)){let t=new c,n=new s,r=e.points,i=e.hasM,a=e.hasZ,o=a?3:2;for(let e=0,s=r.length;e<s;e++){let s=r[e];n.setXYCoords(s[0],s[1]),a&&n.setZ(s[2]??0),i&&n.setM(s[o]??NaN),t.add(n)}e.setCacheValue(m,t)}return e.getCacheValue(m)}function x(e){if(!e.getCacheValue(m)){let t=new s;t.setXYCoords(e.x,e.y),e.hasM&&t.setM(e.m),e.hasZ&&t.setZ(e.z),e.setCacheValue(m,t)}return e.getCacheValue(m)}function S(e){if(!e.getCacheValue(m)){let{curveRings:t,hasM:n,hasZ:r,rings:i}=e,a=f({curveRings:t,hasM:n,hasZ:r,rings:i});e.setCacheValue(m,a)}return e.getCacheValue(m)}function C(e){if(!e.getCacheValue(m)){let{curvePaths:t,hasM:n,hasZ:r,paths:i}=e,a=f({curvePaths:t,hasM:n,hasZ:r,paths:i});e.setCacheValue(m,a)}return e.getCacheValue(m)}function w(e){if(!e.getCacheValue(m)){let{curvePaths:t,hasM:n,hasZ:r,paths:i}=e,a=u({curvePaths:t,hasM:n,hasZ:r,paths:i});e.setCacheValue(m,a)}return e.getCacheValue(m)}function T(e){return d(e)}function E(e,t){if(e)switch(e.getGeometryType()){case a.enumPoint:return k(e,t);case a.enumEnvelope:return D(e,t);case a.enumMultiPoint:return O(e,t);case a.enumPolyline:return j(e,t);case a.enumPolygon:return A(e,t)}return null}function D(e,t){if(e.isEmpty())return null;let r=new n({xmin:e.getXMin(),ymin:e.getYMin(),xmax:e.getXMax(),ymax:e.getYMax(),spatialReference:t}),i=e.getDescription();if(i.hasM()){let t=e.queryInterval(h,0);r.mmin=t.vmin,r.mmax=t.vmax}if(i.hasZ()){let t=e.queryInterval(g,0);r.zmin=t.vmin,r.zmax=t.vmax}return r.setCacheValue(m,e),r}function O(e,n){if(e.isEmpty())return null;let r=e.getDescription(),i=r.hasM(),a=r.hasZ(),o=[],c=new s;for(let t=0,n=e.getPointCount();t<n;t++){e.getPointByVal(t,c);let n=[c.getX(),c.getY()];a&&n.push(c.getZ()),i&&n.push(c.getM()),o.push(n)}let l=new t({hasM:i,hasZ:a,points:o,spatialReference:n});return l.setCacheValue(m,e),l}function k(e,t){if(e instanceof o)return new i({x:e.x,y:e.y,spatialReference:t});if(e.isEmpty())return null;let n=new i({x:e.getX(),y:e.getY(),spatialReference:t}),r=e.getDescription();return r.hasM()&&(n.m=e.getM()),r.hasZ()&&(n.z=e.getZ()),n.setCacheValue(m,e),n}function A(e,t){if(e.isEmpty())return null;let n=r.fromJSON({...p(e,null),spatialReference:t});return n.setCacheValue(m,e),n}function j(t,n){if(t.isEmpty())return null;let r=e.fromJSON({...p(t,null),spatialReference:n});return r.setCacheValue(m,t),r}export{D as a,j as c,w as d,x as f,k as h,S as i,C as l,b as m,E as n,y as o,T as p,v as r,A as s,_ as t,O as u};