import{$x as e,Hl as t,Jm as n,Qm as r,Rl as i,gS as a,mx as o,nS as s,uw as c,y_ as l}from"./index-BN8X5Ryz.js";import{M as u,a as d}from"./plane-Da5EsY0J.js";import{t as f}from"./vectorStacks-Cuo89CNO.js";import{n as p}from"./projectPointToVector-BkRdoTqD.js";import{t as m}from"./spatialReferenceEllipsoidUtils-qw9wv8RL.js";import{t as h}from"./projectVectorToVector-DGzn2p7I.js";import{r as g,t as _}from"./sphere-d9-4vNcj.js";import{o as v,r as y}from"./boundedPlane-DKHNKWJN.js";import{u as b}from"./graphicUtils-Ct1OT6JD.js";function x(e,t,n){return!!h(e,t,S,n.spatialReference)&&(n.x=S[0],n.y=S[1],n.z=S[2],!0)}var S=l();function C(e){let{value:t,operations:n}=e;return{operations:n,value:n.create(t)}}function w(e,t,n){return e.operations.setExtent(e.value,t,n.value),n}function T(e,t){return e.operations.getExtent(e.value,t),t}function E(e){return{operations:e,value:e.create()}}function D(e,t,n=E(e)){return n.operations=e,e.copy(t,n.value),n}function O(e){return D(_,new g(0,0,0,a(e).radius))}var k=2**50;function A(){return D(v,y([0,0,0],[k,0,0],[0,k,0]))}function j(e,t,n){return e.operations.axisAt(e.value,t,2,n)}function M(e,t,n,r){return e.operations.axisAt(e.value,t,n,r)}function N(e,t,n){return e.operations.intersectRay(e.value,t,n)}function P(e,t,n){return e.operations.intersectRayClosestSilhouette(e.value,t,n)}function F(e,t){return e.operations.altitudeAt(e.value,t)}function I(e,t,n,r){return e.operations.setAltitudeAt(e.value,t,n,r)}function L(e,t,r,a){return t!==a&&n(a,t),i(z,a[12],a[13],a[14]),I(e,z,r,z),a[12]=z[0],a[13]=z[1],a[14]=z[2],a}function R(e,t,n){return e.operations.elevate(e.value,t,n.value)}var z=l();l();var B=class n{constructor(e,t,n,r){this.viewingMode=e,this.spatialReference=t,this.unitInMeters=n,this._coordinateSystem=r,this._tmpCoordinateSystem=C(r),this.referenceEllipsoid=a(t),this.sphericalPCPF=m(t)}set extent(e){e&&w(this._coordinateSystem,e,this._coordinateSystem)}get extent(){return T(this._coordinateSystem,o())}getAltitude(e){return F(this._coordinateSystem,e)}setAltitude(e,t,n=e){return I(this._coordinateSystem,n,t,e)}setAltitudeOfTransformation(e,t){L(this._coordinateSystem,t,e,t)}worldUpAtPosition(e,t){return j(this._coordinateSystem,e,t)}worldBasisAtPosition(e,t,n){return M(this._coordinateSystem,e,t,n)}basisMatrixAtPosition(e,t){let n=this.worldBasisAtPosition(e,0,f.get()),i=this.worldBasisAtPosition(e,1,f.get()),a=this.worldBasisAtPosition(e,2,f.get());return r(t,n[0],n[1],n[2],0,i[0],i[1],i[2],0,a[0],a[1],a[2],0,0,0,0,1),t}headingAtPosition(e,t){let n=this.worldUpAtPosition(e,f.get()),r=this.worldBasisAtPosition(e,1,f.get()),i=u(t,r,n);return c(i)}intersectManifoldClosestSilhouette(e,t,n){return R(this._coordinateSystem,t,this._tmpCoordinateSystem),P(this._tmpCoordinateSystem,e,n),n}intersectManifold(e,n,r){R(this._coordinateSystem,n,this._tmpCoordinateSystem);let i=f.get();return N(this._tmpCoordinateSystem,e,i)?t(r,i):null}intersectInfiniteManifold(e,n,r){if(this.viewingMode===1)return this.intersectManifold(e,n,r);R(this._coordinateSystem,n,this._tmpCoordinateSystem);let i=this._tmpCoordinateSystem.value,a=f.get();return d(i.plane,e,a)?t(r,a):null}toRenderCoords(e,t,n){return b(e)?p(e,t,this.spatialReference):h(e,t,n,this.spatialReference)}fromRenderCoords(e,t,n=null){return b(t)?(n!=null&&(t.spatialReference=n),x(e,this.spatialReference,t)?t:null):h(e,this.spatialReference,t,n)?t:null}static create(t,r){switch(t){case 2:return new n(2,r,e(r),A());case 1:return new n(1,r,1,O(r))}}static renderUnitScaleFactor(e,t){return s(e)/s(t)}};export{B as t};