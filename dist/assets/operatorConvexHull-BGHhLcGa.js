import{Cn as e,cn as t,dn as n,in as r,mn as i,rn as a,vn as o}from"./Point2D-7VmvyXN4.js";import{t as s}from"./Envelope2D-Cwxt0azx.js";import{Sn as c,Wn as l,an as u,bn as d,mn as f,rn as p,un as m,yn as h}from"./SpatialReference-HLIf1Z5k.js";import{n as g,t as _}from"./SimpleGeometryCursor-5wFw2ZZo.js";var v=class{getOperatorType(){return 10102}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,n){return new y(t,e,n)}execute(e,t){return x(e)}isConvex(e,r){if(i(e),e.isEmpty())return!0;let a=e.getGeometryType();if(a===t.enumPoint)return!0;if(a===t.enumEnvelope){let t=e;return t.getXMin()!==t.getXMax()&&t.getYMin()!==t.getYMax()}if(n(a)){let t=e;return!t.getStartXY().equals(t.getEndXY())}if(a===t.enumMultiPoint)return e.getPointCount()===1;if(a===t.enumPolyline){let t=e;return t.getPathCount()===1&&t.getPointCount()===2&&!t.getXY(0).equals(t.getXY(1))}if(a===t.enumGeometryCollection){let t=e;return t.getGeometryCount()===1&&this.isConvex(t.getGeometry(0),r)}let o=e;return!(o.getPathCount()!==1||o.getPointCount()<3)&&f(o,0)}constructOrientedMinimumBoundingBox(e,t,n,r,i){u(e,t,n,r,i)}},y=class extends g{constructor(e,t,n){super(),t||r(``),this.m_progressTracker=n,this.m_index=-1,this.m_bMerge=e,this.m_bDone=!1,this.m_inputGeometryCursor=t}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}next(){if(this.m_bMerge){if(!this.m_bDone){let e=b(this.m_inputGeometryCursor);return this.m_bDone=!0,e}return null}if(!this.m_bDone){let e=this.m_inputGeometryCursor.next();if(e!==null)return a(e),i(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),x(e);this.m_bDone=!0}return null}};function b(e,t){let n=new p,r;for(;r=e.next();)a(r),i(r),n.addGeometry(r);return n.getBoundingGeometry()}function x(r,a){if(i(r),r.isEmpty())return r.createInstance();let u=r.getGeometryType();if(n(u)){let e=r;if(e.isDegenerate(0)){let t=new l;return e.queryStart(t),t}if(e.getGeometryType()===t.enumLine){let t=new l,n=new m({vd:r.getDescription()});return e.queryStart(t),n.startPathPoint(t),e.queryEnd(t),n.lineToPoint(t),n}{let t=new m({vd:r.getDescription()});return t.addSegment(e,!0),x(t)}}if(u===t.enumEnvelope){let e=r,t=new s;if(e.queryEnvelope(t),t.xmin===t.xmax&&t.ymin===t.ymax){let t=new l;return e.queryCornerByVal(0,t),t}if(t.xmin===t.xmax||t.ymin===t.ymax){let t=new l,n=new m({vd:r.getDescription()});return e.queryCornerByVal(0,t),n.startPathPoint(t),e.queryCornerByVal(1,t),n.lineToPoint(t),n}{let t=new h({vd:r.getDescription()});return t.addEnvelope(e,!1),t}}if(u===t.enumGeometryCollection)return b(d(r,-1));if(S(r)){if(u===t.enumMultiPoint){let e=r,t=new l;return e.getPointByVal(0,t),t}return r}return o(e(u)),c(r)}function S(e,r){if(i(e),e.isEmpty())return!0;let a=e.getGeometryType();if(a===t.enumPoint)return!0;if(a===t.enumEnvelope){let t=e;return t.getXMin()!==t.getXMax()&&t.getYMin()!==t.getYMax()}if(n(a)){let n=e;if(n.isDegenerate(0))return!1;if(a===t.enumLine)return!0;let r=new m;return r.addSegment(n,!0),S(r)}if(a===t.enumMultiPoint)return e.getPointCount()===1;if(a===t.enumPolyline){let t=e;return!t.hasNonLinearSegments()&&t.getPathCount()===1&&t.getPointCount()===2&&!t.getXY(0).equals(t.getXY(1))}if(a===t.enumGeometryCollection){let t=e;return t.getGeometryCount()===1&&S(t.getGeometry(0))}let o=e;return!(o.getPathCount()!==1||o.getPointCount()<3)&&f(o,0)}var C=new v;function w(e){return C.execute(e,null)}function T(e,t){let n=C.executeMany(new _(e),t,null);return Array.from(n)}function E(e){return C.isConvex(e,null)}function D(){return C.supportsCurves()}export{w as i,T as n,D as r,E as t};