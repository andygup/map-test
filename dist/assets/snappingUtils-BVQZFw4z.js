import{Gh as e,Jp as t,Pl as n,Wa as r,bw as i,ed as a,kh as o,nv as s,rd as c,rv as l}from"./index-CzMixifc.js";import{n as u}from"./dehydratedPoint-CVzHYxaL.js";import{h as d}from"./LineSnappingHint-C4TfMb_L.js";var f=Symbol(`grid-placement-graphic`);function p(e,t){let n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function m(e,t){return Math.sqrt(p(e,t))}function h(e,t){t.sort((t,r)=>n(t.targetPoint,e)-n(r.targetPoint,e))}function g({parameters:{point:e,distance:n,returnEdge:r,vertexMode:i,coordinateHelper:{spatialReference:a},filter:s},mode:l,returnZ:d,filter:f}){let p=f?.clone()??new c({where:`1=1`});return p.returnZ=d??l===`3d`,s&&(p.geometry=s.geometry,p.distance=s.distance,p.spatialRelationship=s.spatialRelationship,p.where=t(p.where,s.where),p.timeExtent=o(p.timeExtent,s.timeExtent),p.objectIds=_(p.objectIds,s.objectIds)),{point:u(e[0],e[1],e[2],a.toJSON()),mode:l,distance:n,returnEdge:r,vertexMode:i,query:p.toJSON()}}function _(e,t){return e||t?t?e?Array.from(i(new Set(e),new Set(t))):t:e:null}function v(e,t,n){return{left:d(e.leftVertex.pos,t,n),right:d(e.rightVertex.pos,t,n)}}var y=Symbol(`snapping-toggle`);function b(t,n=()=>{}){let r=s(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:r,snappingOptions:i})=>{if(t.removeHandles(y),!r||!i)return;let o=e.TOOL,s=[r.on(`key-down`,e=>{e.key!==a.toggle||e.repeat||(i.enabledToggled=!0,n())},o),r.on(`key-up`,e=>{e.key===a.toggle&&(i.enabledToggled=!1,n())},o),r.on(`pointer-move`,e=>{let t=e.native.ctrlKey;i.enabledToggled!==t&&(i.enabledToggled=t,n())},o)];t.addHandles(s,y)},l);t.addHandles(r)}function x(e){return r(e)&&`utilityNetworks`in e&&!!e.utilityNetworks?.length}function S(e){return e?.type===`line`}export{v as a,x as c,g as i,h as l,m as n,S as o,p as r,b as s,f as t};