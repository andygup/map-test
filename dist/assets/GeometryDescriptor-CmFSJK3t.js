import{Ex as e,Kg as t,Vg as n,cy as r,zv as i}from"./index-BN8X5Ryz.js";var a=class a{constructor(e){this.geometry=e,this.spatialReference=e.spatialReference}export(){return this._exporter(this.coordinates,this.spatialReference)}clone(e){let t=new a(this.geometry);return t.spatialReference=this.spatialReference,t.coordinates=e??this.coordinates.map(e=>e.clone()),t._exporter=this._exporter,t}async project(e,i){if(this.spatialReference.equals(e))return this.clone();await n([{source:this.spatialReference,dest:e}],{signal:i});let a=new r({spatialReference:this.spatialReference,points:this.coordinates.map(e=>[e.x,e.y])}),o=t(a,e);if(!o)return null;let s=this.coordinates.map((e,t)=>{let n=e.clone(),r=o.points[t];return n.x=r[0],n.y=r[1],n}),c=this.clone(s);return c.spatialReference=e,c}static fromGeometry(t){let n=new a(t);if(t instanceof a)return n.coordinates=t.coordinates.map(e=>e.clone()),n._exporter=(e,n)=>{let r=t.clone(e);return r.spatialReference=n,r},n;switch(t.type){case`point`:{let r=t,{hasZ:i,hasM:a}=r;return n.coordinates=i&&a?[new o(r.x,r.y,r.z,r.m)]:i?[new o(r.x,r.y,r.z)]:a?[new o(r.x,r.y,null,r.m)]:[new o(r.x,r.y)],n._exporter=(n,r)=>t.hasM?new e(n[0].x,n[0].y,n[0].z,n[0].m,r):new e(n[0].x,n[0].y,n[0].z,r),n}case`multipoint`:{let e=t,{hasZ:i,hasM:a}=e;return n.coordinates=i&&a?e.points.map(e=>new o(e[0],e[1],e[2],e[3])):i?e.points.map(e=>new o(e[0],e[1],e[2])):a?e.points.map(e=>new o(e[0],e[1],null,e[2])):e.points.map(e=>new o(e[0],e[1])),n._exporter=(e,n)=>t.hasM?new r({points:e.map(e=>[e.x,e.y,e.z??0,e.m??0]),hasZ:!0,hasM:!0,spatialReference:n}):new r({points:e.map(e=>[e.x,e.y,e.z??0]),spatialReference:n}),n}case`polyline`:{let e=t,r=[],a=[],{hasZ:s,hasM:c}=t,l=0;for(let t of e.paths)if(a.push([l,l+t.length]),l+=t.length,s&&c)for(let e of t)r.push(new o(e[0],e[1],e[2],e[3]));else if(s)for(let e of t)r.push(new o(e[0],e[1],e[2]));else if(c)for(let e of t)r.push(new o(e[0],e[1],null,e[2]));else for(let e of t)r.push(new o(e[0],e[1]));return n.coordinates=r,n._exporter=(e,n)=>{let r=t.hasM?e.map(e=>[e.x,e.y,e.z??0,e.m??0]):e.map(e=>[e.x,e.y,e.z??0]),o=a.map(e=>r.slice(e[0],e[1]));return new i({paths:o,hasM:t.hasM,hasZ:!0,spatialReference:n})},n}}}},o=class e{constructor(e,t,n=null,r=null,i=null,a=null){this.x=e,this.y=t,this.z=n,this.m=r,this.tile=i,this.elevationTile=a}clone(){return new e(this.x,this.y,this.z,this.m)}};export{a as t};