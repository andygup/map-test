const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/meshFeatureSet-DWWbWAOC.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css","assets/earcut-CEMcWA4Z.js","assets/vec3-B5yu4INg.js","assets/vec4-BLZ_ZPtE.js","assets/vectorStacks-Cuo89CNO.js","assets/quatf64-D37SEdPg.js","assets/quat-C8PgLo31.js","assets/Mesh-CfQb5rZ2.js","assets/computeTranslationToOriginAndRotation-0WDVmpJG.js","assets/projectPointToVector-BkRdoTqD.js","assets/spatialReferenceEllipsoidUtils-qw9wv8RL.js","assets/MeshComponent-BFk18JiH.js","assets/MeshMaterialMetallicRoughness-Bdr2gXmV.js","assets/meshCloneUtils-BXMzy817.js","assets/meshProperties-CbjLwdbT.js","assets/MeshLocalVertexSpace-vomIk0sx.js","assets/MeshTransform-BaPjlQwH.js","assets/axisAngleDegrees-DzAS4tF-.js","assets/MeshVertexAttributes-CBsb_nVo.js","assets/External-C55iwtd6.js","assets/vertexSpaceConversion-Dz87RqR7.js","assets/BufferView-BW77W5ev.js","assets/Util-BQgFCZvD.js","assets/meshVertexSpaceUtils-s2jLb8qI.js","assets/triangulationUtils-DNxIB1ux.js","assets/Indices-tJiSUK6w.js","assets/deduplicate-D-tDe87s.js","assets/plane-Da5EsY0J.js","assets/meshFeatureAttributes-DdbGwu_X.js","assets/RelationshipQuery-sAHvn5qd.js","assets/executeRelationshipQuery-IN0kxjX5.js","assets/urlUtils-CW4cnJ3W.js","assets/queryRelatedRecords-D3kRWjXS.js","assets/queryAttachments-Cb_Sj9n-.js","assets/AttachmentInfo-DsQfdj7K.js","assets/executeAttributeBinsQuery-C3Au1SB2.js","assets/AttributeBinsFeatureSet-B5vZtDTA.js","assets/queryUtils-DGU5ISbw.js","assets/FixedIntervalBinParameters-CMgMaWGN.js","assets/AttributeBinsQuery-sRteDZ8D.js","assets/executePivotQuery-DiGzgjQo.js","assets/queryUtils-8f7b9mi_.js","assets/PivotQuery-BmAzsJNe.js","assets/executeTopFeaturesQuery-DeviUT3-.js","assets/queryTopFeatures-CN7JfrbZ.js","assets/TopFeaturesQuery-BpDoSt_1.js","assets/executeForTopIds-BTLA8YUi.js","assets/executeForTopExtents-B7FaCcWw.js","assets/executeForTopCount-AVV3YF3H.js"])))=>i.map(i=>d[i]);
import{$S as e,$T as t,AS as n,Aw as r,BT as i,ED as a,Tu as o,VT as s,Wn as c,fT as l,ha as u,kC as d,kD as f,pd as p,vd as m}from"./index-BN8X5Ryz.js";import{n as h,r as g,t as _}from"./executeForIds-Dq7stXFh.js";import{t as v}from"./executeQueryJSON-DJO3NDvM.js";import{t as y}from"./executeQueryPBF-i-SuhVUp.js";var b=class extends r{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return d(this.url)}async execute(e,t){let n=await this.executeJSON(e,t);return this.featureSetFromJSON(e,n,t)}async executeJSON(e,t){let n=this._normalizeQuery(e),r=e.outStatistics?.[0]!=null,i=a(`featurelayer-pbf-statistics`),o=(!r||i)&&!0!==e.returnTrueCurves,s;if(this.pbfSupported&&o)try{s=await y(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})}catch(e){if(e.name!==`query:parsing-pbf`)throw e;this.pbfSupported=!1}return this.pbfSupported&&o||(s=await v(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(s.fields),s}async featureSetFromJSON(t,n,r){if(!this._queryGet3DObjectFormat(t)||this.infoFor3D==null||!n.features)return u.fromJSON(n);let{meshFeatureSetFromJSON:i}=await l(e(()=>import(`./meshFeatureSet-DWWbWAOC.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])),r);return i(t,this.infoFor3D,n)}executeForCount(e,t){return g(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,t){return h(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return _(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(t,n){let[{default:r},{executeRelationshipQuery:i}]=await l(Promise.all([e(()=>import(`./RelationshipQuery-sAHvn5qd.js`),__vite__mapDeps([31,1,2])),e(()=>import(`./executeRelationshipQuery-IN0kxjX5.js`),__vite__mapDeps([32,1,2,33,34]))]),n),a=r.from(t);return(this.gdbVersion||this.dynamicDataSource)&&(a=a.clone(),a.gdbVersion=a.gdbVersion||this.gdbVersion,a.dynamicDataSource=a.dynamicDataSource||this.dynamicDataSource),i(this.url,a,n)}async executeRelationshipQueryForCount(t,n){let[{default:r},{executeRelationshipQueryForCount:i}]=await l(Promise.all([e(()=>import(`./RelationshipQuery-sAHvn5qd.js`),__vite__mapDeps([31,1,2])),e(()=>import(`./executeRelationshipQuery-IN0kxjX5.js`),__vite__mapDeps([32,1,2,33,34]))]),n),a=r.from(t);return(this.gdbVersion||this.dynamicDataSource)&&(a=a.clone(),a.gdbVersion=a.gdbVersion||this.gdbVersion,a.dynamicDataSource=a.dynamicDataSource||this.dynamicDataSource),i(this.url,a,n)}async executeAttachmentQuery(t,n){let{executeAttachmentQuery:r,fetchAttachments:i,processAttachmentQueryResult:a}=await l(e(()=>import(`./queryAttachments-Cb_Sj9n-.js`),__vite__mapDeps([35,1,2,36,33])),n),s=o(this.url);return a(s,await(this.queryAttachmentsSupported?r(s,t,n):i(s,t,n)))}async executeAttributeBinsQuery(t,n){let{executeAttributeBinsQuery:r}=await l(e(()=>import(`./executeAttributeBinsQuery-C3Au1SB2.js`),__vite__mapDeps([37,1,2,38,39,33,40,41])),n);return r(this.parsedUrl,t,n)}async executePivotQuery(t,n){let{executePivotQuery:r}=await l(e(()=>import(`./executePivotQuery-DiGzgjQo.js`),__vite__mapDeps([42,1,2,33,43,44])),n);return r(this.parsedUrl,t,n)}async executeTopFeaturesQuery(t,n){let{executeTopFeaturesQuery:r}=await l(e(()=>import(`./executeTopFeaturesQuery-DeviUT3-.js`),__vite__mapDeps([45,1,2,33,46,47])),n);return r(this.parsedUrl,t,this.sourceSpatialReference,n)}async executeForTopIds(t,n){let{executeForTopIds:r}=await l(e(()=>import(`./executeForTopIds-BTLA8YUi.js`),__vite__mapDeps([48,1,2,33,46,47])),n);return r(this.parsedUrl,t,n)}async executeForTopExtents(t,n){let{executeForTopExtents:r}=await l(e(()=>import(`./executeForTopExtents-B7FaCcWw.js`),__vite__mapDeps([49,1,2,33,46,47])),n);return r(this.parsedUrl,t,n)}async executeForTopCount(t,n){let{executeForTopCount:r}=await l(e(()=>import(`./executeForTopCount-AVV3YF3H.js`),__vite__mapDeps([50,1,2,33,46,47])),n);return r(this.parsedUrl,t,n)}_normalizeQuery(e){let r=p.from(e);r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===e?r.clone():r,r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?m.from(e.dynamicDataSource):this.dynamicDataSource);let{infoFor3D:i}=this,a=this._queryGet3DObjectFormat(e);if(i!=null&&a){if(r=r===e?r.clone():r,r.formatOf3DObjects=a,r.outSpatialReference&&!n(r.outSpatialReference,this.sourceSpatialReference))throw new t(`query:unsupported-out-spatial-reference`,`3D object feature services do not support projection of geometries`);if(r.outFields==null||!r.outFields.includes(`*`)){r=r===e?r.clone():r,r.outFields??=[];let{originX:t,originY:n,originZ:a,translationX:o,translationY:s,translationZ:c,scaleX:l,scaleY:u,scaleZ:d,rotationX:f,rotationY:p,rotationZ:m,rotationDeg:h}=i.transformFieldRoles;r.outFields.push(t,n,a,o,s,c,l,u,d,f,p,m,h)}}return r}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(let t of e){let e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryGet3DObjectFormat({returnGeometry:e,multipatchOption:t,outStatistics:n}){return!0!==e||t===`xyFootprint`||n?null:c(this.infoFor3D)}};f([i({type:m})],b.prototype,`dynamicDataSource`,void 0),f([i()],b.prototype,`fieldsIndex`,void 0),f([i()],b.prototype,`gdbVersion`,void 0),f([i()],b.prototype,`infoFor3D`,void 0),f([i({readOnly:!0})],b.prototype,`parsedUrl`,null),f([i()],b.prototype,`pbfSupported`,void 0),f([i()],b.prototype,`queryAttachmentsSupported`,void 0),f([i()],b.prototype,`sourceSpatialReference`,void 0),f([i()],b.prototype,`uniqueIdFields`,void 0),f([i({type:String})],b.prototype,`url`,void 0),b=f([s(`esri.layers.graphics.sources.support.QueryTask`)],b);export{b as t};