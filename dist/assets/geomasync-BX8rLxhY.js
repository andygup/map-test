const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/unitConversion-BhTHfSP0.js","assets/unitConversion-BEfQFMd-.js","assets/index-CzMixifc.js","assets/index-CDgdHpAj.css"])))=>i.map(i=>d[i]);
import{$p as e,BS as t,Cx as n,Ih as r,Ov as i,RS as a,Zv as o,aC as s,ax as c,hn as l,kv as u,px as d,tD as f,vv as p,wn as m}from"./index-CzMixifc.js";import{$ as h,C as g,D as _,J as v,K as y,O as b,W as x,Y as S,at as C,ct as w,g as T,k as E,o as D,s as O,t as k,tt as A,u as j,v as M}from"./Dictionary-CGt1qKCN.js";import{a as N,c as P,i as F,n as I,o as L,r as R,s as z,t as B}from"./functions-CroXKA2K.js";import{t as V}from"./ArcadePortal-CAomFS7x.js";import{t as H}from"./portalUtils-bqU8Rp5_.js";import{t as U}from"./operatorsWorkerConnection-D_CeJsIM.js";async function W(e,t,n){if(!s?.findCredential(e.restUrl))return null;if(e.loadStatus===`loaded`&&t===``&&e.user?.sourceJSON&&!1===n)return e.user.sourceJSON;let r={responseType:`json`,query:{f:`json`}};if(n&&(r.query.returnUserLicenseTypeExtensions=!0),t===``){let t=await a(e.restUrl+`/community/self`,r);if(t.data){let e=t.data;if(e?.username)return e}return null}let i=await a(e.restUrl+`/community/users/`+t,r);if(i.data){let e=i.data;return e.error?null:e}return null}function G(e){if(e==null)return e;switch(typeof e){case`string`:case`number`:return e;default:throw new m(null,`InvalidParameter`,null)}}function K(a){a.mode===`async`&&(a.functions.disjoint=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]===null||i[1]===null||U(`disjoint`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.intersects=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`intersects`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.touches=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`touches`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.crosses=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`crosses`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.within=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`within`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.contains=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`contains`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.overlaps=function(e,t){return a.standardFunctionAsync(e,t,(n,r,i)=>(i=T(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`overlaps`,[i[0].toJSON(),i[1].toJSON()])))},a.functions.equals=function(e,t){return a.standardFunctionAsync(e,t,(r,i,a)=>(S(a,2,2,e,t),a[0]===a[1]||(a[0]instanceof n&&a[1]instanceof n?U(`equals`,[a[0].toJSON(),a[1].toJSON()]):(v(a[0])&&v(a[1])||!!(y(a[0])&&y(a[1])||h(a[0])&&h(a[1])))&&a[0].equals(a[1]))))},a.functions.relate=function(e,t){return a.standardFunctionAsync(e,t,(r,i,a)=>{if(a=T(a),S(a,3,3,e,t),a[0]instanceof n&&a[1]instanceof n)return U(`relate`,[a[0].toJSON(),a[1].toJSON(),x(a[2])]);if(a[0]instanceof n&&a[1]===null||a[1]instanceof n&&a[0]===null||a[0]===null&&a[1]===null)return!1;throw new m(e,`InvalidParameter`,t)})},a.functions.intersection=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>(i=T(i),F(i,e,t),i[0]===null||i[1]===null?null:p(await U(`intersection`,[i[0].toJSON(),i[1].toJSON()]))))},a.functions.union=function(t,r){return a.standardFunctionAsync(t,r,async(i,a,o)=>{if((o=T(o)).length===0)throw new m(t,`WrongNumberOfParameters`,r);let s=[];if(o.length===1)if(e(o[0])){for(let e of T(o[0]))if(e!==null){if(!(e instanceof n))throw new m(t,`InvalidParameter`,r);s.push(e.toJSON())}}else{if(!A(o[0])){if(o[0]instanceof n)return j(l(o[0]),t.spatialReference);if(o[0]===null)return null;throw new m(t,`InvalidParameter`,r)}for(let e of T(o[0].toArray()))if(e!==null){if(!(e instanceof n))throw new m(t,`InvalidParameter`,r);s.push(e.toJSON())}}else for(let e of o)if(e!==null){if(!(e instanceof n))throw new m(t,`InvalidParameter`,r);s.push(e.toJSON())}return s.length===0?null:p(await U(`union`,[s]))})},a.functions.difference=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>(i=T(i),F(i,e,t),i[0]===null?null:i[1]===null?l(i[0]):p(await U(`difference`,[i[0].toJSON(),i[1].toJSON()]))))},a.functions.symmetricdifference=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>(i=T(i),F(i,e,t),i[0]===null&&i[1]===null?null:i[0]===null?l(i[1]):i[1]===null?l(i[0]):p(await U(`symmetricDifference`,[i[0].toJSON(),i[1].toJSON()]))))},a.functions.clip=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,2,e,t),!(a[1]instanceof c)&&a[1]!==null)throw new m(e,`InvalidParameter`,t);if(a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);return a[1]===null?null:p(await U(`clip`,[a[0].toJSON(),a[1].toJSON()]))})},a.functions.cut=function(e,t){return a.standardFunctionAsync(e,t,async(r,a,o)=>{if(o=T(o),S(o,2,2,e,t),!(o[1]instanceof i)&&o[1]!==null)throw new m(e,`InvalidParameter`,t);if(o[0]===null)return[];if(!(o[0]instanceof n))throw new m(e,`InvalidParameter`,t);return o[1]===null?[l(o[0])]:(await U(`cut`,[o[0].toJSON(),o[1].toJSON()])).map(e=>p(e))})},a.functions.area=function(t,r){return a.standardFunctionAsync(t,r,async(i,a,o)=>{if(S(o,1,2,t,r),o=T(o),O(o[0])){let e=await o[0].sumArea(G(o[1]),null,t.abortSignal);if(t.abortSignal.aborted)throw new m(t,`Cancelled`,r);return e}let s=o[0];if((e(s)||A(s))&&(s=_(o[0],t.spatialReference)),s===null)return 0;if(!(s instanceof n))throw new m(t,`InvalidParameter`,r);return U(`area`,[s.toJSON(),G(o[1])])})},a.functions.areageodetic=function(t,n){return a.standardFunctionAsync(t,n,async(r,i,a)=>{S(a,1,3,t,n);let o=(a=T(a))[0];(e(o)||A(o))&&(o=_(o,t.spatialReference));let s=G(a[1]),c=B(a[2]);if(O(o)){let e=await o.sumArea(s,c,t.abortSignal);if(t.abortSignal.aborted)throw new m(t,`Cancelled`,n);return e}if(o==null)return 0;if(!E(o))throw new m(t,`InvalidParameter`,n);return U(`geodeticArea`,[o.toJSON(),s,c])})},a.functions.length=function(t,r){return a.standardFunctionAsync(t,r,async(i,a,o)=>{if(S(o,1,2,t,r),o=T(o),O(o[0])){let e=await o[0].sumLength(G(o[1]),null,t.abortSignal);if(t.abortSignal.aborted)throw new m(t,`Cancelled`,r);return e}let s=o[0];if((e(o[0])||A(o[0]))&&(s=C(o[0],t.spatialReference)),s===null)return 0;if(!(s instanceof n))throw new m(t,`InvalidParameter`,r);return U(`length`,[s.toJSON(),G(o[1])])})},a.functions.length3d=function(r,i){return a.standardFunctionAsync(r,i,async(a,o,s)=>{if(S(s,1,2,r,i),(s=T(s))[0]===null)return 0;let c=s[0];if((e(s[0])||A(s[0]))&&(c=C(s[0],r.spatialReference)),c===null)return 0;if(!(c instanceof n))throw new m(r,`InvalidParameter`,i);if(!0===c.hasZ){let{convertFromSpatialReferenceUnit:e,toLengthUnit:n}=await t(async()=>{let{convertFromSpatialReferenceUnit:e,toLengthUnit:t}=await import(`./unitConversion-BhTHfSP0.js`);return{convertFromSpatialReferenceUnit:e,toLengthUnit:t}},__vite__mapDeps([0,1,2,3])),r=z(c);return e(c.spatialReference,n(s[1]),r)}return U(`length`,[c.toJSON(),G(s[1])])})},a.functions.lengthgeodetic=function(t,n){return a.standardFunctionAsync(t,n,async(r,i,a)=>{S(a,1,3,t,n);let o=(a=T(a))[0];(e(a[0])||A(a[0]))&&(o=C(a[0],t.spatialReference));let s=G(a[1]),c=B(a[2]);if(O(o)){let e=await o.sumLength(s,c,t.abortSignal);if(t.abortSignal.aborted)throw new m(t,`Cancelled`,n);return e}if(o===null)return 0;if(!E(o))throw new m(t,`InvalidParameter`,n);return U(`geodeticLength`,[o.toJSON(),s,c])})},a.functions.distance=function(t,r){return a.standardFunctionAsync(t,r,async(i,a,o)=>{o=T(o),S(o,2,3,t,r);let s=o[0];if((e(o[0])||A(o[0]))&&(s=g(o[0],t.spatialReference)),!(s instanceof n))throw new m(t,`InvalidParameter`,r);let c=o[1];if((e(o[1])||A(o[1]))&&(c=g(o[1],t.spatialReference)),!(c instanceof n))throw new m(t,`InvalidParameter`,r);return U(`distance`,[s.toJSON(),c.toJSON(),G(o[2])])})},a.functions.distancegeodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,a)=>{a=T(a),S(a,2,4,e,t);let o=a[0];if(!(o instanceof d))throw new m(e,`InvalidParameter`,t);let s=a[1];if(!(s instanceof d))throw new m(e,`InvalidParameter`,t);let c=new i({paths:[],spatialReference:o.spatialReference});return c.addPath([o,s]),U(`geodeticLength`,[c.toJSON(),G(a[2]),B(a[3])])})},a.functions.densify=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,3,e,t),a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);let o=b(a[1]);if(isNaN(o)||o<=0)throw new m(e,`InvalidParameter`,t);switch(a[0].type){case`polygon`:case`polyline`:case`extent`:return p(await U(`densify`,[a[0].toJSON(),o,G(a[2])]));default:return a[0]}})},a.functions.densifygeodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{i=T(i),S(i,2,4,e,t);let a=i[0];if(a==null)return null;if(!E(a))throw new m(e,`InvalidParameter`,t);let o=b(i[1]);if(isNaN(o)||o<=0)throw new m(e,`InvalidParameter`,t);let s=G(i[2]),c=B(i[3]);switch(a.type){case`polygon`:case`polyline`:case`extent`:return p(await U(`geodeticDensify`,[a.toJSON(),o,s,c]));default:return a}})},a.functions.generalize=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,4,e,t),a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);let o=b(a[1]);if(isNaN(o))throw new m(e,`InvalidParameter`,t);let s=D(w(a[2],!0));return p(await U(`generalize`,[a[0].toJSON(),o,G(a[3]),{removeDegenerateParts:s}]))})},a.functions.buffer=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,3,e,t),a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);let o=b(a[1]);if(isNaN(o))throw new m(e,`InvalidParameter`,t);return o===0?l(a[0]):p(await U(`buffer`,[a[0].toJSON(),o,G(a[2])]))})},a.functions.buffergeodetic=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,i)=>{i=T(i),S(i,2,4,e,t);let a=i[0];if(a==null)return null;if(!E(a))throw new m(e,`InvalidParameter`,t);let o=b(i[1]);if(isNaN(o))throw new m(e,`InvalidParameter`,t);if(o===0)return l(a);let s=G(i[2]),c=B(i[3]);return p(await U(`geodesicBuffer`,[a.toJSON(),o,s,c]))})},a.functions.offset=function(e,t){return a.standardFunctionAsync(e,t,async(n,r,a)=>{a=T(a),S(a,2,6,e,t);let o=a[0];if(o===null)return null;if(!(o instanceof u||o instanceof i))throw new m(e,`InvalidParameter`,t);let s=b(a[1]);if(isNaN(s))throw new m(e,`InvalidParameter`,t);let c=a[2],l=P(a[3]),d=b(w(a[4],10));if(isNaN(d))throw new m(e,`InvalidParameter`,t);let f=b(w(a[5],0));if(isNaN(f))throw new m(e,`InvalidParameter`,t);return p(await U(`offset`,[o.toJSON(),s,G(c),l,d,f]))})},a.functions.rotate=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,3,e,t),a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);let o=a[0]instanceof c?u.fromExtent(a[0]):a[0],s=b(a[1]);if(isNaN(s))throw new m(e,`InvalidParameter`,t);let l=w(a[2],null);if(l===null){let e=o.type===`point`?o:o.extent?.center;return p(await U(`rotate`,[o.toJSON(),s,e?.x,e?.y]))}if(l instanceof d)return p(await U(`rotate`,[o.toJSON(),s,l.x,l.y]));throw new m(e,`InvalidParameter`,t)})},a.functions.centroid=function(t,r){return a.standardFunctionAsync(t,r,async(i,a,o)=>{if(o=T(o),S(o,1,2,t,r),o[0]===null)return null;let s=R(o[1]),c=o[0];if((e(o[0])||A(o[0]))&&(c=s===`geometric`?g(o[0],t.spatialReference):_(o[0],t.spatialReference),c===null))return null;if(!(c instanceof n))throw new m(t,`InvalidParameter`,r);return p(s===`geometric`?await U(`centroid`,[c.toJSON()]):await U(`labelPoint`,[c.toJSON()]))})},a.functions.measuretocoordinate=function(e,t){return a.standardFunctionAsync(e,t,I)},a.functions.pointtocoordinate=function(e,t){return a.standardFunctionAsync(e,t,N)},a.functions.distancetocoordinate=function(e,t){return a.standardFunctionAsync(e,t,L)},a.functions.multiparttosinglepart=function(e,t){return a.standardFunctionAsync(e,t,async(r,a,s)=>{if(s=T(s),S(s,1,1,e,t),s[0]===null)return null;if(!(s[0]instanceof n))throw new m(e,`InvalidParameter`,t);if(s[0]instanceof d||s[0]instanceof c)return[j(l(s[0]),e.spatialReference)];let f=p(await U(`simplify`,[s[0].toJSON()]));if(f instanceof u){let e=[],t=[];for(let n=0;n<f.rings.length;n++)if(f.isClockwise(f.rings[n])){let t=p({rings:[f.rings[n]],hasZ:!0===f.hasZ,hasM:!0===f.hasM,spatialReference:f.spatialReference.toJSON()});e.push(t)}else t.push({ring:f.rings[n],pt:f.getPoint(n,0)});for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)if(e[r].contains(t[n].pt)){e[r].addRing(t[n].ring);break}return e}if(f instanceof i){let e=[];for(let t=0;t<f.paths.length;t++){let n=p({paths:[f.paths[t]],hasZ:!0===f.hasZ,hasM:!0===f.hasM,spatialReference:f.spatialReference.toJSON()});e.push(n)}return e}if(s[0]instanceof o){let t=[],n=j(l(s[0]),e.spatialReference);for(let e=0;e<n.points.length;e++)t.push(n.getPoint(e));return t}return null})},a.functions.isselfintersecting=function(t,n){return a.standardFunctionAsync(t,n,async(t,n,r)=>{S(r,1,1,t,n);let a=(r=T(r))[0];if((e(r[0])||A(r[0]))&&(a=C(r[0],t.spatialReference)),a instanceof o){let e=a.points;for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(f(e[t],e[n]))return!0;return!1}return(a instanceof i||a instanceof u)&&await U(`isSelfIntersecting`,[a.toJSON()])})},a.functions.issimple=function(e,t){return a.standardFunctionAsync(e,t,(r,i,a)=>{if(a=T(a),S(a,1,1,e,t),a[0]===null)return!0;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);return U(`isSimple`,[a[0].toJSON()])})},a.functions.simplify=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,1,1,e,t),a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);return p(await U(`simplify`,[a[0].toJSON()]))})},a.functions.convexhull=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,1,1,e,t),a[0]===null)return null;if(!(a[0]instanceof n))throw new m(e,`InvalidParameter`,t);return p(await U(`convexHull`,[a[0].toJSON()]))})},a.functions.getuser=function(e,t){return a.standardFunctionAsync(e,t,async(n,i,a)=>{S(a,0,2,e,t);let o=w(a[1],``),s=!0===o;if(o=!0===o||!1===o?``:x(o),a.length===0||a[0]instanceof V){let t;t=e.services?.portal?e.services.portal:r.getDefault(),a.length>0&&(t=H(a[0],t));let n=await W(t,o,s);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return k.convertObjectToArcadeDictionary(t,M(e))}return null}let c=null;if(O(a[0])&&(c=a[0]),c){if(s=!1,o)return null;await c.load();let t=await c.getOwningSystemUrl();if(!t){if(!o){let t=await c.getIdentityUser();return t?k.convertObjectToArcadeDictionary({username:t},M(e)):null}return null}let n;n=e.services?.portal?e.services.portal:r.getDefault(),n=H(new V(t),n);let i=await W(n,o,s);if(i){let t=JSON.parse(JSON.stringify(i));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return k.convertObjectToArcadeDictionary(t,M(e))}return null}throw new m(e,`InvalidParameter`,t)})},a.functions.nearestcoordinate=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,2,e,t),!(a[0]instanceof n||a[0]===null)||!(a[1]instanceof d||a[1]===null))throw new m(e,`InvalidParameter`,t);if(a[0]===null||a[1]===null)return null;let o=a[0]instanceof c?u.fromExtent(a[0]):a[0],s=await U(`getNearestCoordinate`,[o.toJSON(),a[1].toJSON(),{calculateLeftRightSide:!0}]);return s===null?null:k.convertObjectToArcadeDictionary({coordinate:p(s.coordinate),distance:s.distance,sideOfLine:s.distance===0?`straddle`:s.isRightSide?`right`:`left`},M(e),!1,!0)})},a.functions.nearestvertex=function(e,t){return a.standardFunctionAsync(e,t,async(r,i,a)=>{if(a=T(a),S(a,2,2,e,t),!(a[0]instanceof n||a[0]===null)||!(a[1]instanceof d||a[1]===null))throw new m(e,`InvalidParameter`,t);if(a[0]===null||a[1]===null)return null;let o=a[0]instanceof c?u.fromExtent(a[0]):a[0],s=await U(`getNearestVertex`,[o.toJSON(),a[1].toJSON()]);return s==null?null:k.convertObjectToArcadeDictionary({coordinate:p(s.coordinate),distance:s.distance,sideOfLine:s.sideOfLine},M(e),!1,!0)})})}export{K as t};