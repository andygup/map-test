const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HUDMaterial.glsl-BxlvoY1A.js","assets/HUDMaterial.glsl-CIbE2wvS.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css","assets/Slice.glsl-DU3Ivhcc.js","assets/Float3DrawUniform-ua6q6ZtZ.js","assets/Uniform-C_fuiTP5.js","assets/glsl-BMw-Ib6r.js","assets/VisualVariables.glsl-1DqsizMu.js","assets/FloatsPassUniform-DKsLDw29.js","assets/NoParameters-BDE7RvXT.js","assets/AlphaCutoff-WIqqBGOV.js","assets/HighlightReadBitmap.glsl-BBr-esSE.js","assets/Texture2DBindUniform-Btzx3XRx.js","assets/Float3PassUniform-SaBA6LBM.js","assets/Float4PassUniform-C4TO8dd0.js","assets/ObjectAndLayerIdColor.glsl-BHzrt-xI.js","assets/HUDVisibility.glsl-DO8Yaq72.js","assets/VerticalOffset.glsl-VrGhTlbS.js","assets/ScreenSizePerspective.glsl-BuhoSJZ3.js","assets/View.glsl-CPcmVaet.js","assets/Float3BindUniform-BDFedz_d.js","assets/FloatBindUniform-CXY5KrrB.js","assets/Matrix4BindUniform-D7U89BGU.js","assets/BooleanBindUniform-Dgbi5WXL.js","assets/Float4BindUniform-DpoBnM9l.js","assets/FloatPassUniform-CSAt82xV.js","assets/TerrainDepthTest.glsl-D7e23Ppb.js","assets/ReadDepth.glsl-CX2bpX_x.js","assets/Float2BindUniform-D7Jg9GMR.js","assets/Float2PassUniform-DUyrQoTC.js","assets/Texture2DPassUniform-DFWoDpEL.js","assets/ShaderBuilder-BLOqjpgt.js"])))=>i.map(i=>d[i]);
import{$ as e,$S as t,$v as n,$x as r,Bl as i,C_ as a,Cl as o,Fb as s,Gg as c,Gu as l,Hl as u,Jf as d,Km as f,Ls as p,Nl as m,Of as h,Ol as g,Rl as _,Ry as v,Tw as y,Uf as b,Ul as x,Um as S,Uu as C,VT as w,Vl as T,Y as E,Z as D,Zy as O,bb as k,bl as A,df as ee,eh as te,et as j,ff as ne,gS as re,hl as M,kD as N,kl as P,m_ as ie,mt as ae,mx as oe,o_ as se,pl as F,qm as ce,qv as le,tD as ue,tt as de,ty as fe,ut as pe,w_ as me,ww as he,x_ as ge,xl as _e,y_ as I,yb as ve,zl as ye}from"./index-BN8X5Ryz.js";import{o as be}from"./meshVertexSpaceUtils-s2jLb8qI.js";import{a as xe,n as Se}from"./Indices-tJiSUK6w.js";import{a as Ce,m as we,y as Te}from"./plane-Da5EsY0J.js";import{G as Ee,H as De}from"./BufferView-BW77W5ev.js";import{a as Oe}from"./Util-BQgFCZvD.js";import{n as ke}from"./dehydratedPoint-CWZQBefp.js";import{i as L}from"./orientedBoundingBox-Bd4igSGQ.js";import{l as Ae,n as je,r as Me,u as Ne}from"./Emissions.glsl-C_Yvv-sZ.js";import{r as Pe}from"./ray-LkJ58wpZ.js";import{a as Fe,r as Ie}from"./hydratedFeatures-Cf3ay5ZM.js";import{n as R,r as Le,t as z}from"./vec3f32-DDMWoxUL.js";import{a as Re,i as ze,n as Be}from"./renderState-BaFdYDAL.js";import{A as Ve,C as He,E as Ue,O as We,P as B,R as Ge,T as Ke,V as qe,b as Je,g as Ye,h as Xe,k as V,v as Ze,x as Qe,y as $e}from"./DefaultBufferWriter-BGKzMKkp.js";import{i as et,t as tt}from"./MaterialUtil-CcE5uVnF.js";import{a as nt,s as rt}from"./SceneLighting-LJvcoD7s.js";import{a as it,r as H,s as at,t as ot}from"./FloatArray-Dt98pDp2.js";import{d as st,f as ct,u as lt}from"./FloatsPassUniform-DKsLDw29.js";import{t as ut}from"./AlphaCutoff-WIqqBGOV.js";import{i as dt}from"./HUDVisibility.glsl-DO8Yaq72.js";import{i as ft,n as pt,t as mt}from"./HUDMaterial.glsl-CIbE2wvS.js";function ht(e,t=!1){return e<=1024?t?Array(e).fill(0):Array(e):Ee(e)}function gt(e,t,n=null){let r=[],i=t.mapPositions,a=_t(t,r),o=a.data,s=a.indices.length,c=Se(s);return vt(t,r,c),xt(t,r,c),yt(t,r,c),bt(t,r,a.indices,c),St(t,r,a.indices,c),Ct(t,r),wt(t,r,a.indices,c),Tt(t,r,o),new V(e,r,i,2,n)}function _t(e,t){let{attributeData:{position:n},removeDuplicateStartEnd:r}=e,i=Et(n)&&r,a=n.length/3-(i?1:0),o=Array(2*(a-1)),s=i?n.slice(0,-3):n,c=0;for(let e=0;e<a-1;e++)o[c++]=e,o[c++]=e+1;let l=new L(s,o,3,i);return t.push([`position`,l]),l}function vt(t,n,r){if(t.attributeData.colorFeature!=null)return;let i=t.attributeData.color;n.push([`color`,new L(i??e,r,4)])}function yt(e,t,n){e.attributeData.normal&&t.push([`normal`,new L(e.attributeData.normal,n,3)])}function bt(e,t,n,r){let i=e.attributeData.colorFeature;i!=null&&(typeof i==`number`?t.push([`colorFeatureAttribute`,new L([i],r,1,!0)]):t.push([`colorFeatureAttribute`,new L(i,n,1,!0)]))}function xt(e,t,n){e.attributeData.sizeFeature??t.push([`size`,new L([e.attributeData.size??1],n,1,!0)])}function St(e,t,n,r){let i=e.attributeData.sizeFeature;i!=null&&(typeof i==`number`?t.push([`sizeFeatureAttribute`,new L([i],r,1,!0)]):t.push([`sizeFeatureAttribute`,new L(i,n,1,!0)]))}function Ct(e,t){let{attributeData:{position:n,timeStamps:r}}=e;if(!r)return;let i=n.length/3,a=Array(2*(i-1)),o=0;for(let e=0;e<i-1;e++)a[o++]=e,a[o++]=e+1;t.push([`timeStamps`,new L(r,a,4,!0)])}function wt(e,t,n,r){let i=e.attributeData.opacityFeature;i!=null&&(typeof i==`number`?t.push([`opacityFeatureAttribute`,new L([i],r,1,!0)]):t.push([`opacityFeatureAttribute`,new L(i,n,1,!0)]))}function Tt(e,t,n){if(e.overlayInfo==null||e.overlayInfo.renderCoordsHelper.viewingMode!==1||!e.overlayInfo.spatialReference.isGeographic)return;let r=b(n.length),i=re(e.overlayInfo.spatialReference);for(let e=0;e<r.length;e+=3)se(n,e,r,e,i);let a=n.length/3,o=H(a+1),c=Dt,l=Ot,u=0,d=0;s(c,r[d++],r[d++]),d++,o[0]=0;for(let e=1;e<a+1;++e)e===a&&(d=0),s(l,r[d++],r[d++]),d++,u+=ve(c,l),o[e]=u,[c,l]=[l,c];t.push([`distanceToStart`,new L(o,t[0][1].indices,1,!0)])}function Et(e){let t=e.length;return e[0]===e[t-3]&&e[1]===e[t-2]&&e[2]===e[t-1]}var Dt=C(),Ot=C();function kt(e,t){let n=ht(e.length*4),r=e[0],i=e[e.length-1];for(let a=0;a<e.length;a++)n[a*4]=e[a],n[a*4+1]=r,n[a*4+2]=i,n[a*4+3]=t+.5;return n}function At(e,t){let n=e[t],r=e[t+1],i=e[t+2];return Math.sqrt(n*n+r*r+i*i)}function jt(e,t){let n=e[t],r=e[t+1],i=e[t+2],a=1/Math.sqrt(n*n+r*r+i*i);e[t]*=a,e[t+1]*=a,e[t+2]*=a}function Mt(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n}function Nt(e,t,n,r,i,a=t){(i||=e)[a]=e[t]+n[r],i[a+1]=e[t+1]+n[r+1],i[a+2]=e[t+2]+n[r+2]}function Pt(){return It??=Ft(),It}function Ft(){let e=new L([0,0,0,255,255,0,255,255],[0,1,2,3],2,!0);return new Ve([[`uv0`,e]])}var It=null,Lt=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],Rt=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],zt=[0,0,1,0,1,1,0,1],Bt=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Vt=Array(36);for(let e=0;e<6;e++)for(let t=0;t<6;t++)Vt[6*e+t]=e;var U=Array(36);for(let e=0;e<6;e++)U[6*e]=0,U[6*e+1]=1,U[6*e+2]=2,U[6*e+3]=2,U[6*e+4]=3,U[6*e+5]=0;function Ht(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(24);for(let e=0;e<8;e++)n[3*e]=Lt[e][0]*t[0],n[3*e+1]=Lt[e][1]*t[1],n[3*e+2]=Lt[e][2]*t[2];return new V(e,[[`position`,new L(n,Bt,3,!0)],[`normal`,new L(Rt,Vt,3)],[`uv0`,new L(zt,U,2)]])}var Ut=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],Wt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],Gt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],Kt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function qt(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(18);for(let e=0;e<6;e++)n[3*e]=Ut[e][0]*t[0],n[3*e+1]=Ut[e][1]*t[1],n[3*e+2]=Ut[e][2]*t[2];return new V(e,[[`position`,new L(n,Gt,3,!0)],[`normal`,new L(Wt,Kt,3)]])}var Jt=R(-.5,0,-.5),Yt=R(.5,0,-.5),Xt=R(0,0,.5),Zt=R(0,.5,0),W=z(),G=z(),K=z(),Qt=z(),$t=z();P(W,Jt,Zt),P(G,Jt,Yt),g(K,W,G),F(K,K),P(W,Yt,Zt),P(G,Yt,Xt),g(Qt,W,G),F(Qt,Qt),P(W,Xt,Zt),P(G,Xt,Jt),g($t,W,G),F($t,$t);var en=[Jt,Yt,Xt,Zt],tn=[0,-1,0,K[0],K[1],K[2],Qt[0],Qt[1],Qt[2],$t[0],$t[1],$t[2]],nn=[0,1,2,3,1,0,3,2,1,3,0,2],rn=[0,0,0,1,1,1,2,2,2,3,3,3];function an(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(12);for(let e=0;e<4;e++)n[3*e]=en[e][0]*t[0],n[3*e+1]=en[e][1]*t[1],n[3*e+2]=en[e][2]*t[2];return new V(e,[[`position`,new L(n,nn,3,!0)],[`normal`,new L(tn,rn,3)]])}function on(e,t,n,r,i={uv:!0}){let a=-Math.PI,o=2*Math.PI,s=-Math.PI/2,c=Math.PI,l=Math.max(3,Math.floor(n)),u=Math.max(2,Math.floor(r)),d=(l+1)*(u+1),f=H(3*d),p=H(3*d),m=H(2*d),h=[],g=0;for(let e=0;e<=u;e++){let n=[],r=e/u,i=s+r*c,d=Math.cos(i);for(let e=0;e<=l;e++){let s=e/l,c=a+s*o,u=Math.cos(c)*d,h=Math.sin(i),_=-Math.sin(c)*d;f[3*g]=u*t,f[3*g+1]=h*t,f[3*g+2]=_*t,p[3*g]=u,p[3*g+1]=h,p[3*g+2]=_,m[2*g]=s,m[2*g+1]=r,n.push(g),++g}h.push(n)}let _=[];for(let e=0;e<u;e++)for(let t=0;t<l;t++){let n=h[e][t],r=h[e][t+1],i=h[e+1][t+1],a=h[e+1][t];e===0?(_.push(n),_.push(i),_.push(a)):e===u-1?(_.push(n),_.push(r),_.push(i)):(_.push(n),_.push(r),_.push(i),_.push(i),_.push(a),_.push(n))}let v=[[`position`,new L(f,_,3,!0)],[`normal`,new L(p,_,3,!0)]];return i.uv&&v.push([`uv0`,new L(m,_,2,!0)]),i.offset&&(v[0][0]=`offset`,v.push([`position`,new L(Float64Array.from(i.offset),Se(_.length),3,!0)])),new V(e,v)}function sn(e,t,n,r){let i=cn(t,n,r);return new V(e,i)}function cn(e,t,n){let r=e,i,a;if(n)i=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],a=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{let e=r*(1+Math.sqrt(5))/2;i=[-r,e,0,r,e,0,-r,-e,0,r,-e,0,0,-r,e,0,r,e,0,-r,-e,0,r,-e,e,0,-r,e,0,r,-e,0,-r,-e,0,r],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let t=0;t<i.length;t+=3)Mt(i,t,e/At(i,t));let o={};function s(t,n){t>n&&([t,n]=[n,t]);let r=t.toString()+`.`+n.toString();if(o[r])return o[r];let a=i.length;return i.length+=3,Nt(i,3*t,i,3*n,i,a),Mt(i,a,e/At(i,a)),a/=3,o[r]=a,a}for(let e=0;e<t;e++){let e=a.length,t=Array(4*e);for(let n=0;n<e;n+=3){let e=a[n],r=a[n+1],i=a[n+2],o=s(e,r),c=s(r,i),l=s(i,e),u=4*n;t[u]=e,t[u+1]=o,t[u+2]=l,t[u+3]=r,t[u+4]=c,t[u+5]=o,t[u+6]=i,t[u+7]=l,t[u+8]=c,t[u+9]=o,t[u+10]=c,t[u+11]=l}a=t,o={}}let c=ot(i);for(let e=0;e<c.length;e+=3)jt(c,e);return[[`position`,new L(ot(i),a,3,!0)],[`normal`,new L(c,a,3,!0)]]}function ln(e,{normal:t,position:n,color:r,rotation:i,size:o,centerOffsetAndDistance:s,uvi:c,featureAttribute:l,olidColor:u=null}={}){let d=n?a(n):I(),f=t?a(t):ge(0,0,1),p=r?[r[0],r[1],r[2],r.length>3?r[3]:255]:[255,255,255,255],m=o!=null&&o.length===2?o:[1,1],h=i==null?[0]:[i],g=Se(1),_=[[`position`,new L(d,g,3,!0)],[`normal`,new L(f,g,3,!0)],[`color`,new L(p,g,4,!0)],[`size`,new L(m,g,2)],[`rotation`,new L(h,g,1,!0)]];if(c&&_.push([`uvi`,new L(c,g,c.length)]),s!=null){let e=[s[0],s[1],s[2],s[3]];_.push([`centerOffsetAndDistance`,new L(e,g,4)])}if(l){let e=[l[0],l[1],l[2],l[3]];_.push([`featureAttribute`,new L(e,g,4)])}return new V(e,_,null,1,u,void 0,Pt())}function un(e,t,n,r,i=!0,a=!0){let o=0,s=t,c=e,l=R(0,o,0),u=R(0,o+c,0),d=R(0,-1,0),f=R(0,1,0);r&&(o=c,u=R(0,0,0),l=R(0,o,0),d=R(0,1,0),f=R(0,-1,0));let p=[u,l],m=[d,f],h=n+2,g=Math.sqrt(c*c+s*s);if(r)for(let e=n-1;e>=0;e--){let t=e*(2*Math.PI/n),r=R(Math.cos(t)*s,o,Math.sin(t)*s);p.push(r);let i=R(c*Math.cos(t)/g,-s/g,c*Math.sin(t)/g);m.push(i)}else for(let e=0;e<n;e++){let t=e*(2*Math.PI/n),r=R(Math.cos(t)*s,o,Math.sin(t)*s);p.push(r);let i=R(c*Math.cos(t)/g,s/g,c*Math.sin(t)/g);m.push(i)}let _=[],v=[];if(i){for(let e=3;e<p.length;e++)_.push(1),_.push(e-1),_.push(e),v.push(0),v.push(0),v.push(0);_.push(p.length-1),_.push(2),_.push(1),v.push(0),v.push(0),v.push(0)}if(a){for(let e=3;e<p.length;e++)_.push(e),_.push(e-1),_.push(0),v.push(e),v.push(e-1),v.push(1);_.push(0),_.push(2),_.push(p.length-1),v.push(1),v.push(2),v.push(m.length-1)}let y=H(3*h);for(let e=0;e<h;e++)y[3*e]=p[e][0],y[3*e+1]=p[e][1],y[3*e+2]=p[e][2];let b=H(3*h);for(let e=0;e<h;e++)b[3*e]=m[e][0],b[3*e+1]=m[e][1],b[3*e+2]=m[e][2];return[[`position`,new L(y,_,3,!0)],[`normal`,new L(b,v,3,!0)]]}function dn(e,t,n,r,i,a=!0,o=!0){return new V(e,un(t,n,r,i,a,o))}function fn(e,t,n,r,i,a,o){let s=i?Le(i):R(1,0,0),c=a?Le(a):R(0,0,0);o??=!0;let l=z();F(l,s);let u=z();m(u,l,Math.abs(t));let d=z();m(d,u,-.5),x(d,d,c);let f=R(0,1,0);Math.abs(1-_e(l,f))<.2&&_(f,0,0,1);let p=z();g(p,l,f),F(p,p),g(f,p,l);let h=2*r+(o?2:0),v=r+(o?2:0),y=H(3*h),b=H(3*v),S=H(2*h),C=Array(3*r*(o?4:2)),w=Array(3*r*(o?4:2));o&&(y[3*(h-2)]=d[0],y[3*(h-2)+1]=d[1],y[3*(h-2)+2]=d[2],S[2*(h-2)]=0,S[2*(h-2)+1]=0,y[3*(h-1)]=y[3*(h-2)]+u[0],y[3*(h-1)+1]=y[3*(h-2)+1]+u[1],y[3*(h-1)+2]=y[3*(h-2)+2]+u[2],S[2*(h-1)]=1,S[2*(h-1)+1]=1,b[3*(v-2)]=-l[0],b[3*(v-2)+1]=-l[1],b[3*(v-2)+2]=-l[2],b[3*(v-1)]=l[0],b[3*(v-1)+1]=l[1],b[3*(v-1)+2]=l[2]);let T=(e,t,n)=>{C[e]=t,w[e]=n},E=0,D=z(),O=z();for(let e=0;e<r;e++){let t=e*(2*Math.PI/r);m(D,f,Math.sin(t)),m(O,p,Math.cos(t)),x(D,D,O),b[3*e]=D[0],b[3*e+1]=D[1],b[3*e+2]=D[2],m(D,D,n),x(D,D,d),y[3*e]=D[0],y[3*e+1]=D[1],y[3*e+2]=D[2],S[2*e]=e/r,S[2*e+1]=0,y[3*(e+r)]=y[3*e]+u[0],y[3*(e+r)+1]=y[3*e+1]+u[1],y[3*(e+r)+2]=y[3*e+2]+u[2],S[2*(e+r)]=e/r,S[2*e+1]=1;let i=(e+1)%r;T(E++,e,e),T(E++,e+r,e),T(E++,i,i),T(E++,i,i),T(E++,e+r,e),T(E++,i+r,i)}if(o){for(let e=0;e<r;e++){let t=(e+1)%r;T(E++,h-2,v-2),T(E++,e,v-2),T(E++,t,v-2)}for(let e=0;e<r;e++){let t=(e+1)%r;T(E++,e+r,v-1),T(E++,h-1,v-1),T(E++,t+r,v-1)}}let k=[[`position`,new L(y,C,3,!0)],[`normal`,new L(b,w,3,!0)],[`uv0`,new L(S,C,2,!0)]];return new V(e,k)}function pn(e,t,n,r,i,a){r||=10,i=i==null||i,Oe(t.length>1);let o=[[0,0,0]],s=[],c=[];for(let e=0;e<r;e++){s.push([0,-e-1,-(e+1)%r-1]);let t=e/r*2*Math.PI;c.push([Math.cos(t)*n,Math.sin(t)*n])}return mn(e,c,t,o,s,i,a)}function mn(e,t,n,r,i,a,o=R(0,0,0)){let s=t.length,c=H(n.length*s*3+(6*r.length||0)),l=H(n.length*s*3+(r?6:0)),d=[],f=[],p=0,h=0,v=I(),y=I(),b=I(),S=I(),C=I(),w=I(),T=I(),E=I(),D=I(),O=I(),k=I(),A=I(),ee=I(),te=Te();_(D,0,1,0),P(y,n[1],n[0]),F(y,y),a?(x(E,n[0],o),F(b,E)):_(b,0,0,1),bn(y,b,D,D,C,b,xn),u(S,b),u(A,C);for(let e=0;e<r.length;e++)m(w,C,r[e][0]),m(E,b,r[e][2]),x(w,w,E),x(w,w,n[0]),c[p++]=w[0],c[p++]=w[1],c[p++]=w[2];l[h++]=-y[0],l[h++]=-y[1],l[h++]=-y[2];for(let e=0;e<i.length;e++)d.push(i[e][0]>0?i[e][0]:-i[e][0]-1+r.length),d.push(i[e][1]>0?i[e][1]:-i[e][1]-1+r.length),d.push(i[e][2]>0?i[e][2]:-i[e][2]-1+r.length),f.push(0),f.push(0),f.push(0);let j=r.length,ne=r.length-1;for(let e=0;e<n.length;e++){let r=!1;e>0&&(u(v,y),e<n.length-1?(P(y,n[e+1],n[e]),F(y,y)):r=!0,x(O,v,y),F(O,O),x(k,n[e-1],S),we(n[e],O,te),Ce(te,Pe(k,v),E)?(P(E,E,n[e]),F(b,E),g(C,O,b),F(C,C)):bn(O,S,A,D,C,b,xn),u(S,b),u(A,C)),a&&(x(E,n[e],o),F(ee,E));for(let i=0;i<s;i++)if(m(w,C,t[i][0]),m(E,b,t[i][1]),x(w,w,E),F(T,w),l[h++]=T[0],l[h++]=T[1],l[h++]=T[2],x(w,w,n[e]),c[p++]=w[0],c[p++]=w[1],c[p++]=w[2],!r){let e=(i+1)%s;d.push(j+i),d.push(j+s+i),d.push(j+e),d.push(j+e),d.push(j+s+i),d.push(j+s+e);for(let e=0;e<6;e++){let t=d.length-6;f.push(d[t+e]-ne)}}j+=s}let re=n[n.length-1];for(let e=0;e<r.length;e++)m(w,C,r[e][0]),m(E,b,r[e][1]),x(w,w,E),x(w,w,re),c[p++]=w[0],c[p++]=w[1],c[p++]=w[2];let M=h/3;l[h++]=y[0],l[h++]=y[1],l[h++]=y[2];let N=j-s;for(let e=0;e<i.length;e++)d.push(i[e][0]>=0?j+i[e][0]:-i[e][0]-1+N),d.push(i[e][2]>=0?j+i[e][2]:-i[e][2]-1+N),d.push(i[e][1]>=0?j+i[e][1]:-i[e][1]-1+N),f.push(M),f.push(M),f.push(M);let ie=[[`position`,new L(c,d,3,!0)],[`normal`,new L(l,f,3,!0)]];return new V(e,ie)}function hn(e,t,n,r,i){let a=b(3*t.length),o=Array(2*(t.length-1)),s=0,c=0;for(let e=0;e<t.length;e++){for(let n=0;n<3;n++)a[s++]=t[e][n];e>0&&(o[c++]=e-1,o[c++]=e)}let l=[[`position`,new L(a,o,3,!0)]];if(n&&n.length===t.length&&n[0].length===3){let e=H(3*n.length),r=0;for(let i=0;i<t.length;i++)for(let t=0;t<3;t++)e[r++]=n[i][t];l.push([`normal`,new L(e,o,3,!0)])}if(r&&l.push([`color`,new L(r,xe(r.length/4),4)]),i&&i.length===t.length){let e=kt(i,1);l.push([`timeStamps`,new L(e,o,4,!0)])}return new V(e,l,null,2)}function gn(e,t,n,r,i,a=0){let o=Array(18),s=[[-n,a,i/2],[r,a,i/2],[0,t+a,i/2],[-n,a,-i/2],[r,a,-i/2],[0,t+a,-i/2]],c=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let e=0;e<6;e++)o[3*e]=s[e][0],o[3*e+1]=s[e][1],o[3*e+2]=s[e][2];return new V(e,[[`position`,new L(o,c,3,!0)]])}function _n(e,t){let n=e.getMutableAttribute(`position`).data;for(let e=0;e<n.length;e+=3){let r=n[e],i=n[e+1],a=n[e+2];_(Sn,r,i,a),M(Sn,Sn,t),n[e]=Sn[0],n[e+1]=Sn[1],n[e+2]=Sn[2]}}function vn(e,t=e){let n=e.attributes,r=n.get(`position`).data,i=n.get(`normal`).data;if(i){let e=t.getMutableAttribute(`normal`).data;for(let t=0;t<i.length;t+=3){let n=i[t+1];e[t+1]=-i[t+2],e[t+2]=n}}if(r){let e=t.getMutableAttribute(`position`).data;for(let t=0;t<r.length;t+=3){let n=r[t+1];e[t+1]=-r[t+2],e[t+2]=n}}}function yn(e,t,n,r,i){return!(Math.abs(_e(t,e))>i)&&(g(n,e,t),F(n,n),g(r,n,e),F(r,r),!0)}function bn(e,t,n,r,i,a,o){return yn(e,t,i,a,o)||yn(e,n,i,a,o)||yn(e,r,i,a,o)}var xn=.99619469809,Sn=I();function Cn(e){return e.type===`point`}var wn=class extends nt{constructor(e,n){super(e,n,at(En).concat(at(kn()))),this.shader=new rt(pt,()=>t(()=>import(`./HUDMaterial.glsl-BxlvoY1A.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),this.primitiveType=n.occlusionPass?p.POINTS:p.TRIANGLE_STRIP}initializePipeline(e){let{oitPass:t,hasEmission:n,hasPolygonOffset:r,draped:i,output:a,depthTestEnabled:o,occlusionPass:s}=e,c=o&&!i&&t!==1&&!s&&a!==8;return Be({blending:Ae(a)?Ge(t,!0):null,depthTest:o&&!i?{func:515}:null,depthWrite:c?ze:null,drawBuffers:qe(t,n),colorWrite:Re,polygonOffset:r?Tn:null})}};wn=N([w(`esri.views.3d.webgl-engine.shaders.HUDMaterialTechnique`)],wn);var Tn={factor:0,units:-4},En=it().vec2u8(`uv0`,{glNormalized:!0}),Dn=it().vec3f(`position`).vec3f(`normal`).vec4i16(`uvi`).vec4u8(`color`).vec2f(`size`).f32(`rotation`).vec4f(`centerOffsetAndDistance`).vec4f(`featureAttribute`),On=Dn.clone().vec4u8(`olidColor`);function kn(){return st()?On:Dn}var q=class extends We{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.visibilityPixelEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.hasVVSize=!1,this.hasVVColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!0,this.isFocused=!0,this.olidColorInstanced=!1,this.textureCoordinateType=0,this.emissionSource=0,this.discardInvisibleFragments=!0,this.hasVVInstancing=!1,this.snowCover=!1}};N([B()],q.prototype,`screenCenterOffsetUnitsEnabled`,void 0),N([B()],q.prototype,`visibilityPixelEnabled`,void 0),N([B()],q.prototype,`signedDistanceFieldEnabled`,void 0),N([B()],q.prototype,`sampleSignedDistanceFieldTexelCenter`,void 0),N([B()],q.prototype,`hasVVSize`,void 0),N([B()],q.prototype,`hasVVColor`,void 0),N([B()],q.prototype,`hasVerticalOffset`,void 0),N([B()],q.prototype,`hasScreenSizePerspective`,void 0),N([B()],q.prototype,`hasRotation`,void 0),N([B()],q.prototype,`debugDrawLabelBorder`,void 0),N([B()],q.prototype,`hasPolygonOffset`,void 0),N([B()],q.prototype,`depthTestEnabled`,void 0),N([B()],q.prototype,`pixelSnappingEnabled`,void 0),N([B()],q.prototype,`draped`,void 0),N([B()],q.prototype,`terrainDepthTest`,void 0),N([B()],q.prototype,`cullAboveTerrain`,void 0),N([B()],q.prototype,`occlusionPass`,void 0),N([B()],q.prototype,`occludedFragmentFade`,void 0),N([B()],q.prototype,`horizonCullingEnabled`,void 0),N([B()],q.prototype,`isFocused`,void 0);var An=class extends Ue{constructor(e,t){super(e,Yn),this.produces=new Map([[14,e=>Ne(e)&&!this.parameters.drawAsLabel],[15,e=>Ne(e)&&this.parameters.drawAsLabel],[13,()=>this.parameters.useVisibilityPixel],[19,e=>this.parameters.draped&&Ne(e)]]),this._visible=!0,this._configuration=new q(t)}getConfiguration(e,t){let n=this.parameters.draped;return super.getConfiguration(e,t,this._configuration),this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled=this.parameters.centerOffsetUnits===`screen`,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=n,this._configuration.visibilityPixelEnabled=this.parameters.useVisibilityPixel,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.hasVVSize=!!this.parameters.vvSize,this._configuration.hasVVColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===13,this._configuration.occludedFragmentFade=!n&&this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.isFocused=this.parameters.isFocused,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===13,Ae(e)&&(this._configuration.debugDrawLabelBorder=!!ct.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,t,n,r,a,o){let{options:{selectionMode:s,hud:c,excludeLabels:l},point:d,camera:f}=n,{parameters:p}=this;if(!s||!c||l&&p.isLabel||!e.visible||!d||!f)return;let h=e.attributes.get(`featureAttribute`),g=h==null?null:de(h.data,Wn),{scaleX:v,scaleY:y}=Zn(g,p,f.pixelRatio),b=e.attributes.get(`position`),x=e.attributes.get(`size`),C=e.attributes.get(`normal`),w=e.attributes.get(`rotation`),E=e.attributes.get(`centerOffsetAndDistance`);Oe(b.size>=3);let D=mt(p),k=this.parameters.centerOffsetUnits===`screen`;for(let e=0;e<b.data.length/b.size;e++){let r=e*b.size;_(J,b.data[r],b.data[r+1],b.data[r+2]),M(J,J,t),M(J,J,f.viewMatrix);let a=e*E.size;if(_(Z,E.data[a],E.data[a+1],E.data[a+2]),!k&&(J[0]+=Z[0],J[1]+=Z[1],Z[2]!==0)){let e=Z[2];F(Z,J),P(J,J,m(Z,Z,e))}let s=e*C.size;_(Y,C.data[s],C.data[s+1],C.data[s+2]),A(Y,Y,O(Bn,t));let{normal:c,cosAngle:l}=Nn(Y,f,Gn),h=$n(this.parameters,J,l,f,Fn);if(i(J,J,c,h),f.applyProjection(J,X),X[0]>-1){k&&(Z[0]||Z[1])&&(X[0]+=Z[0]*f.pixelRatio,Z[1]!==0&&(X[1]+=Fn.alignmentEvaluator.apply(Z[1])*f.pixelRatio),f.unapplyProjection(X,J)),X[0]+=this.parameters.screenOffset[0]*f.pixelRatio,X[1]+=this.parameters.screenOffset[1]*f.pixelRatio,X[0]=Math.floor(X[0]),X[1]=Math.floor(X[1]);let t=e*x.size;Q[0]=x.data[t],Q[1]=x.data[t+1],Fn.evaluator.applyVec2(Q,Q);let r=Kn*f.pixelRatio,i=0;p.textureIsSignedDistanceField&&(i=Math.min(p.outlineSize,.5*Q[0])*f.pixelRatio/2),Q[0]*=v,Q[1]*=y;let a=e*w.size,s=p.rotation+w.data[a];if(Pn(d,X[0],X[1],Q,r,i,s,p,D)){let e=n.ray;if(M(Ln,J,S(Vn,f.viewMatrix)),X[0]=d[0],X[1]=d[1],f.unprojectFromRenderScreen(X,J)){let t=I();u(t,e.direction);let n=1/T(t);m(t,t,n),o(ye(e.origin,J)*n,t,-1,Ln)}}}}}intersectDraped(e,t,n,r,i){let a=e.attributes.get(`position`),o=e.attributes.get(`size`),s=e.attributes.get(`rotation`),c=this.parameters,l=mt(c),u=e.attributes.get(`featureAttribute`),d=u==null?null:de(u.data,Wn),{scaleX:f,scaleY:p}=Zn(d,c,e.screenToWorldRatio),m=qn*e.screenToWorldRatio;for(let t=0;t<a.data.length/a.size;t++){let u=t*a.size,d=a.data[u],h=a.data[u+1],g=t*o.size;Q[0]=o.data[g],Q[1]=o.data[g+1];let _=0;c.textureIsSignedDistanceField&&(_=Math.min(c.outlineSize,.5*Q[0])*e.screenToWorldRatio/2),Q[0]*=f,Q[1]*=p;let v=t*s.size,y=c.rotation+s.data[v];Pn(n,d,h,Q,m,_,y,c,l)&&r(i.distance,i.normal,-1)}}createBufferWriter(){return new Xn}applyShaderOffsets(e,t,n,r,a,o,s){A(In,n,O(Bn,r));let c=Nn(In,o,Gn),l=Qn(T(t),o),u=$n(this.parameters,t,c.cosAngle,o,s);i(t,t,c.normal,u+l),i(e,e,In,u+l);let d=a[3]+u;this._applyPolygonOffsetView(t,c,d,o,t),this._applyCenterOffsetView(t,a,t)}applyShaderOffsetsNDC(e,t,n,r,i){return this._applyCenterOffsetNDC(e,t,n,r),i!=null&&u(i,r),this._applyPolygonOffsetNDC(r,t,n,r),r}_applyPolygonOffsetView(e,t,n,r,i){let a=r.aboveGround?1:-1,o=Math.sign(n);o===0&&(o=a);let s=a*o;if(this.parameters.shaderPolygonOffset<=0)return u(i,e);let c=he(Math.abs(t.cosAngle),.01,1),l=1-Math.sqrt(1-c*c)/c/r.viewport[2];return m(i,e,s>0?l:1/l),i}_applyCenterOffsetView(e,t,n){let r=this.parameters.centerOffsetUnits!==`screen`;return n!==e&&u(n,e),r&&(n[0]+=t[0],n[1]+=t[1],t[2]&&(F(Y,n),o(n,n,m(Y,Y,t[2])))),n}_applyCenterOffsetNDC(e,t,n,r){let i=this.parameters.centerOffsetUnits!==`screen`;return r!==e&&u(r,e),i||(r[0]+=t[0]/n.fullWidth*2,r[1]+=t[1]/n.fullHeight*2),r}_applyPolygonOffsetNDC(e,t,n,r){let i=this.parameters.shaderPolygonOffset;if(e!==r&&u(r,e),i){let e=n.aboveGround?1:-1,a=e*Math.sign(t[3]);r[2]-=(a||e)*i}return r}set visible(e){this._visible=e}get visible(){let{color:e,outlineSize:t,outlineColor:n}=this.parameters,r=e[3]>=.003913894324853229||t>=.003913894324853229&&n[3]>=.003913894324853229;return this._visible&&r}createGLMaterial(e){return new jn(e)}calculateRelativeScreenBounds(e,t,n=oe()){return Mn(this.parameters,e,t,n),n[2]=n[0]+e[0],n[3]=n[1]+e[1],n}},jn=class extends Me{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(wn,e)}};function Mn(e,t,n,r){r[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*n,r[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*n}function Nn(e,t,n){return M(n.normal,e,t.viewInverseTransposeMatrix),n.cosAngle=_e(n.normal,Jn),n}function Pn(e,t,n,r,i,a,o,c,l){let u=t-i-r[0]*l[0],d=u+r[0]+2*i,f=n-i-r[1]*l[1],p=f+r[1]+2*i,m=c.distanceFieldBoundingBox;return c.textureIsSignedDistanceField&&m!=null&&(u+=r[0]*m[0],f+=r[1]*m[1],d-=r[0]*(1-m[2]),p-=r[1]*(1-m[3]),u-=a,d+=a,f-=a,p+=a),s(zn,t,n),k(Rn,e,zn,y(o)),Rn[0]>u&&Rn[0]<d&&Rn[1]>f&&Rn[1]<p}var Fn=new et,J=I(),Y=I(),X=D(),In=I(),Ln=I(),Rn=C(),zn=C(),Bn=v(),Vn=d(),Hn=D(),Z=I(),Un=I(),Wn=D(),Gn={normal:I(),cosAngle:0},Kn=1,qn=2,Q=l(0,0),Jn=ge(0,0,1),Yn=class extends je{constructor(){super(...arguments),this.renderOccluded=1,this.isDecoration=!1,this.color=E(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=l(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=E(1,1,1,1),this.outlineSize=0,this.distanceFieldBoundingBox=D(),this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.useVisibilityPixel=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.occludedVisibilityMode=`hidden`,this.centerOffsetUnits=`world`,this.drawAsLabel=!1,this.depthEnabled=!0,this.isFocused=!0,this.focusStyle=`bright`,this.draped=!1,this.isLabel=!1}get hasVVSize(){return!!this.vvSize}get hasVVColor(){return!!this.vvColor}get hasVVOpacity(){return!!this.vvOpacity}},Xn=class{constructor(){this.layout=kn(),this.baseInstanceLayout=En}elementCount(e){return e.get(`position`).indices.length}elementCountBaseInstance(e){return e.get(`uv0`).indices.length}write(e,t,n,r,i,a){let{position:o,normal:s,color:c,size:l,rotation:u,centerOffsetAndDistance:d,featureAttribute:f,uvi:p}=i;Ke(n.get(`position`),e,o,a),$e(n.get(`normal`),t,s,a);let m=n.get(`position`).indices.length,h=0,g=0,_=ft,v=ft,y=n.get(`uvi`)?.data;y&&y.length>=4&&(h=y[0],g=y[1],_=y[2],v=y[3]);for(let e=0;e<m;++e){let t=a+e;p.setValues(t,h,g,_,v)}if(Ze(n.get(`color`),4,c,a),He(n.get(`size`),l,a),Je(n.get(`rotation`),u,a),n.get(`centerOffsetAndDistance`)?Qe(n.get(`centerOffsetAndDistance`),d,a):Ye(d,a,m),n.get(`featureAttribute`)?Qe(n.get(`featureAttribute`),f,a):Ye(f,a,m),r!=null){let e=n.get(`position`)?.indices;if(e){let t=e.length,n=i.getField(`olidColor`,De);Xe(r,n,t,a)}}return{numVerticesPerItem:1,numItems:m}}writeBaseInstance(e,t){let{uv0:n}=t;He(e.get(`uv0`),n,0)}intersect(e,t,n,r,a,o,s){let{options:{selectionMode:c,hud:l,excludeLabels:d},point:f,camera:p}=r;if(!c||!l||d&&t.isLabel||!f)return;let h=this.layout.createView(e),{position:g,normal:v,rotation:y,size:b,featureAttribute:C,centerOffsetAndDistance:w}=h,E=t.centerOffsetUnits===`screen`,D=mt(t);if(g==null||v==null||y==null||b==null||w==null||p==null)return;let O=C==null?null:C.getVec(0,Wn),{scaleX:k,scaleY:A}=Zn(O,t,p.pixelRatio),ee=g.count;for(let e=0;e<ee;e++){if(g.getVec(e,J),n!=null&&x(J,J,n),M(J,J,p.viewMatrix),w.getVec(e,Hn),_(Z,Hn[0],Hn[1],Hn[2]),!E&&(J[0]+=Z[0],J[1]+=Z[1],Z[2]!==0)){let e=Z[2];F(Z,J),P(J,J,m(Z,Z,e))}v.getVec(e,Y),Nn(Y,p,Gn);let a=$n(t,J,Gn.cosAngle,p,Fn);if(i(J,J,Gn.normal,a),p.applyProjection(J,X),X[0]>-1){E&&(Z[0]||Z[1])&&(X[0]+=Z[0]*p.pixelRatio,Z[1]!==0&&(X[1]+=Fn.alignmentEvaluator.apply(Z[1])*p.pixelRatio),p.unapplyProjection(X,J)),X[0]+=t.screenOffset[0]*p.pixelRatio,X[1]+=t.screenOffset[1]*p.pixelRatio,X[0]=Math.floor(X[0]),X[1]=Math.floor(X[1]),b.getVec(e,Q),Fn.evaluator.applyVec2(Q,Q);let n=Kn*p.pixelRatio,i=0;t.textureIsSignedDistanceField&&(i=Math.min(t.outlineSize,.5*Q[0])*p.pixelRatio/2),Q[0]*=k,Q[1]*=A;let a=y.get(e),o=t.rotation+a;if(Pn(f,X[0],X[1],Q,n,i,o,t,D)){let t=r.ray;if(M(Ln,J,S(Vn,p.viewMatrix)),X[0]=f[0],X[1]=f[1],p.unprojectFromRenderScreen(X,J)){let n=I();u(n,t.direction);let r=1/T(n);m(n,n,r),s(ye(t.origin,J)*r,n,e,Ln)}}}}}};function Zn(e,t,n){return e==null||t.vvSize==null?{scaleX:n,scaleY:n}:(lt(Un,t,e),{scaleX:Un[0]*n,scaleY:Un[1]*n})}function Qn(e,t){let n=t.computeRenderPixelSizeAtDist(e)*dt;return(t.aboveGround?1:-1)*n}function $n(e,t,n,r,i){if(!e.verticalOffset?.screenLength){let r=T(t);return i.update(n,r,e.screenSizePerspective,e.screenSizePerspectiveMinPixelReferenceSize,e.screenSizePerspectiveAlignment,null),0}let a=T(t),o=e.screenSizePerspectiveAlignment??e.screenSizePerspective,s=tt(r,a,e.verticalOffset,n,o,e.screenSizePerspectiveMinPixelReferenceSize);return i.update(n,a,e.screenSizePerspective,e.screenSizePerspectiveMinPixelReferenceSize,e.screenSizePerspectiveAlignment,null),s}function er(e,t){if(e.type===`point`)return $(e,t,!1);if(Ie(e))switch(e.type){case`extent`:return $(e.center,t,!1);case`polygon`:return $(rr(e),t,!1);case`polyline`:return $(tr(e),t,!0);case`mesh`:return $(be(e.vertexSpace,e.spatialReference)??e.extent.center,t,!1);case`multipoint`:return}else switch(e.type){case`extent`:return $(nr(e),t,!0);case`polygon`:return $(rr(e),t,!0);case`polyline`:return $(tr(e),t,!0);case`multipoint`:return}}function tr(e){let t=e.paths[0];if(!t||t.length===0)return null;let r=fe(t,n(t)/2);return ke(r[0],r[1],r[2],e.spatialReference)}function nr(e){return ke(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),e.zmin!=null&&e.zmax!=null&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function rr(e){let t=e.rings[0];if(!t||t.length===0)return null;let n=le(e.rings,!!e.hasZ);return ke(n[0],n[1],n[2],e.spatialReference)}function $(e,t,n){let r=n?e:Fe(e);return t&&e?c(e,r,t)?r:null:r}function ir(e,t,n,r=0){if(e){t||=oe();let i=e,a=.5*i.width*(n-1),o=.5*i.height*(n-1);return i.width<1e-7*i.height?a+=o/20:i.height<1e-7*i.width&&(o+=a/20),ae(t,i.xmin-a-r,i.ymin-o-r,i.xmax+a+r,i.ymax+o+r),t}return null}function ar(t,n,r=null){let i=j(e);return t!=null&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],t.length>3&&(i[3]=t[3])),n!=null&&(i[3]=n),r&&pe(i,i,r),i}function or(e=ie,t,n,r=1){let i=[,,,];if(t==null||n==null)i[0]=1,i[1]=1,i[2]=1;else{let r,a=0;for(let o=2;o>=0;o--){let s=e[o],c=s!=null,l=o===0&&!r&&!c,u=n[o],d;s===`symbol-value`||l?d=u===0?1:t[o]/u:c&&s!==`proportional`&&isFinite(s)&&(d=u===0?1:s/u),d!=null&&(i[o]=d,r=d,a=Math.max(a,Math.abs(d)))}for(let e=2;e>=0;e--)i[e]==null?i[e]=r:i[e]===0&&(i[e]=.001*a)}for(let e=2;e>=0;e--)i[e]/=r;return me(i)}function sr(e){return e.isPrimitive!=null}function cr(e){return lr(sr(e)?[e.width,e.depth,e.height]:e)?null:`Symbol sizes may not be negative values`}function lr(e){let t=e=>e==null||e>=0;return Array.isArray(e)?e.every(t):t(e)}function ur(e,t,n,r=d()){return e&&te(r,r,-e/180*Math.PI),t&&f(r,r,t/180*Math.PI),n&&ce(r,r,n/180*Math.PI),r}function dr(e,t,n){if(n.minDemResolution!=null)return n.minDemResolution;let i=r(t),a=h(e)*i,o=ee(e)*i,s=ne(e)*(t.isGeographic?1:i);return a===0&&o===0&&s===0?n.minDemResolutionForPoints:.01*Math.max(a,o,s)}export{un as C,_n as D,fn as E,gt as O,mn as S,cn as T,bn as _,or as a,sn as b,er as c,gn as d,Ht as f,vn as g,ln as h,dr as i,ht as k,An as l,qt as m,ar as n,cr as o,hn as p,ur as r,lr as s,ir as t,Cn as u,dn as v,an as w,on as x,pn as y};