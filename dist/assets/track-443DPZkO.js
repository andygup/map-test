const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodeticDistanceOperator-DPhIIsKi.js","assets/index-CZ4oMP1N.js","assets/index-CDgdHpAj.css","assets/geodeticCurveType-DoJa853C.js"])))=>i.map(i=>d[i]);
import{$m as e,$p as t,BS as n,Cx as r,I_ as i,Ih as a,Ov as o,Qp as s,Sw as c,Tn as l,U_ as u,Vv as d,Xp as f,Zv as ee,_n as te,ax as ne,bn as re,dC as ie,em as p,gn as m,kv as ae,mT as oe,mw as se,pn as h,px as g,tm as _,uE as ce,vn as v,vv as y,wn as b,ww as le,wx as ue,yn as de,zw as fe}from"./index-CZ4oMP1N.js";import{t as x}from"./arcadeEnvironment-dH-3dXN2.js";import{t as pe}from"./ImmutableArray-C3KNQCVd.js";import{A as me,C as S,E as he,F as ge,G as C,H as _e,I as ve,J as w,M as ye,N as be,P as xe,R as T,T as Se,V as Ce,X as E,Y as D,_ as we,a as Te,b as Ee,c as De,ct as Oe,d as ke,dt as Ae,et as O,h as je,i as Me,it as Ne,j as Pe,k,lt as A,m as j,n as Fe,nt as M,o as Ie,q as N,s as Le,t as P,tt as Re,u as F,v as I,y as L}from"./Dictionary-ByWMrwnf.js";import{o as ze}from"./shared-CBxUlSgW.js";import{r as Be}from"./number-bp6QQFrm.js";import{i as R,n as z}from"./Feature-BfVJqHKS.js";import{i as Ve,r as He,t as Ue}from"./containerUtils-CNnsTsDa.js";import{i as We,t as Ge}from"./WhereClause-CO9FHcAq.js";import{r as Ke}from"./streamLayerUtils-82UmlW-3.js";import{a as qe,i as Je,l as Ye,o as Xe}from"./measures-CvGGokgB.js";import{t as Ze}from"./fieldStats-B5F0iEW-.js";import{t as Qe}from"./ArcadePortal-CDC0x4Mh.js";import{t as $e}from"./Attachment-BMWxhZED.js";var et=class{constructor(e,t){this._moduleSingletons=e,this._syntaxModules=t}loadLibrary(e){if(this._syntaxModules==null)return null;let t=this._syntaxModules[e];return t?{syntax:t.script,uri:t.uri}:null}},tt=()=>ce.getLogger(`esri.arcade.compilerUtils`);function B(e,t,n){switch(e.type){case`VariableDeclaration`:for(let n of e.declarations)t.add(x(n.id));return;case`BlockStatement`:for(let r of e.body)B(r,t,n);return;case`ExportNamedDeclaration`:{let r=new Set;B(e.declaration,r,n);for(let e of r)t.add(e),n.add(e);return}case`ForInStatement`:case`ForOfStatement`:e.left.type===`VariableDeclaration`&&B(e.left,t,n),B(e.body,t,n);return;case`ForStatement`:e.init?.type===`VariableDeclaration`&&B(e.init,t,n),B(e.body,t,n);return;case`FunctionDeclaration`:t.add(x(e.id));return;case`IfStatement`:B(e.consequent,t,n),e.alternate&&B(e.alternate,t,n);return;case`ImportDeclaration`:for(let n of e.specifiers)t.add(x(n.local));return;case`WhileStatement`:B(e.body,t,n);return;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`ExpressionStatement`:case`ReturnStatement`:return}}function nt(e){let t=new Set,n=new Set;for(let r of e.body)B(r,t,n);if(!le(n,t))throw tt().error(`Internal error: exported undeclared symbols {${Array.from(c(n,t)).join(`, `)}}`),new l(null,`NeverReach`,null);return{globals:t,exports:n}}function rt(e){let t=new Set,n=new Set;if(B(e.body,t,n),n.size>0)throw tt().error(`Internal error: cannot export locals {${Array.from(n.values()).join(`, `)}}`),new l(null,`NeverReach`,null);return t}function it(e){let t=[],n=[],r=e.expression;for(;;)switch(r.type){case`MemberExpression`:n.push(r),r=r.object;break;case`CallExpression`:n.push(r),r=r.callee;break;case`SafeMemberExpression`:t.push({checked:r,unchecked:n.reverse()}),n=[],r=r.object;break;default:return{root:n.at(0)??r,sections:t.reverse()}}}var at={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},ot={functionDefinitions:new Map,constantDefinitions:new Map},st={functionDefinitions:new Map,constantDefinitions:new Map};for(let e of[`pi`,`infinity`])st.constantDefinitions.set(e,{type:`constant`}),ot.constantDefinitions.set(e,{type:`constant`});for(let e in st.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`newline`,type:`constant`}]}),ot.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`newline`,type:`constant`}]}),at){let t=at[e];st.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]}),ot.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]})}var ct=new Set([`attachments`,`featureset`,`featuresetbyassociation`,`featuresetbyid`,`featuresetbyname`,`featuresetbyportalitem`,`featuresetbyrelationshipname`,`featuresetbyurl`,`filterbysubtypecode`,`getfeatureset`,`getfeaturesetinfo`,`getuser`,`knowledgegraphbyportalitem`,`querygraph`]),lt=new Set([`translatetext`]),ut=new Set(`area.areageodetic.buffer.buffergeodetic.centroid.clip.contains.convexhull.crosses.cut.densify.densifygeodetic.difference.disjoint.distance.distancegeodetic.distancetocoordinate.equals.generalize.intersection.intersects.isselfintersecting.issimple.length.length3d.lengthgeodetic.measuretocoordinate.multiparttosinglepart.nearestcoordinate.nearestvertex.offset.overlaps.pointtocoordinate.relate.rotate.simplify.symmetricdifference.touches.union.within`.split(`.`));function dt(e,t){let n=t===`sync`?ot:st;n.functionDefinitions.has(e.name.toLowerCase())?n.functionDefinitions.get(e.name.toLowerCase())?.overloads.push({type:`function`,parametersInfo:{min:e.min,max:e.max}}):n.functionDefinitions.set(e.name.toLowerCase(),{overloads:[{type:`function`,parametersInfo:{min:e.min,max:e.max}}]})}function V(e,t){if(e)for(let n of e)H(n,t)}function H(e,t){if(e&&!1!==t(e))switch(e.type){case`ImportDeclaration`:V(e.specifiers,t),H(e.source,t);break;case`ExportNamedDeclaration`:H(e.declaration,t);break;case`ArrayExpression`:V(e.elements,t);break;case`AssignmentExpression`:case`BinaryExpression`:case`LogicalExpression`:H(e.left,t),H(e.right,t);break;case`BlockStatement`:case`Program`:V(e.body,t);break;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`Identifier`:case`Literal`:break;case`CallExpression`:H(e.callee,t),V(e.arguments,t);break;case`ExpressionStatement`:case`MemberAccessChainExpression`:H(e.expression,t);break;case`ForInStatement`:case`ForOfStatement`:H(e.left,t),H(e.right,t),H(e.body,t);break;case`ForStatement`:H(e.init,t),H(e.test,t),H(e.update,t),H(e.body,t);break;case`WhileStatement`:H(e.test,t),H(e.body,t);break;case`FunctionDeclaration`:H(e.id,t),V(e.params,t),H(e.body,t);break;case`IfStatement`:H(e.test,t),H(e.consequent,t),H(e.alternate,t);break;case`MemberExpression`:case`SafeMemberExpression`:H(e.object,t),H(e.property,t);break;case`ObjectExpression`:V(e.properties,t);break;case`Property`:H(e.key,t),H(e.value,t);break;case`ReturnStatement`:case`UnaryExpression`:case`UpdateExpression`:H(e.argument,t);break;case`VariableDeclaration`:V(e.declarations,t);break;case`VariableDeclarator`:H(e.id,t),H(e.init,t);break;case`TemplateLiteral`:V(e.expressions,t),V(e.quasis,t)}}function ft(e){return e?.type===`Literal`&&typeof e.value==`string`}function pt(e,t){let n=!1,r=t.toLowerCase();return H(e,e=>!n&&(e.type===`Identifier`&&e.name&&e.name.toLowerCase()===r&&(n=!0),!0)),n}function mt(e){let t=[];return H(e,e=>(e.type===`ImportDeclaration`&&e.source&&e.source.value&&t.push({libname:x(e.specifiers[0].local),source:e.source.value}),!0)),t}function ht(e,t){let n=!1,r=t.toLowerCase();return H(e,e=>!n&&(e.type!==`CallExpression`||e.callee.type!==`Identifier`||!e.callee.name||e.callee.name.toLowerCase()!==r||(n=!0,!1))),n}function gt(e){let t=[];return H(e,e=>e.type!==`MemberExpression`||e.object.type!==`Identifier`||((e.property.type===`Identifier`||e.property.type===`Literal`&&typeof e.property.value==`string`)&&t.push({varId:x(e.object),memberId:x(e.property)}),!1)),t}function _t(e){let t=[];return H(e,e=>{if(e.type===`CallExpression`&&e.callee.type===`Identifier`)switch(x(e.callee)){case`expects`:if(e.arguments.length>1){let[n,...r]=e.arguments;if(n?.type===`Identifier`){let e=x(n);for(let n of r)ft(n)&&t.push({varId:e,memberNamePattern:n.value})}}return!1;case`domainname`:case`domaincode`:case`domain`:case`haskey`:case`hasvalue`:if(e.arguments.length>=2){let[n,r]=e.arguments;n?.type===`Identifier`&&ft(r)&&t.push({varId:x(n),memberNamePattern:r.value})}return!0;case`defaultvalue`:if(e.arguments.length>2){let[n,r]=e.arguments;n?.type===`Identifier`&&ft(r)&&t.push({varId:x(n),memberNamePattern:r.value})}return!0;default:return!0}return e.type!==`MemberExpression`||e.object.type!==`Identifier`||(e.computed?!!ft(e.property)&&(t.push({varId:x(e.object),memberNamePattern:e.property.value}),!1):(t.push({varId:x(e.object),memberNamePattern:e.property.name}),!1))}),t}function vt(e){let t=[];return H(e,e=>(e.type===`CallExpression`&&e.callee.type===`Identifier`&&t.push(x(e.callee)),!0)),t}function yt(e,t=[]){let n=null;if(e.usesFeatureSet===void 0){n===null&&(n=vt(e)),e.usesFeatureSet=!1;for(let t=0;t<n.length;t++)ct.has(n[t])&&(e.usesFeatureSet=!0,e.isAsync=!0);if(!1===e.usesFeatureSet&&t&&t.length>0){for(let n of t)if(pt(e,n)){e.usesFeatureSet=!0,e.isAsync=!0;break}}}if(e.isAsync===void 0&&(n===null&&(n=vt(e)),n.some(e=>lt.has(e))&&(e.isAsync=!0)),e.usesModules===void 0&&(e.usesModules=!1,mt(e).length>0&&(e.usesModules=!0)),e.usesGeometry===void 0){e.usesGeometry=!1,n===null&&(n=vt(e));for(let t=0;t<n.length;t++)ut.has(n[t])&&(e.usesGeometry=!0)}}function bt(e){function n(e,n,r){if(e instanceof pe)return e.toArray();if(t(e))return e;throw new b(n,`InvalidParameter`,r)}function r(e,t){let n=e.length,a=Math.floor(n/2);return n===0?[]:n===1?[e[0]]:i(r(e.slice(0,a),t),r(e.slice(a,n),t),t)}function i(e,t,n){let r=[];for(;e.length>0||t.length>0;)if(e.length>0&&t.length>0){let i=n(e[0],t[0]);isNaN(i)&&(i=0),i<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}async function a(e,t){let n=e.length,r=Math.floor(n/2);if(n===0)return[];if(n===1)return[e[0]];let i=[await a(e.slice(0,r),t),await a(e.slice(r,n),t)];return o(i[0],i[1],t,[])}async function o(e,t,n,r){let i=r;if(e.length>0||t.length>0){if(e.length>0&&t.length>0){let a=await n(e[0],t[0]);return isNaN(a)&&(a=1),a<=0?(i.push(e[0]),e=e.slice(1)):(i.push(t[0]),t=t.slice(1)),o(e,t,n,r)}return e.length>0?(i.push(e[0]),o(e=e.slice(1),t,n,r)):(i.push(t[0]),o(e,t=t.slice(1),n,r))}return r}function s(e,n,i,o){E(i,1,2,e,n);let s=i[0];if(M(s)&&(s=s.toArray()),!1===t(s))throw new b(e,`InvalidParameter`,n);if(i.length>1){if(!1===Ee(i[1]))throw new b(e,`InvalidParameter`,n);let t=s,c=i[1].createFunction(e);return o?a(t,c):(t=r(t,(e,t)=>c(e,t)),t)}let c=s;if(c.length===0)return[];let l={};for(let e=0;e<c.length;e++){let t=ke(c[e]);t!==``&&(l[t]=!0)}if(!0===l.Array||!0===l.Dictionary||!0===l.Feature||!0===l.Voxel||!0===l.Pixel||!0===l.Point||!0===l.Polygon||!0===l.Polyline||!0===l.Multipoint||!0===l.Extent||!0===l.Function)return c.slice();let u=0,d=``;for(let e in l)u++,d=e;return c=u>1||d===`String`?r(c,(e,t)=>{if(e==null||e===S)return t==null||t===S?0:1;if(t==null||t===S)return-1;let n=C(e),r=C(t);return n<r?-1:n===r?0:1}):d===`Number`?r(c,(e,t)=>e-t):d===`Boolean`?r(c,(e,t)=>e===t?0:t?-1:1):d===`Date`?r(c,(e,t)=>e.toNumber()-t.toNumber()):c.slice(),c}e.functions.array=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,0,2,n,r),a.length===0||a.length===1&&a[0]===null)return[];if(t(a[0])){if(a.length===2&&!1===_(a[1]))throw new b(n,`InvalidParameter`,r);return!0===A(a[1],!1)?Fe(a[0]):a[0].slice()}if(M(a[0])){if(a.length===2&&!1===_(a[1]))throw new b(n,`InvalidParameter`,r);return!0===A(a[1],!1)?Fe(a[0]):a[0].toArray().slice()}let o=k(a[0]);if(isNaN(o)||!1===p(o))throw new b(n,`InvalidParameter`,r);let s=A(a[1],null),c=Array(o);return c.fill(s),c})},e.functions.front=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,1,1,n,r),M(a[0])){if(a[0].length()<=0)throw new b(n,`OutOfBounds`,r);return a[0].get(0)}if(t(a[0])){if(a[0].length<=0)throw new b(n,`OutOfBounds`,r);return a[0][0]}throw new b(n,`InvalidParameter`,r)})},e.functions.back=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,1,1,n,r),M(a[0])){if(a[0].length()<=0)throw new b(n,`OutOfBounds`,r);return a[0].get(a[0].length()-1)}if(t(a[0])){if(a[0].length<=0)throw new b(n,`OutOfBounds`,r);return a[0][a[0].length-1]}throw new b(n,`InvalidParameter`,r)})},e.functions.push=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,1,2,n,r),t(a[0]))return a[0][a[0].length]=a[1],a[0].length;throw new b(n,`InvalidParameter`,r)})},e.functions.pop=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,1,1,n,r),t(a[0])){if(a[0].length<=0)throw new b(n,`OutOfBounds`,r);let e=a[0][a[0].length-1];return a[0].length=a[0].length-1,e}throw new b(n,`InvalidParameter`,r)})},e.functions.erase=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,2,2,n,r),t(a[0])){let e=k(a[1]);if(isNaN(e)||!1===p(e))throw new b(n,`InvalidParameter`,r);let t=a[0];if(t.length<=0||(e<0&&(e=t.length+e),e<0)||e>=t.length)throw new b(n,`OutOfBounds`,r);return t.splice(e,1),S}if(I(a[0]))return a[0].eraseField(C(a[1])),S;throw new b(n,`InvalidParameter`,r)})},e.functions.insert=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,3,3,n,r),t(a[0])){let e=k(a[1]);if(isNaN(e)||!1===p(e))throw new b(n,`InvalidParameter`,r);let t=a[2],i=a[0];if(e>i.length||e<0&&e<-1*i.length)throw new b(n,`OutOfBounds`,r);return e===i.length?(i[e]=t,S):(i.splice(e,0,t),S)}if(I(a[0]))return a[0].setField(C(a[1]),a[2]),S;throw new b(n,`InvalidParameter`,r)})},e.functions.getkeys=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(E(n,1,1,e,t),n[0]==null)return[];if(I(n[0]))return n[0].keys();throw new b(e,`InvalidParameter`,t)})},e.functions.getvalues=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(E(n,1,1,e,t),n[0]==null)return[];if(I(n[0]))return n[0].values();throw new b(e,`InvalidParameter`,t)})},e.functions.resize=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,2,3,n,r),t(a[0])){let e=k(a[1]);if(isNaN(e)||!1===p(e)||e<0)throw new b(n,`InvalidParameter`,r);let t=A(a[2],null),i=a[0];if(i.length>=e)return i.length=e,S;let o=i.length;i.length=e;for(let e=o;e<i.length;e++)i[e]=t;return S}throw new b(n,`InvalidParameter`,r)})},e.functions.includes=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,2,2,n,r),t(a[0])){let e=a[1];return!!a[0].some(t=>Oe(t,e))}if(M(a[0])){let e=a[1];return!!a[0].toArray().some(t=>Oe(t,e))}throw new b(n,`InvalidParameter`,r)})},e.functions.slice=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,1,3,n,r),t(a[0])){let e=k(A(a[1],0)),t=k(A(a[2],a[0].length));if(isNaN(e)||!1===p(e)||isNaN(t)||!1===p(t))throw new b(n,`InvalidParameter`,r);return a[0].slice(e,t)}if(M(a[0])){let e=a[0],t=k(A(a[1],0)),i=k(A(a[2],e.length()));if(isNaN(t)||!1===p(t)||isNaN(i)||!1===p(i))throw new b(n,`InvalidParameter`,r);return e.toArray().slice(t,i)}throw new b(n,`InvalidParameter`,r)})},e.functions.splice=function(n,r){return e.standardFunction(n,r,(e,n,r)=>{let i=[];for(let e=0;e<r.length;e++)t(r[e])?i.push(...r[e]):M(r[e])?i.push(...r[e].toArray()):i.push(r[e]);return i})},e.functions.top=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(E(a,2,2,n,r),t(a[0]))return k(a[1])>=a[0].length?a[0].slice():a[0].slice(0,k(a[1]));if(M(a[0]))return k(a[1])>=a[0].length()?a[0].slice():a[0].slice(0,k(a[1]));throw new b(n,`InvalidParameter`,r)})},e.functions.first=function(n,r){return e.standardFunction(n,r,(e,i,a)=>(E(a,1,1,n,r),t(a[0])?a[0].length===0?null:a[0][0]:M(a[0])?a[0].length()===0?null:a[0].get(0):null))},e.mode===`sync`&&(e.functions.sort=function(t,n){return e.standardFunction(t,n,(e,n,r)=>s(t,n,r,!1))},e.functions.any=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=a(e);if(_(t)&&!0===t)return!0}return!1})},e.functions.all=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o)if(!0!==a(e))return!1;return!0})},e.functions.none=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o)if(!0===a(e))return!1;return!0})},e.functions.reduce=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{E(i,2,3,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);return i.length===2?o.length===0?null:o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==S?n:null}):o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==S?n:null},i[2])})},e.functions.map=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o){let t=a(e);t!==void 0&&t!==S?s.push(t):s.push(null)}return s})},e.functions.filter=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o)!0===a(e)&&s.push(e);return s})}),e.mode===`async`&&(e.functions.sort=function(t,n){return e.standardFunctionAsync(t,n,async(e,n,r)=>s(t,n,r,!0))},e.functions.any=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=await a(e),n=null;if(n=fe(n)?await t:t,_(n)&&!0===n)return!0}return!1})},e.functions.all=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=await a(e),n=null;if(n=fe(n)?await t:t,!0!==n)return!1}return!0})},e.functions.none=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=await a(e),n=null;if(n=fe(n)?await t:t,!0===n)return!1}return!0})},e.functions.filter=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o){let t=await a(e),n=null;n=fe(n)?await t:t,!0===n&&s.push(e)}return s})},e.functions.reduce=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{E(i,2,3,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s;if(i.length>2){let e=A(i[2],null);s=o.reduce(async(e,t)=>{let n=await e;return n!==void 0&&n!==S||(n=null),a(n,t)},Promise.resolve(e))}else{if(o.length===0)return null;s=o.reduce(async(e,t,n)=>{if(n<=1)return a(e,t);let r=await e;return r!==void 0&&r!==S||(r=null),a(r,t)})}return s.then(e=>e!==void 0&&e!==S?e:null)})},e.functions.map=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{E(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o){let t=await a(e),n=null;n=fe(n)?await t:t,n!==void 0&&n!==S?s.push(n):s.push(null)}return s})})}var xt=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:bt},Symbol.toStringTag,{value:`Module`}));function St(e,t,n){return e+(Ct(n)?Tt:wt)[t]}function Ct(e){return e%4==0&&(e%100!=0||e%400==0)}var wt=[0,31,59,90,120,151,181,212,243,273,304,334],Tt=[0,31,60,91,121,152,182,213,244,274,305,335];function U(e){return e===null?e:!1===e.isValid?null:e}function Et(e,t){switch(re(e)){case``:case`default`:return L(t);case`z`:return`UTC`;default:return e}}function W(e,t){return O(e)?e.toArcadeDate():T(e,L(t))}var Dt=new de([`days`,`months`,`minutes`,`seconds`,`hours`,`years`,`milliseconds`],[[`day`,`days`],[`d`,`days`],[`month`,`months`],[`minute`,`minutes`],[`m`,`minutes`],[`second`,`seconds`],[`s`,`seconds`],[`hour`,`hours`],[`h`,`hours`],[`year`,`years`],[`y`,`years`],[`millisecond`,`milliseconds`],[`ms`,`milliseconds`]]);function Ot(e){return e===`M`?`months`:Dt.lookup(C(e))??`milliseconds`}function kt(e,t){e.today=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,0,e,n);let a=new Date;return a.setHours(0,0,0,0),v.dateJSAndZoneToArcadeDate(a,L(e))})},e.time=function(e,n){return t(e,n,(t,r,i)=>{switch(E(i,0,4,e,n),i.length){case 0:{let t=v.nowToArcadeDate(L(e));return new h(t.hour,t.minute,t.second,t.millisecond)}case 1:{if(N(i[0]))return i[0].clone();if(D(i[0]))return new h(i[0].hour,i[0].minute,i[0].second,i[0].millisecond);if(O(i[0]))return new h(0,0,0,0);if(f(i[0]))return h.fromString(i[0]);let e=k(i[0]);return!1===isNaN(e)?h.fromMilliseconds(e):null}case 2:return f(i[0])&&f(i[1])?h.fromString(i[0],i[1]):h.fromParts(k(i[0]),k(i[1]),0,0);case 3:return h.fromParts(k(i[0]),k(i[1]),k(i[2]),0);case 4:return h.fromParts(k(i[0]),k(i[1]),k(i[2]),k(i[3]))}throw new b(e,`InvalidParameter`,n)})},e.dateonly=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,0,3,e,n),i.length===3)return m.fromParts(k(i[0]),k(i[1])+1,k(i[2]));if(i.length===2){let e=C(i[1]);return e===``?null:e===`X`?m.fromSeconds(k(i[0])):e===`x`?m.fromMilliseconds(k(i[0])):m.fromString(C(i[0]),e)}if(i.length===1){if(f(i[0])){if(i[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(i[0]))return m.fromString(i[0]+`-01-01`)}if(O(i[0]))return i[0].clone();if(D(i[0]))return m.fromParts(i[0].year,i[0].monthJS+1,i[0].day);let e=k(i[0]);return!1===isNaN(e)?m.fromMilliseconds(e):f(i[0])?m.fromString(i[0]):null}if(i.length===0){let t=v.nowToArcadeDate(L(e));return!1===t.isValid?null:m.fromParts(t.year,t.monthJS+1,t.day)}return null})},e.changetimezone=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,2,e,n),i[0]===null)return null;if(O(i[0]))throw new b(e,`CannotChangeTimeZoneDateOnly`,n);if(O(i[0]))throw new b(e,`CannotChangeTimeZoneTime`,n);let a=T(i[0],L(e));if(a===null)throw new b(e,`InvalidParameter`,n);let o=te(Et(C(i[1]),e),!1);if(o===null)return null;let s=v.arcadeDateAndZoneToArcadeDate(a,o);return!1===s.isValid?null:s})},e.timezone=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,2,e,n),N(i[0])||O(i[0]))return`Unknown`;let a=T(i[0],L(e));if(a===null)return null;let o=a.timeZone;return o===`system`?v.systemTimeZoneCanonicalName:o.toLowerCase()===`utc`?`UTC`:o.toLowerCase()===`unknown`?`Unknown`:o})},e.timezoneoffset=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=T(i[0],L(e));return a===null?null:60*a.timeZoneOffset*1e3})},e.now=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,0,e,n);let a=v.nowToArcadeDate(L(e));return!1===a.isValid?null:a})},e.timestamp=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,0,e,n);let a=v.nowUTCToArcadeDate();return!1===a.isValid?null:a})},e.toutc=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=T(i[0],L(e));return a===null?null:a.toUTC()})},e.tolocal=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=T(i[0],L(e));return a===null?null:a.toLocal()})},e.day=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.day})},e.month=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.monthJS})},e.year=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.year})},e.hour=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].hour;let a=T(i[0],L(e));return a===null?NaN:a.hour})},e.second=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].second;let a=T(i[0],L(e));return a===null?NaN:a.second})},e.millisecond=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].millisecond;let a=T(i[0],L(e));return a===null?NaN:a.millisecond})},e.minute=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].minute;let a=T(i[0],L(e));return a===null?NaN:a.minute})},e.week=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,2,e,n);let a=W(i[0],L(e));if(a===null)return NaN;let o=k(A(i[1],0));if(o<0||o>6)throw new b(e,`InvalidParameter`,n);let s=a.day,c=a.monthJS,l=a.year,u=a.dayOfWeekJS,d=St(s,c,l)-1,f=Math.floor(d/7);return u-o+(u-o<0?7:0)<d-7*f?f+1:f})},e.weekday=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.dayOfWeekJS})},e.isoweekday=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.dayOfWeekISO})},e.isomonth=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.monthISO})},e.isoweek=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.weekISO})},e.isoyear=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.yearISO})},e.date=function(e,n){return t(e,n,(t,r,a)=>{if(E(a,0,8,e,n),a.length===3){if(O(a[0])&&N(a[1])&&f(a[2])){let t=te(Et(C(a[2])??`unknown`,e),!1);return t===null?null:U(v.fromParts(a[0].year,a[0].month,a[0].day,a[1].hour,a[1].minute,a[1].second,a[1].millisecond,t))}return U(v.fromParts(k(a[0]),k(a[1])+1,k(a[2]),0,0,0,0,L(e)))}if(a.length===4)return U(v.fromParts(k(a[0]),k(a[1])+1,k(a[2]),k(a[3]),0,0,0,L(e)));if(a.length===5)return U(v.fromParts(k(a[0]),k(a[1])+1,k(a[2]),k(a[3]),k(a[4]),0,0,L(e)));if(a.length===6)return U(v.fromParts(k(a[0]),k(a[1])+1,k(a[2]),k(a[3]),k(a[4]),k(a[5]),0,L(e)));if(a.length===7)return U(v.fromParts(k(a[0]),k(a[1])+1,k(a[2]),k(a[3]),k(a[4]),k(a[5]),k(a[6]),L(e)));if(a.length===8){let t=te(Et(C(a[7])??`unknown`,e),!1);return t===null?null:U(v.fromParts(k(a[0]),k(a[1])+1,k(a[2]),k(a[3]),k(a[4]),k(a[5]),k(a[6]),t))}if(a.length===2){if(O(a[0])&&f(a[1])){let t=te(Et(C(a[1])??`unknown`,e),!1);return t===null?null:U(v.fromParts(a[0].year,a[0].month,a[0].day,0,0,0,0,t))}if(O(a[0])&&N(a[1]))return U(v.fromParts(a[0].year,a[0].month,a[0].day,a[1].hour,a[1].minute,a[1].second,a[1].millisecond,`unknown`));let t,n=C(a[1]);return n===``?null:(n=_e(n,!0),t=n===`X`?i.fromSeconds(k(a[0])):n===`x`?i.fromMillis(k(a[0])):i.fromFormat(C(a[0]),n,{locale:u(),numberingSystem:`latn`}),t.isValid?v.dateTimeToArcadeDate(t):null)}if(a.length===1){if(O(a[0]))return U(v.fromParts(a[0].year,a[0].month,a[0].day,0,0,0,0,`unknown`));if(f(a[0])){if(a[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(a[0]))return T(a[0]+`-01-01`,L(e))}let t=k(a[0]);if(!1===isNaN(t)){let n=i.fromMillis(t);return n.isValid?v.dateTimeAndZoneToArcadeDate(n,L(e)):null}return T(a[0],L(e))}return a.length===0?v.nowToArcadeDate(L(e)):null})},e.datediff=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,4,e,n),N(i[0]))return N(i[1])?i[0].difference(i[1],C(i[2])):NaN;if(N(i[1]))return NaN;if(O(i[0]))return O(i[1])?i[0].difference(i[1],C(i[2])):NaN;if(O(i[1]))return NaN;let a=T(i[0],L(e)),o=T(i[1],L(e));if(a===null||o===null)return NaN;let s=A(i[3],``);return s!==``&&s!==null?(s=Et(C(s),e),a=v.arcadeDateAndZoneToArcadeDate(a,s),o=v.arcadeDateAndZoneToArcadeDate(o,s)):a.timeZone!==o.timeZone&&(a.isUnknownTimeZone?a=v.arcadeDateAndZoneToArcadeDate(a,o.timeZone):o=(o.isUnknownTimeZone,v.arcadeDateAndZoneToArcadeDate(o,a.timeZone))),a.diff(o,Ot(i[2]))})},e.dateadd=function(e,n){return t(e,n,(t,r,i)=>{E(i,2,3,e,n);let a=k(i[1]);if(isNaN(a)||a===1/0||a===-1/0)return N(i[0])||O(i[0])?i[0].clone():T(i[0],L(e));let o=Ot(i[2]);if(o!==`days`&&o!==`months`||(a=O(i[0])?a:Re(a)),N(i[0])||O(i[0]))return i[0].plus(o,a);let s=T(i[0],L(e));return s===null?null:s.plus({[o]:a})})}}function At(e){let t=e?.fullSchema();return t?.datesInUnknownTimezone?`unknown`:t?.dateFieldsTimeZone||`UTC`}function jt(e){let t=e.fullSchema()?.fieldsIndex;return t==null&&e instanceof z?e.fieldsIndex:t}var Mt={getAttributeSQL(e,t){let n=e.field(t);if(n==null)return n;if(D(n)){let r=n.toDateTime(),i=jt(e)?.get(t)?.type;return i===`esriFieldTypeTimestampOffset`||i===`timestamp-offset`?We.fromDateTime(r):r}return n}};function Nt(e,t,n){e.domain=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,3,e,n),j(i[0])){let t=je(i[0],C(i[1]),i[2]===void 0?void 0:i[2]);return t&&t.domain?t.domain.type===`coded-value`||t.domain.type===`codedValue`?P.convertObjectToArcadeDictionary({type:`codedValue`,name:t.domain.name,dataType:ze[t.field.type],codedValues:t.domain.codedValues.map(e=>({name:e.name,code:e.code}))},L(e)):P.convertObjectToArcadeDictionary({type:`range`,name:t.domain.name,dataType:ze[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},L(e)):null}throw new b(e,`InvalidParameter`,n)})},e.domaincode=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,4,e,n),j(i[0]))return De(i[0],C(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new b(e,`InvalidParameter`,n)})},e.domainname=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,4,e,n),j(i[0]))return Te(i[0],C(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new b(e,`InvalidParameter`,n)})},e.expects=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new b(e,`WrongNumberOfParameters`,n);return S})},e.featureinfilter=function(e,r){return t(e,r,(e,t,r)=>{E(r,2,2,e,t);let[i,a]=r;if(i==null)return!1;if(a===``||a==null)return!0;if(!j(i)||!f(a))throw new b(e,`InvalidParameter`,t);let o=Ge.create(a,{fieldsIndex:jt(i),timeZone:At(i)}),s=o.getVariables();for(let t of s)o.parameters[t]=n(e,{name:t});return o.testFeature(i,Mt)})},e.gdbversion=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0]))return i[0].gdbVersion();throw new b(e,`InvalidParameter`,n)})},e.schema=function(e,n){return t(e,n,(t,r,i)=>{if(j(i[0])){let t=he(i[0]);return t?P.convertObjectToArcadeDictionary(t,L(e)):null}throw new b(e,`InvalidParameter`,n)})},e.subtypecode=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0])){let e=be(i[0]);if(!e)return null;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.code;return null}return null}throw new b(e,`InvalidParameter`,n)})},e.subtypename=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0])){let e=be(i[0]);if(!e)return``;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.name;return``}return``}throw new b(e,`InvalidParameter`,n)})},e.subtypes=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0])){let t=be(i[0]);return t?P.convertObjectToArcadeDictionary(t,L(e)):null}throw new b(e,`InvalidParameter`,n)})},e[x(`TimeReceived`)]=function(e,n){return t(e,n,(e,t,n)=>{if(E(n,1,1,e,t),j(n[0])){if(n[0].hasField(`__esri_time_received__`)){let t=n[0].field(Ke);return s(t)?v.epochToArcadeDate(t,e.timeZone??`system`):D(t)?t:null}return null}throw new b(e,`InvalidParameter`,t)})}}function Pt(e,n){e.ringisclockwise=function(e,r){return n(e,r,(n,i,a)=>{E(a,1,1,e,r);let o=[];if(a[0]===null)return!1;if(t(a[0]))for(let t of a[0]){if(!(t instanceof g))throw new b(e,`InvalidParameter`,r);o.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}else if(a[0]instanceof Ae)o=a[0]._elements;else{if(!M(a[0]))throw new b(e,`InvalidParameter`,r);for(let t of a[0].toArray()){if(!(t instanceof g))throw new b(e,`InvalidParameter`,r);o.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}}return!(o.length<3)&&d(o)})},e.polygon=function(e,t){return n(e,t,(n,r,i)=>{let a;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`polygon`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof ae)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new ae(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return w(a)})},e.polyline=function(e,t){return n(e,t,(n,r,i)=>{let a;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`polyline`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof o)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new o(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return w(a)})},e.point=function(e,t){return n(e,t,(n,r,i)=>{let a;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`point`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof g)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new g(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return w(a)})},e.multipoint=function(e,t){return n(e,t,(n,r,i)=>{let a;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`multipoint`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof ee)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new ee(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return w(a)})},e.extent=function(e,t){return n(e,t,(n,r,i)=>{i=we(i),E(i,1,1,e,t);let a=null;if(i[0]instanceof P)a=F(R(i[0],e.spatialReference),e.spatialReference);else if(i[0]instanceof g){let e={xmin:i[0].x,ymin:i[0].y,xmax:i[0].x,ymax:i[0].y,spatialReference:i[0].spatialReference.toJSON()},t=i[0];t.hasZ&&(e.zmin=t.z,e.zmax=t.z),t.hasM&&(e.mmin=t.m,e.mmax=t.m),a=y(e)}else if(i[0]instanceof ae)a=y(i[0].extent?.toJSON());else if(i[0]instanceof o)a=y(i[0].extent?.toJSON());else if(i[0]instanceof ee)a=y(i[0].extent?.toJSON());else if(i[0]instanceof ne)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new ne(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return w(a)})},e.geometry=function(e,t){return n(e,t,(n,r,i)=>{E(i,1,1,e,t);let a=null;if(i[0]===null)return null;if(j(i[0]))a=F(i[0].geometry(),e.spatialReference);else if(i[0]instanceof P)a=F(R(i[0],e.spatialReference),e.spatialReference);else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(y(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return w(a)})},e.setgeometry=function(e,t){return n(e,t,(n,i,a)=>{if(E(a,2,2,e,t),!j(a[0]))throw new b(e,`InvalidParameter`,t);if(!0===a[0].immutable)throw new b(e,`Immutable`,t);if(!(a[1]instanceof r||a[1]===null))throw new b(e,`InvalidParameter`,t);return a[0]._geometry=a[1],S})},e.feature=function(e,t){return n(e,t,(n,i,a)=>{if(a.length===0)throw new b(e,`WrongNumberOfParameters`,t);let o;if(a.length===1)if(f(a[0]))o=z.fromJson(JSON.parse(a[0]),e.timeZone);else if(j(a[0]))o=z.createFromArcadeFeature(a[0]);else if(a[0]instanceof r)o=z.createFromGraphicLikeObject(a[0],null,null,e.timeZone);else{if(!(a[0]instanceof P))throw new b(e,`InvalidParameter`,t);{let n=a[0].hasField(`geometry`)?a[0].field(`geometry`):null,r=a[0].hasField(`attributes`)?a[0].field(`attributes`):null,i,s;if(I(n))i=R(n,e.spatialReference);else{if(n!=null&&!me(n))throw new b(e,`InvalidParameter`,t);i=n}if(I(r))s=z.parseAttributesFromDictionary(r);else{if(r!=null)throw new b(e,`InvalidParameter`,t);s=null}o=z.createFromGraphicLikeObject(i,s,null,e.timeZone)}}else if(a.length===2){let n=null,i=null;if(a[0]!==null)if(a[0]instanceof r)n=a[0];else{if(!(a[0]instanceof P))throw new b(e,`InvalidParameter`,t);n=R(a[0],e.spatialReference)}if(a[1]!==null){if(!(a[1]instanceof P))throw new b(e,`InvalidParameter`,t);i=z.parseAttributesFromDictionary(a[1])}o=z.createFromGraphicLikeObject(n,i,null,e.timeZone)}else{let n=null,i={};if(a[0]!==null)if(a[0]instanceof r)n=a[0];else{if(!(a[0]instanceof P))throw new b(e,`InvalidParameter`,t);n=R(a[0],e.spatialReference)}for(let n=1;n<a.length;n+=2){let r=C(a[n]),o=a[n+1];if(!(o==null||f(o)||isNaN(o)||D(o)||s(o)||N(o)||O(o)||_(o))||Ee(o)||!1===Pe(o))throw new b(e,`InvalidParameter`,t);i[r]=o===S?null:o}o=z.createFromGraphicLikeObject(n,i,null,e.timeZone)}return o._geometry=F(o.geometry(),e.spatialReference),o.immutable=!1,o})},e.dictionary=function(e,i){return n(e,i,(n,a,o)=>{if(o.length===0||o.length===1&&o[0]===null){let e=new P;return e.immutable=!1,e}if(o.length===1&&f(o[0]))try{let t=JSON.parse(o[0]),n=P.convertObjectToArcadeDictionary(t,L(e),!1);return n.immutable=!1,n}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===1&&o[0]instanceof r)try{let t=o[0].toJSON();t.hasZ=!0===o[0].hasZ,t.hasM=!0===o[0].hasM;let n=P.convertObjectToArcadeDictionary(t,L(e),!1);return n.immutable=!1,n}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===1&&j(o[0]))try{let e=new P;e.immutable=!1,e.setField(`geometry`,o[0].geometry());let t=new P;t.immutable=!1,e.setField(`attributes`,t);for(let e of o[0].keys())t.setField(e,o[0].field(e));return e}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===1&&(I(o[0])||ye(o[0])||Me(o[0])))try{let e=new P;e.immutable=!1;for(let t of o[0].keys())e.setField(t,o[0].field(t));return e}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===2&&o[0]instanceof P&&_(o[1]))try{if(!0!==o[1]){let e=new P;e.immutable=!1;for(let t of o[0].keys())e.setField(t,o[0].field(t));return e}return o[0].deepClone()}catch{throw new b(e,`InvalidParameter`,i)}if(o.length%2!=0)throw new b(e,`WrongNumberOfParameters`,i);let c=Object.create(null);for(let n=0;n<o.length;n+=2){let r=C(o[n]),a=o[n+1];if(!(a==null||f(a)||isNaN(a)||D(a)||s(a)||_(a)||O(a)||N(a)||t(a)||M(a))||Ee(a))throw new b(e,`InvalidParameter`,i);c[r]=a===S?null:a}let l=new P(c);return l.immutable=!1,l})},e.haskey=function(e,t){return n(e,t,(n,i,a)=>{E(a,2,2,e,t);let o=C(a[1]);if(Se(a[0])||a[0]instanceof P)return a[0].hasField(o);if(a[0]instanceof r){let e=o.toLowerCase();for(let t of Ve(a[0]))if(t.toLowerCase()===e)return!0;return!1}throw new b(e,`InvalidParameter`,t)})},e.hasvalue=function(e,t){return n(e,t,(n,r,i)=>(E(i,2,2,e,t),He(i[0],i[1])!=null))},e.indexof=function(e,r){return n(e,r,(n,i,a)=>{E(a,2,2,e,r);let o=a[1];if(t(a[0])){for(let e=0;e<a[0].length;e++)if(Oe(o,a[0][e]))return e;return-1}if(M(a[0])){let e=a[0].length();for(let t=0;t<e;t++)if(Oe(o,a[0].get(t)))return t;return-1}throw new b(e,`InvalidParameter`,r)})},e.angle=function(e,t){return n(e,t,(n,r,i)=>{if(i=we(i),E(i,2,3,e,t),!(i[0]instanceof g)||!(i[1]instanceof g)||i.length>2&&!(i[2]instanceof g))throw new b(e,`InvalidParameter`,t);return i.length===2?Ye(i[0],i[1]):Je(i[0],i[1],i[2])})},e.bearing=function(e,t){return n(e,t,(n,r,i)=>{if(i=we(i),E(i,2,3,e,t),!(i[0]instanceof g)||!(i[1]instanceof g)||i.length>2&&!(i[2]instanceof g))throw new b(e,`InvalidParameter`,t);return i.length===2?Xe(i[0],i[1]):qe(i[0],i[1],i[2])})}}function Ft(e,n){function r(e,t,n){let r=k(e);return isNaN(r)?r:isNaN(t)||isNaN(n)||t>n?NaN:r<t?t:r>n?n:r}e.number=function(e,r){return n(e,r,(n,i,a)=>{E(a,1,2,e,r);let o=a[0];if(s(o))return o;if(o===null)return 0;if(D(o)||N(o)||O(o))return o.toNumber();if(_(o))return Number(o);if(t(o))return NaN;if(o===``||o===void 0)return Number(o);if(f(o)){if(a[1]!==void 0){let e=ve(a[1],`‰`,``);return e=ve(e,`¤`,``),Be(o,{pattern:e})}return Number(o.trim())}return Number(o)})},e.abs=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.abs(k(i[0]))))},e.acos=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.acos(k(i[0]))))},e.asin=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.asin(k(i[0]))))},e.atan=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.atan(k(i[0]))))},e.atan2=function(e,t){return n(e,t,(n,r,i)=>(E(i,2,2,e,t),Math.atan2(k(i[0]),k(i[1]))))},e.ceil=function(e,t){return n(e,t,(n,r,i)=>{if(E(i,1,2,e,t),i.length===2){let e=k(i[1]);return isNaN(e)&&(e=0),se(`ceil`,k(i[0]),-1*e)}return Math.ceil(k(i[0]))})},e.round=function(e,t){return n(e,t,(n,r,i)=>{if(E(i,1,2,e,t),i.length===2){let e=k(i[1]);return isNaN(e)&&(e=0),se(`round`,k(i[0]),-1*e)}return Math.round(k(i[0]))})},e.floor=function(e,t){return n(e,t,(n,r,i)=>{if(E(i,1,2,e,t),i.length===2){let e=k(i[1]);return isNaN(e)&&(e=0),se(`floor`,k(i[0]),-1*e)}return Math.floor(k(i[0]))})},e.cos=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.cos(k(i[0]))))},e.isnan=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),typeof i[0]==`number`&&isNaN(i[0])))},e.exp=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.exp(k(i[0]))))},e.log=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.log(k(i[0]))))},e.pow=function(e,t){return n(e,t,(n,r,i)=>(E(i,2,2,e,t),k(i[0])**k(i[1])))},e.random=function(e,t){return n(e,t,(n,r,i)=>(E(i,0,0,e,t),Math.random()))},e.sin=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.sin(k(i[0]))))},e.sqrt=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.sqrt(k(i[0]))))},e.tan=function(e,t){return n(e,t,(n,r,i)=>(E(i,1,1,e,t),Math.tan(k(i[0]))))},e.isempty=function(e,t){return n(e,t,(e,t,n)=>{if(E(n,1,2,e,t),n.length>=2&&!_(n[1]))throw new b(e,`InvalidParameter`,t);return A(n[1],!1)?Ue(n[0]):Ne(n[0])})},e.boolean=function(e,t){return n(e,t,(n,r,i)=>{E(i,1,1,e,t);let a=i[0];return Ie(a)})},e.constrain=function(e,i){return n(e,i,(n,a,o)=>{E(o,3,3,e,i);let s=k(o[1]),c=k(o[2]);if(t(o[0])){let e=[];for(let t of o[0])e.push(r(t,s,c));return e}if(M(o[0])){let e=[];for(let t=0;t<o[0].length();t++)e.push(r(o[0].get(t),s,c));return e}return r(o[0],s,c)})}}function G(e,n){if(n.length===1){if(t(n[0]))return Ze(e,n[0],-1);if(M(n[0]))return Ze(e,n[0].toArray(),-1)}return Ze(e,n,-1)}function It(e,n){e.stdev=function(e,t){return n(e,t,(e,t,n)=>G(`stdev`,n))},e.variance=function(e,t){return n(e,t,(e,t,n)=>G(`variance`,n))},e.average=function(e,t){return n(e,t,(e,t,n)=>G(`mean`,n))},e.mean=function(e,t){return n(e,t,(e,t,n)=>G(`mean`,n))},e.sum=function(e,t){return n(e,t,(e,t,n)=>G(`sum`,n))},e.min=function(e,t){return n(e,t,(e,t,n)=>G(`min`,n))},e.max=function(e,t){return n(e,t,(e,t,n)=>G(`max`,n))},e.distinct=function(e,t){return n(e,t,(e,t,n)=>G(`distinct`,n))},e.count=function(e,r){return n(e,r,(n,i,a)=>{if(E(a,1,1,e,r),a[0]==null)return 0;if(t(a[0])||f(a[0]))return a[0].length;if(M(a[0]))return a[0].length();if(I(a[0]))return a[0].entryCount();throw new b(e,`InvalidParameter`,r)})}}var Lt=e=>(t,n,r=14)=>+e(t,n).toFixed(r),Rt=(e,t)=>e+t,zt=(e,t)=>e*t,Bt=(e,t)=>e/t,Vt=(e,t,n)=>Lt(Rt)(e,t,n),K=(e,t,n)=>Lt(zt)(e,t,n),Ht=(e,t,n)=>Lt(Bt)(e,t,n),Ut=360,Wt=400,Gt=2*Math.PI,q=3600,Kt=3240,qt=60,J=60,Jt=180*q/Math.PI,Yt=Ut*qt*J,Xt=90*q,Y=180*q,Zt=270*q,Qt=`ᵍ`,$t=`°`;function en(e){if(!1===f(e))throw new b(null,`InvalidParameter`,null);return e}function tn(e,t){let n=10**t;return Math.round(e*n)/n}function nn(e,t){return e%t}function rn(e){let t=parseFloat(e.toString().replace(Math.trunc(e).toString(),`0`))*Math.sign(e);return e<0?{fraction:t,integer:Math.ceil(e)}:{fraction:t,integer:Math.floor(e)}}function an(e,t){switch(e){case 0:return t===`SHORT`?`N`:`North`;case 1:return t===`SHORT`?`E`:`East`;case 2:return t===`SHORT`?`S`:`South`;case 3:return t===`SHORT`?`W`:`West`}}function on(e,t){return e-Math.floor(e/t)*t}function sn(e){switch(e){case 6:case 1:return Ut;case 4:return Gt;case 5:return Wt;case 2:return Yt;case 7:return qt;case 8:return J;default:throw new b(null,`LogicError`,null,{reason:`unsupported evaluations`})}}var cn=new de([],[[`NORTH`,1],[`NORTH AZIMUTH`,1],[`POLAR`,2],[`QUADRANT`,3],[`SOUTH`,4],[`SOUTH AZIMUTH`,4]]);function ln(e){let t=cn.lookup(e);if(t==null)throw new b(null,`LogicError`,null,{reason:`unsupported directionType`});return t}var un=new de([],[[`D`,1],[`DD`,1],[`DECIMAL DEGREE`,1],[`DEGREE`,1],[`DECIMAL DEGREES`,1],[`DEGREES`,1],[`DMS`,3],[`DEGREES MINUTES SECONDS`,3],[`R`,4],[`RAD`,4],[`RADS`,4],[`RADIAN`,4],[`RADIANS`,4],[`G`,5],[`GON`,5],[`GONS`,5],[`GRAD`,5],[`GRADS`,5],[`GRADIAN`,5],[`GRADIANS`,5]]);function dn(e){let t=un.lookup(e);if(t==null)throw new b(null,`LogicError`,null,{reason:`unsupported units`});return t}var fn=class e{constructor(e,t,n){this.m_degrees=e,this.m_minutes=t,this.m_seconds=n}getField(e){switch(e){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}}static secondsToDMS(t){let n=rn(t).fraction,r=rn(t).integer,i=Math.floor(r/q);r-=i*q;let a=Math.floor(r/J);return r-=a*J,new e(i,a,r+n)}static numberToDms(t){let n=rn(t).fraction,r=rn(t).integer,i=K(rn(100*n).fraction,100),a=rn(100*n).integer;return new e(r,a,i)}format(t,n){let r=tn(this.m_seconds,n),i=this.m_minutes,a=this.m_degrees;if(t===2||t===8)J<=r&&(r-=J,++i),qt<=i&&(i=0,++a),Ut<=a&&(a=0);else if(t===7)r=0,i=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,a=this.m_degrees,qt<=i&&(i=0,++a),Ut<=a&&(a=0);else if(t===1||t===6){let e=Ht(this.m_seconds,q),t=Ht(this.m_minutes,qt);a=Math.round(this.m_degrees+t+e),i=0,r=0}return new e(a,i,r)}static dmsToSeconds(e,t,n){return e*q+t*J+n}},pn=class{constructor(e,t,n){this.meridian=e,this.angle=t,this.direction=n}fetchAzimuth(e){return e===0?this.meridian:this.direction}},X=class e{constructor(e){this._angle=e}static createFromAngleAndDirection(t,n){return new e(new Z(e._convertDirectionFormat(t.extractAngularUnits(2),n,1)))}getAngle(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:case 4:case 2:return new Z(e._convertDirectionFormat(n,1,t));case 3:{let t=e.secondsNorthAzimuthToQuadrant(n);return new Z(t.angle)}}}getMeridian(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return e.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return e.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(e){let t=e<=Xt||e>=Zt?0:2,n=t===0?Math.min(Yt-e,e):Math.abs(e-Y);return new pn(t,n,e>Y?3:1)}static createFromAngleMeridianAndDirection(t,n,r){return new e(new Z(e.secondsQuadrantToNorthAzimuth(t.extractAngularUnits(2),n,r)))}static secondsQuadrantToNorthAzimuth(e,t,n){return t===0?n===1?e:Yt-e:n===1?Y-e:Y+e}static _convertDirectionFormat(e,t,n){let r=0;switch(t){case 1:r=e;break;case 2:r=Xt-e;break;case 3:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:r=e+Y}let i=0;switch(n){case 1:i=r;break;case 2:i=Xt-r;break;case 3:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:i=r-Y}return i=nn(i,Yt),i<0?Yt+i:i}};function mn(e,t,n){let r=null;switch(t){case 1:r=K(e,q);break;case 2:r=e;break;case 5:r=K(e,Kt);break;case 4:r=K(e,Jt);break;default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}switch(n){case 1:return Ht(r,q);case 2:return r;case 5:return Ht(r,Kt);case 4:return r/Jt;default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}}var Z=class e{constructor(e){this._seconds=e}static createFromAngleAndUnits(t,n){return new e(mn(t,n,2))}extractAngularUnits(e){return mn(this._seconds,2,hn(e))}static createFromDegreesMinutesSeconds(t,n,r){return new e(Vt(Vt(K(t,q),K(n,J)),r))}};function hn(e){switch(oe(e),e){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}var gn=class e{constructor(e,t,n,r){this.view=e,this.angle=t,this.merdian=n,this.direction=r,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(t,n,r){return new e(t,n.getAngle(r),n.getMeridian(r),n.getDirection(r))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let e=null,t=6,n=0;for(let r=0;r<this.view.length;r++){let i=this.view[r];switch(i){case`m`:e=On(this.view,r,i),t=t===6?7:t,r=e.newpos;continue;case`s`:e=On(this.view,r,i),t=8,n=n<e.rounding?e.rounding:n,r=e.newpos;continue;default:continue}}this._dms=fn.secondsToDMS(this.angle.extractAngularUnits(2)),this._formattedDms=fn.secondsToDMS(this.angle.extractAngularUnits(2)).format(t,n)}};function _n(e,t,n,r,i){let a=null;switch(t){case 1:case 4:case 5:return a=on(tn(e.extractAngularUnits(t),r),sn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 6:case 7:return a=on(i.fetchFormattedDms().getField(t),sn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 8:return a=on(tn(i.fetchDms().getField(t),r),sn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}}function vn(e,t,n){if(n===3)throw new b(null,`LogicError`,null,{reason:`conversion error`});if(t===3){let t=fn.numberToDms(e);return X.createFromAngleAndDirection(Z.createFromDegreesMinutesSeconds(t.m_degrees,t.m_minutes,t.m_seconds),n)}return X.createFromAngleAndDirection(Z.createFromAngleAndUnits(e,hn(t)),n)}function yn(e){switch(k(e)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function bn(e){switch(e.toUpperCase().trim()){case`N`:case`NORTH`:return 0;case`E`:case`EAST`:return 1;case`S`:case`SOUTH`:return 2;case`W`:case`WEST`:return 3}return null}function xn(e){let t=parseFloat(e);if(s(t)){if(isNaN(t))throw new b(null,`LogicError`,null,{reason:`invalid conversion`});return t}throw new b(null,`LogicError`,null,{reason:`invalid conversion`})}function Sn(e,t,n){let r=n===3,i=null,a=null,o=0,s=0,c=0;if(r){if(e.length<2)throw new b(null,`LogicError`,null,{reason:`conversion error`});c=1;let t=yn(C(e[e.length-1]));if(t?(i=t.first,a=t.second):(o=1,i=bn(C(e[0])),a=bn(C(e[e.length-1]))),i===null||a===null)throw new b(null,`LogicError`,null,{reason:`invalid conversion`})}switch(t){case 1:case 4:case 5:if(e.length===0)throw new b(null,`LogicError`,null,{reason:`invalid conversion`});return r?X.createFromAngleMeridianAndDirection(Z.createFromAngleAndUnits(xn(e[o]),hn(t)),i,a):X.createFromAngleAndDirection(Z.createFromAngleAndUnits(xn(e[o]),hn(t)),n);case 3:if(s=e.length-c-o,s===3){let t=Z.createFromDegreesMinutesSeconds(xn(e[o]),xn(e[o+1]),xn(e[o+2]));return r?X.createFromAngleMeridianAndDirection(t,i,a):X.createFromAngleAndDirection(t,n)}if(s===1){let t=xn(e[o]),s=fn.numberToDms(t),c=Z.createFromDegreesMinutesSeconds(s.m_degrees,s.m_minutes,s.m_seconds);return r?X.createFromAngleMeridianAndDirection(c,i,a):X.createFromAngleAndDirection(c,n)}}throw new b(null,`LogicError`,null,{reason:`invalid conversion`})}function Cn(e){let t=new Set([` `,`-`,`/`,`'`,`"`,`\\`,`^`,$t,Qt,`	`,`\r`,`
`,`*`]),n=``;for(let r=0;r<e.length;r++){let i=e.charAt(r);t.has(i)?n+=`RRSPLITRRSPLITRR`:n+=i}return n.split(`RRSPLITRRSPLITRR`).filter(e=>e!==``)}function wn(e,n,r){if(s(e))return vn(k(e),n,r);if(f(e))return Sn(Cn(e),n,r);if(t(e))return Sn(e,n,r);if(M(e))return Sn(e.toArray(),n,r);throw new b(null,`LogicError`,null,{reason:`conversion error`})}function Tn(e,t,n){let r=hn(n);if(r&&n!==3)return e.getAngle(t).extractAngularUnits(r);throw new b(null,`LogicError`,null,{reason:`conversion error`})}function En(e,t,n){let r=e.getAngle(t);if(t===3&&n===3){let n=fn.secondsToDMS(r.extractAngularUnits(2));return[an(e.getMeridian(t),`SHORT`),n.m_degrees,n.m_minutes,n.m_seconds,an(e.getDirection(t),`SHORT`)]}if(n===3){let e=fn.secondsToDMS(r.extractAngularUnits(2));return[e.m_degrees,e.m_minutes,e.m_seconds]}return t===3?[an(e.getMeridian(t),`SHORT`),r.extractAngularUnits(n),an(e.getDirection(t),`SHORT`)]:[r.extractAngularUnits(n)]}function Dn(e,t){let n=``;switch(e){case 1:n=t===3?`DD.DD`+$t:`DDD.DD`+$t;break;case 3:n=t===3?`dd`+$t+` mm' ss"`:`ddd`+$t+` mm' ss.ss"`;break;case 4:n=`R.RR`;break;case 5:n=`GGG.GG`+Qt;break;default:throw new b(null,`LogicError`,null,{reason:`conversion error`})}return t===3&&(n=`p `+n+` b`),n}function On(e,t,n){let r={padding:0,rounding:0,newpos:t},i=!1;for(;t<e.length;){let a=e[t];if(a===n)i?r.rounding++:r.padding++,t++;else{if(a!==`.`)break;i=!0,t++}}return r.newpos=t-1,r}function kn(e,t,n){let r={escaped:``,newpos:t};for(t++;t<e.length;){let n=e[t];if(t++,n===`]`)break;r.escaped+=n}return r.newpos=t-1,r}function An(e,t,n){let r=``,i=null,a=null,o=gn.createFromStringAndBearing(t,e,n),s={D:1,d:6,m:7,s:8,R:4,G:5};for(let c=0;c<t.length;c++){let l=t[c];switch(l){case`[`:i=kn(t,c),r+=i.escaped,c=i.newpos;continue;case`D`:case`d`:case`m`:case`s`:case`R`:case`G`:i=On(t,c,l),a=e.getAngle(n),r+=_n(a,s[l],i.padding,i.rounding,o),c=i.newpos;continue;case`P`:case`p`:r+=an(o.fetchMeridian(),l===`p`?`SHORT`:`LONG`);continue;case`B`:case`b`:r+=an(o.fetchDirection(),l===`b`?`SHORT`:`LONG`);continue;default:r+=l}}return r}var jn=new de([`TEXT`,`VALUE`]);function Mn(e,t,n){if(!(t instanceof P))throw new b(null,`InvalidParameter`,null);if(!1===t.hasField(`directionType`))throw new b(null,`LogicError`,null,{reason:`missing directionType`});if(!1===t.hasField(`angleType`))throw new b(null,`LogicError`,null,{reason:`missing angleType`});let r=ln(en(t.field(`directiontype`))),i=wn(e,dn(en(t.field(`angletype`))),r);if(!(n instanceof P))throw new b(null,`InvalidParameter`,null);if(!1===n.hasField(`directionType`))throw new b(null,`LogicError`,null,{reason:`missing directionType`});if(!1===n.hasField(`outputType`))throw new b(null,`LogicError`,null,{reason:`missing angleType`});let a=ln(en(n.field(`directiontype`))),o=n.hasField(`angleType`)?dn(en(n.field(`angletype`))):null,s=jn.get(en(n.field(`outputType`)));if(!a||!s)throw new b(null,`LogicError`,null,{reason:`conversion error`});if(!(o||s===`TEXT`&&n.hasField(`format`)))throw new b(null,`LogicError`,null,{reason:`invalid unit`});switch(s){case`VALUE`:return a===3||o===3?En(i,a,o):Tn(i,a,o);case`TEXT`:{let e=``;return n.hasField(`format`)&&(e=C(n.field(`format`))),e!==null&&e!==``||(e=Dn(o,a)),An(i,e,a)}default:throw new b(null,`InvalidParameter`,null)}}var Nn=2654435761,Pn=2246822519,Fn=3266489917,In=668265263,Ln=374761393;function Rn(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}var zn=class{constructor(e){this._seed=e,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(e){let t=[];for(let n of e)isNaN(n)?t.push(`NaN`):n===1/0?t.push(`Infinity`):n===-1/0?t.push(`-Infinity`):n===0?t.push(`0`):t.push(n.toString(16));this.update(Rn(t.join(``)))}updateIntArray(e){let t=Int32Array.from(e);this.update(new Uint8Array(t.buffer))}updateUint8Array(e){this.update(Uint8Array.from(e))}updateWithString(e){return this.update(Rn(e))}update(e){return this._bufs.push(e),this._totallen+=e.length,this}digest(){let e=new Uint8Array(this._totallen),t=0;for(let n of this._bufs)e.set(n,t),t+=n.length;return this.init(),this._xxHash32(e,this._seed)}_xxHash32(e,t=0){let n=e,r=t+Ln&4294967295,i=0;if(n.length>=16){let n=[t+Nn+Pn&4294967295,t+Pn&4294967295,t+0&4294967295,t-Nn&4294967295],a=e,o=a.length-16,s=0;for(i=0;(4294967280&i)<=o;i+=4){let e=i,t=a[e]+(a[e+1]<<8),r=a[e+2]+(a[e+3]<<8),o=t*Pn+(r*Pn<<16),c=n[s]+o&4294967295;c=c<<13|c>>>19;let l=65535&c,u=c>>>16;n[s]=l*Nn+(u*Nn<<16)&4294967295,s=s+1&3}r=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}r=r+e.length&4294967295;let a=e.length-4;for(;i<=a;i+=4){let e=i,t=n[e]+(n[e+1]<<8),a=n[e+2]+(n[e+3]<<8);r=r+(t*Fn+(a*Fn<<16))&4294967295,r=r<<17|r>>>15,r=(65535&r)*In+((r>>>16)*In<<16)&4294967295}for(;i<n.length;++i)r+=n[i]*Ln,r=r<<11|r>>>21,r=(65535&r)*Nn+((r>>>16)*Nn<<16)&4294967295;return r^=r>>>15,r=((65535&r)*Pn&4294967295)+((r>>>16)*Pn<<16),r^=r>>>13,r=((65535&r)*Fn&4294967295)+((r>>>16)*Fn<<16),r^=r>>>16,r<0?r+4294967296:r}};function Bn(e){return e.loadStatus===`loaded`&&e.user?.sourceJSON?e.user.sourceJSON:null}function Vn(e,t){return!!e&&ie(e,t?.restUrl||``)}function Hn(e,t){if(!e||!t)return e===t;if(e.x===t.x&&e.y===t.y){if(e.hasZ){if(e.z!==t.z)return!1}else if(t.hasZ)return!1;if(e.hasM){if(e.m!==t.m)return!1}else if(t.hasM)return!1;return!0}return!1}function Q(e,n,r){if(e!==null)if(t(e)){if(n.updateUint8Array([61]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e)Q(t,n,r);r.map.delete(e),r.currentLength--}n.updateUint8Array([199])}else if(M(e)){if(n.updateUint8Array([61]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e.toArray())Q(t,n,r);r.map.delete(e),r.currentLength--}n.updateUint8Array([199])}else{if(D(e))return n.updateIntArray([e.toNumber()]),void n.updateUint8Array([241]);if(O(e))return n.updateIntArray([e.toNumber()]),void n.updateIntArray([257]);if(N(e))return n.updateIntArray([e.toNumber()]),void n.updateIntArray([263]);if(f(e))return n.updateIntArray([e.length]),n.updateWithString(e),void n.updateUint8Array([41]);if(_(e))n.updateUint8Array([!0===e?1:0,113]);else{if(s(e))return n.updateFloatArray([e]),void n.updateUint8Array([173]);if(e instanceof $e||e instanceof Qe)throw new b(r.context,`UnsupportedHashType`,r.node);if(!(e instanceof P)){if(j(e))throw new b(r.context,`UnsupportedHashType`,r.node);if(e instanceof g)return n.updateIntArray([3833836621]),n.updateIntArray([0]),n.updateFloatArray([e.x]),n.updateIntArray([1]),n.updateFloatArray([e.y]),e.hasZ&&(n.updateIntArray([2]),n.updateFloatArray([e.z])),e.hasM&&(n.updateIntArray([3]),n.updateFloatArray([e.m])),n.updateIntArray([3765347959]),void Q(e.spatialReference.wkid,n,r);if(e instanceof ae){n.updateIntArray([1266616829]);for(let t=0;t<e.rings.length;t++){let i=e.rings[t],a=[],o=null,s=null;for(let n=0;n<i.length;n++){let r=e.getPoint(t,n);if(n===0)o=r;else if(Hn(s,r))continue;s=r,n===i.length-1&&Hn(o,r)||a.push(r)}n.updateIntArray([1397116793,a.length]);for(let e=0;e<a.length;e++){let t=a[e];n.updateIntArray([3962308117,e]),Q(t,n,r),n.updateIntArray([2716288009])}n.updateIntArray([2278822459])}n.updateIntArray([3878477243]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof o){n.updateIntArray([4106883559]);for(let t=0;t<e.paths.length;t++){let i=e.paths[t];n.updateIntArray([1397116793,i.length]);for(let a=0;a<i.length;a++)n.updateIntArray([3962308117,a]),Q(e.getPoint(t,a),n,r),n.updateIntArray([2716288009]);n.updateIntArray([2278822459])}n.updateIntArray([2568784753]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof ee){n.updateIntArray([588535921,e.points.length]);for(let t=0;t<e.points.length;t++){let i=e.getPoint(t);n.updateIntArray([t]),Q(i,n,r)}n.updateIntArray([1700171621]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof ne)return n.updateIntArray([3483648373]),n.updateIntArray([0]),n.updateFloatArray([e.xmax]),n.updateIntArray([1]),n.updateFloatArray([e.xmin]),n.updateIntArray([2]),n.updateFloatArray([e.ymax]),n.updateIntArray([3]),n.updateFloatArray([e.ymin]),e.hasZ&&(n.updateIntArray([4]),n.updateFloatArray([e.zmax]),n.updateIntArray([5]),n.updateFloatArray([e.zmin])),e.hasM&&(n.updateIntArray([6]),n.updateFloatArray([e.mmax]),n.updateIntArray([7]),n.updateFloatArray([e.mmin])),n.updateIntArray([3622027469]),void Q(e.spatialReference.wkid,n,r);if(e instanceof ue)return n.updateIntArray([14]),e.wkid!==void 0&&e.wkid!==null&&n.updateIntArray([e.wkid]),e.wkt&&n.updateWithString(e.wkt),void(e.wkt2&&n.updateWithString(e.wkt2));throw Ee(e)||Le(e)||xe(e),new b(r.context,`UnsupportedHashType`,r.node)}if(n.updateUint8Array([223]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e.keys())n.updateIntArray([t.length]),n.updateWithString(t),n.updateUint8Array([251]),Q(e.field(t),n,r),n.updateUint8Array([239]);r.map.delete(e),r.currentLength--}n.updateUint8Array([73])}}else n.updateUint8Array([0,139])}function Un(n,r){n.portal=function(e,t){return r(e,t,(n,r,i)=>(E(i,1,1,e,t),new Qe(C(i[0]))))},n.typeof=function(e,t){return r(e,t,(n,r,i)=>{E(i,1,1,e,t);let a=ke(i[0]);if(a===`Unrecognized Type`)throw new b(e,`UnrecognizedType`,t);return a})},n.trim=function(e,t){return r(e,t,(n,r,i)=>(E(i,1,1,e,t),C(i[0]).trim()))},n.tohex=function(e,t){return r(e,t,(n,r,i)=>{E(i,1,1,e,t);let a=k(i[0]);return isNaN(a)?a:a.toString(16)})},n.upper=function(e,t){return r(e,t,(n,r,i)=>(E(i,1,1,e,t),C(i[0]).toUpperCase()))};let i=new de([`every-word`,`first-word`]);n.proper=function(e,t){return r(e,t,(n,r,a)=>{E(a,1,2,e,t);let o=(a.length>=2?i.lookup(C(a[1])):null)??`every-word`,s=/\s/,c=C(a[0]),l=``,u=!0;for(let e=0;e<c.length;e++){let t=c[e];s.test(t)?o===`every-word`&&(u=!0):t.toUpperCase()!==t.toLowerCase()&&(u?(t=t.toUpperCase(),u=!1):t=t.toLowerCase()),l+=t}return l})},n.lower=function(e,t){return r(e,t,(n,r,i)=>(E(i,1,1,e,t),C(i[0]).toLowerCase()))};let o=new de([`digits`,`digits-hyphen`,`digits-hyphen-braces`,`digits-hyphen-parentheses`]);n.guid=function(t,n){return r(t,n,(r,i,a)=>{switch(E(a,0,1,t,n),a.length>0?o.lookup(C(a[0])):null){case`digits`:return e().replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return e();case`digits-hyphen-parentheses`:return`(`+e()+`)`;default:return`{`+e()+`}`}})},n.standardizeguid=function(e,t){return r(e,t,(n,r,i)=>{E(i,2,2,e,t);let a=C(i[0]);if(a===``||a===null)return``;let s=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(a);if(!s)return``;let c=s.groups;switch(a=c.partA+`-`+c.partB+`-`+c.partC+`-`+c.partD+`-`+c.partE,o.lookup(C(i[1]))){case`digits`:return a.replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return a;case`digits-hyphen-parentheses`:return`(`+a+`)`;default:return`{`+a+`}`}})},n.console=function(e,t){return r(e,t,(t,n,r)=>(r.length===0||(r.length===1?e.console(C(r[0])):e.console(C(r))),S))},n.mid=function(e,t){return r(e,t,(n,r,i)=>{E(i,2,3,e,t);let a=k(i[1]);if(isNaN(a))return``;if(a=Math.max(0,a),i.length===2)return C(i[0]).slice(a);let o=k(i[2]);return isNaN(o)?``:(o<0&&(o=0),C(i[0]).slice(a,a+o))})},n.find=function(e,t){return r(e,t,(n,r,i)=>{E(i,2,3,e,t);let a=0;if(i.length>2){if(a=k(A(i[2],0)),isNaN(a))return-1;a<0&&(a=0)}return C(i[1]).indexOf(C(i[0]),a)})},n.left=function(e,t){return r(e,t,(n,r,i)=>{E(i,2,2,e,t);let a=k(i[1]);return isNaN(a)?``:(a<0&&(a=0),C(i[0]).slice(0,a))})},n.right=function(e,t){return r(e,t,(n,r,i)=>{E(i,2,2,e,t);let a=k(i[1]);return isNaN(a)||a<=0?``:C(i[0]).slice(-a)})},n.split=function(e,t){return r(e,t,(n,r,i)=>{let a;E(i,2,4,e,t);let o=k(A(i[2],-1)),s=Ie(A(i[3],!1));if(o===-1||o===null||!0===s?a=C(i[0]).split(C(i[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),a=C(i[0]).split(C(i[1]),o)),!1===s)return a;let c=[];for(let e=0;e<a.length&&!(o!==-1&&c.length>=o);e++)a[e]!==``&&a[e]!==void 0&&c.push(a[e]);return c})},n.text=function(e,t){return r(e,t,(n,r,i)=>(E(i,1,2,e,t),Ce(i[0],i[1])))},n.concatenate=function(e,n){return r(e,n,(e,n,r)=>{let i=[];if(r.length<1)return``;if(t(r[0])){let e=A(r[2],``);for(let t=0;t<r[0].length;t++)i[t]=Ce(r[0][t],e);return r.length>1?i.join(r[1]):i.join(``)}if(M(r[0])){let e=A(r[2],``);for(let t=0;t<r[0].length();t++)i[t]=Ce(r[0].get(t),e);return r.length>1?i.join(r[1]):i.join(``)}for(let e=0;e<r.length;e++)i[e]=Ce(r[e]);return i.join(``)})},n.reverse=function(e,n){return r(e,n,(r,i,a)=>{if(E(a,1,1,e,n),t(a[0])){let e=a[0].slice();return e.reverse(),e}if(M(a[0])){let e=a[0].toArray().slice();return e.reverse(),e}throw new b(e,`InvalidParameter`,n)})},n.replace=function(e,t){return r(e,t,(n,r,i)=>{E(i,3,4,e,t);let a=C(i[0]),o=C(i[1]),s=C(i[2]);return i.length!==4||Ie(i[3])?ve(a,o,s):a.replace(o,s)})},n.urlencode=function(e,t){return r(e,t,(n,r,i)=>{if(E(i,1,1,e,t),i[0]===null)return``;if(i[0]instanceof P){let e=``;for(let t of i[0].keys()){let n=i[0].field(t);e!==``&&(e+=`&`),e+=n===null?encodeURIComponent(t)+`=`:encodeURIComponent(t)+`=`+encodeURIComponent(n)}return e}return encodeURIComponent(C(i[0]))})},n.hash=function(e,t){return r(e,t,(n,r,i)=>{E(i,1,1,e,t);let a=new zn(0);return Q(i[0],a,{context:e,node:t,map:new Map,currentLength:0}),a.digest()})},n.convertdirection=function(e,t){return r(e,t,(n,r,i)=>(E(i,3,3,e,t),Mn(i[0],i[1],i[2])))},n.fromjson=function(e,t){return r(e,t,(n,r,i)=>{if(E(i,1,1,e,t),!1===f(i[0]))throw new b(e,`InvalidParameter`,t);return P.convertJsonToArcade(JSON.parse(C(i[0])),L(e))})},n.tocharcode=function(e,t){return r(e,t,(n,r,i)=>{E(i,1,2,e,t);let a=k(A(i[1],0)),o=C(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new b(e,`OutOfBounds`,t);return o.charCodeAt(a)})},n.tocodepoint=function(e,t){return r(e,t,(n,r,i)=>{E(i,1,2,e,t);let a=k(A(i[1],0)),o=C(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new b(e,`OutOfBounds`,t);return o.codePointAt(a)})},n.fromcharcode=function(e,t){return r(e,t,(n,r,i)=>{if(i.length<1)throw new b(e,`WrongNumberOfParameters`,t);let a=i.map(e=>Math.trunc(k(e))).filter(e=>e>=0&&e<=65535);return a.length===0?null:String.fromCharCode.apply(null,a)})},n.fromcodepoint=function(e,t){return r(e,t,(n,r,i)=>{if(i.length<1)throw new b(e,`WrongNumberOfParameters`,t);let a;try{a=i.map(e=>Math.trunc(k(e))).filter(e=>e<=1114111&&e>>>0===e)}catch{return null}return a.length===0?null:String.fromCodePoint.apply(null,a)})},n.getuser=function(e,t){return r(e,t,(n,r,i)=>{E(i,0,2,e,t);let o=A(i[1],``);if(o=!0===o||!1===o?``:C(o),o!==null&&o!==``)return null;if(i.length===0||i[0]instanceof Qe){let t=null;if(t=e.services?.portal?e.services.portal:a.getDefault(),i.length>0&&!Vn(i[0].field(`url`),t)||!t)return null;if(o===``){let n=Bn(t);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return P.convertObjectToArcadeDictionary(t,L(e))}}return null}throw new b(e,`InvalidParameter`,t)})},n.getenvironment=function(e,t){return r(e,t,(n,r,i)=>(E(i,0,0,e,t),P.convertObjectToArcadeDictionary(ge(L(e),e.spatialReference),L(e),!0)))},n.standardizefilename=function(e,t){return r(e,t,(e,t,n)=>{E(n,1,1,e,t);let[r]=n;if(r==null)return``;if(!f(r))throw new b(e,`InvalidParameter`,t);return r.replaceAll(/[<>"?*]/g,`_`).replaceAll(/[/\\|]/g,`-`).replaceAll(`:`,`, `)})}}var Wn;async function Gn(){Wn??(Wn=await n(()=>import(`./geodeticDistanceOperator-DPhIIsKi.js`),__vite__mapDeps([0,1,2,3])),await Wn.load())}function $(e){let t=e.track;if(t==null)throw new b(e,`InvalidParameter`,null);return t}function Kn(e,t,n,r){let i=Math.max(0,qn(e,t)),a=Math.max(0,qn(e,n));return e.observations.slice(i,a).map((e,t)=>r(e,t+i))}function qn(e,t){return e.currentObservationIndex+t}function Jn(e,t){let n=qn(e,t);if(n<0||n>=e.observations.length)throw new b(null,`InvalidParameter`,null);return n}function Yn(e,t){let{stats:n}=e.observations[t];if(n.totalDistance!=null)return n.totalDistance;if(t===0)return n.totalDistance=0;let r,i=0;for(r=t-1;r>0;r--){let t=e.observations[r].stats;if(t.totalDistance!=null){i=t.totalDistance;break}}for(let n=r+1;n<=t;n++){let t=e.observations[n];i+=Xn(e,n),t.stats.totalDistance=i}return i}function Xn(e,t){let n=e.observations[t],r=n.stats;if(r.distance!=null)return r.distance;if(t===0)return r.distance=0;let i=e.observations[t-1];return r.distance=Wn.execute(i.feature.geometry(),n.feature.geometry())}function Zn(e,t){let n=e.observations[t],r=n.stats;if(r.speed!=null)return r.speed;if(t===0)return r.speed=0;let i=e.observations[t-1],a=n.endTime-i.startTime;return a<=0?r.speed=0:r.speed=Xn(e,t)/(a/1e3)}function Qn(e,t){let n=e.observations[t],r=n.stats;if(r.acceleration!=null)return r.acceleration;if(t===0)return r.acceleration=0;let i=e.observations[t-1],a=n.endTime-i.startTime;if(a<=0)return r.acceleration=0;let o=Zn(e,t),s=Zn(e,t-1);return r.acceleration=(o-s)/(a/1e3)}function $n(e,t){e[x(`TrackIndex`)]=function(e,n){return t(e,n,(e,t,n)=>(E(n,0,0,e,t),$(e).currentObservationIndex))},e[x(`TrackWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]);return Kn($(e),r,i,e=>e.feature)})},e[x(`TrackFieldWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,3,3,e,t);let r=C(n[0]),i=k(n[1]),a=k(n[2]);return Kn($(e),i,a,e=>e.feature.field(r))})},e[x(`TrackGeometryWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]);return Kn($(e),r,i,e=>e.feature.geometry())})},e[x(`TrackStartTime`)]=function(e,n){return t(e,n,(e,t,n)=>(E(n,0,0,e,t),v.epochToArcadeDate($(e).observations[0].startTime,e.timeZone??`system`)))},e[x(`TrackCurrentTime`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return v.epochToArcadeDate(r.observations[r.currentObservationIndex].startTime,e.timeZone??`system`)})},e[x(`TrackDuration`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return r.observations[r.currentObservationIndex].startTime-r.observations[0].startTime})},e[x(`TrackCurrentDistance`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return Yn(r,r.currentObservationIndex)})},e[x(`TrackDistanceAt`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let r=k(n[0]),i=$(e);return Yn(i,Jn(i,r))})},e[x(`TrackDistanceWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]),a=$(e);return Kn(a,r,i,(e,t)=>Yn(a,t))})},e[x(`TrackCurrentSpeed`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return Zn(r,r.currentObservationIndex)})},e[x(`TrackSpeedAt`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let r=k(n[0]),i=$(e);return Zn(i,Jn(i,r))})},e[x(`TrackSpeedWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]),a=$(e);return Kn(a,r,i,(e,t)=>Zn(a,t))})},e[x(`TrackCurrentAcceleration`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return Qn(r,r.currentObservationIndex)})},e[x(`TrackAccelerationAt`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let r=k(n[0]),i=$(e);return Qn(i,Jn(i,r))})},e[x(`TrackAccelerationWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]),a=$(e);return Kn(a,r,i,(e,t)=>Qn(a,t))})}}export{ht as _,Ft as a,nt as b,kt as c,_t as d,gt as f,mt as g,dt as h,It as i,xt as l,pt as m,Gn as n,Pt as o,yt as p,Un as r,Nt as s,$n as t,vt as u,rt as v,et as x,it as y};