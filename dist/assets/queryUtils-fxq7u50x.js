const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodesicBufferOperator-V1wiqwL-.js","assets/index-CzMixifc.js","assets/index-CDgdHpAj.css","assets/SimpleGeometryCursor-BbFgAuic.js","assets/operatorGeodesicBuffer-D_F4lCeR.js","assets/geodeticCurveType-B3tSXlNQ.js"])))=>i.map(i=>d[i]);
import{$v as e,Ag as t,BS as n,BT as r,Cv as i,JE as a,Lg as o,Lw as s,Og as c,PT as l,Sv as u,Xx as d,_S as f,du as p,gx as m,hx as h,lS as g,mS as _,vv as v,vx as y,wS as b,yS as x,yv as S}from"./index-CzMixifc.js";var C=[0,0];function w(e,t){if(!t)return null;if(`x`in t){let n={x:0,y:0};return[n.x,n.y]=e(t.x,t.y,C),t.z!=null&&(n.z=t.z),t.m!=null&&(n.m=t.m),n}if(`xmin`in t){let n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=e(t.xmin,t.ymin,C),[n.xmax,n.ymax]=e(t.xmax,t.ymax,C),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return`rings`in t?{rings:T(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:`paths`in t?{paths:T(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:`points`in t?{points:E(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function T(e,t){let n=[];for(let r of e)n.push(E(r,t));return n}function E(e,t){let n=[];for(let r of e){let e=t(r[0],r[1],[0,0]);n.push(e),r.length>2&&e.push(r[2]),r.length>3&&e.push(r[3])}return n}async function D(e,n){if(!e||!n)return;let r=Array.isArray(e)?e.map(e=>e.geometry==null?null:e.geometry.spatialReference).filter(a):[e];await t(r.map(e=>({source:e,dest:n})))}var O=w.bind(null,y),k=w.bind(null,m);function A(e,t,n,r){if(!e)return null;if(n||(n=t,t=e.spatialReference),!x(t)||!x(n)||f(t,n))return e;if(h(t,n)){let t=b(n)?O(e):k(e);return t.spatialReference=n,t}return o([e],t,n,r)[0]}var j=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,n,r){if(!e?.length||!t||!n||f(t,n))return e;let i={geometries:e,inSpatialReference:t,outSpatialReference:n,options:r,resolve:s()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;let e=(this._jobs.shift());if(!e)return;let{geometries:t,inSpatialReference:n,outSpatialReference:r,resolve:i,options:a}=e;h(n,r)&&a?.extendedParams==null?b(r)?i(t.map(O)):i(t.map(k)):i(o(t,n,r,a)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function M(e,t,n,r){return j.push(e,t,n,r)}var N=new l({esriSRUnit_Meter:`meters`,esriSRUnit_Kilometer:`kilometers`,esriSRUnit_Foot:`feet`,esriSRUnit_StatuteMile:`miles`,esriSRUnit_NauticalMile:`nautical-miles`,esriSRUnit_USNauticalMile:`us-nautical-miles`}),P=Object.freeze({}),F=`frequency`;async function I(e,t,n){let r=e.bin;return r.onField&&=r.onField.trim(),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),`normalizationField`in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),e.outStatistics?.length||(e.outStatistics=[{statisticType:`count`,onStatisticField:`1`,outStatisticFieldName:F}]),L(e,t,n)}async function L(e,t,n){let{outFields:r,orderByFields:i,groupByFieldsForStatistics:a,outStatistics:o}=e;if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(i)for(let e=0;e<i.length;e++)i[e]=i[e].trim();if(a)for(let e=0;e<a.length;e++)a[e]=a[e].trim();if(o)for(let e=0;e<o.length;e++)o[e].onStatisticField&&(o[e].onStatisticField=o[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),R(e,t,n)}async function R(t,n,r){if(!t)return null;let{where:i}=t;if(t.where=i=i?.trim(),(!i||/^1 *= *1$/.test(i)||n&&n===i)&&(t.where=null),!t.geometry)return t;let a=await V(t);if(t.distance=0,t.units=null,t.spatialRel===`esriSpatialRelEnvelopeIntersects`){let{spatialReference:n}=t.geometry;a=e(a),a.spatialReference=n}if(a){await D(a.spatialReference,r),a=B(a,r);let e=(await p(v(a)))[0];if(e==null)throw P;let n=`quantizationParameters`in t&&t.quantizationParameters?.tolerance||`maxAllowableOffset`in t&&t.maxAllowableOffset||0,i=n&&z(a,r)?{extendedParams:{densificationStep:8*n}}:void 0,o=e.toJSON(),s=A(o,o.spatialReference,r,i);if(!s)throw P;s.spatialReference=r,t.geometry=s}return t}function z(e,t){if(!e)return!1;let n=e.spatialReference;return(u(e)||i(e)||S(e))&&!f(n,t)&&!c(n,t)}function B(e,t){let n=e.spatialReference;return z(e,t)&&u(e)?{spatialReference:n,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function V(e){let{distance:t,units:a}=e,o=e.geometry;if(t==null||`vertexAttributes`in o)return o;let s=o.spatialReference,c=a?N.fromJSON(a):d(s),l=s&&(g(s)||b(s))?o:await D(s,_).then(()=>A(o,_)),u=await n(()=>import(`./geodesicBufferOperator-V1wiqwL-.js`),__vite__mapDeps([0,1,2,3,4,5]));await u.load();let f=u.execute(l,t||1,{unit:c})??void 0;if(!f||!i(f)||f.rings.length===0)throw new r(`unsupported-query:invalid-parameters`,`Invalid parameters for query by distance`);return f}function H(e,t){return e==null?null:typeof e==`string`?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}export{R as a,D as c,L as i,A as l,N as n,I as o,H as r,M as s,P as t};