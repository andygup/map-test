import{Bx as e,Hm as t,Ml as n,Ol as r,Rm as i,Ux as a,ZC as o,c_ as s,rS as c,tx as l}from"./index-CZ4oMP1N.js";import{M as u,a as d}from"./plane-Bg1a5O73.js";import{t as f}from"./vectorStacks-FfDNcZoS.js";import{n as p}from"./projectPointToVector-HYpbaZqA.js";import{t as m}from"./spatialReferenceEllipsoidUtils-B0E4spY0.js";import{t as h}from"./projectVectorToVector-DX3Yd1qf.js";import{r as g,t as _}from"./sphere-9YfqUkuX.js";import{o as v,r as y}from"./boundedPlane-C8nQBQLB.js";import{u as b}from"./graphicUtils-BW24Jhcf.js";function x(e,t,n){return!!h(e,t,S,n.spatialReference)&&(n.x=S[0],n.y=S[1],n.z=S[2],!0)}var S=s();function C(e){let{value:t,operations:n}=e;return{operations:n,value:n.create(t)}}function w(e,t,n){return e.operations.setExtent(e.value,t,n.value),n}function T(e,t){return e.operations.getExtent(e.value,t),t}function E(e){return{operations:e,value:e.create()}}function D(e,t,n=E(e)){return n.operations=e,e.copy(t,n.value),n}function O(e){return D(_,new g(0,0,0,c(e).radius))}var k=2**50;function A(){return D(v,y([0,0,0],[k,0,0],[0,k,0]))}function j(e,t,n){return e.operations.axisAt(e.value,t,2,n)}function M(e,t,n,r){return e.operations.axisAt(e.value,t,n,r)}function N(e,t,n){return e.operations.intersectRay(e.value,t,n)}function P(e,t,n){return e.operations.intersectRayClosestSilhouette(e.value,t,n)}function F(e,t){return e.operations.altitudeAt(e.value,t)}function I(e,t,n,r){return e.operations.setAltitudeAt(e.value,t,n,r)}function L(e,t,n,a){return t!==a&&i(a,t),r(z,a[12],a[13],a[14]),I(e,z,n,z),a[12]=z[0],a[13]=z[1],a[14]=z[2],a}function R(e,t,n){return e.operations.elevate(e.value,t,n.value)}var z=s();s();var B=class r{constructor(e,t,n,r){this.viewingMode=e,this.spatialReference=t,this.unitInMeters=n,this._coordinateSystem=r,this._tmpCoordinateSystem=C(r),this.referenceEllipsoid=c(t),this.sphericalPCPF=m(t)}set extent(e){e&&w(this._coordinateSystem,e,this._coordinateSystem)}get extent(){return T(this._coordinateSystem,l())}getAltitude(e){return F(this._coordinateSystem,e)}setAltitude(e,t,n=e){return I(this._coordinateSystem,n,t,e)}setAltitudeOfTransformation(e,t){L(this._coordinateSystem,t,e,t)}worldUpAtPosition(e,t){return j(this._coordinateSystem,e,t)}worldBasisAtPosition(e,t,n){return M(this._coordinateSystem,e,t,n)}basisMatrixAtPosition(e,n){let r=this.worldBasisAtPosition(e,0,f.get()),i=this.worldBasisAtPosition(e,1,f.get()),a=this.worldBasisAtPosition(e,2,f.get());return t(n,r[0],r[1],r[2],0,i[0],i[1],i[2],0,a[0],a[1],a[2],0,0,0,0,1),n}headingAtPosition(e,t){let n=this.worldUpAtPosition(e,f.get()),r=this.worldBasisAtPosition(e,1,f.get()),i=u(t,r,n);return o(i)}intersectManifoldClosestSilhouette(e,t,n){return R(this._coordinateSystem,t,this._tmpCoordinateSystem),P(this._tmpCoordinateSystem,e,n),n}intersectManifold(e,t,r){R(this._coordinateSystem,t,this._tmpCoordinateSystem);let i=f.get();return N(this._tmpCoordinateSystem,e,i)?n(r,i):null}intersectInfiniteManifold(e,t,r){if(this.viewingMode===1)return this.intersectManifold(e,t,r);R(this._coordinateSystem,t,this._tmpCoordinateSystem);let i=this._tmpCoordinateSystem.value,a=f.get();return d(i.plane,e,a)?n(r,a):null}toRenderCoords(e,t,n){return b(e)?p(e,t,this.spatialReference):h(e,t,n,this.spatialReference)}fromRenderCoords(e,t,n=null){return b(t)?(n!=null&&(t.spatialReference=n),x(e,this.spatialReference,t)?t:null):h(e,this.spatialReference,t,n)?t:null}static create(t,n){switch(t){case 2:return new r(2,n,e(n),A());case 1:return new r(1,n,1,O(n))}}static renderUnitScaleFactor(e,t){return a(e)/a(t)}};export{B as t};