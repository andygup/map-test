const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QueueProcessor-CGSfBCCB.js","assets/QueueProcessor-BtMHt_WC.js","assets/CSVSourceWorker-CcH5KURs.js","assets/date-4JksS9rw.js","assets/PooledRBush-kIuSXR8J.js","assets/memoryEstimations-DQOvnrRz.js","assets/number-bp6QQFrm.js","assets/WhereClause-CO9FHcAq.js","assets/WhereClauseCache-Hc_hnaJ1.js","assets/timeSupport-DTr00ezP.js","assets/queryUtils-DcyDFw5_.js","assets/featureConversionUtils-_DSSMFQ2.js","assets/OptimizedFeatureSet-CTIqq8fn.js","assets/OptimizedGeometry-hOUTi-cB.js","assets/quantizationUtils-CGy9nkLl.js","assets/QueryEngine-BmSuo7NQ.js","assets/QueryEngineCapabilities-BJYIHckU.js","assets/SnappingCandidate-CSwuQTV6.js","assets/FixedIntervalBinParameters-Dvwocz3j.js","assets/utils-DfE5TL5h.js","assets/utils-DhzlDVJ-.js","assets/utils-DD8h9sO0.js","assets/generateRendererUtils-3fX8Itfa.js","assets/BoundsStore-Cb3Fp4W3.js","assets/FeatureStore-BI832uP0.js","assets/optimizedFeatureQueryEngineAdapter-DdSTa-WE.js","assets/clientSideDefaults-hJqezokg.js","assets/locationUtils-DHi0m037.js","assets/EdgeProcessingWorker-CdpIyPql.js","assets/FloatArray-DqATud34.js","assets/BufferView-D7rgY_ku.js","assets/Util-BF0TzZHY.js","assets/types-D4cna6kF.js","assets/VertexAttributeLocations-CfzeuYMz.js","assets/VertexElementDescriptor-ju-1bdWe.js","assets/Indices-BME9aaDP.js","assets/Normals-C9pyKGRR.js","assets/deduplicate-DAw_n_cX.js","assets/workerHelper-AF0fpvcj.js","assets/edgeProcessing-BPDjfOXP.js","assets/TextureBackedBufferLayout-CRYrdH8z.js","assets/ElevationSamplerWorker-WI0veopf.js","assets/vec3-DSOiDp9-.js","assets/vec4-utmnCg3f.js","assets/computeTranslationToOriginAndRotation-Cm78hfIp.js","assets/projectPointToVector-HYpbaZqA.js","assets/spatialReferenceEllipsoidUtils-B0E4spY0.js","assets/MeshLocalVertexSpace-OEvelzSD.js","assets/vertexSpaceConversion-Ca0tjp55.js","assets/meshVertexSpaceUtils-CsTvVRUI.js","assets/Feature3DPipelineWorker-C_6d69ar.js","assets/DefaultMaterial.glsl-B_7BDQY3.js","assets/Transform.glsl-LjRXb9GP.js","assets/Float2BindUniform-C046qJa3.js","assets/Uniform-D2x0fAcR.js","assets/FloatBindUniform-DmTbQwNg.js","assets/glsl-CQsgM67j.js","assets/NoParameters-D8vOu4I5.js","assets/ReadShadowMap.glsl-Dwb5mPt6.js","assets/Emissions.glsl-D75sJPX5.js","assets/Float3DrawUniform-CdNiRdHS.js","assets/Float3PassUniform-tY0I44AO.js","assets/FloatPassUniform-DkGcNskm.js","assets/Texture2DDrawUniform-_ATT3Du-.js","assets/Texture2DPassUniform-DbQ0ICoe.js","assets/AlphaCutoff-BxDXdpVQ.js","assets/HighlightReadBitmap.glsl-cy3SD0WQ.js","assets/Texture2DBindUniform-DU-6Ejb6.js","assets/PiUtils.glsl-BTnoJadg.js","assets/Float3BindUniform-CTBiVhme.js","assets/Float4BindUniform-DsRDgU9t.js","assets/MixExternalColor.glsl-G62irSUg.js","assets/Slice.glsl-B4UNza77.js","assets/VisualVariables.glsl-DPoFF9eG.js","assets/FloatsPassUniform-yzynPlDB.js","assets/Float4PassUniform-BlgtXzb0.js","assets/ObjectAndLayerIdColor.glsl-xqs4IH1X.js","assets/SnowCover.glsl-C9VUzrAA.js","assets/SSAO.glsl-CieOBHuS.js","assets/ScreenSpacePass.glsl-DOjTinpP.js","assets/ReadDepth.glsl-CSPikWKN.js","assets/CameraSpace.glsl-6Z1q9G0l.js","assets/Float2PassUniform-DUjW63UW.js","assets/ShaderBuilder-D3cV1oap.js","assets/SSAOBlur.glsl-DEwR3tk9.js","assets/Float2DrawUniform-aR5RLpeA.js","assets/SceneLighting-DFVSfk4c.js","assets/sphere-9YfqUkuX.js","assets/vectorStacks-FfDNcZoS.js","assets/quatf64-BJJPhW0N.js","assets/vec3-zq4-AU_O.js","assets/plane-Bg1a5O73.js","assets/ray-CWXoVP-g.js","assets/ObjectStack-CBI5g-Qc.js","assets/projectVectorToVector-DX3Yd1qf.js","assets/dehydratedPoint-rdg1UAtQ.js","assets/frustum-Dz51AK3u.js","assets/lineSegment-BJ2rgalW.js","assets/orientedBoundingBox-CzNbshh-.js","assets/quat-BszBv_-H.js","assets/HUDIntersectorResult-CPKd33dL.js","assets/renderState-Be6uDhGv.js","assets/BooleanBindUniform-_2Zs0Oiv.js","assets/View.glsl-DCHnRtrH.js","assets/Matrix4BindUniform-DS27O9oA.js","assets/IntegerPassUniform-Bc4jwiiu.js","assets/Matrix4PassUniform-JGr7b2hu.js","assets/MaterialUtil-QJlc_rwl.js","assets/VertexColor.glsl-DVDp3fwI.js","assets/VerticalOffset.glsl-CD0ss13J.js","assets/ScreenSizePerspective.glsl-D8mo4yes.js","assets/Normals.glsl-C_GiWNRp.js","assets/TerrainDepthTest.glsl-DLAwRTt4.js","assets/OutputColorHighlightOLID.glsl-BZElqToO.js","assets/HUDMaterial.glsl-BqTlEc9K.js","assets/HUDVisibility.glsl-e56UpBL8.js","assets/RealisticTree.glsl-C3WDO8M8.js","assets/boundedPlane-C8nQBQLB.js","assets/vec3f32-B2H3-fiA.js","assets/pbf-wXxPPz7x.js","assets/RenderCoordsHelper-CTjMliQt.js","assets/graphicUtils-BW24Jhcf.js","assets/hydratedFeatures-B670wkRA.js","assets/DefaultBufferWriter-BXwy9hB-.js","assets/triangle-_uWz9WdI.js","assets/videoUtils-Cwi_sthm.js","assets/ManagedTexture-MMKE_FPf.js","assets/image-D9NkN0IP.js","assets/urlUtils-BholpLvl.js","assets/pbfQueryUtils-q4mcHKpQ.js","assets/query-C5yhs-oW.js","assets/queryUtils-D1dUonfL.js","assets/placementUtils-Ra55xcJ3.js","assets/primitiveObjectSymbolUtils-frpHRDK8.js","assets/Intersector-CuU_DZjQ.js","assets/sdfPrimitives-BLSDVil_.js","assets/DefaultMaterial-BF2zOTJE.js","assets/VertexBuffer-xVpphTb4.js","assets/BufferObject-q8zuTMny.js","assets/FeaturePipelineWorker-B9PWOXRg.js","assets/SimpleGeometryCursor-5wFw2ZZo.js","assets/bundle-BeTxitUr.js","assets/BidiEngine-BrFXRv7y.js","assets/CIMSymbolHelper-l5sn5wJj.js","assets/rasterizingUtils-CKtfcOpu.js","assets/labelPoint-vGsL2GFc.js","assets/GeometryUtils-Dmca5Xm4.js","assets/Rect-BhUrWpQm.js","assets/BoundingBox-CLkiiRfJ.js","assets/CircularArray-CE2T6ZES.js","assets/FeatureSetReaderParquet-xKzYk91g.js","assets/callExpressionWithCursor-BmfrFX6I.js","assets/TurboLine-BxbcbrGR.js","assets/operatorGeodeticDensify-CnMr28Dz.js","assets/geodeticCurveType-DoJa853C.js","assets/normalizeUtilsSync-3fP05dGa.js","assets/FeatureIdInfo-t7CytnF0.js","assets/createConnection-Cw1TenyS.js","assets/geojson-CXDwHPSt.js","assets/sourceUtils-3L4uhiUn.js","assets/ogcFeatureUtils-CeM7axQR.js","assets/ComputedAttributeStorage-B3XSA2BQ.js","assets/utils-DS5dbHj4.js","assets/UpdateTracking2D-BiwypiBP.js","assets/constants-BuH6TGxi.js","assets/streamLayerUtils-82UmlW-3.js","assets/parquet-Z-9I3S-h.js","assets/PieChartMeshWriter-Al2loCUm.js","assets/MeshWriterRegistry-e3uB9X00.js","assets/FeatureMetadata-i54qdN5K.js","assets/FeatureServiceSnappingSourceWorker-CuJqpON9.js","assets/symbologySnappingCandidates-CpRcGH2C.js","assets/FlowWorker-CVDg3XO0.js","assets/dataUtils-BTiGb5TR.js","assets/loadUtils-CFFeTrby.js","assets/GeoJSONSourceWorker-8mUH4iYC.js","assets/MemorySourceWorker-CVHzJh4b.js","assets/objectIdUtils-Bw-IhBfb.js","assets/PBFDecoderWorker-CxfVePZE.js","assets/dehydratedFeatureComparison-Uk3aLNrk.js","assets/dehydratedFeatures-8DNmK2px.js","assets/PanoramicMeshWorker-P6iaZJzm.js","assets/PixelBlock-HBARrhko.js","assets/ParquetSourceWorker-oi82XrjU.js","assets/parquetUtils-yufJTvRq.js","assets/PointCloudWorker-BIeWd0f3.js","assets/I3SBinaryReader-CnFv3yUu.js","assets/PointCloudUniqueValueRenderer-DL_yCBPm.js","assets/RasterWorker-CcnXl70K.js","assets/RasterSymbolizer-DiWFkfms.js","assets/_commonjsHelpers-BCEO1LKV.js","assets/colorUtils-DJOs5VE1.js","assets/vectorFieldUtils-DMJyxx0j.js","assets/rasterFunctionHelper-o0iMUn4M.js","assets/clipUtils-DaPwa6ud.js","assets/rasterProjectionHelper-w_U-UD-j.js","assets/GCSShiftTransform-4csc8YiS.js","assets/SceneLayerSnappingSourceWorker-BsJrszQJ.js","assets/Octree-XJBZsigF.js","assets/SceneLayerWorker-TZkDMl2C.js","assets/WorkerHandle-BLUb_Jly.js","assets/WFSSourceWorker-C_Mdtady.js","assets/wfsUtils-CDHDekO-.js","assets/xmlUtils-CfkRQroA.js","assets/WorkerTileHandler-HxvhVujD.js","assets/earcut-BF1-mB58.js","assets/SourceLayerData-DE0qEGp8.js","assets/constants-BwY8HRAs.js","assets/StyleRepository-g8V7AsXM.js","assets/config-BSvujflG.js","assets/statsWorker-DgYal0it.js","assets/statsWorker-CkS7_j5T.js","assets/projectOperator-B1FLzd6L.js","assets/projectionZScaling-DAQiVc32.js","assets/projectOperator-CfopyaTY.js","assets/projectOperator-noHd-k7X.js","assets/Popup-B0odJfFs.js","assets/Feature-C9LkNKwU.js","assets/shared-CBxUlSgW.js","assets/throttle-LYImypwQ.js","assets/unitFormatUtils-3ZxnJ6-6.js","assets/quantity-CPor8qMe.js","assets/isImageryGraphicOrigin-F105T3Jm.js","assets/isImageryTileGraphicOrigin-DkUl-5nl.js","assets/AttachmentInfo-CF5-3_Di.js","assets/executeQueryJSON-DqSFIBMl.js","assets/utils-Cuuurg5i.js","assets/cimSymbolUtils-Q6FkyqJB.js","assets/FeatureUtilityNetworkAssociationsViewModel-iy2UpB7W.js","assets/featureUtils-CYV1Iiyw.js","assets/ReactiveSet-Jf4MiUGe.js","assets/devEnvironmentUtils-Dd-UzSlS.js","assets/symbolUtils-B6-qgP3q.js","assets/webStyleSymbolUtils-CccoPLb0.js","assets/layerViewUtils-RSw-QNoB.js","assets/ElevationLayer-DXIU7C3T.js","assets/TilemapCache-BW-78K6J.js","assets/ArcGISCachedService-CRfKye1j.js","assets/TileInfoTilemapCache-B4g2sXyM.js","assets/resourceUtils-CX-wX1sR.js","assets/resourceUtils-BiMcW5zN.js","assets/portalLayers-B8F7N-ed.js","assets/loadUtils-IIOJvYVV.js","assets/associatedFeatureServiceUtils-LJSputl4.js","assets/fetchService-yJGFErvp.js","assets/lazyLayerLoader-Z7OZuTUf.js","assets/portalLayers-DpY9FtF8.js","assets/arcgisLayers-C2vyqp3D.js","assets/layersCreator-B_NbEqg2.js","assets/layersCreator-CeQNT9as.js","assets/ElevationQuery-BrQIlua1.js","assets/GeometryDescriptor-CAI-CJtE.js","assets/WhereClauseCache-BQe8QpPQ.js","assets/arcadeUtils-hLsIIY_S.js","assets/Dictionary-ByWMrwnf.js","assets/ImmutableArray-C3KNQCVd.js","assets/track-443DPZkO.js","assets/ArcadePortal-CDC0x4Mh.js","assets/Attachment-BMWxhZED.js","assets/Feature-BfVJqHKS.js","assets/arcadeEnvironment-dH-3dXN2.js","assets/containerUtils-CNnsTsDa.js","assets/measures-CvGGokgB.js","assets/fieldStats-B5F0iEW-.js","assets/arcade-DBFFHdMu.js","assets/unitConversion-Bde7sJ-f.js","assets/functions-CNuMQhsa.js","assets/aiServices-6rsb7Tmq.js","assets/commonProperties-CaHgSHvW.js","assets/rasterFieldUtils-CTwnxR3_.js","assets/batchExec-DMEEKqnI.js","assets/aiServices-UDYWixFW.js","assets/webStyleSymbolUtils-l5iZTIfN.js","assets/webglDeps-BWjFb4yh.js","assets/FramebufferObject-BhBPSr-C.js","assets/ProgramTemplate-BXau1qoF.js","assets/ProgramCache-BCiAPfoP.js","assets/VertexArrayObject-DEfjd5y-.js","assets/mapViewDeps-CiOnhExb.js","assets/WGLContainer-D_aBMsnu.js","assets/Container-BuEih3Ua.js","assets/geodesicUtils-CbiJFASl.js","assets/FeatureCommandQueue-CjFmAvd1.js","assets/GraphShaderModule-D5RCsL2_.js","assets/utils-Czjlo_U1.js","assets/CIMResourceManager-Aeqm523S.js","assets/OverrideHelper-BhCM0ayL.js","assets/callExpressionWithFeature-D55aOczd.js","assets/SDFHelper-Cc3DUmXZ.js","assets/GridShader-B_akBvUI.js","assets/SymbolFader-Cfn7eEL5.js","assets/DisjointTimerQuery-mSqh8LCt.js","assets/TechniqueInstance-B37K-FPt.js","assets/TileContainer-B6yQthEI.js","assets/RenderingContext-CUvHo4ju.js","assets/utils-Cr_Wm5JE.js","assets/AGraphicContainer-BjvRrdle.js","assets/GraphicsView2D-CPqKya-9.js","assets/utils-CyTmGCxv.js","assets/gridUtils-CbplE56Q.js","assets/GraphicContainer-Dcpg9zYN.js","assets/TileLayerView2D-C4L21-H4.js","assets/floorFilterUtils-TMZ7AjwL.js","assets/sublayerUtils-B_4dS-HF.js","assets/LayerView2D-BsKgTWnO.js","assets/drapedUtils-BIPbWxSw.js","assets/MapServiceLayerViewHelper-Bl1IjP34.js","assets/popupUtils-Bb88Y0DD.js","assets/Bitmap-CiNUpq9T.js","assets/bitmapUtils-SuGDUZFe.js","assets/imageUtils-H_6DvHN1.js","assets/HighlightGraphicContainer-Cgga58jR.js","assets/LayerView-2jeNRFkG.js","assets/RefreshableLayerView-CXmtIjA5.js","assets/highlightUtils-Drb4dN_6.js","assets/highlightOptionsUtils-C8mtOR7S.js","assets/FeatureLayerView2D-D4jjlQc9.js","assets/FeatureLayerView2D-C6knFFc9.js","assets/AttributeBinsFeatureSet-D0PNU62h.js","assets/constants-hGT2UJiZ.js","assets/featurePopupQueryUtils-BIpfiKXw.js","assets/timeSupport-CpSaGF8C.js","assets/AttributeBinsQuery-BT2fajrO.js","assets/tagSymbols-CazaFvX8.js","assets/BaseDynamicLayerView2D-llBzsmFA.js","assets/BitmapContainer-ChYmxUus.js","assets/ExportStrategy-BtFJEMJc.js","assets/CatalogLayerView2D-CRvxk8PM.js","assets/CatalogDynamicGroupLayerView2D-DYYpZrXc.js","assets/CatalogFootprintLayerView2D-HYQThAnm.js","assets/HighlightLayerViewMixin-Ck9bRH3l.js","assets/GeoRSSLayerView2D-DytFMiSX.js","assets/GraphicsLayerView2D-COxLOSpl.js","assets/GroupLayerView2D-C-AfU19Q.js","assets/ImageryLayerView2D-CsHxUh8S.js","assets/RasterVFDisplayObject-BV3YuQew.js","assets/ImageryTileLayerView2D--RGFPT3o.js","assets/RawBlockCache-DTTCvtu0.js","assets/datasetUtils-CRhdcyUt.js","assets/multidimensionalUtils-DD5iyU0q.js","assets/rasterUtils-CXmXN_V9.js","assets/KMLLayerView2D-DwS_y_tW.js","assets/kmlUtils-HLddgLix.js","assets/KnowledgeGraphLayerView2D-D_7_RVU0.js","assets/MapImageLayerView2D-C9KBsHpP.js","assets/ExportImageParameters-CZohDpMb.js","assets/MapNotesLayerView2D-BgnojtMe.js","assets/MediaLayerView2D-DUO9fT1h.js","assets/MediaElementView-DXctSTwh.js","assets/OverlayContainer-DNIcA0Lc.js","assets/OGCFeatureLayerView2D-DwpYA7_V.js","assets/RouteLayerView2D-DMDzLfa9.js","assets/Stop-D2HmBER2.js","assets/networkEnums-QOpSLZcw.js","assets/RouteInfo-BK89lE3E.js","assets/StreamLayerView2D-DWY2e1V7.js","assets/SubtypeGroupLayerView2D-DKxMB8q1.js","assets/VectorTileLayerView2D-bHPPmG7U.js","assets/VideoLayerView2D-w1iWKqYt.js","assets/GraphicsLayer-Bx8Nz7ax.js","assets/ControlPoint-BW-XH0tx.js","assets/videoUtils-DZA7TPuS.js","assets/WMSLayerView2D-CmtdBR78.js","assets/ExportWMSImageParameters-BoUFQfmf.js","assets/WMTSLayerView2D-DDplpvTq.js","assets/AreaMeasurementAnalysisView2D-De_vkYqU.js","assets/SpatialReference-HLIf1Z5k.js","assets/Envelope2D-Cwxt0azx.js","assets/Point2D-7VmvyXN4.js","assets/OperatorDefinitions-CscAnk1m.js","assets/Transformation2D-CPSmiNnd.js","assets/areaOperator-DLkwf7SC.js","assets/apiConverter-BH2GqpH4.js","assets/jsonConverter-CbeIyOFG.js","assets/geodeticAreaOperator-CbAaN6Nl.js","assets/geodeticDensifyOperator-mOADqpSg.js","assets/geodeticLengthOperator-CWQiiddx.js","assets/lengthOperator-DHlVc34D.js","assets/simplifyOperator-CdQI_hSF.js","assets/operatorSimplify-CKtdefMF.js","assets/memoize-BNsZjv91.js","assets/quantityFormatUtils-DJ98D30D.js","assets/elevationInfoUtils-9csVBlEH.js","assets/getDefaultUnitForView-BwZf47ZU.js","assets/ExclusiveOperationManager-CKK1qF1W.js","assets/SketchViewModel-NAjbn0Ca.js","assets/isSupportedObject-Ccal0viz.js","assets/layerUtils-VowzydxH.js","assets/SketchOptions-Dp8M5XoK.js","assets/LineSnappingHint-BOeMI0cS.js","assets/ParallelSnappingHint-C_mSlwpq.js","assets/DrapedEdgeSnappingCandidate-BWx5lQgf.js","assets/constraints-Bf0IRs4G.js","assets/EdgeSnappingCandidate-BfgKjc_Z.js","assets/SnappingCandidate-B4WtOFZq.js","assets/IntersectionSnappingCandidate-b5Urq9uN.js","assets/IntersectionSnappingHint-CdcMZxUs.js","assets/LineSnappingCandidate-BsncFUer.js","assets/RightAngleTriangleSnappingCandidate-CRITbc5W.js","assets/RightAngleSnappingHint-BXbBqf-p.js","assets/viewUtils-D9SUkhqu.js","assets/viewUtils-BwKx9qtR.js","assets/snappingUtils-Od8uWW_a.js","assets/euclideanLengthMeasurementUtils-C9WB-wbk.js","assets/hitTestSelectUtils-DQf3EOGe.js","assets/DistanceMeasurementAnalysisView2D-CHPQwWI2.js","assets/ElevationProfileAnalysisView2D-49vHRrhm.js","assets/Distance2DCalculator-CXhBP-8I-CqzpU8vR.js","assets/distanceOperator-CYf0gmY_.js","assets/mapCollectionUtils-_kTr84uj.js","assets/createUtils-BdtfcpTy.js","assets/apng-DVUp_6dk.js","assets/calcite-button-CrXR0T3m.js","assets/controllers-D431norp.js","assets/useSetFocus-qmstydT5.js","assets/dom-CJuMMUk1.js","assets/form-Dvh-rvhZ.js","assets/guid-DciZyXg4.js","assets/interactive-BXtusLaV.js","assets/label-D7Uu9l3T.js","assets/logger-DwD0cLmT.js","assets/observers-B4A_FKeK.js","assets/useT9n-BxnHsNZS.js","assets/calcite-icon-B-4rZ_0i.js","assets/calcite-loader-gT6XLLpR.js","assets/static-DWcgv99t.js","assets/calcite-icon-QCQFZW6c.js","assets/webdocSaveUtils-D83id4-v.js","assets/originUtils-D6xFQIj1.js","assets/resourceUtils-BCTmrDyq.js","assets/saveUtils-Cw05PoQr.js","assets/editingSupport-CJyHeYaa.js","assets/editingSupport-37XIr8jM.js","assets/OverrideHelper-BMUKsh_Y.js","assets/layersLoader-B1CQOLOB.js","assets/featureUtils-BtDE87C0.js","assets/featureLayerUtils-Bj68dzMR.js","assets/utils-xGYiRwRX.js","assets/FeatureLayerSource-CrwdsV3W.js","assets/MeshTransform-mXzx59gA.js","assets/axisAngleDegrees-B_kvpSNV.js","assets/External-2kZvgPV0.js","assets/applyEditsUtils-Bb8NOXfH.js","assets/FeatureLayerSource-C-IU-4xB.js","assets/QueryTask-B-24FCQu.js","assets/executeForIds--WTxiX90.js","assets/executeQueryPBF-BiLBbjFv.js","assets/PivotQuery-0UMCIH8i.js","assets/PivotQuery-DIW1lqua.js","assets/TopFeaturesQuery-CZ8Xxp4K.js","assets/TopFeaturesQuery-DyJ9g8fz.js","assets/AttributeBinsQuery-0Lt4wRdt.js","assets/queryAssociations-CznPysD-.js","assets/queryAssociations-CFe4STNE.js","assets/Association-CIzS31_v.js","assets/QueryAssociationsParameters-DrNdaUEb.js","assets/QueryAssociationsParameters-Cead49_f.js","assets/synthesizeAssociationGeometries-DMSKPyma.js","assets/calcite-tooltip-B2oKFO03.js","assets/FloatingArrow-Bpa7woMQ.js","assets/keyed-Chb4buFh.js","assets/floating-ui-cQPNaiyr.js","assets/debounce-bXEsmoNp.js","assets/openCloseComponent-Bh_XfECY.js"])))=>i.map(i=>d[i]);
(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function e(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function t(e,t){return function(n,r){t(n,r,e)}}function n(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function r(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r,i;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose],n&&(i=r)}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var i=typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r};function a(e){function t(t){e.error=e.hasError?new i(t,e.error,`An error was suppressed during disposal.`):t,e.hasError=!0}var n,r=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(a,function(e){return t(e),a()})}else r|=1}catch(e){t(e)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}var o=globalThis,s={...o.esriConfig?.has};function c(e){return typeof s[e]==`function`?s[e]=s[e](o):s[e]}c.add=(e,t,n,r)=>{(r||s[e]===void 0)&&(s[e]=t),n&&c(e)},c.cache=s,c.add(`big-integer-warning-enabled`,!0),c.add(`esri-deprecation-warnings`,!0),c.add(`esri-tests-disable-screenshots`,!1),c.add(`esri-tests-use-full-window`,!1),c.add(`esri-tests-post-to-influx`,!0),c.add(`esri-cim-animations-enable-status`,`enabled`),c.add(`esri-cim-animations-spotlight`,!1),c.add(`esri-cim-animations-freeze-time`,!1),(()=>{c.add(`host-webworker`,o.WorkerGlobalScope!==void 0&&self instanceof o.WorkerGlobalScope);let e=typeof window<`u`&&typeof location<`u`&&typeof document<`u`&&window.location===location&&window.document===document;if(c.add(`host-browser`,e),c.add(`host-node`,!(typeof o.process!=`object`||!o.process.versions?.node||!o.process.versions.v8)),c.add(`dom`,e),c(`host-browser`)){let e=navigator,t=e.userAgent,n=e.appVersion,r=parseFloat(n);if(c.add(`wp`,parseFloat(t.split(`Windows Phone`)[1])||void 0),c.add(`msapp`,parseFloat(t.split(`MSAppHost/`)[1])||void 0),c.add(`khtml`,n.includes(`Konqueror`)?r:void 0),c.add(`edge`,parseFloat(t.split(`Edge/`)[1])||void 0),c.add(`opr`,parseFloat(t.split(`OPR/`)[1])||void 0),c.add(`webkit`,!c(`wp`)&&!c(`edge`)&&parseFloat(t.split(`WebKit/`)[1])||void 0),c.add(`chrome`,!c(`edge`)&&!c(`opr`)&&parseFloat(t.split(`Chrome/`)[1])||void 0),c.add(`android`,!c(`wp`)&&parseFloat(t.split(`Android `)[1])||void 0),c.add(`safari`,!n.includes(`Safari`)||c(`wp`)||c(`chrome`)||c(`android`)||c(`edge`)||c(`opr`)?void 0:parseFloat(n.split(`Version/`)[1])),c.add(`mac`,n.includes(`Macintosh`)),!c(`wp`)&&/(iPhone|iPod|iPad)/.test(t)){let e=RegExp.$1.replace(/P/,`p`),n=/OS ([\d_]+)/.test(t)?RegExp.$1:`1`,r=parseFloat(n.replace(/_/,`.`).replaceAll(`_`,``));c.add(e,r),c.add(`ios`,r)}c(`webkit`)||(!t.includes(`Gecko`)||c(`wp`)||c(`khtml`)||c(`edge`)||c.add(`mozilla`,r),c(`mozilla`)&&c.add(`ff`,parseFloat(t.split(`Firefox/`)[1]||t.split(`Minefield/`)[1])||void 0))}})(),(()=>{if(o.navigator){let e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),n=/iPhone/i.test(e);t&&c.add(`esri-mobile`,t),n&&c.add(`esri-iPhone`,n),c.add(`esri-geolocation`,!!navigator.geolocation)}c.add(`esri-wasm`,`WebAssembly`in o),c.add(`esri-performance-mode-frames-between-render`,20),c.add(`esri-force-performance-mode`,!1),c.add(`esri-shared-array-buffer`,()=>{let e=`SharedArrayBuffer`in o,t=!1===o.crossOriginIsolated;return e&&!t}),c.add(`wasm-simd`,()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))),c.add(`esri-atomics`,`Atomics`in o),c.add(`esri-workers`,`Worker`in o),c.add(`web-feat:cache`,`caches`in o),c.add(`esri-workers-arraybuffer-transfer`,!c(`safari`)||Number(c(`safari`))>=12),c.add(`workers-pool-size`,8),c.add(`featurelayer-simplify-thresholds`,[.5,.5,.5,.5]),c.add(`featurelayer-simplify-payload-size-factors`,[1,1,4]),c.add(`featurelayer-fast-triangulation-enabled`,!0),c.add(`featurelayer-animation-enabled`,!0),c.add(`featurelayer-snapshot-enabled`,!0),c.add(`featurelayer-snapshot-initial-tolerance`,0),c.add(`featurelayer-snapshot-point-min-threshold`,8e4),c.add(`featurelayer-snapshot-point-max-threshold`,4e5),c.add(`featurelayer-snapshot-multipoint-min-threshold`,2e4),c.add(`featurelayer-snapshot-multipoint-max-threshold`,1e5),c.add(`featurelayer-snapshot-polygon-min-threshold`,2e3),c.add(`featurelayer-snapshot-polygon-max-threshold`,2e3),c.add(`featurelayer-snapshot-polyline-min-threshold`,2e3),c.add(`featurelayer-snapshot-polyline-max-threshold`,2e3),c.add(`featurelayer-snapshot-max-vertex-count`,25e4),c.add(`featurelayer-snapshot-non-hosted-exceedslimit-enabled`,!0),c.add(`featurelayer-snapshot-concurrency`,4),c.add(`featurelayer-snapshot-coverage`,.1),c.add(`featurelayer-query-max-depth`,4),c.add(`featurelayer-query-pausing-enabled`,!1),c.add(`featurelayer-query-tile-concurrency`,4),c.add(`featurelayer-query-tile-max-features`,6e5),c.add(`featurelayer-advanced-symbols`,!1),c.add(`featurelayer-pbf`,!0),c.add(`featurelayer-pbf-statistics`,!1),c.add(`feature-layers-workers`,!0),c.add(`feature-polyline-generalization-factor`,1),c.add(`parquetlayer-full-query-feature-count`,2e4),c.add(`parquetlayer-hittest-max-feature-count`,1),c.add(`parquetlayer-persistence-enabled`,!1),c.add(`mapview-transitions-duration`,200),c.add(`mapview-essential-goto-duration`,200),c.add(`mapview-srswitch-adjust-rotation-scale-threshold`,24e6),c.add(`mapserver-pbf-version-support`,10.81),c.add(`mapservice-popup-identify-max-tolerance`,20),c.add(`request-queue-concurrency-global`,50),c.add(`request-queue-concurrency-hosted`,16),c.add(`request-queue-concurrency-non-hosted`,4),c.add(`curve-densification-coarse-segments`,128),c.add(`curve-densification-max-segments`,2e3),c.add(`curve-densification-min-segments`,3),c.add(`curve-densification-pixel-deviation`,.5),c.add(`view-readyState-waiting-delay`,1e3),c.add(`gradient-depth-bias`,.01),c.add(`gradient-depth-epsilon`,1e-8),c.add(`enable-feature:esri-compress-textures`,!0),c.add(`enable-feature:basemap-groundlayers`,!0),c.add(`enable-feature:oit-ground`,!0),!c(`host-webworker`)&&c(`host-browser`)&&(c.add(`esri-csp-restrictions`,()=>{try{Function()}catch{return!0}return!1}),c.add(`esri-url-encodes-apostrophe`,()=>{let e=window.document.createElement(`a`);return e.href=`?'`,e.href.includes(`?%27`)}))})();function l(e){}function u(e){}function d(e){return()=>e}function f(e){return e}var p=class e{static{this._m=2147483647}static{this._a=48271}static{this._c=0}constructor(e=1){this._seed=e}set seed(t){this._seed=t??Math.random()*e._m}getInt(){return this._seed=(e._a*this._seed+e._c)%e._m,this._seed}getFloat(){return this.getInt()/(e._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(t,n){let r=n-t;return t+this.getInt()/e._m*r}},m=1.5,h=1/m,g=.5;function _(e){return e}function v(e,t=_){if(!e||e.length===0)return;let n=e[0],r=t(n);for(let i=1;i<e.length;++i){let a=e[i],o=Number(t(a));o>r&&(r=o,n=a)}return n}function y(e,t=_){return v(e,e=>-t(e))}function b(e,t){return t?e.filter((e,n,r)=>r.findIndex(t.bind(null,e))===n):Array.from(new Set(e))}function x(e,t,n,r,i,a,o){if(e==null&&r==null)return!0;t=Math.max(0,t),i=Math.max(0,i),n=Math.max(0,n<0?(e?.length??0)+n:n),a=Math.max(0,a<0?(r?.length??0)+a:a);let s=n-t;if(e==null||r==null||s!==a-i)return!1;if(o){for(let n=0;n<s;n++)if(!o(e[t+n],r[i+n]))return!1}else for(let n=0;n<s;n++)if(e[t+n]!==r[i+n])return!1;return!0}function S(e,t,n){return x(e,0,e?.length??0,t,0,t?.length??0,n)}function ee(){return(e,t)=>{if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}function te(e,t,n){let r,i;return n?(r=t.filter(t=>!e.some(e=>n(e,t))),i=e.filter(e=>!t.some(t=>n(t,e)))):(r=t.filter(t=>!e.includes(t)),i=e.filter(e=>!t.includes(e))),{added:r,removed:i}}function ne(e){return e&&typeof e.length==`number`}function re(e,t){let n=e.length;if(n===0)return[];let r=[];for(let i=0;i<n;i+=t)r.push(e.slice(i,i+t));return r}var ie=class{constructor(){this.last=0}},ae=new ie;function oe(e,t,n,r){r||=ae;let i=Math.max(0,r.last-10);for(let a=i;a<n;++a)if(e[a]===t)return r.last=a,a;let a=Math.min(i,n);for(let n=0;n<a;++n)if(e[n]===t)return r.last=n,n;return-1}function se(e,t,n,r){let i=n??e.length,a=oe(e,f(t),i,r);if(a!==-1)return e[a]=e[i-1],n??e.pop(),t}var ce=new Set;function le(e,t,n=e.length,r=t.length,i,a){if(r===0||n===0)return n;ce.clear();for(let e=0;e<r;++e)ce.add(t[e]);i||=ae;let o=Math.max(0,i.last-10);for(let t=o;t<n;++t)if(ce.has(e[t])&&(a?.push(e[t]),ce.delete(e[t]),e[t]=e[n-1],--n,--t,ce.size===0||n===0))return ce.clear(),n;for(let t=0;t<o;++t)if(ce.has(e[t])&&(a?.push(e[t]),ce.delete(e[t]),e[t]=e[n-1],--n,--t,ce.size===0||n===0))return ce.clear(),n;return ce.clear(),n}function ue(e,t){let n=0;for(let r=0;r<e.length;++r){let i=e[r];t(i,r)&&(e[n]=i,n++)}return e.length=n,e}function de(e,t,n){let r=e.length;if(t>=r)return e.slice();let i=fe(n),a=new Set,o=[];for(;o.length<t;){let t=Math.floor(i()*r);a.has(t)||(a.add(t),o.push(e[t]))}return o}function fe(e){return e?(pe.seed=e,()=>pe.getFloat()):Math.random}var pe=new p;function me(e,t){if(!e)return e;let n=fe(t);for(let t=e.length-1;t>0;t--){let r=Math.floor(n()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}function he(e,t){let n=e.indexOf(t);return n===-1?null:(e.splice(n,1),t)}function ge(e,t){return e!=null}function _e(e){return Array.isArray(e)}var ve=[];function ye(e){return e instanceof ArrayBuffer}function be(e){return e?.constructor?.name===`Int8Array`}function xe(e){return e?.constructor?.name===`Uint8Array`}function Se(e){return e?.constructor?.name===`Uint8ClampedArray`}function Ce(e){return e?.constructor?.name===`Int16Array`}function we(e){return e?.constructor?.name===`Uint16Array`}function Te(e){return e?.constructor?.name===`Int32Array`}function Ee(e){return e?.constructor?.name===`Uint32Array`}function De(e){return e?.constructor?.name===`Float16Array`}function Oe(e){return e?.constructor?.name===`Float32Array`}function ke(e){return e?.constructor?.name===`Float64Array`}function Ae(e){return`buffer`in e}var je=1024;function Me(e){return ke(e)||Oe(e)||Te(e)||Ce(e)||be(e)}function Ne(e){return ke(e)||Oe(e)}function Pe(e){return ke(e)?179769e303:De(e)?65504:Oe(e)?3402823e32:Ee(e)?4294967295:we(e)?65535:xe(e)||Se(e)?255:Te(e)?2147483647:Ce(e)?32767:be(e)?127:256}var Fe=-32768,Ie=-2147483648;function Le(e){return e}function Re(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(e[n]===void 0?delete e[n]:e[n]instanceof Object&&Re(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&e[n]===void 0&&delete e[n];return e}function C(e){if(!e||typeof e!=`object`||typeof e==`function`)return e;let t=w(e);if(t!=null)return t;if(Be(e))return e.clone();if(Ve(e))return e.map(C);if(He(e))throw Error(`Trying to clone an unclonable Accessor instance`);let n={};for(let t of Object.getOwnPropertyNames(e))n[t]=C(e[t]);return n}function ze(e,t){if(!e||typeof e!=`object`||typeof e==`function`||`HTMLElement`in globalThis&&e instanceof HTMLElement)return e;let n=w(e);if(n!=null)return n;if(Ve(e)){let n=!0,r=e.map(e=>{let r=ze(e,t);return e!=null&&r==null&&(n=!1),r});return n?r:null}if(Be(e))return e.clone(t);if(e instanceof File||e instanceof Blob)return e;if(He(e))return null;let r=new(Object.getPrototypeOf(e)).constructor;for(let t of Object.getOwnPropertyNames(e)){let n=e[t],i=ze(n);if(n!=null&&i==null)return null;r[t]=i}return r}function Be(e){return typeof e.clone==`function`}function Ve(e){return typeof e.map==`function`&&typeof e.forEach==`function`}function He(e){return typeof e.notifyChange==`function`&&typeof e.watch==`function`}function Ue(e){if(Object.prototype.toString.call(e)!==`[object Object]`)return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function w(e){if(be(e)||xe(e)||Se(e)||Ce(e)||we(e)||Te(e)||Ee(e)||Oe(e)||ke(e))return e.slice();if(e instanceof Date)return new Date(e);if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){let t=new Map;for(let[n,r]of e)t.set(n,C(r));return t}if(e instanceof Set){let t=new Set;for(let n of e)t.add(C(n));return t}return null}function We(e,t){return e===t||typeof e==`number`&&isNaN(e)&&typeof t==`number`&&isNaN(t)||typeof e?.getTime==`function`&&typeof t?.getTime==`function`&&e.getTime()===t.getTime()||!1}function Ge(e,t){return e===t||(e==null||typeof e==`string`?e===t:typeof e==`number`?e===t||typeof t==`number`&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&S(e,t):e instanceof Set?t instanceof Set&&qe(e,t):e instanceof Map?t instanceof Map&&Je(e,t):!!Ue(e)&&Ue(t)&&Ke(e,t))}function Ke(e,t){if(e===null||t===null)return!1;let n=Object.keys(e);if(t===null||Object.keys(t).length!==n.length)return!1;for(let r of n)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function qe(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function Je(e,t){if(e.size!==t.size)return!1;for(let[n,r]of e){let e=t.get(n);if(e!==r||e===void 0&&!t.has(n))return!1}return!0}function T(e,t,n=!1){return $e(e,t,n)}function Ye(e,t){if(t!=null)return t[e]||Qe(e.split(`.`),!1,t)}function Xe(e,t,n){let r=e.split(`.`),i=r.pop(),a=Qe(r,!0,n);a&&i&&(a[i]=t)}function Ze(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e==`object`){if(Array.isArray(e)){let n=t;if(e.length!==n.length)return!0;for(let t=0;t<e.length;t++)if(Ze(e[t],n[t]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(let n in e)if(Ze(e[n],t[n]))return!0;return!1}return e!==t}function Qe(e,t,n){let r=n;for(let n of e){if(r==null)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}function $e(e,t,n){return t?Object.keys(t).reduce((e,r)=>{if(r===`__proto__`)return e;let i=e[r],a=t[r];return i===a?e:i===void 0?(e[r]=C(a),e):(Array.isArray(a)||Array.isArray(e)?(i=i?Array.isArray(i)?e[r]=i.slice():e[r]=[i]:e[r]=[],a&&(Array.isArray(a)||(a=[a]),n?a.forEach(e=>{i.includes(e)||i.push(e)}):e[r]=a.slice())):a&&typeof a==`object`?e[r]=$e(i,a,n):e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[r]=a),e)},e||{}):e}function et(e,t){for(let n of Object.entries(e))if(t===n[1])return n[0]}function tt(e,t){return Object.values(e).includes(t)}var nt={apiKey:void 0,apiKeys:{scopes:[]},applicationName:``,applicationUrl:globalThis.location?.href,assetsPath:``,fontsUrl:`https://static.arcgis.com/fonts`,geometryServiceUrl:`https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer`,geoRSSServiceUrl:`https://utility.arcgis.com/sharing/rss`,kmlServiceUrl:`https://utility.arcgis.com/sharing/kml`,userPrivilegesApplied:!0,portalUrl:`https://www.arcgis.com`,respectPrefersReducedMotion:!0,routeServiceUrl:`https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World`,workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:[`arcgis.com`,`arcgisonline.com`,`esrikr.com`,`premiumservices.blackbridge.com`,`esripremium.accuweather.com`,`gbm.digitalglobe.com`,`firstlook.digitalglobe.com`,`msi.digitalglobe.com`],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:`high`,proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&(T(nt,globalThis.esriConfig,!0),delete nt.has),!nt.assetsPath&&(nt.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@5.0.0-next.57/assets`,nt.defaultAssetsPath=nt.assetsPath);var rt=/\{([^}]+)\}/g;function it(e){return e??``}function at(e,t){return t?e.replaceAll(rt,typeof t==`object`?(e,n)=>it(Ye(n,t)):(e,n)=>it(t(n))):e}function ot(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(e,n)=>n===``?`$`:(Ye(n,t)??``).toString())}function st(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,e=>t?.includes(e)?e:`\\${e}`)}function ct(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}var lt;function ut(e){return lt??=new DOMParser,lt.parseFromString(e||``,`text/html`).body.innerText||``}function dt(e,t){return RegExp(`{${t}}`,`ig`).test(e)}function ft(e,...t){let n=e[0];for(let r=0;r<t.length;++r)n+=t[r]+e[r+1];return n}var pt={info:0,warn:1,error:2,none:3},E=class e{constructor(t){this.level=null,this._module=``,this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,e._loggers.set(this.module,this);let n=this.module.lastIndexOf(`.`);n!==-1&&(this._parent=e.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log(`error`,`always`,...e)}warn(...e){this._log(`warn`,`always`,...e)}info(...e){this._log(`info`,`always`,...e)}errorOnce(...e){this._log(`error`,`once`,...e)}warnOnce(...e){this._log(`warn`,`once`,...e)}infoOnce(...e){this._log(`info`,`once`,...e)}errorOncePerTick(...e){this._log(`error`,`oncePerTick`,...e)}warnOncePerTick(...e){this._log(`warn`,`oncePerTick`,...e)}infoOncePerTick(...e){this._log(`info`,`oncePerTick`,...e)}get test(){}static get test(){}static getLogger(t){return t=typeof t==`string`?t:t.declaredClass,e._loggers.get(t)||new e({module:t})}static{this._loggers=new Map}static{this._tickCounter=0}static{this._tickCounterScheduled=!1}static{this._throttlingDisabled=!1}_log(t,n,...r){if(this._matchLevel(t)){if(n!==`always`&&!e._throttlingDisabled){let i=ht(r),a=this._loggedMessages[t].get(i);if(n===`once`&&a!=null||n===`oncePerTick`&&a&&a>=e._tickCounter)return;this._loggedMessages[t].set(i,e._tickCounter),e._scheduleTickCounterIncrement()}for(let e of nt.log.interceptors)if(e(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(e,t){let n=this;for(;n!=null;){let t=n[e];if(t!=null)return t;n=n.parent}return t}_inheritedWriter(){return this._parentWithMember(`writer`,mt)}_matchLevel(e){let t=nt.log.level||`warn`;return pt[this._parentWithMember(`level`,t)]<=pt[e]}static _scheduleTickCounterIncrement(){e._tickCounterScheduled||(e._tickCounterScheduled=!0,Promise.resolve().then(()=>{e._tickCounter++,e._tickCounterScheduled=!1}))}};function mt(e,t,...n){console[e](`[${t}]`,...n)}function ht(...e){return ct(JSON.stringify(e,(e,t)=>typeof t!=`object`||Array.isArray(t)?t:`[Object]`))}function gt(e,t){for(let n of e.values())if(t(n))return!0;return!1}function _t(e,t){for(let n of e.values())if(!t(n))return!1;return!0}function vt(e,t){for(let n of e.values())if(t(n))return n;return null}function yt(e,t,n){let r=e.get(t);if(r!==void 0)return r;let i=n();return e.set(t,i),i}function bt(e){let t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))}var xt=()=>E.getLogger(`esri.core.accessorSupport.ensureTypes`);function St(e){if(e==null)return e;let t=new Date(e);return isNaN(t.getTime())?(xt().error(`Accessor#set`,`Invalid date value: '${e}', falling back to current date`),new Date):t}function eee(e){return e==null?e:!!e}function Ct(e){return e==null?e:e.toString()}function wt(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function Tt(e){return e==null?e:Math.round(parseFloat(e))}function Et(e){return null}function Dt(e,t){return n=>{let r=e(n);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function Ot(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function kt(e,t){return t!=null&&e&&!(t instanceof e)}function At(e){return e&&`isCollection`in e}function jt(e){return e?.Type?typeof e.Type==`function`?e.Type:e.Type.base:null}function tee(e,t){if(!t?.constructor||!At(t.constructor))return Mt(e,t)?t:new e(t);let n=jt(e.prototype.itemType),r=jt(t.constructor.prototype.itemType);return n?r?n===r?t:n.prototype.isPrototypeOf(r.prototype)?new e(t):(Mt(e,t),t):new e(t):t}function Mt(e,t){return!!Ot(t)&&(xt().error(`Accessor#set`,`Assigning an instance of '`+(t.declaredClass||`unknown`)+`' which is not a subclass of '`+Pt(e)+`'`),!0)}function Nt(e,t){return t==null?t:At(e)?tee(e,t):kt(e,t)?Mt(e,t)?t:new e(t):t}function Pt(e){return e?.prototype?.declaredClass||`unknown`}var Ft=new WeakMap;function It(e){switch(e){case Number:return e=>wt(e);case Wt:return Tt;case Boolean:return eee;case String:return Ct;case Date:return St;case Gt:return Et;default:return yt(Ft,e,()=>Nt.bind(null,e))}}function Lt(e,t){let n=It(e);return arguments.length===1?n:n(t)}function Rt(e,t,n){return arguments.length===1?Rt.bind(null,e):t&&(Array.isArray(t)?t.map(t=>e(t,n)):[e(t,n)])}function nee(e,t){return arguments.length===1?Rt(t=>Lt(e,t)):Rt(t=>Lt(e,t),t)}function zt(e,t,n){return t!==0&&Array.isArray(n)?n.map(n=>zt(e,t-1,n)):e(n)}function Bt(e,t,n){if(arguments.length===2)return n=>Bt(e,t,n);if(!n)return n;n=zt(e,t,n);let r=t,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let e=0;e<r;e++)n=[n];return n}function ree(e,t,n){return arguments.length===2?Bt(t=>Lt(e,t),t):Bt(t=>Lt(e,t),t,n)}function Vt(e){return!!Array.isArray(e)&&!e.some(t=>{let n=typeof t;return!(n===`string`||n===`number`||n===`function`&&e.length>1)})}function Ht(e,t){if(arguments.length===2)return Ht(e).call(null,t);let n=new Set,r=e.filter(e=>typeof e!=`function`),i=e.filter(e=>typeof e==`function`);for(let t of e)typeof t!=`string`&&typeof t!=`number`||n.add(t);let a=null,o=null;return(e,t)=>{if(e==null)return e;let s=typeof e,c=s===`string`||s===`number`;return c&&(n.has(e)||i.some(e=>s===`string`&&e===String||s===`number`&&e===Number))||s===`object`&&i.some(t=>!kt(t,e))?e:(c&&r.length?(a||=r.map(e=>typeof e==`string`?`'${e}'`:`${e}`).join(`, `),xt().error(`Accessor#set`,`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):typeof e==`object`&&i.length?(o||=i.map(e=>Pt(e)).join(`, `),xt().error(`Accessor#set`,`'${e}' is not a valid value for this property, value must be one of ${o}`)):xt().error(`Accessor#set`,`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function Ut(e,t){if(arguments.length===2)return Ut(e).call(null,t);let n={},r=[],i=[];for(let t in e.typeMap){let a=e.typeMap[t];n[t]=Lt(a),r.push(Pt(a)),i.push(t)}let a=()=>`'${r.join(`', '`)}'`,o=()=>`'${i.join(`', '`)}'`,s=typeof e.key==`string`?t=>t[e.key]:e.key;return t=>{if(e.base&&!kt(e.base,t)||t==null)return t;let r=s(t)||e.defaultKeyValue,i=n[r];if(!i)return xt().error(`Accessor#set`,`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!kt(e.typeMap[r],t))return t;if(typeof e.key==`string`&&!Ot(t)){let n={};for(let r in t)r!==e.key&&(n[r]=t[r]);return i(n)}return i(t)}}var Wt=class{},Gt=class{},iee={native:e=>({type:`native`,value:e}),array:e=>({type:`array`,value:e}),oneOf:e=>({type:`one-of`,values:e})};function aee(e){if(!e||typeof e!=`object`&&typeof e!=`function`||!(`type`in e))return!1;switch(e.type){case`native`:case`array`:case`one-of`:return!0}return!1}function Kt(e){switch(e.type){case`native`:return Lt(e.value);case`array`:return Rt(Kt(e.value));case`one-of`:return oee(e);default:return null}}function oee(e){let t=null;return(n,r)=>Jt(n,e)?n:(t??=qt(e),xt().error(`Accessor#set`,`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function qt(e){switch(e.type){case`native`:switch(e.value){case Number:return`number`;case String:return`string`;case Boolean:return`boolean`;case Wt:return`integer`;case Date:return`date`;case Gt:return`null`;default:return Pt(e.value)}case`array`:return`array of ${qt(e.value)}`;case`one-of`:{let t=e.values.map(e=>qt(e));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return`unknown`}function Jt(e,t){if(e==null)return!0;switch(t.type){case`native`:switch(t.value){case Number:case Wt:return typeof e==`number`;case Boolean:return typeof e==`boolean`;case String:return typeof e==`string`;case Gt:return e===null}return e instanceof t.value;case`array`:return!!Array.isArray(e)&&!e.some(e=>!Jt(e,t.value));case`one-of`:return t.values.some(t=>Jt(e,t))}}var see={remove:()=>{}};function Yt(e){return e?{remove(){e&&=(e(),void 0)}}:see}function Xt(e){e.forEach(e=>e?.remove())}function Zt(e){Xt(e),e.length=0}function Qt(e){return Yt(()=>Xt(e))}function $t(e){return Yt(()=>e()?.remove())}function en(e){return Yt(()=>e?.abort())}function cee(e){return Yt(e==null?void 0:()=>e.destroy())}function tn(e){return typeof e==`object`&&!!e&&`remove`in e&&typeof e.remove==`function`}function nn(e){tn(e)&&e.remove()}function rn(e){return{[Symbol.dispose](){e.remove()}}}function an(e){return e.__accessor__??null}function lee(e,t){return e?.metadata?.[t]!=null}function on(e,t,n){return n?sn(e,t,{policy:n,path:``}):sn(e,t,null)}function sn(e,t,n){return t?Object.keys(t).reduce((e,r)=>{let i=r;if(i===`__proto__`)return e;let a=null,o=`merge`;if(n&&(a=n.path?`${n.path}.${r}`:r,o=n.policy(a)),o===`replace`||o===`replace-arrays`&&Array.isArray(e[i]))return e[i]=t[i],e;if(e[i]===void 0)return e[i]=C(t[i]),e;let s=e[i],c=t[i];if(s===c)return e;if(Array.isArray(c)||Array.isArray(e))s=s?Array.isArray(s)?e[i]=s.slice():e[i]=[s]:e[i]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(e=>{s.includes(e)||s.push(e)}));else if(c&&typeof c==`object`)if(n){let t=n.path;n.path=a,e[i]=sn(s,c,n),n.path=t}else e[i]=sn(s,c,null);else e.hasOwnProperty(r)&&!t.hasOwnProperty(r)||(e[i]=c);return e},e||{}):e}function cn(e){return Array.isArray(e)?e:e.split(`.`)}function ln(e){return e.includes(`,`)?e.split(`,`).map(e=>e.trim()):[e.trim()]}function uee(e){if(Array.isArray(e)){let t=[];for(let n of e)t.push(...ln(n));return t}return ln(e)}function un(e,t,n,r){let i=uee(t);if(i.length!==1){let t=i.map(t=>r(e,t,n));return Qt(t)}return r(e,i[0],n)}function dn(e,t){let n=e.endsWith(`?`)?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){let e=parseInt(n,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.at(e)}let r=an(t);return lee(r,n)?r.get(n):t[n]}function fn(e,t,n){if(e==null)return e;let r=dn(t[n],e);return!r&&n<t.length-1?void 0:n===t.length-1?r:fn(r,t,n+1)}function pn(e,t,n=0){return typeof t!=`string`||t.includes(`.`)?fn(e,cn(t),n):dn(t,e)}function mn(e,t){return pn(e,t)}function hn(e,t){return pn(t,e)!==void 0}function gn(e){let t=e.constructor.__accessorMetadata__,n=Object.prototype.hasOwnProperty.call(e.constructor,`__accessorMetadata__`);if(t){if(!n){for(let e in t=Object.create(t),t)t[e]=C(t[e]);Object.defineProperty(e.constructor,`__accessorMetadata__`,{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,`__accessorMetadata__`,{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function _n(e,t){let n=gn(e),r=n[t];return r||=n[t]={},r}function dee(e,t){return on(e,t,pee)}var fee=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function pee(e){return fee.test(e)?`replace`:`merge`}var D=class e{constructor(e,t,n){this.type=`error`,this.name=e,this.message=t?ot(t,n):``,this.details=n}toString(){let{name:e,message:t}=this;return`[${e}]: ${t}`}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,t)=>{if(t&&typeof t==`object`&&typeof t.toJSON==`function`)return t;try{return C(t)}catch{return`[object]`}}))}}catch(e){throw E.getLogger(`esri.core.Error`).error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new e(t.name,t.message,t.details)}};function vn(e,t,n){if(e&&t)if(typeof t==`object`)for(let n of Object.getOwnPropertyNames(t))vn(e,n,t[n]);else{if(t.includes(`.`)){let r=t.split(`.`),i=r.splice(-1,1)[0];vn(mn(e,r),i,n);return}let r=e.__accessor__;r!=null&&mee(t,r),e[t]=n}}function mee(e,t){if(c(`esri-unknown-property-errors`)&&!yn(e,t))throw new D(`set:unknown-property`,bn(e,t))}function yn(e,t){return t.metadata[e]!=null}function bn(e,t){return`setting unknown property '`+e+`' on instance of `+t.host.declaredClass}function O(e={}){return(t,n)=>{if(t===Function.prototype)throw Error(`Inappropriate use of @property() on a static field: ${t.name}.${n}. Accessor does not support static properties.`);let r=Object.getOwnPropertyDescriptor(t,n),i=_n(t,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):`value`in r&&(`value`in e&&E.getLogger(`esri.core.accessorSupport.decorators.property`).warn(`@property() will redefine the value of "${n}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=r.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);let a=e.aliasOf;if(a){let e=typeof a==`string`?a:a.source,t=typeof a==`string`?null:!0===a.overridable,r;i.dependsOn=[e],i.get=function(){let t=mn(this,e);if(typeof t==`function`){r||=e.split(`.`).slice(0,-1).join(`.`);let n=mn(this,r);n&&(t=t.bind(n))}return t},i.readOnly||(i.set=t?function(e){this._override(n,e)}:function(t){vn(this,e,t)})}let o=e.type,s=e.types;if(!i.cast){let t;o&&!1!==e.useTypeForAutocast?t=Sn(o):s&&(t=Array.isArray(s)?Rt(Ut(s[0])):Ut(s)),e.cast=hee(e.cast,t)}dee(i,e),e.range&&(i.cast=Dt(i.cast,e.range))}}function xn(e,t,n){let r=_n(e,n);r.json||={};let i=r.json;return t!==void 0&&(i.origins||={},i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function Sn(e){let t=0,n=e;if(aee(e))return Kt(e);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!=`string`&&typeof n[0]!=`number`;)n=n[0],t++;let r=n;if(Vt(r))return t===0?Ht(r):Bt(Ht(r),t);if(t===1)return nee(r);if(t>1)return ree(r,t);let i=e;return i.from?i.from:Lt(i)}function hee(e,t){if(e||t)return e?t?(n,r)=>t(e(n,r),r):e:t}var gee=Object.prototype.toString;function _ee(e){let t=`__accessorMetadata__`in e?Lt(e):e;return function(...e){if(e.push(t),typeof e[2]==`number`)throw Error(`Using @cast has parameter decorator is not supported since 4.16`);return vee.apply(this,e)}}function vee(e,t,n,r){_n(e,t).cast=r}function yee(e){return(t,n)=>{_n(t,e).cast=t[n]}}function Cn(...e){if(e.length!==3||typeof e[1]!=`string`)return e.length===1&&gee.call(e[0])===`[object Function]`?_ee(e[0]):e.length===1&&typeof e[0]==`string`?yee(e[0]):void 0}var wn=Symbol(`Accessor-beforeDestroy`),Tn={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4},En={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128},Dn=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.clear(),this.accessed=void 0,this._observer=void 0}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed??=new Set,this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles??=[],this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null)for(;this._handles.length;)this._handles.pop().remove()}},On=new Dn,kn=[],An=On;function k(e){An.onAccessed(e)}var jn=!1,Mn=!1;function Nn(e,t,n){if(jn)return Pn(e,t,n);let r=null;if(Mn){An=e,kn.push(e);try{r=t.call(n)}catch(e){throw E.getLogger(`esri.core.accessorSupport.tracking`).error(e),e}finally{Fn()}}else{An=e,kn.push(e);try{r=t.call(n)}finally{Fn()}}return r}function bee(e,t){return Nn(On,e,t)}function Pn(e,t,n){let r=jn;jn=!0,An=e,kn.push(e);let i=null;try{i=t.call(n)}catch(e){Mn&&E.getLogger(`esri.core.accessorSupport.tracking`).error(e)}return Fn(),jn=r,i}function Fn(){let e=kn.length;if(e>1){let t=kn.pop();An=kn[e-2],t.onTrackingEnd()}else if(e===1){let e=kn.pop();An=On,e.onTrackingEnd()}else An=On}function In(e,t){if(t.flags&En.DepTrackingInitialized)return;t.flags|=En.DepTrackingInitialized;let n=Mn;Mn=!1,t.flags&En.AutoTracked?Pn(t.trackingTarget,t.metadata.get,e):Ln(e,t),Mn=n}var xee=[];function Ln(e,t){t.flags&En.ExplicitlyTracking||(t.flags|=En.ExplicitlyTracking,Pn(t.trackingTarget,()=>{let n=t.metadata.dependsOn||xee;for(let t of n)if(typeof t!=`string`||t.includes(`.`)){let n=cn(t);for(let t=0,r=e;t<n.length&&typeof r==`object`&&r;++t)r=Rn(r,n[t],t!==n.length-1)}else Rn(e,t,!1)}),t.flags&=~En.ExplicitlyTracking)}function Rn(e,t,n){let r=t.endsWith(`?`)?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){let t=parseInt(r,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.at(t)}let i=an(e);if(i){let t=i.propertiesByName.get(r);t&&(k(t),In(e,t))}return n?e[r]:void 0}function See(e){if(e.json&&e.json.origins){let t=e.json.origins,n={"web-document":[`web-scene`,`web-map`]};for(let e in n)if(t[e]){let r=t[e];n[e].forEach(e=>{t[e]=r}),delete t[e]}}}var zn=class{constructor(e,t,n){this.name=e,this.details=n,this.type=`warning`,this.message=t?ot(t,n):``}toString(){let{name:e,message:t}=this;return`[${e}]: ${t}`}};function Bn(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf(`esri.core.Collection`)===0}function Cee(e,t){return Un(e,`any`,t?.origin)}function Vn(e,t){return Un(e,`read`,t?.origin)}function Hn(e,t){return Un(e,`write`,t?.origin)}function Un(e,t,n){let r=e?.json;if(r?.origins&&n){let e;e=n===`link-chart`?r.origins[n]&&(t===`any`||t in r.origins[n])?r.origins[n]:r.origins[`web-map`]:r.origins[n],e&&(t===`any`||t in e)&&(r=e)}return r}var Wn=()=>E.getLogger(`esri.core.accessorSupport.extensions.serializableProperty.reader`);function Gn(e,t,n){e&&(!n&&!t.read||t.read?.reader||!1===t.read?.enabled||Eee(e)&&Xe(`read.reader`,Kn(e),t))}function Kn(e){let t=e.ndimArray??0;if(t>1)return Tee(e);if(t===1)return Yn(e);if(`type`in e&&Xn(e.type)){let t=e.type.prototype?.itemType?.Type,n=Yn(typeof t==`function`?{type:t}:{types:t});return(t,r,i)=>{let a=n(t,r,i);return a&&new e.type(a)}}return qn(e)}function qn(e){return`type`in e?wee(e.type):$n(e.types)}function wee(e){return e.prototype.read?(t,n,r)=>{if(t==null)return t;let i=typeof t;if(i!==`object`)return void Wn().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);let a=new e;return a.read(t,r),a}:e.fromJSON}function Jn(e,t,n,r){return r!==0&&Array.isArray(t)?t.map(t=>Jn(e,t,n,r-1)):e(t,void 0,n)}function Tee(e){let t=qn(e),n=Jn.bind(null,t),r=e.ndimArray??0;return(e,t,i)=>{if(e==null)return e;e=n(e,i,r);let a=r,o=e;for(;a>0&&Array.isArray(o);)a--,o=o[0];if(o!==void 0)for(let t=0;t<a;t++)e=[e];return e}}function Yn(e){let t=qn(e);return(e,n,r)=>{if(e==null)return e;if(Array.isArray(e)){let n=[];for(let i of e){let e=t(i,void 0,r);e!==void 0&&n.push(e)}return n}let i=t(e,void 0,r);return i===void 0?void 0:[i]}}function Xn(e){if(!Bn(e))return!1;let t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type==`function`?Zn(t.Type):Qn(t.Type))}function Eee(e){return`types`in e?Qn(e.types):Zn(e.type)}function Zn(e){return!Array.isArray(e)&&!!e&&(typeof e==`object`||typeof e==`function`)&&e.prototype&&(`read`in e.prototype||`fromJSON`in e||Xn(e))}function Qn(e){for(let t in e.typeMap)if(!Zn(e.typeMap[t]))return!1;return!0}function $n(e){let t=null,n=e.errorContext??`type`,r=e.validate;return(i,a,o)=>{if(i==null)return i;let s=typeof i;if(s!==`object`)return void Wn().error(`Expected JSON value of type 'object' to deserialize, but got '${s}'`);t||=Dee(e);let c=e.key;if(typeof c!=`string`)return;let l=i[er(c,t,o)],u=l?t[l]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){let e=`Type '${l||`unknown`}' is not supported`;o?.messages&&i&&o.messages.push(new zn(`${n}:unsupported`,e,{definition:i,context:o})),Wn().error(e);return}let d=new u;return d.read(i,o),r?r(d):d}}function er(e,t,n){let r=Object.values(t)[0],i=gn(r.prototype)[e],a=Vn(i,n),o=a?.read?.source;return o&&typeof o==`string`?o:e}function Dee(e){let t={};for(let n in e.typeMap){let r=e.typeMap[n],i=gn(r.prototype);if(typeof e.key==`function`)continue;let a=i[e.key];if(!a)continue;if(a.json?.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]==`string`){t[a.json.type[0]]=r;continue}let o=a.json?.write;if(!o?.writer){t[n]=r;continue}let s=o.target,c=typeof s==`string`?s:e.key,l={};o.writer(n,l,c),l[c]&&(t[l[c]]=r)}return t}function Oee(e){if(e.json||={},nr(e.json),rr(e.json),tr(e.json),e.json.origins)for(let t in e.json.origins)nr(e.json.origins[t]),rr(e.json.origins[t]),tr(e.json.origins[t]);return!0}function tr(e){e.name&&(e.read&&typeof e.read==`object`?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write==`object`?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function nr(e){typeof e.read==`boolean`?e.read={enabled:e.read}:typeof e.read==`function`?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read==`object`&&e.read.enabled===void 0&&(e.read.enabled=!0)}function rr(e){typeof e.write==`boolean`?e.write={enabled:e.write}:typeof e.write==`function`?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write==`object`&&e.write.enabled===void 0&&(e.write.enabled=!0)}function ir(e,t){if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;let n=e?.ndimArray??0;e&&(n===1||`type`in e&&Bn(e.type))?t.write.writer=Aee:n>1?t.write.writer=jee(n):t.types?Array.isArray(t.types)?t.write.writer=or(t.types[0]):t.write.writer=kee(t.types):t.write.writer=sr}function kee(e){return(t,n,r,i)=>t?ar(t,e,i)?sr(t,n,r,i):void 0:sr(t,n,r,i)}function ar(e,t,n){for(let n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(n?.messages){let r=t.errorContext??`type`,i=`Values of type '${(typeof t.key==`function`?e.declaredClass:e[t.key])??`Unknown`}' cannot be written`;n&&n.messages&&e&&n.messages.push(new D(`${r}:unsupported`,i,{definition:e,context:n})),E.getLogger(`esri.core.accessorSupport.extensions.serializableProperty.writer`).error(i)}return!1}function or(e){return(t,n,r,i)=>sr(!t||!Array.isArray(t)?t:t.filter(t=>ar(t,e,i)),n,r,i)}function sr(e,t,n,r){Xe(n,cr(e,r),t)}function cr(e,t){return e&&typeof e.write==`function`?e.write({},t):e&&typeof e.toJSON==`function`?e.toJSON():typeof e==`number`?lr(e):e}function lr(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Aee(e,t,n,r){let i;e===null?i=null:e&&typeof e.map==`function`?(i=e.map(e=>cr(e,r)),typeof i.toArray==`function`&&(i=i.toArray())):i=[cr(e,r)],Xe(n,i,t)}function ur(e,t,n){return n!==0&&Array.isArray(e)?e.map(e=>ur(e,t,n-1)):cr(e,t)}function jee(e){return(t,n,r,i)=>{let a;if(t===null)a=null;else{a=ur(t,i,e);let n=e,r=a;for(;n>0&&Array.isArray(r);)n--,r=r[0];if(r!==void 0)for(let e=0;e<n;e++)a=[a]}Xe(r,a,n)}}function Mee(e){let t=Nee(e);if(e.json.origins)for(let n in e.json.origins){let r=e.json.origins[n],i=r.types?Pee(r):t;Gn(i,r,!1),r.types&&!r.write&&e.json.write?.enabled&&(r.write={...e.json.write}),ir(i,r)}Gn(t,e.json,!0),ir(t,e.json)}function Nee(e){return e.json.types?fr(e.json):e.type?dr(e):fr(e)}function Pee(e){return e.type?dr(e):fr(e)}function dr(e){if(!e.type)return;let t=0,n=e.type;for(;Array.isArray(n)&&!Vt(n);)n=n[0],t++;return{type:n,ndimArray:t}}function fr(e){if(!e.types)return;let t=0,n=e.types;for(;Array.isArray(n);)n=n[0],t++;return{types:n,ndimArray:t}}function Fee(e){Oee(e)&&(See(e),Mee(e))}var pr=new Set,mr=new Set;function hr(e){return t=>{e??=`esri.core.Accessor`,t.prototype.declaredClass=e,yr(t);let n=[],r=[],i=t.prototype;for(;i;)i.hasOwnProperty(`initialize`)&&!pr.has(i.initialize)&&(pr.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty(`destroy`)&&!mr.has(i.destroy)&&(mr.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);pr.clear(),mr.clear();let a=class extends t{constructor(...e){if(super(...e),this.constructor===a&&typeof this.postscript==`function`){if(n.length&&Object.defineProperty(this,`initialize`,{enumerable:!1,configurable:!0,value(){for(let e=n.length-1;e>=0;e--)n[e].call(this)}}),r.length){let e=!1,t=this[wn];Object.defineProperty(this,`destroy`,{enumerable:!1,configurable:!0,value(){if(!e){this.__accessor__.lifecycle=Tn.DESTROYING,e=!0,t.call(this);for(let e=0;e<r.length;e++)r[e].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};a.__accessorMetadata__=gn(t.prototype),a.prototype.declaredClass=e;let o=(e||`AccessorSubclass`).split(`.`).slice(-1)[0];return Object.defineProperty(a,`name`,{value:o,configurable:!0}),a}}function gr(e,{get:t,value:n}){return t==null?function(){let t=this.__accessor__,r=t.propertiesByName.get(e);if(r===void 0)return;t.mutable&&k(r);let i=t.store;return i.has(e)?i.get(e):n}:function(){let n=this.__accessor__;return n.propertiesByName.get(e)?.getComputed(n,t)}}function _r(e,t,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n})}function vr(e,t){return t.readOnly&&t.constructOnly?function(n){let r=this.__accessor__;if(r){if(r.mutable)return r.initialized&&t.readOnly?br(`read-only`,e):r.lifecycle===Tn.CONSTRUCTED&&t.constructOnly?br(`construct-only`,e):void r.set(e,n)}else _r(this,e,n)}:t.readOnly?function(n){let r=this.__accessor__;if(r){if(r.mutable)return r.initialized&&t.readOnly?br(`read-only`,e):void r.set(e,n)}else _r(this,e,n)}:t.constructOnly?function(n){let r=this.__accessor__;if(r){if(r.mutable)return r.lifecycle===Tn.CONSTRUCTED&&t.constructOnly?br(`construct-only`,e):void r.set(e,n)}else _r(this,e,n)}:function(t){let n=this.__accessor__;n?n.mutable&&n.set(e,t):_r(this,e,t)}}function yr(e){let t=e.prototype,n=gn(t),r={};for(let e of Object.getOwnPropertyNames(n)){let t=n[e];Fee(t),r[e]={enumerable:!0,configurable:!0,get:gr(e,t),set:vr(e,t)}}Object.defineProperties(e.prototype,r)}var br=(e,t)=>{E.getLogger(`esri.core.Accessor`).error(`cannot assign to ${e} property '${t}'`)},xr=class{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=t,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Iee(e),this.apiValues=Sr(this._apiToJSON),this.jsonValues=Sr(this._jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,n)=>{let r=this.toJSON(e);r!==void 0&&Xe(n,r,t)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){let t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function Iee(e){let t={};for(let n in e)t[e[n]]=n;return t}function Sr(e){let t=[];for(let n in e)t.push(n);return t.sort(),t}function Cr(){return function(e,t){return new xr(e,{ignoreUnknown:!0,...t})}}function A(e,t={}){let n=e instanceof xr?e:new xr(e,t),{alwaysWriteDefaults:r,default:i,ignoreUnknown:a=!0,name:o,nonNullable:s,readOnly:c=!1}=t;return O({type:a?n.apiValues:String,json:{type:n.jsonValues,default:i,name:o,read:!c&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:r}},nonNullable:s,readOnly:c})}function j(e,t,n){let r,i;return t===void 0||Array.isArray(t)?(i=e,n=t,r=[void 0]):(i=t,r=Array.isArray(e)?e:[e]),(e,t)=>{let a=e.constructor.prototype;r.forEach(r=>{let o=xn(e,r,i);o.read&&typeof o.read==`object`||(o.read={}),o.read.reader=a[t],n&&(o.read.source=(o.read.source||[]).concat(n))})}}function wr(e){return(t,n)=>{t[n]=e}}function M(e,t,n){let r,i;return t===void 0?(i=e,r=[void 0]):typeof t==`string`?(i=t,r=Array.isArray(e)?e:[e]):(i=e,r=[void 0],n=t),(e,t)=>{let a=e.constructor.prototype;for(let o of r){let r=xn(e,o,i);r.write&&typeof r.write==`object`||(r.write={}),n&&(r.write.target=n),r.write.writer=a[t]}}}var N=O,P=hr;function Tr(...e){return Cn(...e)}var Er=new WeakMap;function Lee(e,t,n=!1){let r=` DEPRECATED - ${t}`;if(!n)return void e.warn(r);let i=Er.get(e);i||(i=new Set,Er.set(e,i)),i.has(t)||(i.add(t),e.warn(r))}function Dr(e,t,n,r={}){c(`esri-deprecation-warnings`)&&Ar(e,`This widget is deprecated. Use the ${t} component instead.`,{see:[`${t} component reference: https://www.esriurl.com/${n}/`,`Esri's move to web components: https://www.esriurl.com/components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function Ree(e,t,n,r={}){c(`esri-deprecation-warnings`)&&Ar(e,`This class is deprecated. Use the ${t} component instead.`,{see:[`${t} component reference: https://www.esriurl.com/${n}/`,`Esri's move to web components: https://www.esriurl.com/components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function zee(e,t,n={}){c(`esri-deprecation-warnings`)&&Ar(e,`Module: ${t}`,n)}function Or(e,t,n={}){if(c(`esri-deprecation-warnings`)){let{moduleName:r}=n;Ar(e,`Function: ${(r?r+`::`:``)+t+`()`}`,n)}}function kr(e,t,n={}){if(c(`esri-deprecation-warnings`)){let{moduleName:r}=n;Ar(e,`Property: ${(r?r+`::`:``)+t}`,n)}}function Bee(e,t,n={}){c(`esri-deprecation-warnings`)&&Ar(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...n})}function Ar(e,t,n={}){if(c(`esri-deprecation-warnings`)){let{replacement:r,version:i,see:a,warnOnce:o}=n,s=t;if(r&&(s+=`\n\t Replacement: ${r}`),i&&(s+=`\n\t Version: ${i}`),a)if(Array.isArray(a)){s+=`
	 See for more details:`;for(let e of a)s+=`\n\t\t${e}`}else s+=`\n\t See ${a} for more details.`;Lee(e,s,o)}}function Vee(e){let t=[];return function*(){yield*t;let n,r=t.length;for(;!(n=e.next()).done;)for(t.push(n.value),yield n.value;++r<t.length;)yield t[r]}}var jr=Object.freeze({done:!0,value:void 0});function Hee(e){let t=[],n=null,r=null,i=!1;async function a(){if(i)return jr;if(r!=null)return r;r=e.next();try{let e=await r;return r=null,e.done?(i=!0,jr):(t.push(e.value),e)}catch(e){throw i=!0,r=null,n=e,e}}return async function*(){yield*t;let e,r=t.length;for(;!(e=await a()).done;)for(yield e.value;++r<t.length;)yield t[r];if(n!=null)throw n}}function Mr(e,t){for(let n of e)if(n!=null&&t(n))return n}function Nr(e){return e!=null&&typeof e[Symbol.iterator]==`function`}var Pr=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(Nr(e)){let n=this._getOrCreateGroup(t);for(let t of e)Lr(t)&&n.push(t)}else Lr(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if(typeof e==`function`)this._groups.forEach(t=>t.forEach(e));else{let n=this._getGroup(e);n&&t&&n.forEach(t)}}has(e){return this._groups.has(Fr(e))}remove(e){if(typeof e!=`string`&&Nr(e)){for(let t of e)this.remove(t);return this}return this.has(e)?(Ir(this._getGroup(e)),this._groups.delete(Fr(e)),this):this}removeAll(){return this._groups.forEach(Ir),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);let t=[];return this._groups.set(Fr(e),t),t}_getGroup(e){return this._groups.get(Fr(e))}};function Fr(e){return e||`_default_`}function Ir(e){for(let t of e)t instanceof Pr?t.removeAll():t.remove()}function Lr(e){return e!=null&&(!!e.remove||e instanceof Pr)}function Rr(e,t){if(e==null)throw Error(t??`value is None`)}function zr(e){return e?.destroy(),null}function Uee(e){return e?.dispose(),null}function Br(e){return e?.remove(),null}function Vr(e){return e?.abort(),null}function Wee(e){return e?.release(),null}function Hr(e,t,n){return e!=null&&t!=null?n==null?e.equals(t):n(e,t):e===t}function Gee(e,t){let n;return e.some((e,r)=>(n=t(e,r),n!=null)),n??void 0}function Kee(e){return e?.release&&typeof e.release==`function`}function qee(e){return e?.acquire&&typeof e.acquire==`function`}var Ur=class e{constructor(e,t,n,r=1,i=0){this._creator=e,this._acquireFunction=t,this._releaseFunction=n,this.allocationSize=r,this._pool=Array(i),this._initialSize=i;for(let e=0;e<i;e++)this._pool[e]=this._creator();this.allocationSize=Math.max(r,1)}destroy(){this.prune(0)}acquire(...t){let n;if(e.test.disabled)n=this._creator();else{if(this._pool.length===0){let e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=this._creator()}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...t):qee(n)&&n.acquire(...t),n}release(t){t&&!e.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Kee(t)&&t.release(),this._pool.push(t))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){let e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose==`function`&&e.dispose()}static{this.test={disabled:!!c(`esri-tests-disable-memory-pools`)}}},Wr=class{constructor(e,t){this._observers=e,this._observer=t}remove(){let{_observers:e,_observer:t}=this;if(e[e.length-1]===t)return void e.pop();let n=e.indexOf(this._observer);n!==-1&&e.splice(n,1)}},Gr=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Kr;this._observers??=[];let t=this._observers,n=!1,r=!1;for(let i of t)if(i.destroyed)r=!0;else if(i===e){n=!0;break}return n||(t.push(e),r&&this._removeDestroyedObservers()),new Wr(t,e)}_removeDestroyedObservers(){let e=this._observers;if(!e)return;let t=e.length;if(t===0)return;let n=0;for(let r=0;r<t;++r){for(;r+n<t&&e[r+n].destroyed;)++n;if(n>0){if(!(r+n<t))break;e[r]=e[r+n]}}e.length=t-n}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this._observers;if(e!=null){for(let t of e)t.onCommitted();this._observers=null}}},Kr=Yt(),qr=class extends Gr{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this.trackingTarget=new Dn(this),this.flags=0,this.flags=En.Dirty|(t.nonNullable?En.NonNullable:0)|(t.hasOwnProperty(`value`)?En.HasDefaultValue:0)|(t.get===void 0?En.DepTrackingInitialized:0)|(t.dependsOn===void 0?En.AutoTracked:0)}destroy(){this.flags&En.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e,t){e.mutable&&k(this);let n=e.store,r=this.propertyName,i=this.flags,a=n.get(r);if(i&En.Computing||!(i&En.Dirty)&&n.has(r))return a;let o;this.flags|=En.Computing;let{host:s}=e;i&En.AutoTracked?o=Nn(this.trackingTarget,t,s):(Ln(s,this),o=t.call(s)),this.flags|=En.DepTrackingInitialized,n.set(r,o,1);let c=n.get(r);return c===a?this.flags&=~En.Dirty:bee(this.commit,this),this.flags&=~En.Computing,c}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~En.Dirty,this.onCommitted()}onInvalidated(){~this.flags&En.Overridden&&(this.flags|=En.Dirty);let e=this._observers;if(e&&e.length>0)for(let t of e)t.onInvalidated()}onCommitted(){let e=this._observers;if(e&&e.length>0){let t=e.slice();for(let e of t)e.onCommitted()}}};function Jr(e){switch(e){case`defaults`:return 0;case`service`:return 2;case`portal-item`:return 3;case`web-scene`:return 4;case`web-map`:return 5;case`link-chart`:return 6;case`user`:return 7;default:return null}}function Yr(e){switch(e){case 0:return`defaults`;case 2:return`service`;case 3:return`portal-item`;case 4:return`web-scene`;case 5:return`web-map`;case 6:return`link-chart`;case 7:return`user`}}function Xr(e){return Yr(e)}var Zr=class e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){let n=new e;return this._values.forEach((e,r)=>{t&&t.has(r)||n.set(r,C(e))}),n}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,t){return this.has(e)}isBelowOrigin(e,t){return!this.has(e)}forEach(e){this._values.forEach(e)}};function Qr(e,t,n){return e!==void 0}function $r(e,t,n,r){return e!==void 0&&(!(n==null&&e.flags&En.NonNullable)||(r.lifecycle,Tn.INITIALIZING,!1))}var ei=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Tn.INITIALIZING,this.store=new Zr,this.mutable=!0,this._origin=7;let t=this.host.constructor.__accessorMetadata__;for(let e in t){let n=new qr(e,t[e]);this.propertiesByName.set(e,n)}this.metadata=t}initialize(){this.lifecycle=Tn.CONSTRUCTING}constructed(){this.lifecycle=Tn.CONSTRUCTED}destroy(){this.lifecycle=Tn.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Tn.INITIALIZING}get(e){let t=this.propertiesByName.get(e);if(!Qr(t))return;let n=t.metadata.get;if(n)return t.getComputed(this,n);this.mutable&&k(t);let r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){let t=this.store.originOf(e);if(t===void 0){let t=this.propertiesByName.get(e);if(t!==void 0&&t.flags&En.HasDefaultValue)return`defaults`}return Yr(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){let t=this.propertiesByName.get(e);if(Qr(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){let n=this.propertiesByName.get(e);Qr(n)&&this._internalSet(n,t)}getDependsInfo(e,t,n){let r=this.propertiesByName.get(t);if(!Qr(r))return``;let i=new Dn,a=Nn(i,()=>r.metadata.get?.call(e)),o=`${n}${e.declaredClass.split(`.`).pop()}.${t}: ${a}\n`,s=i.accessed??new Set;if(s.size===0)return o;n+=`  `;for(let e of s){if(!(e instanceof qr))continue;o+=`${n}${e.propertyName}: undefined\n`}return o}setAtOrigin(e,t,n){let r=this.propertiesByName.get(e);if(Qr(r))return this._setAtOrigin(r,t,n)}isOverridden(e){let t=this.propertiesByName.get(e);return t!==void 0&&!!(t.flags&En.Overridden)}clearOrigin(e,t){let n=this.store,r=this.propertiesByName.get(e);if(!Qr(r))return;let i=n.isAtOrigin(e,t)&&!(r.flags&En.Overridden);n.delete(e,t),i&&r.notifyChange()}clearOverride(e){let t=this.propertiesByName.get(e);t&&t.flags&En.Overridden&&(t.flags&=~En.Overridden,t.notifyChange())}override(e,t){let n=this.propertiesByName.get(e);if(!$r(n,e,t,this))return;let r=n.metadata.cast;if(r){let e=this._cast(r,t),{valid:n,value:i}=e;if(ni.release(e),!n)return;t=i}n.flags|=En.Overridden,this._internalSet(n,t)}set(e,t){let n=this.propertiesByName.get(e);if(!$r(n,e,t,this))return;let r=n.metadata.cast;if(r){let e=this._cast(r,t),{valid:n,value:i}=e;if(ni.release(e),!n)return;t=i}let i=n.metadata.set;i?i.call(this.host,t):this._internalSet(n,t)}setDefaultOrigin(e){this._origin=Jr(e)}getDefaultOrigin(){return Yr(this._origin)}notifyChange(e){this.propertiesByName.get(e)?.notifyChange()}invalidate(e){this.propertiesByName.get(e)?.invalidate()}commit(e){this.propertiesByName.get(e)?.commit()}_internalSet(e,t){let n=this.lifecycle===Tn.INITIALIZING?0:this._origin;this._setAtOrigin(e,t,n)}_setAtOrigin(e,t,n){let r=this.store,i=e.propertyName,a=r.isAtOrigin(i,n);if(a&&~e.flags&En.Overridden&&We(t,r.get(i)))return;let o=r.isBelowOrigin(i,n)||a;o&&e.invalidate(),r.set(i,t,n),o&&e.commit(),In(this.host,e)}_cast(e,t){let n=ni.acquire();return n.valid=!0,n.value=t,e&&(n.value=e.call(this.host,t,n)),n}},ti=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}},ni=new Ur(()=>new ti),ri;function ii(){return ri}function ai(e){e.length=0}var oi=class{constructor(e=50,t=50){this._pool=new Ur(()=>[],void 0,ai,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return si.acquire()}static release(e){return si.release(e)}static prune(){si.prune()}},si=new oi(100),ci=class extends Ur{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){let t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}},li=[];function ui(e){li.push(e),li.length===1&&queueMicrotask(()=>{let e=li.slice();li.length=0;for(let t of e)t()})}function di(e,t,n,r,i){console.timeStamp(e,t,n,i,r)}var fi=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=Array(t)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,t)=>e-t)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,t)=>e+t,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}},pi=(e,t,n,r)=>{let i=t,a=t,o=n>>>1,s=e[i-1];for(;a<=o;){a=i<<1,a<n&&r(e[a-1],e[a])<0&&++a;let t=e[a-1];if(r(t,s)<=0)break;e[i-1]=t,i=a}e[i-1]=s},mi=(e,t)=>e<t?-1:e>t?1:0;function Jee(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=e.length),r===void 0&&(r=mi);for(let i=n>>>1;i>t;i--)pi(e,i,n,r);let i=t+1;for(let a=n-1;a>t;a--){let n=e[t];e[t]=e[a],e[a]=n,pi(e,i,a,r)}}function*Yee(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=e.length),r===void 0&&(r=mi);for(let i=n>>>1;i>t;i--)pi(e,i,n,r),yield;let i=t+1;for(let a=n-1;a>t;a--){let n=e[t];e[t]=e[a],e[a]=n,pi(e,i,a,r),yield}}var Xee=1.5,Zee=1.1,hi=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new ie,e&&(e.initialSize&&(this.data=Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>gi(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){let t=[];for(let n=0;n<this._length;n++){let r=this.data[n];e(r)&&t.push(r)}return t}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,t){let n=this.data.indexOf(e,t);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let n=0;n<t;n++)this.data[this._length++]=e[n]}pushAll(e){for(let t of e)this.data[this._length++]=t}fill(e,t){for(let n=0;n<t;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));let e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,gi(this)}pop(){if(this.length===0)return;let e=this.data[this.length-1];return--this.length,this._shrink(),e}remove(e){let t=oe(this.data,f(e),this.length,this._hint);if(t!==-1)return this.data.splice(t,1),--this.length,e}removeUnordered(e){return this.removeUnorderedIndex(oe(this.data,f(e),this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,n){this.length=le(this.data,e,this.length,t,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,t){if(e>=this.length||t>=this.length||e===t)return;let n=this.data[e];this.data[e]=this.data[t],this.data[t]=n}sort(e){Jee(this.data,0,this.length,e)}iterableSort(e){return Yee(this.data,0,this.length,e)}some(e,t){for(let n=0;n<this.length;++n)if(e.call(t,this.data[n],n,this.data))return!0;return!1}find(e,t){let{data:n,length:r}=this;for(let i=0;i<r;++i)if(e.call(t,n[i]))return n[i]}filterInPlace(e,t){let n=0;for(let r=0;r<this._length;++r){let i=this.data[r];e.call(t,i,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=i,n++)}if(this._deallocator)for(let e=n;e<this._length;e++)this.data[e]=this._deallocator(this.data[e]);return this._length=n,this._shrink(),this}forAll(e,t){let{data:n,length:r}=this;for(let i=0;i<r;++i)e.call(t,n[i],i,n)}forEach(e,t){this.data.slice(0,this.length).forEach(e,t)}map(e,t){let n=Array(this.length);for(let r=0;r<this.length;++r)n[r]=e.call(t,this.data[r],r,this.data);return n}reduce(e,t){let n=t;for(let t=0;t<this.length;++t)n=e(n,this.data[t],t,this.data);return n}has(e){let t=this.length,n=this.data;for(let r=0;r<t;++r)if(n[r]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function gi(e){e.data.length>Xee*e.length&&(e.data.length=Math.floor(e.length*Zee))}function Qee(e){return{setTimeout:(t,n)=>{let r=e.setTimeout(t,n);return Yt(()=>e.clearTimeout(r))}}}var _i=Qee(globalThis);function vi(e){return $ee(e)||yi(e)}function $ee(e){return typeof e==`object`&&!!e&&`on`in e&&typeof e.on==`function`}function yi(e){return typeof e==`object`&&!!e&&`addEventListener`in e&&typeof e.addEventListener==`function`}function bi(e,t,n){if(!vi(e))throw TypeError(`target is not a Evented or EventTarget object`);return yi(e)?ete(e,t,n):e.on(t,n)}function ete(e,t,n,r){if(Array.isArray(t)){let i=t.slice();for(let t of i)e.addEventListener(t,n,r);return Yt(()=>{for(let t of i)e.removeEventListener(t,n,r)})}return e.addEventListener(t,n,r),Yt(()=>e.removeEventListener(t,n,r))}function xi(e,t,n){if(!vi(e))throw TypeError(`target is not a Evented or EventTarget object`);if(`once`in e)return e.once(t,n);let r=bi(e,t,t=>{r.remove(),n.call(e,t)});return r}function Si(e=`Aborted`){return new D(`AbortError`,e)}function Ci(e,t=`Aborted`){if(Ti(e))throw Si(t)}function wi(e){return e instanceof AbortSignal?e:e?.signal??void 0}function Ti(e){let t=wi(e);return t!=null&&t.aborted}function Ei(e){if(ji(e))throw e}function Di(e){if(!ji(e))throw e}function Oi(e,t){let n=wi(e);if(n!=null){if(!n.aborted)return xi(n,`abort`,()=>t());t()}}function ki(e,t){let n=wi(e);if(n!=null)return Ci(n),xi(n,`abort`,()=>t(Si()))}function Ai(e,t){return wi(t)==null?e:new Promise((n,r)=>{let i=Oi(t,()=>r(Si())),a=()=>{i=Br(i)};e.then(a,a),e.then(n,r)})}function ji(e){return e?.name===`AbortError`}async function Mi(e){try{return await e}catch(e){if(!ji(e))throw e;return}}async function Ni(e){if(!e)return;if(typeof e.forEach!=`function`){let t=Object.keys(e),n=t.map(t=>e[t]),r=await Ni(n),i={};return t.map((e,t)=>i[e]=r[t]),i}let t=e;return Promise.allSettled(t).then(e=>Array.from(t,(t,n)=>{let r=e[n];return r.status===`fulfilled`?{promise:t,value:r.value}:{promise:t,error:r.reason}}))}async function Pi(e){return(await Promise.allSettled(e)).filter(e=>e.status===`fulfilled`).map(e=>e.value)}async function tte(e){return(await Promise.allSettled(e)).filter(e=>e.status===`rejected`).map(e=>e.reason)}function Fi(e,t=void 0,n){let r=new AbortController;return Oi(n,()=>r.abort()),new Promise((n,i)=>{let a=setTimeout(()=>{a=0,n(t)},e);Oi(r,()=>{a&&(clearTimeout(a),i(Si()))})})}function nte(e,t,n,r){let i=n&&`abort`in n?n:null;r!=null||i||(r=n);let a=setTimeout(()=>{a=0,i?.abort()},t),o=()=>r||new D(`promiseUtils:timeout`,`The wrapped promise did not resolve within `+t+` ms`);return e.then(e=>{if(a===0)throw o();return clearTimeout(a),e},e=>{throw clearTimeout(a),a===0?o():e})}function rte(e,t){let n=new AbortController,r=setTimeout(()=>n.abort(),t);return Oi(e,()=>{n.abort(),clearTimeout(r)}),{...e,signal:n.signal}}function Ii(e){return e&&typeof e.then==`function`}function Li(e){return Ii(e)?e:Promise.resolve(e)}function Ri(e,t=-1){let n,r,i,a,o=null,s=(...c)=>{if(n){r=c,a&&a.reject(Si()),a=zi();let e=a.promise;if(o){let e=o;o=null,e.abort()}return e}if(i=a||zi(),a=null,t>0){let r=new AbortController;n=Li(e(...c,r.signal));let i=n;Fi(t).then(()=>{n===i&&(a?r.abort():o=r)})}else n=1,n=Li(e(...c));let l=()=>{let e=r;r=i=n=o=null,e!=null&&s(...e)},u=n,d=i;return u.then(l,l),u.then(d.resolve,d.reject),d.promise};return s}function zi(){let e,t,n=new Promise((n,r)=>{e=n,t=r}),r=t=>{e(t)};return r.resolve=t=>e(t),r.reject=e=>t(e),r.timeout=(e,t)=>_i.setTimeout(()=>r.reject(t),e),r.promise=n,r}function ite(e,t){t.then(e.resolve,e.reject)}async function Bi(e){await Promise.resolve(),Ci(e)}function Vi(e){return e}function Hi(e){return Vi(1e3*e)}function Ui(e){return e}function ate(e){return Ui(.001*e)}var ote=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},ste=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},Wi=0,Gi=0,Ki={time:Vi(0),deltaTime:Vi(0),elapsedFrameTime:Vi(0),frameDuration:Vi(0)},qi=[`prepare`,`preRender`,`render`,`postRender`,`update`,`finish`],Ji=[],Yi=new hi,cte=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Xi()}};function lte(){ea!=null&&(cancelAnimationFrame(ea),ea=requestAnimationFrame(ta))}function Xi(){ea??=(Wi=performance.now(),requestAnimationFrame(ta))}var Zi={frameTasks:Yi,willDispatch:!1,clearFrameTasks:ute,dispatch:ia,executeFrameTasks:dte,reschedule:lte};function Qi(e){let t=new ste(e);return Ji.push(t),Zi.willDispatch||(Zi.willDispatch=!0,ui(ia)),t}function $i(e){let t=new ote(e);return Yi.push(t),Xi(),new cte(t)}var ea=null;function ute(e=!1){Yi.forAll(e=>{e.removed=!0}),e&&ra()}function ta(){let e=performance.now();ea=null,ea=Yi.some(e=>!e.paused&&!e.removed)?requestAnimationFrame(ta):null,Zi.executeFrameTasks(e)}function dte(e){let t=Vi(e-Wi);Wi=e;let n=Gi>0?Gi:1e3/60,r=Math.max(0,t-n);Ki.time=e,Ki.frameDuration=Vi(n-r);for(let n=0;n<qi.length;n++){let r=performance.now(),i=qi[n];Yi.forAll(r=>{r.paused||r.removed||(n===0&&r.ticks++,r.phases[i]&&(Ki.elapsedFrameTime=Vi(performance.now()-e),Ki.deltaTime=r.ticks===0?Vi(0):t,r.phases[i]?.call(r,Ki)))});let a=performance.now();fte[n].push(a-r),di(i,r,a,`Maps SDK`,`Scheduling`)}ra();let i=performance.now();ca.push(i-e),di(`Animation Frame`,e,i,`Maps SDK`,`Scheduling`)}var na=new hi;function ra(){Yi.forAll(e=>{e.removed&&na.push(e)}),Yi.removeUnorderedMany(na.data,na.length),na.clear()}function ia(){for(;Ji.length;){let e=Ji.shift();e.isActive&&e.callback()}Zi.willDispatch=!1}function aa(e=1,t){let n=zi(),r=()=>{Ti(t)?n.reject(Si()):e===0?n():(--e,ui(()=>r()))};return r(),n.promise}function oa(e){return aa(1,e)}async function sa(e){await oa(e),await new Promise(t=>requestAnimationFrame(()=>{e?.aborted||t()}))}var fte=qi.map(e=>new fi(e)),ca=new fi(`total`);function la(e,t){for(let n of e.values())if(t(n))return!0;return!1}function ua(e,t){if(!t)return e;for(let n of t)n!=null&&e.add(n);return e}function da(e,t){return t!=null&&e.add(t),e}function fa(e,t){let n=new Set;return ua(n,e),ua(n,t),n}function pa(e,t){let n=new Set;for(let r of t)e.has(r)&&n.add(r);return n}function pte(e,t){if(!e||!t)return!1;if(e===t)return!0;for(let n of e)if(!t.has(n))return!1;return!0}function mte(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function ma(e,t){let n=new Set(e);for(let e of t)n.delete(e);return n}function hte(e,t){return ma(fa(e,t),pa(e,t))}var gte=0;function ha(){return++gte}var ga=class extends Dn{constructor(e){super(new _te(e)),this._observer&&_a.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&_a.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},_te=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;let e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=vte}},_a=new FinalizationRegistry(e=>{e.deref()?.destroy()});function vte(){}var va=!1,ya=[];function ba(e,t){let n=new ga(a),r=null,i=!1;function a(){if(!n||i)return;if(va)return void Ca(a);let o=r;n.clear(),va=!0,i=!0,r=Nn(n,e),i=!1,va=!1,t(r,o),wa()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=Nn(n,e),i=!1,Yt(o)}function xa(e,t){let n=new ga(i),r=null;function i(){t(r,o)}function a(){n&&=(n.destroy(),null),r=null}function o(){return n?(n.clear(),r=Nn(n,e),r):null}return o(),Yt(a)}function Sa(e,t){let n=!1,r=!1,i=!!t?.sync,a=new ga(()=>{n||r||(r=!0,i?o():queueMicrotask(o))});function o(){r=!1,a&&!n&&(va?Ca(o):(a.clear(),va=!0,n=!0,Nn(a,e),n=!1,va=!1,wa()))}function s(){a&&=(a.destroy(),null)}return n=!0,Nn(a,e),n=!1,Yt(s)}function Ca(e){ya.includes(e)||ya.unshift(e)}function wa(){for(;ya.length;)ya.pop()()}var Ta=class e{constructor(){this.uid=ha(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static{this.pool=new ci(()=>new e)}static acquireUntracked(e,t,n,r,i){return this.pool.acquire(0,e,t,n,r,i,We)}static acquireTracked(e,t,n,r){return this.pool.acquire(1,e,t,n,null,null,r)}notify(e,t){this.type===0?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,n,r,i,a,o){this.uid=ha(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=n,this.getValue=r,this.target=i,this.path=a,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=ha(),this.removed=!0}},Ea=new oi,Da=new Set,Oa;function ka(e){Da.delete(e),Da.add(e),Aa()}function Aa(){Oa||=Qi(Na)}function ja(e){if(e.removed)return;let t=e.oldValue,n=e.getValue();e.equals(t,n)||(e.oldValue=n,e.notify(n,t))}function Ma(e){for(let t of Da.values())t.target===e&&(t.removed=!0)}function Na(){let e=10;for(;Oa&&e--;){Oa=null;let e=Pa(),t=Ea.acquire();for(let n of e){let e=n.uid;ja(n),e===n.uid&&n.removed&&t.push(n)}for(let e of Da)e.removed&&(t.push(e),Da.delete(e));for(let e of t)Ta.pool.release(e);Ea.release(t),Ea.release(e),Fa.forEach(e=>e())}}function Pa(){let e=Ea.acquire();e.length=Da.size;let t=0;for(let n of Da)e[t]=n,++t;return Da.clear(),e}var Fa=new Set;function Ia(e){return Fa.add(e),Yt(()=>Fa.delete(e))}function La(e,t,n){let r=un(e,t,n,(e,t,n)=>{let i,a,o=xa(()=>pn(e,t),(o,s)=>{e.__accessor__?.lifecycle===Tn.DESTROYED||i&&i.uid!==a?r.remove():(i||(i=Ta.acquireUntracked(o,n,s,e,t),a=i.uid),ka(i))});return Yt(()=>{o.remove(),i&&=(i.uid!==a||i.removed||(i.removed=!0,ka(i)),null),r=o=null})});return r}function Ra(e,t,n){let r=un(e,t,n,(e,t,n)=>{let i=!1;return ba(()=>pn(e,t),(a,o)=>{e.__accessor__.lifecycle===Tn.DESTROYED?r.remove():i||=(i=!0,We(o,a)||n.call(e,a,o,t,e),!1)})});return r}function za(e,t,n,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Tn.DESTROYED?r?Ra(e,t,n):La(e,t,n):Yt()}function Ba(e,t,n){let r,i,a=xa(e,(e,o)=>{r&&r.uid!==i?a.remove():(r||(r=Ta.acquireTracked(e,t,o,n),i=r.uid),ka(r))});return Yt(()=>{a.remove(),r&&=(r.uid!==i||r.removed||(r.removed=!0,ka(r)),null),a=null})}function yte(e,t,n){let r=!1;return ba(e,(e,i)=>{r||=(r=!0,n(i,e)||t(e,i),!1)})}function bte(e,t,n=!1,r=Ge){return n?yte(e,t,r):Ba(e,t,r)}function Va(e){return la(Da,t=>t.oldValue===e)}var Ha,Ua;function xte(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case`object`:return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case`boolean`:return{type:Boolean,value:e};case`string`:return{type:String,value:e};case`number`:return{type:Number,value:e};case`function`:return{type:e,value:null};default:return}}var Wa=Symbol(`Accessor-Handles`),Ga=Symbol(`Accessor-Initialized`),F=class e{static{Ha=Wa,Ua=Ga}static createSubclass(e={}){if(Array.isArray(e))throw Error(`Multi-inheritance unsupported since 4.16`);let{properties:t,declaredClass:n,constructor:r}=e;delete e.declaredClass,delete e.properties,delete e.constructor;let i=this;class a extends i{constructor(...e){super(...e),this.inherited=null,r&&r.apply(this,e)}}for(let t in gn(a.prototype),e){let n=e[t];a.prototype[t]=typeof n==`function`?function(...e){let r=this.inherited,a;this.inherited=function(...e){if(i.prototype[t])return i.prototype[t].apply(this,e)};try{a=n.apply(this,e)}catch(e){throw this.inherited=r,e}return this.inherited=r,a}:e[t]}for(let e in t){let n=xte(t[e]);O(n)(a.prototype,e)}return hr(n)(a)}static freeze(t){return t instanceof e?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof e?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){if(this[Ha]=null,this[Ua]=!1,this.constructor===e)throw Error(`[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor`);let n=new ei(this);Object.defineProperty(this,`__accessor__`,{enumerable:!1,value:n}),t.length>0&&(n.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0]),ii()?.onInstanceConstruct(this)}postscript(){let e=this.__accessor__,t=e.ctorArgs;e.initialize(),t&&(this.set(t),e.ctorArgs=null),e.constructed(),this.initialize(),this[Ga]=!0}initialize(){}[wn](){this[Wa]=zr(this[Wa])}destroy(){this.destroyed||(Ma(this),this.__accessor__.destroy(),ii()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Ga]}get destroyed(){return this.__accessor__?.lifecycle===Tn.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===Tn.DESTROYING||!1}commitProperty(e){mn(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return vn(this,e,t),this}watch(e,t,n){return Or(E.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:`reactiveUtils.watch`,version:`4.32`,see:`https://arcg.is/1vaqf42#watch`,warnOnce:!0}),za(this,e,t,n)}addHandles(e,t){if(this.destroyed){let t=Array.isArray(e)?e:[e];for(let e of t)e.remove();return}(this[Wa]??=new Pr).add(e,t)}removeHandles(e){this[Wa]?.remove(e)}removeAllHandles(){this[Wa]?.removeAll()}removeHandlesReference(e){this[Wa]?.removeReference(e)}hasHandles(e){return!0===this[Wa]?.has(e)}_override(e,t){t===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){t==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}},Ste=Symbol(`ClonableMixin`),I=t=>{var n;let r=t,i=class extends r{constructor(){super(...arguments),this[n]=!0}static{n=Ste}clone(e){let t=an(this);Rr(t,`unable to clone instance of non-accessor class`);let n=t.metadata,r=t.store,i={},a=new Map;for(let t in n){let o=n[t],s=r?.originOf(t),c=o.clonable;if(o.readOnly||!1===c||s!==7&&s!==0&&s!==5&&s!==4)continue;let l=this[t],u=null;if(typeof c==`function`)u=c(l,e);else if(c===`reference`)u=l;else if(u=ze(l,e),l!=null&&u==null)continue;s===0?a.set(t,u):i[t]=u}let o=new(Object.getPrototypeOf(this)).constructor(i);if(a.size){let e=an(o)?.store;if(e)for(let[t,n]of a)e.set(t,n,0)}return o}};return i=e([hr(`esri.core.Clonable`)],i),i},Ka=I(F),qa=class extends Ka{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};e([N({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qa.prototype,`row`,void 0),e([N({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qa.prototype,`column`,void 0),e([N({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qa.prototype,`rows`,void 0),e([N({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],qa.prototype,`columns`,void 0),qa=e([P(`esri.CameraLayout`)],qa);var Ja=qa,Ya=new Float32Array(1);function Cte(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Xa(e,t,n){return Math.min(Math.max(e,t),n)}function wte(e){return!(e&e-1)}function Tte(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Za(e,t,n){return e+(t-e)*n}function Ete(e,t,n,r,i){return Za(r,i,(e-t)/(n-t))}function Qa(e){return e*Math.PI/180}function $a(e){return 180*e/Math.PI}function Dte(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function eo(e){return Math.acos(Xa(e,-1,1))}function to(e){return Math.asin(Xa(e,-1,1))}function no(e,t,n=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=n}function ro(e,t,n=1e-6){return!no(e,t,n)&&e>t}function io(e,t,n=1e-6){return!no(e,t,n)&&e<t}function ao(e,t,n=1e-6){return no(e,t,n)||e>t}var oo=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function so(e){return oo.setFloat64(0,e),oo.getBigInt64(0)}function co(e){return oo.setBigInt64(0,e),oo.getFloat64(0)}var lo=1000000n,uo=fo(1);function fo(e){let t=so(e=Math.abs(e)),n=co(t<=lo?lo:t-lo);return Math.abs(e-n)}function po(e,t,n=uo){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(n!=null&&fo(Math.min(Math.abs(e),Math.abs(t)))<n)return Math.abs(e-t)<=n;let r=so(e),i=so(t);return r<0==i<0?!((r<i?i-r:r-i)>lo):!1}function mo(e,t,n=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;let r=Math.abs(e-t),i=Math.abs(e),a=Math.abs(t);if(e===0||t===0||i<1e-12&&a<1e-12){if(r>.01*n)return!1}else if(r/(i+a)>n)return!1;return!0}function ho(e){return go(Math.max(-yo,Math.min(e,yo)))}function go(e){return Ya[0]=e,Ya[0]}function _o(e){let t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(no(t,1)&&no(n,1)&&no(r,1))}function vo(e,t){return(e%t+t)%t}var yo=go(34028234663852886e22);function bo(e,t,n){if(n===void 0||+n==0)return Math[e](t);if(t=+t,n=+n,isNaN(t)||typeof n!=`number`||n%1!=0)return NaN;let r=t.toString().split(`e`);return r=(t=Math[e](+(r[0]+`e`+(r[1]?+r[1]-n:-n)))).toString().split(`e`),+(r[0]+`e`+(r[1]?+r[1]+n:n))}var xo=class{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e,t=0,n=!1){return So(this.range,this.min,this.max,e,t,n)}clamp(e,t=0){return Xa(e-t,this.min,this.max)+t}monotonic(e,t,n){return e<t?t:t+Co(this.range,e-t,n)}minimalMonotonic(e,t,n){return So(this.range,e,e+this.range,t,n)}center(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}diff(e,t,n){return this.monotonic(e,t,n)-e}shortestSignedDiff(e,t){e=this.normalize(e);let n=(t=this.normalize(t))-e,r=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(r)?n:r}contains(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}};function So(e,t,n,r,i=0,a=!1){return(r-=i)<t?r+=Co(e,t-r):r>n&&(r-=Co(e,r-n)),a&&r===n&&(r=t),r+i}function Co(e,t,n=0){return Math.ceil((t-n)/e)*e+n}var Ote=new xo(0,2*Math.PI),kte=new xo(-Math.PI,Math.PI),wo=new xo(0,360),Ate=class e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){let n=new e;return this._values.forEach((e,r)=>{t&&t.has(r)||n.set(r,C(e.value),e.origin)}),n}get(e,t){t=this._normalizeOrigin(t);let n=this._values.get(e);return t==null||n?.origin===t?n?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);let t=[...this._values.keys()];return e==null?t:t.filter(t=>this._values.get(t)?.origin===e)}set(e,t,n){if((n=this._normalizeOrigin(n))===0){let t=this._values.get(e);if(t?.origin!=null&&t.origin>n)return}this._values.set(e,new jte(t,n))}delete(e,t){(t=this._normalizeOrigin(t))!=null&&this._values.get(e)?.origin!==t||this._values.delete(e)}has(e,t){return(t=this._normalizeOrigin(t))==null?this._values.has(e):this._values.get(e)?.origin===t}isAtOrigin(e,t){return t=this._normalizeOrigin(t),this.has(e,t)&&this.originOf(e)===t}isBelowOrigin(e,t){return t=this._normalizeOrigin(t),!this.has(e)||this.originOf(e)<t}forEach(e){this._values.forEach(({value:t},n)=>e(t,n))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},jte=class{constructor(e,t){this.value=e,this.origin=t}};function To(e,t,n){t.keys().forEach(e=>{n.set(e,t.get(e),0)});let r=e.metadata;Object.keys(r).forEach(t=>{e.internalGet(t)&&n.set(t,e.internalGet(t),0)})}function Mte(e,t,n){if(!e?.read||!1===e.read.enabled||!e.read.source)return!1;let r=e.read.source;if(typeof r==`string`){if(r===t||r.includes(`.`)&&r.startsWith(t)&&hn(r,n))return!0}else for(let e of r)if(e===t||e.includes(`.`)&&e.startsWith(t)&&hn(e,n))return!0;return!1}function Nte(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function Pte(e,t,n,r,i){let a=Vn(t[n],i);Nte(a)&&(e[n]=!0);for(let o of Object.getOwnPropertyNames(t))a=Vn(t[o],i),Mte(a,n,r)&&(e[o]=!0)}function Fte(e,t,n,r){let i=n.metadata,a=Cee(i[t],r),o=a?.default;if(o===void 0)return;let s=typeof o==`function`?o.call(e,t,r):o;s!==void 0&&n.set(t,s)}var Eo={origin:`service`};function Do(e,t,n=Eo){if(!t||typeof t!=`object`)return;let r=an(e),i=r.metadata,a={};for(let e of Object.getOwnPropertyNames(t))Pte(a,i,e,t,n);r.setDefaultOrigin(n.origin);for(let o of Object.getOwnPropertyNames(a)){let a=Vn(i[o],n).read,s=a?.source,c;c=s&&typeof s==`string`?pn(t,s):t[o],a?.reader&&(c=a.reader.call(e,c,t,n)),c!==void 0&&r.set(o,c)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin(`defaults`);for(let t of Object.getOwnPropertyNames(i))a[t]||Fte(e,t,r,n)}r.setDefaultOrigin(`user`)}function Oo(e,t,n,r=Eo){let i={...r,messages:[]};n(i),i.messages?.forEach(t=>{t.type!==`warning`||e.loaded?r?.messages&&r.messages.push(t):e.loadWarnings.push(t)})}function Ite(e,t,n,r,i){let a={};return t.write?.writer?.call(e,r,a,n,i),a}function ko(e,t,n,r,i,a){if(!r?.write)return!1;let o=mn(e,n);if(!i&&r.write.overridePolicy){let t=r.write.overridePolicy.call(e,o,n,a??void 0);t!==void 0&&(i=t)}if(i||=r.write,!i||!1===i.enabled||i.layerContainerTypes&&a?.layerContainerType&&!i.layerContainerTypes.includes(a.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){let t=new D(`web-document-write:property-required`,`Missing value for required property '${n}' on '${e.declaredClass}'`,{propertyName:n,target:e});return t&&a?.messages?a.messages.push(t):t&&!a&&E.getLogger(`esri.core.accessorSupport.write`).error(t.name,t.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(n)===0)&&Lte(e,n,a,r,o)||!i.ignoreOrigin&&a?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(n)<Jr(a.origin))}function Lte(e,t,n,r,i){let a=r.default;if(a===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof a==`function`){if(Array.isArray(i)){let r=a.call(e,t,n??void 0);return S(r,i)}return!1}return a===i}function Ao(e,t,n,r){let i=an(e),a=i.metadata,o=Hn(a[t],r);return!!o&&ko(e,i,t,o,n,r)}function jo(e,t,n){if(e&&typeof e.toJSON==`function`&&(!e.toJSON.isDefaultToJSON||!e.write))return on(t,e.toJSON(n));let r=an(e),i=r.metadata;for(let a in i){let o=Hn(i[a],n);if(!ko(e,r,a,o,void 0,n))continue;let s=mn(e,a),c=Ite(e,o,o.write&&typeof o.write.target==`string`?o.write.target:a,s,n);Object.keys(c).length>0&&(t=on(t,c),n?.resources?.pendingOperations?.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>on(t,c,()=>`replace-arrays`))),n?.writtenProperties&&n.writtenProperties.push({target:e,propName:a,oldOrigin:Xr(r.store.originOf(a)),newOrigin:n.origin}))}return t}var Mo=t=>{let n=t,r=class extends n{constructor(...e){super(...e);let t=an(this),n=t.store,r=new Ate;t.store=r,To(t,n,r)}read(e,t){Do(this,e,t)}write(e,t){return jo(this,e??{},t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return Rte.call(this,e,t)}};return r=e([hr(`esri.core.JSONSupport`)],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function Rte(e,t){if(!e)return null;if(e.declaredClass)throw Error(`JSON object is already hydrated`);let n=new this;return n.read(e,t),n}var L=Mo(F),No=class{constructor(e,t,n,r,i,a){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=n,this.atmosphereHeight=r,this.scaleHeight=i;let o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=a||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}},Po=new No(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Fo=new No(3396190,1/169.8944472236118,23e4,6e4,.111),Io=new No(1737400,0,0,0,0);function Lo(e){return e&&typeof e==`object`&&`toJSON`in e&&typeof e.toJSON==`function`}var zte=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Bte={devext:{customBaseUrl:`mapsdevext.arcgis.com`,portalHostname:`devext.arcgis.com`},qaext:{customBaseUrl:`mapsqa.arcgis.com`,portalHostname:`qaext.arcgis.com`},www:{customBaseUrl:`maps.arcgis.com`,portalHostname:`www.arcgis.com`}};function Ro(e){let t=e?.match(zte);if(!t)return null;let[,n,r,i]=t;if(!n)return null;let a=null,o=null,s=null,{devext:c,qaext:l,www:u}=Bte;if(r)if(a=n,i)switch(i.toLowerCase()){case`devext`:({customBaseUrl:o,portalHostname:s}=c);break;case`qa`:({customBaseUrl:o,portalHostname:s}=l);break;default:return null}else ({customBaseUrl:o,portalHostname:s}=u);else switch(n.toLowerCase()){case`devext`:({customBaseUrl:o,portalHostname:s}=c);break;case`qaext`:({customBaseUrl:o,portalHostname:s}=l);break;case`www`:({customBaseUrl:o,portalHostname:s}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:s,urlKey:a}}function zo(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Bo(e){let t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,`https://www.arcgis.com`):n.test(e)?e=e.replace(n,`https://devext.arcgis.com`):r.test(e)&&(e=e.replace(r,`https://qaext.arcgis.com`)),e}function Vo(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}function Vte(e){let t=new Uint8Array(e),n=``;for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}var Hte=()=>E.getLogger(`esri.core.urlUtils`),Ho=nt.request,Uo=`esri/config: esriConfig.request.proxyUrl is not set.`,Wo=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Go=/^\s*http:/i,Ute=/^\s*https:/i,Wte=/^\s*file:/i,Ko=/:\d+$/,Gte=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Kte=RegExp(`^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$`),qte=RegExp(`^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$`),qo=class{constructor(e=``){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(Kte);this.scheme=t[2]||(t[1]?``:null),this.authority=t[4]||(t[3]?``:null),this.path=t[5],this.query=t[7]||(t[6]?``:null),this.fragment=t[9]||(t[8]?``:null),this.authority!=null&&(t=this.authority.match(qte),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}},Jo={},Yo=new qo(nt.applicationUrl),Xo=Yte(),Zo=()=>Yo,Jte=()=>Xo;function Yte(){let e=Yo.path,t=e.slice(0,e.lastIndexOf(`/`)+1);return`${`${Yo.scheme}://${Yo.host}${Yo.port==null?``:`:${Yo.port}`}`}${t}`}function Qo(e){if(!e)return null;let t={path:null,query:null},n=new qo(e),r=e.indexOf(`?`);return n.query===null?t.path=e:(t.path=e.slice(0,r),t.query=$o(n.query)),n.fragment&&(t.hash=n.fragment,n.query===null&&(t.path=t.path.slice(0,t.path.length-(n.fragment.length+1)))),t}function $o(e){let t=e.split(`&`),n={};for(let e of t){if(!e)continue;let t=e.indexOf(`=`),r,i;t<0?(r=decodeURIComponent(e),i=``):(r=decodeURIComponent(e.slice(0,t)),i=decodeURIComponent(e.slice(t+1)));let a=n[r];typeof a==`string`&&(a=n[r]=[a]),Array.isArray(a)?a.push(i):n[r]=i}return n}function es(e,t){return e?t&&typeof t==`function`?Object.keys(e).map(n=>encodeURIComponent(n)+`=`+encodeURIComponent(t(n,e[n]))).join(`&`):Object.keys(e).map(n=>{let r=e[n];if(r==null)return``;let i=encodeURIComponent(n)+`=`,a=t?.[n];return a?i+encodeURIComponent(a(r)):Array.isArray(r)?r.map(e=>Lo(e)?i+encodeURIComponent(JSON.stringify(e)):i+encodeURIComponent(e)).join(`&`):Lo(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(e=>e).join(`&`):``}function ts(e=!1){let t,n=Ho.proxyUrl;if(typeof e==`string`){t=Ds(e);let r=ss(e);r&&(n=r.proxyUrl)}else t=!!e;if(!n)throw Hte().warn(Uo),new D(`urlUtils:proxy-not-set`,Uo);return t&&As()&&(n=Os(n)),Qo(n)}function Xte(e,t=!1){let n=ss(e),r,i;if(n){let e=rs(n.proxyUrl);r=e.path,i=e.query?$o(e.query):null}else if(t){let t=ts(e);r=t.path,i=t.query}if(r){let t=Qo(e);e=r+`?`+t.path;let n=es({...i,...t.query});n&&(e=`${e}?${n}`)}return e}var ns={path:``,query:``};function rs(e){let t=e.indexOf(`?`);return t===-1?(ns.path=e,ns.query=null):(ns.path=e.slice(0,t),ns.query=e.slice(t+1)),ns}function os(e){return e=(e=js(e=Fs(e=rs(e).path),!0)).toLowerCase()}function Zte(e){let t={proxyUrl:e.proxyUrl,urlPrefix:os(e.urlPrefix)},n=Ho.proxyRules,r=t.urlPrefix,i=n.length;for(let e=0;e<n.length;e++){let t=n[e].urlPrefix;if(r.startsWith(t)){if(r.length===t.length)return-1;i=e;break}t.startsWith(r)&&(i=e+1)}return n.splice(i,0,t),i}function ss(e){let t=Ho.proxyRules,n=os(e);for(let e=0;e<t.length;e++)if(n.startsWith(t[e].urlPrefix))return t[e]}function cs(e,t){if(!e||!t)return!1;e=us(e),t=us(t);let n=Ro(e),r=Ro(t);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&fs(e,t,!0)}function ls(e,t){return e=us(e),t=us(t),js(e)===js(t)}function us(e){let t=(e=gs(e)).indexOf(`/sharing`);return t>0?e.slice(0,t):e.replace(/\/+$/,``)}function ds(e,t=Ho.interceptors){let n=t=>t instanceof RegExp?t.test(e):typeof t==`string`?e.startsWith(t):t==null;if(t){for(let e of t)if(Array.isArray(e.urls)){if(e.urls.some(n))return e}else if(n(e.urls))return e}return null}function fs(e,t,n=!1){if(!e||!t)return!1;let r=Us(e),i=Us(t);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function ps(e){if(typeof e==`string`){if(!ys(e))return!0;e=Us(e)}if(fs(e,Yo))return!0;let t=Ho.trustedServers||[];for(let n=0;n<t.length;n++){let r=Qte(t[n]);for(let t=0;t<r.length;t++)if(fs(e,r[t]))return!0}return!1}function Qte(e){return Jo[e]||(Es(e)||Ts(e)?Jo[e]=[new qo(ms(e))]:Jo[e]=[new qo(`http://${e}`),new qo(`https://${e}`)]),Jo[e]}function ms(e,t=Xo,n){return Ts(e)?n?.preserveProtocolRelative?e:Yo.scheme===`http`&&Yo.authority===vs(e).slice(2)?`http:${e}`:`https:${e}`:Es(e)?e:_s(e.startsWith(`/`)?Ms(t):t,e)}function hs(e,t=Xo,n){if(e==null||!ys(e))return e;let r=gs(e),i=r.toLowerCase(),a=gs(t).toLowerCase().replace(/\/+$/,``),o=n?gs(n).toLowerCase().replace(/\/+$/,``):null;if(o&&!a.startsWith(o))return e;let s=(e,t,n)=>(n=e.indexOf(t,n))===-1?e.length:n,c=s(i,`/`,i.indexOf(`//`)+2),l=-1;for(;i.slice(0,c+1)===a.slice(0,c)+`/`&&(l=c+1,c!==i.length);)c=s(i,`/`,c+1);if(l===-1||o&&l<o.length)return e;e=r.slice(l);let u=a.slice(l-1).replaceAll(/[^/]+/g,``).length;if(u>0)for(let t=0;t<u;t++)e=`../${e}`;else e=`./${e}`;return e}function gs(e){return e=zs(e=Rs(e=Ls(e=ms(e=e.trim()))))}function _s(...e){let t=e.filter(ge);if(!t?.length)return;let n=[];if(ys(t[0])){let e=t[0],r=e.indexOf(`//`);r!==-1&&(n.push(e.slice(0,r+1)),ine(t[0])&&(n[0]+=`/`),t[0]=e.slice(r+2))}else t[0].startsWith(`/`)&&n.push(``);let r=t.reduce((e,t)=>t?e.concat(t.split(`/`)):e,[]);for(let e=0;e<r.length;e++){let t=r[e];t===`..`&&n.length>0&&n[n.length-1]!==`..`?n.pop():(!t&&e===r.length-1||t&&(t!==`.`||n.length===0))&&n.push(t)}return n.join(`/`)}function vs(e,t=!1){if(e==null||bs(e)||xs(e))return null;let n=e.indexOf(`://`);if(n===-1&&Ts(e))n=2;else{if(n===-1)return null;n+=3}let r=e.indexOf(`/`,n);return r!==-1&&(e=e.slice(0,r)),t&&(e=js(e,!0)),e}function ys(e){return Ts(e)||Es(e)}function bs(e){return e!=null&&e.startsWith(`blob:`)}function xs(e){return e!=null&&e.startsWith(`data:`)}function Ss(e){let t=Cs(e);return t?.isBase64?Vo(t.data):null}function $te(e){return Vte(e).replaceAll(`+`,`-`).replaceAll(`/`,`_`).replace(/=+$/,``)}var ene=/^data:(.*?)(;base64)?,(.*)$/;function Cs(e){let t=e.match(ene);if(!t)return null;let[,n,r,i]=t;return{mediaType:n,isBase64:!!r,data:i}}function ws(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function tne(e){return(await fetch(e)).blob()}function nne(e){let t=Ss(e);if(!t)return null;let n=Cs(e);return new Blob([t],{type:n.mediaType})}function Ts(e){return e!=null&&e.startsWith(`/`)&&e[1]===`/`}function Es(e){return e!=null&&Wo.test(e)}function Ds(e){return e!=null&&Ute.test(e)||Yo.scheme===`https`&&Ts(e)}function rne(e){return e!=null&&Go.test(e)||Yo.scheme===`http`&&Ts(e)}function ine(e){return e!=null&&Wte.test(e)}function Os(e){return Ts(e)?`https:${e}`:e.replace(Go,`https:`)}function ks(){return Yo.scheme===`http`}function As(){return Yo.scheme===`https`}function js(e,t=!1){return Ts(e)?e.slice(2):(e=e.replace(Wo,``),t&&e.length>1&&e.startsWith(`/`)&&e[1]===`/`&&(e=e.slice(2)),e)}function Ms(e){let t=e.indexOf(`//`),n=e.indexOf(`/`,t+2);return n===-1?e:e.slice(0,n)}function Ns(e){let t=0;if(ys(e)){let n=e.indexOf(`//`);n!==-1&&(t=n+2)}let n=e.lastIndexOf(`/`);return n<t?e:e.slice(0,n+1)}function Ps(e,t){if(!e)return``;let n=Qo(e).path.replace(/\/+$/,``),r=n.slice(n.lastIndexOf(`/`)+1);if(!t?.length)return r;let i=RegExp(`\\.(${t.join(`|`)})$`,`i`);return r.replace(i,``)}function Fs(e){return e.endsWith(`/`)?e:`${e}/`}function Is(e){return e.replace(/\/+$/,``)}function Ls(e){if(/^https?:\/\//i.test(e)){let t=rs(e);e=(e=t.path.replaceAll(/\/{2,}/g,`/`)).replace(`/`,`//`),t.query&&(e+=`?${t.query}`)}return e}function Rs(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,`$1www.$2`)}function zs(e){let t=Ho.httpsDomains;if(!rne(e))return e;let n=e.indexOf(`/`,7),r;if(r=n===-1?e:e.slice(0,n),r=r.toLowerCase().slice(7),Ko.test(r)){if(!r.endsWith(`:80`))return e;r=r.slice(0,-3),e=e.replace(`:80`,``)}return ks()&&r===Yo.authority&&!Gte.test(e)||(As()&&r===Yo.authority||t&&t.some(e=>r===e||r.endsWith(`.${e}`))||As()&&!ss(e))&&(e=Os(e)),e}function Bs(e,t,n){if(!(t&&n&&e&&ys(e)))return e;let r=e.indexOf(`//`),i=e.indexOf(`/`,r+2),a=e.indexOf(`:`,r+2),o=Math.min(i<0?e.length:i,a<0?e.length:a);return e.slice(r+2,o).toLowerCase()===t.toLowerCase()?`${e.slice(0,r+2)}${n}${e.slice(o)}`:e}function Vs(e,t){let n=new URL(e);return n.host=t,n.port&&!Ko.test(t)&&(n.port=``),n.toString()}function Hs(e){return new URL(e).host}function Us(e){return typeof e==`string`?new qo(ms(e)):(e.scheme||=Yo.scheme,e)}function Ws(e){return Qs.test(e)}function Gs(e,t){let n=Qo(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn(`removeQueryParameters()`,`Url query parameters are not supported, the following parameters have been removed: ${r.join(`, `)}.`),n.path}function Ks(e,t,n){let r=Qo(e),i=r.query||{};return i[t]=String(n),`${r.path}?${es(i)}`}function qs(e,t){if(!t)return e;let n=Qo(e),r=n.query||{};for(let[e,n]of Object.entries(t))n!=null&&(r[e]=n);let i=es(r);return i?`${n.path}?${i}`:n.path}function Js(e){if(e==null)return null;let t=e.match(Zs);return t?t[2]:null}function Ys(e){if(e==null)return null;let t=e.match(Zs);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Xs(e){return typeof e==`string`?Cs(e)??{data:e}:new Promise((t,n)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(Cs(r.result)),r.onerror=e=>n(e)})}var Zs=/([^.]*)\.([^/]*)$/,Qs=/(^data:image\/svg|\.svg$)/i,$s={corsServers:[`https://server.arcgisonline.com`,`https://services.arcgisonline.com`],beforeFetch:void 0,afterFetch:void 0,isForeignWorker:!1},ec=`20251209`,tc=`90833d9808d3405ec491eee306a0e6fbf1c25e4c`;Symbol.dispose??=Symbol(`Symbol.dispose`),Symbol.asyncDispose??=Symbol(`Symbol.asyncDispose`);var nc=`5.0`,rc,ic=`5.0`;function ac(e){rc=e}function oc(e){let t=rc?.findCredential(e);return t?.token?Ks(e,`token`,t.token):e}ic=`5.0.0-next.57`,c(`host-webworker`)||globalThis.$arcgis||Object.defineProperty(globalThis,`$arcgis`,{configurable:!1,enumerable:!0,writable:!1,value:{}}),c(`host-webworker`);function sc(e){nt.request.crossOriginNoCorsDomains||(nt.request.crossOriginNoCorsDomains={});let t=nt.request.crossOriginNoCorsDomains;for(let n of e)n=n.toLowerCase(),/^https?:\/\//.test(n)?t[vs(n)??``]=0:(t[vs(`http://`+n)??``]=0,t[vs(`https://`+n)??``]=0)}function cc(e){let t=nt.request.crossOriginNoCorsDomains;if(t){let n=vs(e);if(n)return n=n.toLowerCase(),!fs(n,Zo())&&t[n]<Date.now()-36e5}return!1}async function lc(e){let t=Qo(e);e=t.path,t.query?.f===`json`&&(e+=`?f=json`);try{await fetch(e,{mode:`no-cors`,credentials:`include`})}catch{}let n=nt.request.crossOriginNoCorsDomains,r=vs(e);n&&r&&(n[r.toLowerCase()]=Date.now())}var uc=class{constructor(e,t){this.element=e,this.type=`image+type`,this.isOpaque=t===`image/jpeg`}};function dc(e){if(e.byteLength<2)return`unknown`;let t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?`image/png`:t[0]===71&&t[1]===73?`image/gif`:t[0]===66&&t[1]===77?`image/bmp`:t[0]===255&&t[1]===216?`image/jpeg`:`unknown`}function fc(e,t,n=!1,r){return new Promise((i,a)=>{if(Ti(r))return void a(Si());let o=()=>{l(),a(Error(`Unable to load ${t}`))},s=async()=>{let t=e;try{await t.decode()}catch{}l(),i(t)},c=()=>{if(!e)return;let t=e;l(),t.src=``,a(Si())},l=()=>{e&&(e.removeEventListener(`error`,o),e.removeEventListener(`load`,s),o=null,s=null,e=null,r?.removeEventListener(`abort`,c),c=null,n&&URL.revokeObjectURL(t))};r?.addEventListener(`abort`,c),e.addEventListener(`error`,o),e.addEventListener(`load`,s)})}function pc(e,t){let n=t?.url?.path;if(e&&n&&(e=ms(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){let n=hs(e,t.portalItem.itemUrl);n!=null&&n.startsWith(ane)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=xc(e,t?.portal))&&_c.test(e)?Sc(e):e}function mc(e,t,n=0){if((e=e&&_c.test(e)?Cc(e):e)==null)return e;!ys(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=ms(e);if(t){let n=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(n){let i=xc(n,t.portal),a=xc(r,t.portal);r=hs(a,i,i),r!=null&&r!==a&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=bc(r,t?.portal),ys(r)&&(r=gs(r)),t?.resources&&t?.portalItem&&!ys(r)&&!xs(r)&&n===0&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function hc(e,t,n){return pc(e,n)}function gc(e,t,n,r){let i=mc(e,r);i!==void 0&&(t[n]=i)}var _c=/\/items\/([^/]+)\/resources\/(.*)/,ane=`./resources/`;function vc(e){return(e?.match(_c)??null)?.[1]??null}function yc(e){let t=e?.match(_c)??null;if(t==null)return null;let n=t[2],r=n.lastIndexOf(`/`);if(r===-1){let{path:e,extension:t}=Ys(n);return{prefix:null,filename:e,extension:t}}let{path:i,extension:a}=Ys(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:a}}function bc(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Bs(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function xc(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;let n=`${t.urlKey}.${t.customBaseUrl}`,r=Zo();return fs(r,`${r.scheme}://${n}`)?Bs(e,t.portalHostname,n):Bs(e,n,t.portalHostname)}function Sc(e){if(!e)return e||null;let t=e;return t&&rc&&!rc.findCredential(t)&&(t=Bo(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,`https://cdn.arcgis.com`),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,`https://cdndev.arcgis.com`),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,`https://cdnqa.arcgis.com`)),t}function Cc(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,`https://www.arcgis.com`),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,`https://devext.arcgis.com`),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,`https://qaext.arcgis.com`),t&&rc&&!rc.findCredential(t)&&(t=Bo(t)),t}var one=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:bc,fromCDNUrl:Cc,fromJSON:pc,itemIdFromResourceUrl:vc,prefixAndFilenameFromResourceUrl:yc,read:hc,toCDNUrl:Sc,toJSON:mc,write:gc},Symbol.toStringTag,{value:`Module`})),wc={mapserver:`MapServer`,imageserver:`ImageServer`,featureserver:`FeatureServer`,knowledgegraphserver:`KnowledgeGraphServer`,sceneserver:`SceneServer`,streamserver:`StreamServer`,vectortileserver:`VectorTileServer`,"3dtilesserver":`3DTilesServer`,videoserver:`VideoServer`},Tc=Object.values(wc),Ec=RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Tc.join(`|`)}))(?:\\/(?:layers\\/)?(\\d+))?`,`i`),sne=RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Tc.join(`|`)}))(?:\\/(?:layers\\/)?(\\d+))?`,`i`),cne=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function lne(e){return Ec.test(e)}function Dc(e){if(e==null)return null;let t=Qo(e),n=t?.path.match(Ec)||t?.path.match(sne);if(!n)return null;let[,r,i,a,o]=n,s=i.indexOf(`/`);return{title:kc(s===-1?i:i.slice(s+1)),serverType:wc[a.toLowerCase()],sublayer:o!=null&&o!==``?parseInt(o,10):null,url:{path:r}}}function Oc(e){let t=Qo(e).path.match(cne);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function kc(e){return(e=e.replaceAll(/\s*[/_]+\s*/g,` `))[0].toUpperCase()+e.slice(1)}function Ac(e,t){let n=[];if(e){let t=Dc(e);t!=null&&t.title&&n.push(t.title)}if(t){let e=kc(t);n.push(e)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(` - `)}var une=[`services`,`features`,`tiles`,`elevation3d`,`basemaps3d`];function jc(e){let t=vs(e,!0);return!!t&&(t=t.toLowerCase(),!!t.endsWith(`.arcgis.com`)&&(!!une.some(e=>t.startsWith(e))||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(t)))}function Mc(e,t){return e&&Is(Gs(e,t))}function dne(e){let{url:t}=e;if(!t)return{url:t};t=Gs(t,e.logger);let n=Qo(t),r=Dc(n.path),i;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(i=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){let e=Oc(n.path);e!=null&&(t=e.serviceUrl,i=e.sublayerId)}return{url:Is(t),layerId:i}}function fne(e,t,n,r,i){gc(t,r,`url`,i),r.url&&e.layerId!=null&&(r.url=_s(r.url,n,e.layerId.toString()))}function pne(e){if(!e)return!1;let t=e.toLowerCase(),n=t.includes(`/services/`),r=t.includes(`/mapserver/wmsserver`),i=t.includes(`/imageserver/wmsserver`),a=t.includes(`/wmsserver`);return n&&(r||i||a)}function mne(e){if(!e)return!1;let t=new qo(ms(e)),n=t.authority?.toLowerCase();return n===`server.arcgisonline.com`||n===`services.arcgisonline.com`}var Nc=new Map;function hne(e,t){let n=t?.preferredHost;if(!n||fs(e,`https://${n}`,!0))return;let r=Dc(e);if(!r||r.serverType!==`FeatureServer`||zo(e))return;let i=r.url.path.toLowerCase();Nc.has(i)||Nc.set(i,n)}function Pc(e){let t=Dc(e)?.url.path.toLowerCase();if(!t)return e;let n=Nc.get(t);return n?Vs(e,n):e}var gne=new Set([`elevation3d.arcgis.com`,`js.arcgis.com`,`jsdev.arcgis.com`,`jsqa.arcgis.com`,`static.arcgis.com`]);function Fc(e){if(!Lc(e))return null;let t=t=>t instanceof RegExp?t.test(e):typeof t==`string`&&e.startsWith(t),n=nt.apiKeys;if(Array.isArray(n.scopes)){for(let e of n.scopes)if(Array.isArray(e.urls)){if(e.urls.some(t))return e.token}else if(t(e.urls))return e.token}return n.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(e)?n.basemapStyles:nt.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(e)?nt.apiKey:null}function Ic(){return nt.apiKey!=null||nt.apiKeys.basemapStyles!=null}function _ne(e,t){return t?Lc(e):Fc(e)!=null}function Lc(e){let t=vs(e,!0);return!!t&&!gne.has(t)&&!e.endsWith(`/sharing/rest/generateToken`)}var vne=`modulepreload`,yne=function(e){return`/map-test/dist/`+e},Rc={};const R=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=yne(t,n),t in Rc)return;Rc[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:vne,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[]){if(e.status!==`rejected`)continue;i(e.reason)}return e().catch(i)})};var zc=`FormData`in globalThis,bne=new Set([499,498,403,401]),xne=new Set([`COM_0056`,`COM_0057`,`SB_0008`]),Sne=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i];async function Bc(e){let t,n;await Cne(e);try{do[t,n]=await Vc(e);while(!await Ene(e,t,n))}catch(n){let r=qc(`request:server`,n,e.parameters,t);throw r.details.ssl=e.useSSL,e.interceptor?.error?.(r),r}let r=e.parameters.url;if(n)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&n.user?.username&&!ps(r)){let e=vs(r,!0);e&&nt.request.trustedServers.push(e)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&sc(n.authorizedCrossOriginNoCorsDomains)}else (e.parameters.requestOptions.responseType||`json`)===`json`&&hne(r,n);let i=e.credential;if(i&&rc){let e=rc.findServerInfo(i.server)?.owningSystemUrl;if(e){e=e.replace(/\/?$/,`/sharing`);let t=rc.findCredential(e,i.userId);t&&rc._getIdenticalSvcIdx(e,t)===-1&&t.resources.unshift(e)}}return{data:n,getAllHeaders:t?()=>Array.from(t.headers):Yc,getHeader:t?e=>t.headers.get(e):Yc,httpStatus:t?.status??200,requestOptions:e.parameters.requestOptions,ssl:e.useSSL,url:e.parameters.url}}async function Cne(e){let t=e.parameters.url,n=e.parameters.requestOptions,r=e.controller.signal,i=n.body,a=null,o=null;if(zc&&`HTMLFormElement`in globalThis&&(i instanceof FormData?a=i:i instanceof HTMLFormElement&&(a=new FormData(i))),typeof i==`string`&&(o=i),e.fetchOptions={cache:n.cacheBust?`no-cache`:`default`,credentials:`same-origin`,headers:n.headers||{},keepalive:n.keepAlive??!1,method:n.method===`head`?`HEAD`:`GET`,mode:`cors`,priority:n.priority??nt.request.priority,redirect:`follow`,signal:r},(a||o)&&(e.fetchOptions.body=a||o),($s.isForeignWorker||n.authMode===`anonymous`)&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||n.query?.token||a?.get(`token`)),!e.hasToken){let r=Fc(t);r&&(n.query??={},n.query.token=r,e.hasToken=!0)}if(e.useIdentity&&!e.hasToken&&!e.credential&&!e.credentialToken&&!Gc(t)&&!Ti(r)){let i;n.authMode===`immediate`?(await Wc(),i=await rc.getCredential(t,{signal:r})):n.authMode===`no-prompt`?(await Wc(),i=await rc.getCredential(t,{prompt:!1,signal:r}).catch(()=>{})):rc&&(i=rc.findCredential(t)),i&&(e.credential=i,e.credentialToken=i.token,e.useSSL=!!i.ssl)}}async function Vc(e){let t=e.parameters.url,n=Pc(t),r=e.parameters.requestOptions,i=e.fetchOptions??{},a=bs(t)||xs(t),o=r.responseType??`json`,s=o===`image`&&r.imageWithType,l=a?0:r.timeout==null?nt.request.timeout:r.timeout,u=!1;if(!a){e.useSSL&&(t=Os(t));let a={...r.query};e.credentialToken&&(a.token=e.credentialToken);let o=es(a);c(`esri-url-encodes-apostrophe`)&&(o=o.replaceAll(`'`,`%27`));let s=n.length+1+o.length,l;u=r.method===`delete`||r.method===`post`||r.method===`put`||!!r.body||s>nt.request.maxUrlLength;let d=r.useProxy||!!ss(t);if(d){let e=ts(t);l=e.path,!u&&l.length+1+s>nt.request.maxUrlLength&&(u=!0),e.query&&(a={...e.query,...a})}if(i.method===`HEAD`&&(u||d)){if(u)throw s>nt.request.maxUrlLength?qc(`request:invalid-parameters`,Error(`URL exceeds maximum length`),e.parameters):qc(`request:invalid-parameters`,Error(`cannot use POST request when method is 'head'`),e.parameters);if(d)throw qc(`request:invalid-parameters`,Error(`cannot use proxy when method is 'head'`),e.parameters)}u?(i.method=r.method===`delete`?`DELETE`:r.method===`put`?`PUT`:`POST`,r.body?t=qs(t,a):(i.body=es(a),i.headers||={},i.headers[`Content-Type`]=`application/x-www-form-urlencoded`)):t=qs(t,a),d&&(e.useProxy=!0,t=`${l}?${t}`),a.token&&zc&&i.body instanceof FormData&&!zo(t)&&i.body.set(`token`,a.token),r.hasOwnProperty(`withCredentials`)?e.withCredentials=r.withCredentials:fs(t,Zo())||(ps(t)||rc&&rc.findServerInfo(t)?.webTierAuth)&&(e.withCredentials=!0),e.withCredentials&&(i.credentials=`include`,cc(t)&&await lc(u?qs(t,a):t)),n=Pc(t)}let d,f,p=0,m=!1;l>0&&(p=setTimeout(()=>{m=!0,e.controller.abort()},l));try{if(r.responseType===`native-request-init`)f=i,f.url=n,r.signal?f.signal=r.signal:delete f.signal;else if(r.responseType!==`image`||i.cache!==`default`||i.keepalive||i.method!==`GET`||u||Tne(r.headers)||!a&&!e.useProxy&&nt.request.proxyUrl&&!Uc(t)){if(await $s.beforeFetch?.(t,i),d=await fetch(n,i),await $s.afterFetch?.(d),e.useProxy||wne(t),r.responseType===`native`)f=d;else if(i.method!==`HEAD`)if(d.ok){switch(o){case`array-buffer`:f=await d.arrayBuffer();break;case`blob`:f=await d.blob();break;case`image`:f=await(s?d.arrayBuffer():d.blob());break;default:f=await d.text()}if(p&&=(clearTimeout(p),0),o===`json`||o===`xml`||o===`document`)if(f)switch(o){case`json`:f=JSON.parse(f);break;case`xml`:f=Kc(f,`application/xml`);break;case`document`:f=Kc(f,`text/html`)}else f=null;if(f){if(o===`array-buffer`||o===`blob`){let e=d.headers.get(`Content-Type`);if(e&&/application\/json|text\/plain/i.test(e)&&f[o===`blob`?`size`:`byteLength`]<=750)try{let e=await new Response(f).json();e.error&&(f=e)}catch{}}if(s&&f instanceof ArrayBuffer){let t=dc(f);if(t===`unknown`)return r.responseType=`image`,await Vc(e);f=await d.blob(),f=await Hc(URL.createObjectURL(f),e,!0),f=new uc(f,t)}o===`image`&&f instanceof Blob&&(f=await Hc(URL.createObjectURL(f),e,!0))}}else{f=await d.text();try{f=JSON.parse(f)}catch{}}}else f=await Hc(n,e)}catch(n){if(n.name===`AbortError`)throw m?Dne():Si(`Request canceled`);if(!(!d&&n instanceof TypeError&&nt.request.proxyUrl)||r.body||r.method===`delete`||r.method===`head`||r.method===`post`||r.method===`put`||e.useProxy||Uc(t))throw n;e.redoRequest=!0,Zte({proxyUrl:nt.request.proxyUrl,urlPrefix:vs(t)??``})}finally{p&&clearTimeout(p)}return[d,f]}function Hc(e,t,n=!1){let r=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin=`use-credentials`:i.crossOrigin=`anonymous`,i.alt=``,i.fetchPriority=nt.request.priority,i.src=e,fc(i,e,n,r)}function wne(e){let t=vs(e);t&&!$s.corsServers.includes(t)&&$s.corsServers.push(t)}function Uc(e){let t=vs(e);return!t||t.endsWith(`.arcgis.com`)||$s.corsServers.includes(t)||ps(t)}async function Wc(){rc||await R(()=>import(`./IdentityManager-BfkQwmP4.js`),[])}function Gc(e){return Sne.some(t=>t.test(e))}function Tne(e){if(e){for(let t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function Kc(e,t){let n;try{n=new DOMParser().parseFromString(e,t)}catch{}if(!n||n.getElementsByTagName(`parsererror`).length)throw SyntaxError(`XML Parse error`);return n}async function Ene(e,t,n){if(e.redoRequest)return e.redoRequest=!1,!1;let r=e.parameters.requestOptions;if(!t||r.responseType===`native`||r.responseType===`native-request-init`)return!0;let i,a;if(n&&(n.error&&typeof n.error==`object`?i=n.error:n.status===`error`&&Array.isArray(n.messages)&&(i={...n},i[Jc]=n,i.details=n.messages)),!i&&!t.ok)throw i=Error(`Unable to load ${t.url} status: ${t.status}`),i[Jc]=n,i;let o,s=null;i&&(a=Number(i.code),s=i.hasOwnProperty(`subcode`)?Number(i.subcode):null,o=i.messageCode,o=o?.toUpperCase());let c=r.authMode;if(a===403&&(s===4||i.message?.toLowerCase().includes(`ssl`)&&!i.message.toLowerCase().includes(`permission`))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(c!==`no-prompt`||a===498)&&a!==void 0&&bne.has(a)&&!Gc(e.parameters.url)&&(a!==403||(!o||!xne.has(o))&&(s==null||s===2&&e.credentialToken))){await Wc();try{let t=await rc.getCredential(e.parameters.url,{error:qc(`request:server`,i,e.parameters),credential:e.credential,prompt:c!==`no-prompt`,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if(c===`no-prompt`)return e.credential=void 0,e.credentialToken=void 0,!1;i=t}}if(i)throw i;return!0}function qc(e,t,n,r){let i,a={url:n.url,requestOptions:n.requestOptions,getAllHeaders:Yc,getHeader:Yc,ssl:!1};if(t instanceof D)return t.details?(t.details=C(t.details),t.details.url=n.url,t.details.requestOptions=n.requestOptions):t.details=a,t;if(t){let e=r&&(()=>Array.from(r.headers)),n=r&&(e=>r.headers.get(e)),o=r?.status,s=t.message;s&&(i=s),e&&n&&(a.getAllHeaders=e,a.getHeader=n),a.httpStatus=(t.httpCode==null?t.code:t.httpCode)||o||0,a.subCode=t.subcode,a.messageCode=t.messageCode,typeof t.details==`string`?(a.messages=[t.details],i??=t.details):(a.messages=t.details,i??=a.messages?.[0]),a.raw=Jc in t?t[Jc]:t}return i??=`Error`,ji(t)?Si():new D(e,i,a)}var Jc=Symbol(),Yc=()=>null,Xc=`Timeout exceeded`;function Dne(){return Error(Xc)}function One(e){return typeof e==`object`&&!!e&&`message`in e&&e.message===Xc}async function kne(e){let t=jne(e.parameters.url);if(!t)return null;let{QueueProcessor:n,SharedConcurrency:r}=await R(async()=>{let{QueueProcessor:e,SharedConcurrency:t}=await import(`./QueueProcessor-CGSfBCCB.js`);return{QueueProcessor:e,SharedConcurrency:t}},__vite__mapDeps([0,1]));return yt(Ane,t.origin,()=>{let e=(t.isHosted?c(`request-queue-concurrency-hosted`):c(`request-queue-concurrency-non-hosted`))??4;return Zc??=new r(c(`request-queue-concurrency-global`)??50),new n({concurrency:e,sharedConcurrency:Zc,process:e=>{if(Ti(e.parameters.requestOptions))throw qc(``,Si(`Request canceled`),e.parameters);return Bc(e)}})})}var Ane=new Map,Zc;function jne(e){let t,n=!1;return typeof e==`string`?(t=vs(e,!0),n=jc(e)):(t=e.origin,n=jc(e.toString())),t==null?null:new Mne(t,n)}var Mne=class{constructor(e,t){this.origin=e,this.isHosted=t}};async function Qc(e,t){e instanceof URL&&(e=e.toString());let n=xs(e),r=bs(e);r||n||(e=gs(e));let i={url:e,requestOptions:{...t}};t?.query&&(i.requestOptions.query=t?.query instanceof URLSearchParams?$o(t.query.toString().replaceAll(`+`,` `)):t?.query);let a=e=>({data:e,getAllHeaders:tl,getHeader:tl,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=ds(e,el.internalInterceptors);if(o){let e=await nl(o,i);if(e!=null)return a(e)}let s=ds(e);if(s){let e=await nl(s,i);if(e!=null)return a(e);s.after||s.error||(s=null)}if(e=i.url,(t=i.requestOptions).responseType===`image`&&(c(`host-webworker`)||c(`host-node`)))throw qc(`request:invalid-parameters`,Error(`responseType 'image' is not supported in Web Workers or Node environment`),i);if(t.method===`head`){if(t.body)throw qc(`request:invalid-parameters`,Error(`body parameter cannot be set when method is 'head'`),i);if(n||r)throw qc(`request:invalid-parameters`,Error(`data and blob URLs are not supported for method 'head'`),i)}if(await Nne(),$c)return $c.execute(e,t);let l=new AbortController,u=Oi(t,()=>l.abort()),d={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,parameters:i,redoRequest:!1,useIdentity:el.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=t.useQueue?Pne(d):Bc(d),p=await f.finally(()=>u?.remove());return s?.after?.(p),p}var $c,el=nt.request,tl=()=>null;async function Nne(){c(`host-webworker`)&&(!$c&&globalThis.invokeStaticMessage?$c=await R(()=>import(`./request-uJpf7nxv.js`),[]):$s.isForeignWorker=!0)}async function nl(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let n,r;try{r=await e.before(t)}catch(e){n=qc(`request:interceptor`,e,t)}if((r instanceof Error||r instanceof D)&&(n=qc(`request:interceptor`,r,t)),n)throw e.error&&e.error(n),n;return r}}async function Pne(e){let t=await kne(e);return t?t.push(e):Bc(e)}function rl(e){if(!nt.assetsPath)throw E.getLogger(`esri.assets`).errorOnce(`The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50`),new D(`assets:path-not-set`,`config.assetsPath is not set`);return _s(nt.assetsPath,e)}var il,z=null;function al(){return!!z}function Fne(){return!!c(`esri-wasm`)}function ol(){return il||(il=R(async()=>{let{default:e}=await import(`./pe-wasm-B6XjJR5H.js`);return{default:e}},[]).then(({default:e})=>e({locateFile:e=>rl(`esri/geometry/support/${e}`)})).then(e=>{wl(e)}),il)}var sl={geogToProj(e,t,n){z.ensureCache.prepare();let r=Dl(n),i=n===r,a=z.ensureFloat64(r),o=z._pe_geog_to_proj(z.getPointer(e),t,a);return o&&Ol(n,t,a,i),o},projGeog(e,t,n,r){switch(r){case cl.PE_TRANSFORM_P_TO_G:return sl.projToGeog(e,t,n);case cl.PE_TRANSFORM_G_TO_P:return sl.geogToProj(e,t,n)}return 0},projToGeog:(e,t,n)=>sl.projToGeogCenter(e,t,n,0),projToGeogCenter(e,t,n,r){z.ensureCache.prepare();let i=Dl(n),a=n===i,o=z.ensureFloat64(i),s=z._pe_proj_to_geog_center(z.getPointer(e),t,o,r);return s&&Ol(n,t,o,a),s}},cl=class e{static init(){e.PE_BUFFER_MAX=z.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=z.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=z.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=z.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=z.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=z.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=z.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=z.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=z.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=z.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=z.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=z.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=z.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=z.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=z.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=z.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=z.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=z.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=z.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=z.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=z.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=z.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=z.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=z.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=z.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=z.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=z.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=z.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=z.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=z.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=z.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=z.PeDefs.prototype.PE_HORIZON_DELTA}},ll=null,ul={},dl={},fl=e=>{let t=e.getType();switch(t){case cl.PE_TYPE_GEOGCS:e=z.castObject(e,z.PeGeogcs);break;case cl.PE_TYPE_PROJCS:e=z.castObject(e,z.PeProjcs);break;case cl.PE_TYPE_GEOGTRAN:e=z.castObject(e,z.PeGeogtran);break;default:t&cl.PE_TYPE_UNIT&&(e=z.castObject(e,z.PeUnit))}return e},pl={initialize(){z.PeFactory.prototype.initialize(null)},coordsys:e=>pl.factoryByType(cl.PE_TYPE_COORDSYS,e),factoryByType(e,t){let n=null,r=ul[e];if(r||(r={},ul[e]=r),r.hasOwnProperty(String(t))&&(n=r[t],z.compare(n,z.NULL)&&(n=null)),!n){let i=z.PeFactory.prototype.factoryByType(e,t);z.compare(i,z.NULL)||(n=fl(i),r[t]=n)}return n},fromString(e,t,n=!1){if(n)switch(e){case cl.PE_TYPE_GEOGCS:case cl.PE_TYPE_PROJCS:case cl.PE_TYPE_COORDSYS:{let n=z.PeFactory.prototype.fromString(e,t);return z.compare(n,z.NULL)?null:fl(n)}default:return null}let r=null,i=dl[e];if(i||(i={},dl[e]=i),i.hasOwnProperty(t)&&(r=i[t],z.compare(r,z.NULL)&&(r=null)),!r){let n=z.PeFactory.prototype.fromString(e,t);z.compare(n,z.NULL)||(r=fl(n),i[t]=r)}return r},geogcs:e=>pl.factoryByType(cl.PE_TYPE_GEOGCS,e),geogtran:e=>pl.factoryByType(cl.PE_TYPE_GEOGTRAN,e),getCode:e=>z.PeFactory.prototype.getCode(e),projcs:e=>pl.factoryByType(cl.PE_TYPE_PROJCS,e),unit:e=>pl.factoryByType(cl.PE_TYPE_UNIT,e)},ml,hl=null,gl={PE_GTLIST_OPTS_COMMON:0,init(){gl.PE_GTLIST_OPTS_COMMON=z.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,ml=z._pe_getPeGTlistExtendedEntrySize()},getGTlist(e,t,n,r,i,a){let o=null,s=new z.PeInteger(a);try{let c=z.PeGTlistExtended.prototype.getGTlist(e,t,n,r,i,s);if((a=s.val)&&(o=[c],a>1)){let e=z.getPointer(c);for(let t=1;t<a;t++)o.push(z.wrapPointer(e+ml*t,z.PeGTlistExtendedEntry))}}finally{z.destroy(s)}return o}},Ine={destroy(e){if(e?.length){for(let t of e)Tl(t),t.getEntries().forEach(e=>{Tl(e);let t=e.getGeogtran();Tl(t),t.getParameters().forEach(Tl),[t.getGeogcs1(),t.getGeogcs2()].forEach(e=>{Tl(e);let t=e.getDatum();Tl(t),Tl(t.getSpheroid()),Tl(e.getPrimem()),Tl(e.getUnit())})});z.PeGTlistExtendedEntry.prototype.Delete(e[0])}}},_l={geogToGeog(e,t,n,r,i){z.ensureCache.prepare();let a=Dl(n),o=n===a,s=z.ensureFloat64(a),c=0;r&&(c=z.ensureFloat64(r));let l=z._pe_geog_to_geog(z.getPointer(e),t,s,c,i);return l&&Ol(n,t,s,o),l}},Lne={geodesicCoordinate(e,t,n,r,i,a,o,s){z.PeLineType.prototype.geodesic_coordinate(e,t,n,r,i,a,o,s)},geodeticCoordinate(e,t,n,r,i,a,o,s,c){z.PeLineType.prototype.geodetic_coordinate(e,t,n,r,i,a,o,s,c)},geodeticDistance(e,t,n,r,i,a,o,s,c,l){z.PeLineType.prototype.geodetic_distance(e,t,n,r,i,a,o,s,c,l)},greatEllipticDistance(e,t,n,r,i,a,o,s,c){z.PeLineType.prototype.great_elliptic_distance(e,t,n,r,i,a,o,s,c)}},Rne={phiToEta:(e,t)=>z.PeMath.prototype.phi_to_eta(e,t),etaToPhi:(e,t)=>z.PeMath.prototype.eta_to_phi(e,t),phiToPhig:(e,t)=>z.PeMath.prototype.phi_to_phig(e,t),q:(e,t,n)=>z.PeMath.prototype.q(e,t,n),q90:(e,t)=>z.PeMath.prototype.q90(e,t)},vl=(e,t,n,r,i,a)=>{let o,s;switch(z.ensureCache.prepare(),e){case`dd`:o=z._pe_geog_to_dd,s=cl.PE_DD_MAX;break;case`ddm`:o=z._pe_geog_to_ddm,s=cl.PE_DDM_MAX;break;case`dms`:o=z._pe_geog_to_dms,s=cl.PE_DMS_MAX}let c=0;t&&(c=z.getPointer(t));let l=Dl(r),u=z.ensureFloat64(l),d=El(n,s),f=o(c,n,u,i,z.ensureInt32(d));if(f)for(let e=0;e<n;e++)a[e]=z.UTF8ToString(d[e]);return f},yl=(e,t,n,r,i)=>{let a;switch(z.ensureCache.prepare(),e){case`dd`:a=z._pe_dd_to_geog;break;case`ddm`:a=z._pe_ddm_to_geog;break;case`dms`:a=z._pe_dms_to_geog}let o=0;t&&(o=z.getPointer(t));let s=r.map(e=>z.ensureString(e)),c=z.ensureInt32(s),l=z.ensureFloat64(Array(2*n)),u=a(o,n,c,l);return u&&Ol(i,n,l),u},bl={geogToDms:(e,t,n,r,i)=>vl(`dms`,e,t,n,r,i),dmsToGeog:(e,t,n,r)=>yl(`dms`,e,t,n,r),geogToDdm:(e,t,n,r,i)=>vl(`ddm`,e,t,n,r,i),ddmToGeog:(e,t,n,r)=>yl(`ddm`,e,t,n,r),geogToDd:(e,t,n,r,i)=>vl(`dd`,e,t,n,r,i),ddToGeog:(e,t,n,r)=>yl(`dd`,e,t,n,r)},xl=class e{static init(){e.PE_MGRS_STYLE_NEW=z.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=z.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=z.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=z.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=z.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,t,n,r,i,a,o){z.ensureCache.prepare();let s=0;e&&(s=z.getPointer(e));let c=Dl(n),l=z.ensureFloat64(c),u=El(t,cl.PE_MGRS_MAX),d=z.ensureInt32(u),f=z._pe_geog_to_mgrs_extended(s,t,l,r,i,a,d);if(f)for(let e=0;e<t;e++)o[e]=z.UTF8ToString(u[e]);return f}static mgrsToGeogExtended(e,t,n,r,i){z.ensureCache.prepare();let a=0;e&&(a=z.getPointer(e));let o=n.map(e=>z.ensureString(e)),s=z.ensureInt32(o),c=z.ensureFloat64(Array(2*t)),l=z._pe_mgrs_to_geog_extended(a,t,s,r,c);return l&&Ol(i,t,c),l}},zne={geogToUsng(e,t,n,r,i,a,o){z.ensureCache.prepare();let s=0;e&&(s=z.getPointer(e));let c=Dl(n),l=z.ensureFloat64(c),u=El(t,cl.PE_MGRS_MAX),d=z.ensureInt32(u),f=z._pe_geog_to_usng(s,t,l,r,i,a,d);if(f)for(let e=0;e<t;e++)o[e]=z.UTF8ToString(u[e]);return f},usngToGeog(e,t,n,r){z.ensureCache.prepare();let i=0;e&&(i=z.getPointer(e));let a=n.map(e=>z.ensureString(e)),o=z.ensureInt32(a),s=z.ensureFloat64(Array(2*t)),c=z._pe_usng_to_geog(i,t,o,s);return c&&Ol(r,t,s),c}},Sl=class e{static init(){e.PE_UTM_OPTS_NONE=z.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=z.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=z.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,t,n,r,i){z.ensureCache.prepare();let a=0;e&&(a=z.getPointer(e));let o=Dl(n),s=z.ensureFloat64(o),c=El(t,cl.PE_UTM_MAX),l=z.ensureInt32(c),u=z._pe_geog_to_utm(a,t,s,r,l);if(u)for(let e=0;e<t;e++)i[e]=z.UTF8ToString(c[e]);return u}static utmToGeog(e,t,n,r,i){z.ensureCache.prepare();let a=0;e&&(a=z.getPointer(e));let o=n.map(e=>z.ensureString(e)),s=z.ensureInt32(o),c=z.ensureFloat64(Array(2*t)),l=z._pe_utm_to_geog(a,t,s,r,c);return l&&Ol(i,t,c),l}},Cl=class e{static{this.cache=new Map}static init(){e.PE_PCSINFO_OPTION_NONE=z.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=z.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=z.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=z.PePCSInfo.prototype.PE_POLE_POINT}static generate(t,n=e.PE_PCSINFO_OPTION_DOMAIN){let r=null,i=null;return e.cache.has(t)&&(i=e.cache.get(t),i[n]&&(r=i[n])),r||(r=z.PePCSInfo.prototype.generate(t,n),i||(i=[],e.cache.set(t,i)),i[n]=r),r}},Bne={versionString:()=>z.PeVersion.prototype.version_string()};function wl(e){function t(e,t,n){e[t]=n(e[t])}z=e,cl.init(),gl.init(),xl.init(),Sl.init(),Cl.init(),ll=class extends z.PeDouble{constructor(e=NaN){super(e)}destroy(){z.destroy(this)}[Symbol.dispose](){this.destroy()}},hl=class extends z.PeGCSExtent{destroy(){z.destroy(this)}[Symbol.dispose](){this.destroy()}};let n=[z.PeAngunit,z.PeDatum,z.PeGeogcs,z.PeGeogtran,z.PeObject,z.PeParameter,z.PePrimem,z.PeProjcs,z.PeSpheroid,z.PeUnit];for(let e of n)t(e.prototype,`getName`,e=>function(){return e.call(this,Array(cl.PE_NAME_MAX))});for(let e of[z.PeGeogtran,z.PeProjcs])t(e.prototype,`getParameters`,e=>function(){let t=Array(cl.PE_PARM_MAX),n=e.call(this);for(let e=0;e<t.length;e++){let r=z.getValue(n,`*`);t[e]=r?z.wrapPointer(r,z.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return t});t(z.PeHorizon.prototype,`getCoord`,e=>function(t=!1){let n=this.getSize();if(!n)return null;let r=[];return Ol(r,n,e.call(this),t),r}),t(z.PeGTlistExtendedEntry.prototype,`getEntries`,e=>{let t=z._pe_getPeGTlistExtendedGTsSize();return function(){let n=null,r=e.call(this);if(!z.compare(r,z.NULL)){n=[r];let e=this.getSteps();if(e>1){let i=z.getPointer(r);for(let r=1;r<e;r++)n.push(z.wrapPointer(i+t*r,z.PeGTlistExtendedGTs))}}return n}});let r=z._pe_getPeHorizonSize(),i=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let n=null,i=e.call(this);if(!z.compare(i,z.NULL)){n=[i];let e=i.getNump();if(e>1){let t=z.getPointer(i);for(let i=1;i<e;i++)n.push(z.wrapPointer(t+r*i,z.PeHorizon))}}return t.set(e,n),n};t(z.PeProjcs.prototype,`horizonGcsGenerate`,i),t(z.PeProjcs.prototype,`horizonPcsGenerate`,i),z.PeObject.prototype.toString=function(e=cl.PE_STR_OPTS_NONE){z.ensureCache.prepare();let t=z.getPointer(this),n=z.ensureInt8(Array(cl.PE_BUFFER_MAX));return z.UTF8ToString(z._pe_object_to_string_ext(t,e,n))},z.PeGeogcs.prototype.destroy=function(){this.Delete(),Tl(this),this.ptr=0},z.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},z.PeProjcs.prototype.destroy=function(){this.Delete(),Tl(this),this.ptr=0},z.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Tl(e){if(!e)return;let t=z.getClass(e);if(!t)return;let n=z.getCache(t);if(!n)return;let r=z.getPointer(e);r&&delete n[r]}function El(e,t){let n=[],r=Array(t);for(let t=0;t<e;t++)n.push(z.ensureInt8(r));return n}function Dl(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function Ol(e,t,n,r=!1){if(r)for(let r=0;r<2*t;r++)e[r]=z.getValue(n+r*Float64Array.BYTES_PER_ELEMENT,`double`);else{let r=e.length===0;for(let i=0;i<t;i++)r&&(e[i]=[,,]),e[i][0]=z.getValue(n,`double`),e[i][1]=z.getValue(n+Float64Array.BYTES_PER_ELEMENT,`double`),n+=2*Float64Array.BYTES_PER_ELEMENT}}var Vne=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:sl,PeDefs:cl,get PeDouble(){return ll},PeFactory:pl,get PeGCSExtent(){return hl},PeGTTransformations:_l,PeGTlistExtended:gl,PeGTlistExtendedEntry:Ine,PeLineType:Lne,PeMath:Rne,PeNotationDms:bl,PeNotationMgrs:xl,PeNotationUsng:zne,PeNotationUtm:Sl,PePCSInfo:Cl,PeVersion:Bne,_init:wl,get _pe(){return z},isLoaded:al,isSupported:Fne,load:ol},Symbol.toStringTag,{value:`Module`})),B,V={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:[`Meter`,`Foot`,`Foot_US`,`Foot_Clarke`,`Yard_Clarke`,`Link_Clarke`,`Yard_Sears`,`Foot_Sears`,`Chain_Sears`,`Chain_Benoit_1895_B`,`Yard_Indian`,`Yard_Indian_1937`,`Foot_Gold_Coast`,`Chain`,`Chain_Sears_1922_Truncated`,`50_Kilometers`,`150_Kilometers`],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(B=2e3;B<=2045;B++)V[B]=0;for(B=2056;B<=2065;B++)V[B]=0;for(B=2067;B<=2135;B++)V[B]=0;for(B=2137;B<=2154;B++)V[B]=0;for(B=2161;B<=2170;B++)V[B]=0;for(B=2172;B<=2193;B++)V[B]=0;for(B=2195;B<=2198;B++)V[B]=0;for(B=2200;B<=2203;B++)V[B]=0;for(B=2205;B<=2217;B++)V[B]=0;for(B=2222;B<=2224;B++)V[B]=1;for(B=2225;B<=2250;B++)V[B]=2;for(B=2251;B<=2253;B++)V[B]=1;for(B=2257;B<=2264;B++)V[B]=2;for(B=2274;B<=2279;B++)V[B]=2;for(B=2280;B<=2282;B++)V[B]=1;for(B=2283;B<=2289;B++)V[B]=2;for(B=2290;B<=2292;B++)V[B]=0;for(B=2308;B<=2313;B++)V[B]=0;for(B=2315;B<=2491;B++)V[B]=0;for(B=2494;B<=2866;B++)V[B]=0;for(B=2867;B<=2869;B++)V[B]=1;for(B=2870;B<=2888;B++)V[B]=2;for(B=2891;B<=2895;B++)V[B]=2;for(B=2896;B<=2898;B++)V[B]=1;for(B=2902;B<=2908;B++)V[B]=2;for(B=2915;B<=2920;B++)V[B]=2;for(B=2921;B<=2923;B++)V[B]=1;for(B=2924;B<=2930;B++)V[B]=2;for(B=2931;B<=2962;B++)V[B]=0;for(B=2964;B<=2968;B++)V[B]=2;for(B=2969;B<=2973;B++)V[B]=0;for(B=2975;B<=2991;B++)V[B]=0;for(B=2995;B<=3051;B++)V[B]=0;for(B=3054;B<=3079;B++)V[B]=0;for(B=3081;B<=3088;B++)V[B]=0;for(B=3092;B<=3101;B++)V[B]=0;for(B=3106;B<=3138;B++)V[B]=0;for(B=3146;B<=3151;B++)V[B]=0;for(B=3153;B<=3166;B++)V[B]=0;for(B=3168;B<=3172;B++)V[B]=0;for(B=3174;B<=3203;B++)V[B]=0;for(B=3294;B<=3358;B++)V[B]=0;for(B=3367;B<=3403;B++)V[B]=0;for(B=3408;B<=3416;B++)V[B]=0;for(B=3417;B<=3438;B++)V[B]=2;for(B=3441;B<=3446;B++)V[B]=2;for(B=3447;B<=3450;B++)V[B]=0;for(B=3451;B<=3459;B++)V[B]=2;for(B=3460;B<=3478;B++)V[B]=0;for(B=3554;B<=3559;B++)V[B]=0;for(B=3560;B<=3570;B++)V[B]=2;for(B=3571;B<=3581;B++)V[B]=0;for(B=3594;B<=3597;B++)V[B]=0;for(B=3601;B<=3604;B++)V[B]=0;for(B=3637;B<=3639;B++)V[B]=0;for(B=3665;B<=3667;B++)V[B]=0;for(B=3693;B<=3695;B++)V[B]=0;for(B=3701;B<=3727;B++)V[B]=0;for(B=3728;B<=3739;B++)V[B]=2;for(B=3740;B<=3751;B++)V[B]=0;for(B=3753;B<=3760;B++)V[B]=2;for(B=3761;B<=3773;B++)V[B]=0;for(B=3775;B<=3777;B++)V[B]=0;for(B=3779;B<=3781;B++)V[B]=0;for(B=3783;B<=3785;B++)V[B]=0;for(B=3788;B<=3791;B++)V[B]=0;for(B=3797;B<=3802;B++)V[B]=0;for(B=3814;B<=3816;B++)V[B]=0;for(B=3825;B<=3829;B++)V[B]=0;for(B=3832;B<=3841;B++)V[B]=0;for(B=3844;B<=3852;B++)V[B]=0;for(B=3873;B<=3885;B++)V[B]=0;for(B=3890;B<=3893;B++)V[B]=0;for(B=3907;B<=3912;B++)V[B]=0;for(B=3942;B<=3950;B++)V[B]=0;for(B=3968;B<=3970;B++)V[B]=0;for(B=3973;B<=3976;B++)V[B]=0;for(B=3986;B<=3989;B++)V[B]=0;for(B=3994;B<=3997;B++)V[B]=0;for(B=4048;B<=4051;B++)V[B]=0;for(B=4056;B<=4063;B++)V[B]=0;for(B=4093;B<=4096;B++)V[B]=0;for(B=4390;B<=4398;B++)V[B]=0;for(B=4399;B<=4413;B++)V[B]=2;for(B=4418;B<=4433;B++)V[B]=2;for(B=4455;B<=4457;B++)V[B]=2;for(B=4484;B<=4489;B++)V[B]=0;for(B=4491;B<=4554;B++)V[B]=0;for(B=4568;B<=4589;B++)V[B]=0;for(B=4652;B<=4656;B++)V[B]=0;for(B=4766;B<=4800;B++)V[B]=0;for(B=5014;B<=5016;B++)V[B]=0;for(B=5069;B<=5072;B++)V[B]=0;for(B=5105;B<=5130;B++)V[B]=0;for(B=5167;B<=5188;B++)V[B]=0;for(B=5253;B<=5259;B++)V[B]=0;for(B=5269;B<=5275;B++)V[B]=0;for(B=5292;B<=5311;B++)V[B]=0;for(B=5329;B<=5331;B++)V[B]=0;for(B=5343;B<=5349;B++)V[B]=0;for(B=5355;B<=5357;B++)V[B]=0;for(B=5387;B<=5389;B++)V[B]=0;for(B=5459;B<=5463;B++)V[B]=0;for(B=5479;B<=5482;B++)V[B]=0;for(B=5518;B<=5520;B++)V[B]=0;for(B=5530;B<=5539;B++)V[B]=0;for(B=5550;B<=5552;B++)V[B]=0;for(B=5562;B<=5583;B++)V[B]=0;for(B=5623;B<=5625;B++)V[B]=2;for(B=5631;B<=5639;B++)V[B]=0;for(B=5649;B<=5653;B++)V[B]=0;for(B=5663;B<=5680;B++)V[B]=0;for(B=5682;B<=5685;B++)V[B]=0;for(B=5875;B<=5877;B++)V[B]=0;for(B=5896;B<=5899;B++)V[B]=0;for(B=5921;B<=5940;B++)V[B]=0;for(B=6050;B<=6125;B++)V[B]=0;for(B=6244;B<=6275;B++)V[B]=0;for(B=6328;B<=6348;B++)V[B]=0;for(B=6350;B<=6356;B++)V[B]=0;for(B=6366;B<=6372;B++)V[B]=0;for(B=6381;B<=6387;B++)V[B]=0;for(B=6393;B<=6404;B++)V[B]=0;for(B=6480;B<=6483;B++)V[B]=0;for(B=6511;B<=6514;B++)V[B]=0;for(B=6579;B<=6581;B++)V[B]=0;for(B=6619;B<=6624;B++)V[B]=0;for(B=6625;B<=6627;B++)V[B]=2;for(B=6628;B<=6632;B++)V[B]=0;for(B=6634;B<=6637;B++)V[B]=0;for(B=6669;B<=6692;B++)V[B]=0;for(B=6707;B<=6709;B++)V[B]=0;for(B=6720;B<=6723;B++)V[B]=0;for(B=6732;B<=6738;B++)V[B]=0;for(B=6931;B<=6933;B++)V[B]=0;for(B=6956;B<=6959;B++)V[B]=0;for(B=7005;B<=7007;B++)V[B]=0;for(B=7057;B<=7070;B++)V[B]=2;for(B=7074;B<=7082;B++)V[B]=0;for(B=7109;B<=7118;B++)V[B]=0;for(B=7119;B<=7127;B++)V[B]=1;for(B=7374;B<=7376;B++)V[B]=0;for(B=7528;B<=7586;B++)V[B]=0;for(B=7587;B<=7645;B++)V[B]=2;for(B=7692;B<=7696;B++)V[B]=0;for(B=7755;B<=7787;B++)V[B]=0;for(B=7791;B<=7795;B++)V[B]=0;for(B=7799;B<=7801;B++)V[B]=0;for(B=7803;B<=7805;B++)V[B]=0;for(B=7825;B<=7831;B++)V[B]=0;for(B=7845;B<=7859;B++)V[B]=0;for(B=8013;B<=8032;B++)V[B]=0;for(B=8065;B<=8068;B++)V[B]=1;for(B=8518;B<=8529;B++)V[B]=2;for(B=8533;B<=8536;B++)V[B]=2;for(B=8538;B<=8540;B++)V[B]=2;for(B=8677;B<=8679;B++)V[B]=0;for(B=8836;B<=8840;B++)V[B]=0;for(B=8857;B<=8859;B++)V[B]=0;for(B=8908;B<=8910;B++)V[B]=0;for(B=9154;B<=9159;B++)V[B]=0;for(B=9205;B<=9218;B++)V[B]=0;for(B=9271;B<=9273;B++)V[B]=0;for(B=9295;B<=9297;B++)V[B]=0;for(B=9356;B<=9360;B++)V[B]=0;for(B=9404;B<=9407;B++)V[B]=0;for(B=9476;B<=9482;B++)V[B]=0;for(B=9487;B<=9494;B++)V[B]=0;for(B=9697;B<=9699;B++)V[B]=0;for(B=9821;B<=9865;B++)V[B]=0;for(B=10285;B<=10291;B++)V[B]=0;for(B=10314;B<=10317;B++)V[B]=0;for(B=10448;B<=10465;B++)V[B]=0;for(B=10726;B<=10729;B++)V[B]=0;for(B=10731;B<=10733;B++)V[B]=0;for(B=11114;B<=11118;B++)V[B]=0;for(B=20004;B<=20032;B++)V[B]=0;for(B=20047;B<=20049;B++)V[B]=0;for(B=20062;B<=20092;B++)V[B]=0;for(B=20135;B<=20138;B++)V[B]=0;for(B=20248;B<=20258;B++)V[B]=0;for(B=20348;B<=20358;B++)V[B]=0;for(B=20436;B<=20440;B++)V[B]=0;for(B=20822;B<=20824;B++)V[B]=0;for(B=20904;B<=20932;B++)V[B]=0;for(B=20934;B<=20936;B++)V[B]=0;for(B=21004;B<=21032;B++)V[B]=0;for(B=21035;B<=21037;B++)V[B]=0;for(B=21095;B<=21097;B++)V[B]=0;for(B=21148;B<=21150;B++)V[B]=0;for(B=21207;B<=21264;B++)V[B]=0;for(B=21307;B<=21364;B++)V[B]=0;for(B=21413;B<=21423;B++)V[B]=0;for(B=21453;B<=21463;B++)V[B]=0;for(B=21473;B<=21483;B++)V[B]=0;for(B=21780;B<=21782;B++)V[B]=0;for(B=21891;B<=21894;B++)V[B]=0;for(B=21896;B<=21899;B++)V[B]=0;for(B=22171;B<=22177;B++)V[B]=0;for(B=22181;B<=22187;B++)V[B]=0;for(B=22191;B<=22197;B++)V[B]=0;for(B=22207;B<=22222;B++)V[B]=0;for(B=22229;B<=22232;B++)V[B]=0;for(B=22234;B<=22236;B++)V[B]=0;for(B=22243;B<=22250;B++)V[B]=0;for(B=22262;B<=22265;B++)V[B]=0;for(B=22307;B<=22322;B++)V[B]=0;for(B=22348;B<=22357;B++)V[B]=0;for(B=22407;B<=22422;B++)V[B]=0;for(B=22462;B<=22465;B++)V[B]=0;for(B=22521;B<=22525;B++)V[B]=0;for(B=22607;B<=22622;B++)V[B]=0;for(B=22641;B<=22646;B++)V[B]=0;for(B=22648;B<=22657;B++)V[B]=0;for(B=22707;B<=22722;B++)V[B]=0;for(B=22762;B<=22765;B++)V[B]=0;for(B=22807;B<=22822;B++)V[B]=0;for(B=22991;B<=22994;B++)V[B]=0;for(B=23028;B<=23038;B++)V[B]=0;for(B=23301;B<=23333;B++)V[B]=2;for(B=23830;B<=23853;B++)V[B]=0;for(B=23866;B<=23872;B++)V[B]=0;for(B=23877;B<=23884;B++)V[B]=0;for(B=23886;B<=23894;B++)V[B]=0;for(B=23946;B<=23948;B++)V[B]=0;for(B=24311;B<=24313;B++)V[B]=0;for(B=24342;B<=24347;B++)V[B]=0;for(B=24370;B<=24374;B++)V[B]=10;for(B=24375;B<=24381;B++)V[B]=0;for(B=24718;B<=24721;B++)V[B]=0;for(B=24817;B<=24821;B++)V[B]=0;for(B=24877;B<=24882;B++)V[B]=0;for(B=24891;B<=24893;B++)V[B]=0;for(B=25391;B<=25395;B++)V[B]=0;for(B=25828;B<=25838;B++)V[B]=0;for(B=26191;B<=26195;B++)V[B]=0;for(B=26391;B<=26393;B++)V[B]=0;for(B=26701;B<=26722;B++)V[B]=0;for(B=26729;B<=26799;B++)V[B]=2;for(B=26801;B<=26803;B++)V[B]=2;for(B=26811;B<=26813;B++)V[B]=2;for(B=26847;B<=26870;B++)V[B]=2;for(B=26891;B<=26899;B++)V[B]=0;for(B=26901;B<=26923;B++)V[B]=0;for(B=26929;B<=26946;B++)V[B]=0;for(B=26948;B<=26998;B++)V[B]=0;for(B=27037;B<=27040;B++)V[B]=0;for(B=27205;B<=27232;B++)V[B]=0;for(B=27258;B<=27260;B++)V[B]=0;for(B=27391;B<=27398;B++)V[B]=0;for(B=27561;B<=27564;B++)V[B]=0;for(B=27571;B<=27574;B++)V[B]=0;for(B=27581;B<=27584;B++)V[B]=0;for(B=27591;B<=27594;B++)V[B]=0;for(B=27700;B<=27707;B++)V[B]=0;for(B=28191;B<=28193;B++)V[B]=0;for(B=28348;B<=28358;B++)V[B]=0;for(B=28402;B<=28432;B++)V[B]=0;for(B=28462;B<=28492;B++)V[B]=0;for(B=29118;B<=29122;B++)V[B]=0;for(B=29168;B<=29172;B++)V[B]=0;for(B=29177;B<=29185;B++)V[B]=0;for(B=29187;B<=29195;B++)V[B]=0;for(B=29900;B<=29903;B++)V[B]=0;for(B=30161;B<=30179;B++)V[B]=0;for(B=30491;B<=30494;B++)V[B]=0;for(B=30729;B<=30732;B++)V[B]=0;for(B=31251;B<=31259;B++)V[B]=0;for(B=31265;B<=31268;B++)V[B]=0;for(B=31275;B<=31279;B++)V[B]=0;for(B=31281;B<=31297;B++)V[B]=0;for(B=31461;B<=31469;B++)V[B]=0;for(B=31491;B<=31495;B++)V[B]=0;for(B=31917;B<=31922;B++)V[B]=0;for(B=31965;B<=32e3;B++)V[B]=0;for(B=32001;B<=32003;B++)V[B]=2;for(B=32005;B<=32031;B++)V[B]=2;for(B=32033;B<=32060;B++)V[B]=2;for(B=32064;B<=32067;B++)V[B]=2;for(B=32074;B<=32077;B++)V[B]=2;for(B=32081;B<=32086;B++)V[B]=0;for(B=32107;B<=32130;B++)V[B]=0;for(B=32133;B<=32159;B++)V[B]=0;for(B=32164;B<=32167;B++)V[B]=2;for(B=32180;B<=32199;B++)V[B]=0;for(B=32201;B<=32260;B++)V[B]=0;for(B=32301;B<=32360;B++)V[B]=0;for(B=32401;B<=32460;B++)V[B]=0;for(B=32501;B<=32560;B++)V[B]=0;for(B=32601;B<=32662;B++)V[B]=0;for(B=32664;B<=32667;B++)V[B]=2;for(B=32701;B<=32761;B++)V[B]=0;for(B=53001;B<=53004;B++)V[B]=0;for(B=53008;B<=53019;B++)V[B]=0;for(B=53021;B<=53032;B++)V[B]=0;for(B=53034;B<=53037;B++)V[B]=0;for(B=53042;B<=53046;B++)V[B]=0;for(B=53074;B<=53080;B++)V[B]=0;for(B=54001;B<=54004;B++)V[B]=0;for(B=54008;B<=54019;B++)V[B]=0;for(B=54021;B<=54032;B++)V[B]=0;for(B=54034;B<=54037;B++)V[B]=0;for(B=54042;B<=54046;B++)V[B]=0;for(B=54048;B<=54053;B++)V[B]=0;for(B=54074;B<=54080;B++)V[B]=0;for(B=54090;B<=54096;B++)V[B]=0;for(B=54098;B<=54101;B++)V[B]=0;for(B=65161;B<=65163;B++)V[B]=0;for(B=102001;B<=102040;B++)V[B]=0;for(B=102042;B<=102063;B++)V[B]=0;for(B=102065;B<=102067;B++)V[B]=0;for(B=102070;B<=102117;B++)V[B]=0;for(B=102122;B<=102216;B++)V[B]=0;for(B=102221;B<=102377;B++)V[B]=0;for(B=102382;B<=102388;B++)V[B]=0;for(B=102389;B<=102398;B++)V[B]=2;for(B=102399;B<=102444;B++)V[B]=0;for(B=102445;B<=102447;B++)V[B]=2;for(B=102448;B<=102458;B++)V[B]=0;for(B=102459;B<=102468;B++)V[B]=2;for(B=102469;B<=102499;B++)V[B]=0;for(B=102500;B<=102519;B++)V[B]=1;for(B=102520;B<=102524;B++)V[B]=0;for(B=102525;B<=102529;B++)V[B]=2;for(B=102530;B<=102588;B++)V[B]=0;for(B=102590;B<=102598;B++)V[B]=0;for(B=102601;B<=102603;B++)V[B]=0;for(B=102605;B<=102628;B++)V[B]=0;for(B=102629;B<=102646;B++)V[B]=2;for(B=102648;B<=102700;B++)V[B]=2;for(B=102701;B<=102703;B++)V[B]=0;for(B=102707;B<=102730;B++)V[B]=2;for(B=102733;B<=102758;B++)V[B]=2;for(B=102767;B<=102900;B++)V[B]=0;for(B=102901;B<=102933;B++)V[B]=2;for(B=102934;B<=102950;B++)V[B]=13;for(B=102951;B<=102963;B++)V[B]=0;for(B=102965;B<=102969;B++)V[B]=0;for(B=102971;B<=102973;B++)V[B]=0;for(B=102975;B<=102989;B++)V[B]=0;for(B=102990;B<=102992;B++)V[B]=1;for(B=102997;B<=103002;B++)V[B]=0;for(B=103003;B<=103008;B++)V[B]=2;for(B=103009;B<=103011;B++)V[B]=0;for(B=103012;B<=103014;B++)V[B]=2;for(B=103019;B<=103021;B++)V[B]=0;for(B=103022;B<=103024;B++)V[B]=2;for(B=103029;B<=103031;B++)V[B]=0;for(B=103032;B<=103034;B++)V[B]=2;for(B=103065;B<=103068;B++)V[B]=0;for(B=103074;B<=103076;B++)V[B]=0;for(B=103077;B<=103079;B++)V[B]=1;for(B=103080;B<=103082;B++)V[B]=0;for(B=103083;B<=103085;B++)V[B]=2;for(B=103090;B<=103093;B++)V[B]=0;for(B=103097;B<=103099;B++)V[B]=0;for(B=103100;B<=103102;B++)V[B]=2;for(B=103107;B<=103109;B++)V[B]=0;for(B=103110;B<=103112;B++)V[B]=2;for(B=103113;B<=103116;B++)V[B]=0;for(B=103117;B<=103120;B++)V[B]=2;for(B=103153;B<=103157;B++)V[B]=0;for(B=103158;B<=103162;B++)V[B]=2;for(B=103163;B<=103165;B++)V[B]=0;for(B=103166;B<=103168;B++)V[B]=1;for(B=103169;B<=103171;B++)V[B]=2;for(B=103186;B<=103188;B++)V[B]=0;for(B=103189;B<=103191;B++)V[B]=2;for(B=103192;B<=103195;B++)V[B]=0;for(B=103196;B<=103199;B++)V[B]=2;for(B=103200;B<=103224;B++)V[B]=0;for(B=103225;B<=103227;B++)V[B]=1;for(B=103232;B<=103237;B++)V[B]=0;for(B=103238;B<=103243;B++)V[B]=2;for(B=103244;B<=103246;B++)V[B]=0;for(B=103247;B<=103249;B++)V[B]=2;for(B=103254;B<=103256;B++)V[B]=0;for(B=103257;B<=103259;B++)V[B]=2;for(B=103264;B<=103266;B++)V[B]=0;for(B=103267;B<=103269;B++)V[B]=2;for(B=103300;B<=103375;B++)V[B]=0;for(B=103381;B<=103383;B++)V[B]=0;for(B=103384;B<=103386;B++)V[B]=1;for(B=103387;B<=103389;B++)V[B]=0;for(B=103390;B<=103392;B++)V[B]=2;for(B=103397;B<=103399;B++)V[B]=0;for(B=103400;B<=103471;B++)V[B]=2;for(B=103476;B<=103478;B++)V[B]=0;for(B=103479;B<=103481;B++)V[B]=2;for(B=103486;B<=103488;B++)V[B]=0;for(B=103489;B<=103491;B++)V[B]=2;for(B=103492;B<=103495;B++)V[B]=0;for(B=103496;B<=103499;B++)V[B]=2;for(B=103528;B<=103543;B++)V[B]=0;for(B=103544;B<=103548;B++)V[B]=2;for(B=103549;B<=103551;B++)V[B]=0;for(B=103552;B<=103554;B++)V[B]=1;for(B=103555;B<=103557;B++)V[B]=2;for(B=103558;B<=103560;B++)V[B]=0;for(B=103571;B<=103573;B++)V[B]=0;for(B=103574;B<=103576;B++)V[B]=2;for(B=103577;B<=103580;B++)V[B]=0;for(B=103581;B<=103583;B++)V[B]=2;for(B=103595;B<=103694;B++)V[B]=0;for(B=103696;B<=103699;B++)V[B]=0;for(B=103700;B<=103793;B++)V[B]=2;for(B=103794;B<=103890;B++)V[B]=0;for(B=103891;B<=103896;B++)V[B]=2;for(B=103900;B<=103971;B++)V[B]=2;for(B=103972;B<=103977;B++)V[B]=0;for(B=112e3;B<=112101;B++)V[B]=0;var kl=[102100,102113,3857,3785,900913],Hne=[104905,104971],Une=[104903],Wne=[4326,...kl,...Hne,...Une],Al=[-20037508.342788905,20037508.342788905],jl=[-20037508.342787,20037508.342787],Ml={wkTemplate:`PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]`,valid:Al,origin:jl,dx:1e-5},Nl={102113:{wkTemplate:`PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]`,valid:Al,origin:jl,dx:1e-5},102100:Ml,3785:{wkTemplate:`PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]`,valid:Al,origin:jl,dx:1e-5},3857:Ml,4326:{wkTemplate:`GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]`,altTemplate:`PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]`,valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:`GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]`,valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:`GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]`,valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Ml,104903:{wkTemplate:`GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]`,valid:[-180,180],origin:[-180,90],dx:1e-5}};function Pl(e,t){if(e===t)return!0;if(e==null||t==null)return!1;let n=e.wkid,r=t.wkid;if(n!=null||r!=null){if(n===r||Vl(e)&&Vl(t))return!0;let i=e.latestWkid;if(i!=null&&r===i)return!0;let a=t.latestWkid;return a!=null&&n===a}let i,a;return e.wkt2&&t.wkt2?(i=e.wkt2,a=t.wkt2):e.wkt&&t.wkt&&(i=e.wkt,a=t.wkt),!(!i||!a)&&i.toUpperCase()===a.toUpperCase()}function Fl(e){let t=e?.wkid;return t!=null&&t>=2e3&&Nl[t]||null}function Il(e){if(!e)return;let{wkid:t,vcsWkid:n,falseM:r,falseX:i,falseY:a,falseZ:o,mTolerance:s,mUnits:c,xyTolerance:l,xyUnits:u,zTolerance:d,zUnits:f}=e;if(t&&[n,r,i,a,o,s,c,l,u,d,f].every(e=>e==null))return String(t);let p={wkid:t,wkt:t?void 0:e.wkt||e.wkt2,vcsWkid:n,falseM:r,falseX:i,falseY:a,falseZ:o,mTolerance:s,mUnits:c,xyTolerance:l,xyUnits:u,zTolerance:d,zUnits:f};for(let[e,t]of Object.entries(p))t===null&&delete p[e];return JSON.stringify(p)}function Ll(e){if(!Jl(e))return!1;let{wkid:t}=e;if(t)return V[t]==null;let n=e.wkt2||e.wkt;return!!n&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(n)}function Rl(e){return!(Wl(e)||Kl(e))}function zl(e){return e?.wkid===4326}function Gne(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function Bl(e){return e?.wkid===4490}function Vl(e){let t=e?.wkid;return t!=null&&t>=2e3&&kl.includes(t)}function Hl(e){return e?.wkid===32662}function Ul(e){return e===104971||e===104905}function Wl(e){return Ul(e?.wkid)}function Gl(e){return e===104903}function Kl(e){return Gl(e?.wkid)}function ql(e){let t=e?.wkid;return t!=null&&t>=2e3&&Wne.includes(t)}function Jl(e){if(e==null)return!1;let t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}var Yl={wkid:4326,wkt:at(Nl[4326].wkTemplate,{Central_Meridian:`0.0`})},Xl={wkid:102100,latestWkid:3857},Kne={wkid:32662};function Zl(e){return{wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`}}var Ql=Zl(Po),$l=Zl(Fo),eu=Zl(Io),tu={wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Po.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`},qne=$l.wkt.toUpperCase(),Jne=eu.wkt.toUpperCase();function nu(e){if(e!=null&&Jl(e)){let t=e.wkid,n=e.wkt2??e.wkt;if(Ul(t))return Fo;let r=n?.toUpperCase();if(n&&r===qne)return Fo;if(Gl(t)||r&&r===Jne)return Io}return Po}Math.cos(Math.PI/16/16);function Yne(e){return Ul(e)?Fo:Gl(e)?Io:Po}function ru(e){return Pl(e,Ql)}function iu(e){return ru(e)||Pl(e,$l)||Pl(e,eu)}var au=39.37,Xne=Po.radius*Math.PI/200,ou=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,su=V,cu=/UNIT\[([^\]]+)]/i,lu=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Zne=Cr()({millimeter:`millimeters`,centimeter:`centimeters`,meter:`meters`,meter_german:`german-meters`,kilometer:`kilometers`,decimeter:`decimeters`,micrometer:`micrometers`,nanometer:`nanometers`,"50_kilometers":`50-kilometers`,"150_kilometers":`150-kilometers`,foot:`feet`,foot_us:`us-feet`,foot_clarke:`clarke-feet`,fathom:`fathoms`,nautical_mile:`nautical-miles`,chain_us:`us-chains`,link_us:`us-links`,mile_us:`us-miles`,yard_clarke:`clarke-yards`,chain_clarke:`clarke-chains`,link_clarke:`clarke-links`,yard_sears:`sears-yards`,foot_sears:`sears-feet`,chain_sears:`sears-chains`,link_sears:`sears-links`,yard_benoit_1895_a:`benoit-1895-a-yards`,foot_benoit_1895_a:`benoit-1895-a-feet`,chain_benoit_1895_a:`benoit-1895-a-chains`,link_benoit_1895_a:`benoit-1895-a-links`,yard_benoit_1895_b:`benoit-1895-b-yards`,foot_benoit_1895_b:`benoit-1895-b-feet`,chain_benoit_1895_b:`benoit-1895-b-chains`,link_benoit_1895_b:`benoit-1895-b-links`,foot_1865:`1865-feet`,foot_indian:`indian-feet`,foot_indian_1937:`indian-1937-feet`,foot_indian_1962:`indian-1962-feet`,foot_indian_1975:`indian-1975-feet`,yard_indian:`indian-yards`,yard_indian_1937:`indian-1937-yards`,yard_indian_1962:`indian-1962-yards`,yard_indian_1975:`indian-1975-yards`,statute_mile:`statute-miles`,foot_gold_coast:`gold-coast-feet`,foot_british_1936:`british-1936-feet`,yard:`yards`,chain:`chains`,link:`links`,yard_sears_1922_truncated:`sears-1922-truncated-yards`,foot_sears_1922_truncated:`sears-1922-truncated-feet`,chain_sears_1922_truncated:`sears-1922-truncated-chains`,link_sears_1922_truncated:`sears-1922-truncated-links`,yard_us:`us-yards`,inch:`inches`,inch_us:`us-inches`,rod:`rods`,rod_us:`us-rods`,nautical_mile_us:`us-nautical-miles`,nautical_mile_uk:`uk-nautical-miles`,smoot:`smoots`,vara_tx:`tx-vara`,point:`points`}),uu=e=>e*e,du=e=>e*e*e,fu={length:{baseUnit:`meters`,units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:`square-meters`,units:{"square-millimeters":{inBaseUnits:uu(.001)},"square-centimeters":{inBaseUnits:uu(.01)},"square-decimeters":{inBaseUnits:uu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:uu(1e3)},"square-inches":{inBaseUnits:uu(.0254)},"square-feet":{inBaseUnits:uu(.3048)},"square-yards":{inBaseUnits:uu(.9144)},"square-miles":{inBaseUnits:uu(1609.344)},"square-nautical-miles":{inBaseUnits:uu(1852)},"square-us-feet":{inBaseUnits:uu(1200/3937)},acres:{inBaseUnits:.0015625*uu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:`liters`,units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*du(.001)},"cubic-centimeters":{inBaseUnits:1e3*du(.01)},"cubic-decimeters":{inBaseUnits:1e3*du(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*du(1e3)},"cubic-inches":{inBaseUnits:1e3*du(.0254)},"cubic-feet":{inBaseUnits:1e3*du(.3048)},"cubic-yards":{inBaseUnits:1e3*du(.9144)},"cubic-miles":{inBaseUnits:1e3*du(1609.344)}}},angle:{baseUnit:`radians`,units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Qne=(()=>{let e={};for(let t in fu)for(let n in fu[t].units)e[n]=t;return e})();function $ne(e,t,n){return e*fu[n].units[t].inBaseUnits}function ere(e,t,n){return e/fu[n].units[t].inBaseUnits}var tre=[`inches`,`feet`,`yards`,`miles`,`nautical-miles`,`us-feet`,`millimeters`,`centimeters`,`decimeters`,`meters`,`kilometers`],nre=[`square-inches`,`square-feet`,`square-yards`,`square-miles`,`square-nautical-miles`,`square-us-feet`,`square-millimeters`,`square-centimeters`,`square-decimeters`,`square-meters`,`square-kilometers`,`acres`,`ares`,`hectares`],rre=[`cubic-inches`,`cubic-feet`,`cubic-yards`,`cubic-miles`,`liters`,`cubic-millimeters`,`cubic-centimeters`,`cubic-decimeters`,`cubic-meters`,`cubic-kilometers`],pu=[`metric`,`imperial`];[...pu,...nre];var mu=[...pu,...tre];[...pu,...rre];var ire=new Map([[`meters`,`square-meters`],[`feet`,`square-feet`],[`us-feet`,`square-us-feet`]]);function hu(e){let t=Qne[e];if(!t)throw Error(`unknown type`);return t}function gu(e,t=null){return t||=hu(e),fu[t].baseUnit===e}function _u(e,t,n){if(t===n)return e;let r=hu(t);if(r!==hu(n))throw Error(`incompatible units`);let i=gu(t,r)?e:$ne(e,t,r);return gu(n,r)?i:ere(i,n,r)}function are(e,t,n,r=!1){if(!r&&Ll(t))throw Error(`Unable to convert from an angular unit to a linear unit.`);let i=Mu(t);return i!==n&&(e=i?_u(e,i,n):_u(e*=Ou(t),`meters`,n)),e}function ore(e,t,n,r=!1){if(!r&&Ll(n))throw Error(`Unable to convert from a linear unit to an angular unit.`);let i=Mu(n);return t!==i&&(e=i?_u(e,t,i):_u(e,t,`meters`)/Ou(n)),e}function vu(e){switch(e){case`metric`:return`meters`;case`imperial`:return`feet`;default:return e}}function sre(e){return vu(e)}function cre(e){switch(e){case`metric`:return`square-meters`;case`imperial`:return`square-feet`;default:return e}}function lre(e,t,n){switch(n){case`metric`:return bu(e,t);case`imperial`:return Su(e,t);default:return n}}function yu(e,t,n){switch(n){case`metric`:return xu(e,t);case`imperial`:return Cu(e,t);default:return n}}function bu(e,t){let n=_u(e,t,`meters`);return Math.abs(n)<3e3?`meters`:`kilometers`}function xu(e,t){let n=_u(e,t,`meters`);return Math.abs(n)<1e5?`meters`:`kilometers`}function Su(e,t){let n=_u(e,t,`feet`);return Math.abs(n)<1e3?`feet`:`miles`}function Cu(e,t){let n=_u(e,t,`feet`);return Math.abs(n)<1e5?`feet`:`miles`}function ure(e,t){let n=_u(e,t,`square-meters`);return Math.abs(n)<3e6?`square-meters`:`square-kilometers`}function dre(e,t){let n=_u(e,t,`square-feet`);return Math.abs(n)<1e6?`square-feet`:`square-miles`}function wu(e,t,n){return _u(e,t,`meters`)/(n*Math.PI/180)}function Tu(e){return Zne.fromJSON(e.toLowerCase())||null}function Eu(e){return e==null||Rl(e)?ku(e,!1)??1:1}function Du(e){return Ou(e)>=nu(e).metersPerDegree?`meters`:Mu(e)}function Ou(e,t=Po.metersPerDegree){return ku(e,!0)??t}function ku(e,t=!1){let n=e?.wkid??null,r=e?.wkt2??e?.wkt??null,i=null;if(n){if(Ul(n))return Fo.metersPerDegree;if(Gl(n))return Io.metersPerDegree;i=su.values[su[n]],!i&&t&&lu.has(n)&&(i=Xne)}else r&&(Pu(r)?i=Au(ou.exec(r),i):Nu(r)&&(i=Au(cu.exec(r),i)));return i}function fre(e){return Ll(e)?1:Ou(e)}function Au(e,t){return e?.[1]?ju(e[1]):t}function ju(e){return parseFloat(e.split(`,`)[1])}function Mu(e){let t=e?.wkid??null,n=e?.wkt2??e?.wkt??null,r=null;if(t)r=su.units[su[t]];else if(n){let e=Pu(n)?ou:Nu(n)?cu:null;if(e){let t=e.exec(n);t?.[1]&&(r=Fu(t[1]))}}return r==null?null:Tu(r)}function pre(e){let t=Mu(e);return t!=null&&mu.includes(t)?t:null}function mre(e){let t=Du(e);return t!=null&&mu.includes(t)?t:null}function hre(e){let t=Mu(e);return t==null?null:ire.get(t)}function Nu(e){return/^GEOCCS/i.test(e)}function Pu(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}var gre=1e-7;function Fu(e){let t=/[\\"']([^\\"']+)/.exec(e)?.[1];if(!t||!Tu(t)){let n=ju(e);t=null;let r=su.values;for(let e=0;e<r.length;++e)if(Math.abs(n-r[e])<gre){t=su.units[e];break}}return t}function Iu(e){let t=Mu(e);if(t==null)return null;switch(t){case`feet`:case`us-feet`:case`clarke-feet`:case`fathoms`:case`nautical-miles`:case`us-chains`:case`us-links`:case`us-miles`:case`clarke-yards`:case`clarke-chains`:case`clarke-links`:case`sears-yards`:case`sears-feet`:case`sears-chains`:case`sears-links`:case`benoit-1895-a-yards`:case`benoit-1895-a-feet`:case`benoit-1895-a-chains`:case`benoit-1895-a-links`:case`benoit-1895-b-yards`:case`benoit-1895-b-feet`:case`benoit-1895-b-chains`:case`benoit-1895-b-links`:case`1865-feet`:case`indian-feet`:case`indian-1937-feet`:case`indian-1962-feet`:case`indian-1975-feet`:case`indian-yards`:case`indian-1937-yards`:case`indian-1962-yards`:case`indian-1975-yards`:case`statute-miles`:case`gold-coast-feet`:case`british-1936-feet`:case`yards`:case`chains`:case`links`:case`sears-1922-truncated-yards`:case`sears-1922-truncated-feet`:case`sears-1922-truncated-chains`:case`sears-1922-truncated-links`:case`us-yards`:case`inches`:case`us-inches`:case`rods`:case`us-rods`:case`us-nautical-miles`:case`uk-nautical-miles`:case`smoots`:case`tx-vara`:case`points`:return`imperial`;case`millimeters`:case`centimeters`:case`meters`:case`german-meters`:case`kilometers`:case`decimeters`:case`micrometers`:case`nanometers`:case`50-kilometers`:case`150-kilometers`:return`metric`}return null}var Lu={esriAcres:`acres`,esriAres:`ares`,esriHectares:`hectares`,esriSquareCentimeters:`square-centimeters`,esriSquareDecimeters:`square-decimeters`,esriSquareFeet:`square-feet`,esriSquareInches:`square-inches`,esriSquareKilometers:`square-kilometers`,esriSquareMeters:`square-meters`,esriSquareMiles:`square-miles`,esriSquareMillimeters:`square-millimeters`,esriSquareUsFeet:`square-us-feet`,esriSquareYards:`square-yards`},Ru={esriCentimeters:`centimeters`,esriDecimeters:`decimeters`,esriFeet:`feet`,esriInches:`inches`,esriKilometers:`kilometers`,esriMeters:`meters`,esriMiles:`miles`,esriMillimeters:`millimeters`,esriNauticalMiles:`nautical-miles`,esriYards:`yards`},zu={esriDUDecimalDegrees:`degrees`,esriDURadians:`radians`},Bu=Cr()(Lu),Vu=Cr()(Ru),Hu=Cr()(zu),Uu,H=class extends L{static{Uu=this}static{this.GCS_NAD_1927=null}static{this.WGS84=null}static{this.WebMercator=null}static{this.PlateCarree=null}static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Uu.WebMercator;if(e?.wkid===4326)return Uu.WGS84;let t=new Uu;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.falseM=null,this.falseX=null,this.falseY=null,this.falseZ=null,this.mTolerance=null,this.mUnits=null,this.xyTolerance=null,this.xyUnits=null,this.zTolerance=null,this.zUnits=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e==`object`?e:{[typeof e==`string`?`wkt`:`wkid`]:e}}get isWGS84(){return zl(this)}get isWebMercator(){return Vl(this)}get isGeographic(){return Ll(this)}get isWrappable(){return ql(this)}get metersPerUnit(){return Ou(this)}get unit(){return Mu(this)||(this.isGeographic?`degrees`:null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Uu.WGS84)return new Uu(Yl);if(this===Uu.WebMercator)return new Uu(Xl);let e=new Uu;return this.wkid==null?(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)):(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=C(this.imageCoordinateSystem)),this.falseM!=null&&(e.falseM=this.falseM),this.falseX!=null&&(e.falseX=this.falseX),this.falseY!=null&&(e.falseY=this.falseY),this.falseZ!=null&&(e.falseZ=this.falseZ),this.mTolerance!=null&&(e.mTolerance=this.mTolerance),this.mUnits!=null&&(e.mUnits=this.mUnits),this.xyTolerance!=null&&(e.xyTolerance=this.xyTolerance),this.xyUnits!=null&&(e.xyUnits=this.xyUnits),this.zTolerance!=null&&(e.zTolerance=this.zTolerance),this.zUnits!=null&&(e.zUnits=this.zUnits),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;let{id:t,referenceServiceName:n}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||r?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):n?i.id===t&&i.referenceServiceName===n:i.id===t}return Pl(this,e)}toJSON(e){return this.write(void 0,e)}};e([O({readOnly:!0})],H.prototype,`isWGS84`,null),e([O({readOnly:!0})],H.prototype,`isWebMercator`,null),e([O({readOnly:!0})],H.prototype,`isGeographic`,null),e([O({readOnly:!0})],H.prototype,`isWrappable`,null),e([O({type:Wt,json:{write:!0}})],H.prototype,`latestWkid`,void 0),e([O({readOnly:!0})],H.prototype,`metersPerUnit`,null),e([O({readOnly:!0})],H.prototype,`unit`,null),e([O({type:Wt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],H.prototype,`wkid`,void 0),e([O({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],H.prototype,`wkt`,void 0),e([M(`wkt`),M(`web-scene`,`wkt`)],H.prototype,`writeWkt`,null),e([O({type:String,json:{write:!1}})],H.prototype,`wkt2`,void 0),e([O({type:Wt,json:{write:!0}})],H.prototype,`vcsWkid`,void 0),e([O({type:Wt,json:{write:!0}})],H.prototype,`latestVcsWkid`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`falseM`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`falseX`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`falseY`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`falseZ`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`mTolerance`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`mUnits`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`xyTolerance`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`xyUnits`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`zTolerance`,void 0),e([O({type:Number,json:{write:!0}})],H.prototype,`zUnits`,void 0),e([O()],H.prototype,`imageCoordinateSystem`,void 0),H=Uu=e([hr(`esri.geometry.SpatialReference`)],H),H.prototype.toJSON.isDefaultToJSON=!0,H.GCS_NAD_1927=F.freeze(new H({wkid:4267,wkt:`GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]`})),H.WGS84=F.freeze(new H(Yl)),H.WebMercator=F.freeze(new H(Xl)),H.PlateCarree=F.freeze(new H(Kne));var Wu=class extends L{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=H.WGS84}get cache(){return this.commitProperty(`spatialReference`),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof H)return e;if(e!=null){let n=new H;return n.read(e,t),n}return e}clone(){return console.warn(`.clone() is not implemented for `+this.declaredClass),null}clearCache(){this.notifyChange(`cache`)}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};e([N()],Wu.prototype,`type`,void 0),e([N({readOnly:!0})],Wu.prototype,`cache`,null),e([N({readOnly:!0})],Wu.prototype,`extent`,null),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wu.prototype,`hasM`,void 0),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Wu.prototype,`hasZ`,void 0),e([N({type:H,json:{write:!0},value:H.WGS84})],Wu.prototype,`spatialReference`,void 0),e([j(`spatialReference`)],Wu.prototype,`readSpatialReference`,null),Wu=e([P(`esri.geometry.Geometry`)],Wu);function Gu(e){if(e&&typeof e==`object`&&`type`in e&&e.type===`mesh`)throw new D(`internal:mesh`,`Mesh geometries are not supported for this operation`)}function Ku(e){e.forEach(Gu)}var qu=57.29577951308232,Ju=.017453292519943;function Yu(e){return e*qu}function Xu(e){return e*Ju}function _re(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Po.radius))}function Zu(e){return e.wkid!=null||e.wkt!=null}var Qu=[0,0];function $u(e,t,n,r,i){let a=e,o=i;if(o.spatialReference=n,`x`in a&&`x`in o)[o.x,o.y]=t(a.x,a.y,Qu,r);else if(`xmin`in a&&`xmin`in o)[o.xmin,o.ymin]=t(a.xmin,a.ymin,Qu,r),[o.xmax,o.ymax]=t(a.xmax,a.ymax,Qu,r);else if(`paths`in a&&`paths`in o||`rings`in a&&`rings`in o){let e=`paths`in a?a.paths:a.rings,n=[],i;for(let a=0;a<e.length;a++){let o=e[a];i=[],n.push(i);for(let e=0;e<o.length;e++)i.push(t(o[e][0],o[e][1],[0,0],r)),o[e].length>2&&i[e].push(o[e][2]),o[e].length>3&&i[e].push(o[e][3])}`paths`in o?o.paths=n:o.rings=n}else if(`points`in a&&`points`in o){let e=a.points,n=[];for(let i=0;i<e.length;i++)n[i]=t(e[i][0],e[i][1],[0,0],r),e[i].length>2&&n[i].push(e[i][2]),e[i].length>3&&n[i].push(e[i][3]);o.points=n}return i}function ed(e,t){let n=e&&(Zu(e)?e:e.spatialReference),r=t&&(Zu(t)?t:t.spatialReference);return!(e&&`type`in e&&e.type===`mesh`||t&&`type`in t&&t.type===`mesh`||!n||!r)&&(!!Pl(r,n)||Vl(r)&&zl(n)||Vl(n)&&zl(r))}function td(e,t){if(e==null)return null;let n=e.spatialReference,r=t&&(Zu(t)?t:t.spatialReference);return ed(n,r)?Pl(n,r)?C(e):Vl(r)?$u(e,nd,H.WebMercator,!1,C(e)):zl(r)?$u(e,rd,H.WGS84,!1,C(e)):null:null}function nd(e,t,n=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);let r=Xu(t);return n[0]=Xu(e)*Po.radius,n[1]=Po.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function rd(e,t,n=[0,0],r=!1){if(e===Al[0])n[0]=-180;else if(e===Al[1])n[0]=180;else{let t=Yu(e/Po.radius);n[0]=r?t:t-360*Math.floor((t+180)/360)}return n[1]=Yu(Math.PI/2-2*Math.atan(Math.exp(-t/Po.radius))),n}function id(e,t=!1,n=C(e)){return Gu(e),Gu(n),$u(e,nd,H.WebMercator,t,n)}function ad(e,t=!1,n=C(e)){return Gu(e),Gu(n),$u(e,rd,H.WGS84,t,n)}function od(e,t){let n=e.x-t.x,r=e.y-t.y,i=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(n*n+r*r+i*i)}function vre(e){return sd(e,cd)?.[0]??null}function yre(e){return sd(e,cd)?.[1]??null}function sd({x:e,y:t,spatialReference:n},r=[0,0]){if(n){if(Vl(n))return rd(e,t,r);if(Ll(n))return r[0]=e,r[1]=t,r}return null}var cd=[0,0],ld,ud=[0,0];function dd(e){return e&&(e.declaredClass===`esri.geometry.SpatialReference`||e.wkid!=null)}var U=ld=class extends Wu{static copy(e,t){t._set(`x`,e._get(`x`)),t._set(`y`,e._get(`y`)),t._set(`z`,e._get(`z`)),t._set(`m`,e._get(`m`));let n=e._get(`spatialReference`);t._set(`spatialReference`,F.isFrozen(n)?n:n.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type=`point`}normalizeCtorArgs(e,t,n,r,i){let a;if(Array.isArray(e))a=e,i=t,e=a[0],t=a[1],n=a[2],r=a[3];else if(e&&typeof e==`object`){if(a=e,e=a.x==null?a.longitude:a.x,t=a.y==null?a.latitude:a.y,n=a.z,r=a.m,(i=a.spatialReference)&&i.declaredClass!==`esri.geometry.SpatialReference`&&(i=new H(i)),a.longitude!=null||a.latitude!=null){if(a.longitude==null)E.getLogger(this).warn(`.longitude=`,`Latitude was defined without longitude`);else if(a.latitude==null)E.getLogger(this).warn(`.latitude=`,`Longitude was defined without latitude`);else if(!a.declaredClass&&i?.isWebMercator){let n=nd(a.longitude,a.latitude,ud);e=n[0],t=n[1]}}}else dd(n)?(i=n,n=null):dd(r)&&(i=r,r=null);let o={x:e,y:t};return o.x==null&&o.y!=null?E.getLogger(this).warn(`.y=`,`Y coordinate was defined without an X coordinate`):o.y==null&&o.x!=null&&E.getLogger(this).warn(`.x=`,`X coordinate was defined without a Y coordinate`),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty(`x`),this.commitProperty(`y`),this.commitProperty(`z`),this.commitProperty(`m`),this.commitProperty(`spatialReference`),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get(`m`)!==void 0)&&(this._set(`m`,e?0:void 0),this._set(`hasM`,e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get(`z`)!==void 0)&&(this._set(`z`,e?0:void 0),this._set(`hasZ`,e))}get latitude(){return yre(this)}set latitude(e){let{spatialReference:t,x:n}=this;e!=null&&t&&(t.isWebMercator?this._set(`y`,nd(n,e,ud)[1]):t.isGeographic&&this._set(`y`,e),this._set(`latitude`,e))}get longitude(){return vre(this)}set longitude(e){let{y:t,spatialReference:n}=this;e!=null&&n&&(n.isWebMercator?this._set(`x`,nd(e,t,ud)[0]):n.isGeographic&&this._set(`x`,e),this._set(`longitude`,e))}writeX(e,t,n){t[n]=isNaN(e)?`NaN`:e}readX(e){return typeof e==`string`?NaN:e}clone(){let e=new ld;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return ld.copy(e,this),this}equals(e){if(e==null)return!1;let{x:t,y:n,z:r,m:i,spatialReference:a}=this,{z:o,m:s}=e,{x:c,y:l,spatialReference:u}=e;if(!a.equals(u))if(a.isWebMercator&&u.isWGS84)[c,l]=nd(c,l),u=a;else{if(!a.isWGS84||!u.isWebMercator)return!1;[c,l]=rd(c,l),u=a}return t===c&&n===l&&r===o&&i===s&&a.wkid===u.wkid}offset(e,t,n){return this.x+=e,this.y+=t,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;let e=Fl(this.spatialReference);if(!e)return this;let t=this.x,[n,r]=e.valid,i=2*r,a;return t>r?(a=Math.ceil(Math.abs(t-r)/i),t-=a*i):t<n&&(a=Math.ceil(Math.abs(t-n)/i),t+=a*i),this._set(`x`,t),this}distance(e){return od(this,e)}toArray(){let e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};e([N({readOnly:!0})],U.prototype,`cache`,null),e([N({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],U.prototype,`hasM`,null),e([N({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],U.prototype,`hasZ`,null),e([N({type:Number})],U.prototype,`latitude`,null),e([N({type:Number})],U.prototype,`longitude`,null),e([N({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Tr(e=>isNaN(e)?e:wt(e))],U.prototype,`x`,void 0),e([M(`x`)],U.prototype,`writeX`,null),e([j(`x`)],U.prototype,`readX`,null),e([N({type:Number,json:{write:!0}})],U.prototype,`y`,void 0),e([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],U.prototype,`z`,void 0),e([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],U.prototype,`m`,void 0),U=ld=e([P(`esri.geometry.Point`)],U),U.prototype.toJSON.isDefaultToJSON=!0;var fd=class extends I(L){constructor(...e){super(...e),this.position=new U([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Ja}normalizeCtorArgs(e,t,n,r){if(e&&typeof e==`object`&&(`x`in e||Array.isArray(e))){let i={position:e};return t!=null&&(i.heading=t),n!=null&&(i.tilt=n),r!=null&&(i.fov=r),i}return e}writePosition(e,t,n,r){let i=e.clone();i.x=wt(e.x||0),i.y=wt(e.y||0),i.z=e.hasZ?wt(e.z||0):e.z,t[n]=i.write({},r)}readPosition(e,t){let n=new U;return n.read(e,t),n.x=wt(n.x||0),n.y=wt(n.y||0),n.z=n.hasZ?wt(n.z||0):n.z,n}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};e([N({type:U,json:{write:{isRequired:!0}}})],fd.prototype,`position`,void 0),e([M(`position`)],fd.prototype,`writePosition`,null),e([j(`position`)],fd.prototype,`readPosition`,null),e([N({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Tr(e=>wo.normalize(wt(e)))],fd.prototype,`heading`,void 0),e([N({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Tr(e=>Xa(wt(e),-180,180))],fd.prototype,`tilt`,void 0),e([N({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Tr(e=>Xa(wt(e,55),1,170))],fd.prototype,`fov`,void 0),e([N({type:Ja,nonNullable:!0,json:{read:!1,write:!1}})],fd.prototype,`layout`,void 0),fd=e([P(`esri.Camera`)],fd);var bre=fd,pd=[0,0];function md(e,t){return t!=null&&gd(e,t.x,t.y,t.z)}function xre(e,t){if(!t.points?.length)return!1;for(let n of t.points)if(!hd(e,n))return!1;return!0}function Sre(e,t){let{xmin:n,ymin:r,zmin:i,xmax:a,ymax:o,zmax:s}=t;return e.hasZ&&t.hasZ?gd(e,n,r,i)&&gd(e,n,o,i)&&gd(e,a,o,i)&&gd(e,a,r,i)&&gd(e,n,r,s)&&gd(e,n,o,s)&&gd(e,a,o,s)&&gd(e,a,r,s):gd(e,n,r)&&gd(e,n,o)&&gd(e,a,o)&&gd(e,a,r)}function hd(e,t){return gd(e,t[0],t[1])}function Cre(e,t){return gd(e,t[0],t[1],t[2])}function gd(e,t,n,r){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function _d(e,t){return pd[1]=t.y,pd[0]=t.x,wre(e,pd)}function wre(e,t){return vd(e.rings,t)}function vd(e,t){if(!e||e.length<1)return!1;if(Tre(e))return yd(!1,e,t);let n=!1;for(let r=0,i=e.length;r<i;r++)n=yd(n,e[r],t);return n}function Tre(e){return!Array.isArray(e[0][0])}function yd(e,t,n){let[r,i]=n,a=e,o=0;for(let e=0,n=t.length;e<n;e++){o++,o===n&&(o=0);let[s,c]=t[e],[l,u]=t[o];(c<i&&u>=i||u<i&&c>=i)&&s+(i-c)/(u-c)*(l-s)<r&&(a=!a)}return a}function Ere(e,t){return md(e,t)}function bd(e,t){let n=e.hasZ&&t.hasZ,r,i,a;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(n&&t.hasZ){if(e.zmin<=t.zmin){if(a=t.zmin,e.zmax<a)return!1}else if(a=e.zmin,t.zmax<a)return!1}return!0}function Dre(e,t){let{points:n,hasZ:r}=t,i=r?Cre:hd;for(let t of n)if(i(e,t))return!0;return!1}var xd=[0,0],Sd=[0,0],Cd=[0,0],wd=[0,0],Td=[xd,Sd,Cd,wd],Ed=[[Cd,xd],[xd,Sd],[Sd,wd],[wd,Cd]];function Dd(e,t){return Od(e,t.rings)}function Od(e,t){xd[0]=e.xmin,xd[1]=e.ymax,Sd[0]=e.xmax,Sd[1]=e.ymax,Cd[0]=e.xmin,Cd[1]=e.ymin,wd[0]=e.xmax,wd[1]=e.ymin;for(let e of Td)if(vd(t,e))return!0;for(let n of t){if(!n.length)continue;let t=n[0];if(hd(e,t))return!0;for(let r=1;r<n.length;r++){let i=n[r];if(hd(e,i)||Md(t,i,Ed))return!0;t=i}}return!1}function kd(e,t){xd[0]=e.xmin,xd[1]=e.ymax,Sd[0]=e.xmax,Sd[1]=e.ymax,Cd[0]=e.xmin,Cd[1]=e.ymin,wd[0]=e.xmax,wd[1]=e.ymin;let n=t.paths;for(let t of n){if(!n.length)continue;let r=t[0];if(hd(e,r))return!0;for(let n=1;n<t.length;n++){let i=t[n];if(hd(e,i)||Md(r,i,Ed))return!0;r=i}}return!1}var Ad=[0,0];function jd(e){for(let t=0;t<e.length;t++){let n=e[t];for(let r=0;r<n.length-1;r++){let i=n[r],a=n[r+1];for(let n=t+1;n<e.length;n++)for(let t=0;t<e[n].length-1;t++){let r=e[n][t],o=e[n][t+1];if(Nd(i,a,r,o,Ad)&&!(Ad[0]===i[0]&&Ad[1]===i[1]||Ad[0]===r[0]&&Ad[1]===r[1]||Ad[0]===a[0]&&Ad[1]===a[1]||Ad[0]===o[0]&&Ad[1]===o[1]))return!0}}let r=n.length;if(!(r<=4))for(let e=0;e<r-3;e++){let t=r-1;e===0&&(t=r-2);let i=n[e],a=n[e+1];for(let r=e+2;r<t;r++){let e=n[r],t=n[r+1];if(Nd(i,a,e,t,Ad)&&!(Ad[0]===i[0]&&Ad[1]===i[1]||Ad[0]===e[0]&&Ad[1]===e[1]||Ad[0]===a[0]&&Ad[1]===a[1]||Ad[0]===t[0]&&Ad[1]===t[1]))return!0}}}return!1}function Md(e,t,n){for(let r=0;r<n.length;r++)if(Nd(e,t,n[r][0],n[r][1]))return!0;return!1}function Nd(e,t,n,r,i){let[a,o]=e,[s,c]=t,[l,u]=n,[d,f]=r,p=d-l,m=a-l,h=s-a,g=f-u,_=o-u,v=c-o,y=g*h-p*v;if(y===0)return!1;let b=(p*_-g*m)/y,x=(h*_-v*m)/y;return b>=0&&b<=1&&x>=0&&x<=1&&(i&&(i[0]=a+b*(s-a),i[1]=o+b*(c-o)),!0)}function Pd(e){switch(e){case`esriGeometryEnvelope`:case`extent`:return bd;case`esriGeometryMultipoint`:case`multipoint`:return Dre;case`esriGeometryPoint`:case`point`:return Ere;case`esriGeometryMultiPatch`:case`multipatch`:case`esriGeometryPolygon`:case`polygon`:return Dd;case`esriGeometryPolyline`:case`polyline`:return kd}}var Fd;function Id(e){return e&&(e.declaredClass===`esri.geometry.SpatialReference`||e.wkid!=null)}function Ld(e,t,n){return t==null?n:n==null?t:e(t,n)}var Rd=Fd=class extends Wu{constructor(...e){super(...e),this.type=`extent`,this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,n,r,i){return Id(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e==`object`?(e.spatialReference=e.spatialReference==null?H.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:n,ymax:r,spatialReference:i??H.WGS84}}static fromPoint(e){return new Fd({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty(`xmin`),this.commitProperty(`ymin`),this.commitProperty(`zmin`),this.commitProperty(`mmin`),this.commitProperty(`xmax`),this.commitProperty(`ymax`),this.commitProperty(`zmax`),this.commitProperty(`mmax`),this.commitProperty(`spatialReference`),{}}get center(){let e=new U({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){let t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){let e=new Fd;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;let t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&ed(t,n)&&(e=t.isWebMercator?id(e):ad(e,!0)),e.type===`point`?md(this,e):e.type===`extent`&&Sre(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;let t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&ed(t,n)&&(e=t.isWebMercator?id(e):ad(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){let t=.5*(1-e),n=this.width*t,r=this.height*t;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){let e=(this.zmax-this.zmin)*t;this.zmin+=e,this.zmax-=e}if(this.hasM){let e=(this.mmax-this.mmin)*t;this.mmin+=e,this.mmax-=e}return this}intersects(e){if(e==null)return!1;e.type===`mesh`&&(e=e.extent);let t=this.spatialReference,n=e.spatialReference;return t&&n&&!Pl(t,n)&&ed(t,n)&&(e=t.isWebMercator?id(e):ad(e,!0)),Pd(e.type)(this,e)}normalize(){let e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,n){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ld(Math.min,this.zmin,e.zmin),this.zmax=Ld(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ld(Math.min,this.mmin,e.mmin),this.mmax=Ld(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ld(Math.max,this.zmin,e.zmin),this.zmax=Ld(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ld(Math.max,this.mmin,e.mmin),this.mmax=Ld(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Fl(this.spatialReference)){if(!e||!this.spatialReference)return this;let t=this.spatialReference,n=this._getCM(e);if(n){let r=t.isWebMercator?ad(n):n;this.xmin-=n.x,this.xmax-=n.x,t.isWebMercator||(r.x=zd(r.x,e).x),this.spatialReference=new H(at((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null,[n,r]=e.valid,i=this.xmin,a=this.xmax;return i>=n&&i<=r&&a>=n&&a<=r||(t=this.center),t}_normalize(e,t,n){let r=this.spatialReference;if(!r)return this;let i=n??Fl(r);if(i==null)return this;let a=this._getParts(i).map(e=>e.extent);if(a.length<2)return a[0]||this;if(a.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return a;let o=!0,s=!0;return a.forEach(e=>{e.hasZ||(o=!1),e.hasM||(s=!1)}),{rings:a.map(e=>{let t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(o){let n=(e.zmax-e.zmin)/2;for(let e=0;e<t.length;e++)t[e].push(n)}if(s){let n=(e.mmax-e.mmin)/2;for(let e=0;e<t.length;e++)t[e].push(n)}return t}),hasZ:o,hasM:s,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];let{ymin:n,ymax:r,spatialReference:i}=this,a=this.width,o=this.xmin,s=this.xmax,c;e||=Fl(i);let[l,u]=e.valid;c=zd(this.xmin,e);let d=c.x,f=c.frameId;c=zd(this.xmax,e);let p=c.x,m=c.frameId,h=d===p&&a>0;if(a>2*u){let e=new Fd(o<s?d:p,n,u,r,i),a=new Fd(l,n,o<s?p:d,r,i),c=new Fd(0,n,u,r,i),h=new Fd(l,n,0,r,i),g=[],_=[];e.contains(c)&&g.push(f),e.contains(h)&&_.push(f),a.contains(c)&&g.push(m),a.contains(h)&&_.push(m);for(let e=f+1;e<m;e++)g.push(e),_.push(e);t.push({extent:e,frameIds:[f]},{extent:a,frameIds:[m]},{extent:c,frameIds:g},{extent:h,frameIds:_})}else d>p||h?t.push({extent:new Fd(d,n,u,r,i),frameIds:[f]},{extent:new Fd(l,n,p,r,i),frameIds:[m]}):t.push({extent:new Fd(d,n,p,r,i),frameIds:[f]});this.cache._parts=t}let n=this.hasZ,r=this.hasM;if(n||r){let e={};n&&(e.zmin=this.zmin,e.zmax=this.zmax),r&&(e.mmin=this.mmin,e.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(e)}return t}};function zd(e,t){let[n,r]=t.valid,i=2*r,a,o=0;return e>r?(a=Math.ceil(Math.abs(e-r)/i),e-=a*i,o=a):e<n&&(a=Math.ceil(Math.abs(e-n)/i),e+=a*i,o=-a),{x:e,frameId:o}}e([N({readOnly:!0})],Rd.prototype,`cache`,null),e([N({readOnly:!0})],Rd.prototype,`center`,null),e([N({readOnly:!0})],Rd.prototype,`extent`,null),e([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Rd.prototype,`hasM`,null),e([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Rd.prototype,`hasZ`,null),e([N({readOnly:!0})],Rd.prototype,`height`,null),e([N({type:H,json:{write:!0},value:H.WGS84})],Rd.prototype,`spatialReference`,void 0),e([N({readOnly:!0})],Rd.prototype,`width`,null),e([N({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Rd.prototype,`xmin`,void 0),e([N({type:Number,json:{write:!0}})],Rd.prototype,`ymin`,void 0),e([N({type:Number,json:{origins:{"web-scene":{write:!1}},read:e=>e??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Rd.prototype,`mmin`,void 0),e([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Rd.prototype,`zmin`,void 0),e([N({type:Number,json:{write:!0}})],Rd.prototype,`xmax`,void 0),e([N({type:Number,json:{write:!0}})],Rd.prototype,`ymax`,void 0),e([N({type:Number,json:{origins:{"web-scene":{write:!1}},read:e=>e??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Rd.prototype,`mmax`,void 0),e([N({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Rd.prototype,`zmax`,void 0),Rd=Fd=e([P(`esri.geometry.Extent`)],Rd),Rd.prototype.toJSON.isDefaultToJSON=!0;function Bd(e){return e}function Vd(e=Bre){return Bd([e[0],e[1],e[2],e[3]])}function Hd(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Ud(e,t,n,r,i=Vd()){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Wd(e,t=Vd()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Gd(e,t,n=new Rd){return n.xmin=e[0],n.ymin=e[1],n.xmax=e[2],n.ymax=e[3],n.spatialReference=t,n}function Kd(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function qd(e,t){t<e[0]&&(e[0]=t),t>e[2]&&(e[2]=t)}function Jd(e,t){t<e[1]&&(e[1]=t),t>e[3]&&(e[3]=t)}function Ore(e,t,n){if(t!=null)if(`length`in t)$d(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case`extent`:n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case`point`:n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}else Hd(n,e)}function kre(e,t,n=e){let r=t.length,i=e[0],a=e[1],o=e[2],s=e[3];for(let e=0;e<r;e++){let n=t[e];i=Math.min(i,n[0]),a=Math.min(a,n[1]),o=Math.max(o,n[0]),s=Math.max(s,n[1])}return n[0]=i,n[1]=a,n[2]=o,n[3]=s,n}function Are(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function Yd(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function Xd(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function jre(e){return Yd(e)*Xd(e)}function Mre(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function Nre(e){let t=Yd(e),n=Xd(e);return Math.sqrt(t*t+n*n)}function Pre(e,t){return!!e&&Zd(e,t.x,t.y)}function Zd(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function Fre(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Ire(e,t,n){return Math.max(t[0],e[0])-n<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-n<=Math.min(t[3],e[3])}function Qd(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Lre(e,t,n,r){return r??=e,r[0]=e[0]+t,r[1]=e[1]+n,r[2]=e[2]+t,r[3]=e[3]+n,r}function Rre(e){return e?Hd(e,ef):Vd(ef)}function $d(e){return e!=null&&e.length===4}function zre(e,t){return $d(e)&&$d(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}var ef=Bd([1/0,1/0,-1/0,-1/0]),Bre=Bd([0,0,0,0]),tf=1e-6;function nf(){return tf}function Vre(e){tf=e}var rf=Math.random,Hre=Math.PI/180,Ure=180/Math.PI;function af(e){return e*Hre}function sf(e){return e*Ure}function Wre(e,t){return Math.abs(e-t)<=tf*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:rf,equals:Wre,getEpsilon:nf,setEpsilon:Vre,toDegree:sf,toRadian:af},Symbol.toStringTag,{value:`Module`}));function cf(e,t){return e[0]=t[0],e[1]=t[1],e}function lf(e,t,n){return e[0]=t,e[1]=n,e}function uf(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function df(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function ff(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function pf(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function Gre(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Kre(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function mf(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function hf(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function qre(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function gf(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function _f(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function vf(e,t){let n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function yf(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function bf(e){let t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function xf(e){let t=e[0],n=e[1];return t*t+n*n}function Sf(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Jre(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Cf(e,t){let n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function wf(e,t){return e[0]*t[0]+e[1]*t[1]}function Tf(e,t,n){let r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function Ef(e,t,n,r){let i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function Yre(e,t=1){let n=2*rf()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function Df(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function Of(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function kf(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function Xre(e,t,n){let r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function Af(e,t,n,r){let i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=i*s-a*o+n[0],e[1]=i*o+a*s+n[1],e}function jf(e,t){let n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));let c=(n*i+r*a)*o*s;return c>1?0:c<-1?Math.PI:Math.acos(c)}function Mf(e){return`vec2(`+e[0]+`, `+e[1]+`)`}function Nf(e,t){return e[0]===t[0]&&e[1]===t[1]}function Pf(e,t){let n=e[0],r=e[1],i=t[0],a=t[1],o=nf();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=o*Math.max(1,Math.abs(r),Math.abs(a))}function Ff(e,t,n,r,i){let a=t[0]-n[0],o=t[1]-n[1],s=(r[0]*a+r[1]*o)*(i-1);return a=r[0]*s,o=r[1]*s,e[0]=t[0]+a,e[1]=t[1]+o,e}var If=bf,Lf=df,Rf=ff,zf=pf,Bf=vf,Vf=yf,Hf=xf;Object.freeze(Object.defineProperty({__proto__:null,add:uf,angle:jf,ceil:Gre,copy:cf,cross:Tf,dist:Bf,distance:vf,div:zf,divide:pf,dot:wf,equals:Pf,exactEquals:Nf,floor:Kre,inverse:Jre,len:If,length:bf,lerp:Ef,max:hf,min:mf,mul:Rf,multiply:ff,negate:Sf,normalize:Cf,projectAndScale:Ff,random:Yre,rotate:Af,round:qre,scale:gf,scaleAndAdd:_f,set:lf,sqrDist:Vf,sqrLen:Hf,squaredDistance:yf,squaredLength:xf,str:Mf,sub:Lf,subtract:df,transformMat2:Df,transformMat2d:Of,transformMat3:kf,transformMat4:Xre},Symbol.toStringTag,{value:`Module`}));function Uf(e,t,n,r){return e[0]=t[0]*(1-r)+n[0]*r,e[1]=t[1]*(1-r)+n[1]*r,e}function Wf(e,t){return yf(e,t)}function Gf(e,t,n){let r=Wf(t,n);if(r===0)return Wf(t,e);let i=(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0]);return i*i/r}function Kf(e,t,n,r,i){let[a,o]=t,[s,c]=n,[l,u]=r,[d,f]=i,p=(a-s)*(u-f)-(o-c)*(l-d);if(p===0)return null;let m=(a*c-o*s)*(l-d)-(a-s)*(l*f-u*d),h=(a*c-o*s)*(u-f)-(o-c)*(l*f-u*d);return e[0]=m/p,e[1]=h/p,e}var qf=2*Math.PI;function Jf(e,t){let n=Math.atan2(e,t);return n<0?n+qf:n}function Yf(e){return Math.abs(e)%qf}function Xf(e){let t=Yf(e);return t<Math.PI?t:qf-t}function Zf(e,t){return{min:Math.min(e,t),max:Math.max(e,t)}}function Qf(e,t,n,r){if(no(Yf(e-t),0))return n?[e,e]:[e,r?e-qf:e+qf];let[i,a]=r?[e-qf,e]:[e,e+qf];return[e,$f({min:i,max:a},t)]}function $f({min:e,max:t},n){let r;return r=t-n,r>=qf?(r-=r%qf,n+r):(r=n-e,r>=qf?(r-=r%qf,n-r):n)}function ep(e,t){let n=$f(e,t);return n>e.min&&n<e.max?n:Xf(n-e.min)<Xf(n-e.max)?e.min:e.max}function tp(e,t,n,r=10){return t.map(t=>{let i=t;for(let t=0;t<r;t++){let[t,r,a,o,s,c]=n(i),l=e[0]-t,u=e[1]-r,d=-a,f=-o;i+=-(2*l*d+2*u*f)/(2*d*d+2*l*-s+2*f*f+2*u*-c||1e-6)}return i})}var np=[0,0];function rp(e){let t=1-e,n=t*t,r=e*e;return[n*t,3*e*n,3*r*t,r*e]}function ip(e,t,n,r,i){let[a,o,s,c]=rp(i);return[e[0]*a+t[0]*o+n[0]*s+r[0]*c,e[1]*a+t[1]*o+n[1]*s+r[1]*c]}function ap(e,t,n,r,i){let[a,o,s,c]=rp(i);return e*a+t*o+n*s+r*c}function op(e,t,n){let r=e,[i,a,o]=t.b;return ip(r,a,o,i,n)}function sp(e,t,n){let r=e,[i,a,o]=t.b,s=Uf([0,0],r,a,n),c=Uf(np,a,o,n),l=Uf([0,0],o,i,n),u=Uf([0,0],s,c,n),d=Uf([0,0],c,l,n);return[{b:[Uf([],u,d,n),s,u]},{b:[[...i],d,l]}]}function cp(e,t,n){let r=e,[i,a,o]=t.b,s=tp(n,[.1,.5,.9],e=>{let t=1-e,[n,s]=ip(r,a,o,i,e);return[n,s,3*t*t*(a[0]-r[0])+6*t*e*(o[0]-a[0])+3*e*e*(i[0]-o[0]),3*t*t*(a[1]-r[1])+6*t*e*(o[1]-a[1])+3*e*e*(i[1]-o[1]),6*t*(o[0]-2*a[0]+r[0])+6*e*(i[0]-2*o[0]+a[0]),6*t*(o[1]-2*a[1]+r[1])+6*e*(i[1]-2*o[1]+a[1])]}).map(e=>Math.min(1,Math.max(0,e)));s.push(0,1);let c=1/0,l=s.map(e=>{let t=ip(r,a,o,i,e),[s,l]=t,u=n[0]-s,d=n[1]-l,f=Math.sqrt(u*u+d*d);return c=Math.min(f,c),{t:e,curvePoint:t,distance:f}}),u=[];for(let e of l){let{t,distance:n}=e;mo(n,c)&&!u.some(({t:e})=>no(e,t))&&u.push(e)}return u}function lp(e,t,n){let r=t,[i,a,o]=n.b;if(Kd(e,r),Kd(e,i),Zd(e,a[0],a[1])&&Zd(e,o[0],o[1]))return e;for(let t of up(r[0],a[0],o[0],i[0]))t>0&&t<1&&qd(e,ap(r[0],a[0],o[0],i[0],t));for(let t of up(r[1],a[1],o[1],i[1]))t>0&&t<1&&Jd(e,ap(r[1],a[1],o[1],i[1],t));return e}function up(e,t,n,r){let i=3*(3*(t-n)-e+r),a=6*(e-2*t+n),o=3*(t-e);if(i===0)return a===0?[]:[-o/a];let s=Math.sqrt(a*a-4*i*o);return[(-a+s)/(2*i),(-a-s)/(2*i)]}function dp(e,t,n){let r=0,i=[t];for(let t=0;t<16;t++){let t=e,a=[];for(let e of i)a.push(...sp(t,e,.5)),t=e.b[0];i=a,t=e,r=0;let o=0;for(let e of i){let[n,i,a]=e.b,s=Math.sqrt(Wf(t,n));r+=(s+(Math.sqrt(Wf(t,i))+Math.sqrt(Wf(i,a))+Math.sqrt(Wf(a,n))))/2,o+=s,t=n}if(r-o<n)return r}return r}function fp(e,t,n){let[r,i]=e,[a,o]=t,[s,c]=n,[l,u]=[a-r,o-i],d=l*(s-r)+u*(c-i);d/=l**2+u**2,d=Xa(d,0,1);let f=Uf([0,0],e,t,d);return{t:d,curvePoint:f,distance:Math.sqrt(Wf(f,n))}}var pp=class{constructor(e,t,n,r,i,a){this.cx=e,this.cy=t,this.radius=n,this.thetaStart=r,this.thetaEnd=i,this.isInvalid=a}get startPoint(){let{cx:e,cy:t,radius:n,thetaStart:r}=this;return[e+n*Math.cos(r),t+n*Math.sin(r)]}get endPoint(){let{cx:e,cy:t,radius:n,thetaEnd:r}=this;return[e+n*Math.cos(r),t+n*Math.sin(r)]}};function mp(e,t){let{cx:n,cy:r,radius:i}=e;return[n+i*Math.cos(t),r+i*Math.sin(t)]}function hp(e,t){if(e.isInvalid)return Uf([0,0],e.startPoint,e.endPoint,t);let{thetaStart:n,thetaEnd:r}=e;return mp(e,n*(1-t)+r*t)}function gp(e,t){if(e.isInvalid)return fp(e.startPoint,e.endPoint,t);let{cx:n,cy:r,thetaStart:i,thetaEnd:a}=e,[o,s]=t,c=ep(Zf(i,a),Math.atan2(s-r,o-n)),l=mp(e,c);return{t:(c-i)/(a-i),curvePoint:l,distance:Math.sqrt(Wf(t,l))}}function _p(e,t){if(t.isInvalid)return Kd(e,t.startPoint),Kd(e,t.endPoint),e;let{cx:n,cy:r,radius:i,thetaStart:a,thetaEnd:o}=t;Kd(e,mp(t,a)),Kd(e,mp(t,o));let s=Zf(a,o),c=Math.PI/2,l=0;for(let t of[[n+i,r],[n,r+i],[n-i,r],[n,r-i]])l=$f(s,l),l>s.min&&l<s.max&&Kd(e,t),l+=c;return e}function vp(e){if(e.isInvalid)return 2*e.radius;let{radius:t,thetaStart:n,thetaEnd:r}=e;return t*Math.abs(r-n)}function yp(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function bp(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xp(e,t,n,r,i,a,o,s,c,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e}function Sp(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Cp(e,t){if(e===t){let n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function wp(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=u*o-s*l,f=-u*a+s*c,p=l*a-o*c,m=n*d+r*f+i*p;return m?(m=1/m,e[0]=d*m,e[1]=(-u*r+i*l)*m,e[2]=(s*r-i*o)*m,e[3]=f*m,e[4]=(u*n-i*c)*m,e[5]=(-s*n+i*a)*m,e[6]=p*m,e[7]=(-l*n+r*c)*m,e[8]=(o*n-r*a)*m,e):null}function Tp(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8];return e[0]=o*u-s*l,e[1]=i*l-r*u,e[2]=r*s-i*o,e[3]=s*c-a*u,e[4]=n*u-i*c,e[5]=i*a-n*s,e[6]=a*l-o*c,e[7]=r*c-n*l,e[8]=n*o-r*a,e}function Ep(e){let t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*(l*a-o*c)+n*(-l*i+o*s)+r*(c*i-a*s)}function Dp(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1],m=n[2],h=n[3],g=n[4],_=n[5],v=n[6],y=n[7],b=n[8];return e[0]=f*r+p*o+m*l,e[1]=f*i+p*s+m*u,e[2]=f*a+p*c+m*d,e[3]=h*r+g*o+_*l,e[4]=h*i+g*s+_*u,e[5]=h*a+g*c+_*d,e[6]=v*r+y*o+b*l,e[7]=v*i+y*s+b*u,e[8]=v*a+y*c+b*d,e}function Op(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=f*r+p*o+l,e[7]=f*i+p*s+u,e[8]=f*a+p*c+d,e}function kp(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*i+f*s,e[2]=p*a+f*c,e[3]=p*o-f*r,e[4]=p*s-f*i,e[5]=p*c-f*a,e[6]=l,e[7]=u,e[8]=d,e}function Ap(e,t,n){let r=n[0],i=n[1],a=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=a*t[6],e[7]=a*t[7],e[8]=a*t[8],e}function jp(e,t,n){let r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function Mp(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Np(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Pp(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Fp(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Ip(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,l=n*o,u=r*o,d=r*s,f=i*o,p=i*s,m=i*c,h=a*o,g=a*s,_=a*c;return e[0]=1-d-m,e[3]=u-_,e[6]=f+g,e[1]=u+_,e[4]=1-l-m,e[7]=p-h,e[2]=f-g,e[5]=p+h,e[8]=1-l-d,e}function Lp(e,t){let n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10],d=u*o-s*l,f=-u*a+s*c,p=l*a-o*c,m=n*d+r*f+i*p;if(!m)return null;let h=1/m;return e[0]=d*h,e[1]=(-u*r+i*l)*h,e[2]=(s*r-i*o)*h,e[3]=f*h,e[4]=(u*n-i*c)*h,e[5]=(-s*n+i*a)*h,e[6]=p*h,e[7]=(-l*n+r*c)*h,e[8]=(o*n-r*a)*h,e}function Rp(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],m=t[12],h=t[13],g=t[14],_=t[15],v=n*s-r*o,y=n*c-i*o,b=n*l-a*o,x=r*c-i*s,S=r*l-a*s,ee=i*l-a*c,te=u*h-d*m,ne=u*g-f*m,re=u*_-p*m,ie=d*g-f*h,ae=d*_-p*h,oe=f*_-p*g,se=v*oe-y*ae+b*ie+x*re-S*ne+ee*te;return se?(se=1/se,e[0]=(s*oe-c*ae+l*ie)*se,e[1]=(c*re-o*oe-l*ne)*se,e[2]=(o*ae-s*re+l*te)*se,e[3]=(i*ae-r*oe-a*ie)*se,e[4]=(n*oe-i*re+a*ne)*se,e[5]=(r*re-n*ae-a*te)*se,e[6]=(h*ee-g*S+_*x)*se,e[7]=(g*b-m*ee-_*y)*se,e[8]=(m*S-h*b+_*v)*se,e):null}function zp(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Bp(e){return`mat3(`+e[0]+`, `+e[1]+`, `+e[2]+`, `+e[3]+`, `+e[4]+`, `+e[5]+`, `+e[6]+`, `+e[7]+`, `+e[8]+`)`}function Vp(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Hp(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Up(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function Wp(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Gp(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function Kp(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function qp(e,t){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=t[0],f=t[1],p=t[2],m=t[3],h=t[4],g=t[5],_=t[6],v=t[7],y=t[8],b=nf();return Math.abs(n-d)<=b*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=b*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-p)<=b*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-m)<=b*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-h)<=b*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-g)<=b*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-_)<=b*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-v)<=b*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=b*Math.max(1,Math.abs(u),Math.abs(y))}function Jp(e){let t=nf(),n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8];return Math.abs(1-(n*n+a*a+c*c))<=t&&Math.abs(1-(r*r+o*o+l*l))<=t&&Math.abs(1-(i*i+s*s+u*u))<=t}var Yp=Dp,Xp=Up;Object.freeze(Object.defineProperty({__proto__:null,add:Hp,adjoint:Tp,copy:bp,determinant:Ep,equals:qp,exactEquals:Kp,frob:Vp,fromMat2d:Fp,fromMat4:yp,fromQuat:Ip,fromRotation:Np,fromScaling:Pp,fromTranslation:Mp,identity:Sp,invert:wp,isOrthoNormal:Jp,mul:Yp,multiply:Dp,multiplyScalar:Wp,multiplyScalarAndAdd:Gp,normalFromMat4:Rp,normalFromMat4Legacy:Lp,projection:zp,rotate:kp,scale:Ap,scaleByVec2:jp,set:xp,str:Bp,sub:Xp,subtract:Up,translate:Op,transpose:Cp},Symbol.toStringTag,{value:`Module`}));function Zp(){return[1,0,0,0,1,0,0,0,1]}function Qp(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function $p(e,t,n,r,i,a,o,s,c){return[e,t,n,r,i,a,o,s,c]}var em=Zp();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:em,clone:Qp,create:Zp,fromValues:$p},Symbol.toStringTag,{value:`Module`}));var tm=Zp();function nm(e,t,n){let[r,i]=e,[a,o]=t,[s,c]=n;xp(tm,r,a,s,i,o,c,1,1,1);let l=Ep(tm),u=4*l/(Wf(e,t)+Wf(t,n)+Wf(n,e));if(!isFinite(u)||Math.abs(u)<1e-8)return null;let d=r**2+i**2,f=a**2+o**2,p=s**2+c**2;xp(tm,d,f,p,i,o,c,1,1,1);let m=Ep(tm);return xp(tm,d,f,p,r,a,s,1,1,1),[m/l*.5,Ep(tm)/l*-.5]}function rm(e,t){let[n,r]=t.c,i=nm(e,r,n),a=i==null,o=i??Uf([],e,n,.5),[s,c]=e,[l,u]=r,[d,f]=n,[p,m]=o,h=s-p,g=c-m,_=Math.sqrt(h*h+g*g),v=Jf(c-m,s-p),y=Jf(u-m,l-p),b=Jf(f-m,d-p);return(y-v)*(b-y)<0&&(b+=2*Math.sign(v-b)*Math.PI),new pp(p,m,_,v,b,a)}function im(e,t,n){let r=hp(e,n/2),i=hp(e,n),a=hp(e,(n+1)/2);return[{c:[i,r]},{c:[[...t.c[0]],a]}]}function Zre(e,t){let[n]=t.c,{cx:r,cy:i,thetaStart:a,thetaEnd:o,radius:s,isInvalid:c}=rm(e,t);return{a:[n,[r,i],Math.abs(o-a)<Math.PI?1:0,a>o?1:0,c?a:0,s,c?0:1]}}function Qre(e){return`curveRings`in e&&!!e.curveRings?.length||`curvePaths`in e&&!!e.curvePaths?.length}function $re(e){return`curveRings`in e?e.curveRings:e.curvePaths}function am(e){return`b`in e}function om(e){return`c`in e}function sm(e){return Array.isArray(e)}function eie(e){return`a`in e}function cm(e){return`a`in e&&e.a.length===4}function lm(e){return`a`in e&&e.a.length===7}function um(e){return sm(e)?e:am(e)?e.b[0]:om(e)?e.c[0]:e.a[0]}function dm(e){if(am(e)){let[t,n,r]=e.b;return{b:[[...t],[...n],[...r]]}}if(om(e)){let[t,n]=e.c;return{c:[[...t],[...n]]}}if(sm(e))return[...e];if(cm(e)){let[t,n,r,i]=e.a;return{a:[[...t],[...n],r,i]}}if(lm(e)){let[t,n,r,i,a,o,s]=e.a;return{a:[[...t],[...n],r,i,a,o,s]}}return e}function fm(e,t){let[n,r,i,a]=t.a,[o,s]=e,[c,l]=n,[u,d]=r,f=o-u,p=s-d,m=Math.sqrt(f*f+p*p),h=c-u,g=l-d,_=Math.sqrt(h*h+g*g),v=m===0||_===0||!mo(m,_),y=m,[b,x]=Qf(Jf(s-d,o-u),Math.atan2(l-d,c-u),i,a);return new pp(u,d,y,b,x,v)}function tie(e,t,n){let{cx:r,cy:i,thetaStart:a,thetaEnd:o}=e,[s,c,l,u]=t.a,d=a*(1-n)+o*n;return[{a:[hp(e,n),[r,i],Math.abs(d-a)<Math.PI?1:0,u]},{a:[[...s],[r,i],Math.abs(o-d)<Math.PI?1:0,u]}]}var nie=class{constructor(e,t,n,r,i,a,o,s,c){this.cx=e,this.cy=t,this.a=n,this.b=r,this.cosR=i,this.sinR=a,this.u1=o,this.u2=s,this.isInvalid=c}};function pm(e,t){let[n,r,i,a,o,s,c]=t.a,[l,u]=e,[d,f]=n,[p,m]=r,h=s*c,g=Math.cos(o),_=Math.sin(o),[v,y]=Qf(Jf(1/h*(u-m)*g-1/h*(l-p)*_,1/s*(u-m)*_+1/s*(l-p)*g),Math.atan2(1/h*(f-m)*g-1/h*(d-p)*_,1/s*(f-m)*_+1/s*(d-p)*g),i,a);return new nie(p,m,s,h,g,_,v,y,s===0||h===0)}function mm(e,t){let{a:n,b:r,cosR:i,sinR:a,cx:o,cy:s}=e,c=Math.cos(t),l=Math.sin(t);return[n*c*i-r*l*a+o,n*c*a+r*l*i+s]}function hm(e,t){let{u1:n,u2:r}=e;return mm(e,n*(1-t)+r*t)}function rie(e,t,n){if(n<0||n>1)return[];if(n===0||n===1)return[dm(t)];let[r,[i,a],o,s,c,l,u]=t.a,{u1:d,u2:f}=e,p=d*(1-n)+f*n;return[{a:[[...hm(e,n)],[i,a],Math.abs(p-d)<Math.PI?1:0,s,c,l,u]},{a:[[...r],[i,a],Math.abs(f-p)<Math.PI?1:0,s,c,l,u]}]}function iie(e,t){let{a:n,b:r,cosR:i,sinR:a,u1:o,u2:s}=e,c=Math.PI/6,l=tp(t,[1*c,2*c,4*c,5*c,7*c,8*c,10*c,11*c],t=>{let o=Math.cos(t),s=Math.sin(t),[c,l]=mm(e,t);return[c,l,-n*i*s-r*a*o,-n*a*s+r*i*o,-n*i*o+r*a*s,-n*a*o-r*i*s]}),u=Zf(o,s),d=new Set(l.map(e=>$f(u,e)).filter(e=>e>u.min&&e<u.max));d.add(o),d.add(s);let f,p,m=1/0;for(let n of d){let r=mm(e,n),[i,a]=r,c=t[0]-i,l=t[1]-a,u=c*c+l*l;u<m&&(f=(n-o)/(s-o),p=r,m=u)}return{t:f,curvePoint:p,distance:Math.sqrt(m)}}function aie(e,t,n){let r=pm(t,n),{a:i,b:a,u1:o,u2:s,cosR:c,sinR:l,isInvalid:u}=r,d=n.a[0];if(Kd(e,t),Kd(e,d),u)return e;let f=Math.atan2(-a*l,i*c),p=f+Math.PI,m=Math.atan2(a*c,i*l),h=m+Math.PI,g=Zf(o,s);for(let t of[f,p,m,h].map(e=>$f(g,e)))t>g.min&&t<g.max&&Kd(e,mm(r,t));return e}function oie(e,t,n){let[r,i,a,o,s,c,l]=t.a,u=pm(e,t),{u1:d,u2:f,isInvalid:p}=u,m=f-d;if(p)return Math.sqrt(Wf(e,r));let h=[0,0],g=0,_=[hm(u,0),hm(u,.25),hm(u,.5),hm(u,.75),hm(u,1)];for(let e=0;e<14;e++){let e=_.length-1,t=m/(2*e),r=[];for(let n=0;n<e;n++)r.push(_[n]),r.push(mm(u,d+(2*n+1)*t));r.push(_[_.length-1]),_=r,g=0;let a=0;for(let e=1;e<_.length;e++){let t=_[e-1],n=_[e];if(g+=Math.sqrt(Wf(t,n)),e>1){let r=_[e-2],o=Kf(h,r,t,i,n);a+=o?Math.sqrt(Wf(t,o)):Math.abs(n[0]-t[0])+Math.abs(n[1]-t[1])}else a+=g}if(a-g<n)return g}return g}var gm=Zp(),_m=Zp(),vm=Zp(),ym=Zp();function sie(e,t,n){let[r,i,a,o,s,c,l]=t.a,u=pm(e,t),{cosR:d,sinR:f,a:p,b:m,cx:h,cy:g}=u,_=kf([0,0],r,n),v=kf([0,0],i,n),y=n[0]*n[4]<0?1-o:o;{let e=p*p*f*f+m*m*d*d,t=2*(m*m-p*p)*f*d,n=p*p*d*d+m*m*f*f,r=-2*e*h-t*g,i=-t*h-2*n*g;xp(gm,e,t/2,r/2,t/2,n,i/2,r/2,i/2,e*h*h+t*h*g+n*g*g-p*p*m*m)}if(wp(_m,n),_m==null){let t=kf([0,0],e,n);return{a:[_,v,a,o,Jf(_[1],_[0]),Math.sqrt(Wf(_,t))/2,0]}}Cp(vm,_m),Dp(ym,Dp(ym,vm,gm),_m);{let e=ym[0],t=2*ym[1],n=ym[4],r=2*ym[2],i=2*ym[5],o=t*t-4*e*n,s=2*(e*i*i+n*r*r-t*r*i+o*ym[8]),c=Math.sqrt((e-n)**2+t*t),l=-Math.sqrt(s*(e+n+c))/o,u=-Math.sqrt(s*(e+n-c))/o;return{a:[_,v,a,y,.5*Jf(-t,n-e),l,u/l]}}}function cie(e,t,n){if(sm(n))return Kd(e,t),Kd(e,n),e;if(am(n))return lp(e,t,n);if(om(n)){let r=rm(t,n);return _p(e,r)}if(cm(n)){let r=fm(t,n);return _p(e,r)}return aie(e,t,n)}function bm(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function xm(e){return e.points!==void 0}function Sm(e){return e.x!==void 0&&e.y!==void 0}function Cm(e){return e.paths!==void 0}function wm(e){return e.rings!==void 0}function Tm(e){function t(t,n){return t==null?n:n==null?t:e(t,n)}return t}var Em=Tm(Math.min),Dm=Tm(Math.max);function lie(e,t){return Cm(t)?km(e,t.curvePaths??t.paths,!1,!1)??e:wm(t)?km(e,t.curveRings??t.rings,!1,!1)??e:xm(t)?jm(e,t.points,!1,!1,!1,!1):bm(t)?Am(e,t):(Sm(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function uie(e){let t,n,r,i;for(e.reset(),t=r=1/0,n=i=-1/0;e.nextPath();){let a=Om(e);t=Math.min(a[0],t),r=Math.min(a[1],r),n=Math.max(a[2],n),i=Math.max(a[3],i)}return Vd([t,r,n,i])}function Om(e){let t,n,r,i;for(t=r=1/0,n=i=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),n=Math.max(e.x,n),i=Math.max(e.y,i);return Vd([t,r,n,i])}function die(e,t){return Cm(t)?km(e,t.curvePaths??t.paths,!0,!1)??e:wm(t)?km(e,t.curveRings??t.rings,!0,!1)??e:xm(t)?jm(e,t.points,!0,!1,!0,!1):bm(t)?Am(e,t,!0,!1,!0,!1):(Sm(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function km(e,t,n,r){let i=n?3:2;if(!t.length||!t[0].length)return null;let a,o,s,c,[l,u]=um(t[0][0]),d=l,f=u;for(let e=0;e<t.length;e++){let p=t[e];for(let e=0;e<p.length;e++){let t=um(p[e]),[m,h]=t;if(l=Em(l,m),u=Em(u,h),d=Dm(d,m),f=Dm(f,h),n&&t.length>2){let e=t[2];a=Em(a,e),o=Dm(o,e)}if(r&&t.length>i){let e=t[i];s=Em(s,e),c=Dm(c,e)}let g=p[e];if(sm(g)||e<1)continue;let _=um(p[e-1]),v=Ud(l,u,d,f);[l,u,d,f]=cie(v,_,g)}}return n?r?(e[0]=l,e[1]=u,e[2]=a,e[3]=s,e[4]=d,e[5]=f,e[6]=o,e[7]=c,e.length=8,e):(e[0]=l,e[1]=u,e[2]=a,e[3]=d,e[4]=f,e[5]=o,e.length=6,e):r?(e[0]=l,e[1]=u,e[2]=s,e[3]=d,e[4]=f,e[5]=c,e.length=6,e):(e[0]=l,e[1]=u,e[2]=d,e[3]=f,e.length=4,e)}function Am(e,t,n,r,i,a){let o=t.xmin,s=t.xmax,c=t.ymin,l=t.ymax,u=t.zmin,d=t.zmax,f=t.mmin,p=t.mmax;return i?(u||=0,d||=0,a?(f||=0,p||=0,e[0]=o,e[1]=c,e[2]=u,e[3]=f,e[4]=s,e[5]=l,e[6]=d,e[7]=p,e):(e[0]=o,e[1]=c,e[2]=u,e[3]=s,e[4]=l,e[5]=d,e)):a?(f||=0,p||=0,e[0]=o,e[1]=c,e[2]=f,e[3]=s,e[4]=l,e[5]=p,e):(e[0]=o,e[1]=c,e[2]=s,e[3]=l,e)}function jm(e,t,n,r,i,a){let o=n?3:2,s=r&&a,c=n&&i;if(!t.length||!t[0].length)return null;let l,u,d,f,[p,m]=t[0],[h,g]=t[0];for(let e=0;e<t.length;e++){let n=t[e],[r,i]=n;if(p=Em(p,r),m=Em(m,i),h=Dm(h,r),g=Dm(g,i),c&&n.length>2){let e=n[2];l=Em(l,e),u=Dm(u,e)}if(s&&n.length>o){let e=n[o];d=Em(l,e),f=Dm(u,e)}}return i?(l||=0,u||=0,a?(d||=0,f||=0,e[0]=p,e[1]=m,e[2]=l,e[3]=d,e[4]=h,e[5]=g,e[6]=u,e[7]=f,e):(e[0]=p,e[1]=m,e[2]=l,e[3]=h,e[4]=g,e[5]=u,e)):a?(d||=0,f||=0,e[0]=p,e[1]=m,e[2]=d,e[3]=h,e[4]=g,e[5]=f,e):(e[0]=p,e[1]=m,e[2]=h,e[3]=g,e)}function fie(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function pie(e){return e.points!==void 0}function mie(e){return e.x!==void 0&&e.y!==void 0}function hie(e){return e.paths!==void 0}function gie(e){return e.rings!==void 0}var Mm=[];function Nm(e,t,n,r){return{xmin:e,ymin:t,xmax:n,ymax:r}}function Pm(e,t,n,r,i,a){return{xmin:e,ymin:t,zmin:n,xmax:r,ymax:i,zmax:a}}function Fm(e,t,n,r,i,a){return{xmin:e,ymin:t,mmin:n,xmax:r,ymax:i,mmax:a}}function Im(e,t,n,r,i,a,o,s){return{xmin:e,ymin:t,zmin:n,mmin:r,xmax:i,ymax:a,zmax:o,mmax:s}}function Lm(e,t=!1,n=!1){return t?n?Im(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Pm(e[0],e[1],e[2],e[3],e[4],e[5]):n?Fm(e[0],e[1],e[2],e[3],e[4],e[5]):Nm(e[0],e[1],e[2],e[3])}function _ie(e){return e?fie(e)?e:mie(e)?vie(e):gie(e)?zm(e):hie(e)?Bm(e):pie(e)?Rm(e):null:null}function Rm(e){let{hasZ:t,hasM:n,points:r}=e,i=jm(Mm,r,t??!1,n??!1,t??!1,n??!1);return i?Lm(i,t,n):null}function vie(e){let{x:t,y:n,z:r,m:i}=e,a=i!=null;return r==null?a?Fm(t,n,i,t,n,i):Nm(t,n,t,n):a?Im(t,n,r,i,t,n,r,i):Pm(t,n,r,t,n,r)}function zm(e){let{hasZ:t,hasM:n,rings:r,curveRings:i}=e,a=km(Mm,i??r,t??!1,n??!1);return a?Lm(a,t,n):null}function Bm(e){let{hasZ:t,hasM:n,paths:r,curvePaths:i}=e,a=km(Mm,i??r,t??!1,n??!1);return a?Lm(a,t,n):null}function Vm(e,t,n=!1){let{hasM:r,hasZ:i}=e;Array.isArray(t)?t.length!==4||r||i?t.length===3&&n&&!r?(i=!0,r=!1):t.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=r}var Hm;function yie(e){if(!e)return;let{points:t,hasM:n,hasZ:r,spatialReference:i}=e;switch(t??=[],t?.at(0)?.length){case 4:r??=!0,n??=!0;break;case 3:r??=!0!==n,n??=!r;break;default:r??=!1,n??=!1}return i??=H.WGS84,{...e,hasM:n,hasZ:r,points:t,spatialReference:i}}var Um=Hm=class extends Wu{constructor(e){super(yie(e)),this.points=[],this.type=`multipoint`}get cache(){return this.commitProperty(`points`),this.commitProperty(`hasZ`),this.commitProperty(`hasM`),this.commitProperty(`spatialReference`),{}}get extent(){let e=Rm(this);return e?new Rd({...e,spatialReference:this.spatialReference}):null}writePoints(e,t){t.points=C(this.points)}clone(){let{points:e,spatialReference:t,hasM:n,hasZ:r}=this;return new Hm({points:C(e),spatialReference:t.clone(),hasM:n,hasZ:r})}addPoint(e){return Vm(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange(`points`),this}getPoint(e){if(!this._validateInputs(e))return null;let t=this.points[e],n={x:t[0],y:t[1],spatialReference:this.spatialReference},r=2;return this.hasZ&&(n.z=t[2],r=3),this.hasM&&(n.m=t[r]),new U(n)}removePoint(e){if(!this._validateInputs(e))return null;let t=new U(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange(`points`),t}setPoint(e,t){return this._validateInputs(e)?(Vm(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange(`points`),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};e([N({readOnly:!0})],Um.prototype,`cache`,null),e([N({readOnly:!0})],Um.prototype,`extent`,null),e([N({type:[[Number]],json:{write:{isRequired:!0}}})],Um.prototype,`points`,void 0),e([M(`points`)],Um.prototype,`writePoints`,null),Um=Hm=e([P(`esri.geometry.Multipoint`)],Um),Um.prototype.toJSON.isDefaultToJSON=!0;function bie(e){let t=[];for(e.reset();e.nextPath();){let n=[];for(;e.nextPoint();){let t=[e.x,e.y];e.hasZ&&t.push(e.z),e.hasM&&t.push(e.m),n.push(t)}t.push(n)}return e.reset(),t}function Wm(e){let t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}function xie(e){if(!e)return null;if(Array.isArray(e))return e;let t=e.hasZ,n=e.hasM;if(e.type===`point`)return n&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:n?[e.x,e.y,e.m]:[e.x,e.y];if(e.type===`polygon`)return e.rings.slice();if(e.type===`polyline`)return e.paths.slice();if(e.type===`multipoint`)return e.points.map(e=>[e]);if(e.type===`extent`){let t=e.clone().normalize();if(!t)return null;let n=!1,r=!1;return t.forEach(e=>{e.hasZ&&(n=!0),e.hasM&&(r=!0)}),t.map(e=>{let t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n&&e.hasZ){let n=.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(n)}if(r&&e.hasM){let n=.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(n)}return t})}return null}function Gm(e,t){let n=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){let i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function Km(e,t,n){let r=e[0]+n*(t[0]-e[0]),i=e[1]+n*(t[1]-e[1]);return e.length>2&&t.length>2?[r,i,e[2]+n*(t[2]-e[2])]:[r,i]}function Sie(e,t,n,r){return qm(e,t,n[r],n[r+1])}function qm(e,t,n,r){let[i,a]=t,[o,s]=n,[c,l]=r,u=c-o,d=l-s,f=u*u+d*d,p=(i-o)*u+(a-s)*d,m=Math.min(1,Math.max(0,p/f));return e[0]=o+u*m,e[1]=s+d*m,e}function Cie(e,t,n,r,i,a){let o=n,s=r,c=i-o,l=a-s;if(c!==0||l!==0){let n=((e-o)*c+(t-s)*l)/(c*c+l*l);n>1?(o=i,s=a):n>0&&(o+=c*n,s+=l*n)}return c=e-o,l=t-s,c*c+l*l}function Jm(e,t){return Km(e,t,.5)}function wie(e){let t=e.length,n=0;for(let r=0;r<t-1;++r)n+=Gm(e[r],e[r+1]);return n}function Tie(e,t){if(t<=0)return e[0];let n=e.length,r=0;for(let i=0;i<n-1;++i){let n=Gm(e[i],e[i+1]);if(t-r<n){let a=(t-r)/n;return Km(e[i],e[i+1],a)}r+=n}return e[n-1]}function Ym(e,t=0,n=1){let r=0,i=e.length,a=e[0];for(let o=1;o<i;o++){let i=e[o];r+=(i[t]-a[t])*(i[n]+a[n]),a=i}if(Xm(e)){let i=e[0];r+=(i[t]-a[t])*(i[n]+a[n])}return r>=0}function Xm(e){let t=e.length;return t>0&&!S(e[0],e[t-1])}function Eie(e){`rings`in e&&(Zm(e),Die(e))}function Zm(e){if(`rings`in e)for(let t of e.rings)Xm(t)&&t.push(t[0].slice())}function Die(e){if(!(`rings`in e)||e.rings.length===0||Ym(e.rings[0]))return!1;for(let t of e.rings)t.reverse();return!0}function Oie(e){return e.type!==`polygon`&&e.type!==`polyline`||Qm(e.type===`polygon`?e.rings:e.paths,e.spatialReference),e}function Qm(e,t){let n=Fl(t);if(!n)return;let r=n.valid[0],i=n.valid[1],a=i-r;for(let t of e){let e=1/0,n=-1/0;for(let a of t){let t=$m(a[0],r,i);e=Math.min(e,t),n=Math.max(n,t),a[0]=t}let o=n-e;a-o<o&&t.forEach(e=>{e[0]<0&&(e[0]+=a)})}}function $m(e,t,n){let r=n-t;return e<t?n-(t-e)%r:e>n?t+(e-t)%r:e}function kie(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function eh(e){return nh(e.rings,e.hasZ??!1)}function th(e){let t=eh(e);if(!t)return null;let{hasZ:n,spatialReference:r}=e,[i,a,o]=t;return isNaN(i)||isNaN(a)||n&&isNaN(o)?null:{x:i,y:a,z:n?o:void 0,spatialReference:r}}function nh(e,t){if(!e?.length)return null;let n=[],r=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,a=e.length;n<a;n++){let a=rh(e[n],t,i);a&&r.push(a)}if(r.sort((e,n)=>{let r=e[2]-n[2];return r===0&&t&&(r=e[4]-n[4]),r}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],t&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||t&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){let r=e[0]&&e[0].length?jie(e[0],t):null;if(!r)return null;n[0]=r[0],n[1]=r[1],t&&r.length>2&&(n[2]=r[2])}return n}function rh(e,t,n){let r=0,i=0,a=0,o=0,s=0,c=e.length?e[0][0]:0,l=e.length?e[0][1]:0,u=e.length&&t?e[0][2]:0;for(let d=0;d<e.length;d++){let f=e[d],p=e[(d+1)%e.length],[m,h,g]=f,_=m-c,v=h-l,[y,b,x]=p,S=y-c,ee=b-l,te=_*ee-S*v;if(o+=te,r+=(_+S)*te,i+=(v+ee)*te,t&&f.length>2&&p.length>2){let e=g-u,t=x-u,n=_*t-S*e;a+=(e+t)*n,s+=n}m<n[0]&&(n[0]=m),m>n[1]&&(n[1]=m),h<n[2]&&(n[2]=h),h>n[3]&&(n[3]=h),t&&(g<n[4]&&(n[4]=g),g>n[5]&&(n[5]=g))}if(o>0&&(o*=-1),s>0&&(s*=-1),!o)return null;o*=.5,s*=.5;let d=[r/(6*o)+c,i/(6*o)+l,o];return t&&(n[4]===n[5]||s===0?(d[3]=(n[4]+n[5])/2,d[4]=0):(d[3]=a/(6*s)+u,d[4]=s)),d}function Aie(e,t){let n=0,r=0,i=0;e.nextPoint();let a=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let s=0;s<e.pathSize;s++){e.seekInPath(s);let c=[e.x,e.y];e.seekInPath((s+1)%e.pathSize);let l=[e.x,e.y],[u,d]=c,f=u-a,p=d-o,[m,h]=l,g=m-a,_=h-o,v=f*_-g*p;i+=v,n+=(f+g)*v,r+=(p+_)*v,u<t[0]&&(t[0]=u),u>t[1]&&(t[1]=u),d<t[2]&&(t[2]=d),d>t[3]&&(t[3]=d)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+a,r/(6*i)+o,i]):null}function jie(e,t){let n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0],i=0,a=0,o=0,s=0;for(let c=0,l=e.length;c<l-1;c++){let l=e[c],u=e[c+1];if(l&&u){n[0]=l[0],n[1]=l[1],r[0]=u[0],r[1]=u[1],t&&l.length>2&&u.length>2&&(n[2]=l[2],r[2]=u[2]);let e=Gm(n,r);if(e){i+=e;let n=Jm(l,u);a+=e*n[0],o+=e*n[1],t&&n.length>2&&(s+=e*n[2])}}}return i>0?t?[a/i,o/i,s/i]:[a/i,o/i]:e.length?e[0]:null}function ih(e){let{hasZ:t,totalSize:n}=e;if(n===0)return null;let r=[],i=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(e.reset();e.nextPath();){let t=rh(Wm(e),e.hasZ,a);t&&i.push(t)}if(i.sort((e,n)=>{let r=e[2]-n[2];return r===0&&t&&(r=e[4]-n[4]),r}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<a[0]||r[0]>a[1]||r[1]<a[2]||r[1]>a[3]||t&&(r[2]<a[4]||r[2]>a[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();let n=e.pathSize?Mie(e):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function Mie(e){let{hasZ:t}=e,n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0],i=0,a=0,o=0,s=0;if(e.nextPoint()){let c=e.x,l=e.y,u=e.z;for(;e.nextPoint();){let d=e.x,f=e.y,p=e.z;n[0]=c,n[1]=l,r[0]=d,r[1]=f,t&&(n[2]=u,r[2]=p);let m=Gm(n,r);if(m){i+=m;let e=Jm(n,r);a+=m*e[0],o+=m*e[1],t&&e.length>2&&(s+=m*e[2])}c=d,l=f,u=p}}return i>0?t?[a/i,o/i,s/i]:[a/i,o/i]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}var Nie=1e-6;function Pie(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Nie){let t=ih(e);return t?[t[0],t[1]]:null}let n=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;let r=[e.x,e.y];for(e.reset();e.nextPath();)Iie(n,r,e);return n[0]*=1/t,n[1]*=1/t,n[0]+=r[0],n[1]+=r[1],n}var Fie=1/3;function Iie(e,t,n){if(!e||!n||n.pathSize<3)return null;n.nextPoint();let r=n.x,i=n.y;n.nextPoint();let a,o=n.x-r,s=n.y-i,c=0,l=0;for(;n.nextPoint();)c=n.x-r,l=n.y-i,a=.5*Fie*(c*s-l*o),e[0]+=a*(o+c),e[1]+=a*(s+l),o=c,s=l;let u=n.getCurrentRingArea(),d=[r,i];return d[0]-=t[0],d[1]-=t[1],d[0]*=u,d[1]*=u,e[0]+=d[0],e[1]+=d[1],e}var ah;function oh(e){return!Array.isArray(e[0])}function Lie(e){return typeof e[0]?.[0]==`number`}function Rie(e){if(!e)return;let{rings:t,hasM:n,hasZ:r,spatialReference:i}=e;switch(t??=[],Lie(t)&&(t=[t]),t[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=!0!==n,n??=!r;break;default:r??=!1,n??=!1}return i??=H.WGS84,{...e,hasM:n,hasZ:r,rings:t,spatialReference:i}}var sh=ah=class extends Wu{static fromExtent(e){let t=e.clone().normalize(),{spatialReference:n}=e,r=!1,i=!1;for(let e of t)e.hasZ&&(r=!0),e.hasM&&(i=!0);let a={rings:t.map(e=>{let t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(r&&e.hasZ){let n=e.zmin+.5*(e.zmax-e.zmin);for(let e=0;e<t.length;e++)t[e].push(n)}if(i&&e.hasM){let n=e.mmin+.5*(e.mmax-e.mmin);for(let e=0;e<t.length;e++)t[e].push(n)}return t}),spatialReference:n};return r&&(a.hasZ=!0),i&&(a.hasM=!0),new ah(a)}constructor(e){super(Rie(e)),this.curveRings=void 0,this.rings=[],this.type=`polygon`}get cache(){return this.commitProperty(`curveRings`),this.commitProperty(`hasM`),this.commitProperty(`hasZ`),this.commitProperty(`rings`),this.commitProperty(`spatialReference`),{}}get centroid(){kr(E.getLogger(this),`centroid`,{replacement:`Please use centroidOperator.execute() instead.`,version:`4.34`,warnOnce:!0});let e=th(this);return e?U.fromJSON(e):null}writeCurveRings(e,t){t.curveRings=C(e)}get extent(){let e=zm(this),{spatialReference:t}=this;return e?new Rd({...e,spatialReference:t}):null}get isSelfIntersecting(){return kr(E.getLogger(this),`isSelfIntersecting`,{replacement:`Please use simplifyOperator.isSimple() instead.`,version:`4.33`,warnOnce:!0}),jd(this.rings)}writeRings(e,t){t.rings=C(this.rings)}addRing(e){if(!e)return;let t=this.rings,n=t.length;if(oh(e)){let r=[];for(let t=0,n=e.length;t<n;t++)r[t]=e[t].toArray();t[n]=r}else t[n]=e.slice();return this.notifyChange(`rings`),this}clone(){let e=new ah;return e.spatialReference=this.spatialReference,e.rings=C(this.rings),e.curveRings=C(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;let t=this.spatialReference,n=e.spatialReference;if(t!=null!=(n!=null)||t!=null&&n!=null&&!t.equals(n)||this.rings.length!==e.rings.length)return!1;let r=([e,t,n,r],[i,a,o,s])=>e===i&&t===a&&(n==null&&o==null||n===o)&&(r==null&&s==null||r===s);for(let t=0;t<this.rings.length;t++){let n=this.rings[t],i=e.rings[t];if(!S(n,i,r))return!1}return!0}contains(e){if(!e)return!1;let t=td(e,this.spatialReference);return _d(this,t??e)}isClockwise(e){let t=oh(e)?e.map(e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]):e;return Ym(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;let n=this.rings[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new U(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new U(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new U(n[0],n[1],n[2],n[3],this.spatialReference):new U(n[0],n[1],this.spatialReference)}insertPoint(e,t,n){return this._validateInputs(e,t,!0)?(Vm(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e].splice(t,0,n),this.notifyChange(`rings`),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;let n=new U(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange(`rings`),n}removeRing(e){if(!this._validateInputs(e,null))return null;let t=this.rings.splice(e,1)[0],n=this.spatialReference,r=t.map(e=>new U(e,n));return this.notifyChange(`rings`),r}setPoint(e,t,n){return this._validateInputs(e,t)?(Vm(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e][t]=n,this.notifyChange(`rings`),this):this}_validateInputs(e,t,n=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){let r=this.rings[e];if(n&&(t<0||t>r.length)||!n&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};e([N({readOnly:!0})],sh.prototype,`cache`,null),e([N({readOnly:!0})],sh.prototype,`centroid`,null),e([N({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],sh.prototype,`curveRings`,void 0),e([M(`curveRings`)],sh.prototype,`writeCurveRings`,null),e([N({readOnly:!0})],sh.prototype,`extent`,null),e([N({readOnly:!0})],sh.prototype,`isSelfIntersecting`,null),e([N({type:[[[Number]]],json:{write:{isRequired:!0}}})],sh.prototype,`rings`,void 0),e([M(`rings`)],sh.prototype,`writeRings`,null),sh=ah=e([P(`esri.geometry.Polygon`)],sh),sh.prototype.toJSON.isDefaultToJSON=!0;var ch;function zie(e){return!Array.isArray(e[0])}function Bie(e){return typeof e[0]?.[0]==`number`}function Vie(e){if(!e)return;let{paths:t,hasM:n,hasZ:r,spatialReference:i}=e;switch(t??=[],Bie(t)&&(t=[t]),t[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=!0!==n,n??=!r;break;default:r??=!1,n??=!1}return i??=H.WGS84,{...e,hasM:n,hasZ:r,paths:t,spatialReference:i}}var lh=ch=class extends Wu{constructor(e){super(Vie(e)),this.curvePaths=void 0,this.paths=[],this.type=`polyline`}get cache(){return this.commitProperty(`curvePaths`),this.commitProperty(`hasM`),this.commitProperty(`hasZ`),this.commitProperty(`paths`),this.commitProperty(`spatialReference`),{}}writeCurvePaths(e,t){t.curvePaths=C(e)}get extent(){let e=Bm(this),{spatialReference:t}=this;return e?new Rd({...e,spatialReference:t}):null}writePaths(e,t){t.paths=C(this.paths)}addPath(e){if(!e)return;let t=this.paths,n=t.length;if(zie(e)){let r=[];for(let t=0,n=e.length;t<n;t++)r[t]=e[t].toArray();t[n]=r}else t[n]=e.slice();return this.notifyChange(`paths`),this}clone(){let e=new ch;return e.spatialReference=this.spatialReference,e.paths=C(this.paths),e.curvePaths=C(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;let n=this.paths[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new U(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new U(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new U(n[0],n[1],n[2],n[3],this.spatialReference):new U(n[0],n[1],this.spatialReference)}insertPoint(e,t,n){return this._validateInputs(e,t,!0)?(Vm(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e].splice(t,0,n),this.notifyChange(`paths`),this):this}removePath(e){if(!this._validateInputs(e,null))return null;let t=this.paths.splice(e,1)[0],n=this.spatialReference,r=t.map(e=>new U(e,n));return this.notifyChange(`paths`),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;let n=new U(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange(`paths`),n}setPoint(e,t,n){return this._validateInputs(e,t)?(Vm(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e][t]=n,this.notifyChange(`paths`),this):this}_validateInputs(e,t,n=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){let r=this.paths[e];if(n&&(t<0||t>r.length)||!n&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};e([N({readOnly:!0})],lh.prototype,`cache`,null),e([N({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],lh.prototype,`curvePaths`,void 0),e([M(`curvePaths`)],lh.prototype,`writeCurvePaths`,null),e([N({readOnly:!0})],lh.prototype,`extent`,null),e([N({type:[[[Number]]],json:{write:{isRequired:!0}}})],lh.prototype,`paths`,void 0),e([M(`paths`)],lh.prototype,`writePaths`,null),lh=ch=e([P(`esri.geometry.Polyline`)],lh),lh.prototype.toJSON.isDefaultToJSON=!0;function uh(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function dh(e){return e.points!==void 0}function fh(e){return e.x!==void 0&&e.y!==void 0}function ph(e){return e.paths!==void 0||e.curvePaths!==void 0}function mh(e){return e.rings!==void 0||e.curveRings!==void 0}function Hie(e){return typeof e==`object`&&`vertexAttributes`in e}function hh(e){return e?fh(e)?`esriGeometryPoint`:ph(e)?`esriGeometryPolyline`:mh(e)?`esriGeometryPolygon`:uh(e)?`esriGeometryEnvelope`:dh(e)?`esriGeometryMultipoint`:null:null}function Uie(e){return e!=null&&(`hasZ`in e&&e.hasZ||`z`in e&&e.z!=null)}function Wie(e){return e!=null&&(`hasM`in e&&e.hasM||`m`in e&&e.m!=null)}function gh(e){return e==null?null:e instanceof Wu?e:fh(e)?U.fromJSON(e):ph(e)?lh.fromJSON(e):mh(e)?sh.fromJSON(e):dh(e)?Um.fromJSON(e):uh(e)?Rd.fromJSON(e):null}var Gie={esriGeometryPoint:U,esriGeometryPolyline:lh,esriGeometryPolygon:sh,esriGeometryEnvelope:Rd,esriGeometryMultipoint:Um,esriGeometryMultiPatch:sh};function Kie(e){return e&&Gie[e]||null}var _h=Cr()({esriGeometryPoint:`point`,esriGeometryMultipoint:`multipoint`,esriGeometryPolyline:`polyline`,esriGeometryPolygon:`polygon`}),vh=Cr()({esriGeometryPoint:`point`,esriGeometryMultipoint:`multipoint`,esriGeometryPolyline:`polyline`,esriGeometryPolygon:`polygon`,esriGeometryEnvelope:`extent`,mesh:`mesh`}),yh={base:Wu,key:`type`,typeMap:{extent:Rd,multipoint:Um,point:U,polyline:lh,polygon:sh}},qie=new xr({esriGeometryBezier3Curve:`cubic-bezier`,esriGeometryCircularArc:`circular-arc`,esriGeometryEllipticArc:`elliptic-arc`},{ignoreUnknown:!0});function Jie(e){return e.type===`point`}function Yie(e){return e.type===`multipoint`}function Xie(e){return e.type===`polygon`}function Zie(e){return e.type===`polyline`}var bh,xh=bh=class extends L{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new bh({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry==null?null:this.targetGeometry.clone(),camera:this.camera==null?null:this.camera.clone()})}};e([N({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ch}}}}})],xh.prototype,`rotation`,void 0),e([Tr(`rotation`)],xh.prototype,`castRotation`,null),e([N({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ch}}}}})],xh.prototype,`scale`,void 0),e([N({types:yh,json:{read:gh,write:!0,origins:{"web-scene":{read:gh,write:{overridePolicy:Ch}}}}})],xh.prototype,`targetGeometry`,void 0),e([N({type:bre,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],xh.prototype,`camera`,void 0),xh=bh=e([P(`esri.Viewpoint`)],xh);var Sh=xh;function Ch(){return{enabled:!this.camera}}var wh=e=>{let t=e;class n extends t{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(e,t){let n=this._listenersMap?.get(e);if(!n)return!1;let r=!1;for(let e of n.slice()){let n=`deref`in e?e.deref():e;n?n?.call(this,t):r=!0}return r&&(n=n.filter(e=>!(`deref`in e)||e.deref()!=null),this._listenersMap.set(e,n)),n.length>0}on(e,t){if(Array.isArray(e)){let n=e.map(e=>this.on(e,t));return Qt(n)}if(e.includes(`,`))throw TypeError(`Evented.on() with a comma delimited string of event types is not supported`);this._listenersMap??=new Map;let n=this._listenersMap.get(e)||[];return n.push(t),this._listenersMap.set(e,n),Yt(()=>{let n=this._listenersMap?.get(e),r=n?.indexOf(t)??-1;r>=0&&n.splice(r,1)})}once(e,t){let n=this.on(e,e=>{n.remove(),(`deref`in t?t.deref():t)?.call(null,e)});return n}hasEventListener(e){let t=this._listenersMap?.get(e);return t!=null&&t.length>0}}return n},Th=wh(class{}),Eh=Th,Dh=wh(F),Oh=class extends Gr{notify(){let e=this._observers;if(e&&e.length>0){let t=e.slice();for(let e of t)e.onInvalidated(),e.onCommitted()}}},kh,Qie=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},$ie=class{constructor(e,t,n,r,i){this.target=e,this.added=t,this.removed=n,this.start=r,this.deleteCount=i}},Ah=new Ur(()=>new Qie,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function jh(e){e&&typeof e==`object`&&`destroy`in e&&typeof e.destroy==`function`&&e.destroy()}function Mh(e){return e?e instanceof zh?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Nh(e){if(e?.length)return e[0]}function eae(e,t,n,r){let i=Math.min(e.length-n,t.length-r),a=0;for(;a<i&&e[n+a]===t[r+a];)a++;return a}function Ph(e,t,n,r){t&&t.forEach((t,i,a)=>{e.push(t),Ph(e,n.call(r,t,i,a),n,r)})}var Fh=new Set,Ih=new Set,Lh=new Set,Rh=new Map,tae=0,zh=kh=class extends Dh{static ofType(t){if(!t)return kh;if(Rh.has(t))return Rh.get(t);let n=null;if(typeof t==`function`)n=t.prototype.declaredClass;else if(t.base)n=t.base.prototype.declaredClass;else for(let e in t.typeMap){let r=t.typeMap[e].prototype.declaredClass;n?n+=` | ${r}`:n=r}let r=class extends kh{};return e([wr({Type:t,ensureType:typeof t==`function`?Lt(t):Ut(t)})],r.prototype,`itemType`,void 0),r=e([hr(`esri.core.Collection<${n}>`)],r),Rh.set(t,r),r}static isCollection(e){return e!=null&&e instanceof kh}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Oh,this._length=0,this._items=[],Object.defineProperty(this,`uid`,{value:tae++})}normalizeCtorArgs(e){return e?_e(e)||e instanceof kh?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get length(){return this._length}set length(e){e>this._length?E.getLogger(this).error(`#length=`,`Cannot increase the length of the collection by assigning to the length property.`):this.splice(e,Math.max(0,this._length-e))}get items(){return k(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,Mh(e)),this._emitAfterChanges(1))}hasEventListener(e){return!this.destroyed&&(e===`change`?this._chgListeners.length>0:super.hasEventListener(e))}on(e,t){if(this.destroyed)return Yt();if(e===`change`){let e=this._chgListeners,n={removed:!1,callback:t};return e.push(n),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),Yt(()=>{n.removed=!0,e.splice(e.indexOf(n),1)})}return super.on(e,t)}once(e,t){let n=`deref`in t?()=>t.deref():()=>t,r=this.on(e,e=>{n()?.call(null,e),r.remove()});return r}add(e,t){if(k(this._observable),this._emitBeforeChanges(1))return this;let n=this.getNextIndex(t??null);return this._splice(n,0,[e]),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(k(this._observable),!e?.length||this._emitBeforeChanges(1))return this;let n=this.getNextIndex(t);return this._splice(n,0,Mh(e)),this._emitAfterChanges(1),this}at(e){if(k(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(k(this._observable),!this.length||this._emitBeforeChanges(2))return[];let e=this._removeAllRaw();return this._emitAfterChanges(2),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return k(this._observable),this._createNewInstance({items:this._items.map(C)})}concat(...e){k(this._observable);let t=e.map(Mh);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(k(this._observable),!this.length||this._emitBeforeChanges(2))return;let n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)e.call(t,n[i],i,n);this._emitAfterChanges(2)}destroyAll(){this.drain(jh)}destroyMany(e){let t=this.removeMany(e);return t.forEach(jh),t}every(e,t){return k(this._observable),this._items.every(e,t)}filter(e,t){k(this._observable);let n=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:n})}find(e,t){return k(this._observable),this._items.find(e,t)}findIndex(e,t){return k(this._observable),this._items.findIndex(e,t)}flatten(e,t){k(this._observable);let n=[];return Ph(n,this,e,t),new kh(n)}forEach(e,t){return k(this._observable),this._items.forEach(e,t)}getItemAt(e){return k(this._observable),this._items[e]}getNextIndex(e){k(this._observable);let t=this.length;return(e??=t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return k(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return k(this._observable),this._items.indexOf(e,t)}join(e=`,`){return k(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return k(this._observable),this._items.lastIndexOf(e,t)}map(e,t){k(this._observable);let n=this._items.map(e,t);return new kh({items:n})}reorder(e,t=this.length-1){k(this._observable);let n=this.indexOf(e);if(n!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),n!==t){if(this._emitBeforeChanges(4))return e;this._splice(n,1),this._splice(t,0,[e]),this._emitAfterChanges(4)}return e}}pop(){if(k(this._observable),!this.length||this._emitBeforeChanges(2))return;let e=Nh(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return k(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,e),this._emitAfterChanges(1)),this.length}reduce(e,t){k(this._observable);let n=this._items;return arguments.length===2?n.reduce(e,t):n.reduce(e)}reduceRight(e,t){k(this._observable);let n=this._items;return arguments.length===2?n.reduceRight(e,t):n.reduceRight(e)}remove(e){return k(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(k(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;let t=Nh(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(k(this._observable),!e?.length||this._emitBeforeChanges(2))return[];let t=e instanceof kh?e.toArray():e,n=this._items,r=[],i=t.length;for(let e=0;e<i;e++){let i=t[e],a=n.indexOf(i);if(a>-1){let i=1+eae(t,n,e+1,a+1),o=this._splice(a,i);o&&o.length>0&&r.push.apply(r,o),e+=i-1}}return this._emitAfterChanges(2),r}reverse(){if(k(this._observable),this._emitBeforeChanges(4))return this;let e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(4),this}shift(){if(k(this._observable),!this.length||this._emitBeforeChanges(2))return;let e=Nh(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return k(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return k(this._observable),this._items.some(e,t)}sort(e){if(k(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(e))return this;let t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(4),this}_requiresSort(e=(e,t)=>e===t?0:e<t?-1:1){let t=this.length-1;for(let n=0;n<t;n++)if(e(this.items[n],this.items[n+1])>0)return!0;return!1}splice(e,t,...n){k(this._observable),arguments.length===1&&(t=this.length),t??=0;let r=(t?2:0)|(n.length?1:0);if(this._emitBeforeChanges(r))return[];let i=this._splice(e,t,n)||[];return this._emitAfterChanges(r),i}toArray(){return k(this._observable),this._items.slice()}toJSON(e){return k(this._observable),this.toArray().map(t=>Lo(t)?t.toJSON(e):t)}toLocaleString(){return k(this._observable),this._items.toLocaleString()}toString(){return k(this._observable),this._items.toString()}unshift(...e){return k(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,n){let r=this._items,i=this.itemType,a,o;if(!this._notifications&&this.hasEventListener(`change`)&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Qi(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener(`before-remove`)){let t=Ah.acquire();t.target=this,t.cancellable=!0;for(let n=0,i=o.length;n<i;n++)a=o[n],t.reset(a),this.emit(`before-remove`,t),t.defaultPrevented&&(o.splice(n,1),r.splice(e,0,a),e+=1,--n,--i);Ah.release(t)}if(this._length=this._items.length,this.hasEventListener(`after-remove`)){let e=Ah.acquire();e.target=this,e.cancellable=!1;let t=o.length;for(let n=0;n<t;n++)e.reset(o[n]),this.emit(`after-remove`,e);Ah.release(e)}}if(n?.length){if(i){let e=[];for(let t of n){let n=i.ensureType(t);n==null&&t!=null||e.push(n)}n=e}let t=this.hasEventListener(`before-add`),a=this.hasEventListener(`after-add`),o=e===this.length;if(t||a){let i=Ah.acquire();i.target=this,i.cancellable=!0;let s=Ah.acquire();s.target=this,s.cancellable=!1;for(let c of n)t?(i.reset(c),this.emit(`before-add`,i),i.defaultPrevented||(o?r.push(c):r.splice(e++,0,c),this._length=r.length,a&&(s.reset(c),this.emit(`after-add`,s)))):(o?r.push(c):r.splice(e++,0,c),this._length=r.length,s.reset(c),this.emit(`after-add`,s));Ah.release(s),Ah.release(i)}else{if(o)for(let e of n)r.push(e);else r.splice(e,0,...n);this._length=r.length}}if((n?.length||o?.length)&&this._notifyChangeEvent(n,o),this.hasEventListener(`after-splice`)){let r=new $ie(this,n,o,e,t);this.emit(`after-splice`,r)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener(`before-changes`)){let n=Ah.acquire();n.target=this,n.cancellable=!0,n.type=e,this.emit(`before-changes`,n),t=n.defaultPrevented,Ah.release(n)}return t}_emitAfterChanges(e){if(this.hasEventListener(`after-changes`)){let t=Ah.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit(`after-changes`,t),Ah.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener(`change`)&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&=(this._timer.remove(),null),this._updating=!1,!this._notifications)return;let e=this._notifications;this._notifications=null;for(let t of e){let e=t.changes;Fh.clear(),Ih.clear(),Lh.clear();for(let{added:t,removed:n}of e){if(t)if(Lh.size===0&&Ih.size===0)for(let e of t)Fh.add(e);else for(let e of t)Ih.has(e)?(Lh.add(e),Ih.delete(e)):Lh.has(e)||Fh.add(e);if(n)if(Lh.size===0&&Fh.size===0)for(let e of n)Ih.add(e);else for(let e of n)Fh.has(e)?Fh.delete(e):(Lh.delete(e),Ih.add(e))}let n=oi.acquire();Fh.forEach(e=>{n.push(e)});let r=oi.acquire();Ih.forEach(e=>{r.push(e)});let i=this._items,a=t.items,o=oi.acquire();if(Lh.forEach(e=>{a.indexOf(e)!==i.indexOf(e)&&o.push(e)}),t.listeners&&(n.length||r.length||o.length)){let e={target:this,added:n,removed:r,moved:o},i=t.listeners.length;for(let n=0;n<i;n++){let r=t.listeners[n];r.removed||r.callback.call(this,e)}}oi.release(n),oi.release(r),oi.release(o)}Fh.clear(),Ih.clear(),Lh.clear()}};e([O()],zh.prototype,`_updating`,void 0),e([O()],zh.prototype,`_length`,void 0),e([O()],zh.prototype,`length`,null),e([O()],zh.prototype,`items`,null),e([O({readOnly:!0})],zh.prototype,`updating`,null),zh=kh=e([hr(`esri.core.Collection`)],zh);var W=zh;function G(e,t,n={}){return Vh(e,t,n,Wh)}function Bh(e,t,n={}){return Vh(e,t,n,Gh)}function Vh(e,t,n={},r){let i=null,a=n.once?(e,n)=>{r(e)&&(Br(i),t(e,n))}:(e,n)=>{r(e)&&t(e,n)};if(i=bte(e,a,n.sync,n.equals),n.initial){let t=e();a(t,t)}return i}function Hh(e,t,n,r={}){let i=null,a=null,o=null;function s(){i&&a&&(a.remove(),r.onListenerRemove?.(i),i=null,a=null)}function c(e){r.once&&r.once&&Br(o),n(e)}let l=G(e,(e,n)=>{s(),vi(e)&&(i=e,a=bi(e,t,c),r.onListenerAdd?.(e))},{sync:r.sync,initial:!0});return o=Yt(()=>{l.remove(),s()}),o}function Uh(e,t){return nae(e,Gh,t)}function nae(e,t,n){if(Ti(n))return Promise.reject(Si());let r=e();if(t?.(r))return Promise.resolve(r);let i=null;function a(){i=Br(i)}return new Promise((r,o)=>{i=Qt([Oi(n,()=>{a(),o(Si())}),Vh(e,e=>{a(),r(e)},{sync:!1,once:!0},t??Wh)])})}function Wh(e){return!0}function Gh(e){return!!e}function rae(e,t,n={}){let r=!1,i=G(e,(e,n)=>{r||t(e,n)},n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}}var Kh={sync:!0},qh={initial:!0},Jh={sync:!0,initial:!0},Yh=class extends W{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(Sa(()=>this._refresh(),Kh))}destroy(){this.getCollections=null}_refresh(){let e=this.getCollections?.();if(e==null)return void this.removeAll();let t=0;for(let n of e)n!=null&&(t=this._processCollection(t,n));this.splice(t)}_createNewInstance(e){return new W(e)}_processCollection(e,t){if(!t)return e;let n=this.itemFilterFunction??(e=>!!e);for(let r of t)if(r){if(n(r)){let t=this.indexOf(r,e);t>=0?t!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){let t=this.getChildrenFunction(r);if(Array.isArray(t))for(let n of t)e=this._processCollection(e,n);else e=this._processCollection(e,t)}}return e}};e([O()],Yh.prototype,`getCollections`,void 0),e([O()],Yh.prototype,`getChildrenFunction`,void 0),e([O()],Yh.prototype,`itemFilterFunction`,void 0),Yh=e([hr(`esri.core.CollectionFlattener`)],Yh);var Xh=Yh,Zh=class{constructor(e=e=>e.values().next().value){this._peeker=e,this._observable=new Oh,this._items=new Set}get length(){return k(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return k(this._observable),this._items.has(e)}pop(){if(this.length===0)return;let e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;let e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){let t=this.length;return this._items.forEach(t=>{e(t)||this._items.delete(t)}),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){k(this._observable),yield*this._items}},Qh=new FinalizationRegistry(e=>{e.close()});function iae(e,t){Qh.register(e,t,t)}function aae(e){Qh.unregister(e)}function $h(e,t){return new Proxy({},{get:(n,r,i)=>(...n)=>{let i,a,o=n[n.length-1];return oae(o)&&(i=o.signal,a=o.transferList,n.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),n,{transferList:a,signal:i})}})}function oae(e){return typeof e==`object`&&!Array.isArray(e)&&e!=null&&(`signal`in e||`transferList`in e||Object.keys(e).length===0)}var sae={CSVSourceWorker:()=>R(()=>import(`./CSVSourceWorker-CcH5KURs.js`),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27])),EdgeProcessingWorker:()=>R(()=>import(`./EdgeProcessingWorker-CdpIyPql.js`),__vite__mapDeps([28,29,30,31,32,33,34,35,36,37,38,39,40])),ElevationSamplerWorker:()=>R(()=>import(`./ElevationSamplerWorker-WI0veopf.js`),__vite__mapDeps([41,42,43,4,44,45,46,47,30,31,48,49])),Feature3DPipelineWorker:()=>R(()=>import(`./Feature3DPipelineWorker-C_6d69ar.js`),__vite__mapDeps([50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,45,94,95,96,97,98,99,44,46,100,33,34,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,4,5,119,7,8,120,121,29,30,31,32,35,49,47,122,123,124,9,10,11,12,13,14,15,16,17,18,19,20,21,22,125,126,127,128,129,130,131,132,133,134,135,136,137,138])),FeaturePipelineWorker:()=>R(()=>import(`./FeaturePipelineWorker-B9PWOXRg.js`),__vite__mapDeps([139,140,141,142,143,144,145,13,5,146,147,148,149,1,3,119,7,8,150,14,10,11,12,151,152,153,154,9,155,15,16,17,18,19,20,21,22,156,25,157,130,128,129,131,158,26,159,160,161,162,34,163,164,165,166,167,168,169])),FeatureServiceSnappingSourceWorker:()=>R(()=>import(`./FeatureServiceSnappingSourceWorker-CuJqpON9.js`),__vite__mapDeps([170,4,5,119,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,128,129,130,131,171])),FlowWorker:()=>R(()=>import(`./FlowWorker-CVDg3XO0.js`),__vite__mapDeps([172,173,174])),GaussianSplatSortWorker:()=>R(()=>import(`./GaussianSplatSortWorker-BBjGZ7Hx.js`),[]),GeoJSONSourceWorker:()=>R(()=>import(`./GeoJSONSourceWorker-8mUH4iYC.js`),__vite__mapDeps([175,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,158,26,159])),LercWorker:()=>R(()=>import(`./LercWorker-DdxwPdPb.js`),[]),Lyr3DWorker:()=>R(()=>import(`./Lyr3DWorker-CUPO7F1p.js`),[]),MemorySourceWorker:()=>R(()=>import(`./MemorySourceWorker-CVHzJh4b.js`),__vite__mapDeps([176,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,177,26,159])),PBFDecoderWorker:()=>R(()=>import(`./PBFDecoderWorker-CxfVePZE.js`),__vite__mapDeps([178,5,119,14,12,13,179,180,11,129])),PanoramicMeshWorker:()=>R(()=>import(`./PanoramicMeshWorker-P6iaZJzm.js`),__vite__mapDeps([181,182])),ParquetSourceWorker:()=>R(()=>import(`./ParquetSourceWorker-oi82XrjU.js`),__vite__mapDeps([183,141,1,5,7,8,150,14,13,10,11,12,151,145,9,15,16,17,18,19,20,21,22,26,184,27,166,169])),PointCloudWorker:()=>R(()=>import(`./PointCloudWorker-BIeWd0f3.js`),__vite__mapDeps([185,88,89,118,99,44,46,186,91,187,98])),RasterWorker:()=>R(()=>import(`./RasterWorker-CcnXl70K.js`),__vite__mapDeps([188,189,190,191,182,192,193,194,195,196,173])),SceneLayerSnappingSourceWorker:()=>R(()=>import(`./SceneLayerSnappingSourceWorker-BsJrszQJ.js`),__vite__mapDeps([197,93,88,89,90,87,91,92,29,30,31,32,33,34,35,36,96,97,37,39,40,198])),SceneLayerWorker:()=>R(()=>import(`./SceneLayerWorker-TZkDMl2C.js`),__vite__mapDeps([199,42,200,45,94,95,47])),TextureCompressionWorker:()=>R(()=>import(`./TextureCompressionWorker-BD0_CEnC.js`),[]),WFSSourceWorker:()=>R(()=>import(`./WFSSourceWorker-C_Mdtady.js`),__vite__mapDeps([201,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,158,159,202,203])),WorkerTileHandler:()=>R(()=>import(`./WorkerTileHandler-HxvhVujD.js`),__vite__mapDeps([204,205,142,191,5,119,152,146,206,207,208,33,34,209,147])),arcadeGeometryOperatorsWorker:()=>R(()=>import(`./operatorsWorker-Q46H6LVg.js`),[]),statsWorker:()=>R(()=>import(`./statsWorker-DgYal0it.js`),__vite__mapDeps([210,14,22,211,19,20,21]))},eg=`worker:port-closed`,tg={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8},cae=0;function ng(){return cae++}function lae(e){return e&&typeof e==`object`&&(`result`in e||`transferList`in e)}function rg(e){return e?typeof e==`string`?JSON.stringify({name:`message`,message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function ig(e,t,n,r){if(t.type===tg.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==tg.INVOKE&&t.type!==tg.RESPONSE)return void e.postMessage(t);let i;lae(n)?(i=og(n.transferList),t.data=n.result):(i=og(r),t.data=n),i?e.postMessage(t,i):e.postMessage(t)}function ag(e){if(!e)return null;let t=e.data;return t?typeof t==`string`?JSON.parse(t):t:null}function og(e){if(!e?.length)return null;if(c(`esri-workers-arraybuffer-transfer`))return e;let t=e.filter(e=>!uae(e));return t.length?t:null}function uae(e){return e instanceof ArrayBuffer||e?.constructor?.name===`ArrayBuffer`}async function dae(e){try{return await e}catch(e){let t=e?.name===eg;if(!(ji(e)||t))throw e;return}}var{CLOSE:sg,ABORT:cg,INVOKE:lg,RESPONSE:ug,OPEN_PORT:dg,ON:fg}=tg,fae=2,pae=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===cg?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(let e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},pg=class e{static{this.kernelInfo={buildDate:ec,fullVersion:ic,revision:tc}}static{this.clients=new Map}static connect(t,n){let r=new MessageChannel,i;i=typeof t==`function`?new t:`default`in t&&typeof t.default==`function`?new t.default:t;let a=new e(r.port1,{channel:r,client:i,schedule:n});return typeof i==`object`&&`remoteClient`in i&&(i.remoteClient=a),e.clients.set(a,i),r.port2}static loadWorker(e){let t=sae[e];return t?t():Promise.resolve(null)}constructor(e,t,n,r){this._port=e,this._jobQueue=n,this._lowPriorityJobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new pae(e=>this._onInvokeMessage(e)),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener(`message`,this._onMessage),this._port.start()}close(){this._post({type:sg}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,n){return this.apply(e,[t],n)}apply(e,t,n){let r=n?.signal,i=n?.transferList;if(!this._port)return Promise.reject(new D(eg,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));let a=ng();return new Promise((n,o)=>{if(Ti(r))return this._processWork(),void o(Si());let s=Oi(r,()=>{let e=this._outJobs.get(a);e&&(this._outJobs.delete(a),this._processWork(),Br(e.abortHandle),this._post({type:cg,jobId:a}),o(Si()))}),c={resolve:n,reject:o,abortHandle:s,debugInfo:e};this._outJobs.set(a,c),this._post({type:lg,jobId:a,methodName:e,abortable:r!=null},t,i)})}createInvokeProxy(e){return $h(this,e)}on(e,t){let n=new MessageChannel;function r(e){t(e.data)}return this._port.postMessage({type:fg,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener(`message`,r),n.port1.start(),Yt(()=>{n.port1.postMessage({type:sg}),n.port1.close(),n.port1.removeEventListener(`message`,r)})}jobAdded(){this._processWork()}openPort(){let e=new MessageChannel;return this._post({type:dg,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=fae)return;let e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;let{methodName:t,data:n,invokeOptions:r,resolver:i}=e;this.apply(t,n,r).then(e=>i.resolve(e)).catch(e=>i.reject(e))}_close(){this._channel&&=void 0,this._port.removeEventListener(`message`,this._onMessage),this._port.close(),this._outJobs.forEach(e=>{Br(e.abortHandle),e.reject(Si(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule==null?this._processMessage(e,!1):this._schedule(()=>this._processMessage(e,!0))}_processMessage(e,t){let n=ag(e);if(n)switch(n.type){case ug:this._onResponseMessage(n);break;case lg:t?this._onInvokeMessage(n):this._invokeQueue.push(n);break;case cg:this._onAbortMessage(n);break;case sg:this._onCloseMessage();break;case dg:this._onOpenPortMessage(n);break;case fg:this._onOnMessage(n)}}_onAbortMessage(e){let t=this._inJobs,n=e.jobId,r=t.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(n))}_onCloseMessage(){let t=this._client;this._close(),t&&`destroy`in t&&e.clients.get(this)===t&&t.destroy(),e.clients.delete(this),t?.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(e){let{methodName:t,jobId:n,data:r=[],abortable:i}=e,a=i?new AbortController:null,o=this._inJobs,s,c=this._client,l=c[t];try{if(!l&&t&&t.includes(`.`)){let e=t.split(`.`);for(let t=0;t<e.length-1;t++)c=c[e[t]],l=c[e[t+1]]}if(typeof l!=`function`)throw TypeError(`${t} is not a function`);r.push({client:this,signal:a?a.signal:null}),s=l.apply(c,r)}catch(e){this._post({type:ug,jobId:n,error:rg(e)});return}Ii(s)?(o.set(n,{controller:a,promise:s}),s.then(e=>{o.has(n)&&(o.delete(n),this._post({type:ug,jobId:n},e))},e=>{o.has(n)&&(o.delete(n),ji(e)||this._post({type:ug,jobId:n,error:rg(e||{message:`Error encountered at method ${t}`})}))})):this._post({type:ug,jobId:n},s)}_onOpenPortMessage(t){new e(t.port,{client:this._client})}_onOnMessage(e){let{port:t}=e,n=this._client.on(e.eventType,e=>{t.postMessage(e)}),r=bi(e.port,`message`,e=>{ag(e)?.type===sg&&(r.remove(),n.remove(),t.close())})}_onResponseMessage(e){let{jobId:t,error:n,data:r}=e,i=this._outJobs;if(!i.has(t))return;let a=i.get(t);i.delete(t),this._processWork(),Br(a.abortHandle),n?a.reject(D.fromJSON(JSON.parse(n))):a.resolve(r)}_post(e,t,n){return ig(this._port,e,t,n)}},mg=class{constructor(){this._inUseClients=[],this._clients=[],this._clientPromises=[],this._ongoingJobsQueue=new Zh,this._ongoingLowPriorityJobsQueue=new Zh}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise((n,r)=>{let i=!0,a=e=>{Ci(t.signal),i&&(i=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let i=0;i<e.length;++i){let o=e[i];Ii(o)?this._clientPromises[i]=o.then(e=>(this._clients[i]=new pg(e,t,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),a(n),this._clients[i]),()=>(a(r),null)):(this._clients[i]=new pg(o,t,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[i]=Promise.resolve(this._clients[i]),a(n))}})}broadcast(e,t,n){let r=Array(this._clientPromises.length);for(let i=0;i<this._clientPromises.length;++i)r[i]=this._clientPromises[i].then(r=>r?.invoke(e,t,n));return r}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Si(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Si(`Worker closing, aborting job calling '${e.methodName}'`));for(let e of this._clientPromises)e.then(e=>e?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,aae(this)}invoke(e,t,n){return this.apply(e,[t],n)}apply(e,t,n){let r=zi();(n?.jobPriority===1?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:t,invokeOptions:n,resolver:r});for(let e=0;e<this._clientPromises.length;e++){let t=this._clients[e];t?t.jobAdded():this._clientPromises[e].then(e=>e?.jobAdded())}return r.promise}createInvokeProxy(e){return $h(this,e)}on(e,t){return Promise.all(this._clientPromises).then(()=>Qt(this._clients.map(n=>n.on(e,t))))}openPorts(){return new Promise(e=>{let t=Array(this._clientPromises.length),n=t.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then(i=>{i&&(t[r]=i.openPort()),--n===0&&e(t)})})}get test(){}},mae={async request(e,t){let n=e.options,r=n.responseType;n.signal=t?.signal,n.responseType=r===`native`||r===`native-request-init`?`native-request-init`:r&&[`blob`,`json`,`text`].includes(r)&&ds(e.url)?.after?r:`array-buffer`;let i=await Qc(e.url,n),a={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case`native-request-init`:return delete a.data.signal,a;case`blob`:a.data=await a.data.arrayBuffer();break;case`json`:a.data=new TextEncoder().encode(JSON.stringify(a.data)).buffer;break;case`text`:a.data=new TextEncoder().encode(a.data).buffer}return{result:a,transferList:[a.data]}}},hae,hg,gae=globalThis.esriConfig?.locale,gg=globalThis.document?.documentElement;function _g(){let e=gg?.getAttribute(`lang`),t=globalThis.navigator?.language;return gae??e??t??`en`}function vg(){return hg===void 0&&(hg=_g()),hg}var _ae=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function yg(e=vg()){return xg(e)?.language}function bg(e=vg()){let t=xg(e);return t?.language&&t?.extlang?e.replace(`${t.language}-`,``):e}function xg(e=vg()){return _ae.exec(e)?.groups}var Sg=[];function Cg(e){return Sg.push(e),Yt(()=>{Sg.splice(Sg.indexOf(e),1)})}var wg=[];function Tg(e){return wg.push(e),Yt(()=>wg.splice(wg.indexOf(e),1))}function Eg(){let e=hae??_g();hg!==e&&([...wg].forEach(t=>t(e)),hg=e,[...Sg].forEach(t=>t(e)))}globalThis.addEventListener?.(`languagechange`,Eg),gg&&new MutationObserver(()=>{Eg()}).observe(gg,{attributeFilter:[`lang`]});var Dg=`system`,Og=`unknown`,vae=`UTC`,yae=Intl.DateTimeFormat().resolvedOptions().timeZone,kg=new Map([[`AUS Central Standard Time`,`Australia/Darwin`],[`AUS Eastern Standard Time`,`Australia/Sydney`],[`Afghanistan Standard Time`,`Asia/Kabul`],[`Alaskan Standard Time`,`America/Anchorage`],[`Aleutian Standard Time`,`America/Adak`],[`Altai Standard Time`,`Asia/Barnaul`],[`Arab Standard Time`,`Asia/Riyadh`],[`Arabian Standard Time`,`Asia/Dubai`],[`Arabic Standard Time`,`Asia/Baghdad`],[`Argentina Standard Time`,`America/Buenos_Aires`],[`Astrakhan Standard Time`,`Europe/Astrakhan`],[`Atlantic Standard Time`,`America/Halifax`],[`Aus Central W. Standard Time`,`Australia/Eucla`],[`Azerbaijan Standard Time`,`Asia/Baku`],[`Azores Standard Time`,`Atlantic/Azores`],[`Bahia Standard Time`,`America/Bahia`],[`Bangladesh Standard Time`,`Asia/Dhaka`],[`Belarus Standard Time`,`Europe/Minsk`],[`Bougainville Standard Time`,`Pacific/Bougainville`],[`Canada Central Standard Time`,`America/Regina`],[`Cape Verde Standard Time`,`Atlantic/Cape_Verde`],[`Caucasus Standard Time`,`Asia/Yerevan`],[`Cen. Australia Standard Time`,`Australia/Adelaide`],[`Central America Standard Time`,`America/Guatemala`],[`Central Asia Standard Time`,`Asia/Bishkek`],[`Central Brazilian Standard Time`,`America/Cuiaba`],[`Central Europe Standard Time`,`Europe/Budapest`],[`Central European Standard Time`,`Europe/Warsaw`],[`Central Pacific Standard Time`,`Pacific/Guadalcanal`],[`Central Standard Time`,`America/Chicago`],[`Central Standard Time (Mexico)`,`America/Mexico_City`],[`Chatham Islands Standard Time`,`Pacific/Chatham`],[`China Standard Time`,`Asia/Shanghai`],[`Cuba Standard Time`,`America/Havana`],[`Dateline Standard Time`,`Etc/GMT+12`],[`E. Africa Standard Time`,`Africa/Nairobi`],[`E. Australia Standard Time`,`Australia/Brisbane`],[`E. Europe Standard Time`,`Europe/Chisinau`],[`E. South America Standard Time`,`America/Sao_Paulo`],[`Easter Island Standard Time`,`Pacific/Easter`],[`Eastern Standard Time`,`America/New_York`],[`Eastern Standard Time (Mexico)`,`America/Cancun`],[`Egypt Standard Time`,`Africa/Cairo`],[`Ekaterinburg Standard Time`,`Asia/Yekaterinburg`],[`FLE Standard Time`,`Europe/Kiev`],[`Fiji Standard Time`,`Pacific/Fiji`],[`GMT Standard Time`,`Europe/London`],[`GTB Standard Time`,`Europe/Bucharest`],[`Georgian Standard Time`,`Asia/Tbilisi`],[`Greenland Standard Time`,`America/Godthab`],[`Greenwich Standard Time`,`Atlantic/Reykjavik`],[`Haiti Standard Time`,`America/Port-au-Prince`],[`Hawaiian Standard Time`,`Pacific/Honolulu`],[`India Standard Time`,`Asia/Calcutta`],[`Iran Standard Time`,`Asia/Tehran`],[`Israel Standard Time`,`Asia/Jerusalem`],[`Jordan Standard Time`,`Asia/Amman`],[`Kaliningrad Standard Time`,`Europe/Kaliningrad`],[`Korea Standard Time`,`Asia/Seoul`],[`Libya Standard Time`,`Africa/Tripoli`],[`Line Islands Standard Time`,`Pacific/Kiritimati`],[`Lord Howe Standard Time`,`Australia/Lord_Howe`],[`Magadan Standard Time`,`Asia/Magadan`],[`Magallanes Standard Time`,`America/Punta_Arenas`],[`Marquesas Standard Time`,`Pacific/Marquesas`],[`Mauritius Standard Time`,`Indian/Mauritius`],[`Middle East Standard Time`,`Asia/Beirut`],[`Montevideo Standard Time`,`America/Montevideo`],[`Morocco Standard Time`,`Africa/Casablanca`],[`Mountain Standard Time`,`America/Denver`],[`Mountain Standard Time (Mexico)`,`America/Mazatlan`],[`Myanmar Standard Time`,`Asia/Rangoon`],[`N. Central Asia Standard Time`,`Asia/Novosibirsk`],[`Namibia Standard Time`,`Africa/Windhoek`],[`Nepal Standard Time`,`Asia/Katmandu`],[`New Zealand Standard Time`,`Pacific/Auckland`],[`Newfoundland Standard Time`,`America/St_Johns`],[`Norfolk Standard Time`,`Pacific/Norfolk`],[`North Asia East Standard Time`,`Asia/Irkutsk`],[`North Asia Standard Time`,`Asia/Krasnoyarsk`],[`North Korea Standard Time`,`Asia/Pyongyang`],[`Omsk Standard Time`,`Asia/Omsk`],[`Pacific SA Standard Time`,`America/Santiago`],[`Pacific Standard Time`,`America/Los_Angeles`],[`Pacific Standard Time (Mexico)`,`America/Tijuana`],[`Pakistan Standard Time`,`Asia/Karachi`],[`Paraguay Standard Time`,`America/Asuncion`],[`Qyzylorda Standard Time`,`Asia/Qyzylorda`],[`Romance Standard Time`,`Europe/Paris`],[`Russia Time Zone 10`,`Asia/Srednekolymsk`],[`Russia Time Zone 11`,`Asia/Kamchatka`],[`Russia Time Zone 3`,`Europe/Samara`],[`Russian Standard Time`,`Europe/Moscow`],[`SA Eastern Standard Time`,`America/Cayenne`],[`SA Pacific Standard Time`,`America/Bogota`],[`SA Western Standard Time`,`America/La_Paz`],[`SE Asia Standard Time`,`Asia/Bangkok`],[`Saint Pierre Standard Time`,`America/Miquelon`],[`Sakhalin Standard Time`,`Asia/Sakhalin`],[`Samoa Standard Time`,`Pacific/Apia`],[`Sao Tome Standard Time`,`Africa/Sao_Tome`],[`Saratov Standard Time`,`Europe/Saratov`],[`Singapore Standard Time`,`Asia/Singapore`],[`South Africa Standard Time`,`Africa/Johannesburg`],[`South Sudan Standard Time`,`Africa/Juba`],[`Sri Lanka Standard Time`,`Asia/Colombo`],[`Sudan Standard Time`,`Africa/Khartoum`],[`Syria Standard Time`,`Asia/Damascus`],[`Taipei Standard Time`,`Asia/Taipei`],[`Tasmania Standard Time`,`Australia/Hobart`],[`Tocantins Standard Time`,`America/Araguaina`],[`Tokyo Standard Time`,`Asia/Tokyo`],[`Tomsk Standard Time`,`Asia/Tomsk`],[`Tonga Standard Time`,`Pacific/Tongatapu`],[`Transbaikal Standard Time`,`Asia/Chita`],[`Turkey Standard Time`,`Europe/Istanbul`],[`Turks And Caicos Standard Time`,`America/Grand_Turk`],[`US Eastern Standard Time`,`America/Indianapolis`],[`US Mountain Standard Time`,`America/Phoenix`],[`UTC`,`Etc/GMT`],[`UTC+01`,`Etc/GMT-1`],[`UTC+02`,`Etc/GMT-2`],[`UTC+03`,`Etc/GMT-3`],[`UTC+04`,`Etc/GMT-4`],[`UTC+05`,`Etc/GMT-5`],[`UTC+06`,`Etc/GMT-6`],[`UTC+07`,`Etc/GMT-7`],[`UTC+08`,`Etc/GMT-8`],[`UTC+09`,`Etc/GMT-9`],[`UTC+10`,`Etc/GMT-10`],[`UTC+11`,`Etc/GMT-11`],[`UTC+12`,`Etc/GMT-12`],[`UTC+13`,`Etc/GMT-13`],[`UTC+14`,`Etc/GMT-14`],[`UTC-01`,`Etc/GMT+1`],[`UTC-02`,`Etc/GMT+2`],[`UTC-03`,`Etc/GMT+3`],[`UTC-04`,`Etc/GMT+4`],[`UTC-05`,`Etc/GMT+5`],[`UTC-06`,`Etc/GMT+6`],[`UTC-07`,`Etc/GMT+7`],[`UTC-08`,`Etc/GMT+8`],[`UTC-09`,`Etc/GMT+9`],[`UTC-10`,`Etc/GMT+10`],[`UTC-11`,`Etc/GMT+11`],[`UTC-12`,`Etc/GMT+12`],[`Ulaanbaatar Standard Time`,`Asia/Ulaanbaatar`],[`Venezuela Standard Time`,`America/Caracas`],[`Vladivostok Standard Time`,`Asia/Vladivostok`],[`Volgograd Standard Time`,`Europe/Volgograd`],[`W. Australia Standard Time`,`Australia/Perth`],[`W. Central Africa Standard Time`,`Africa/Lagos`],[`W. Europe Standard Time`,`Europe/Berlin`],[`W. Mongolia Standard Time`,`Asia/Hovd`],[`West Asia Standard Time`,`Asia/Tashkent`],[`West Bank Standard Time`,`Asia/Hebron`],[`West Pacific Standard Time`,`Pacific/Port_Moresby`],[`Yakutsk Standard Time`,`Asia/Yakutsk`],[`Yukon Standard Time`,`America/Whitehorse`]]),Ag=class extends Error{},bae=class extends Ag{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},xae=class extends Ag{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Sae=class extends Ag{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},jg=class extends Ag{},Mg=class extends Ag{constructor(e){super(`Invalid unit ${e}`)}},Ng=class extends Ag{},Pg=class extends Ag{constructor(){super(`Zone is an abstract class`)}},K=`numeric`,Fg=`short`,Ig=`long`,Lg={year:K,month:K,day:K},Rg={year:K,month:Fg,day:K},Cae={year:K,month:Fg,day:K,weekday:Fg},zg={year:K,month:Ig,day:K},Bg={year:K,month:Ig,day:K,weekday:Ig},Vg={hour:K,minute:K},Hg={hour:K,minute:K,second:K},Ug={hour:K,minute:K,second:K,timeZoneName:Fg},Wg={hour:K,minute:K,second:K,timeZoneName:Ig},Gg={hour:K,minute:K,hourCycle:`h23`},Kg={hour:K,minute:K,second:K,hourCycle:`h23`},qg={hour:K,minute:K,second:K,hourCycle:`h23`,timeZoneName:Fg},Jg={hour:K,minute:K,second:K,hourCycle:`h23`,timeZoneName:Ig},Yg={year:K,month:K,day:K,hour:K,minute:K},Xg={year:K,month:K,day:K,hour:K,minute:K,second:K},Zg={year:K,month:Fg,day:K,hour:K,minute:K},Qg={year:K,month:Fg,day:K,hour:K,minute:K,second:K},$g={year:K,month:Fg,day:K,weekday:Fg,hour:K,minute:K},e_={year:K,month:Ig,day:K,hour:K,minute:K,timeZoneName:Fg},t_={year:K,month:Ig,day:K,hour:K,minute:K,second:K,timeZoneName:Fg},n_={year:K,month:Ig,day:K,weekday:Ig,hour:K,minute:K,timeZoneName:Ig},r_={year:K,month:Ig,day:K,weekday:Ig,hour:K,minute:K,second:K,timeZoneName:Ig},i_=class{get type(){throw new Pg}get name(){throw new Pg}get ianaName(){return this.name}get isUniversal(){throw new Pg}offsetName(e,t){throw new Pg}formatOffset(e,t){throw new Pg}offset(e){throw new Pg}equals(e){throw new Pg}get isValid(){throw new Pg}},a_=null,o_=class e extends i_{static get instance(){return a_===null&&(a_=new e),a_}get type(){return`system`}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Jv(e,t,n)}formatOffset(e,t){return Qv(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type===`system`}get isValid(){return!0}},s_=new Map;function c_(e){let t=s_.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(`en-US`,{hour12:!1,timeZone:e,year:`numeric`,month:`2-digit`,day:`2-digit`,hour:`2-digit`,minute:`2-digit`,second:`2-digit`,era:`short`}),s_.set(e,t)),t}var l_={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function u_(e,t){let n=e.format(t).replace(/\u200E/g,``),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,a,o,s,c,l,u]=r;return[o,i,a,s,c,l,u]}function d_(e,t){let n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){let{type:t,value:i}=n[e],a=l_[t];t===`era`?r[a]=i:Sv(a)||(r[a]=parseInt(i,10))}return r}var f_=new Map,p_=class e extends i_{static create(t){let n=f_.get(t);return n===void 0&&f_.set(t,n=new e(t)),n}static resetCache(){f_.clear(),s_.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat(`en-US`,{timeZone:e}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=e.isValidZone(t)}get type(){return`iana`}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Jv(e,t,n,this.name)}formatOffset(e,t){return Qv(this.offset(e),t)}offset(e){if(!this.valid)return NaN;let t=new Date(e);if(isNaN(t))return NaN;let n=c_(this.name),[r,i,a,o,s,c,l]=n.formatToParts?d_(n,t):u_(n,t);o===`BC`&&(r=-Math.abs(r)+1);let u=Wv({year:r,month:i,day:a,hour:s===24?0:s,minute:c,second:l,millisecond:0}),d=+t,f=d%1e3;return d-=f>=0?f:1e3+f,(u-d)/(60*1e3)}equals(e){return e.type===`iana`&&e.name===this.name}get isValid(){return this.valid}},m_={};function h_(e,t={}){let n=JSON.stringify([e,t]),r=m_[n];return r||(r=new Intl.ListFormat(e,t),m_[n]=r),r}var g_=new Map;function __(e,t={}){let n=JSON.stringify([e,t]),r=g_.get(n);return r===void 0&&(r=new Intl.DateTimeFormat(e,t),g_.set(n,r)),r}var v_=new Map;function y_(e,t={}){let n=JSON.stringify([e,t]),r=v_.get(n);return r===void 0&&(r=new Intl.NumberFormat(e,t),v_.set(n,r)),r}var b_=new Map;function x_(e,t={}){let{base:n,...r}=t,i=JSON.stringify([e,r]),a=b_.get(i);return a===void 0&&(a=new Intl.RelativeTimeFormat(e,t),b_.set(i,a)),a}var S_=null;function C_(){return S_||(S_=new Intl.DateTimeFormat().resolvedOptions().locale,S_)}var w_=new Map;function T_(e){let t=w_.get(e);return t===void 0&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),w_.set(e,t)),t}var E_=new Map;function D_(e){let t=E_.get(e);if(!t){let n=new Intl.Locale(e);t=`getWeekInfo`in n?n.getWeekInfo():n.weekInfo,`minimalDays`in t||(t={...L_,...t}),E_.set(e,t)}return t}function O_(e){let t=e.indexOf(`-x-`);t!==-1&&(e=e.substring(0,t));let n=e.indexOf(`-u-`);if(n===-1)return[e];{let t,r;try{t=__(e).resolvedOptions(),r=e}catch{let i=e.substring(0,n);t=__(i).resolvedOptions(),r=i}let{numberingSystem:i,calendar:a}=t;return[r,i,a]}}function k_(e,t,n){return n||t?(e.includes(`-u-`)||(e+=`-u`),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}function A_(e){let t=[];for(let n=1;n<=12;n++){let r=Sb.utc(2009,n,1);t.push(e(r))}return t}function j_(e){let t=[];for(let n=1;n<=7;n++){let r=Sb.utc(2016,11,13+n);t.push(e(r))}return t}function M_(e,t,n,r){let i=e.listingMode();return i===`error`?null:i===`en`?n(t):r(t)}function N_(e){return e.numberingSystem&&e.numberingSystem!==`latn`?!1:e.numberingSystem===`latn`||!e.locale||e.locale.startsWith(`en`)||T_(e.locale).numberingSystem===`latn`}var P_=class{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:r,floor:i,...a}=n;if(!t||Object.keys(a).length>0){let t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=y_(e,t)}}format(e){if(this.inf){let t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{let t=this.floor?Math.floor(e):Bv(e,3);return Iv(t,this.padTo)}}},F_=class{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type===`fixed`){let t=-1*(e.offset/60),n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;e.offset!==0&&p_.create(n).valid?(r=n,this.dt=e):(r=`UTC`,this.dt=e.offset===0?e:e.setZone(`UTC`).plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type===`system`?this.dt=e:e.zone.type===`iana`?(this.dt=e,r=e.zone.name):(r=`UTC`,this.dt=e.setZone(`UTC`).plus({minutes:e.offset}),this.originalZone=e.zone);let i={...this.opts};i.timeZone=i.timeZone||r,this.dtf=__(t,i)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(``):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if(e.type===`timeZoneName`){let t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}else return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},I_=class{constructor(e,t,n){this.opts={style:`long`,...n},!t&&Dv()&&(this.rtf=x_(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):Pae(t,e,this.opts.numeric,this.opts.style!==`long`)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},L_={firstDay:1,minimalDays:4,weekend:[6,7]},R_=class e{static fromOpts(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,n,r,i,a=!1){let o=t||iv.defaultLocale,s=o||(a?`en-US`:C_()),c=n||iv.defaultNumberingSystem,l=r||iv.defaultOutputCalendar,u=Nv(i)||iv.defaultWeekSettings;return new e(s,c,l,u,o)}static resetCache(){S_=null,g_.clear(),v_.clear(),b_.clear(),w_.clear(),E_.clear()}static fromObject({locale:t,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return e.create(t,n,r,i)}constructor(e,t,n,r,i){let[a,o,s]=O_(e);this.locale=a,this.numberingSystem=t||o||null,this.outputCalendar=n||s||null,this.weekSettings=r,this.intl=k_(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached??=N_(this),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem===`latn`)&&(this.outputCalendar===null||this.outputCalendar===`gregory`);return e&&t?`en`:`intl`}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Nv(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return M_(this,e,ty,()=>{let n=this.intl===`ja`||this.intl.startsWith(`ja-`);t&=!n;let r=t?{month:e,day:`numeric`}:{month:e},i=t?`format`:`standalone`;if(!this.monthsCache[i][e]){let t=n?e=>this.dtFormatter(e,r).format():e=>this.extract(e,r,`month`);this.monthsCache[i][e]=A_(t)}return this.monthsCache[i][e]})}weekdays(e,t=!1){return M_(this,e,iy,()=>{let n=t?{weekday:e,year:`numeric`,month:`long`,day:`numeric`}:{weekday:e},r=t?`format`:`standalone`;return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=j_(e=>this.extract(e,n,`weekday`))),this.weekdaysCache[r][e]})}meridiems(){return M_(this,void 0,()=>ay,()=>{if(!this.meridiemCache){let e={hour:`numeric`,hourCycle:`h12`};this.meridiemCache=[Sb.utc(2016,11,13,9),Sb.utc(2016,11,13,19)].map(t=>this.extract(t,e,`dayperiod`))}return this.meridiemCache})}eras(e){return M_(this,e,oy,()=>{let t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Sb.utc(-40,1,1),Sb.utc(2017,1,1)].map(e=>this.extract(e,t,`era`))),this.eraCache[e]})}extract(e,t,n){let r=this.dtFormatter(e,t),i=r.formatToParts(),a=i.find(e=>e.type.toLowerCase()===n);return a?a.value:null}numberFormatter(e={}){return new P_(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new F_(e,this.intl,t)}relFormatter(e={}){return new I_(this.intl,this.isEnglish(),e)}listFormatter(e={}){return h_(this.intl,e)}isEnglish(){return this.locale===`en`||this.locale.toLowerCase()===`en-us`||T_(this.intl).locale.startsWith(`en-us`)}getWeekSettings(){return this.weekSettings?this.weekSettings:Ov()?D_(this.locale):L_}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}},z_=null,B_=class e extends i_{static get utcInstance(){return z_===null&&(z_=new e(0)),z_}static instance(t){return t===0?e.utcInstance:new e(t)}static parseSpecifier(t){if(t){let n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new e(Yv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return`fixed`}get name(){return this.fixed===0?`UTC`:`UTC${Qv(this.fixed,`narrow`)}`}get ianaName(){return this.fixed===0?`Etc/UTC`:`Etc/GMT${Qv(-this.fixed,`narrow`)}`}offsetName(){return this.name}formatOffset(e,t){return Qv(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type===`fixed`&&e.fixed===this.fixed}get isValid(){return!0}},V_=class extends i_{constructor(e){super(),this.zoneName=e}get type(){return`invalid`}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return``}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function H_(e,t){if(Sv(e)||e===null)return t;if(e instanceof i_)return e;if(Tv(e)){let n=e.toLowerCase();return n===`default`?t:n===`local`||n===`system`?o_.instance:n===`utc`||n===`gmt`?B_.utcInstance:B_.parseSpecifier(n)||p_.create(e)}else if(Cv(e))return B_.instance(e);else if(typeof e==`object`&&`offset`in e&&typeof e.offset==`function`)return e;else return new V_(e)}var U_={arab:`[-]`,arabext:`[-]`,bali:`[-]`,beng:`[-]`,deva:`[-]`,fullwide:`[-]`,gujr:`[-]`,hanidec:`[|||||||||]`,khmr:`[-]`,knda:`[-]`,laoo:`[-]`,limb:`[-]`,mlym:`[-]`,mong:`[-]`,mymr:`[-]`,orya:`[-]`,tamldec:`[-]`,telu:`[-]`,thai:`[-]`,tibt:`[-]`,latn:`\\d`},W_={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},G_=U_.hanidec.replace(/[\[|\]]/g,``).split(``);function K_(e){let t=parseInt(e,10);if(isNaN(t)){t=``;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(e[n].search(U_.hanidec)!==-1)t+=G_.indexOf(e[n]);else for(let e in W_){let[n,i]=W_[e];r>=n&&r<=i&&(t+=r-n)}}return parseInt(t,10)}else return t}var q_=new Map;function J_(){q_.clear()}function Y_({numberingSystem:e},t=``){let n=e||`latn`,r=q_.get(n);r===void 0&&(r=new Map,q_.set(n,r));let i=r.get(t);return i===void 0&&(i=RegExp(`${U_[n]}${t}`),r.set(t,i)),i}var X_=()=>Date.now(),Z_=`system`,Q_=null,$_=null,ev=null,tv=60,nv,rv=null,iv=class{static get now(){return X_}static set now(e){X_=e}static set defaultZone(e){Z_=e}static get defaultZone(){return H_(Z_,o_.instance)}static get defaultLocale(){return Q_}static set defaultLocale(e){Q_=e}static get defaultNumberingSystem(){return $_}static set defaultNumberingSystem(e){$_=e}static get defaultOutputCalendar(){return ev}static set defaultOutputCalendar(e){ev=e}static get defaultWeekSettings(){return rv}static set defaultWeekSettings(e){rv=Nv(e)}static get twoDigitCutoffYear(){return tv}static set twoDigitCutoffYear(e){tv=e%100}static get throwOnInvalid(){return nv}static set throwOnInvalid(e){nv=e}static resetCaches(){R_.resetCache(),p_.resetCache(),Sb.resetCache(),J_()}},av=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},ov=[0,31,59,90,120,151,181,212,243,273,304,334],sv=[0,31,60,91,121,152,182,213,244,274,305,335];function cv(e,t){return new av(`unit out of range`,`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function lv(e,t,n){let r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function uv(e,t,n){return n+(Vv(e)?sv:ov)[t-1]}function dv(e,t){let n=Vv(e)?sv:ov,r=n.findIndex(e=>e<t),i=t-n[r];return{month:r+1,day:i}}function fv(e,t){return(e-t+7)%7+1}function pv(e,t=4,n=1){let{year:r,month:i,day:a}=e,o=uv(r,i,a),s=fv(lv(r,i,a),n),c=Math.floor((o-s+14-t)/7),l;return c<1?(l=r-1,c=Kv(l,t,n)):c>Kv(r,t,n)?(l=r+1,c=1):l=r,{weekYear:l,weekNumber:c,weekday:s,...$v(e)}}function mv(e,t=4,n=1){let{weekYear:r,weekNumber:i,weekday:a}=e,o=fv(lv(r,1,t),n),s=Hv(r),c=i*7+a-o-7+t,l;c<1?(l=r-1,c+=Hv(l)):c>s?(l=r+1,c-=Hv(r)):l=r;let{month:u,day:d}=dv(l,c);return{year:l,month:u,day:d,...$v(e)}}function hv(e){let{year:t,month:n,day:r}=e,i=uv(t,n,r);return{year:t,ordinal:i,...$v(e)}}function gv(e){let{year:t,ordinal:n}=e,{month:r,day:i}=dv(t,n);return{year:t,month:r,day:i,...$v(e)}}function _v(e,t){if(!Sv(e.localWeekday)||!Sv(e.localWeekNumber)||!Sv(e.localWeekYear)){if(!Sv(e.weekday)||!Sv(e.weekNumber)||!Sv(e.weekYear))throw new jg(`Cannot mix locale-based week fields with ISO-based week fields`);return Sv(e.localWeekday)||(e.weekday=e.localWeekday),Sv(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Sv(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function vv(e,t=4,n=1){let r=wv(e.weekYear),i=Pv(e.weekNumber,1,Kv(e.weekYear,t,n)),a=Pv(e.weekday,1,7);return r?i?a?!1:cv(`weekday`,e.weekday):cv(`week`,e.weekNumber):cv(`weekYear`,e.weekYear)}function yv(e){let t=wv(e.year),n=Pv(e.ordinal,1,Hv(e.year));return t?n?!1:cv(`ordinal`,e.ordinal):cv(`year`,e.year)}function bv(e){let t=wv(e.year),n=Pv(e.month,1,12),r=Pv(e.day,1,Uv(e.year,e.month));return t?n?r?!1:cv(`day`,e.day):cv(`month`,e.month):cv(`year`,e.year)}function xv(e){let{hour:t,minute:n,second:r,millisecond:i}=e,a=Pv(t,0,23)||t===24&&n===0&&r===0&&i===0,o=Pv(n,0,59),s=Pv(r,0,59),c=Pv(i,0,999);return a?o?s?c?!1:cv(`millisecond`,i):cv(`second`,r):cv(`minute`,n):cv(`hour`,t)}function Sv(e){return e===void 0}function Cv(e){return typeof e==`number`}function wv(e){return typeof e==`number`&&e%1==0}function Tv(e){return typeof e==`string`}function Ev(e){return Object.prototype.toString.call(e)===`[object Date]`}function Dv(){try{return typeof Intl<`u`&&!!Intl.RelativeTimeFormat}catch{return!1}}function Ov(){try{return typeof Intl<`u`&&!!Intl.Locale&&(`weekInfo`in Intl.Locale.prototype||`getWeekInfo`in Intl.Locale.prototype)}catch{return!1}}function kv(e){return Array.isArray(e)?e:[e]}function Av(e,t,n){if(e.length!==0)return e.reduce((e,r)=>{let i=[t(r),r];return e&&n(e[0],i[0])===e[0]?e:i},null)[1]}function jv(e,t){return t.reduce((t,n)=>(t[n]=e[n],t),{})}function Mv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Nv(e){if(e==null)return null;if(typeof e!=`object`)throw new Ng(`Week settings must be an object`);if(!Pv(e.firstDay,1,7)||!Pv(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!Pv(e,1,7)))throw new Ng(`Invalid week settings`);return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Pv(e,t,n){return wv(e)&&e>=t&&e<=n}function Fv(e,t){return e-t*Math.floor(e/t)}function Iv(e,t=2){let n=e<0,r;return r=n?`-`+(``+-e).padStart(t,`0`):(``+e).padStart(t,`0`),r}function Lv(e){if(!(Sv(e)||e===null||e===``))return parseInt(e,10)}function Rv(e){if(!(Sv(e)||e===null||e===``))return parseFloat(e)}function zv(e){if(!(Sv(e)||e===null||e===``)){let t=parseFloat(`0.`+e)*1e3;return Math.floor(t)}}function Bv(e,t,n=`round`){let r=10**t;switch(n){case`expand`:return e>0?Math.ceil(e*r)/r:Math.floor(e*r)/r;case`trunc`:return Math.trunc(e*r)/r;case`round`:return Math.round(e*r)/r;case`floor`:return Math.floor(e*r)/r;case`ceil`:return Math.ceil(e*r)/r;default:throw RangeError(`Value rounding ${n} is out of range`)}}function Vv(e){return e%4==0&&(e%100!=0||e%400==0)}function Hv(e){return Vv(e)?366:365}function Uv(e,t){let n=Fv(t-1,12)+1,r=e+(t-n)/12;return n===2?Vv(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Wv(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Gv(e,t,n){return-fv(lv(e,1,t),n)+t-1}function Kv(e,t=4,n=1){let r=Gv(e,t,n),i=Gv(e+1,t,n);return(Hv(e)-r+i)/7}function qv(e){return e>99?e:e>iv.twoDigitCutoffYear?1900+e:2e3+e}function Jv(e,t,n,r=null){let i=new Date(e),a={hourCycle:`h23`,year:`numeric`,month:`2-digit`,day:`2-digit`,hour:`2-digit`,minute:`2-digit`};r&&(a.timeZone=r);let o={timeZoneName:t,...a},s=new Intl.DateTimeFormat(n,o).formatToParts(i).find(e=>e.type.toLowerCase()===`timezonename`);return s?s.value:null}function Yv(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);let r=parseInt(t,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function Xv(e){let t=Number(e);if(typeof e==`boolean`||e===``||!Number.isFinite(t))throw new Ng(`Invalid unit value ${e}`);return t}function Zv(e,t){let n={};for(let r in e)if(Mv(e,r)){let i=e[r];if(i==null)continue;n[t(r)]=Xv(i)}return n}function Qv(e,t){let n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?`+`:`-`;switch(t){case`short`:return`${i}${Iv(n,2)}:${Iv(r,2)}`;case`narrow`:return`${i}${n}${r>0?`:${r}`:``}`;case`techie`:return`${i}${Iv(n,2)}${Iv(r,2)}`;default:throw RangeError(`Value format ${t} is out of range for property format`)}}function $v(e){return jv(e,[`hour`,`minute`,`second`,`millisecond`])}var wae=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],ey=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],Tae=[`J`,`F`,`M`,`A`,`M`,`J`,`J`,`A`,`S`,`O`,`N`,`D`];function ty(e){switch(e){case`narrow`:return[...Tae];case`short`:return[...ey];case`long`:return[...wae];case`numeric`:return[`1`,`2`,`3`,`4`,`5`,`6`,`7`,`8`,`9`,`10`,`11`,`12`];case`2-digit`:return[`01`,`02`,`03`,`04`,`05`,`06`,`07`,`08`,`09`,`10`,`11`,`12`];default:return null}}var ny=[`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`,`Sunday`],ry=[`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`,`Sun`],Eae=[`M`,`T`,`W`,`T`,`F`,`S`,`S`];function iy(e){switch(e){case`narrow`:return[...Eae];case`short`:return[...ry];case`long`:return[...ny];case`numeric`:return[`1`,`2`,`3`,`4`,`5`,`6`,`7`];default:return null}}var ay=[`AM`,`PM`],Dae=[`Before Christ`,`Anno Domini`],Oae=[`BC`,`AD`],kae=[`B`,`A`];function oy(e){switch(e){case`narrow`:return[...kae];case`short`:return[...Oae];case`long`:return[...Dae];default:return null}}function Aae(e){return ay[e.hour<12?0:1]}function jae(e,t){return iy(t)[e.weekday-1]}function Mae(e,t){return ty(t)[e.month-1]}function Nae(e,t){return oy(t)[e.year<0?0:1]}function Pae(e,t,n=`always`,r=!1){let i={years:[`year`,`yr.`],quarters:[`quarter`,`qtr.`],months:[`month`,`mo.`],weeks:[`week`,`wk.`],days:[`day`,`day`,`days`],hours:[`hour`,`hr.`],minutes:[`minute`,`min.`],seconds:[`second`,`sec.`]},a=[`hours`,`minutes`,`seconds`].indexOf(e)===-1;if(n===`auto`&&a){let n=e===`days`;switch(t){case 1:return n?`tomorrow`:`next ${i[e][0]}`;case-1:return n?`yesterday`:`last ${i[e][0]}`;case 0:return n?`today`:`this ${i[e][0]}`}}let o=Object.is(t,-0)||t<0,s=Math.abs(t),c=s===1,l=i[e],u=r?c?l[1]:l[2]||l[1]:c?i[e][0]:e;return o?`${s} ${u} ago`:`in ${s} ${u}`}function sy(e,t){let n=``;for(let r of e)r.literal?n+=r.val:n+=t(r.val);return n}var Fae={D:Lg,DD:Rg,DDD:zg,DDDD:Bg,t:Vg,tt:Hg,ttt:Ug,tttt:Wg,T:Gg,TT:Kg,TTT:qg,TTTT:Jg,f:Yg,ff:Zg,fff:e_,ffff:n_,F:Xg,FF:Qg,FFF:t_,FFFF:r_},cy=class e{static create(t,n={}){return new e(t,n)}static parseFormat(e){let t=null,n=``,r=!1,i=[];for(let a=0;a<e.length;a++){let o=e.charAt(a);o===`'`?((n.length>0||r)&&i.push({literal:r||/^\s+$/.test(n),val:n===``?`'`:n}),t=null,n=``,r=!r):r||o===t?n+=o:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return Fae[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,n=void 0){if(this.opts.forceSimple)return Iv(e,t);let r={...this.opts};return t>0&&(r.padTo=t),n&&(r.signDisplay=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(t,n){let r=this.loc.listingMode()===`en`,i=this.loc.outputCalendar&&this.loc.outputCalendar!==`gregory`,a=(e,n)=>this.loc.extract(t,e,n),o=e=>t.isOffsetFixed&&t.offset===0&&e.allowZ?`Z`:t.isValid?t.zone.formatOffset(t.ts,e.format):``,s=()=>r?Aae(t):a({hour:`numeric`,hourCycle:`h12`},`dayperiod`),c=(e,n)=>r?Mae(t,e):a(n?{month:e}:{month:e,day:`numeric`},`month`),l=(e,n)=>r?jae(t,e):a(n?{weekday:e}:{weekday:e,month:`long`,day:`numeric`},`weekday`),u=n=>{let r=e.macroTokenToFormatOpts(n);return r?this.formatWithSystemDefault(t,r):n},d=e=>r?Nae(t,e):a({era:e},`era`);return sy(e.parseFormat(n),e=>{switch(e){case`S`:return this.num(t.millisecond);case`u`:case`SSS`:return this.num(t.millisecond,3);case`s`:return this.num(t.second);case`ss`:return this.num(t.second,2);case`uu`:return this.num(Math.floor(t.millisecond/10),2);case`uuu`:return this.num(Math.floor(t.millisecond/100));case`m`:return this.num(t.minute);case`mm`:return this.num(t.minute,2);case`h`:return this.num(t.hour%12==0?12:t.hour%12);case`hh`:return this.num(t.hour%12==0?12:t.hour%12,2);case`H`:return this.num(t.hour);case`HH`:return this.num(t.hour,2);case`Z`:return o({format:`narrow`,allowZ:this.opts.allowZ});case`ZZ`:return o({format:`short`,allowZ:this.opts.allowZ});case`ZZZ`:return o({format:`techie`,allowZ:this.opts.allowZ});case`ZZZZ`:return t.zone.offsetName(t.ts,{format:`short`,locale:this.loc.locale});case`ZZZZZ`:return t.zone.offsetName(t.ts,{format:`long`,locale:this.loc.locale});case`z`:return t.zoneName;case`a`:return s();case`d`:return i?a({day:`numeric`},`day`):this.num(t.day);case`dd`:return i?a({day:`2-digit`},`day`):this.num(t.day,2);case`c`:return this.num(t.weekday);case`ccc`:return l(`short`,!0);case`cccc`:return l(`long`,!0);case`ccccc`:return l(`narrow`,!0);case`E`:return this.num(t.weekday);case`EEE`:return l(`short`,!1);case`EEEE`:return l(`long`,!1);case`EEEEE`:return l(`narrow`,!1);case`L`:return i?a({month:`numeric`,day:`numeric`},`month`):this.num(t.month);case`LL`:return i?a({month:`2-digit`,day:`numeric`},`month`):this.num(t.month,2);case`LLL`:return c(`short`,!0);case`LLLL`:return c(`long`,!0);case`LLLLL`:return c(`narrow`,!0);case`M`:return i?a({month:`numeric`},`month`):this.num(t.month);case`MM`:return i?a({month:`2-digit`},`month`):this.num(t.month,2);case`MMM`:return c(`short`,!1);case`MMMM`:return c(`long`,!1);case`MMMMM`:return c(`narrow`,!1);case`y`:return i?a({year:`numeric`},`year`):this.num(t.year);case`yy`:return i?a({year:`2-digit`},`year`):this.num(t.year.toString().slice(-2),2);case`yyyy`:return i?a({year:`numeric`},`year`):this.num(t.year,4);case`yyyyyy`:return i?a({year:`numeric`},`year`):this.num(t.year,6);case`G`:return d(`short`);case`GG`:return d(`long`);case`GGGGG`:return d(`narrow`);case`kk`:return this.num(t.weekYear.toString().slice(-2),2);case`kkkk`:return this.num(t.weekYear,4);case`W`:return this.num(t.weekNumber);case`WW`:return this.num(t.weekNumber,2);case`n`:return this.num(t.localWeekNumber);case`nn`:return this.num(t.localWeekNumber,2);case`ii`:return this.num(t.localWeekYear.toString().slice(-2),2);case`iiii`:return this.num(t.localWeekYear,4);case`o`:return this.num(t.ordinal);case`ooo`:return this.num(t.ordinal,3);case`q`:return this.num(t.quarter);case`qq`:return this.num(t.quarter,2);case`X`:return this.num(Math.floor(t.ts/1e3));case`x`:return this.num(t.ts);default:return u(e)}})}formatDurationFromString(t,n){let r=this.opts.signMode===`negativeLargestOnly`?-1:1,i=e=>{switch(e[0]){case`S`:return`milliseconds`;case`s`:return`seconds`;case`m`:return`minutes`;case`h`:return`hours`;case`d`:return`days`;case`w`:return`weeks`;case`M`:return`months`;case`y`:return`years`;default:return null}},a=(e,t)=>n=>{let a=i(n);if(a){let i=t.isNegativeDuration&&a!==t.largestUnit?r:1,o;return o=this.opts.signMode===`negativeLargestOnly`&&a!==t.largestUnit?`never`:this.opts.signMode===`all`?`always`:`auto`,this.num(e.get(a)*i,n.length,o)}else return n},o=e.parseFormat(n),s=o.reduce((e,{literal:t,val:n})=>t?e:e.concat(n),[]),c=t.shiftTo(...s.map(i).filter(e=>e)),l={isNegativeDuration:c<0,largestUnit:Object.keys(c.values)[0]};return sy(o,a(c,l))}},ly=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function uy(...e){let t=e.reduce((e,t)=>e+t.source,``);return RegExp(`^${t}$`)}function dy(...e){return t=>e.reduce(([e,n,r],i)=>{let[a,o,s]=i(t,r);return[{...e,...a},o||n,s]},[{},null,1]).slice(0,2)}function fy(e,...t){if(e==null)return[null,null];for(let[n,r]of t){let t=n.exec(e);if(t)return r(t)}return[null,null]}function py(...e){return(t,n)=>{let r={},i;for(i=0;i<e.length;i++)r[e[i]]=Lv(t[n+i]);return[r,null,n+i]}}var my=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Iae=`(?:${my.source}?(?:\\[(${ly.source})\\])?)?`,hy=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,gy=RegExp(`${hy.source}${Iae}`),_y=RegExp(`(?:[Tt]${gy.source})?`),Lae=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Rae=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zae=/(\d{4})-?(\d{3})/,Bae=py(`weekYear`,`weekNumber`,`weekDay`),Vae=py(`year`,`ordinal`),Hae=/(\d{4})-(\d\d)-(\d\d)/,vy=RegExp(`${hy.source} ?(?:${my.source}|(${ly.source}))?`),Uae=RegExp(`(?: ${vy.source})?`);function yy(e,t,n){let r=e[t];return Sv(r)?n:Lv(r)}function by(e,t){return[{year:yy(e,t),month:yy(e,t+1,1),day:yy(e,t+2,1)},null,t+3]}function xy(e,t){return[{hours:yy(e,t,0),minutes:yy(e,t+1,0),seconds:yy(e,t+2,0),milliseconds:zv(e[t+3])},null,t+4]}function Sy(e,t){let n=!e[t]&&!e[t+1],r=Yv(e[t+1],e[t+2]);return[{},n?null:B_.instance(r),t+3]}function Cy(e,t){return[{},e[t]?p_.create(e[t]):null,t+1]}var Wae=RegExp(`^T?${hy.source}$`),Gae=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Kae(e){let[t,n,r,i,a,o,s,c,l]=e,u=t[0]===`-`,d=c&&c[0]===`-`,f=(e,t=!1)=>e!==void 0&&(t||e&&u)?-e:e;return[{years:f(Rv(n)),months:f(Rv(r)),weeks:f(Rv(i)),days:f(Rv(a)),hours:f(Rv(o)),minutes:f(Rv(s)),seconds:f(Rv(c),c===`-0`),milliseconds:f(zv(l),d)}]}var qae={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wy(e,t,n,r,i,a,o){let s={year:t.length===2?qv(Lv(t)):Lv(t),month:ey.indexOf(n)+1,day:Lv(r),hour:Lv(i),minute:Lv(a)};return o&&(s.second=Lv(o)),e&&(s.weekday=e.length>3?ny.indexOf(e)+1:ry.indexOf(e)+1),s}var Jae=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Yae(e){let[,t,n,r,i,a,o,s,c,l,u,d]=e,f=wy(t,i,r,n,a,o,s),p;return p=c?qae[c]:l?0:Yv(u,d),[f,new B_(p)]}function Xae(e){return e.replace(/\([^()]*\)|[\n\t]/g,` `).replace(/(\s\s+)/g,` `).trim()}var Zae=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Qae=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$ae=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ty(e){let[,t,n,r,i,a,o,s]=e;return[wy(t,i,r,n,a,o,s),B_.utcInstance]}function eoe(e){let[,t,n,r,i,a,o,s]=e;return[wy(t,s,n,r,i,a,o),B_.utcInstance]}var toe=uy(Lae,_y),noe=uy(Rae,_y),roe=uy(zae,_y),ioe=uy(gy),Ey=dy(by,xy,Sy,Cy),aoe=dy(Bae,xy,Sy,Cy),ooe=dy(Vae,xy,Sy,Cy),soe=dy(xy,Sy,Cy);function coe(e){return fy(e,[toe,Ey],[noe,aoe],[roe,ooe],[ioe,soe])}function loe(e){return fy(Xae(e),[Jae,Yae])}function uoe(e){return fy(e,[Zae,Ty],[Qae,Ty],[$ae,eoe])}function doe(e){return fy(e,[Gae,Kae])}var foe=dy(xy);function poe(e){return fy(e,[Wae,foe])}var moe=uy(Hae,Uae),hoe=uy(vy),goe=dy(xy,Sy,Cy);function _oe(e){return fy(e,[moe,Ey],[hoe,goe])}var Dy=`Invalid Duration`,Oy={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},voe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Oy},ky=146097/400,Ay=146097/4800,yoe={years:{quarters:4,months:12,weeks:ky/7,days:ky,hours:ky*24,minutes:ky*24*60,seconds:ky*24*60*60,milliseconds:ky*24*60*60*1e3},quarters:{months:3,weeks:ky/28,days:ky/4,hours:ky*24/4,minutes:ky*24*60/4,seconds:ky*24*60*60/4,milliseconds:ky*24*60*60*1e3/4},months:{weeks:Ay/7,days:Ay,hours:Ay*24,minutes:Ay*24*60,seconds:Ay*24*60*60,milliseconds:Ay*24*60*60*1e3},...Oy},jy=[`years`,`quarters`,`months`,`weeks`,`days`,`hours`,`minutes`,`seconds`,`milliseconds`],boe=jy.slice(0).reverse();function My(e,t,n=!1){let r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Iy(r)}function Ny(e,t){let n=t.milliseconds??0;for(let r of boe.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function Py(e,t){let n=Ny(e,t)<0?-1:1;jy.reduceRight((r,i)=>{if(Sv(t[i]))return r;if(r){let a=t[r]*n,o=e[i][r],s=Math.floor(a/o);t[i]+=s*n,t[r]-=s*o*n}return i},null),jy.reduce((n,r)=>{if(Sv(t[r]))return n;if(n){let i=t[n]%1;t[n]-=i,t[r]+=i*e[n][r]}return r},null)}function Fy(e){let t={};for(let[n,r]of Object.entries(e))r!==0&&(t[n]=r);return t}var Iy=class e{constructor(e){let t=e.conversionAccuracy===`longterm`||!1,n=t?yoe:voe;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||R_.create(),this.conversionAccuracy=t?`longterm`:`casual`,this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,n){return e.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(typeof t!=`object`||!t)throw new Ng(`Duration.fromObject: argument expected to be an object, got ${t===null?`null`:typeof t}`);return new e({values:Zv(t,e.normalizeUnit),loc:R_.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Cv(t))return e.fromMillis(t);if(e.isDuration(t))return t;if(typeof t==`object`)return e.fromObject(t);throw new Ng(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){let[r]=doe(t);return r?e.fromObject(r,n):e.invalid(`unparsable`,`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){let[r]=poe(t);return r?e.fromObject(r,n):e.invalid(`unparsable`,`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new Ng(`need to specify a reason the Duration is invalid`);let r=t instanceof av?t:new av(t,n);if(iv.throwOnInvalid)throw new Sae(r);return new e({invalid:r})}static normalizeUnit(e){let t={year:`years`,years:`years`,quarter:`quarters`,quarters:`quarters`,month:`months`,months:`months`,week:`weeks`,weeks:`weeks`,day:`days`,days:`days`,hour:`hours`,hours:`hours`,minute:`minutes`,minutes:`minutes`,second:`seconds`,seconds:`seconds`,millisecond:`milliseconds`,milliseconds:`milliseconds`}[e&&e.toLowerCase()];if(!t)throw new Mg(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?cy.create(this.loc,n).formatDurationFromString(this,e):Dy}toHuman(e={}){if(!this.isValid)return Dy;let t=e.showZeros!==!1,n=jy.map(n=>{let r=this.values[n];return Sv(r)||r===0&&!t?null:this.loc.numberFormatter({style:`unit`,unitDisplay:`long`,...e,unit:n.slice(0,-1)}).format(r)}).filter(e=>e);return this.loc.listFormatter({type:`conjunction`,style:e.listStyle||`narrow`,...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e=`P`;return this.years!==0&&(e+=this.years+`Y`),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+`M`),this.weeks!==0&&(e+=this.weeks+`W`),this.days!==0&&(e+=this.days+`D`),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+=`T`),this.hours!==0&&(e+=this.hours+`H`),this.minutes!==0&&(e+=this.minutes+`M`),(this.seconds!==0||this.milliseconds!==0)&&(e+=Bv(this.seconds+this.milliseconds/1e3,3)+`S`),e===`P`&&(e+=`T0S`),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:`extended`,...e,includeOffset:!1},Sb.fromMillis(t,{zone:`UTC`}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for(`nodejs.util.inspect.custom`)](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Ny(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;let n=e.fromDurationLike(t),r={};for(let e of jy)(Mv(n.values,e)||Mv(this.values,e))&&(r[e]=n.get(e)+this.get(e));return My(this,{values:r},!0)}minus(t){if(!this.isValid)return this;let n=e.fromDurationLike(t);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let n of Object.keys(this.values))t[n]=Xv(e(this.values[n],n));return My(this,{values:t},!0)}get(t){return this[e.normalizeUnit(t)]}set(t){if(!this.isValid)return this;let n={...this.values,...Zv(t,e.normalizeUnit)};return My(this,{values:n})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){let i={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n};return My(this,i)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return Py(this.matrix,e),My(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=Fy(this.normalize().shiftToAll().toObject());return My(this,{values:e},!0)}shiftTo(...t){if(!this.isValid||t.length===0)return this;t=t.map(t=>e.normalizeUnit(t));let n={},r={},i=this.toObject(),a;for(let e of jy)if(t.indexOf(e)>=0){a=e;let t=0;for(let n in r)t+=this.matrix[n][e]*r[n],r[n]=0;Cv(i[e])&&(t+=i[e]);let o=Math.trunc(t);n[e]=o,r[e]=(t*1e3-o*1e3)/1e3}else Cv(i[e])&&(r[e]=i[e]);for(let e in r)r[e]!==0&&(n[a]+=e===a?r[e]:r[e]/this.matrix[a][e]);return Py(this.matrix,n),My(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo(`years`,`months`,`weeks`,`days`,`hours`,`minutes`,`seconds`,`milliseconds`):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return My(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;let e=Fy(this.values);return My(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(e,t){return e===void 0||e===0?t===void 0||t===0:e===t}for(let n of jy)if(!t(this.values[n],e.values[n]))return!1;return!0}},Ly=`Invalid Interval`;function xoe(e,t){return!e||!e.isValid?Ry.invalid(`missing or invalid start`):!t||!t.isValid?Ry.invalid(`missing or invalid end`):t<e?Ry.invalid(`end before start`,`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}var Ry=class e{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new Ng(`need to specify a reason the Interval is invalid`);let r=t instanceof av?t:new av(t,n);if(iv.throwOnInvalid)throw new xae(r);return new e({invalid:r})}static fromDateTimes(t,n){let r=Cb(t),i=Cb(n);return xoe(r,i)??new e({start:r,end:i})}static after(t,n){let r=Iy.fromDurationLike(n),i=Cb(t);return e.fromDateTimes(i,i.plus(r))}static before(t,n){let r=Iy.fromDurationLike(n),i=Cb(t);return e.fromDateTimes(i.minus(r),i)}static fromISO(t,n){let[r,i]=(t||``).split(`/`,2);if(r&&i){let t,a;try{t=Sb.fromISO(r,n),a=t.isValid}catch{a=!1}let o,s;try{o=Sb.fromISO(i,n),s=o.isValid}catch{s=!1}if(a&&s)return e.fromDateTimes(t,o);if(a){let r=Iy.fromISO(i,n);if(r.isValid)return e.after(t,r)}else if(s){let t=Iy.fromISO(r,n);if(t.isValid)return e.before(o,t)}}return e.invalid(`unparsable`,`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e=`milliseconds`){return this.isValid?this.toDuration(e).get(e):NaN}count(e=`milliseconds`,t){if(!this.isValid)return NaN;let n=this.start.startOf(e,t),r;return r=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:t,end:n}={}){return this.isValid?e.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];let n=t.map(Cb).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),r=[],{s:i}=this,a=0;for(;i<this.e;){let t=n[a]||this.e,o=+t>+this.e?this.e:t;r.push(e.fromDateTimes(i,o)),i=o,a+=1}return r}splitBy(t){let n=Iy.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as(`milliseconds`)===0)return[];let{s:r}=this,i=1,a,o=[];for(;r<this.e;){let t=this.start.plus(n.mapUnits(e=>e*i));a=+t>+this.e?this.e:t,o.push(e.fromDateTimes(r,a)),r=a,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(t){if(!this.isValid)return this;let n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return n>=r?null:e.fromDateTimes(n,r)}union(t){if(!this.isValid)return this;let n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return e.fromDateTimes(n,r)}static merge(e){let[t,n]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n],[[],null]);return n&&t.push(n),t}static xor(t){let n=null,r=0,i=[],a=t.map(e=>[{time:e.s,type:`s`},{time:e.e,type:`e`}]),o=Array.prototype.concat(...a),s=o.sort((e,t)=>e.time-t.time);for(let t of s)r+=t.type===`s`?1:-1,r===1?n=t.time:(n&&+n!=+t.time&&i.push(e.fromDateTimes(n,t.time)),n=null);return e.merge(i)}difference(...t){return e.xor([this].concat(t)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Ly}[Symbol.for(`nodejs.util.inspect.custom`)](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Lg,t={}){return this.isValid?cy.create(this.s.loc.clone(t),e).formatInterval(this):Ly}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ly}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ly}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ly}toFormat(e,{separator:t=`  `}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Ly}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Iy.invalid(this.invalidReason)}mapEndpoints(t){return e.fromDateTimes(t(this.s),t(this.e))}},zy=class{static hasDST(e=iv.defaultZone){let t=Sb.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return p_.isValidZone(e)}static normalizeZone(e){return H_(e,iv.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||R_.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||R_.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||R_.create(e)).getWeekendDays().slice()}static months(e=`long`,{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i=`gregory`}={}){return(r||R_.create(t,n,i)).months(e)}static monthsFormat(e=`long`,{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i=`gregory`}={}){return(r||R_.create(t,n,i)).months(e,!0)}static weekdays(e=`long`,{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||R_.create(t,n,null)).weekdays(e)}static weekdaysFormat(e=`long`,{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||R_.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return R_.create(e).meridiems()}static eras(e=`short`,{locale:t=null}={}){return R_.create(t,null,`gregory`).eras(e)}static features(){return{relative:Dv(),localeWeek:Ov()}}};function By(e,t){let n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf(`day`).valueOf(),r=n(t)-n(e);return Math.floor(Iy.fromMillis(r).as(`days`))}function Soe(e,t,n){let r=[[`years`,(e,t)=>t.year-e.year],[`quarters`,(e,t)=>t.quarter-e.quarter+(t.year-e.year)*4],[`months`,(e,t)=>t.month-e.month+(t.year-e.year)*12],[`weeks`,(e,t)=>{let n=By(e,t);return(n-n%7)/7}],[`days`,By]],i={},a=e,o,s;for(let[c,l]of r)n.indexOf(c)>=0&&(o=c,i[c]=l(e,t),s=a.plus(i),s>t?(i[c]--,e=a.plus(i),e>t&&(s=e,i[c]--,e=a.plus(i))):e=s);return[e,i,s,o]}function Coe(e,t,n,r){let[i,a,o,s]=Soe(e,t,n),c=t-i,l=n.filter(e=>[`hours`,`minutes`,`seconds`,`milliseconds`].indexOf(e)>=0);l.length===0&&(o<t&&(o=i.plus({[s]:1})),o!==i&&(a[s]=(a[s]||0)+c/(o-i)));let u=Iy.fromObject(a,r);return l.length>0?Iy.fromMillis(c,r).shiftTo(...l).plus(u):u}var woe=`missing Intl.DateTimeFormat.formatToParts support`;function Vy(e,t=e=>e){return{regex:e,deser:([e])=>t(K_(e))}}var Hy=`[ \xA0]`,Uy=new RegExp(Hy,`g`);function Toe(e){return e.replace(/\./g,`\\.?`).replace(Uy,Hy)}function Wy(e){return e.replace(/\./g,``).replace(Uy,` `).toLowerCase()}function Gy(e,t){return e===null?null:{regex:RegExp(e.map(Toe).join(`|`)),deser:([n])=>e.findIndex(e=>Wy(n)===Wy(e))+t}}function Ky(e,t){return{regex:e,deser:([,e,t])=>Yv(e,t),groups:t}}function qy(e){return{regex:e,deser:([e])=>e}}function Eoe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,`\\$&`)}function Doe(e,t){let n=Y_(t),r=Y_(t,`{2}`),i=Y_(t,`{3}`),a=Y_(t,`{4}`),o=Y_(t,`{6}`),s=Y_(t,`{1,2}`),c=Y_(t,`{1,3}`),l=Y_(t,`{1,6}`),u=Y_(t,`{1,9}`),d=Y_(t,`{2,4}`),f=Y_(t,`{4,6}`),p=e=>({regex:RegExp(Eoe(e.val)),deser:([e])=>e,literal:!0}),m=(m=>{if(e.literal)return p(m);switch(m.val){case`G`:return Gy(t.eras(`short`),0);case`GG`:return Gy(t.eras(`long`),0);case`y`:return Vy(l);case`yy`:return Vy(d,qv);case`yyyy`:return Vy(a);case`yyyyy`:return Vy(f);case`yyyyyy`:return Vy(o);case`M`:return Vy(s);case`MM`:return Vy(r);case`MMM`:return Gy(t.months(`short`,!0),1);case`MMMM`:return Gy(t.months(`long`,!0),1);case`L`:return Vy(s);case`LL`:return Vy(r);case`LLL`:return Gy(t.months(`short`,!1),1);case`LLLL`:return Gy(t.months(`long`,!1),1);case`d`:return Vy(s);case`dd`:return Vy(r);case`o`:return Vy(c);case`ooo`:return Vy(i);case`HH`:return Vy(r);case`H`:return Vy(s);case`hh`:return Vy(r);case`h`:return Vy(s);case`mm`:return Vy(r);case`m`:return Vy(s);case`q`:return Vy(s);case`qq`:return Vy(r);case`s`:return Vy(s);case`ss`:return Vy(r);case`S`:return Vy(c);case`SSS`:return Vy(i);case`u`:return qy(u);case`uu`:return qy(s);case`uuu`:return Vy(n);case`a`:return Gy(t.meridiems(),0);case`kkkk`:return Vy(a);case`kk`:return Vy(d,qv);case`W`:return Vy(s);case`WW`:return Vy(r);case`E`:case`c`:return Vy(n);case`EEE`:return Gy(t.weekdays(`short`,!1),1);case`EEEE`:return Gy(t.weekdays(`long`,!1),1);case`ccc`:return Gy(t.weekdays(`short`,!0),1);case`cccc`:return Gy(t.weekdays(`long`,!0),1);case`Z`:case`ZZ`:return Ky(RegExp(`([+-]${s.source})(?::(${r.source}))?`),2);case`ZZZ`:return Ky(RegExp(`([+-]${s.source})(${r.source})?`),2);case`z`:return qy(/[a-z_+-/]{1,256}?/i);case` `:return qy(/[^\S\n\r]/);default:return p(m)}})(e)||{invalidReason:woe};return m.token=e,m}var Ooe={year:{"2-digit":`yy`,numeric:`yyyyy`},month:{numeric:`M`,"2-digit":`MM`,short:`MMM`,long:`MMMM`},day:{numeric:`d`,"2-digit":`dd`},weekday:{short:`EEE`,long:`EEEE`},dayperiod:`a`,dayPeriod:`a`,hour12:{numeric:`h`,"2-digit":`hh`},hour24:{numeric:`H`,"2-digit":`HH`},minute:{numeric:`m`,"2-digit":`mm`},second:{numeric:`s`,"2-digit":`ss`},timeZoneName:{long:`ZZZZZ`,short:`ZZZ`}};function koe(e,t,n){let{type:r,value:i}=e;if(r===`literal`){let e=/^\s+$/.test(i);return{literal:!e,val:e?` `:i}}let a=t[r],o=r;r===`hour`&&(o=t.hour12==null?t.hourCycle==null?n.hour12?`hour12`:`hour24`:t.hourCycle===`h11`||t.hourCycle===`h12`?`hour12`:`hour24`:t.hour12?`hour12`:`hour24`);let s=Ooe[o];if(typeof s==`object`&&(s=s[a]),s)return{literal:!1,val:s}}function Aoe(e){return[`^${e.map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,``)}$`,e]}function joe(e,t,n){let r=e.match(t);if(r){let e={},t=1;for(let i in n)if(Mv(n,i)){let a=n[i],o=a.groups?a.groups+1:1;!a.literal&&a.token&&(e[a.token.val[0]]=a.deser(r.slice(t,t+o))),t+=o}return[r,e]}else return[r,{}]}function Moe(e){let t=e=>{switch(e){case`S`:return`millisecond`;case`s`:return`second`;case`m`:return`minute`;case`h`:case`H`:return`hour`;case`d`:return`day`;case`o`:return`ordinal`;case`L`:case`M`:return`month`;case`y`:return`year`;case`E`:case`c`:return`weekday`;case`W`:return`weekNumber`;case`k`:return`weekYear`;case`q`:return`quarter`;default:return null}},n=null,r;return Sv(e.z)||(n=p_.create(e.z)),Sv(e.Z)||(n||=new B_(e.Z),r=e.Z),Sv(e.q)||(e.M=(e.q-1)*3+1),Sv(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Sv(e.u)||(e.S=zv(e.u)),[Object.keys(e).reduce((n,r)=>{let i=t(r);return i&&(n[i]=e[r]),n},{}),n,r]}var Jy=null;function Noe(){return Jy||=Sb.fromMillis(1555555555555),Jy}function Poe(e,t){if(e.literal)return e;let n=cy.macroTokenToFormatOpts(e.val),r=Qy(n,t);return r==null||r.includes(void 0)?e:r}function Yy(e,t){return Array.prototype.concat(...e.map(e=>Poe(e,t)))}var Xy=class{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Yy(cy.parseFormat(t),e),this.units=this.tokens.map(t=>Doe(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){let[e,t]=Aoe(this.units);this.regex=RegExp(e,`i`),this.handlers=t}}explainFromTokens(e){if(this.isValid){let[t,n]=joe(e,this.regex,this.handlers),[r,i,a]=n?Moe(n):[null,null,void 0];if(Mv(n,`a`)&&Mv(n,`H`))throw new jg(`Can't include meridiem when specifying 24-hour format`);return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:r,zone:i,specificOffset:a}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function Zy(e,t,n){return new Xy(e,n).explainFromTokens(t)}function Foe(e,t,n){let{result:r,zone:i,specificOffset:a,invalidReason:o}=Zy(e,t,n);return[r,i,a,o]}function Qy(e,t){if(!e)return null;let n=cy.create(t,e).dtFormatter(Noe()),r=n.formatToParts(),i=n.resolvedOptions();return r.map(t=>koe(t,e,i))}var $y=`Invalid DateTime`,eb=864e13;function tb(e){return new av(`unsupported zone`,`the zone "${e.name}" is not supported`)}function nb(e){return e.weekData===null&&(e.weekData=pv(e.c)),e.weekData}function rb(e){return e.localWeekData===null&&(e.localWeekData=pv(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function ib(e,t){let n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Sb({...n,...t,old:n})}function ab(e,t,n){let r=e-t*60*1e3,i=n.offset(r);if(t===i)return[r,t];r-=(i-t)*60*1e3;let a=n.offset(r);return i===a?[r,i]:[e-Math.min(i,a)*60*1e3,Math.max(i,a)]}function ob(e,t){e+=t*60*1e3;let n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function sb(e,t,n){return ab(Wv(e),t,n)}function cb(e,t){let n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,a={...e.c,year:r,month:i,day:Math.min(e.c.day,Uv(r,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Iy.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as(`milliseconds`),s=Wv(a),[c,l]=ab(s,n,e.zone);return o!==0&&(c+=o,l=e.zone.offset(c)),{ts:c,o:l}}function lb(e,t,n,r,i,a){let{setZone:o,zone:s}=n;if(e&&Object.keys(e).length!==0||t){let r=t||s,i=Sb.fromObject(e,{...n,zone:r,specificOffset:a});return o?i:i.setZone(s)}else return Sb.invalid(new av(`unparsable`,`the input "${i}" can't be parsed as ${r}`))}function ub(e,t,n=!0){return e.isValid?cy.create(R_.create(`en-US`),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function db(e,t,n){let r=e.c.year>9999||e.c.year<0,i=``;if(r&&e.c.year>=0&&(i+=`+`),i+=Iv(e.c.year,r?6:4),n===`year`)return i;if(t){if(i+=`-`,i+=Iv(e.c.month),n===`month`)return i;i+=`-`}else if(i+=Iv(e.c.month),n===`month`)return i;return i+=Iv(e.c.day),i}function fb(e,t,n,r,i,a,o){let s=!n||e.c.millisecond!==0||e.c.second!==0,c=``;switch(o){case`day`:case`month`:case`year`:break;default:if(c+=Iv(e.c.hour),o===`hour`)break;if(t){if(c+=`:`,c+=Iv(e.c.minute),o===`minute`)break;s&&(c+=`:`,c+=Iv(e.c.second))}else{if(c+=Iv(e.c.minute),o===`minute`)break;s&&(c+=Iv(e.c.second))}if(o===`second`)break;s&&(!r||e.c.millisecond!==0)&&(c+=`.`,c+=Iv(e.c.millisecond,3))}return i&&(e.isOffsetFixed&&e.offset===0&&!a?c+=`Z`:e.o<0?(c+=`-`,c+=Iv(Math.trunc(-e.o/60)),c+=`:`,c+=Iv(Math.trunc(-e.o%60))):(c+=`+`,c+=Iv(Math.trunc(e.o/60)),c+=`:`,c+=Iv(Math.trunc(e.o%60)))),a&&(c+=`[`+e.zone.ianaName+`]`),c}var pb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ioe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Loe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mb=[`year`,`month`,`day`,`hour`,`minute`,`second`,`millisecond`],Roe=[`weekYear`,`weekNumber`,`weekday`,`hour`,`minute`,`second`,`millisecond`],zoe=[`year`,`ordinal`,`hour`,`minute`,`second`,`millisecond`];function hb(e){let t={year:`year`,years:`year`,month:`month`,months:`month`,day:`day`,days:`day`,hour:`hour`,hours:`hour`,minute:`minute`,minutes:`minute`,quarter:`quarter`,quarters:`quarter`,second:`second`,seconds:`second`,millisecond:`millisecond`,milliseconds:`millisecond`,weekday:`weekday`,weekdays:`weekday`,weeknumber:`weekNumber`,weeksnumber:`weekNumber`,weeknumbers:`weekNumber`,weekyear:`weekYear`,weekyears:`weekYear`,ordinal:`ordinal`}[e.toLowerCase()];if(!t)throw new Mg(e);return t}function gb(e){switch(e.toLowerCase()){case`localweekday`:case`localweekdays`:return`localWeekday`;case`localweeknumber`:case`localweeknumbers`:return`localWeekNumber`;case`localweekyear`:case`localweekyears`:return`localWeekYear`;default:return hb(e)}}function Boe(e){if(bb===void 0&&(bb=iv.now()),e.type!==`iana`)return e.offset(bb);let t=e.name,n=xb.get(t);return n===void 0&&(n=e.offset(bb),xb.set(t,n)),n}function _b(e,t){let n=H_(t.zone,iv.defaultZone);if(!n.isValid)return Sb.invalid(tb(n));let r=R_.fromObject(t),i,a;if(Sv(e.year))i=iv.now();else{for(let t of mb)Sv(e[t])&&(e[t]=pb[t]);let t=bv(e)||xv(e);if(t)return Sb.invalid(t);let r=Boe(n);[i,a]=sb(e,r,n)}return new Sb({ts:i,zone:n,loc:r,o:a})}function vb(e,t,n){let r=Sv(n.round)?!0:n.round,i=Sv(n.rounding)?`trunc`:n.rounding,a=(e,a)=>(e=Bv(e,r||n.calendary?0:2,n.calendary?`round`:i),t.loc.clone(n).relFormatter(n).format(e,a)),o=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return a(o(n.unit),n.unit);for(let e of n.units){let t=o(e);if(Math.abs(t)>=1)return a(t,e)}return a(e>t?-0:0,n.units[n.units.length-1])}function yb(e){let t={},n;return e.length>0&&typeof e[e.length-1]==`object`?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}var bb,xb=new Map,Sb=class e{constructor(e){let t=e.zone||iv.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new av(`invalid input`):null)||(t.isValid?null:tb(t));this.ts=Sv(e.ts)?iv.now():e.ts;let r=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,i]=[e.old.c,e.old.o];else{let a=Cv(e.o)&&!e.old?e.o:t.offset(this.ts);r=ob(this.ts,a),n=Number.isNaN(r.year)?new av(`invalid input`):null,r=n?null:r,i=n?null:a}this._zone=t,this.loc=e.loc||R_.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}static now(){return new e({})}static local(){let[e,t]=yb(arguments),[n,r,i,a,o,s,c]=t;return _b({year:n,month:r,day:i,hour:a,minute:o,second:s,millisecond:c},e)}static utc(){let[e,t]=yb(arguments),[n,r,i,a,o,s,c]=t;return e.zone=B_.utcInstance,_b({year:n,month:r,day:i,hour:a,minute:o,second:s,millisecond:c},e)}static fromJSDate(t,n={}){let r=Ev(t)?t.valueOf():NaN;if(Number.isNaN(r))return e.invalid(`invalid input`);let i=H_(n.zone,iv.defaultZone);return i.isValid?new e({ts:r,zone:i,loc:R_.fromObject(n)}):e.invalid(tb(i))}static fromMillis(t,n={}){if(Cv(t))return t<-eb||t>eb?e.invalid(`Timestamp out of range`):new e({ts:t,zone:H_(n.zone,iv.defaultZone),loc:R_.fromObject(n)});throw new Ng(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Cv(t))return new e({ts:t*1e3,zone:H_(n.zone,iv.defaultZone),loc:R_.fromObject(n)});throw new Ng(`fromSeconds requires a numerical input`)}static fromObject(t,n={}){t||={};let r=H_(n.zone,iv.defaultZone);if(!r.isValid)return e.invalid(tb(r));let i=R_.fromObject(n),a=Zv(t,gb),{minDaysInFirstWeek:o,startOfWeek:s}=_v(a,i),c=iv.now(),l=Sv(n.specificOffset)?r.offset(c):n.specificOffset,u=!Sv(a.ordinal),d=!Sv(a.year),f=!Sv(a.month)||!Sv(a.day),p=d||f,m=a.weekYear||a.weekNumber;if((p||u)&&m)throw new jg(`Can't mix weekYear/weekNumber units with year/month/day or ordinals`);if(f&&u)throw new jg(`Can't mix ordinal dates with month/day`);let h=m||a.weekday&&!p,g,_,v=ob(c,l);h?(g=Roe,_=Ioe,v=pv(v,o,s)):u?(g=zoe,_=Loe,v=hv(v)):(g=mb,_=pb);let y=!1;for(let e of g){let t=a[e];Sv(t)?y?a[e]=_[e]:a[e]=v[e]:y=!0}let b=h?vv(a,o,s):u?yv(a):bv(a),x=b||xv(a);if(x)return e.invalid(x);let S=h?mv(a,o,s):u?gv(a):a,[ee,te]=sb(S,l,r),ne=new e({ts:ee,zone:r,o:te,loc:i});return a.weekday&&p&&t.weekday!==ne.weekday?e.invalid(`mismatched weekday`,`you can't specify both a weekday of ${a.weekday} and a date of ${ne.toISO()}`):ne.isValid?ne:e.invalid(ne.invalid)}static fromISO(e,t={}){let[n,r]=coe(e);return lb(n,r,t,`ISO 8601`,e)}static fromRFC2822(e,t={}){let[n,r]=loe(e);return lb(n,r,t,`RFC 2822`,e)}static fromHTTP(e,t={}){let[n,r]=uoe(e);return lb(n,r,t,`HTTP`,t)}static fromFormat(t,n,r={}){if(Sv(t)||Sv(n))throw new Ng(`fromFormat requires an input string and a format`);let{locale:i=null,numberingSystem:a=null}=r,o=R_.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0}),[s,c,l,u]=Foe(o,t,n);return u?e.invalid(u):lb(s,c,r,`format ${n}`,t,l)}static fromString(t,n,r={}){return e.fromFormat(t,n,r)}static fromSQL(e,t={}){let[n,r]=_oe(e);return lb(n,r,t,`SQL`,e)}static invalid(t,n=null){if(!t)throw new Ng(`need to specify a reason the DateTime is invalid`);let r=t instanceof av?t:new av(t,n);if(iv.throwOnInvalid)throw new bae(r);return new e({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let n=Qy(e,R_.fromObject(t));return n?n.map(e=>e?e.val:null).join(``):null}static expandFormat(e,t={}){return Yy(cy.parseFormat(e),R_.fromObject(t)).map(e=>e.val).join(``)}static resetCache(){bb=void 0,xb.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?nb(this).weekYear:NaN}get weekNumber(){return this.isValid?nb(this).weekNumber:NaN}get weekday(){return this.isValid?nb(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?rb(this).weekday:NaN}get localWeekNumber(){return this.isValid?rb(this).weekNumber:NaN}get localWeekYear(){return this.isValid?rb(this).weekYear:NaN}get ordinal(){return this.isValid?hv(this.c).ordinal:NaN}get monthShort(){return this.isValid?zy.months(`short`,{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?zy.months(`long`,{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?zy.weekdays(`short`,{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?zy.weekdays(`long`,{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:`short`,locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:`long`,locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,t=6e4,n=Wv(this.c),r=this.zone.offset(n-e),i=this.zone.offset(n+e),a=this.zone.offset(n-r*t),o=this.zone.offset(n-i*t);if(a===o)return[this];let s=n-a*t,c=n-o*t,l=ob(s,a),u=ob(c,o);return l.hour===u.hour&&l.minute===u.minute&&l.second===u.second&&l.millisecond===u.millisecond?[ib(this,{ts:s}),ib(this,{ts:c})]:[this]}get isInLeapYear(){return Vv(this.year)}get daysInMonth(){return Uv(this.year,this.month)}get daysInYear(){return this.isValid?Hv(this.year):NaN}get weeksInWeekYear(){return this.isValid?Kv(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Kv(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:n,calendar:r}=cy.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(B_.instance(e),t)}toLocal(){return this.setZone(iv.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(t=H_(t,iv.defaultZone),t.equals(this.zone))return this;if(t.isValid){let e=this.ts;if(n||r){let n=t.offset(this.ts),r=this.toObject();[e]=sb(r,n,t)}return ib(this,{ts:e,zone:t})}else return e.invalid(tb(t))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){let r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return ib(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let t=Zv(e,gb),{minDaysInFirstWeek:n,startOfWeek:r}=_v(t,this.loc),i=!Sv(t.weekYear)||!Sv(t.weekNumber)||!Sv(t.weekday),a=!Sv(t.ordinal),o=!Sv(t.year),s=!Sv(t.month)||!Sv(t.day),c=o||s,l=t.weekYear||t.weekNumber;if((c||a)&&l)throw new jg(`Can't mix weekYear/weekNumber units with year/month/day or ordinals`);if(s&&a)throw new jg(`Can't mix ordinal dates with month/day`);let u;i?u=mv({...pv(this.c,n,r),...t},n,r):Sv(t.ordinal)?(u={...this.toObject(),...t},Sv(t.day)&&(u.day=Math.min(Uv(u.year,u.month),u.day))):u=gv({...hv(this.c),...t});let[d,f]=sb(u,this.o,this.zone);return ib(this,{ts:d,o:f})}plus(e){if(!this.isValid)return this;let t=Iy.fromDurationLike(e);return ib(this,cb(this,t))}minus(e){if(!this.isValid)return this;let t=Iy.fromDurationLike(e).negate();return ib(this,cb(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;let n={},r=Iy.normalizeUnit(e);switch(r){case`years`:n.month=1;case`quarters`:case`months`:n.day=1;case`weeks`:case`days`:n.hour=0;case`hours`:n.minute=0;case`minutes`:n.second=0;case`seconds`:n.millisecond=0;break}if(r===`weeks`)if(t){let e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;return r===`quarters`&&(n.month=(Math.ceil(this.month/3)-1)*3+1),this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?cy.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):$y}toLocaleString(e=Lg,t={}){return this.isValid?cy.create(this.loc.clone(t),e).formatDateTime(this):$y}toLocaleParts(e={}){return this.isValid?cy.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e=`extended`,suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:i=!1,precision:a=`milliseconds`}={}){if(!this.isValid)return null;a=hb(a);let o=e===`extended`,s=db(this,o,a);return mb.indexOf(a)>=3&&(s+=`T`),s+=fb(this,o,t,n,r,i,a),s}toISODate({format:e=`extended`,precision:t=`day`}={}){return this.isValid?db(this,e===`extended`,hb(t)):null}toISOWeekDate(){return ub(this,`kkkk-'W'WW-c`)}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:i=!1,format:a=`extended`,precision:o=`milliseconds`}={}){return this.isValid?(o=hb(o),(r&&mb.indexOf(o)>=3?`T`:``)+fb(this,a===`extended`,t,e,n,i,o)):null}toRFC2822(){return ub(this,`EEE, dd LLL yyyy HH:mm:ss ZZZ`,!1)}toHTTP(){return ub(this.toUTC(),`EEE, dd LLL yyyy HH:mm:ss 'GMT'`)}toSQLDate(){return this.isValid?db(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r=`HH:mm:ss.SSS`;return(t||e)&&(n&&(r+=` `),t?r+=`z`:e&&(r+=`ZZ`)),ub(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():$y}[Symbol.for(`nodejs.util.inspect.custom`)](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t=`milliseconds`,n={}){if(!this.isValid||!e.isValid)return Iy.invalid(`created by diffing an invalid DateTime`);let r={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=kv(t).map(Iy.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,s=a?e:this,c=Coe(o,s,i,r);return a?c.negate():c}diffNow(t=`milliseconds`,n={}){return this.diff(e.now(),t,n)}until(e){return this.isValid?Ry.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;let r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,n)<=r&&r<=i.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(t={}){if(!this.isValid)return null;let n=t.base||e.fromObject({},{zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0,i=[`years`,`months`,`days`,`hours`,`minutes`,`seconds`],a=t.unit;return Array.isArray(t.unit)&&(i=t.unit,a=void 0),vb(n,this.plus(r),{...t,numeric:`always`,units:i,unit:a})}toRelativeCalendar(t={}){return this.isValid?vb(t.base||e.fromObject({},{zone:this.zone}),this,{...t,numeric:`auto`,units:[`years`,`months`,`days`],calendary:!0}):null}static min(...t){if(!t.every(e.isDateTime))throw new Ng(`min requires all arguments be DateTimes`);return Av(t,e=>e.valueOf(),Math.min)}static max(...t){if(!t.every(e.isDateTime))throw new Ng(`max requires all arguments be DateTimes`);return Av(t,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){let{locale:r=null,numberingSystem:i=null}=n,a=R_.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return Zy(a,e,t)}static fromStringExplain(t,n,r={}){return e.fromFormatExplain(t,n,r)}static buildFormatParser(e,t={}){let{locale:n=null,numberingSystem:r=null}=t,i=R_.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new Xy(i,e)}static fromFormatParser(t,n,r={}){if(Sv(t)||Sv(n))throw new Ng(`fromFormatParser requires an input string and a format parser`);let{locale:i=null,numberingSystem:a=null}=r,o=R_.fromOpts({locale:i,numberingSystem:a,defaultToEN:!0});if(!o.equals(n.locale))throw new Ng(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);let{result:s,zone:c,specificOffset:l,invalidReason:u}=n.explainFromTokens(t);return u?e.invalid(u):lb(s,c,r,`format ${n.format}`,t,l)}static get DATE_SHORT(){return Lg}static get DATE_MED(){return Rg}static get DATE_MED_WITH_WEEKDAY(){return Cae}static get DATE_FULL(){return zg}static get DATE_HUGE(){return Bg}static get TIME_SIMPLE(){return Vg}static get TIME_WITH_SECONDS(){return Hg}static get TIME_WITH_SHORT_OFFSET(){return Ug}static get TIME_WITH_LONG_OFFSET(){return Wg}static get TIME_24_SIMPLE(){return Gg}static get TIME_24_WITH_SECONDS(){return Kg}static get TIME_24_WITH_SHORT_OFFSET(){return qg}static get TIME_24_WITH_LONG_OFFSET(){return Jg}static get DATETIME_SHORT(){return Yg}static get DATETIME_SHORT_WITH_SECONDS(){return Xg}static get DATETIME_MED(){return Zg}static get DATETIME_MED_WITH_SECONDS(){return Qg}static get DATETIME_MED_WITH_WEEKDAY(){return $g}static get DATETIME_FULL(){return e_}static get DATETIME_FULL_WITH_SECONDS(){return t_}static get DATETIME_HUGE(){return n_}static get DATETIME_HUGE_WITH_SECONDS(){return r_}};function Cb(e){if(Sb.isDateTime(e))return e;if(e&&e.valueOf&&Cv(e.valueOf()))return Sb.fromJSDate(e);if(e&&typeof e==`object`)return Sb.fromObject(e);throw new Ng(`Unknown datetime argument: ${e}, of type ${typeof e}`)}var Voe=`shortOffset`;function Hoe(e){return`timeZoneIANA`in e}function Uoe(e){return e.startsWith(`UTC`)}function wb(e,t=!1){return{json:{read:{source:e,reader:(t,n)=>n[e]?Tb(n[e]):null},write:!!t&&{allowNull:!0,writer(t,n){n[e]=t?Woe(t):null}}}}}function Tb(e,t=Dg){return e?Hoe(e)?e.timeZoneIANA:Goe(e,t):t}function Woe(e){return{timeZoneIANA:e}}function Goe(e,t=Dg){if(!e||!kg.has(e.timeZone))return t;let n=kg.get(e.timeZone);return Uoe(e.timeZone)||e.respectsDaylightSaving?n:Koe(n)}function Koe(e){let t=Sb.local().setZone(e),n=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return n===0?`Etc/UTC`:`Etc/GMT${B_.instance(-n).formatOffset(0,`narrow`)}`}function qoe(e,t,n,r,i){if(t&&i===`date`)return{timeZone:`UTC`,timeZoneName:void 0};let a=r.hour,o=n===Og;return{timeZone:o?i===`timestamp-offset`?void 0:e??`UTC`:n,timeZoneName:o&&a?Voe:void 0}}function Eb(e){let t=new Set([`etc/utc`,`etc/gmt`,`gmt`]),n=new Set(Intl.supportedValuesOf(`timeZone`).map(e=>e.toLowerCase()));return e===`system`||e===`unknown`||t.has(e.toLowerCase())||n.has(e.toLowerCase())}var Joe={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},Yoe={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},Db={timeZone:`UTC`},Ob={year:`numeric`,month:`numeric`,day:`numeric`},kb={year:`numeric`,month:`long`,day:`numeric`},Ab={year:`numeric`,month:`short`,day:`numeric`},jb={year:`numeric`,month:`long`,weekday:`long`,day:`numeric`},Mb={hour:`numeric`,minute:`numeric`},Nb={...Mb,second:`numeric`},Pb={hourCycle:`h23`},Fb={...Mb,...Pb},Ib={...Nb,...Pb},Lb={"short-date":Ob,"short-date-short-time":{...Ob,...Mb},"short-date-short-time-24":{...Ob,...Fb},"short-date-long-time":{...Ob,...Nb},"short-date-long-time-24":{...Ob,...Ib},"short-date-le":Ob,"short-date-le-short-time":{...Ob,...Mb},"short-date-le-short-time-24":{...Ob,...Fb},"short-date-le-long-time":{...Ob,...Nb},"short-date-le-long-time-24":{...Ob,...Ib},"long-month-day-year":kb,"long-month-day-year-short-time":{...kb,...Mb},"long-month-day-year-short-time-24":{...kb,...Fb},"long-month-day-year-long-time":{...kb,...Nb},"long-month-day-year-long-time-24":{...kb,...Ib},"day-short-month-year":Ab,"day-short-month-year-short-time":{...Ab,...Mb},"day-short-month-year-short-time-24":{...Ab,...Fb},"day-short-month-year-long-time":{...Ab,...Nb},"day-short-month-year-long-time-24":{...Ab,...Ib},"long-date":jb,"long-date-short-time":{...jb,...Mb},"long-date-short-time-24":{...jb,...Fb},"long-date-long-time":{...jb,...Nb},"long-date-long-time-24":{...jb,...Ib},"long-month-year":{month:`long`,year:`numeric`},"short-month-year":{month:`short`,year:`numeric`},year:{year:`numeric`},"short-time":Mb,"long-time":Nb},Xoe=Cr()({shortDate:`short-date`,shortDateShortTime:`short-date-short-time`,shortDateShortTime24:`short-date-short-time-24`,shortDateLongTime:`short-date-long-time`,shortDateLongTime24:`short-date-long-time-24`,shortDateLE:`short-date-le`,shortDateLEShortTime:`short-date-le-short-time`,shortDateLEShortTime24:`short-date-le-short-time-24`,shortDateLELongTime:`short-date-le-long-time`,shortDateLELongTime24:`short-date-le-long-time-24`,longMonthDayYear:`long-month-day-year`,longMonthDayYearShortTime:`long-month-day-year-short-time`,longMonthDayYearShortTime24:`long-month-day-year-short-time-24`,longMonthDayYearLongTime:`long-month-day-year-long-time`,longMonthDayYearLongTime24:`long-month-day-year-long-time-24`,dayShortMonthYear:`day-short-month-year`,dayShortMonthYearShortTime:`day-short-month-year-short-time`,dayShortMonthYearShortTime24:`day-short-month-year-short-time-24`,dayShortMonthYearLongTime:`day-short-month-year-long-time`,dayShortMonthYearLongTime24:`day-short-month-year-long-time-24`,longDate:`long-date`,longDateShortTime:`long-date-short-time`,longDateShortTime24:`long-date-short-time-24`,longDateLongTime:`long-date-long-time`,longDateLongTime24:`long-date-long-time-24`,longMonthYear:`long-month-year`,shortMonthYear:`short-month-year`,year:`year`}),Rb={ar:`ar-u-nu-latn-ca-gregory`,nn:`no-NN`},Zoe=new Intl.DateTimeFormat(`bs`,{month:`long`}).formatToParts(new Date(2025,2)),Qoe=Zoe.find(({type:e})=>e===`month`)?.value.toLowerCase();function zb(){let e=yg();return(e&&Rb[e])??bg()}Qoe!==`mart`&&(Rb.bs=`sr-Latn-CS`);var Bb=new WeakMap,Vb=Lb[`short-date-short-time`];Lb[`short-date`];function $oe(e){let t=Bb.get(e);if(!t){let n=zb(),r=Ub(e.timeZone??`system`),i={...e,timeZone:r};t=new Intl.DateTimeFormat(n,i),Bb.set(e,t)}return t}function ese(e){return Lb[e]}function tse(e){let{dateStyle:t,timeStyle:n,hour12:r,year:i,month:a}=e,o={};return t?o.dateStyle=t:i&&(o.year=i,o.month=a||void 0),n&&!o.year&&(o.timeStyle=n,o.hour12=r===`auto`?void 0:r===`always`),o}function Hb(e,t=Vb){return $oe(t).format(e)}function nse(e,t=Vb){return Hb(new Date(e),{...t,...Db,...Yoe})}function rse(e,t=Vb){return Hb(new Date(`1970-01-01T${e}Z`),{...t,...Db,...Joe})}function ise(e,t=Vb){if(t.timeZone)return Hb(new Date(e),t);let n=Sb.fromISO(e,{setZone:!0}),r=n.offset===0?`UTC`:t.timeZone,i={...t,timeZone:r};return n.toLocaleString(i,{locale:zb()})}function Ub(e){switch(e){case Dg:return yae;case Og:return`UTC`;default:return e}}Tg(()=>{Bb=new WeakMap});var Wb={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:`no`,nl:!0,no:!0,nn:`no`,pl:!0,pt:`pt-BR`,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:`zh-CN`,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function ase(e){return e in Wb}function Gb(e){if(ase(e)){let t=Wb[e];return!0===t?e:t}return null}var Kb=[],qb=new Map;function Jb(e){for(let t of qb.keys())Zb(e.pattern,t)&&qb.delete(t)}function ose(e){return Kb.includes(e)||(Jb(e),Kb.unshift(e)),Yt(()=>{let t=Kb.indexOf(e);t>-1&&(Kb.splice(t,1),Jb(e))})}async function Yb(e){let t=vg();qb.has(e)||qb.set(e,sse(e,t));let n=qb.get(e);return n&&await cse.add(n),n}function Xb(e){let t=yg(e);return t?Gb(e)??Gb(t):null}async function sse(e,t){let n=[];for(let r of Kb)if(Zb(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(e){n.push(e)}throw n.length?new D(`intl:message-bundle-error`,`Errors occurred while loading "${e}"`,{errors:n}):new D(`intl:no-message-bundle-loader`,`No loader found for message bundle "${e}"`)}function Zb(e,t){return typeof e==`string`?t.startsWith(e):e.test(t)}Tg(()=>{qb.clear()});var cse=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||=zi()}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}},lse={ar:`ar-u-nu-latn`,bs:`sr-Latn-CS`,nn:`no-NN`},Qb=new WeakMap,$b={};function ex(e){let t=e||$b;if(!Qb.has(t)){let n=yg(),r=n&&lse[n]||bg();Qb.set(t,new Intl.NumberFormat(r,e))}return Qb.get(t)}function tx(e={}){let t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function nx(e){let{minimumFractionDigits:t,maximumFractionDigits:n,useGrouping:r}=e;return{minimumFractionDigits:t,maximumFractionDigits:n,useGrouping:r===`auto`?`auto`:r===`always`}}function rx(e,t){return Object.is(e,-0)&&(e=0),ex(t).format(e)}function use(e,t=vg()){if(!e)return null;let n=ix.get(t);if(!n){let e=ex().formatToParts(12345.6),r=[...ex({useGrouping:!1}).format(9876543210)].reverse(),i=new Map(r.map((e,t)=>[e,t])),a=RegExp(`[${e.find(e=>e.type===`group`)?.value}]`,`g`),o=RegExp(`[${e.find(e=>e.type===`decimal`)?.value}]`),s=RegExp(`[${r.join(``)}]`,`g`),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,l=/[-\u2212\u2013\u2014\u2015]/g;n=e=>{if((e=e.trim().replaceAll(a,``).replace(o,`.`).replace(s,e=>String(i.get(e))).replaceAll(c,``).replaceAll(l,`-`))===``)return null;let t=Number(e);return isNaN(t)?null:t},ix.set(t,n)}return n(e)}Tg(()=>{Qb=new WeakMap,$b={}});var ix=new Map,ax=()=>E.getLogger(`esri.intl.substitute`);function dse(e,t,n={}){let{format:r={}}=n;return at(e,e=>fse(e,t,r))}function fse(e,t,n){let r,i,a=e.indexOf(`:`);if(a===-1?r=e.trim():(r=e.slice(0,a).trim(),i=e.slice(a+1).trim()),!r)return``;let o=Ye(r,t);if(o==null)return``;let s=(i?n?.[i]:null)??n?.[r];return s?pse(o,s):i?mse(o,i):ox(o)}function pse(e,t){switch(t.type){case`date`:return Hb(e,t.intlOptions);case`number`:return rx(e,t.intlOptions);default:return ax().warn(`missing format descriptor for key {key}`),ox(e)}}function mse(e,t){switch(t.toLowerCase()){case`dateformat`:return Hb(e);case`numberformat`:return rx(e);default:return ax().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Hb(e):/^numberformat/i.test(t)?rx(e):ox(e)}}function ox(e){switch(typeof e){case`string`:return e;case`number`:return rx(e);case`boolean`:return``+e;default:return e instanceof Date?Hb(e):``}}async function hse(e,t,n,r){let i=t.exec(n);if(!i)throw new D(`esri-intl:invalid-bundle`,`Bundle id "${n}" is not compatible with the pattern "${t}"`);let a=i[1]?`${i[1]}/`:``,o=i[2],s=Xb(r),c=`${a}${o}.json`,l=s?`${a}${o}_${s}.json`:c,u;try{u=await sx(e(l))}catch(t){if(l===c)throw new D(`intl:unknown-bundle`,`Bundle "${n}" cannot be loaded`,{error:t});try{u=await sx(e(c))}catch(e){throw new D(`intl:unknown-bundle`,`Bundle "${n}" cannot be loaded`,{error:e})}}return u}async function sx(e){if(cx.fetchBundleAsset!=null)return cx.fetchBundleAsset(e);let t=await Qc(e,{responseType:`text`});return JSON.parse(t.data)}var gse=class{constructor({base:e=``,pattern:t,location:n=new URL(window.location.href)}){let r;r=typeof n==`string`?e=>new URL(e,new URL(n,window.location.href)).href:n instanceof URL?e=>new URL(e,n).href:n,this.pattern=typeof t==`string`?RegExp(`^${t}`):t,this.getAssetUrl=r,e=e?e.endsWith(`/`)?e:e+`/`:``,this.matcher=RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return hse(this.getAssetUrl,this.matcher,e,t)}};function _se(e){return new gse(e)}var cx={},vse=nx,yse=tx,bse=_se,xse=Yb,Sse=rx,lx=vg,ux=Cg,Cse=ose,wse=dse;Cse(bse({pattern:`esri/`,location:rl}));var dx={};function Tse(e){let t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...dx.paths,...e.paths}};return e.hasOwnProperty(`async`)||(t.async=!0),e.hasOwnProperty(`isDebug`)||(t.isDebug=!1),e.baseUrl||(t.baseUrl=dx.baseUrl),t}var Ese=class{constructor(){let e=document.createDocumentFragment();[`addEventListener`,`dispatchEvent`,`removeEventListener`].forEach(t=>{this[t]=(...n)=>e[t](...n)})}},fx=class{constructor(){this._dispatcher=new Ese,this._workerPostMessage({type:tg.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener(`message`,this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener(`message`,e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener(`messageerror`,this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener(`messageerror`,e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener(`error`,this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener(`error`,e)}postMessage(e){ui(()=>{this._workerMessageHandler(new MessageEvent(`message`,{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,n){this._dispatcher.addEventListener(e,t,n)}removeEventListener(e,t,n){this._dispatcher.removeEventListener(e,t,n)}_workerPostMessage(e){ui(()=>{this.dispatchEvent(new MessageEvent(`message`,{data:e}))})}async _workerMessageHandler(e){let t=ag(e);if(t&&t.type===tg.OPEN){let{modulePath:e,jobId:n}=t,r=await pg.loadWorker(e);r||=await R(()=>import(e),[]);let i=pg.connect(r);this._workerPostMessage({type:tg.OPENED,jobId:n,data:i})}}},px=()=>E.getLogger(`esri.core.workers.workerFactory`),{HANDSHAKE:Dse}=tg,Ose='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',mx,hx,gx=`Failed to create Worker. Fallback to execute module in main thread`;async function kse(){if(!c(`esri-workers`))return _x(new fx);if(!mx&&!hx)try{let e=Ose.split(`{CONFIGURATION}`).join(Ase());mx=URL.createObjectURL(new Blob([e],{type:`text/javascript`}))}catch(e){hx=e||{}}let e;if(mx)try{e=new Worker(mx,{name:`esri-worker-`+ jse++})}catch{px().warn(gx,hx),e=new fx}else px().warn(gx,hx),e=new fx;return _x(e)}async function _x(e){return new Promise(t=>{function n(i){let a=ag(i);a&&a.type===Dse&&(e.removeEventListener(`message`,n),e.removeEventListener(`error`,r),t(e))}function r(t){t.preventDefault(),e.removeEventListener(`message`,n),e.removeEventListener(`error`,r),px().warn(`Failed to create Worker. Fallback to execute module in main thread`,t),(e=new fx).addEventListener(`message`,n),e.addEventListener(`error`,r)}e.addEventListener(`message`,n),e.addEventListener(`error`,r)})}function Ase(){let e;if(nt.default!=null){let t={...nt};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(nt));e.assetsPath=ms(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?ms(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=lx(),e.has={"esri-csp-restrictions":c(`esri-csp-restrictions`),"esri-2d-debug":!1,"esri-2d-update-debug":c(`esri-2d-update-debug`),"esri-2d-log-updating":c(`esri-2d-log-updating`),"featurelayer-pbf":c(`featurelayer-pbf`),"featurelayer-fast-triangulation-enabled":c(`featurelayer-fast-triangulation-enabled`),"featurelayer-simplify-thresholds":c(`featurelayer-simplify-thresholds`),"featurelayer-simplify-payload-size-factors":c(`featurelayer-simplify-payload-size-factors`),"featurelayer-simplify-mobile-factor":c(`featurelayer-simplify-mobile-factor`),"featurelayer-query-max-depth":c(`featurelayer-query-max-depth`),"featurelayer-query-tile-max-features":c(`featurelayer-query-tile-max-features`),"featurelayer-query-tile-concurrency":c(`featurelayer-query-tile-concurrency`),"featurelayer-query-pausing-enabled":c(`featurelayer-query-pausing-enabled`),"featurelayer-snapshot-concurrency":c(`featurelayer-snapshot-concurrency`),"featurelayer-snapshot-enabled":c(`featurelayer-snapshot-enabled`),"parquetlayer-full-query-feature-count":c(`parquetlayer-full-query-feature-count`),"esri-atomics":c(`esri-atomics`),"esri-shared-array-buffer":c(`esri-shared-array-buffer`),"esri-tiles-debug":c(`esri-tiles-debug`),"esri-workers-arraybuffer-transfer":c(`esri-workers-arraybuffer-transfer`),"feature-polyline-generalization-factor":c(`feature-polyline-generalization-factor`),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ms(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ms(e.workers.workerPath):e.workers.workerPath=ms(rl(`esri/core/workers/RemoteClient.js`)),e.workers.useDynamicImport=c(`esri-esbuild-build`);let t=nt.workers.loaderConfig,n=Tse({baseUrl:t?.baseUrl,locale:lx(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),r={buildDate:ec,fullVersion:ic,revision:tc};return JSON.stringify({esriConfig:e,loaderConfig:n,kernelInfo:r})}var jse=0,{ABORT:vx,INVOKE:Mse,OPEN:Nse,OPENED:Pse,RESPONSE:yx}=tg,Fse=class e{static async create(t){let n=await kse();return new e(n,t)}constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener(`message`,this._onMessage.bind(this)),e.addEventListener(`error`,e=>{e.preventDefault(),E.getLogger(`esri.core.workers.WorkerOwner`).error(e)})}terminate(){this.worker.terminate()}async open(e,t={}){let{signal:n}=t,r=ng();return new Promise((t,i)=>{let a={resolve:t,reject:i,abortHandle:ki(n,()=>{this._outJobs.delete(r),this._post({type:vx,jobId:r})})};this._outJobs.set(r,a),this._post({type:Nse,jobId:r,modulePath:e})})}_onMessage(e){let t=ag(e);if(t)switch(t.type){case Pse:this._onOpenedMessage(t);break;case yx:this._onResponseMessage(t);break;case vx:this._onAbortMessage(t);break;case Mse:this._onInvokeMessage(t)}}_onAbortMessage(e){let t=this._inJobs,n=e.jobId,r=t.get(n);r&&(r.controller&&r.controller.abort(),t.delete(n))}_onInvokeMessage(e){let{methodName:t,jobId:n,data:r,abortable:i}=e,a=i?new AbortController:null,o=this._inJobs,s=mae[t],c;try{if(typeof s!=`function`)throw TypeError(`${t} is not a function`);c=s.call(null,r,{signal:a?a.signal:null})}catch(e){this._post({type:yx,jobId:n,error:rg(e)});return}Ii(c)?(o.set(n,{controller:a,promise:c}),c.then(e=>{o.has(n)&&(o.delete(n),this._post({type:yx,jobId:n},e))},e=>{o.has(n)&&(o.delete(n),e||={message:`Error encountered at method`+t},ji(e)||this._post({type:yx,jobId:n,error:rg(e||{message:`Error encountered at method ${t}`})}))})):this._post({type:yx,jobId:n},c)}_onOpenedMessage(e){let{jobId:t,data:n}=e,r=this._outJobs.get(t);r&&(this._outJobs.delete(t),Br(r.abortHandle),r.resolve(n))}_onResponseMessage(e){let{jobId:t,error:n,data:r}=e,i=this._outJobs.get(t);i&&(this._outJobs.delete(t),Br(i.abortHandle),n?i.reject(D.fromJSON(JSON.parse(n))):i.resolve(r))}_post(e,t,n){return ig(this.worker,e,t,n)}},bx=c(`host-browser`)?Math.min(navigator.hardwareConcurrency-1,c(`workers-pool-size`)??8):0,xx=c(`esri-mobile`)?Math.min(bx,3):bx;xx||=c(`safari`)&&c(`mac`)?7:2;var Sx=0,Cx=[];function Ise(){Dx()}async function wx(e,t){let n=new mg,{registryTarget:r,...i}=t;return await n.open(e,i),r&&iae(r,n),n}async function Tx(e,t={}){if(typeof e!=`string`)throw new D(`workers:undefined-module`,`modulePath is missing`);let n=t.strategy||`distributed`;if(c(`host-webworker`)&&!c(`esri-workers`)&&(n=`local`),n===`local`){let n=await pg.loadWorker(e);n||=await R(()=>import(e),[]),Ci(t.signal);let r=t.client||n;return wx([pg.connect(n,t.schedule)],{...t,client:r})}if(await Dx(),Ci(t.signal),n===`dedicated`){let n=Sx++%xx;return wx([await Cx[n].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){let n=Math.min(t.maxNumWorkers,xx);if(n<xx){let r=Array(n);for(let i=0;i<n;++i){let n=Sx++%xx;r[i]=Cx[n].open(e,t)}return wx(r,t)}}return wx(Cx.map(n=>n.open(e,t)),t)}var Ex=null;async function Dx(){if(Ex)return Ex;new AbortController;let e=[];for(let t=0;t<xx;t++){let n=Fse.create(t).then(e=>(Cx[t]=e,e));e.push(n)}return Ex=Promise.all(e),Ex}function Ox(){return[0,0,0]}function kx(e){return[e[0],e[1],e[2]]}function Ax(e,t,n){return[e,t,n]}function jx(e,t,n){return[e,t,n]}function Mx(e,t=Ox()){let n=Math.min(3,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function Nx(){return Ox()}function Px(){return Ax(1,1,1)}function Fx(){return Ax(1,0,0)}function Ix(){return Ax(0,1,0)}function Lx(){return Ax(0,0,1)}var Rx=Nx(),zx=Px(),Bx=Fx(),Vx=Ix(),Hx=Lx();Object.freeze(Object.defineProperty({__proto__:null,ONES:zx,UNIT_X:Bx,UNIT_Y:Vx,UNIT_Z:Hx,ZEROS:Rx,clone:kx,create:Ox,freeze:jx,fromArray:Mx,fromValues:Ax,ones:Px,unitX:Fx,unitY:Ix,unitZ:Lx,zeros:Nx},Symbol.toStringTag,{value:`Module`}));var Ux,Wx=Ux=class extends F{constructor(e){super(e),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new Ux({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};e([N()],Wx.prototype,`isInverse`,void 0),e([N()],Wx.prototype,`wkt`,void 0),e([N()],Wx.prototype,`wkid`,void 0),Wx=Ux=e([P(`esri.geometry.operators.support.GeographicTransformationStep`)],Wx);var Gx,Kx=Gx=class extends F{constructor(e){super(e),this.steps=[]}getInverse(){let e=new Gx;for(let t=this.steps.length-1;t>=0;t--){let n=this.steps[t];e.steps.push(n.getInverse())}return e}};e([N({type:[Wx],nonNullable:!0})],Kx.prototype,`steps`,void 0),Kx=Gx=e([P(`esri.geometry.operators.support.GeographicTransformation`)],Kx);var Lse=Math.PI/180,Rse=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,qx=Po.radius,Jx=Po.eccentricitySquared,zse={a1:qx*Jx,a2:qx*Jx*qx*Jx,a3:qx*Jx*Jx/2,a4:qx*Jx*qx*Jx*2.5,a5:qx*Jx+qx*Jx*Jx/2,a6:1-Jx},Bse={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Po.radius,f:Po.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Io.radius,f:Io.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Fo.radius,f:Fo.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Fo.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},Yx={2:{5:$x,7:null,9:null,10:$x,1:cS,6:null,8:null,0:null,3:nS,11:rS,2:$x,4:pS},5:{5:$x,7:null,9:null,10:$x,1:cS,6:null,8:null,0:null,3:nS,11:rS,2:$x,4:pS},7:{5:null,7:$x,9:null,10:$x,1:null,6:sS,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:$x,10:$x,1:null,6:null,8:oS,0:null,3:null,11:null,2:null,4:null},3:{5:eS,7:null,9:null,10:eS,1:Vse,6:null,8:null,0:null,3:$x,11:Use,2:eS,4:Hse},4:{5:mS,7:null,9:null,10:mS,1:Qse,6:null,8:null,0:null,3:$se,11:Wse,2:mS,4:$x},1:{5:fS,7:null,9:null,10:fS,1:$x,6:null,8:null,0:null,3:Yse,11:Gse,2:fS,4:Xse},6:{5:null,7:dS,9:null,10:dS,1:null,6:$x,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:uS,10:uS,1:null,6:null,8:$x,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:$x,3:null,11:null,2:null,4:null},10:{5:$x,7:$x,9:$x,10:$x,1:cS,6:sS,8:oS,0:null,3:nS,11:rS,2:$x,4:pS},11:{5:iS,7:null,9:null,10:iS,1:Kse,6:null,8:null,0:null,3:qse,11:$x,2:iS,4:Jse}};function Xx(e,t){return Zx(e,t)?.projector}function Zx(e,t){if(e==null||t==null)return null;if(hS.source.spatialReference===e&&hS.dest.spatialReference===t)return hS;let n=Qx(e,hS.source),r=Qx(t,hS.dest);return n===0&&r===0?Pl(e,t)?hS.projector=$x:hS.projector=null:hS.projector=Yx[n][r],hS}function Qx(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,`metersPerUnit`in t&&(t.metersPerUnit=Ou(e,1)),ru(e)?t.spatialReferenceId=1:zl(e)?t.spatialReferenceId=2:Vl(e)?t.spatialReferenceId=3:Hl(e)?t.spatialReferenceId=11:e.wkt===tu.wkt?t.spatialReferenceId=4:e.wkid===4490?t.spatialReferenceId=5:e.wkt===$l.wkt?t.spatialReferenceId=6:e.wkt===eu.wkt?t.spatialReferenceId=8:Wl(e)?t.spatialReferenceId=7:Kl(e)?t.spatialReferenceId=9:t.spatialReferenceId=0):0}function $x(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t]??0)}function eS(e,t,n,r){n[r]=_S*(e[t]/yS),n[r+1]=_S*(vS-2*Math.atan(Math.exp(-e[t+1]/yS))),n[r+2]=e[t+2]??0}function Vse(e,t,n,r){let i=e[t]/yS,a=vS-2*Math.atan(Math.exp(-e[t+1]/yS)),o=yS+(e[t+2]??0),s=Math.cos(a)*o;n[r]=Math.cos(i)*s,n[r+1]=Math.sin(i)*s,n[r+2]=Math.sin(a)*o}function Hse(e,t,n,r){eS(e,t,n,r),pS(n,r,n,r)}function tS(e,t,n,r,i){let a=.4999999*Math.PI,o=Xa(gS*e[t+1],-a,a),s=Math.sin(o);n[r++]=gS*e[t]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+s)/(1-s)),n[r]=e[t+2]??0}function nS(e,t,n,r){tS(e,t,n,r,Po)}function rS(e,t,n,r){n[r]=e[t]*bS,n[r+1]=e[t+1]*bS,n[r+2]=e[t+2]??0}function iS(e,t,n,r){n[r]=e[t]*xS,n[r+1]=e[t+1]*xS,n[r+2]=e[t+2]??0}function Use(e,t,n,r){eS(e,t,n,r),rS(n,r,n,r)}function Wse(e,t,n,r){mS(e,t,n,r),rS(n,r,n,r)}function Gse(e,t,n,r){fS(e,t,n,r),rS(n,r,n,r)}function Kse(e,t,n,r){iS(e,t,n,r),cS(n,r,n,r)}function qse(e,t,n,r){iS(e,t,n,r),nS(n,r,n,r)}function Jse(e,t,n,r){iS(e,t,n,r),pS(n,r,n,r)}function aS(e,t,n,r,i){let a=i+(e[t+2]??0),o=gS*e[t],s=gS*e[t+1],c=Math.cos(s)*a;n[r]=Math.cos(o)*c,n[r+1]=Math.sin(o)*c,n[r+2]=Math.sin(s)*a}function oS(e,t,n,r){aS(e,t,n,r,Io.radius)}function sS(e,t,n,r){aS(e,t,n,r,Fo.radius)}function cS(e,t,n,r){aS(e,t,n,r,Po.radius)}function lS(e,t,n,r,i){let a=e[t],o=e[t+1],s=e[t+2]??0,c=Math.sqrt(a*a+o*o+s*s),l=to(s/(c===0?1:c)),u=Math.atan2(o,a);n[r++]=_S*u,n[r++]=_S*l,n[r]=c-i}function uS(e,t,n,r){lS(e,t,n,r,Io.radius)}function dS(e,t,n,r){lS(e,t,n,r,Fo.radius)}function fS(e,t,n,r){lS(e,t,n,r,Po.radius)}function Yse(e,t,n,r){fS(e,t,n,r),nS(n,r,n,r)}function Xse(e,t,n,r){fS(e,t,n,r),pS(n,r,n,r)}function Zse(e,t,n,r,i){let a=gS*e[t],o=gS*e[t+1],s=e[t+2]??0,c=Math.sin(o),l=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*c*c);n[r++]=(u+s)*l*Math.cos(a),n[r++]=(u+s)*l*Math.sin(a),n[r++]=(u*(1-i.eccentricitySquared)+s)*c}function pS(e,t,n,r){Zse(e,t,n,r,Po)}function mS(e,t,n,r){let i=zse,a=e[t],o=e[t+1],s=e[t+2]??0,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,ee,te,ne,re,ie,ae;c=Math.abs(s),l=a*a+o*o,u=Math.sqrt(l),d=l+s*s,f=Math.sqrt(d),ie=Math.atan2(o,a),p=s*s/d,m=l/d,x=i.a2/f,S=i.a3-i.a4/f,m>.3?(h=c/f*(1+m*(i.a1+x+p*S)/f),re=Math.asin(h),_=h*h,g=Math.sqrt(1-_)):(g=u/f*(1-p*(i.a5-x-m*S)/f),re=Math.acos(g),_=1-g*g,h=Math.sqrt(_)),v=1-Po.eccentricitySquared*_,y=Po.radius/Math.sqrt(v),b=i.a6*y,x=u-y*g,S=c-b*h,te=g*x+h*S,ee=g*S-h*x,ne=ee/(b/v+te),re+=ne,ae=te+ee*ne/2,s<0&&(re=-re),n[r++]=_S*ie,n[r++]=_S*re,n[r]=ae}function Qse(e,t,n,r){mS(e,t,n,r),cS(n,r,n,r)}function $se(e,t,n,r){mS(e,t,n,r),nS(n,r,n,r)}var hS={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:$x},gS=Qa(1),_S=$a(1),vS=.5*Math.PI,yS=Po.radius,bS=yS*Math.PI/180,xS=180/(yS*Math.PI);function SS(e,t,n,r,i,a,o=Math.floor(e.length/3)){let s=Xx(t,i);if(s==null)return!1;if(s===$x){if(e===r&&n===a)return!0;let t=n+3*o;for(let i=n,o=a;i<t;i++,o++)r[o]=e[i]??0;return!0}let c=n+3*o;for(let t=n,i=a;t<c;t+=3,i+=3)s(e,t,r,i);return!0}function CS(e,t,n,r,i,a){return wS[0]=e,wS[1]=t,wS[2]=n,SS(wS,r,0,i,a,0)}var wS=Ox(),TS=null,ES=null,DS=null,OS=null,kS={},AS=new Oh;function jS(){return!!(ES?.isLoaded()&&DS?.isLoaded()&&OS?.isLoaded())}function MS(){return!!jS()||(k(AS),PS(),!1)}function NS(e,t){return!e||!t||zS(e,t)||MS()}function ece(e,t){return!zS(e,t)&&!jS()}async function PS(e){TS??=Promise.all([R(()=>import(`./projectOperator-B1FLzd6L.js`),__vite__mapDeps([212,140,213,214])).then(e=>(ES=e,ES.load())),R(()=>import(`./projectOperator-noHd-k7X.js`),__vite__mapDeps([215,140,213])).then(e=>(DS=e,DS.load())),R(()=>import(`./geographicTransformationUtils-B-vz8mqT.js`),[]).then(e=>(OS=e,OS.load()))]),await TS,Ci(e),AS.notify()}function FS(e,t,n){return Array.isArray(e)?e.length===0?[]:(Ku(e),IS(e,e[0].spatialReference,t,n)):(Gu(e),IS([e],e.spatialReference,t,n)[0])}function IS(e,t,n,r){if(t==null||n==null)return e;if(zS(t,n,r))return e.map(e=>VS(e,t,n));if(r?.geographicTransformation==null&&ru(t))return IS(e.map(e=>VS(e,t,H.WGS84)),H.WGS84,n,{zConversionDisabled:r?.zConversionDisabled});if(r?.geographicTransformation==null&&ru(n))return IS(e,t,H.WGS84).map(e=>VS(e,H.WGS84,n));if(!jS())throw new ice;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:OS.getTransformation(t,n,r.areaOfInterestExtent)||new Kx};else if(!r?.areaOfInterestExtent){let e=tce(t,n),i=kS[e];i||(i=OS.getTransformation(t,n)||new Kx,kS[e]=i),r={geographicTransformation:i,zConversionDisabled:r?.zConversionDisabled}}}return e[0].spatialReference||(e[0].spatialReference=t),e[0]instanceof Wu?ES.executeMany(e,n,r):DS.executeMany(e,n,r)}function tce(e,t){return[e.wkid?.toString()??`-1`,e.wkt?.toString()??``,e.wkt2?.toString()??``,t.wkid?.toString()??`-1`,t.wkt?.toString()??``,t.wkt2?.toString()??``].join()}function nce(e,t,n){try{return FS(e,t,n)}catch{return null}}function rce(e,t){let n=LS([e],t);return n.pending==null?n.geometries==null?{pending:null,geometry:null}:{pending:null,geometry:n.geometries[0]}:{pending:n.pending,geometry:null}}function LS(e,t,n){if(!jS()){for(let n of e)if(n!=null&&!Pl(n.spatialReference,t)&&Jl(n.spatialReference)&&Jl(t)&&!zS(n.spatialReference,t))return k(AS),{pending:PS(),geometries:null}}return{pending:null,geometries:e.map(e=>e==null?null:Pl(e.spatialReference,t)?e:Jl(e.spatialReference)&&Jl(t)?FS(e,t,n):null)}}var ice=class extends D{constructor(){super(`projection:not-loaded`,`projection engine not fully loaded yet, please call load()`)}};function ace(){TS=null,ES=null,DS=null,OS=null,kS={}}var oce={get loadPromise(){return TS}};async function RS(e,t,n){if(Ci(n),!e)return e;let r=LS(Array.isArray(e)?e:[e],t,n);if(r.pending)return await r.pending,Ci(n),RS(e,t,n);let i=r.geometries??[];return Array.isArray(e)?i:i[0]}function zS(e,t,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!Pl(e,t)||Jl(e)&&Jl(t)&&!!Xx(e,t))}function sce(e,t){if(Pl(e,t))return!0;if(!Jl(e)||!Jl(t))return!1;let n=zl(e)||Vl(e)||Bl(e),r=zl(t)||Vl(t)||Bl(t);return n&&r}async function BS(e,t,n,r){if(jS())return Bi(r);if(Array.isArray(e)){for(let{source:t,dest:n,options:i}of e)if(t&&n&&!zS(t,n,i))return PS(r)}else if(e&&t&&!zS(e,t,n))return PS(r);return Bi(r)}function VS(e,t,n){return e?`x`in e?HS(e,t,new U,n,0):`xmin`in e?qS(e,t,new Rd,n,0):`rings`in e?KS(e,t,new sh,n,0):`paths`in e?WS(e,t,new lh,n,0):`points`in e?US(e,t,new Um,n,0):null:null}function cce(e,t,n=t.spatialReference,r=0){return n!=null&&e.spatialReference!=null&&HS(e,e.spatialReference,t,n,r)!=null}function HS(e,t,n,r,i){YS[0]=e.x,YS[1]=e.y;let a=e.z;return YS[2]=a===void 0?i:a,SS(YS,t,0,YS,r,0)?(n.x=YS[0],n.y=YS[1],n.spatialReference=r,a!==void 0||iu(r)?(n.z=YS[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function lce(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&US(e,e.spatialReference,t,n,r)!=null}function US(e,t,n,r,i){let{points:a,hasZ:o,hasM:s}=e,c=[],l=a.length,u=[];for(let e of a)u.push(e[0],e[1],o?e[2]:i);if(!SS(u,t,0,u,r,0,l))return null;let d=o||iu(r);for(let e=0;e<l;++e){let t=3*e,n=u[t],r=u[t+1];d&&s?c.push([n,r,u[t+2],a[e][3]]):d?c.push([n,r,u[t+2]]):s?c.push([n,r,a[e][2]]):c.push([n,r])}return n.points=c,n.spatialReference=r,n.hasZ=o,n.hasM=s,n}function uce(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&WS(e,e.spatialReference,t,n,r)!=null}function WS(e,t,n,r,i){let{paths:a,hasZ:o,hasM:s}=e,c=[];if(!JS(a,o??!1,s??!1,t,c,r,i))return null;let l=o||iu(r);return n.paths=c,n.spatialReference=r,n.hasZ=l,n.hasM=s,n}function GS(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&KS(e,e.spatialReference,t,n,r)!=null}function KS(e,t,n,r,i){let{rings:a,hasZ:o,hasM:s}=e,c=[];if(!JS(a,o??!1,s??!1,t,c,r,i))return null;let l=o||iu(r);return n.rings=c,n.spatialReference=r,n.hasZ=l,n.hasM=s,n}function dce(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&qS(e,e.spatialReference,t,n,r)!=null}function qS(e,t,n,r,i){let{xmin:a,ymin:o,xmax:s,ymax:c,hasZ:l,hasM:u}=e,d=l?e.zmin:i;if(!CS(a,o,d,t,YS,r))return null;let f=l||iu(r);n.xmin=YS[0],n.ymin=YS[1],f&&(n.zmin=YS[2]);let p=l?e.zmax:i;return CS(s,c,p,t,YS,r)?(n.xmax=YS[0],n.ymax=YS[1],f&&(n.zmax=YS[2]),u&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,n):null}function JS(e,t,n,r,i,a,o=0){let s=[];for(let n of e)for(let e of n)s.push(e[0],e[1],t?e[2]:o);if(!SS(s,r,0,s,a,0))return!1;let c=0;i.length=0;let l=t||iu(a);for(let t of e){let e=[];for(let r of t)l&&n?e.push([s[c++],s[c++],s[c++],r[3]]):l?e.push([s[c++],s[c++],s[c++]]):n?(e.push([s[c++],s[c++],r[2]]),c++):(e.push([s[c++],s[c++]]),c++);i.push(e)}return!0}var YS=Ox(),XS,ZS=class extends L{static{XS=this}constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new XS({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};e([N({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ZS.prototype,`cols`,void 0),e([N({type:Wt,json:{write:!0}})],ZS.prototype,`level`,void 0),e([N({type:String,json:{write:!0}})],ZS.prototype,`levelValue`,void 0),e([N({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ZS.prototype,`origin`,void 0),e([N({type:Number,json:{write:!0}})],ZS.prototype,`resolution`,void 0),e([N({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ZS.prototype,`rows`,void 0),e([N({type:Number,json:{write:!0}})],ZS.prototype,`scale`,void 0),ZS=XS=e([P(`esri.layers.support.LOD`)],ZS);var QS=class e{constructor(e,t,n,r=Vd()){this._level=e,this._row=t,this._col=n,this.extent=r}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(t){return new e(t.level,t.row,t.col,t.extent)}},$S,eC=new xr({PNG:`png`,PNG8:`png8`,PNG24:`png24`,PNG32:`png32`,JPEG:`jpg`,JPG:`jpg`,DIB:`dib`,TIFF:`tiff`,EMF:`emf`,PS:`ps`,PDF:`pdf`,GIF:`gif`,SVG:`svg`,SVGZ:`svgz`,Mixed:`mixed`,MIXED:`mixed`,LERC:`lerc`,LERC2D:`lerc2d`,RAW:`raw`,pbf:`pbf`}),tC=class extends L{static{$S=this}static create(e={}){let{resolutionFactor:t=1,scales:n,size:r=256,spatialReference:i=H.WebMercator,numLODs:a=24}=e;if(!Jl(i)){let e=[];if(n)for(let t=0;t<n.length;t++){let r=n[t];e.push(new ZS({level:t,scale:r,resolution:r}))}else{let t=5e-4;for(let n=a-1;n>=0;n--)e.unshift(new ZS({level:n,scale:t,resolution:t})),t*=2}return new $S({dpi:96,lods:e,origin:new U(0,0,i),size:[r,r],spatialReference:i})}let o=Fl(i),s=e.origin?new U({x:e.origin.x,y:e.origin.y,spatialReference:i}):new U(o?{x:o.origin[0],y:o.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),c=1/(Ou(i)*39.37*96),l=[];if(n)for(let e=0;e<n.length;e++){let t=n[e],r=t*c;l.push(new ZS({level:e,scale:t,resolution:r}))}else{let e=Ll(i)?512/r*591657527.5917094:256/r*591657527.591555,n=Math.ceil(a/t);l.push(new ZS({level:0,scale:e,resolution:e*c}));for(let r=1;r<n;r++){let n=e/2**t,i=n*c;l.push(new ZS({level:r,scale:n,resolution:i})),e=n}}return new $S({dpi:96,lods:l,origin:s,size:[r,r],spatialReference:i})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){let{spatialReference:e,origin:t}=this;if(e&&t){let n=Fl(e);return e.isWrappable&&!!n&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}readOrigin(e,t){return U.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,n=0,r=[],i=this._levelToLOD={};e&&(t=-1/0,n=1/0,e.forEach(e=>{r.push(e.scale),t=e.scale>t?e.scale:t,n=e.scale<n?e.scale:n,i[e.level]=e})),this._set(`scales`,r),this._set(`lods`,e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){let t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];let n=Math.floor(e),r=n+1;return t[n]/(t[n]/t[r])**(e-n)}scaleToZoom(e){let t=this.scales,n=t.length-1,r=0;for(;r<n;r++){let n=t[r],i=t[r+1];if(n<=e)return r;if(i===e)return r+1;if(n>e&&i<e)return r+Math.log(n/e)/Math.log(n/i)}return r}tileAt(e,t,n,r){let i=this.lodAt(e);if(!i)return null;let a,o;if(typeof t==`number`)a=t,o=n;else if(Pl(t.spatialReference,this.spatialReference))a=t.x,o=t.y,r=n;else{let e=td(t,this.spatialReference);if(e==null)return null;a=e.x,o=e.y,r=n}let s=i.resolution*this.size[0],c=i.resolution*this.size[1];return r??=new QS(0,0,0),r.level=e,r.row=Math.floor((this.origin.y-o)/c+.001),r.col=Math.floor((a-this.origin.x)/s+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=0){if(!(`extent`in e))return!1;let n=this.lodAt(e.level);if(!n&&t===1){let t=this.lods[this.lods.length-1];t.level<e.level&&(n=t)}if(!n)return!1;let r=e.level-n.level,i=n.resolution*this.size[0]/2**r,a=n.resolution*this.size[1]/2**r;return e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*a,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+a,!0}upsampleTile(e){let t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){let n=this.lodAt(t.level);if(n==null)return null;let{resolution:r}=n,i=r*this.size[0],a=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*a,e[2]=e[0]+i,e[3]=e[1]+a,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return $S.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;let t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;let n=[],r=this.lods.length-t;for(let e=0;e<r;e++){let r=e+t,{scale:i,resolution:a}=r>=0?this.lods[r]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};n.push(new ZS({level:e,scale:i,resolution:a}))}return new $S({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:n})}_initializeUpsampleLevels(){let e=this.lods;this._upsampleLevels=[];let t=null;for(let n=0;n<e.length;n++){let r=e[n];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};e([N({type:Number,json:{write:!0}})],tC.prototype,`compressionQuality`,void 0),e([N({type:Number,json:{write:!0}})],tC.prototype,`dpi`,void 0),e([N({type:String,json:{read:eC.read,write:eC.write,origins:{"web-scene":{read:!1,write:!1}}}})],tC.prototype,`format`,void 0),e([N({readOnly:!0})],tC.prototype,`isWrappable`,null),e([N({type:U,json:{write:!0}})],tC.prototype,`origin`,void 0),e([j(`origin`)],tC.prototype,`readOrigin`,null),e([N({type:[ZS],value:null,json:{write:!0}})],tC.prototype,`lods`,null),e([N({readOnly:!0})],tC.prototype,`scales`,void 0),e([N({cast:e=>Array.isArray(e)?e:typeof e==`number`?[e,e]:[256,256]})],tC.prototype,`size`,void 0),e([j(`size`,[`rows`,`cols`])],tC.prototype,`readSize`,null),e([M(`size`,{cols:{type:Wt},rows:{type:Wt}})],tC.prototype,`writeSize`,null),e([N({type:H,json:{write:!0}})],tC.prototype,`spatialReference`,void 0),tC=$S=e([P(`esri.layers.support.TileInfo`)],tC);var nC={widthBreakpoint:{getValue(e){let t=e.viewSize[0],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:`xsmall`,small:`small`,medium:`medium`,large:`large`,xlarge:`xlarge`},valueToClassName:{xsmall:`esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge`,small:`esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge`,medium:`esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge`,large:`esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge`,xlarge:`esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large`}},heightBreakpoint:{getValue(e){let t=e.viewSize[1],n=e.breakpoints,r=this.values;return t<=n.xsmall?r.xsmall:t<=n.small?r.small:t<=n.medium?r.medium:t<=n.large?r.large:r.xlarge},values:{xsmall:`xsmall`,small:`small`,medium:`medium`,large:`large`,xlarge:`xlarge`},valueToClassName:{xsmall:`esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge`,small:`esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge`,medium:`esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge`,large:`esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge`,xlarge:`esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large`}},orientation:{getValue(e){let t=e.viewSize,n=t[0],r=t[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:`portrait`,landscape:`landscape`},valueToClassName:{portrait:`esri-view-orientation-portrait`,landscape:`esri-view-orientation-landscape`}}},rC={xsmall:544,small:768,medium:992,large:1200};function fce(e){let t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function iC(e,t){return t?nC[e].valueToClassName[t].split(` `):[]}var pce=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=rC}initialize(){this.addHandles(G(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),qh))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(e){if(e!==this._get(`breakpoints`)){if(!fce(e)){let t=JSON.stringify(rC,null,2);console.warn(`provided breakpoints are not valid, using defaults:`+t),e=rC}this._set(`breakpoints`,{...e})}}_updateClassNames(){if(!this.container)return;let e=oi.acquire(),t=oi.acquire(),n,r=!1;for(n in nC){let i=this[n],a=nC[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});i!==a&&(r=!0,this[n]=a,iC(n,i).forEach(e=>t.push(e)),iC(n,a).forEach(t=>e.push(t)))}r&&(this._applyClassNameChanges(e,t),oi.release(e),oi.release(t))}_applyClassNameChanges(e,t){let n=this.container;n&&(n.classList.remove(...t),n.classList.add(...e))}_removeActiveClassNames(){let e=this.container;if(!e)return;let t;for(t in nC)iC(t,this[t]).forEach(t=>e.classList.remove(t))}};return e([N()],r.prototype,`breakpoints`,null),e([N()],r.prototype,`orientation`,void 0),e([N()],r.prototype,`widthBreakpoint`,void 0),e([N()],r.prototype,`heightBreakpoint`,void 0),r=e([P(`esri.views.BreakpointsOwner`)],r),r};function aC(e){return typeof e==`string`?document.getElementById(e):e??null}function oC(e,t){for(;;){let n=e.firstChild;if(!n)break;t.appendChild(n)}}function sC(e){return e===`Enter`||e===` `}
/*!
* @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
* Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
* Apache-2.0
* 
* js-xss
* Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
* http://ucdok.com
* MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var cC=function(){return cC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cC.apply(this,arguments)},lC={exports:{}},uC={},dC={exports:{}},fC={};function pC(){var e={};return e[`align-content`]=!1,e[`align-items`]=!1,e[`align-self`]=!1,e[`alignment-adjust`]=!1,e[`alignment-baseline`]=!1,e.all=!1,e[`anchor-point`]=!1,e.animation=!1,e[`animation-delay`]=!1,e[`animation-direction`]=!1,e[`animation-duration`]=!1,e[`animation-fill-mode`]=!1,e[`animation-iteration-count`]=!1,e[`animation-name`]=!1,e[`animation-play-state`]=!1,e[`animation-timing-function`]=!1,e.azimuth=!1,e[`backface-visibility`]=!1,e.background=!0,e[`background-attachment`]=!0,e[`background-clip`]=!0,e[`background-color`]=!0,e[`background-image`]=!0,e[`background-origin`]=!0,e[`background-position`]=!0,e[`background-repeat`]=!0,e[`background-size`]=!0,e[`baseline-shift`]=!1,e.binding=!1,e.bleed=!1,e[`bookmark-label`]=!1,e[`bookmark-level`]=!1,e[`bookmark-state`]=!1,e.border=!0,e[`border-bottom`]=!0,e[`border-bottom-color`]=!0,e[`border-bottom-left-radius`]=!0,e[`border-bottom-right-radius`]=!0,e[`border-bottom-style`]=!0,e[`border-bottom-width`]=!0,e[`border-collapse`]=!0,e[`border-color`]=!0,e[`border-image`]=!0,e[`border-image-outset`]=!0,e[`border-image-repeat`]=!0,e[`border-image-slice`]=!0,e[`border-image-source`]=!0,e[`border-image-width`]=!0,e[`border-left`]=!0,e[`border-left-color`]=!0,e[`border-left-style`]=!0,e[`border-left-width`]=!0,e[`border-radius`]=!0,e[`border-right`]=!0,e[`border-right-color`]=!0,e[`border-right-style`]=!0,e[`border-right-width`]=!0,e[`border-spacing`]=!0,e[`border-style`]=!0,e[`border-top`]=!0,e[`border-top-color`]=!0,e[`border-top-left-radius`]=!0,e[`border-top-right-radius`]=!0,e[`border-top-style`]=!0,e[`border-top-width`]=!0,e[`border-width`]=!0,e.bottom=!1,e[`box-decoration-break`]=!0,e[`box-shadow`]=!0,e[`box-sizing`]=!0,e[`box-snap`]=!0,e[`box-suppress`]=!0,e[`break-after`]=!0,e[`break-before`]=!0,e[`break-inside`]=!0,e[`caption-side`]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e[`clip-path`]=!1,e[`clip-rule`]=!1,e.color=!0,e[`color-interpolation-filters`]=!0,e[`column-count`]=!1,e[`column-fill`]=!1,e[`column-gap`]=!1,e[`column-rule`]=!1,e[`column-rule-color`]=!1,e[`column-rule-style`]=!1,e[`column-rule-width`]=!1,e[`column-span`]=!1,e[`column-width`]=!1,e.columns=!1,e.contain=!1,e.content=!1,e[`counter-increment`]=!1,e[`counter-reset`]=!1,e[`counter-set`]=!1,e.crop=!1,e.cue=!1,e[`cue-after`]=!1,e[`cue-before`]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e[`display-inside`]=!0,e[`display-list`]=!0,e[`display-outside`]=!0,e[`dominant-baseline`]=!1,e.elevation=!1,e[`empty-cells`]=!1,e.filter=!1,e.flex=!1,e[`flex-basis`]=!1,e[`flex-direction`]=!1,e[`flex-flow`]=!1,e[`flex-grow`]=!1,e[`flex-shrink`]=!1,e[`flex-wrap`]=!1,e.float=!1,e[`float-offset`]=!1,e[`flood-color`]=!1,e[`flood-opacity`]=!1,e[`flow-from`]=!1,e[`flow-into`]=!1,e.font=!0,e[`font-family`]=!0,e[`font-feature-settings`]=!0,e[`font-kerning`]=!0,e[`font-language-override`]=!0,e[`font-size`]=!0,e[`font-size-adjust`]=!0,e[`font-stretch`]=!0,e[`font-style`]=!0,e[`font-synthesis`]=!0,e[`font-variant`]=!0,e[`font-variant-alternates`]=!0,e[`font-variant-caps`]=!0,e[`font-variant-east-asian`]=!0,e[`font-variant-ligatures`]=!0,e[`font-variant-numeric`]=!0,e[`font-variant-position`]=!0,e[`font-weight`]=!0,e.grid=!1,e[`grid-area`]=!1,e[`grid-auto-columns`]=!1,e[`grid-auto-flow`]=!1,e[`grid-auto-rows`]=!1,e[`grid-column`]=!1,e[`grid-column-end`]=!1,e[`grid-column-start`]=!1,e[`grid-row`]=!1,e[`grid-row-end`]=!1,e[`grid-row-start`]=!1,e[`grid-template`]=!1,e[`grid-template-areas`]=!1,e[`grid-template-columns`]=!1,e[`grid-template-rows`]=!1,e[`hanging-punctuation`]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e[`image-orientation`]=!1,e[`image-resolution`]=!1,e[`ime-mode`]=!1,e[`initial-letters`]=!1,e[`inline-box-align`]=!1,e[`justify-content`]=!1,e[`justify-items`]=!1,e[`justify-self`]=!1,e.left=!1,e[`letter-spacing`]=!0,e[`lighting-color`]=!0,e[`line-box-contain`]=!1,e[`line-break`]=!1,e[`line-grid`]=!1,e[`line-height`]=!1,e[`line-snap`]=!1,e[`line-stacking`]=!1,e[`line-stacking-ruby`]=!1,e[`line-stacking-shift`]=!1,e[`line-stacking-strategy`]=!1,e[`list-style`]=!0,e[`list-style-image`]=!0,e[`list-style-position`]=!0,e[`list-style-type`]=!0,e.margin=!0,e[`margin-bottom`]=!0,e[`margin-left`]=!0,e[`margin-right`]=!0,e[`margin-top`]=!0,e[`marker-offset`]=!1,e[`marker-side`]=!1,e.marks=!1,e.mask=!1,e[`mask-box`]=!1,e[`mask-box-outset`]=!1,e[`mask-box-repeat`]=!1,e[`mask-box-slice`]=!1,e[`mask-box-source`]=!1,e[`mask-box-width`]=!1,e[`mask-clip`]=!1,e[`mask-image`]=!1,e[`mask-origin`]=!1,e[`mask-position`]=!1,e[`mask-repeat`]=!1,e[`mask-size`]=!1,e[`mask-source-type`]=!1,e[`mask-type`]=!1,e[`max-height`]=!0,e[`max-lines`]=!1,e[`max-width`]=!0,e[`min-height`]=!0,e[`min-width`]=!0,e[`move-to`]=!1,e[`nav-down`]=!1,e[`nav-index`]=!1,e[`nav-left`]=!1,e[`nav-right`]=!1,e[`nav-up`]=!1,e[`object-fit`]=!1,e[`object-position`]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e[`outline-color`]=!1,e[`outline-offset`]=!1,e[`outline-style`]=!1,e[`outline-width`]=!1,e.overflow=!1,e[`overflow-wrap`]=!1,e[`overflow-x`]=!1,e[`overflow-y`]=!1,e.padding=!0,e[`padding-bottom`]=!0,e[`padding-left`]=!0,e[`padding-right`]=!0,e[`padding-top`]=!0,e.page=!1,e[`page-break-after`]=!1,e[`page-break-before`]=!1,e[`page-break-inside`]=!1,e[`page-policy`]=!1,e.pause=!1,e[`pause-after`]=!1,e[`pause-before`]=!1,e.perspective=!1,e[`perspective-origin`]=!1,e.pitch=!1,e[`pitch-range`]=!1,e[`play-during`]=!1,e.position=!1,e[`presentation-level`]=!1,e.quotes=!1,e[`region-fragment`]=!1,e.resize=!1,e.rest=!1,e[`rest-after`]=!1,e[`rest-before`]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e[`rotation-point`]=!1,e[`ruby-align`]=!1,e[`ruby-merge`]=!1,e[`ruby-position`]=!1,e[`shape-image-threshold`]=!1,e[`shape-outside`]=!1,e[`shape-margin`]=!1,e.size=!1,e.speak=!1,e[`speak-as`]=!1,e[`speak-header`]=!1,e[`speak-numeral`]=!1,e[`speak-punctuation`]=!1,e[`speech-rate`]=!1,e.stress=!1,e[`string-set`]=!1,e[`tab-size`]=!1,e[`table-layout`]=!1,e[`text-align`]=!0,e[`text-align-last`]=!0,e[`text-combine-upright`]=!0,e[`text-decoration`]=!0,e[`text-decoration-color`]=!0,e[`text-decoration-line`]=!0,e[`text-decoration-skip`]=!0,e[`text-decoration-style`]=!0,e[`text-emphasis`]=!0,e[`text-emphasis-color`]=!0,e[`text-emphasis-position`]=!0,e[`text-emphasis-style`]=!0,e[`text-height`]=!0,e[`text-indent`]=!0,e[`text-justify`]=!0,e[`text-orientation`]=!0,e[`text-overflow`]=!0,e[`text-shadow`]=!0,e[`text-space-collapse`]=!0,e[`text-transform`]=!0,e[`text-underline-position`]=!0,e[`text-wrap`]=!0,e.top=!1,e.transform=!1,e[`transform-origin`]=!1,e[`transform-style`]=!1,e.transition=!1,e[`transition-delay`]=!1,e[`transition-duration`]=!1,e[`transition-property`]=!1,e[`transition-timing-function`]=!1,e[`unicode-bidi`]=!1,e[`vertical-align`]=!1,e.visibility=!1,e[`voice-balance`]=!1,e[`voice-duration`]=!1,e[`voice-family`]=!1,e[`voice-pitch`]=!1,e[`voice-range`]=!1,e[`voice-rate`]=!1,e[`voice-stress`]=!1,e[`voice-volume`]=!1,e.volume=!1,e[`white-space`]=!1,e.widows=!1,e.width=!0,e[`will-change`]=!1,e[`word-break`]=!0,e[`word-spacing`]=!0,e[`word-wrap`]=!0,e[`wrap-flow`]=!1,e[`wrap-through`]=!1,e[`writing-mode`]=!1,e[`z-index`]=!1,e}function mce(e,t,n){}function hce(e,t,n){}var gce=/javascript\s*\:/gim;function _ce(e,t){return gce.test(t)?``:t}fC.whiteList=pC(),fC.getDefaultWhiteList=pC,fC.onAttr=mce,fC.onIgnoreAttr=hce,fC.safeAttrValue=_ce;var mC={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,i;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,``)},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,``)}};function vce(e,t){e=mC.trimRight(e),e[e.length-1]!==`;`&&(e+=`;`);var n=e.length,r=!1,i=0,a=0,o=``;function s(){if(!r){var n=mC.trim(e.slice(i,a)),s=n.indexOf(`:`);if(s!==-1){var c=mC.trim(n.slice(0,s)),l=mC.trim(n.slice(s+1));if(c){var u=t(i,o.length,c,l,n);u&&(o+=u+`; `)}}}i=a+1}for(;a<n;a++){var c=e[a];if(c===`/`&&e[a+1]===`*`){var l=e.indexOf(`*/`,a+2);if(l===-1)break;a=l+1,i=a+1,r=!1}else c===`(`?r=!0:c===`)`?r=!1:c===`;`?r||s():c===`
`&&s()}return mC.trim(o)}var yce=vce,hC=fC,bce=yce;function gC(e){return e==null}function xce(e){var t={};for(var n in e)t[n]=e[n];return t}function _C(e){e=xce(e||{}),e.whiteList=e.whiteList||hC.whiteList,e.onAttr=e.onAttr||hC.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||hC.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||hC.safeAttrValue,this.options=e}_C.prototype.process=function(e){if(e||=``,e=e.toString(),!e)return``;var t=this.options,n=t.whiteList,r=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue;return bce(e,function(e,t,o,s,c){var l=n[o],u=!1;if(l===!0?u=l:typeof l==`function`?u=l(s):l instanceof RegExp&&(u=l.test(s)),u!==!0&&(u=!1),s=a(o,s),s){var d={position:t,sourcePosition:e,source:c,isWhite:u};if(u){var f=r(o,s,d);return gC(f)?o+`:`+s:f}else{var f=i(o,s,d);if(!gC(f))return f}}})};var Sce=_C;(function(e,exports){var n=fC,r=Sce;function i(e,t){return new r(t).process(e)}for(var a in exports=e.exports=i,exports.FilterCSS=r,n)exports[a]=n[a]})(dC,dC.exports);var vC=dC.exports,yC={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,i;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,``)},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Cce=vC.FilterCSS,wce=vC.getDefaultWhiteList,bC=yC;function xC(){return{a:[`target`,`href`,`title`],abbr:[`title`],address:[],area:[`shape`,`coords`,`href`,`alt`],article:[],aside:[],audio:[`autoplay`,`controls`,`crossorigin`,`loop`,`muted`,`preload`,`src`],b:[],bdi:[`dir`],bdo:[`dir`],big:[],blockquote:[`cite`],br:[],caption:[],center:[],cite:[],code:[],col:[`align`,`valign`,`span`,`width`],colgroup:[`align`,`valign`,`span`,`width`],dd:[],del:[`datetime`],details:[`open`],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:[`color`,`size`,`face`],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:[`src`,`alt`,`title`,`width`,`height`],ins:[`datetime`],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:[`width`,`border`,`align`,`valign`],tbody:[`align`,`valign`],td:[`width`,`rowspan`,`colspan`,`align`,`valign`],tfoot:[`align`,`valign`],th:[`width`,`rowspan`,`colspan`,`align`,`valign`],thead:[`align`,`valign`],tr:[`rowspan`,`align`,`valign`],tt:[],u:[],ul:[],video:[`autoplay`,`controls`,`crossorigin`,`loop`,`muted`,`playsinline`,`poster`,`preload`,`src`,`height`,`width`]}}var SC=new Cce;function Tce(e,t,n){}function Ece(e,t,n){}function Dce(e,t,n){}function Oce(e,t,n){}function CC(e){return e.replace(Ace,`&lt;`).replace(jce,`&gt;`)}function kce(e,t,n,r){if(n=MC(n),t===`href`||t===`src`){if(n=bC.trim(n),n===`#`)return`#`;if(!(n.substr(0,7)===`http://`||n.substr(0,8)===`https://`||n.substr(0,7)===`mailto:`||n.substr(0,4)===`tel:`||n.substr(0,11)===`data:image/`||n.substr(0,6)===`ftp://`||n.substr(0,2)===`./`||n.substr(0,3)===`../`||n[0]===`#`||n[0]===`/`))return``}else if(t===`background`){if(wC.lastIndex=0,wC.test(n))return``}else if(t===`style`){if(TC.lastIndex=0,TC.test(n)||(EC.lastIndex=0,EC.test(n)&&(wC.lastIndex=0,wC.test(n))))return``;r!==!1&&(r||=SC,n=r.process(n))}return n=NC(n),n}var Ace=/</g,jce=/>/g,Mce=/"/g,Nce=/&quot;/g,Pce=/&#([a-zA-Z0-9]*);?/gim,Fce=/&colon;?/gim,Ice=/&newline;?/gim,wC=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,TC=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,EC=/u\s*r\s*l\s*\(.*/gi;function DC(e){return e.replace(Mce,`&quot;`)}function OC(e){return e.replace(Nce,`"`)}function kC(e){return e.replace(Pce,function(e,t){return t[0]===`x`||t[0]===`X`?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function AC(e){return e.replace(Fce,`:`).replace(Ice,` `)}function jC(e){for(var t=``,n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?` `:e.charAt(n);return bC.trim(t)}function MC(e){return e=OC(e),e=kC(e),e=AC(e),e=jC(e),e}function NC(e){return e=DC(e),e=CC(e),e}function Lce(){return``}function Rce(e,t){typeof t!=`function`&&(t=function(){});var n=!Array.isArray(e);function r(t){return n?!0:bC.indexOf(e,t)!==-1}var i=[],a=!1;return{onIgnoreTag:function(e,n,o){if(r(e))if(o.isClosing){var s=`[/removed]`,c=o.position+s.length;return i.push([a===!1?o.position:a,c]),a=!1,s}else return a||=o.position,`[removed]`;else return t(e,n,o)},remove:function(e){var t=``,n=0;return bC.forEach(i,function(r){t+=e.slice(n,r[0]),n=r[1]}),t+=e.slice(n),t}}}function zce(e){for(var t=``,n=0;n<e.length;){var r=e.indexOf(`<!--`,n);if(r===-1){t+=e.slice(n);break}t+=e.slice(n,r);var i=e.indexOf(`-->`,r);if(i===-1)break;n=i+3}return t}function Bce(e){var t=e.split(``);return t=t.filter(function(e){var t=e.charCodeAt(0);return t===127?!1:t<=31?t===10||t===13:!0}),t.join(``)}uC.whiteList=xC(),uC.getDefaultWhiteList=xC,uC.onTag=Tce,uC.onIgnoreTag=Ece,uC.onTagAttr=Dce,uC.onIgnoreTagAttr=Oce,uC.safeAttrValue=kce,uC.escapeHtml=CC,uC.escapeQuote=DC,uC.unescapeQuote=OC,uC.escapeHtmlEntities=kC,uC.escapeDangerHtml5Entities=AC,uC.clearNonPrintableCharacter=jC,uC.friendlyAttrValue=MC,uC.escapeAttrValue=NC,uC.onIgnoreTagStripAll=Lce,uC.StripTagBody=Rce,uC.stripCommentTag=zce,uC.stripBlankChar=Bce,uC.cssFilter=SC,uC.getDefaultCSSWhiteList=wce;var PC={},FC=yC;function Vce(e){var t=FC.spaceIndex(e),n=t===-1?e.slice(1,-1):e.slice(1,t+1);return n=FC.trim(n).toLowerCase(),n.slice(0,1)===`/`&&(n=n.slice(1)),n.slice(-1)===`/`&&(n=n.slice(0,-1)),n}function Hce(e){return e.slice(0,2)===`</`}function Uce(e,t,n){var r=``,i=0,a=!1,o=!1,s=0,c=e.length,l=``,u=``;chariterator:for(s=0;s<c;s++){var d=e.charAt(s);if(a===!1){if(d===`<`){a=s;continue}}else if(o===!1){if(d===`<`){r+=n(e.slice(i,s)),a=s,i=s;continue}if(d===`>`){r+=n(e.slice(i,a)),u=e.slice(a,s+1),l=Vce(u),r+=t(a,r.length,l,u,Hce(u)),i=s+1,a=!1;continue}if(d===`"`||d===`'`)for(var f=1,p=e.charAt(s-f);p.trim()===``||p===`=`;){if(p===`=`){o=d;continue chariterator}p=e.charAt(s-++f)}}else if(d===o){o=!1;continue}}return i<e.length&&(r+=n(e.substr(i))),r}var Wce=/[^a-zA-Z0-9\\_:.-]/gim;function Gce(e,t){var n=0,r=0,i=[],a=!1,o=e.length;function s(e,n){if(e=FC.trim(e),e=e.replace(Wce,``).toLowerCase(),!(e.length<1)){var r=t(e,n||``);r&&i.push(r)}}for(var c=0;c<o;c++){var l=e.charAt(c),u,d;if(a===!1&&l===`=`){a=e.slice(n,c),n=c+1,r=e.charAt(n)===`"`||e.charAt(n)===`'`?n:qce(e,c+1);continue}if(a!==!1&&c===r){if(d=e.indexOf(l,c+1),d===-1)break;u=FC.trim(e.slice(r+1,d)),s(a,u),a=!1,c=d,n=c+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g,` `),a===!1)if(d=Kce(e,c),d===-1){u=FC.trim(e.slice(n,c)),s(u),a=!1,n=c+1;continue}else{c=d-1;continue}else if(d=Jce(e,c-1),d===-1){u=FC.trim(e.slice(n,c)),u=IC(u),s(a,u),a=!1,n=c+1;continue}else continue}return n<e.length&&(a===!1?s(e.slice(n)):s(a,IC(FC.trim(e.slice(n))))),FC.trim(i.join(` `))}function Kce(e,t){for(;t<e.length;t++){var n=e[t];if(n!==` `)return n===`=`?t:-1}}function qce(e,t){for(;t<e.length;t++){var n=e[t];if(n!==` `)return n===`'`||n===`"`?t:-1}}function Jce(e,t){for(;t>0;t--){var n=e[t];if(n!==` `)return n===`=`?t:-1}}function Yce(e){return e[0]===`"`&&e[e.length-1]===`"`||e[0]===`'`&&e[e.length-1]===`'`}function IC(e){return Yce(e)?e.substr(1,e.length-2):e}PC.parseTag=Uce,PC.parseAttr=Gce;var Xce=vC.FilterCSS,LC=uC,RC=PC,Zce=RC.parseTag,Qce=RC.parseAttr,zC=yC;function BC(e){return e==null}function $ce(e){var t=zC.spaceIndex(e);if(t===-1)return{html:``,closing:e[e.length-2]===`/`};e=zC.trim(e.slice(t+1,-1));var n=e[e.length-1]===`/`;return n&&(e=zC.trim(e.slice(0,-1))),{html:e,closing:n}}function ele(e){var t={};for(var n in e)t[n]=e[n];return t}function tle(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(e){return e.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function VC(e){e=ele(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error(`Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time`),e.onIgnoreTag=LC.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=tle(e.whiteList||e.allowList):e.whiteList=LC.whiteList,e.onTag=e.onTag||LC.onTag,e.onTagAttr=e.onTagAttr||LC.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||LC.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||LC.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||LC.safeAttrValue,e.escapeHtml=e.escapeHtml||LC.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Xce(e.css))}VC.prototype.process=function(e){if(e||=``,e=e.toString(),!e)return``;var t=this,n=t.options,r=n.whiteList,i=n.onTag,a=n.onIgnoreTag,o=n.onTagAttr,s=n.onIgnoreTagAttr,c=n.safeAttrValue,l=n.escapeHtml,u=t.cssFilter;n.stripBlankChar&&(e=LC.stripBlankChar(e)),n.allowCommentTag||(e=LC.stripCommentTag(e));var d=!1;n.stripIgnoreTagBody&&(d=LC.StripTagBody(n.stripIgnoreTagBody,a),a=d.onIgnoreTag);var f=Zce(e,function(e,t,n,d,f){var p={sourcePosition:e,position:t,isClosing:f,isWhite:Object.prototype.hasOwnProperty.call(r,n)},m=i(n,d,p);if(!BC(m))return m;if(p.isWhite){if(p.isClosing)return`</`+n+`>`;var h=$ce(d),g=r[n],_=Qce(h.html,function(e,t){var r=zC.indexOf(g,e)!==-1,i=o(n,e,t,r);return BC(i)?r?(t=c(n,e,t,u),t?e+`="`+t+`"`:e):(i=s(n,e,t,r),BC(i)?void 0:i):i});return d=`<`+n,_&&(d+=` `+_),h.closing&&(d+=` /`),d+=`>`,d}else return m=a(n,d,p),BC(m)?l(d):m},l);return d&&(f=d.remove(f)),f};var nle=VC;(function(e,exports){var n=uC,r=PC,i=nle;function a(e,t){return new i(t).process(e)}exports=e.exports=a,exports.filterXSS=a,exports.FilterXSS=i,(function(){for(var e in n)exports[e]=n[e];for(var i in r)exports[i]=r[i]})();function o(){return typeof self<`u`&&typeof DedicatedWorkerGlobalScope<`u`&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(lC,lC.exports);var HC=lC.exports,rle=function(e){if(typeof e!=`object`||!e||Object.prototype.toString.call(e)!==`[object Object]`)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},UC=function(){function e(e,t){var n=this;this.arcgisWhiteList={a:[`href`,`style`,`target`],abbr:[`title`],article:[`style`],aside:[`style`],audio:[`autoplay`,`controls`,`loop`,`muted`,`preload`],b:[],blockquote:[`style`],br:[],code:[`style`],dd:[`style`],del:[`style`],details:[`open`,`style`],div:[`align`,`aria-hidden`,`aria-label`,`style`],dl:[`style`],dt:[`style`],em:[],figcaption:[`style`],figure:[`style`],font:[`color`,`face`,`size`,`style`],footer:[`style`],h1:[`style`],h2:[`style`],h3:[`style`],h4:[`style`],h5:[`style`],h6:[`style`],header:[`style`],hr:[],i:[],img:[`alt`,`border`,`height`,`src`,`style`,`width`],li:[],main:[`style`],mark:[`style`],nav:[`style`],ol:[],p:[`style`],pre:[`style`],section:[`style`],source:[`media`,`src`,`type`],span:[`aria-hidden`,`aria-label`,`style`],strong:[],sub:[`style`],summary:[`style`],sup:[`style`],table:[`border`,`cellpadding`,`cellspacing`,`height`,`style`,`width`],tbody:[],tr:[`align`,`height`,`style`,`valign`],td:[`align`,`colspan`,`height`,`nowrap`,`rowspan`,`style`,`valign`,`width`],th:[`align`,`colspan`,`height`,`nowrap`,`rowspan`,`style`,`valign`,`width`],time:[`style`],u:[],ul:[],video:[`autoplay`,`controls`,`height`,`loop`,`muted`,`poster`,`preload`,`width`]},this.arcgisCSSWhiteList=cC(cC({},HC.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=`http.https.mailto.iform.tel.flow.lfmobile.arcgis-navigator.arcgis-appstudio-player.arcgis-survey123.arcgis-collector.arcgis-workforce.arcgis-explorer.arcgis-trek2there.arcgis-quickcapture.mspbi.comgooglemaps.pdfefile.pdfehttp.pdfehttps.boxapp.boxemm.awb.awbs.gropen.radarscope`.split(`.`),this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,i){return e===`a`&&t===`href`||(e===`img`||e===`source`)&&t===`src`?n.sanitizeUrl(r):HC.safeAttrValue(e,t,r,i)}},this._entityMap={"&":`&#x38;`,"<":`&#x3C;`,">":`&#x3E;`,'"':`&#x22;`,"'":`&#x27;`,"/":`&#x2F;`};var r;e&&!t?r=e:e&&t?(r=Object.create(this.arcgisFilterOptions),r.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(t){if(t===`whiteList`)r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]);else if(t===`css`){var i=e.css.whiteList;i!=null&&e.css instanceof Object&&Object.keys(i).forEach(function(e){return r.css.whiteList[e]=i[e]})}else r[t]=e[t]})):(r=Object.create(this.arcgisFilterOptions),r.whiteList=this.arcgisWhiteList,r.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=r,this._xssFilter=new HC.FilterXSS(r)}return e.prototype.sanitize=function(e,t){switch(t===void 0&&(t={}),typeof e){case`number`:return isNaN(e)||!isFinite(e)?null:e;case`boolean`:return e;case`string`:return this._xssFilter.process(e);case`object`:return this._iterateOverObject(e,t);default:return t.allowUndefined&&e===void 0?void 0:null}},e.prototype.sanitizeUrl=function(e,t){var n=(t??{}).isProtocolRequired,r=n===void 0?!0:n,i=this._trim(e.substring(0,e.indexOf(`:`))),a=e===`/`,o=/^#/.test(e),s=i&&this.allowedProtocols.indexOf(i.toLowerCase())>-1;return a||o||s?HC.escapeAttrValue(e):!i&&!r?HC.escapeAttrValue(`https://${e}`):``},e.prototype.sanitizeHTMLAttribute=function(e,t,n,r){return typeof this.xssFilterOptions.safeAttrValue==`function`?this.xssFilterOptions.safeAttrValue(e,t,n,r):HC.safeAttrValue(e,t,n,r)},e.prototype.validate=function(e,t){t===void 0&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,function(e){return t._entityMap[e]})},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(n,r){return t.test(n)?n:`&#x${Number(e.charCodeAt(r)).toString(16)};`})},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]})}),t},e.prototype._iterateOverObject=function(e,t){var n=this;t===void 0&&(t={});try{var r=!1,i=void 0;if(Array.isArray(e))i=e.reduce(function(e,i){var a=n.validate(i,t);return a.isValid?e.concat([i]):(r=!0,e.concat([a.sanitized]))},[]);else if(rle(e))i=Object.keys(e).reduce(function(i,a){var o=e[a],s=n.validate(o,t);return s.isValid?i[a]=o:(r=!0,i[a]=s.sanitized),i},{});else return t.allowUndefined&&e===void 0?void 0:null;return r?i:e}catch{return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,``)},e}(),ile=[`dd`,`dl`,`dt`,`h1`,`h2`,`h3`,`h4`,`h5`,`h6`,`sub`,`sup`,...`animate.animatetransform.circle.clippath.defs.ellipse.g.image.line.lineargradient.marker.mask.path.pattern.polygon.polyline.radialgradient.rect.stop.svg.switch.symbol.text.textpath.tspan.use`.split(`.`)],ale=ile.reduce((e,t)=>(e[t]=[],e),{}),ole=`align.alink.alt.bgcolor.border.cellpadding.cellspacing.class.color.cols.colspan.coords.d.dir.face.height.hspace.ismap.lang.marginheight.marginwidth.multiple.nohref.noresize.noshade.nowrap.ref.rel.rev.rows.rowspan.scrolling.shape.span.summary.tabindex.title.usemap.valign.value.vlink.vspace.width`.split(`.`),WC=new UC({whiteList:ale,onTagAttr:(e,t,n)=>{let r=`${t}="${n}"`;if(ole.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:[`script`,`style`]},!0),sle=new UC({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:e=>e},!1),cle=(e,t)=>{let n=e;for(;n;){let e=n.closest?.(t);if(e)return e;let r=n.getRootNode?.();if(r===globalThis.document)return;n=r.host}};function lle(e){let t=cle(e,`.calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto`);return t?.classList.contains(`calcite-mode-dark`)||t?.classList.contains(`calcite-mode-auto`)&&window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`}var ule=`--esri-calcite-mode-name`;function dle(){let e=getComputedStyle(document.body).getPropertyValue(ule).replaceAll(/\W/g,``).toLowerCase();return e===`dark`||e===`light`?e:void 0}var GC=`calcite-mode-`;function KC(e){return dle()??lle(e??document.body)}function fle(e){return KC(e)===`dark`}function qC(e){return`${GC}${e}`}function JC(e){return qC(KC(e))}function YC(e){let t=JC(e);ple(e),e.classList.add(t)}function ple(e){Array.from(e.classList).forEach(t=>{t.startsWith(GC)&&e.classList.remove(t)})}var XC={anchor:`esri-widget__anchor`,anchorDisabled:`esri-widget__anchor--disabled`,button:`esri-button`,buttonDisabled:`esri-button--disabled`,buttonHalf:`esri-button--half`,buttonSecondary:`esri-button--secondary`,buttonSmall:`esri-button--small`,buttonTertiary:`esri-button--tertiary`,buttonThird:`esri-button--third`,disabled:`esri-disabled`,empty:`esri-widget__content--empty`,emptyIllustration:`esri-widget__content-illustration--empty`,heading:`esri-widget__heading`,hidden:`esri-hidden`,input:`esri-input`,interactive:`esri-interactive`,loader:`esri-widget__loader`,loaderAnimation:`esri-widget__loader-animation`,loaderText:`esri-widget__loader-text`,menu:`esri-menu`,menuHeader:`esri-menu__header`,menuItem:`esri-menu__list-item`,menuItemActive:`esri-menu__list-item--active`,menuItemFocus:`esri-menu__list-item--focus`,menuList:`esri-menu__list`,panel:`esri-widget--panel`,panelHeightOnly:`esri-widget--panel-height-only`,primaryTick:`primary-tick`,primaryTickAmPm:`primary-tick__ampm`,primaryTickLabel:`primary-tick__label`,primaryTickLabelKeepAll:`primary-tick__label--keep-all`,rotating:`esri-rotating`,secondaryTick:`secondary-tick`,select:`esri-select`,table:`esri-widget__table`,widget:`esri-widget`,widgetButton:`esri-widget--button`,widgetButtonActive:`esri-widget--button-active`,widgetDisabled:`esri-widget--disabled`},ZC=`esri-attribution`,QC={poweredBy:`${ZC}__powered-by`,sources:`${ZC}__sources`,sourcesOpen:`${ZC}__sources--open`,link:`${ZC}__link`},$C=class extends F{constructor(e){super(e),this._previousSourceHeight=0,this._opened=!1,this._overflowing=!1,this._changeSet=new Set,this.height=0,this._toggleState=()=>{(this._opened||this._overflowing)&&(this._opened=!this._opened,this._invalidate(`opened`))},this.surface=document.createElement(`div`),this._task=$i({render:()=>{this._update(),this._task.pause(),this._changeSet.clear()}}),this.addHandles(this._task)}appendTo(e){e.appendChild(this.surface),this._invalidate(`mode`)}initialize(){let e=document.createElement(`div`);e.setAttribute(`dir`,`ltr`),e.classList.add(`esri-widget`,`esri-view-attribution`,`esri-attribution`),this._set(`surface`,e);let t=new ResizeObserver(()=>{this.height=e.clientHeight});t.observe(e),this.addHandles(Yt(()=>t.disconnect())),e.innerHTML=`\n      <div class="${QC.sources}"></div>\n      <div class="${QC.poweredBy}">\n        Powered by\n        <a class="${QC.link}" href="https://www.esri.com/" rel="noreferrer" target="_blank">Esri</a>\n      </div>`,this.addHandles([this.surface,G(()=>this.attributionItems,()=>this._invalidate(`attributionItems`),qh),G(()=>this.mode,()=>this._invalidate(`mode`),qh)]);let n=e.querySelector(`.${QC.sources}`);this._previousSourceHeight=n.clientHeight;let r=new ResizeObserver(()=>{this._invalidate(`overflow`)});r.observe(n),this.addHandles(Yt(()=>r.disconnect()));let i=new MutationObserver(()=>{this._invalidate(`overflow`)});i.observe(n,{childList:!0,subtree:!0,characterData:!0}),this.addHandles(Yt(()=>i.disconnect())),n.onclick=this._toggleState,n.onkeydown=e=>{sC(e.key)&&(e.preventDefault(),this._toggleState())}}_invalidate(e){this._changeSet.add(e),this._task.resume()}_update(){let e=this.surface.querySelector(`.${QC.sources}`);if(this._changeSet.has(`overflow`)){let{clientHeight:t,clientWidth:n,scrollWidth:r}=e,i=t<this._previousSourceHeight;this._previousSourceHeight=t,this._opened?i&&(this._opened=!1):i||(this._overflowing=r>n)}if(this._changeSet.has(`overflow`)||this._changeSet.has(`opened`)){let t=this._opened||this._overflowing,n=t?`0`:``;e.setAttribute(`tabindex`,n),e.classList.toggle(XC.interactive,t),e.classList.toggle(QC.sourcesOpen,this._opened)}this._changeSet.has(`attributionItems`)&&(e.innerHTML=WC.sanitize(this.attributionItems?.map(e=>e.text).join(` | `)??``)),this._changeSet.has(`mode`)&&(this.surface.classList.remove(qC(`light`),qC(`dark`)),this.mode?this.surface.classList.add(qC(this.mode)):YC(this.surface))}};e([N()],$C.prototype,`attributionItems`,void 0),e([N()],$C.prototype,`height`,void 0),e([N({type:[`dark`,`light`]})],$C.prototype,`mode`,void 0),e([N({readOnly:!0})],$C.prototype,`surface`,void 0),$C=e([P(`esri.views.Attribution`)],$C);var ew=class extends F{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,t,n={}){return this._installWatch(e,t,n,G)}addWhen(e,t,n={}){return this._installWatch(e,t,n,Bh)}addOnCollectionChange(e,t,{initial:n=!1,final:r=!1}={}){let i=++this._handleId;return this.addHandles([Hh(e,`after-changes`,this._createSyncUpdatingCallback(),Kh),Hh(e,`change`,t,{onListenerAdd:n?e=>t({added:e.toArray(),removed:[]}):void 0,onListenerRemove:r?e=>t({added:[],removed:e.toArray()}):void 0})],i),Yt(()=>this.removeHandles(i))}addPromise(e){if(e==null)return e;let t=++this._handleId;this.addHandles(Yt(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(tw)||this._set(`updating`,!1))}),t),this._pendingPromises.add(e),this._set(`updating`,!0);let n=()=>this.removeHandles(t);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set(`updating`,!1)}_installWatch(e,t,n={},r){let i=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,i);let a=r(e,t,n);return this.addHandles(a,i),Yt(()=>this.removeHandles(i))}_installSyncUpdatingWatch(e,t){let n=this._createSyncUpdatingCallback(),r=G(e,n,{sync:!0,equals:()=>!1});return this.addHandles(r,t),r}_createSyncUpdatingCallback(){return()=>{this.removeHandles(tw),++this._scheduleHandleId;let e=this._scheduleHandleId;this._get(`updating`)||this._set(`updating`,!0),this.addHandles(Qi(()=>{e===this._scheduleHandleId&&(this._set(`updating`,this._pendingPromises.size>0),this.removeHandles(tw))}),tw)}}};e([O({readOnly:!0})],ew.prototype,`updating`,void 0),ew=e([hr(`esri.core.support.UpdatingHandles`)],ew);var tw=-42,nw=`http://www.w3.org/`,rw=`${nw}2000/svg`,iw=`${nw}1999/xlink`,aw=[],ow=(e,t)=>{let n={};return Object.keys(e).forEach(t=>{n[t]=e[t]}),t&&Object.keys(t).forEach(e=>{n[e]=t[e]}),n},sw=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),cw=e=>{if(typeof e!=`string`)throw Error(`Style values must be strings`)},mle=(e,t,n)=>{if(t.vnodeSelector!==``){for(let r=n;r<e.length;r++)if(sw(e[r],t))return r}return-1},lw=(e,t,n,r)=>{let i=e[t];if(i.vnodeSelector===``)return;let a=i.properties;if(!(a&&(a.key===void 0?a.bind:a.key))){for(let a=0;a<e.length;a++)if(a!==t){let t=e[a];if(sw(t,i))throw Error(`${n.vnodeSelector} had a ${i.vnodeSelector} child ${r===`added`?r:`removed`}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},hle=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},uw=[],dw=!1,fw=e=>{(e.children||[]).forEach(fw),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},pw=()=>{dw=!1,uw.forEach(fw),uw.length=0},mw=e=>{uw.push(e),dw||(dw=!0,typeof window<`u`&&`requestIdleCallback`in window?window.requestIdleCallback(pw,{timeout:16}):setTimeout(pw,16))},hw=e=>{let t=e.domNode;if(e.properties){let n=e.properties.exitAnimation;if(n){t.style.pointerEvents=`none`,n(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),mw(e))},e.properties);return}}t.parentNode&&(t.parentNode.removeChild(t),mw(e))},gle=(e,t,n)=>{if(!t)return;let r=n.eventHandlerInterceptor,i=Object.keys(t),a=i.length;for(let o=0;o<a;o++){let a=i[o],s=t[a];if(a===`className`)throw Error(`Property "className" is not supported, use "class".`);if(a===`class`)bw(e,s,!0);else if(a===`classes`){let t=Object.keys(s),n=t.length;for(let r=0;r<n;r++){let n=t[r];s[n]&&e.classList.add(n)}}else if(a===`styles`){let t=Object.keys(s),r=t.length;for(let i=0;i<r;i++){let r=t[i],a=s[r];a&&(cw(a),n.styleApplyer(e,r,a))}}else if(a!==`key`&&s!=null){let i=typeof s;i===`function`?(a.lastIndexOf(`on`,0)===0&&(r&&(s=r(a,s,e,t)),a===`oninput`&&function(){let e=s;s=function(t){e.apply(this,[t]),t.target[`oninput-value`]=t.target.value}}()),e[a]=s):n.namespace===rw?a===`href`?e.setAttributeNS(iw,a,s):e.setAttribute(a,s):i===`string`&&a!==`value`?a===`innerHTML`?e[a]=WC.sanitize(s):gw(e)&&a in e?e[a]=s:e.setAttribute(a,s):e[a]=s}}};function gw(e){if(!(e instanceof Element&&e.tagName.includes(`-`)))return!1;let t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}var _w,_le=(e,t,n)=>{if(t)for(let r of t)yw(r,e,void 0,n)},vw=(e,t,n)=>{_le(e,t.children,n),t.text&&(e.textContent=t.text),gle(e,t.properties,n),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,n,t.vnodeSelector,t.properties,t.children])},yw=(e,t,n,r)=>{let i,a=0,o=e.vnodeSelector,s=t.ownerDocument;if(o===``)i=e.domNode=s.createTextNode(e.text),n===void 0?t.appendChild(i):t.insertBefore(i,n);else{for(let c=0;c<=o.length;++c){let l=o.charAt(c);if(c===o.length||l===`.`||l===`#`){let l=o.charAt(a-1),u=o.slice(a,c);l===`.`?i.classList.add(u):l===`#`?i.id=u:(u===`svg`&&(r=ow(r,{namespace:rw})),r.namespace===void 0?(i=e.domNode=e.domNode||s.createElement(u),u===`input`&&e.properties&&e.properties.type!==void 0&&i.setAttribute(`type`,e.properties.type)):i=e.domNode=s.createElementNS(r.namespace,u),n===void 0?i.parentNode!==t&&t.appendChild(i):t.insertBefore(i,n)),a=c+1}}vw(i,e,r)}},bw=(e,t,n)=>{t&&t.split(` `).forEach(t=>{t&&e.classList.toggle(t,n)})},vle=(e,t,n,r)=>{if(!n)return;let i=!1,a=Object.keys(n),o=a.length;for(let s=0;s<o;s++){let o=a[s],c=n[o],l=t[o];if(o===`class`)l!==c&&(bw(e,l,!1),bw(e,c,!0));else if(o===`classes`){let t=e.classList,n=Object.keys(c),r=n.length;for(let e=0;e<r;e++){let r=n[e],a=!!c[r];a!==!!l[r]&&(i=!0,a?t.add(r):t.remove(r))}}else if(o===`styles`){let t=Object.keys(c),n=t.length;for(let a=0;a<n;a++){let n=t[a],o=c[n];o!==l[n]&&(i=!0,o?(cw(o),r.styleApplyer(e,n,o)):r.styleApplyer(e,n,``))}}else if(c||typeof l!=`string`||(c=``),o!==`value`||gw(e)){if(c!==l){let t=typeof c;t===`function`&&r.eventHandlerInterceptor||(r.namespace===rw?o===`href`?e.setAttributeNS(iw,o,c):e.setAttribute(o,c):t===`string`?o===`innerHTML`?e[o]=WC.sanitize(c):o===`role`&&c===``?e.removeAttribute(o):gw(e)&&o in e?e[o]=c:e.setAttribute(o,c):e[o]!==c&&(e[o]=c),i=!0)}}else{let t=e[o];t!==c&&(e[`oninput-value`]?t===e[`oninput-value`]:c!==l)&&(e[o]=c,e[`oninput-value`]=void 0),c!==l&&(i=!0)}}return i},yle=(e,t,n,r,i)=>{if(n===r)return!1;r||=aw;let a,o=(n||=aw).length,s=r.length,c=0,l=0,u=!1;for(;l<s;){let s=c<o?n[c]:void 0,d=r[l];if(s!==void 0&&sw(s,d))u=_w(s,d,i)||u,c++;else{let s=mle(n,d,c+1);if(s>=0){for(a=c;a<s;a++)hw(n[a]),lw(n,a,e,`removed`);u=_w(n[s],d,i)||u,c=s+1}else yw(d,t,c<o?n[c].domNode:void 0,i),hle(d),lw(r,l,e,`added`)}l++}if(o>c)for(a=c;a<o;a++)hw(n[a]),lw(n,a,e,`removed`);return u};_w=(e,t,n)=>{let r=e.domNode,i=!1;if(e===t)return!1;let a=!1;if(t.vnodeSelector===``){if(t.text!==e.text){let e=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(e,r),t.domNode=e,i=!0,i}t.domNode=r}else t.vnodeSelector.lastIndexOf(`svg`,0)===0&&(n=ow(n,{namespace:rw})),e.text!==t.text&&(a=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,a=yle(t,r,e.children,t.children,n)||a,a=vle(r,e.properties,t.properties,n)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,n,t.vnodeSelector,t.properties,t.children]);return a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),i};var xw=(e,t)=>({getLastRender:()=>e,update:n=>{if(e.vnodeSelector!==n.vnodeSelector)throw Error(`The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)`);let r=e;e=n,_w(r,n,t)},domNode:e.domNode}),ble={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,n)=>{t.charAt(0)===`-`?e.style.setProperty(t,n):e.style[t]=n}},Sw=e=>ow(ble,e),Cw={create:(e,t)=>(t=Sw(t),yw(e,document.createElement(`div`),void 0,t),xw(e,t)),append:(e,t,n)=>(n=Sw(n),yw(t,e,void 0,n),xw(t,n)),insertBefore:(e,t,n)=>(n=Sw(n),yw(t,e.parentNode,e,n),xw(t,n)),merge:(e,t,n)=>(n=Sw(n),t.domNode=e,vw(e,t,n),xw(t,n)),replace:(e,t,n)=>(n=Sw(n),yw(t,e.parentNode,e,n),e.parentNode.removeChild(e),xw(t,n))},ww,xle=(e,t)=>{let n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n};ww=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];var Sle=(e,t)=>{let n=e;return t.forEach(e=>{n=n&&n.children?ww(n.children,t=>t.domNode===e):void 0}),n},Cle=(e,t,n)=>{let r=function(r){n(`domEvent`,r);let i=t(),a=xle(r.currentTarget,i.domNode);a.reverse();let o,s=Sle(i.getLastRender(),a);return e.scheduleRender(),s&&(o=s.properties[`on${r.type}`].apply(s.properties.bind||this,arguments)),n(`domEventProcessed`,r),o};return(e,t,n,i)=>r},Tw=e=>{let t,n,r=Sw(e),i=r.performanceLogger,a=!0,o=!1,s=[],c=[],l=(e,n,a)=>{let o;r.eventHandlerInterceptor=Cle(t,()=>o,i),o=e(n,a(),r),s.push(o),c.push(a)},u=()=>{if(n=void 0,a){a=!1,i(`renderStart`,void 0);for(let e=0;e<s.length;e++){let t=c[e]();i(`rendered`,void 0),s[e].update(t),i(`patched`,void 0)}i(`renderDone`,void 0),a=!0}};return t={renderNow:u,scheduleRender:()=>{n||o||(n=requestAnimationFrame(u))},stop:()=>{n&&=(cancelAnimationFrame(n),void 0),o=!0},resume:()=>{o=!1,a=!0,t.scheduleRender()},append:(e,t)=>{l(Cw.append,e,t)},insertBefore:(e,t)=>{l(Cw.insertBefore,e,t)},merge:(e,t)=>{l(Cw.merge,e,t)},replace:(e,t)=>{l(Cw.replace,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),s.splice(t,1)[0];throw Error(`renderFunction was not found`)}},t},Ew=class extends F{constructor(){super(...arguments),this.items=new W,this._watchUpdatingTracking=new ew,this._callbacks=new Map,this._projector=Tw(),this._hiddenProjector=Tw()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let e=document.createElement(`div`);e.className=`esri-overlay-surface`,this._set(`surface`,e),this._hiddenSurface=document.createElement(`div`),this._hiddenSurface.setAttribute(`style`,`visibility: hidden;`),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,e=>{for(let t of e.added){let e=()=>t.render();this._callbacks.set(t,e),this._projector.append(this.surface,e)}for(let t of e.removed){let e=this._projector.detach(this._callbacks.get(t));this.surface.removeChild(e.domNode),this._callbacks.delete(t)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){let t=this._hiddenSurface,n=this._hiddenProjector,r,i=()=>(r=e.render(),r);n.append(t,i),n.renderNow();let a={left:0,top:0,right:0,bottom:0};if(r?.domNode){let e=r.domNode.getBoundingClientRect();a.left=e.left,a.top=e.top,a.right=e.right,a.bottom=e.bottom}for(n.detach(i);t.firstChild;)t.removeChild(t.firstChild);return a}overlaps(e,t){let n=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,t){let n=!!t?.disableDecorations;if(!this.items.some(e=>e.visible&&!(n&&e.isDecoration)))return;let r=e.getContext(`2d`);r.save(),r.font=this._fontString(),this.items.forEach(e=>{n&&e.isDecoration||(r.save(),e.renderCanvas(r),r.restore())}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};e([N({readOnly:!0})],Ew.prototype,`surface`,void 0),e([N({readOnly:!0})],Ew.prototype,`items`,void 0),e([N({readOnly:!0})],Ew.prototype,`needsRender`,null),e([N({readOnly:!0})],Ew.prototype,`_watchUpdatingTracking`,void 0),e([N({readOnly:!0})],Ew.prototype,`updating`,null),Ew=e([P(`esri.views.overlay.ViewOverlay`)],Ew);var Dw=Ew,Ow=[0,0];function wle(e){let t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return Ow[0]=n.left+(t?.pageXOffset??0),Ow[1]=n.top+(t?.pageYOffset??0),Ow}function kw(e){e&&(e.textContent=``,e.parentNode&&e.parentNode.removeChild(e))}var Aw=16,jw=750,Tle=512,Ele=2,Mw=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this._freqInfo={freq:Aw,time:jw},this._overlayRenderTaskHandle=null,this.aria={},this.attributionMode=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([G(()=>this.cursor,e=>{let{surface:t}=this;t&&t.setAttribute(`data-cursor`,e)}),G(()=>this.navigating,e=>{let{surface:t}=this;t&&t.setAttribute(`data-navigating`,e.toString())}),G(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){let e=this;this.addHandles([G(()=>this.ui,(e,t)=>this._handleUIChange(e,t),qh),e.on(`focus`,()=>this.notifyChange(`focused`)),e.on(`blur`,()=>this.notifyChange(`focused`))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get attributionHeight(){return this._attribution?.height??0}get container(){return this._get(`container`)??null}set container(e){let t=this._get(`container`),n=aC(e);if(n||typeof e!=`string`||E.getLogger(this).error(`#container`,`element with id '${e}' not found`),t===n)return;if(this._stopMeasuring(),this.removeHandles(`container`),t&&(t.classList.remove(`esri-view`),this._overlayRenderTaskHandle&&=(this._overlayRenderTaskHandle.remove(),null),this.overlay&&(this.overlay.destroy(),this._set(`overlay`,null)),this._attribution=zr(this._attribution),this.root&&(kw(this.root),this._set(`root`,null)),this.userContent&&(oC(this.userContent,t),kw(this.userContent),this._set(`userContent`,null))),!n)return this._set(`width`,0),this._set(`height`,0),this._set(`position`,null),this._set(`suspended`,!0),this._set(`surface`,null),void this._set(`container`,null);n.classList.add(`esri-view`);let r=document.createElement(`div`);r.className=`esri-view-user-storage`,oC(n,r),n.appendChild(r),this._set(`userContent`,r);let i=document.createElement(`div`);i.className=`esri-view-root`,n.insertBefore(i,n.firstChild),this._set(`root`,i);let a=document.createElement(`div`);a.className=`esri-view-surface`,a.setAttribute(`role`,`application`),a.tabIndex=0,i.appendChild(a),this._set(`surface`,a);let o=new Dw;i.appendChild(o.surface),this._set(`overlay`,o),this.addHandles(G(()=>o.needsRender,e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=$i({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Br(this._overlayRenderTaskHandle)}),`container`),this.addHandles([G(()=>this.attributionVisible,e=>{e?!this._attribution&&e&&(this._attribution=new $C({attributionItems:this.attributionItems,mode:this.attributionMode}),this._attribution.appendTo(i)):this._attribution=zr(this._attribution)},Jh),G(()=>this.attributionItems,e=>{this._attribution&&(this._attribution.attributionItems=e)},Kh),G(()=>this.attributionMode,e=>{this._attribution&&(this._attribution.mode=e)},Kh)],`container`),this.forceDOMReadyCycle(),this._set(`container`,n),this._startMeasuring()}get focused(){let e=document.activeElement===this.surface;return document.hasFocus()&&e}get size(){return[this.width,this.height]}get ui(){return this._get(`ui`)}set ui(e){let t=this._get(`ui`);t!==e&&t?.destroy(),this._set(`ui`,e)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(e,t,n){let r=this.position;return e-=r?r[0]:0,t-=r?r[1]:0,n?(n[0]=e,n[1]=t):n=[e,t],n}containerToPage(e,t,n){let r=this.position;return e+=r?r[0]:0,t+=r?r[1]:0,n?(n[0]=e,n[1]=t):n=[e,t],n}_updateAria(){let{surface:e,aria:t}=this;e&&(e.ariaLabelledByElements=t?.labelledByElements??null,e.ariaDescribedByElements=t?.describedByElements??null,e.ariaLabel=t?.label??null,e.ariaDescription=t?.description??null)}_handleUIChange(e,t){this.removeHandles(`ui`),t&&t!==e&&t.destroy(),e&&(e.view=this,this.addHandles(G(()=>this.root,t=>{if(t){let n=document.createElement(`div`);t.insertBefore(n,this._attribution?.surface??null),e.container=n}else e.container=null},qh),`ui`)),this._set(`ui`,e)}_stopMeasuring(){this.removeHandles(`measuring`),this._get(`resizing`)&&this._set(`resizing`,!1)}_startMeasuring(){let e=this._freqInfo;e.freq=Aw,e.time=jw;let t=$i({prepare:e=>{let n=this._measure(),r=this._freqInfo;r.time+=e.deltaTime,n&&(r.freq=Aw,this._get(`resizing`)||this._set(`resizing`,!0)),!(r.time<r.freq)&&(r.time=0,r.freq=this._position()||n?Aw:Math.min(jw,r.freq*Ele),!n&&r.freq>=Tle&&(t.pause(),this._get(`resizing`)&&this._set(`resizing`,!1)))}}),n=new ResizeObserver(n=>{e.freq=Aw,e.time=jw,t.resume()});this.container!=null&&n.observe(this.container);let r=Yt(()=>n.disconnect());this.addHandles([bi(window,`resize`,()=>{e.freq=Aw,e.time=jw,t.resume()}),r,t],`measuring`),this._measure(),this._position()}_measure(){let e=this.container,t=e?e.clientWidth:0,n=e?e.clientHeight:0;if(t===0||n===0)return this.suspended||this._set(`suspended`,!0),!1;let r=this.width,i=this.height;return t===r&&n===i?(this.suspended&&this._set(`suspended`,!1),!1):(this._set(`width`,t),this._set(`height`,n),this.suspended&&this._set(`suspended`,!1),this.emit(`resize`,{oldWidth:r,oldHeight:i,width:t,height:n}),!0)}_position(){let e=this.container,t=this.position,n=e&&wle(e);return!!n&&(!t||n[0]!==t[0]||n[1]!==t[1])&&(this._set(`position`,[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return e([N()],r.prototype,`aria`,void 0),e([N()],r.prototype,`attributionHeight`,null),e([N()],r.prototype,`attributionMode`,void 0),e([N()],r.prototype,`container`,null),e([N({readOnly:!0})],r.prototype,`focused`,null),e([N({readOnly:!0})],r.prototype,`height`,void 0),e([N()],r.prototype,`messagesCommon`,void 0),e([N({type:Dw})],r.prototype,`overlay`,void 0),e([N({readOnly:!0})],r.prototype,`position`,void 0),e([N({readOnly:!0})],r.prototype,`resizing`,void 0),e([N({readOnly:!0})],r.prototype,`root`,void 0),e([N({value:null,readOnly:!0})],r.prototype,`size`,null),e([N({readOnly:!0})],r.prototype,`surface`,void 0),e([N({readOnly:!0})],r.prototype,`suspended`,void 0),e([N({nonNullable:!0})],r.prototype,`ui`,null),e([N({readOnly:!0})],r.prototype,`userContent`,void 0),e([N({readOnly:!0})],r.prototype,`width`,void 0),e([N()],r.prototype,`widthBreakpoint`,void 0),r=e([P(`esri.views.DOMContainer`)],r),r};function Nw(e,t,n){return Ni(e.map((e,r)=>t.apply(n,[e,r])))}async function Pw(e,t,n){return(await Ni(e.map((e,r)=>t.apply(n,[e,r])))).map(e=>e.value)}function Fw(e){return{ok:!0,value:e}}function Iw(e){return{ok:!1,error:e}}function Dle(e){return e!=null&&!0===e.ok?e.value:null}function Lw(e){return e!=null&&!1===e.ok?e.error:null}async function Rw(e){if(e==null)return{ok:!1,error:Error(`no promise provided`)};try{return Fw(await e)}catch(e){return Iw(e)}}async function zw(e){try{return Fw(await e)}catch(e){return Ei(e),Iw(e)}}function Bw(e,t){return new Vw(e,t)}var Vw=class extends F{get value(){return Dle(this._result)}get error(){return Lw(this._result)}get finished(){return this._result!=null}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Vr(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;let{signal:n}=this._abortController;this.promise=e(n),this.promise.then(e=>{this._result=Fw(e),this._cleanup()},e=>{this._result=Iw(e),this._cleanup()}),this._abortHandle=Oi(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Br(this._abortHandle),this._abortController=null}};e([O()],Vw.prototype,`value`,null),e([O()],Vw.prototype,`error`,null),e([O()],Vw.prototype,`finished`,null),e([O()],Vw.prototype,`promise`,void 0),e([O()],Vw.prototype,`_result`,void 0),Vw=e([hr(`esri.core.asyncUtils.ReactiveTask`)],Vw);var Ole=class{constructor(){this._sequence=Promise.resolve()}async acquire(){let e;this._sequence=new Promise(t=>{e=this._sequence.then(()=>t,()=>t)});let t=await e;return{[Symbol.dispose]:t}}async run(e){let t={stack:[],error:void 0,hasError:!1};try{return r(t,await this.acquire(),!1),await e()}catch(e){t.error=e,t.hasError=!0}finally{a(t)}}},Hw=`popup`,Uw=`manual`;function Ww(e){return e!=null&&`open`in e&&`declaredClass`in e}function Gw(e){return!!e&&e.tagName.toLowerCase()===`arcgis-popup`&&`open`in e}function kle(e,t,n){let[r,i,a]=t;if(n){let[e,t,r]=n;e&&Ww(t)&&(t.view=null,e.remove(t,Hw),t!==i&&i&&t.destroy()),e&&r&&Gw(r)&&(r.view=null,e.remove(r,Hw),r!==a&&a&&r.remove())}r&&Ww(i)&&(i.view=e,r.add(i,{key:Hw,position:Uw,internal:!0})),r&&a&&Gw(a)&&(a.view=e,r.add(a,{key:Hw,position:Uw,internal:!0}))}async function Ale(e,t){let{popup:n,popupElement:r}=e;Ww(n)?await Kw(n,null,t):r&&Gw(r)?await Kw(null,r,t):t?.defer(async()=>{await e.setupPopup();let{popup:n,popupElement:r}=e;Ww(n)&&!e.destroyed&&e.ready&&e.popupEnabled?await Kw(n,null,t):r&&Gw(r)&&await Kw(null,r,t)})}function jle(e,t){let{popup:n,popupElement:r}=e;if(Ww(n))return n.open(t);r&&Gw(r)&&r.open(t)}function Mle(e,t){Ww(e)&&e.close(),t&&Gw(t)&&(t.visible=!1)}async function Kw(e,t,n){if(Ww(e)){let t=await e.viewModel.handleViewClick(n);t?.promises?.length?e.open(t):e.visible&&e.close();return}if(t&&Gw(t)){let e=await t.handleViewClick(n);e?.promises?.length?t.open(e):t.visible&&=!1}}var Nle=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Ple=`screenUtils.toPt: input not recognized!`,qw=96;function Jw(e){return e?e/72*qw:0}function Yw(e){return e?72*e/qw:0}function Xw(e){if(typeof e==`string`){let t=e.match(Nle);if(t){let n=Number(t[1]),r=t[3]&&t[3].toLowerCase(),i=e.startsWith(`-`),a=r===`px`?Yw(n):n;return i?-a:a}return console.warn(Ple),null}return e}function Zw(e=0,t=0){return{x:e,y:t}}function Qw(e){return e?Zw(e.x,e.y):null}function Fle(e=0,t=0){return[e,t]}function Ile(e=0,t=0){return $w([e,t])}function Lle(e=0,t=0,n=0){return eT([e,t,n])}function $w(e){return e}function eT(e){return e}function Rle(e){return e}function zle(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}var tT=c(`mac`)?`Meta`:`Control`,Ble=new Set([`Alt`,`Control`,`Meta`,`Shift`,`Ctrl`,`Primary`]),Vle=e=>Ble.has(e),Hle=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;let t=e.modifiers;for(let e of this.keyModifiers)if(!t.has(e))return!1;return!0}},nT=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches)for(let e in this._incomingEventMatches=[],this._incoming){let t=this._incoming[e];for(let e of t)this._incomingEventMatches.push(e.match)}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||=this.incomingEventMatches.map(e=>e.eventType),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||=Object.keys(this._outgoing),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||=(e.setEventCallback(e=>this._handleEvent(e)),e.setUninstallCallback(()=>this._onUninstall()),e)}onUninstall(){}registerIncoming(e,t,n){let r;typeof t==`function`?(n=t,r=[]):r=t||[];let i=typeof e==`string`?new Hle(e,r):e,a=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},o=e=>{let t=this._incoming[e.match.eventType];if(t){let n=t.indexOf(e);t.splice(n,1),a(),this._manager&&this._manager.updateDependencies()}},s=new Ule(i,n,{onPause:o,onRemove:o,onResume:e=>{let t=this._incoming[e.match.eventType];t&&!t.includes(e)&&(t.push(e),a(),this._manager&&this._manager.updateDependencies())}}),c=this._incoming[i.eventType];return c||(c=[],this._incoming[i.eventType]=c),c.push(s),a(),this._manager&&this._manager.updateDependencies(),s}registerOutgoing(e){if(this._outgoing[e])throw Error(`There is already a callback registered for this outgoing InputEvent: `+e);let t=new Wle(e,{onEmit:(e,t,n,r)=>{this._manager?.emit(e.eventType,t,n,r)},onRemove:e=>{delete this._outgoing[e.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&=(this.onUninstall(),null)}_handleEvent(e){let t=this._incoming[e.type];if(t){for(let n of t)if(n.match.matches(e)&&(n.callback?.(e),e.shouldStopPropagation()))break}}},Ule=class{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Wle=class{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},Gle=class extends nT{constructor(e){super(!0),this._onChange=e,this._value=`mouse`,this._x=null,this._y=null,this._id=null,this.registerIncoming(`pointer-move`,e=>this._update(e.data))}_update(e){let t=e.native.pointerType===`touch`?`touch`:`mouse`,{x:n,y:r,native:{pointerId:i}}=e;t===this._value&&this._x===n&&this._y===r&&this._id===i||(this._value=t,this._x=n,this._y=r,this._id=i,this._onChange(i,t,n,r))}},Kle=class{constructor(e,t){this._observable=new Oh,this._value=e,this._equalityFunction=t}get value(){return k(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function rT(e,t=Ge){return new Kle(e,t)}var qle=class extends nT{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=rT(!1),this._onPointerAdd=({data:e})=>{e.pointerType===`touch`&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType===`touch`&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming(`pointer-down`,this._onPointerAdd),this.registerIncoming(`pointer-up`,this._onPointerRemove),this.registerIncoming(`pointer-capture-lost`,this._onPointerRemove),this.registerIncoming(`pointer-cancel`,this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},iT=class{constructor(e,t){for(let n in this._owner=t,this._properties={},this._afterDispatchHandle=null,e){let t=e[n],r=new ci(t,void 0,void 0,2,2);this._properties[n]={pool:r,acquired:[]}}this._afterDispatchHandle=Ia(()=>this._release())}destroy(){for(let e in this._afterDispatchHandle&&=(this._afterDispatchHandle.remove(),null),this._properties){let t=this._properties[e];for(let e of t.acquired)Va(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){let t=this._owner._get(e),n=this._properties[e],r=n.pool.acquire();for(n.acquired.push(r);r===t;)r=n.pool.acquire(),n.acquired.push(r);return Aa(),r}_release(){for(let e in this._properties){let t=this._properties[e],n=0;for(let e of t.acquired)Va(e)?t.acquired[n++]=e:t.pool.release(e);t.acquired.length=n}}},Jle=class{constructor(){this.id=0,this.type=`mouse`,this.location=Zw()}},aT=class extends F{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=tT,this._propertiesPool=new iT({latestPointerInfo:()=>new Jle},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){let e=Object.keys(this._nameToGroup);for(let t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,n=oT.INTERNAL){if(this._nameToGroup[e]||t.length===0)return;let r={name:e,handlers:t.map(e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let e=r.handlers.length-1;e>=0;e--){let t=r.handlers[e];this._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(e,n,r,i,a)=>{this._emitInputEvent(t.priorityIndex+1,e,n,r,a,i)},setPointerCapture:(e,n)=>{this._setPointerCapture(r,t,e,n)},setEventCallback:e=>{t.eventCallback=e},setUninstallCallback:e=>{t.uninstallCallback=e},refreshHasPendingInputs:()=>{this.notifyChange(`hasPendingInputs`)}})}this.updateDependencies()}uninstallHandlers(e){let t=this._nameToGroup[e];t?(t.handlers.forEach(e=>{e.removed=!0,e.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):E.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;let e=new Set,t=new Set;this._handlersPriority=[];for(let e=this._handlers.length-1;e>=0;e--){let t=this._handlers[e];t.priorityIndex=e,this._handlersPriority.push(t)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){let r=this._handlersPriority[n];r.priorityIndex=n;let i=r.handler.hasSideEffects;if(!i){for(let t of r.handler.outgoingEventTypes)if(e.has(t)){i=!0;break}}if(i)for(let n of r.handler.incomingEventMatches){e.add(n.eventType);for(let e of n.keyModifiers)Vle(e)||t.add(e)}r.active=i}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add(`pointer-capture-lost`),this._keyModifiers.size>0&&(this._sourceEvents.add(`key-down`),this._sourceEvents.add(`key-up`)),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,n,r){let i=this._latestPointerInfo;if(i==null||i.id!==e||i.type!==t||i.location.x!==n||i.location.y!==r){let i=this._propertiesPool.get(`latestPointerInfo`);i.id=e,i.type=t,i.location.x=n,i.location.y=r,this._latestPointerInfo=i}}_onEventReceived(e,t){if(e===`pointer-capture-lost`){let e=t;this._pointerCaptures.delete(e.native.pointerId)}this._updateKeyModifiers(e,t);let n=this._testTimestamp??t.native?.timestamp,r=t.native?.cancelable;this._emitInputEventFromSource(e,t,n,r)}_updateKeyModifiers(e,t){if(!t)return;let n=!1,r=()=>{n||=(this._activeKeyModifiers=new Set(this._activeKeyModifiers),!0)},i=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(r(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(r(),this._activeKeyModifiers.delete(e))};if(e===`key-down`||e===`key-up`){let n=t.key;this._keyModifiers.has(n)&&i(n,e===`key-down`)}let a=t.native;i(`Alt`,!!a?.altKey),i(`Control`,!!a?.ctrlKey),i(`Ctrl`,!!a?.ctrlKey),i(`Shift`,!!a?.shiftKey),i(`Meta`,!!a?.metaKey),i(`Primary`,this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Gle((e,t,n,r)=>this._setLatestPointer(e,t,n,r)),this._multiTouchHandler=new qle,this.installHandlers(`input-manager-logic`,[this._latestPointerHandler,this._multiTouchHandler],oT.ALWAYS),this.recognizers.length>0&&this.installHandlers(`default`,this.recognizers,oT.INTERNAL)}_setPointerCapture(e,t,n,r){let i=e.name+`-`+t.priorityIndex,a=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,a),r?(a.add(i),a.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):a.has(i)&&(a.delete(i),a.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,n,r){this._emitInputEvent(0,e,t,n,r)}_emitInputEvent(e,t,n,r,i,a){let o=r??this._currentPropagation?.timestamp??performance.now(),s=i??!1,c={event:new Yle(t,n,o,a||this._activeKeyModifiers,s),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new Zh,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;let e=this._currentPropagation;if(e){for(;e.events.length>0;){let{event:t,priorityIndex:n}=e.events.pop(),r=t.data?.eventId;if(!(r!=null&&this._stoppedPropagationEventIds.has(r)))for(e.currentHandler=this._handlersPriority[n];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){r!=null&&this._stoppedPropagationEventIds.add(r);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){let t=new Zh;t.push(e);let n=this._currentPropagation;if(n){for(;n.events.length;)t.push(n.events.pop());n.events=t,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(let n of e.handler.incomingEventMatches)for(let e of t.handler.incomingEventMatches){if(n.eventType!==e.eventType)continue;let t=n.keyModifiers.filter(t=>e.keyModifiers.includes(t));if(t.length===n.keyModifiers.length!=(t.length===e.keyModifiers.length))return n.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){let t=[];for(let n of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(n,t[e])>=0;)e++;t.splice(e,0,n)}return t}get test(){}};e([N({readOnly:!0})],aT.prototype,`hasPendingInputs`,null),e([N({constructOnly:!0})],aT.prototype,`eventSource`,void 0),e([N({constructOnly:!0})],aT.prototype,`recognizers`,void 0),e([N()],aT.prototype,`multiTouchActive`,null),e([N()],aT.prototype,`_latestPointerInfo`,void 0),e([N()],aT.prototype,`latestPointerInfo`,null),e([N()],aT.prototype,`_paused`,void 0),e([N({readOnly:!0})],aT.prototype,`updating`,null),aT=e([P(`esri.views.input.InputManager`)],aT);var Yle=class{constructor(e,t,n,r,i){this.type=e,this.data=t,this.timestamp=n,this.modifiers=r,this.cancelable=i,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;let t=(e,t)=>{this._propagationState&=-3;let n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),t)throw e;return e};return(typeof e==`function`?e():e).then(e=>t(e,!1),e=>t(e,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}},oT={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},Xle=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this._popupSetupTask=null,this.popupEnabled=!0,this.popup={}}initialize(){this.addHandles([G(()=>[this.ui,this.popup,this.popupElement],([e,t,n],r)=>{let[i,a,o]=r??[];kle(this,[e,t,n],[i,a,o])},Jh),this.on(`click`,e=>{this.popup&&this.popupEnabled&&(e.pointerType!==`mouse`||e.button===0)&&Ale(this,e)},oT.WIDGET)]),Uh(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>R(()=>import(`./Popup-B0odJfFs.js`),__vite__mapDeps([216,217,218,219,220,221,222,223,224,165,225,130,128,129,119,5,12,13,131,20,226,227,228,229,230,191,231,232,233,234])))}destroy(){this.destroyed||this.closePopup()}get popup(){return this._get(`popup`)}set popup(e){this._set(`popup`,e)}async openPopup(e){if(Ww(this.popup))return this.popup.open(e);if(this.popupElement&&Gw(this.popupElement))this.popupElement.open(e).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void E.getLogger(this).error(new D(`view:null-popup`,`Popup is null and can't be opened`));jle(this,e)}catch{}}closePopup(){this._popupSetupTask?.abort(),Mle(this.popup,this.popupElement)}async fetchPopupFeatures(e,t){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(e,t),t)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Ww(this.popup))return this._popupSetupTask=Bw(async e=>{if(!this.popupEnabled||!Gw(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup==`function`)await this.dependencies.popup(),Ci(e),customElements.get(`arcgis-popup`)||E.getLogger(this).error(new D(`view:undefined-popup-element`,"`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement(`arcgis-popup`);else{let{default:t}=await R(async()=>{let{default:e}=await import(`./Popup-B0odJfFs.js`);return{default:e}},__vite__mapDeps([216,217,218,219,220,221,222,223,224,165,225,130,128,129,119,5,12,13,131,20,226,227,228,229,230,191,231,232,233,234]));if(Ci(e),!this.popup||Ww(this.popup))return;let n=this.popup;if(`open`in n||`close`in n){let{open:e,close:r,...i}=n;this.popup=new t({...i})}else this.popup=new t(n)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:e,hits:t},n){let r=[],i=[],a=!1,o=rte(n,c(`popup-view-fetch-timeout`)??Qle),s=e=>{let t=new Zle(e);return i.push(t),r.push(t.promise),t},l=e=>{let t=i.at(-1);return t&&t.layerView===e&&!a?t:s(e)};for(let e of t)`graphic`in e?(l(e.layerView).graphics.push(e.graphic),a=!1):(r.push(e.layerView.fetchPopupFeaturesAtLocation(e.mapPoint,o)),a=!0);i.forEach(e=>e.resolve(o));let u=Pi(r).then(e=>e.filter(e=>!!e).flat());return{pendingFeatures:r,allGraphicsPromise:u,location:e}}async _getPopupHits(e,t){let{hits:n,location:r}=await this.popupHitTest(e);Ci(t);let i=[];for(let e of n)if(`graphic`in e){if(this._isValidPopupGraphic(e.graphic,t)){let t=this._isValidPopupGraphicsLayerView(e.layerView)?e.layerView:void 0;i.push({graphic:e.graphic,layerView:t})}}else this._isValidPopupLocationLayerView(e.layerView)&&i.push({mapPoint:e.mapPoint,layerView:e.layerView});return{hits:i,location:r}}_isValidPopupGraphic(e,t){return e&&!!e.getEffectivePopupTemplate(t?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(e){return!e||(!(`layer`in e)||!e.suspended)&&`fetchPopupFeaturesFromGraphics`in e}_isValidPopupLocationLayerView(e){return(!(`layer`in e)||!e.suspended)&&`fetchPopupFeaturesAtLocation`in e}};return e([N()],r.prototype,`popup`,null),e([N()],r.prototype,`popupElement`,void 0),e([N()],r.prototype,`popupEnabled`,void 0),r=e([P(`esri.views.PopupView`)],r),r},Zle=class{constructor(e){this.layerView=e,this._resolver=zi(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){let{layerView:t,graphics:n,_resolver:r}=this;if(!t)return r.resolve(n),r.promise;let i;return t.fetchPopupFeaturesFromGraphics(n,e).catch(e=>(i=e,null)).then(e=>{e?r.resolve(e):r.reject(i)}),r.promise}},Qle=5e3;function sT(e,t,n=W){return t||=new n,t===e||t.destroyed||(t.removeAll(),$le(e)?t.addMany(e):e&&t.add(e)),t}function cT(e){return e}function $le(e){return e&&(Array.isArray(e)||`items`in e&&Array.isArray(e.items))}var eue=class{constructor(){this._resolver=zi(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Si())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;let e=zi(),t=[...this._resolvingPromises,e.promise],n=this._allPromise=Promise.all(t);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve()},e=>{this.isFulfilled()||this._allPromise!==n||ji(e)||this._resolver.reject(e)}),e.resolve()}},lT=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this._promiseProps=new eue,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return this._promiseProps.promise.then(()=>this).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise(`_promiseProps`in e?e.when():e)}addResolvingTask(e){e&&!this._promiseProps.isFulfilled()&&(this.addHandles(en(e)),this._promiseProps.addResolvingPromise(e.promise))}};return r=e([hr(`esri.core.Promise`)],r),r},uT=lT(F),tue=`not-loaded`,nue=`loading`,rue=`failed`,dT=`loaded`,fT=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus=`not-loaded`,this._set(`loadWarnings`,[]),this.addResolvingPromise(new Promise(e=>{let t=this.load.bind(this);this.load=n=>{let r=new Promise((e,t)=>{let r=ki(n,t);this.destroyed&&t(new D(`load:instance-destroyed`,`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(e,t).finally(()=>{r&&r.remove()})});if(this.loadStatus===tue){this._set(`loadStatus`,nue);let e=this._loadController=new AbortController;t({signal:e.signal})}return e(),r}})),this.when(()=>{this._set(`loadStatus`,dT),this._loadController=null},e=>{this.destroyed||(this._set(`loadStatus`,rue),this._set(`loadError`,e),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=Vr(this._loadController),this._promiseProps.abort()),this._set(`loadError`,null),this._set(`loadWarnings`,[])}get loaded(){return this.loadStatus===dT}get loadWarnings(){return this._get(`loadWarnings`)}load(e){return null}cancelLoad(){return this.isFulfilled()||(this._set(`loadError`,new D(`load:cancelled`,`Cancelled`)),this._loadController?.abort(),this._promiseProps.abort()),this}};return e([O({readOnly:!0})],r.prototype,`loaded`,null),e([O({readOnly:!0})],r.prototype,`loadError`,void 0),e([O({clonable:!1})],r.prototype,`loadStatus`,void 0),e([O({type:[zn],readOnly:!0})],r.prototype,`loadWarnings`,null),r=e([hr(`esri.core.Loadable`)],r),r},pT=fT(uT);function mT(e){return!(!e||!e.load)}async function hT(e,t){return await e.load(),gT(e,t)}async function gT(e,t){let n=[],r=(...e)=>{for(let t of e)t!=null&&(Array.isArray(t)?r(...t):W.isCollection(t)?t.forEach(e=>r(e)):mT(t)&&n.push(t))};t(r);let i=null;if(await Pw(n,async e=>{let t=await Rw(iue(e)?e.loadAll():e.load());!1!==t.ok||i||(i=t)}),i)throw i.error;return e}function iue(e){return`loadAll`in e&&typeof e.loadAll==`function`}var _T;function vT(e){return _T&&!_T.destroyed||(_T=e()),_T}var yT,bT=new xr({avgRating:`avg-rating`,numRatings:`num-ratings`,numComments:`num-comments`,numViews:`num-views`}),xT=yT=class extends F{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get(`sortOrder`)||`asc`}set sortOrder(e){e!==`asc`&&e!==`desc`||this._set(`sortOrder`,e)}clone(){return new yT({categories:this.categories?C(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let n=[];this.categories&&(n=this.categories.map(e=>Array.isArray(e)?JSON.stringify(e):e));let r=``;if(this.extent){let e=td(this.extent,H.WGS84);e!=null&&(r=`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i=`(`+i+`)`+e.extraQuery);let a={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(a.sortField=this.sortField.split(`,`).map(e=>bT.toJSON(e.trim())).join(`,`),a.sortOrder=this.sortOrder),{query:{...t,...a}}}};e([N()],xT.prototype,`categories`,void 0),e([N()],xT.prototype,`disableExtraQuery`,void 0),e([N({type:Rd})],xT.prototype,`extent`,void 0),e([N()],xT.prototype,`filter`,void 0),e([N()],xT.prototype,`num`,void 0),e([N()],xT.prototype,`query`,void 0),e([N()],xT.prototype,`sortField`,void 0),e([N()],xT.prototype,`sortOrder`,null),e([N()],xT.prototype,`start`,void 0),xT=yT=e([P(`esri.portal.PortalQueryParams`)],xT);var ST,CT=ST=class extends L{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){let e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){let e=this.portal?.restUrl;return e?e+`/community/groups/`+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+`/categorySchema`,e).then(t=>{let n=t.categorySchema||[];return n.some(e=>e.source===`contentCategorySetsGroupQuery.LivingAtlas`)?this._fetchCategorySchemaSet(`LivingAtlas`,e):n})}fetchMembers(e){return this.portal.request(this.url+`/users`,e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new D(`internal:not-yet-implemented`,`PortalGroup.toJSON is not yet implemented`)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw Error(`JSON object is already hydrated`);let t=new ST({sourceJSON:e});return t.read(e),t}queryItems(e,t){let n=Lt(xT,e),r=this.portal;return parseFloat(r.currentVersion)>5?(n||=new xT,r.queryPortal(`/content/groups/${this.id}/search`,n,`PortalItem`,t)):(n=n?n.clone():new xT,n.query=`group:`+this.id+(n.query?` `+n.query:``),r.queryItems(n,t))}_fetchCategorySchemaSet(e,t){let n=this.portal;return n.fetchSelf(n.authMode,!0,t).then(e=>{let r=e.contentCategorySetsGroupQuery;if(r){let e=new xT({disableExtraQuery:!0,num:1,query:r});return n.queryGroups(e,t)}throw new D(`portal-group:fetchCategorySchema`,`contentCategorySetsGroupQuery value not found`)}).then(n=>{if(n.total){let r=n.results[0],i=new xT({num:1,query:`typekeywords:"${e}"`});return r.queryItems(i,t)}throw new D(`portal-group:fetchCategorySchema`,`contentCategorySetsGroupQuery group not found`)}).then(e=>e.total?e.results[0].fetchData(`json`,t).then(e=>{let t=e?.categorySchema;return t?.length?t:[]}):[])}};e([N()],CT.prototype,`access`,void 0),e([N({type:Date})],CT.prototype,`created`,void 0),e([N()],CT.prototype,`description`,void 0),e([N()],CT.prototype,`id`,void 0),e([N()],CT.prototype,`isInvitationOnly`,void 0),e([N({type:Date})],CT.prototype,`modified`,void 0),e([N()],CT.prototype,`owner`,void 0),e([N()],CT.prototype,`portal`,void 0),e([N()],CT.prototype,`snippet`,void 0),e([N()],CT.prototype,`sortField`,void 0),e([N()],CT.prototype,`sortOrder`,void 0),e([N()],CT.prototype,`sourceJSON`,void 0),e([N()],CT.prototype,`tags`,void 0),e([N()],CT.prototype,`thumbnail`,void 0),e([N({readOnly:!0})],CT.prototype,`thumbnailUrl`,null),e([N()],CT.prototype,`title`,void 0),e([N({readOnly:!0})],CT.prototype,`url`,null),CT=ST=e([P(`esri.portal.PortalGroup`)],CT);var wT=class extends F{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};e([N()],wT.prototype,`nextQueryParams`,void 0),e([N()],wT.prototype,`queryParams`,void 0),e([N()],wT.prototype,`results`,void 0),e([N()],wT.prototype,`total`,void 0),wT=e([P(`esri.portal.PortalQueryResult`)],wT);var TT=class extends L{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){let e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new D(`internal:not-yet-implemented`,`PortalFolder.toJSON is not yet implemented`)}};e([N({type:Date})],TT.prototype,`created`,void 0),e([N()],TT.prototype,`id`,void 0),e([N()],TT.prototype,`portal`,void 0),e([N()],TT.prototype,`title`,void 0),e([N({readOnly:!0})],TT.prototype,`url`,null),e([N()],TT.prototype,`username`,void 0),TT=e([P(`esri.portal.PortalFolder`)],TT);var ET,DT=ET=class extends L{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){let e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){let e=this.portal?.restUrl;return e?`${e}/content/users/${this.id}`:null}get url(){let e=this.portal?.restUrl;return e?`${e}/community/users/${this.id}`:null}addItem(e){let t=e&&e.item,n=e?.data,r=e?.folder,i={method:`post`};t&&(i.query=t.createPostQuery(),n!=null&&(typeof n==`string`?i.query.text=n:typeof n==`object`&&(i.query.text=JSON.stringify(n))));let a=this.userContentUrl;return r&&(a+=`/`+(typeof r==`string`?r:r.id)),this.portal.request(a+`/addItem`,i).then(e=>(t.id=e.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let n=this.userContentUrl;e.ownerFolder&&(n+=`/`+e.ownerFolder);let r=t?{permanentDelete:!0}:{};await this.portal.request(n+`/items/${e.id}/delete`,{method:`post`,query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();let n=this.userContentUrl+`/deleteItems`,r=[],i=e.map(e=>e.id);if(i.length){let a={method:`post`,query:{items:i.join(`,`),permanentDelete:t}},o=await this.portal.request(n,a);for(let t of o.results){let n=e.find(e=>t.itemId===e.id),i=t.success,a=null;i?(n.id=null,n.portal=null):t.error&&(a=new D(`portal:delete-item-failed`,t.error.message,t.error)),r.push({item:n,success:i,error:a})}}return r}fetchFolders(){return this.portal.request(this.userContentUrl??``,{query:{num:1}}).then(e=>{let t;return t=e&&e.folders?e.folders.map(e=>{let t=TT.fromJSON(e);return t.portal=this.portal,t}):[],t})}fetchGroups(){return this.portal.request(this.url??``).then(e=>{let t;return t=e&&e.groups?e.groups.map(e=>{let t=CT.fromJSON(e);return t.portal=this.portal,t}):[],t})}async fetchItems(e){e??={};let t=this.userContentUrl??``;e.folder&&(t+=`/`+e.folder.id);let{default:n}=await R(async()=>{let{default:e}=await import(`./PortalItem-NCjJsl5b.js`);return{default:e}},[]),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||`created`,sortOrder:e.sortOrder||`asc`},i=await this.portal.request(t,{query:r}),a;return i?.items?(a=i.items.map(e=>{let t=n.fromJSON(e);return t.portal=this.portal,t}),await Promise.all(a.map(e=>e.load())),{items:a,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+`/tags`).then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||=new CT({id:this.favGroupId,portal:this.portal}),this._favGroup.queryItems(e)):Promise.reject(new D(`internal:unknown`,`Unknown internal error`,{internalError:`Unknown favGroupId`}))}async restoreItem(e,t){let n=this.userContentUrl,r=t?{folderID:typeof t==`string`?t:t.id}:null;await this.portal.request(n+`/items/${e.id}/restore`,{method:`post`,query:r})}toJSON(){throw new D(`internal:not-yet-implemented`,`PortalUser.toJSON is not yet implemented`)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw Error(`JSON object is already hydrated`);let t=new ET({sourceJSON:e});return t.read(e),t}};e([N()],DT.prototype,`access`,void 0),e([N({type:Date})],DT.prototype,`created`,void 0),e([N()],DT.prototype,`culture`,void 0),e([N()],DT.prototype,`description`,void 0),e([N()],DT.prototype,`email`,void 0),e([N()],DT.prototype,`favGroupId`,void 0),e([N()],DT.prototype,`fullName`,void 0),e([N()],DT.prototype,`id`,void 0),e([N({type:Date})],DT.prototype,`modified`,void 0),e([N()],DT.prototype,`orgId`,void 0),e([N()],DT.prototype,`portal`,void 0),e([N()],DT.prototype,`preferredView`,void 0),e([N()],DT.prototype,`privileges`,void 0),e([N()],DT.prototype,`region`,void 0),e([N()],DT.prototype,`role`,void 0),e([N()],DT.prototype,`roleId`,void 0),e([N()],DT.prototype,`sourceJSON`,void 0),e([N()],DT.prototype,`thumbnail`,void 0),e([N({readOnly:!0})],DT.prototype,`thumbnailUrl`,null),e([N()],DT.prototype,`units`,void 0),e([N({readOnly:!0})],DT.prototype,`userContentUrl`,null),e([N({readOnly:!0})],DT.prototype,`url`,null),e([N()],DT.prototype,`username`,void 0),e([N()],DT.prototype,`userLicenseTypeId`,void 0),e([N()],DT.prototype,`userType`,void 0),DT=ET=e([P(`esri.portal.PortalUser`)],DT);var OT,kT,AT={PortalGroup:()=>Promise.resolve({default:CT}),PortalItem:()=>R(()=>import(`./PortalItem-NCjJsl5b.js`),[]),PortalUser:()=>Promise.resolve({default:DT})},q=class extends Mo(pT){static{OT=this}static{this.AUTH_MODE_ANONYMOUS=`anonymous`}static{this.AUTH_MODE_AUTO=`auto`}static{this.AUTH_MODE_IMMEDIATE=`immediate`}static{this.AUTH_MODE_NO_PROMPT=`no-prompt`}constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode=`auto`,this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=nt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e==`string`?{url:e}:e}destroy(){jT.unregister(this),this.defaultBasemap=zr(this.defaultBasemap),this.defaultDevBasemap=zr(this.defaultDevBasemap),this.defaultVectorBasemap=zr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Br(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(let t of e)nt.request.trustedServers.includes(t)||nt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){let e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return _ne(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){let t=e.indexOf(`/sharing`);e=t>0?e.slice(0,t):this.url.replace(/\/+$/,``),e+=`/sharing/rest`}return e}get thumbnailUrl(){let e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+`/portals/self/resources/`+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=DT.fromJSON(e),t.portal=this),t}load(e){let t=R(async()=>{let{default:e}=await import(`./Basemap-N5Y_-Zee.js`);return{default:e}},[]).then(({default:t})=>{Ci(e),kT=t}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(e=>{if(!this.hasAPIKey&&rc){let e=rc;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==OT.AUTH_MODE_AUTO&&this.authMode!==OT.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=e.on(`credential-create`,MT(new WeakRef(this))),jT.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=e,this.read(e)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();let e=this._getHelperService(`defaultElevationLayers`),t=(await R(async()=>{let{default:e}=await import(`./ElevationLayer-DXIU7C3T.js`);return{default:e}},__vite__mapDeps([235,5,200,236,237,238]))).default;return e?e.map(e=>new t({id:e.id,url:e.url})):[]}async fetchBasemaps(e,t){let n=await this._fetchBasemaps(e,t);if(!0===t?.include3d&&!1!==this.use3dBasemaps){if(this.g3dTilesEnabled&&this.g3DTilesGalleryGroupQuery&&c(`enable-feature:basemap-groundlayers`)){let e=await this._fetchBasemaps3D(this.g3DTilesGalleryGroupQuery,t);n.unshift(...e)}let r=await this._fetchBasemaps3D(e,t);n.unshift(...r)}return n}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery===`none`)return null;let t=new xT;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;let n=(await this.queryItems(t,e)).results.find(e=>e.type===`Web Scene`);return n?new kT({portalItem:n}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+`/portals/self/categorySchema`,e).then(e=>e.categorySchema):Ti(e)?Promise.reject(Si()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+`/portals/self/classification/classificationSchema`,e).then(e=>e.classificationSchema):null}fetchFeaturedGroups(e){let t=this.featuredGroups,n=new xT({num:100,sortField:`title`});if(t?.length){let r=[];for(let e of t)r.push(`(title:"${e.title}" AND owner:${e.owner})`);return n.query=r.join(` OR `),this.queryGroups(n,e).then(e=>e.results)}return Ti(e)?Promise.reject(Si()):Promise.resolve([])}fetchRegions(e){let t=this.user?.culture||this.culture||vg();return this.request(this.restUrl+`/portals/regions`,{...e,query:{culture:t}})}fetchSettings(e){let t=this.user?.culture||this.culture||vg();return this.request(this.restUrl+`/portals/self/settings`,{...e,query:{culture:t}})}static getDefault(){return vT(()=>new OT)}queryGroups(e,t){return this.queryPortal(`/community/groups`,e,`PortalGroup`,t)}queryItems(e,t){return this.queryPortal(`/search`,e,`PortalItem`,t)}queryUsers(e,t){return e.sortField||=`username`,this.queryPortal(`/community/users`,e,`PortalUser`,t)}fetchSelf(e=this.authMode,t=!1,n){let r=this.restUrl+`/portals/self`,i={authMode:e,query:{culture:vg().toLowerCase()},withCredentials:!0,...n};return i.authMode===`auto`&&(i.authMode=`no-prompt`),t&&(i.query.default=!0),this.request(r,i)}queryPortal(e,t,n,r){let i=Lt(xT,t),a=t=>this.request(this.restUrl+e,{...i.toRequestOptions(this),...r}).then(e=>{let n=i.clone();return n.start=e.nextStart,new wT({nextQueryParams:n,queryParams:i,total:e.total,results:OT._resultsToTypedArray(t,{portal:this},e,r)})}).then(e=>Promise.all(e.results.map(t=>typeof t.when==`function`?t.when():e)).then(()=>e,t=>(Ei(t),e)));return n&&AT[n]?AT[n]().then(({default:e})=>(Ci(r),a(e))):a()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new D(`portal:not-authenticated`,`Unable to authenticate user. Portal.user is missing`)});if(this.authMode===OT.AUTH_MODE_ANONYMOUS||this.authMode===OT.AUTH_MODE_NO_PROMPT&&!rc)return Promise.reject(new D(`portal:invalid-auth-mode`,`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus===`failed`)return Promise.reject(this.loadError);let e=e=>Promise.resolve().then(()=>this.loadStatus===`not-loaded`?(e||(this.authMode=`immediate`),this.load().then(()=>null)):this.loadStatus===`loading`?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf(`immediate`))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf(`immediate`))).then(e=>{e&&(this.sourceJSON=e,this.read(e))});return rc?rc.getCredential(this.restUrl,{prompt:this.authMode!==OT.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){let t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes(`?`)?`&`:`?`)+`token=`+t:e)}requestToTypedArray(e,t,n){return this.request(e,t).then(e=>{let t=OT._resultsToTypedArray(n,{portal:this},e);return Promise.all(t.map(t=>typeof t.when==`function`?t.when():e)).then(()=>t,()=>t)})}request(e,t={}){let n={f:`json`,...t.query},{authMode:r=this.authMode===OT.AUTH_MODE_ANONYMOUS||this.authMode===OT.AUTH_MODE_NO_PROMPT?this.authMode:`auto`,body:i=null,cacheBust:a=!1,method:o=`auto`,responseType:s=`json`,signal:c}=t,l={authMode:r,body:i,cacheBust:a,method:o,query:n,responseType:s,timeout:0,signal:c};return t.withCredentials&&(l.withCredentials=!0),Qc(this._normalizeSSL(e),l).then(e=>e.data)}toJSON(){throw new D(`internal:not-yet-implemented`,`Portal.toJSON is not yet implemented`)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw Error(`JSON object is already hydrated`);return new OT({sourceJSON:e})}_getHelperService(e){let t=this.helperServices?.[e];if(!t)throw new D(`portal:service-not-found`,`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){let n=new xT;n.query=e||(Ic()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),n.disableExtraQuery=!0;let r=await this.queryGroups(n,t);if(!r.total)return[];let i=r.results[0];n.num=100,n.query=`type:"Web Map" -type:"Web Application"`,n.sortField=i.sortField||`name`,n.sortOrder=i.sortOrder||`desc`;let a=await i.queryItems(n,t);return a.total?a.results.filter(e=>e.type===`Web Map`).map(e=>new kT({portalItem:e})):[]}async _fetchBasemaps3D(e,t){let n=e||this.basemapGalleryGroupQuery3D;if(!n||Ic())return[];let r=new xT({query:n,disableExtraQuery:!0}),i=await this.queryGroups(r,t);if(!i.total)return[];let a=i.results[0];r.num=100,r.query=`type:"Web Scene"`,r.sortField=a.sortField||`name`,r.sortOrder=a.sortOrder||`desc`;let o=await a.queryItems(r,t);return o.total?o.results.filter(e=>e.type===`Web Scene`).map(e=>new kT({portalItem:e})):[]}_normalizeSSL(e){return e.replace(/^http:/i,`https:`).replace(`:7080`,`:7443`)}_readBasemap(e){if(e){let t=kT.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,n,r){let i;if(n){let a=r==null?null:r.signal;i=n.listings||n.notifications||n.userInvitations||n.tags||n.items||n.groups||n.comments||n.provisions||n.results||n.relatedItems||n,(e||t)&&(i=i.map(n=>{let r=Object.assign(e?e.fromJSON(n):n,t);return typeof r.load==`function`&&r.load(a),r}))}else i=[];return i}};e([N()],q.prototype,`access`,void 0),e([N()],q.prototype,`allSSL`,void 0),e([N()],q.prototype,`authMode`,void 0),e([N()],q.prototype,`authorizedCrossOriginDomains`,void 0),e([j(`authorizedCrossOriginDomains`)],q.prototype,`readAuthorizedCrossOriginDomains`,null),e([N()],q.prototype,`basemapGalleryGroupQuery`,void 0),e([N({json:{name:`3DBasemapGalleryGroupQuery`}})],q.prototype,`basemapGalleryGroupQuery3D`,void 0),e([N({json:{name:`g3DTilesGalleryGroupQuery`}})],q.prototype,`g3DTilesGalleryGroupQuery`,void 0),e([N({json:{name:`g3dTilesEnabled`}})],q.prototype,`g3dTilesEnabled`,void 0),e([N()],q.prototype,`bingKey`,void 0),e([N()],q.prototype,`canListApps`,void 0),e([N()],q.prototype,`canListData`,void 0),e([N()],q.prototype,`canListPreProvisionedItems`,void 0),e([N()],q.prototype,`canProvisionDirectPurchase`,void 0),e([N()],q.prototype,`canSearchPublic`,void 0),e([N()],q.prototype,`canShareBingPublic`,void 0),e([N()],q.prototype,`canSharePublic`,void 0),e([N()],q.prototype,`canSignInArcGIS`,void 0),e([N()],q.prototype,`canSignInIDP`,void 0),e([N()],q.prototype,`colorSetsGroupQuery`,void 0),e([N()],q.prototype,`commentsEnabled`,void 0),e([N({type:Date})],q.prototype,`created`,void 0),e([N()],q.prototype,`credential`,void 0),e([N()],q.prototype,`culture`,void 0),e([N()],q.prototype,`currentVersion`,void 0),e([N()],q.prototype,`customBaseUrl`,void 0),e([N()],q.prototype,`default3DBasemapQuery`,void 0),e([N()],q.prototype,`defaultBasemap`,void 0),e([j(`defaultBasemap`)],q.prototype,`readDefaultBasemap`,null),e([N()],q.prototype,`defaultDevBasemap`,void 0),e([j(`defaultDevBasemap`)],q.prototype,`readDefaultDevBasemap`,null),e([N({type:Rd})],q.prototype,`defaultExtent`,void 0),e([N()],q.prototype,`defaultVectorBasemap`,void 0),e([j(`defaultVectorBasemap`)],q.prototype,`readDefaultVectorBasemap`,null),e([N()],q.prototype,`description`,void 0),e([N()],q.prototype,`devBasemapGalleryGroupQuery`,void 0),e([N()],q.prototype,`eueiEnabled`,void 0),e([N({readOnly:!0})],q.prototype,`extraQuery`,null),e([N()],q.prototype,`featuredGroups`,void 0),e([N()],q.prototype,`featuredItemsGroupQuery`,void 0),e([N()],q.prototype,`galleryTemplatesGroupQuery`,void 0),e([N()],q.prototype,`layoutGroupQuery`,void 0),e([N()],q.prototype,`livingAtlasGroupQuery`,void 0),e([N({readOnly:!0})],q.prototype,`hasAPIKey`,null),e([N()],q.prototype,`hasCategorySchema`,void 0),e([N()],q.prototype,`hasClassificationSchema`,void 0),e([N()],q.prototype,`helpBase`,void 0),e([N()],q.prototype,`helperServices`,void 0),e([N()],q.prototype,`helpMap`,void 0),e([N()],q.prototype,`homePageFeaturedContent`,void 0),e([N()],q.prototype,`homePageFeaturedContentCount`,void 0),e([N()],q.prototype,`httpPort`,void 0),e([N()],q.prototype,`httpsPort`,void 0),e([N()],q.prototype,`id`,void 0),e([N()],q.prototype,`ipCntryCode`,void 0),e([N({readOnly:!0})],q.prototype,`isOrganization`,null),e([N()],q.prototype,`isPortal`,void 0),e([N()],q.prototype,`isReadOnly`,void 0),e([N({readOnly:!0})],q.prototype,`itemPageUrl`,null),e([N()],q.prototype,`layerTemplatesGroupQuery`,void 0),e([N()],q.prototype,`maxTokenExpirationMinutes`,void 0),e([N({type:Date})],q.prototype,`modified`,void 0),e([N()],q.prototype,`name`,void 0),e([N()],q.prototype,`portalHostname`,void 0),e([N()],q.prototype,`portalMode`,void 0),e([N()],q.prototype,`portalProperties`,void 0),e([N()],q.prototype,`region`,void 0),e([N()],q.prototype,`recycleBinEnabled`,void 0),e([N({readOnly:!0})],q.prototype,`restUrl`,null),e([N()],q.prototype,`rotatorPanels`,void 0),e([N()],q.prototype,`showHomePageDescription`,void 0),e([N()],q.prototype,`sourceJSON`,void 0),e([N()],q.prototype,`staticImagesUrl`,void 0),e([N({json:{name:`2DStylesGroupQuery`}})],q.prototype,`stylesGroupQuery2d`,void 0),e([N({json:{name:`stylesGroupQuery`}})],q.prototype,`stylesGroupQuery3d`,void 0),e([N()],q.prototype,`supportsHostedServices`,void 0),e([N()],q.prototype,`symbolSetsGroupQuery`,void 0),e([N()],q.prototype,`templatesGroupQuery`,void 0),e([N()],q.prototype,`thumbnail`,void 0),e([N({readOnly:!0})],q.prototype,`thumbnailUrl`,null),e([N()],q.prototype,`units`,void 0),e([N()],q.prototype,`url`,void 0),e([N()],q.prototype,`urlKey`,void 0),e([j(`urlKey`)],q.prototype,`readUrlKey`,null),e([N()],q.prototype,`user`,void 0),e([j(`user`)],q.prototype,`readUser`,null),e([N()],q.prototype,`use3dBasemaps`,void 0),e([N()],q.prototype,`useDefault3dBasemap`,void 0),e([N()],q.prototype,`useStandardizedQuery`,void 0),e([N()],q.prototype,`useVectorBasemaps`,void 0),e([N()],q.prototype,`vectorBasemapGalleryGroupQuery`,void 0),q=OT=e([P(`esri.portal.Portal`)],q);var jT=new FinalizationRegistry(e=>{e.remove()});function MT(e){let t=rc;return()=>{let n=e.deref();n&&t.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}var NT=class extends F{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:PT(e.path,e.portalItem)}:e}set path(e){e!=null&&ys(e)?E.getLogger(this).error(`portalitemresource:invalid-path`,`A portal item resource path must be relative`):this._set(`path`,e)}_castPath(e){return PT(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e=`json`,t){let n=this.cdnUrl;if(n==null)throw new D(`portal-item-resource:fetch`,`Portal item resource does not refer to a valid item or path`);return this.portalItem.portal.request(n,{responseType:e,query:{token:this.portalItem.apiKey,_ts:t?.cacheBust?Date.now():null},signal:t?.signal})}async update(e,t){let{addOrUpdateResources:n}=await R(async()=>{let{addOrUpdateResources:e}=await import(`./resourceUtils-CX-wX1sR.js`);return{addOrUpdateResources:e}},__vite__mapDeps([239,240]));return await n(this.portalItem,[{resource:this,content:e,compress:t?.compress,access:t?.access}],`update`,t),this}hasPath(){return this.path!=null}};function PT(e,t){return e==null?e:(e=e.replace(/^\/+/,``),t!=null&&ys(e)&&(e=hs(e,t.itemUrl)),e?.replace(/^\/+/,``).replace(/^(\.\/)?resources\//,``))}e([N()],NT.prototype,`portalItem`,void 0),e([N({type:String,value:null})],NT.prototype,`path`,null),e([Tr(`path`)],NT.prototype,`_castPath`,null),e([N({type:String,readOnly:!0})],NT.prototype,`url`,null),e([N({type:String,readOnly:!0})],NT.prototype,`cdnUrl`,null),e([N({type:String,readOnly:!0})],NT.prototype,`itemRelativeUrl`,null),NT=e([P(`esri.portal.PortalItemResource`)],NT);var FT=class extends F{constructor(e){super(e),this.created=null,this.rating=null}};e([N({type:Date})],FT.prototype,`created`,void 0),e([N()],FT.prototype,`rating`,void 0),FT=e([P(`esri.portal.PortalRating`)],FT);var IT,LT=new Set([`3DTiles Service`,`CSV`,`Feature Collection`,`Feature Service`,`Feed`,`GeoJson`,`Group Layer`,`Image Service`,`KML`,`Knowledge Graph Layer`,`Map Service`,`Media Layer`,`Scene Service`,`Stream Service`,`Video Service`,`Vector Tile Service`,`WCS`,`WFS`,`WMS`,`WMTS`]),aue=new Set([`KML`,`GeoJson`,`CSV`]),RT=IT=class extends Mo(pT){static from(e){return Nt(IT,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){let e=this.type,t=this.typeKeywords||[],n=e;return e===`Feature Service`||e===`Feature Collection`?n=t.includes(`Table`)?`Table`:t.includes(`Route Layer`)?`Route Layer`:t.includes(`Markup`)?`Markup`:`Feature Layer`:e===`Image Service`?n=t.includes(`Elevation 3D Layer`)?`Elevation Layer`:t.includes(`Tiled Imagery`)?`Tiled Imagery Layer`:`Imagery Layer`:e===`Scene Service`?n=`Scene Layer`:e===`Video Service`?n=`Video Layer`:e===`Scene Package`?n=`Scene Layer Package`:e===`Stream Service`?n=`Feature Layer`:e===`Geoprocessing Service`?n=t.includes(`Web Tool`)?`Tool`:`Geoprocessing Service`:e===`Geoenrichment Service`?n=`GeoEnrichment Service`:e===`Geocoding Service`?n=`Locator`:e===`Microsoft Powerpoint`?n=`Microsoft PowerPoint`:e===`GeoJson`?n=`GeoJSON`:e===`Globe Service`?n=`Globe Layer`:e===`Vector Tile Service`?n=`Tile Layer`:e===`netCDF`?n=`NetCDF`:e===`Map Service`?n=t.includes(`Spatiotemporal`)||!t.includes(`Hosted Service`)&&!t.includes(`Tiled`)||t.includes(`Relational`)?`Map Image Layer`:`Tile Layer`:e?.toLowerCase().includes(`add in`)?n=e.replaceAll(/(add in)/gi,`Add-In`):e===`datastore catalog service`?n=`Big Data File Share`:e===`Compact Tile Package`?n=`Tile Package (tpkx)`:e===`Raster function template`?n=`Raster Function Template`:e===`OGCFeatureServer`?n=`OGC Feature Layer`:e===`web mapping application`&&t.includes(`configurableApp`)?n=`Instant App`:e===`Insights Page`?n=`Insights Report`:e===`Excalibur Imagery Project`?n=`Excalibur Project`:e===`3DTiles Service`?n=`3D tiles layer`:e===`3DTiles Package`&&(n=`3D tiles package`),n}readExtent(e){return e&&e.length?new Rd(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){let e=this.type?.toLowerCase()||``,t=this.typeKeywords||[],n,r=!1,i=!1,a=!1,o=!1,s=!1,c=!1,l=!1,u=!1;return e.indexOf(`service`)>0||e===`feature collection`||e===`kml`||e===`wms`||e===`wmts`||e===`wfs`?(r=t.includes(`Hosted Service`),e===`feature service`||e===`feature collection`||e===`kml`||e===`wfs`?(i=t.includes(`Table`),a=t.includes(`Route Layer`),o=t.includes(`Markup`),s=t.includes(`Spatiotemporal`),c=t.includes(`UtilityNetwork`),n=s&&i?`spatiotemporaltable`:i?`table`:a?`routelayer`:o?`markup`:s?`spatiotemporal`:c?`utilitynetwork`:r?`featureshosted`:`features`):e===`map service`||e===`wms`||e===`wmts`?(s=t.includes(`Spatiotemporal`),l=t.includes(`Relational`),n=s||l?`mapimages`:r||t.includes(`Tiled`)||e===`wmts`?`maptiles`:`mapimages`):n=e===`scene service`?t.includes(`Line`)?`sceneweblayerline`:t.includes(`3DObject`)?`sceneweblayermultipatch`:t.includes(`Point`)?`sceneweblayerpoint`:t.includes(`IntegratedMesh`)?`sceneweblayermesh`:t.includes(`PointCloud`)?`sceneweblayerpointcloud`:t.includes(`Polygon`)?`sceneweblayerpolygon`:t.includes(`Building`)?`sceneweblayerbuilding`:t.includes(`Voxel`)?`sceneweblayervoxel`:`sceneweblayer`:e===`image service`?t.includes(`Elevation 3D Layer`)?`elevationlayer`:t.includes(`Tiled Imagery`)?`tiledimagerylayer`:`imagery`:e===`stream service`?`streamlayer`:e===`vector tile service`?`vectortile`:e===`datastore catalog service`?`datastorecollection`:e===`geocoding service`?`geocodeservice`:e===`video service`?t.includes(`Live Stream`)?`livestreamvideolayer`:`videolayer`:e===`geoprocessing service`?t.includes(`Web Tool`)?`tool`:`layers`:e===`geodata service`?`geodataservice`:e===`3dtiles service`?t.includes(`3DObject`)?`3dobjecttileslayer`:t.includes(`IntegratedMesh`)?`integratedmeshtileslayer`:t.includes(`GaussianSplat`)?`gaussiansplatlayer`:`3dtileslayer`:`layers`):e===`web map`||e===`cityengine web scene`?n=`maps`:e===`web scene`?n=t.includes(`ViewingMode-Local`)?`webscenelocal`:`websceneglobal`:e===`web mapping application`&&t.includes(`configurableApp`)?n=`instantapps`:e===`web mapping application`||e===`mobile application`||e===`application`||e===`operation view`||e===`desktop application`?n=`apps`:e===`map document`||e===`map package`||e===`published map`||e===`scene document`||e===`globe document`||e===`basemap package`||e===`mobile basemap package`||e===`mobile map package`||e===`project package`||e===`project template`||e===`pro map`||e===`layout`||e===`layer`&&t.includes(`ArcGIS Pro`)||e===`explorer map`&&t.indexOf(`Explorer Document`)?n=`mapsgray`:e===`service definition`||e===`shapefile`||e===`cad drawing`||e===`geojson`||e===`netcdf`||e===`administrative report`?n=`datafiles`:e===`360 vr experience`?n=`360vr`:e===`explorer add in`||e===`desktop add in`||e===`windows viewer add in`||e===`windows viewer configuration`?n=`appsgray`:e===`arcgis pro add in`||e===`arcgis pro configuration`?n=`addindesktop`:e===`pdf`?n=`pdf`:e===`microsoft word`?n=`word`:e===`microsoft excel`?n=`excel`:e===`microsoft powerpoint`?n=`ppt`:e===`rule package`||e===`file geodatabase`||e===`sqlite geodatabase`||e===`csv collection`||e===`kml collection`||e===`windows mobile package`||e===`map template`||e===`desktop application template`||e===`gml`||e===`arcpad package`||e===`code sample`||e===`document link`||e===`earth configuration`||e===`operations dashboard add in`||e===`rules package`||e===`workflow manager package`||e===`explorer map`&&t.includes(`Explorer Mapping Application`)||t.includes(`Document`)?n=`datafilesgray`:e===`network analysis service`||e===`geoprocessing service`||e===`geodata service`||e===`geometry service`||e===`geoprocessing package`||e===`locator package`||e===`geoprocessing sample`||e===`workflow manager service`?n=`toolsgray`:e===`layer`||e===`layer package`||e===`explorer layer`?n=`layersgray`:e===`analysis model`?n=`analysismodel`:e===`scene package`?n=`scenepackage`:e===`3dtiles package`?n=`3dtileslayerpackage`:e===`3dtiles service`?n=`3dtileslayer`:e===`mobile scene package`?n=`mobilescenepackage`:e===`tile package`||e===`compact tile package`?n=`tilepackage`:e===`task file`?n=`taskfile`:e===`report template`?n=`report-template`:e===`statistical data collection`?n=`statisticaldatacollection`:e===`insights workbook`?n=`workbook`:e===`insights model`?n=`insightsmodel`:e===`insights page`?n=`insightspage`:e===`insights theme`?n=`insightstheme`:e===`hub initiative`?n=`hubinitiative`:e===`hub page`?n=`hubpage`:e===`hub site application`?n=`hubsite`:e===`hub event`?n=`hubevent`:e===`hub project`?n=`hubproject`:e===`relational database connection`?n=`relationaldatabaseconnection`:e===`big data file share`?n=`datastorecollection`:e===`image collection`?n=`imagecollection`:e===`desktop style`?n=`desktopstyle`:e===`style`?n=t.includes(`Dictionary`)?`dictionarystyle`:`style`:e===`dashboard`?n=`dashboard`:e===`raster function template`?n=`rasterprocessingtemplate`:e===`vector tile package`?n=`vectortilepackage`:e===`ortho mapping project`?n=`orthomappingproject`:e===`ortho mapping template`?n=`orthomappingtemplate`:e===`solution`?n=`solutions`:e===`geopackage`?n=`geopackage`:e===`deep learning package`?n=`deeplearningpackage`:e===`real time analytic`?n=`realtimeanalytics`:e===`reality mapping project`?n=`realitymappingproject`:e===`big data analytic`?n=`bigdataanalytics`:e===`feed`?n=`feed`:e===`excalibur imagery project`?n=`excaliburimageryproject`:e===`notebook`?n=`notebook`:e===`storymap`?n=`storymap`:e===`survey123 add in`?n=`survey123addin`:e===`mission`?n=`mission`:e===`mission report`?n=`missionreport`:e===`mission template`?n=`missiontemplate`:e===`quickcapture project`?n=`quickcaptureproject`:e===`pro report`?n=`proreport`:e===`pro report template`?n=`proreporttemplate`:e===`urban model`?n=`urbanmodel`:e===`urban project`?n=`urbanproject`:e===`web experience`?n=`experiencebuilder`:e===`web experience template`?n=`webexperiencetemplate`:e===`experience builder widget`?n=`experiencebuilderwidget`:e===`experience builder widget package`?n=`experiencebuilderwidgetpackage`:e===`workflow`?n=`workflow`:e===`kernel gateway connection`?n=`kernelgatewayconnection`:e===`insights script`?n=`insightsscript`:e===`hub initiative template`?n=`hubinitiativetemplate`:e===`storymap theme`?n=`storymaptheme`:e===`knowledge graph`?n=`knowledgegraph`:e===`knowledge graph layer`?n=`knowledgegraphlayer`:e===`knowledge studio project`?n=`knowledgestudio`:e===`native application`?n=`nativeapp`:e===`native application installer`?n=`nativeappinstaller`:e===`web link chart`?n=`linkchart`:e===`knowledge graph web investigation`?n=`investigation`:e===`ogcfeatureserver`?n=`features`:e===`pro presentation`?n=`propresentation`:e===`pro project`?n=`proproject`:e===`insights workbook package`?n=`insightsworkbookpackage`:e===`apache parquet`?n=`apacheparquet`:e===`notebook code snippet library`?n=`notebookcodesnippets`:e===`suitability model`?n=`suitabilitymodel`:e===`esri classifier definition`?n=`classifierdefinition`:e===`esri classification schema`?n=`classificationschema`:e===`insights data engineering workbook`?n=`dataengineeringworkbook`:e===`insights data engineering model`?n=`dataengineeringmodel`:e===`deep learning studio project`?n=`deeplearningproject`:e===`discussion`?n=`discussion`:e===`allsource project`?n=`allsourceproject`:e===`api key`?n=`apikey`:e===`data pipeline`?n=`datapipelines`:e===`group layer`?(u=t.includes(`Map`),n=u?`layergroup2d`:`layergroup`):n=e===`media layer`?`onlinemedialayer`:e===`form`?t.includes(`Survey123`)?`survey`:`datafilesgray`:e===`csv`?`csv`:e===`image`?`image`:e===`xr experience`?`xrexperience`:`maps`,n?rl(`esri/images/portal/`+n+`16.png`):null}get isLayer(){return this.type!=null&&LT.has(this.type)}get itemCdnUrl(){return Sc(this.itemUrl)}get itemPageUrl(){let e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){let e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){let e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){let e=this.portal?.restUrl;if(!e)return null;let t=this.owner||this.portal?.user?.id;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){let t=this.portal??=q.getDefault(),n=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e==null?null:e.signal,query:{token:this.apiKey}}):{}).then(e=>{this.sourceJSON=e,this.read(e)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(e){let t={method:`post`,query:{}},n=e instanceof FT?e.rating:e;return n==null||isNaN(n)||typeof e!=`number`||(t.query.rating=n),this.portal?(await this.portal.request(this.itemUrl+`/addRating`,t),new FT({rating:n,created:new Date})):null}clone(){let e={access:this.access,accessInformation:this.accessInformation,applicationProxies:C(this.applicationProxies),avgRating:this.avgRating,categories:C(this.categories),classification:C(this.classification),created:C(this.created),culture:this.culture,description:this.description,extent:C(this.extent),groupCategories:C(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus=`loaded`);let t=new IT({sourceJSON:this.sourceJSON}).set(e);return t._set(`isOrgItem`,this.isOrgItem),t}createPostQuery(){let e=this.toJSON();for(let t of[`tags`,`typeKeywords`,`categories`])e[t]=e[t]?.join(`, `);for(let t of[`extent`,`classification`]){let n=e[t];n&&(e[t]=JSON.stringify(n))}return e}async deleteRating(){await this.portal.request(this.itemUrl+`/deleteRating`,{method:`post`})}fetchData(e=`json`,t){return this.portal.request(this.itemUrl+`/data`,{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){let t=await this.portal.request(this.itemUrl+`/rating`,{query:{token:this.apiKey},...e});return t.rating==null?null:(t.created=new Date(t.created),new FT(t))}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+`/relatedItems`,{query:{...e,token:this.apiKey},...t},IT)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??``,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,`appProxies`)&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{let t=e?.data,n={method:`post`};for(let e in n.query=this.createPostQuery(),n.query)n.query[e]===null&&(n.query[e]=``);return n.query.clearEmptyFields=!0,t!=null&&(typeof t==`string`?n.query.text=t:typeof t==`object`&&(n.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new D(`portal:item-does-not-exist`,`The item does not exist yet and cannot be updated`))}async copy(e){if(!this.id)throw new D(`portal:item-does-not-exist`,`The item does not exist yet`);await this.load();let{portal:t,itemUrl:n}=this;await t.signIn();let{copyResources:r,folder:i,tags:a,title:o}=e||{},s={method:`post`,query:{copyPrivateResources:r===`all`,folder:typeof i==`string`?i:i?.id,includeResources:!!r,tags:a?.join(`,`),title:o}},{itemId:c}=await t.request(`${n}/copy`,s);return new IT({id:c,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{let t=e.thumbnail,n=e.filename,r={method:`post`};if(typeof t==`string`)xs(t)?r.query={data:t}:r.query={url:ms(t)},n!=null&&(r.query.filename=n);else{let e=new FormData;n==null?e.append(`file`,t):e.append(`file`,t,n),r.body=e}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new D(`portal:item-does-not-exist`,`The item does not exist yet and cannot be updated`))}async fetchResources(e={},t){let{fetchResources:n}=await R(async()=>{let{fetchResources:e}=await import(`./resourceUtils-CX-wX1sR.js`);return{fetchResources:e}},__vite__mapDeps([239,240]));return n(this,e,t)}async addResource(e,t,n){let{addOrUpdateResources:r}=await R(async()=>{let{addOrUpdateResources:e}=await import(`./resourceUtils-CX-wX1sR.js`);return{addOrUpdateResources:e}},__vite__mapDeps([239,240]));return e.portalItem=this,await r(this,[{resource:e,content:t,compress:n?.compress,access:n?.access}],`add`,n),e}async removeResource(e,t){let{removeResource:n}=await R(async()=>{let{removeResource:e}=await import(`./resourceUtils-CX-wX1sR.js`);return{removeResource:e}},__vite__mapDeps([239,240]));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new D(`removeresource:portal-item-mismatch`,`The portal item associated with the provided resource does not match the item`);return n(this,e,t)}async removeAllResources(e){let{removeAllResources:t}=await R(async()=>{let{removeAllResources:e}=await import(`./resourceUtils-CX-wX1sR.js`);return{removeAllResources:e}},__vite__mapDeps([239,240]));return t(this,e)}resourceFromPath(e){return new NT({portalItem:this,path:e})}toJSON(){let e=this.extent,t={accessInformation:this.accessInformation,categories:C(this.categories),classification:C(this.classification),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};return Re(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw Error(`JSON object is already hydrated`);return new IT({sourceJSON:e})}_getPostQuery(){let e=this.toJSON();for(let t in e)t===`tags`&&e[t]!==null&&(e[t]=e[t].join(`, `)),t===`typeKeywords`&&e[t]!==null&&(e[t]=e[t].join(`, `)),t===`extent`&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};e([N({type:[`private`,`shared`,`org`,`public`]})],RT.prototype,`access`,void 0),e([N()],RT.prototype,`accessInformation`,void 0),e([N({type:String})],RT.prototype,`apiKey`,void 0),e([N({json:{read:{source:`appProxies`}}})],RT.prototype,`applicationProxies`,void 0),e([N()],RT.prototype,`avgRating`,void 0),e([N()],RT.prototype,`categories`,void 0),e([N()],RT.prototype,`classification`,void 0),e([N({type:Date})],RT.prototype,`created`,void 0),e([N()],RT.prototype,`culture`,void 0),e([N()],RT.prototype,`description`,void 0),e([N({readOnly:!0})],RT.prototype,`displayName`,null),e([N({type:Rd})],RT.prototype,`extent`,void 0),e([j(`extent`)],RT.prototype,`readExtent`,null),e([N()],RT.prototype,`groupCategories`,void 0),e([N({readOnly:!0})],RT.prototype,`iconUrl`,null),e([N()],RT.prototype,`id`,void 0),e([N({readOnly:!0})],RT.prototype,`isLayer`,null),e([N({type:Boolean,readOnly:!0})],RT.prototype,`isOrgItem`,void 0),e([N()],RT.prototype,`itemControl`,void 0),e([N({readOnly:!0})],RT.prototype,`itemPageUrl`,null),e([N({readOnly:!0})],RT.prototype,`itemUrl`,null),e([N()],RT.prototype,`licenseInfo`,void 0),e([N({type:Date})],RT.prototype,`modified`,void 0),e([N()],RT.prototype,`name`,void 0),e([N()],RT.prototype,`numComments`,void 0),e([N()],RT.prototype,`numRatings`,void 0),e([N()],RT.prototype,`numViews`,void 0),e([N()],RT.prototype,`owner`,void 0),e([N()],RT.prototype,`ownerFolder`,void 0),e([N({type:q})],RT.prototype,`portal`,void 0),e([N()],RT.prototype,`screenshots`,void 0),e([N()],RT.prototype,`size`,void 0),e([N()],RT.prototype,`snippet`,void 0),e([N()],RT.prototype,`sourceJSON`,void 0),e([N({type:String})],RT.prototype,`sourceUrl`,void 0),e([N({type:String})],RT.prototype,`spatialReference`,void 0),e([N()],RT.prototype,`tags`,void 0),e([N()],RT.prototype,`thumbnail`,void 0),e([N({readOnly:!0})],RT.prototype,`thumbnailUrl`,null),e([N()],RT.prototype,`title`,void 0),e([N()],RT.prototype,`type`,void 0),e([N()],RT.prototype,`typeKeywords`,void 0),e([N({type:String,json:{read(e,t){if(aue.has(t.type)){let t=this.portal?.restUrl;e||=t&&this.id?`${t}/content/items/${this.id}/data`:null}return e}}})],RT.prototype,`url`,void 0),e([N({readOnly:!0})],RT.prototype,`userItemUrl`,null),RT=IT=e([P(`esri.portal.PortalItem`)],RT);async function oue(e){if(!e)return;let t=e.includes(`-vector`)?e.slice(0,e.indexOf(`-vector`)):e.includes(`-3d`)?e.slice(0,e.indexOf(`-3d`)):e,n=await Yb(`esri/t9n/basemaps`);return n[e]||n[t]}var zT={satellite:{id:`satellite`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/satellite.jpg`)},baseMapLayers:[{id:`satellite-base-layer`,url:`//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer`,layerType:`ArcGISTiledMapServiceLayer`,title:`World Imagery`,showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:`hybrid`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/hybrid.jpg`)},baseMapLayers:[{id:`hybrid-base-layer`,url:`//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer`,layerType:`ArcGISTiledMapServiceLayer`,title:`World Imagery`,showLegend:!1,visibility:!0,opacity:1},{id:`hybrid-reference-layer`,styleUrl:`https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Hybrid Reference Layer`,isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:`terrain`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/terrain.jpg`)},baseMapLayers:[{id:`terrain-hillshade`,url:`https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer`,layerType:`ArcGISTiledMapServiceLayer`,title:`World Hillshade`,showLegend:!1},{id:`terrain-base`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Terrain Base`},{id:`terrain-reference`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Reference Reference`,isReference:!0}]},oceans:{id:`oceans`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/oceans.jpg`)},baseMapLayers:[{id:`oceans-base-layer`,url:`//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer`,layerType:`ArcGISTiledMapServiceLayer`,title:`World Ocean Base`,showLegend:!1,visibility:!0,opacity:1},{id:`oceans-reference-layer`,styleUrl:`https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Ocean Reference`,isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:`osm`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/osm.jpg`)},baseMapLayers:[{id:`osm-base-layer`,layerType:`OpenStreetMap`,title:`Open Street Map`,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:`dark-gray-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/dark-gray-vector.jpg`)},baseMapLayers:[{id:`dark-gray-base-layer`,styleUrl:`https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Dark Gray Base`,visibility:!0,opacity:1},{id:`dark-gray-reference-layer`,styleUrl:`https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Dark Gray Reference`,isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this[`dark-gray-vector`],id:`dark-gray`}},"gray-vector":{id:`gray-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/gray-vector.jpg`)},baseMapLayers:[{id:`gray-base-layer`,styleUrl:`https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Light Gray Base`,visibility:!0,opacity:1},{id:`gray-reference-layer`,styleUrl:`https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Light Gray Reference`,isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this[`gray-vector`],id:`gray`}},"streets-vector":{id:`streets-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/streets-vector.jpg`)},baseMapLayers:[{id:`streets-vector-base-layer`,styleUrl:`//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Streets`,visibility:!0,opacity:1}]},get streets(){return{...this[`streets-vector`],id:`streets`}},"topo-vector":{id:`topo-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/topo-vector.jpg`)},baseMapLayers:[{id:`world-hillshade-layer`,url:`//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer`,layerType:`ArcGISTiledMapServiceLayer`,title:`World Hillshade`,showLegend:!1,visibility:!0,opacity:1},{id:`topo-vector-base-layer`,styleUrl:`//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Topo`,visibility:!0,opacity:1}]},get topo(){return{...this[`topo-vector`],id:`topo`}},"streets-night-vector":{id:`streets-night-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/streets-night.jpg`)},baseMapLayers:[{id:`streets-night-vector-base-layer`,styleUrl:`//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Streets Night`,visibility:!0,opacity:1}]},"streets-relief-vector":{id:`streets-relief-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/streets-relief.jpg`)},baseMapLayers:[{id:`world-hillshade-layer`,url:`//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer`,layerType:`ArcGISTiledMapServiceLayer`,title:`World Hillshade`,showLegend:!1,visibility:!0,opacity:1},{id:`streets-relief-vector-base-layer`,styleUrl:`//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json`,title:`World Streets Relief`,layerType:`VectorTileLayer`,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:`streets-navigation-vector`,classic:!0,get thumbnailUrl(){return rl(`esri/images/basemap/streets-navigation.jpg`)},baseMapLayers:[{id:`streets-navigation-vector-base-layer`,styleUrl:`//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`World Streets Navigation`,visibility:!0,opacity:1}]},"topo-3d":{id:`topo-3d`,is3d:!0,get thumbnailUrl(){return rl(`esri/images/basemap/topo-3d.png`)},baseMapLayers:[{id:`topo-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Topographic`,visibility:!0,opacity:1},{id:`topo-3d-trees`,title:`Trees`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer`,itemId:`9d3d89d42cfe4e2c9d108a2f0d518406`,layerType:`ArcGISSceneServiceLayer`},{id:`topo-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer`,itemId:`a84404ad39c64c328d0596e361ec459b`,layerType:`ArcGISSceneServiceLayer`},{id:`topo-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]},"navigation-3d":{id:`navigation-3d`,is3d:!0,get thumbnailUrl(){return rl(`esri/images/basemap/navigation-3d.jpg`)},baseMapLayers:[{id:`navigation-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Navigation`,visibility:!0,opacity:1},{id:`navigation-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer`,itemId:`a84404ad39c64c328d0596e361ec459b`,layerType:`ArcGISSceneServiceLayer`},{id:`navigation-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]},"streets-3d":{id:`streets-3d`,is3d:!0,get thumbnailUrl(){return rl(`esri/images/basemap/streets-3d.png`)},baseMapLayers:[{id:`streets-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Streets`,visibility:!0,opacity:1},{id:`streets-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer`,itemId:`a84404ad39c64c328d0596e361ec459b`,layerType:`ArcGISSceneServiceLayer`},{id:`streets-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]},"osm-3d":{id:`osm-3d`,is3d:!0,get thumbnailUrl(){return rl(`esri/images/basemap/osm-3d.png`)},baseMapLayers:[{id:`osm-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`OpenStreetMap`,visibility:!0,opacity:1},{id:`osm-3d-trees`,title:`Trees`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer`,itemId:`9d3d89d42cfe4e2c9d108a2f0d518406`,layerType:`ArcGISSceneServiceLayer`},{id:`osm-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer`,itemId:`a84404ad39c64c328d0596e361ec459b`,layerType:`ArcGISSceneServiceLayer`},{id:`osm-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer`,itemId:`cd33b09dde0a419c986ca1a78a5fc06d`,layerType:`ArcGISSceneServiceLayer`}]},"gray-3d":{id:`gray-3d`,is3d:!0,get thumbnailUrl(){return rl(`esri/images/basemap/gray-3d.png`)},baseMapLayers:[{id:`gray-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Streets`,visibility:!0,opacity:1},{id:`gray-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer`,itemId:`a84404ad39c64c328d0596e361ec459b`,layerType:`ArcGISSceneServiceLayer`},{id:`gray-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]},"navigation-dark-3d":{id:`navigation-dark-3d`,itemId:`5a1365328b4943f09a54cf5fd1205707`,is3d:!0,baseMapLayers:[{id:`navigation-dark-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`Navigation Dark`},{id:`navigation-dark-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0`,itemId:`f364b70b012a4da5a4b5921e193eac4a`,layerType:`ArcGISSceneServiceLayer`},{id:`navigation-dark-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]},"streets-dark-3d":{id:`streets-dark-3d`,itemId:`8a4efa2c20484ec9b4557895e65736ff`,is3d:!0,baseMapLayers:[{id:`streets-dark-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`OpenStreetMap Streets Night (for 3D)`},{id:`streets-dark-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer`,itemId:`f364b70b012a4da5a4b5921e193eac4a`,layerType:`ArcGISSceneServiceLayer`},{id:`streets-dark-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]},"dark-gray-3d":{id:`dark-gray-3d`,itemId:`a8b7322a5fe94002bb0f5e0eeb0c5c18`,is3d:!0,baseMapLayers:[{id:`dark-gray-3d-base-layer`,styleUrl:`https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json`,layerType:`VectorTileLayer`,title:`OpenStreetMap Dark Gray Canvas (for 3D)`},{id:`dark-gray-3d-places-and-labels`,title:`Places and Labels`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0`,itemId:`f364b70b012a4da5a4b5921e193eac4a`,layerType:`ArcGISSceneServiceLayer`},{id:`dark-gray-3d-buildings`,title:`Buildings`,url:`https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer`,itemId:`b8fec5af7dfe4866b1b8ac2d2800f282`,layerType:`ArcGISSceneServiceLayer`}]}},BT=class extends F{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl=`https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2`,this.worldview=null}get languageParameter(){let e=this.language,t=e===`local`||e===`global`?e:Xb(e??vg())??`global`;return t=t===`no`?`nb`:t,t}};e([N()],BT.prototype,`apiKey`,void 0),e([N()],BT.prototype,`id`,void 0),e([N()],BT.prototype,`language`,void 0),e([N()],BT.prototype,`places`,void 0),e([N()],BT.prototype,`serviceUrl`,void 0),e([N()],BT.prototype,`worldview`,void 0),BT=e([P(`esri.support.BasemapStyle`)],BT);var sue=BT,VT=Symbol(`BasemapInstance`);function cue(e){return typeof e==`object`&&!!e&&VT in e}var lue=0,HT=t=>{let n=t,r=class extends n{constructor(...e){super(...e),Object.defineProperty(this,`uid`,{writable:!1,configurable:!1,value:Date.now().toString(16)+`-object-`+ lue++})}};return r=e([hr(`esri.core.Identifiable`)],r),r};HT(class{});async function uue(e){let t=`portalItem`in e?e:{portalItem:e},{fromItem:n}=await R(async()=>{let{fromItem:e}=await import(`./portalLayers-B8F7N-ed.js`);return{fromItem:e}},__vite__mapDeps([241,242,243,244,245,246]));try{return await n(t)}catch(e){let n=t?.portalItem,r=n?.id||`unset`,i=n?.portal?.url||nt.portalUrl;throw E.getLogger(`esri.layers.support.fromPortalItem`).error(`#fromPortalItem()`,`Failed to create layer from portal item (portal: '`+i+`', id: '`+r+`')`,e),e}}var UT={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function WT(e,t,n,r=Dg){let i=new p_(Ub(r)),a=Sb.fromJSDate(e,{zone:i}),o=n===`decades`||n===`centuries`?`year`:qT(n);return n===`decades`&&(t*=10),n===`centuries`&&(t*=100),a.plus({[o]:t}).toJSDate()}function due(e,t,n=`milliseconds`){let r=e.getTime(),i=KT(t,n,`milliseconds`);return new Date(r+i)}function GT(e,t,n=Dg){let r=new p_(Ub(n)),i=Sb.fromJSDate(e,{zone:r});if(t===`decades`||t===`centuries`){let e=i.startOf(`year`),{year:n}=e,r=n-n%(t===`decades`?10:100);return e.set({year:r}).toJSDate()}let a=qT(t);return i.startOf(a).toJSDate()}function KT(e,t,n){return e===0?0:e*UT[t]/UT[n]}function fue(e,t){return e&&t?e.intersection(t):e||t}function qT(e){switch(e){case`milliseconds`:return`millisecond`;case`seconds`:return`second`;case`minutes`:return`minute`;case`hours`:return`hour`;case`days`:return`day`;case`weeks`:return`week`;case`months`:return`month`;case`years`:return`year`}}var JT,YT=class extends L{static{JT=this}static get allTime(){return XT}static get empty(){return pue}static fromArray(e){return new JT({start:e[0]==null?e[0]:new Date(e[0]),end:e[1]==null?e[1]:new Date(e[1])})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end==null?null:new Date(t.end)}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(JT.allTime)}get isEmpty(){return this.equals(JT.empty)}readStart(e,t){return t.start==null?null:new Date(t.start)}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new JT({end:this.end,start:this.start})}equals(e){if(!e)return!1;let t=this.start?.getTime()??this.start,n=this.end?.getTime()??this.end,r=e.start?.getTime()??e.start,i=e.end?.getTime()??e.end;return t===r&&n===i}expandTo(e,t=Dg){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&=GT(n,e,t);let r=this.end;if(r){let n=GT(r,e,t);r=r.getTime()===n.getTime()?n:WT(n,1,e,t)}return new JT({start:n,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return JT.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();let t=this.start?.getTime()??-1/0,n=this.end?.getTime()??1/0,r=e.start?.getTime()??-1/0,i=e.end?.getTime()??1/0,a,o;return r>=t&&r<=n?a=r:t>=r&&t<=i&&(a=t),n>=r&&n<=i?o=n:i>=t&&i<=n&&(o=i),a==null||o==null||isNaN(a)||isNaN(o)?JT.empty:new JT({start:a===-1/0?null:new Date(a),end:o===1/0?null:new Date(o)})}offset(e,t,n=Dg){if(this.isEmpty||this.isAllTime)return this.clone();let r=new JT,{start:i,end:a}=this;return i!=null&&(r.start=WT(i,e,t,n)),a!=null&&(r.end=WT(a,e,t,n)),r}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return XT.clone();let t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new JT({start:t,end:n})}};e([N({type:Date,json:{write:{allowNull:!0}}})],YT.prototype,`end`,void 0),e([j(`end`)],YT.prototype,`readEnd`,null),e([M(`end`)],YT.prototype,`writeEnd`,null),e([N({readOnly:!0,json:{read:!1}})],YT.prototype,`isAllTime`,null),e([N({readOnly:!0,json:{read:!1}})],YT.prototype,`isEmpty`,null),e([N({type:Date,json:{write:{allowNull:!0}}})],YT.prototype,`start`,void 0),e([j(`start`)],YT.prototype,`readStart`,null),e([M(`start`)],YT.prototype,`writeStart`,null),YT=JT=e([P(`esri.time.TimeExtent`)],YT);var XT=new YT,pue=new YT({start:void 0,end:void 0}),mue=0,ZT=class extends wh(HT(pT)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Rd(-180,-90,180,90,H.WGS84),this.id=Date.now().toString(16)+`-layer-`+ mue++,this.legendEnabled=!0,this.listMode=`show`,this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=H.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){let t=typeof e==`string`?{url:e}:e;return(await R(async()=>{let{fromUrl:e}=await import(`./arcgisLayers-C2vyqp3D.js`);return{fromUrl:e}},__vite__mapDeps([247,243,244,245]))).fromUrl(t)}static fromPortalItem(e){return uue(e)}initialize(){this.when().catch(e=>{ji(e)||E.getLogger(this).error(`#load()`,`Failed to load layer (title: '${this.title??`no title`}', id: '${this.id??`no id`}')`,{error:e})})}destroy(){let{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){let{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Qo(this.url)}createLayerView(e,t){return Promise.reject(new D(`layer:create-layer-view`,`Layer does not support creating a layer view`))}async fetchAttributionData(){let e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Qc(e,{query:{f:`json`},responseType:`json`})).data;throw new D(`layer:no-attribution-data`,`Layer does not have attribution data`)}};e([N({type:String})],ZT.prototype,`attributionDataUrl`,void 0),e([N({readOnly:!0})],ZT.prototype,`effectiveVisible`,null),e([N({type:Rd})],ZT.prototype,`fullExtent`,void 0),e([N({readOnly:!0})],ZT.prototype,`hasAttributionData`,null),e([N({type:String,clonable:!1})],ZT.prototype,`id`,void 0),e([N({type:Boolean,nonNullable:!0})],ZT.prototype,`legendEnabled`,void 0),e([N({type:[`show`,`hide`,`hide-children`]})],ZT.prototype,`listMode`,void 0),e([N({type:Number,range:{min:0,max:1},nonNullable:!0})],ZT.prototype,`opacity`,void 0),e([N({clonable:!1})],ZT.prototype,`parent`,void 0),e([N({readOnly:!0})],ZT.prototype,`parsedUrl`,null),e([N({type:Boolean,readOnly:!0})],ZT.prototype,`persistenceEnabled`,void 0),e([N({type:Boolean})],ZT.prototype,`popupEnabled`,void 0),e([N({type:Boolean})],ZT.prototype,`attributionVisible`,void 0),e([N({type:H})],ZT.prototype,`spatialReference`,void 0),e([N({type:String})],ZT.prototype,`title`,void 0),e([N({readOnly:!0,json:{read:!1}})],ZT.prototype,`type`,void 0),e([N()],ZT.prototype,`url`,void 0),e([N({type:YT})],ZT.prototype,`visibilityTimeExtent`,void 0),e([N({type:Boolean,nonNullable:!0})],ZT.prototype,`visible`,void 0),ZT=e([P(`esri.layers.Layer`)],ZT);var QT=new WeakMap;function $T(e){return!e.destroyed&&(QT.has(e)||e.addHandles([G(()=>{let{parent:t}=e;return!!(t&&t instanceof ZT)&&(t.type===`catalog-dynamic-group`||$T(t))},t=>QT.set(e,t),Jh),Yt(()=>QT.delete(e))]),QT.get(e))}function eE(e){return typeof e==`object`&&!!e&&`type`in e&&e.type===`feature`}function hue(e){return typeof e==`object`&&!!e&&`type`in e&&e.type===`graphics`}function gue(e){return typeof e==`object`&&!!e&&`type`in e&&e.type===`map-image`}function _ue(e){return typeof e==`object`&&!!e&&`type`in e&&e.type===`knowledge-graph`&&`layers`in e}function vue(e){return typeof e==`object`&&!!e&&`type`in e&&e.type===`knowledge-graph-sublayer`}function tE(e){return typeof e==`object`&&!!e&&`type`in e&&e.type===`subtype-group`&&`sublayers`in e}function nE(e){return e?.type===`subtype-sublayer`}var yue={Point:`SceneLayer`,"3DObject":`SceneLayer`,IntegratedMesh:`IntegratedMeshLayer`,PointCloud:`PointCloudLayer`,Building:`BuildingSceneLayer`};function rE(e){let t=e?.type;return t===`building-scene`||t===`integrated-mesh`||t===`point-cloud`||t===`scene`}function bue(e){return e.type===`integrated-mesh`||e.type===`integrated-mesh-3dtiles`}function iE(e){return e?.type===`feature`&&!e.url&&e.source?.type===`memory`}function xue(e){let t=e?.type;return(t===`feature`||t===`subtype-group`||t===`oriented-imagery`)&&e?.source?.type===`feature-layer`}function Sue(e){return e?.type===`feature`&&e.source?.type===`feature-layer`}function Cue(e){return eE(e)&&Sue(e)}async function aE(e,t){let n=rc?.findServerInfo(e);if(n?.currentVersion!=null)return n.owningSystemUrl||null;let r=e.toLowerCase().indexOf(`/rest/services`);if(r===-1)return null;let i=`${e.slice(0,r)}/rest/info`,a=t==null?null:t.signal,{data:o}=await Qc(i,{query:{f:`json`},responseType:`json`,signal:a});return o?.owningSystemUrl||null}function oE(e){if(!(`capabilities`in e))return!1;switch(e.type){case`catalog`:case`catalog-footprint`:case`csv`:case`feature`:case`geojson`:case`imagery`:case`knowledge-graph-sublayer`:case`ogc-feature`:case`oriented-imagery`:case`scene`:case`sublayer`:case`subtype-group`:case`subtype-sublayer`:case`wfs`:return!0;default:return!1}}function sE(e){return oE(e)?`effectiveCapabilities`in e?e.effectiveCapabilities:e.capabilities:null}function wue(e){if(!(`editingEnabled`in e))return!1;switch(e.type){case`csv`:case`feature`:case`geojson`:case`oriented-imagery`:case`scene`:case`subtype-group`:case`subtype-sublayer`:case`knowledge-graph-sublayer`:return!0;default:return!1}}function cE(e){return!!wue(e)&&(`effectiveEditingEnabled`in e?e.effectiveEditingEnabled:e.editingEnabled)}function Tue(e){let t=new W;for(let n of e.allLayers.concat(e.allTables))n.type===`csv`||$T(n)||(`charts`in n&&t.push(n),n.type===`subtype-group`&&t.push(...n.sublayers));return t}function lE(e,t){return null}function uE(e){return null}function dE(e){return!e||e.type===`Feature Service`&&!e.sourceUrl}function fE(e,t){if(!t||!dE(e))return;let n=lE(e.url);n&&(e.url=n)}var Eue=new Set([`bing-maps`,`imagery`,`imagery-tile`,`map-image`,`open-street-map`,`tile`,`unknown`,`unsupported`,`vector-tile`,`web-tile`,`wcs`,`wms`,`wmts`]),Due=new Set([`integrated-mesh-3dtiles`]),pE=new Set(`catalog.csv.feature.geo-rss.geojson.group.imagery.imagery-tile.kml.knowledge-graph.map-image.map-notes.media.ogc-feature.oriented-imagery.parquet.route.stream.subtype-group.tile.unknown.unsupported.vector-tile.video.web-tile.wcs.wfs.wms.wmts`.split(`.`)),Oue=new Set([...pE,`link-chart`]);function kue(e){switch(e.layerContainerType){case`basemap-base-layers`:return Eue;case`basemap-ground-layers`:return Due;case`operational-layers`:return e.origin===`link-chart`?Oue:pE;default:return null}}function Aue(e,t){if(t.restrictedWebMapWriting){let n=kue(t);return n==null||n.has(e.type)&&!iE(e)}return!0}function jue(e,t){if(t)if(iE(e)){let n=Ye(`featureCollection.layers`,t),r=n?.[0]?.layerDefinition;r&&mE(e,r)}else e.type!==`group`&&mE(e,t)}function mE(e,t){`maxScale`in e&&(t.maxScale=lr(e.maxScale)??void 0),`minScale`in e&&(t.minScale=lr(e.minScale)??void 0)}function Mue(e,t){if(jue(e,t),t&&(t.id=e.id,`blendMode`in e&&(t.blendMode=e.blendMode,t.blendMode===`normal`&&delete t.blendMode),t.opacity=lr(e.opacity)??void 0,t.title=e.title||`Layer`,t.visibility=e.visible,`legendEnabled`in e&&e.type!==`wmts`))if(iE(e)){let n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function hE(e,t,n){if(!e.persistenceEnabled)return null;if(!(`write`in e)||!e.write)return n?.messages&&n.messages.push(new D(`layer:unsupported`,`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(iE(e)&&!e.isTable)t=e.resourceInfo;else if(Aue(e,n)){let t={};return e.write(t,n)?t:null}return t!=null&&Mue(e,t=C(t)),t}var gE,_E,vE=class extends Mo(pT){static{gE=VT}static{_E=this}constructor(e){super(e),this[gE]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title=`Basemap`,this.type=`Basemap`,this.id=Date.now().toString(16)+`-basemap-`+ _E.idCounter++,this.baseLayers=new W,this.referenceLayers=new W,this.groundLayers=new W;let t=e=>{let{parent:t}=e;t&&t!==this&&`remove`in t&&t.remove?.(e),e.parent=this,e.type!==`elevation`&&e.type!==`integrated-mesh-3dtiles`||E.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},n=e=>{let{parent:t}=e;t&&t!==this&&`remove`in t&&t.remove?.(e),e.parent=this},r=e=>{let t=e.item;t.parent===this?(E.getLogger(this).error(`Layer '${t.title}, id:${t.id}' of type '${t.type}' already a ground layer, second add will be ignored.`),e.preventDefault()):t.type!==`integrated-mesh-3dtiles`&&(E.getLogger(this).error(`Layer '${t.title}, id:${t.id}' of type '${t.type}' is not supported as a ground layer and will therefore be ignored.`),e.preventDefault())},i=e=>{e.parent=null},a=e=>{e.parent===this&&(e.parent=null)};this.addHandles([this.baseLayers.on(`after-add`,e=>t(e.item)),this.baseLayers.on(`after-remove`,e=>i(e.item)),this.referenceLayers.on(`after-add`,e=>t(e.item)),this.referenceLayers.on(`after-remove`,e=>i(e.item)),this.groundLayers.on(`before-add`,r),this.groundLayers.on(`after-add`,e=>n(e.item)),this.groundLayers.on(`after-remove`,e=>a(e.item))])}static{this.idCounter=0}initialize(){this.when().catch(e=>{E.getLogger(this).error(`#load()`,`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){let e=this.baseLayers.toArray();for(let t of e)t.destroyed||t.destroy();let t=this.groundLayers.toArray();for(let e of t)e.destroyed||e.destroy();let n=this.referenceLayers.toArray();for(let e of n)e.destroyed||e.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=zr(this.portalItem)}removeChildLayer(e){for(let t of[this.baseLayers,this.referenceLayers,this.groundLayers])t.remove(e)}normalizeCtorArgs(e){return e&&`resourceInfo`in e&&(this._set(`resourceInfo`,e.resourceInfo),delete(e={...e}).resourceInfo),e}get baseLayers(){return this._get(`baseLayers`)}set baseLayers(e){this._set(`baseLayers`,sT(e,this._get(`baseLayers`)))}_writeBaseLayers(e,t,n){let r=[];e?(n={...n,layerContainerType:`basemap-base-layers`},this.baseLayers.forEach(e=>{let t=hE(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);t!=null&&r.push(t)}),this.referenceLayers.forEach(e=>{let t=hE(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);t!=null&&(e.type!==`scene`&&(t.isReference=!0),r.push(t))}),t.baseMapLayers=r):t.baseMapLayers=r}set groundLayers(e){this._set(`groundLayers`,sT(e,this._get(`groundLayers`)))}_writeGroundLayers(e,t,n){let r=[];e&&(n={...n,layerContainerType:`basemap-ground-layers`},this.groundLayers.forEach(e=>{let t=hE(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);t!=null&&r.push(t)}),r.length>0&&(t.groundLayers=r))}get loaded(){return super.loaded}get referenceLayers(){return this._get(`referenceLayers`)}set referenceLayers(e){this._set(`referenceLayers`,sT(e,this._get(`referenceLayers`)))}writeTitle(e,t){t.title=e||`Basemap`}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return hT(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){let e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(e=>Be(e)?e.clone():e),groundLayers:this.groundLayers.map(e=>Be(e)?e.clone():e),referenceLayers:this.referenceLayers.map(e=>Be(e)?e.clone():e)};return this.loaded&&(e.loadStatus=`loaded`),new _E({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set(`resourceInfo`,{data:e,context:t}),super.read(e,t)}write(e,t){return e||={},t?.origin||(t={origin:`web-map`,...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(e=>{let t=C(e);return t.url&&Ts(t.url)&&(t.url=`https:${t.url}`),t.templateUrl&&Ts(t.templateUrl)&&(t.templateUrl=`https:${t.templateUrl}`),t})),e}async _loadFromSource(e){let{resourceInfo:t,portalItem:n,style:r}=this;Ci(e);let i=[];if(t){let n=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){let e=t.data.id;i.push(oue(e).then(e=>{e&&this.read({title:e},t.context)}))}}else n?i.push(this._loadFromItem(n,e)):r&&i.push(this._loadFromStylesService(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,n){let r=this.resourceInfo?.context,i=this.portalItem?.portal||r?.portal||null,a=Pue[r?.origin||``]??`web-map`,{populateOperationalLayers:o}=await R(async()=>{let{populateOperationalLayers:e}=await import(`./layersCreator-B_NbEqg2.js`);return{populateOperationalLayers:e}},__vite__mapDeps([248,242,243,244,249,245,246])),s=[];if(Ci(n),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){let n={context:{...r,origin:a,url:t,portal:i,layerContainerType:`basemap-base-layers`},defaultLayerType:`DefaultTileLayer`},c=e=>a===`web-scene`&&e.layerType===`ArcGISSceneServiceLayer`||e.isReference,l=o(this.baseLayers,e.baseMapLayers.filter(e=>!c(e)),n);s.push(l);let u=o(this.referenceLayers,e.baseMapLayers.filter(c),n);s.push(u)}if(e.groundLayers&&Array.isArray(e.groundLayers)){let n={context:{...r,origin:a,url:t,portal:i,layerContainerType:`basemap-ground-layers`},defaultLayerType:`IntegratedMesh3DTilesLayer`},c=o(this.groundLayers,e.groundLayers,n);s.push(c)}await Promise.allSettled(s)}async _loadFromItem(e,t){let n=await e.load(t),r=await n.fetchData(`json`,t),i=Qo(e.itemUrl??``);return this._set(`resourceInfo`,{data:r.baseMap??{},context:{origin:Nue[e.type||``]??`web-map`,portal:e.portal||q.getDefault(),url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:`portal-item`,portal:e.portal||q.getDefault(),url:i}),this._loadLayersFromJSON(this.resourceInfo.data,i,t)}async _loadFromStylesService(e,t){let n=e.serviceUrl.endsWith(`/webmaps`)?e.serviceUrl.slice(0,-8):e.serviceUrl,r=`${n}/styles/${e.id}/self`,i=`${n}/webmaps/${e.id}`,a=e.apiKey??nt.apiKeys.basemapStyles,[o,s]=await Promise.all([(await Qc(r,{query:{token:a},signal:t?.signal})).data,(await Qc(i,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:a},signal:t?.signal})).data]);this.thumbnailUrl??=o.thumbnailUrl;let c=Qo(i);if(this._set(`resourceInfo`,{data:s.baseMap??{},context:{origin:`web-map`,url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,t),a)for(let e of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])`apiKey`in e&&(e.apiKey=a)}static fromId(e){let t=zT[e];return t?t.itemId?new _E({portalItem:{id:t.itemId,portal:{url:`https://www.arcgis.com`}}}):_E.fromJSON(t,t.is3d?{origin:`web-scene`,portal:new q({url:`https://www.arcgis.com`})}:{origin:`web-map`}):null}};e([N({json:{read:!1,write:{ignoreOrigin:!0,target:`baseMapLayers`,writer(e,t,n,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:W}},writer(e,t,n,r){this._writeBaseLayers(e,t,r)}}}}}})],vE.prototype,`baseLayers`,null),e([N({json:{read:!1,write:{ignoreOrigin:!0,target:`groundLayers`,writer(e,t,n,r){this._writeGroundLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:W}},writer(e,t,n,r){this._writeGroundLayers(e,t,r)}}}}}})],vE.prototype,`groundLayers`,null),e([N({type:String,json:{origins:{"web-scene":{write:!0}}}})],vE.prototype,`id`,void 0),e([N({type:RT})],vE.prototype,`portalItem`,void 0),e([N()],vE.prototype,`referenceLayers`,null),e([N({readOnly:!0})],vE.prototype,`resourceInfo`,void 0),e([N({type:H})],vE.prototype,`spatialReference`,void 0),e([N({type:sue})],vE.prototype,`style`,void 0),e([N()],vE.prototype,`thumbnailUrl`,void 0),e([N({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],vE.prototype,`title`,void 0),e([M(`title`)],vE.prototype,`writeTitle`,null),vE=_E=e([P(`esri.Basemap`)],vE);var Nue={"Web Scene":`web-scene`,"Web Map":`web-map`,"Link Chart":`link-chart`},Pue={"web-scene":`web-scene`,"web-map":`web-map`,"link-chart":`link-chart`},yE=vE,bE={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function xE(e){return!!bE[e]||!!bE[e.toLowerCase()]}function SE(e){return bE[e]??bE[e.toLowerCase()]}function Fue(e){return[...SE(e)]}function CE(e,t,n){n<0&&++n,n>1&&--n;let r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function wE(e,t,n,r=1){let i=(e%360+360)%360/360,a=n<=.5?n*(t+1):n+t-n*t,o=2*n-a;return[Math.round(255*CE(o,a,i+1/3)),Math.round(255*CE(o,a,i)),Math.round(255*CE(o,a,i-1/3)),r]}function Iue(e){let t=e.length>5,n=t?8:4,r=(1<<n)-1,i=t?1:17,a=t?e.length===9:e.length===5,o=Number(`0x`+e.slice(1));if(isNaN(o))return null;let s=[0,0,0,1],c;return a&&(c=o&r,o>>=n,s[3]=i*c/255),c=o&r,o>>=n,s[2]=i*c,c=o&r,o>>=n,s[1]=i*c,c=o&r,o>>=n,s[0]=i*c,s}function TE(e){if(!e.startsWith(`#`)||isNaN(Number(`0x${e.slice(1)}`)))return null;switch(e.length){case 4:case 5:{let t=parseInt(e.slice(1,2),16),n=parseInt(e.slice(2,3),16),r=parseInt(e.slice(3,4),16),i=e.length===4?15:parseInt(e.slice(4),16);return[t+16*t,n+16*n,r+16*r,(i+16*i)/255]}case 7:case 9:return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16),(e.length===7?255:parseInt(e.slice(7),16))/255];default:return null}}function EE(e){let t=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(t){let e=t[2].split(/\s*,\s*/),n=t[1];if(n===`rgb`&&e.length===3||n===`rgba`&&e.length===4){if(e[0].endsWith(`%`)){let t=e.map(e=>2.56*parseFloat(e));return e.length===4&&(t[3]=parseFloat(e[3])),DE(t)}return DE(e.map(e=>parseFloat(e)))}if(n===`hsl`&&e.length===3||n===`hsla`&&e.length===4)return wE(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3]??`1`))}return null}function DE(e){return e[0]=AE(e[0]),e[1]=AE(e[1]),e[2]=AE(e[2]),e[3]=e.length===4?kE(e[3]):1,e}function OE(e){let t=xE(e)?SE(e):null;return t??=EE(e),t??=TE(e),t}function Lue(e){let t=OE(e);return t==null?null:[t[0]/255,t[1]/255,t[2]/255,t[3]]}function kE(e){return jE(e,0,1)}function AE(e){return Math.round(jE(e,0,255))}function jE(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}var ME=2.2,Rue=1/ME;function zue(e){return e**ME}function Bue(e){return e**Rue}function NE(e){return Xa(Tt(e),0,255)}function PE(e,t){let n=e.toString(16).padStart(2,`0`);return t?n.slice(0,1):n}var J=class e{static blendColors(t,n,r,i=new e){return i.r=Math.round(t.r+(n.r-t.r)*r),i.g=Math.round(t.g+(n.g-t.g)*r),i.b=Math.round(t.b+(n.b-t.b)*r),i.a=t.a+(n.a-t.a)*r,i._sanitize()}static fromRgb(t,n){let r=EE(t);return r?e.fromArray(r,n):null}static fromHex(t,n=new e){let r=TE(t);return r?e.fromArray(r,n):null}static fromArray(t,n=new e){return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(t,n){let r=OE(t);return r?e.fromArray(r,n):null}static fromJSON(t){return t==null?void 0:new e([t[0],t[1],t[2],(t[3]??255)/255])}toUnitRGB(){return[this.r/255,this.g/255,this.b/255]}toUnitRGBA(e){return e??=[0,0,0,0],e[0]=this.r/255,e[1]=this.g/255,e[2]=this.b/255,e[3]=this.a==null?1:this.a,e}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if(typeof t==`string`)e.fromString(t,this);else if(_e(t))e.fromArray(t,this);else{let n=t;this._set(n.r??0,n.g??0,n.b??0,n.a??1),t instanceof e||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){let t=e?.capitalize??!1,n=e?.digits??6,r=n===3||n===4,i=n===4||n===8,a=`#${PE(this.r,r)}${PE(this.g,r)}${PE(this.b,r)}${i?PE(Math.round(255*this.a),r):``}`;return t?a.toUpperCase():a}toCss(e=!1){let t=this.r+`, `+this.g+`, `+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){let t=NE(this.r),n=NE(this.g),r=NE(this.b);return e===0||this.a!==1?[t,n,r,NE(255*this.a)]:[t,n,r]}clone(){return new e(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=AE(this.r),this.g=AE(this.g),this.b=AE(this.b),this.a=kE(this.a),this}_set(e,t,n,r){this.r=e,this.g=t,this.b=n,this.a=r}};J.prototype.declaredClass=`esri.Color`;var FE,IE=FE=class extends L{constructor(e){super(e),this.type=`none`}clone(){return new FE({type:this.type})}};e([A({none:`none`,stayAbove:`stay-above`}),N({json:{write:{isRequired:!0}}})],IE.prototype,`type`,void 0),IE=FE=e([P(`esri.ground.NavigationConstraint`)],IE);var LE=Symbol(`GroundInstance`);function Vue(e){return typeof e==`object`&&!!e&&LE in e}function RE(e){let t=Tt(100*(1-e));return Math.max(0,Math.min(t,100))}function zE(e){let t=1-e/100;return Math.max(0,Math.min(t,1))}var BE,VE,HE=VE=class extends Mo(pT){static{BE=LE}constructor(e){super(e),this[BE]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.undergroundColor=c(`enable-feature:oit-ground`)?void 0:new J(`white`),this.navigationConstraint=null,this.layers=new W;let t=e=>{let{parent:t}=e;t&&t!==this&&`remove`in t&&t.remove?.(e),e.parent=this,e.type!==`elevation`&&e.type!==`base-elevation`&&E.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=e=>{e.parent=null};this.addHandles([this.layers.on(`after-add`,e=>t(e.item)),this.layers.on(`after-remove`,e=>n(e.item))]),this.allLayers=new Xh({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(e){this.layers.remove(e)}initialize(){this.when().catch(e=>{ji(e)||E.getLogger(this).error(`#load()`,`Failed to load ground`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){let e=this.parent?.basemap?.groundLayers.at(0);return e?.replacesTerrain?e:null}destroy(){let e=this.layers.removeAll();for(let t of e)zr(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&`resourceInfo`in e&&(this._set(`resourceInfo`,e.resourceInfo),delete(e={...e}).resourceInfo),e}get loaded(){return super.loaded}get layers(){return this._get(`layers`)}set layers(e){this._set(`layers`,sT(e,this._get(`layers`)))}writeLayers(e,t,n,r){let i=[];e?(r={...r,layerContainerType:`ground`},e.forEach(e=>{if(`write`in e){let t={};d(e)().write(t,r)&&i.push(t)}else r?.messages&&r.messages.push(new D(`layer:unsupported`,`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted in the ground`,{layer:e}))}),t.layers=i):t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return hT(this,e=>e(this.layers))}async queryElevation(e,t){await this.load({signal:t?.signal});let{queryAll:n}=await R(async()=>{let{queryAll:e}=await import(`./ElevationQuery-BrQIlua1.js`);return{queryAll:e}},__vite__mapDeps([250,251]));return Ci(t),n(this.layers.filter(UE).toArray(),e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});let{createSampler:n}=await R(async()=>{let{createSampler:e}=await import(`./ElevationQuery-BrQIlua1.js`);return{createSampler:e}},__vite__mapDeps([250,251]));return Ci(t),n(this.layers.filter(UE).toArray(),e,t)}clone(){let e={opacity:this.opacity,surfaceColor:C(this.surfaceColor),undergroundColor:C(this.undergroundColor),navigationConstraint:C(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus=`loaded`),new VE({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set(`resourceInfo`,{data:e,context:t}),super.read(e,t)}_loadFromSource(e){let t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,n){let r=t?.origin||`web-scene`,i=t?.portal||null,a=t?.url||null,{populateOperationalLayers:o}=await R(async()=>{let{populateOperationalLayers:e}=await import(`./layersCreator-B_NbEqg2.js`);return{populateOperationalLayers:e}},__vite__mapDeps([248,242,243,244,249,245,246]));Ci(n);let s=[];if(e.layers&&Array.isArray(e.layers)){let t={context:{origin:r,url:a,portal:i,layerContainerType:`ground`},defaultLayerType:`ArcGISTiledElevationServiceLayer`};s.push(o(this.layers,e.layers,t))}await Promise.allSettled(s)}};function UE(e){return e&&`createElevationSampler`in e}e([N()],HE.prototype,`parent`,void 0),e([N()],HE.prototype,`integratedMeshGround`,null),e([N({json:{read:!1,write:{isRequired:!0}}})],HE.prototype,`layers`,null),e([N()],HE.prototype,`allLayers`,void 0),e([M(`layers`)],HE.prototype,`writeLayers`,null),e([N({readOnly:!0})],HE.prototype,`resourceInfo`,void 0),e([N({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Wt,read:{reader:zE,source:`transparency`},write:{writer:(e,t)=>{t.transparency=RE(e)},target:`transparency`}}})],HE.prototype,`opacity`,void 0),e([N({type:J,json:{type:[Wt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],HE.prototype,`surfaceColor`,void 0),e([N({type:J})],HE.prototype,`undergroundColor`,void 0),e([N({type:IE,json:{write:!0}})],HE.prototype,`navigationConstraint`,void 0),HE=VE=e([P(`esri.Ground`)],HE);var WE=HE,GE=`randomUUID`in crypto;function KE(){if(GE)return crypto.randomUUID();let e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;let t=t=>e[t].toString(16).padStart(4,`0`);return t(0)+t(1)+`-`+t(2)+`-`+t(3)+`-`+t(4)+`-`+t(5)+t(6)+t(7)}function qE(){return`{${KE().toUpperCase()}}`}function JE(){return`{${KE()}}`}function YE(e){let t=e.toUpperCase();return e.startsWith(`{`)?t:`{${t}}`}var XE={Base64:0,Hex:1,String:2,Raw:3},ZE=8,QE=(1<<ZE)-1;function $E(e,t){let n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function eD(e){let t=[];for(let n=0,r=e.length*ZE;n<r;n+=ZE)t[n>>5]|=(e.charCodeAt(n/ZE)&QE)<<n%32;return t}function tD(e){let t=[];for(let n=0,r=32*e.length;n<r;n+=ZE)t.push(String.fromCharCode(e[n>>5]>>>n%32&QE));return t.join(``)}function nD(e){let t=`0123456789abcdef`,n=[];for(let r=0,i=4*e.length;r<i;r++)n.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return n.join(``)}function rD(e){let t=[];for(let n=0,r=4*e.length;n<r;n+=3){let r=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let i=0;i<4;i++)8*n+6*i>32*e.length?t.push(`=`):t.push(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`.charAt(r>>6*(3-i)&63))}return t.join(``)}function iD(e,t){return e<<t|e>>>32-t}function aD(e,t,n,r,i,a){return $E(iD($E($E(t,e),$E(r,a)),i),n)}function oD(e,t,n,r,i,a,o){return aD(t&n|~t&r,e,t,i,a,o)}function sD(e,t,n,r,i,a,o){return aD(t&r|n&~r,e,t,i,a,o)}function cD(e,t,n,r,i,a,o){return aD(t^n^r,e,t,i,a,o)}function lD(e,t,n,r,i,a,o){return aD(n^(t|~r),e,t,i,a,o)}function uD(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let n=1732584193,r=-271733879,i=-1732584194,a=271733878;for(let t=0;t<e.length;t+=16){let o=n,s=r,c=i,l=a;n=oD(n,r,i,a,e[t],7,-680876936),a=oD(a,n,r,i,e[t+1],12,-389564586),i=oD(i,a,n,r,e[t+2],17,606105819),r=oD(r,i,a,n,e[t+3],22,-1044525330),n=oD(n,r,i,a,e[t+4],7,-176418897),a=oD(a,n,r,i,e[t+5],12,1200080426),i=oD(i,a,n,r,e[t+6],17,-1473231341),r=oD(r,i,a,n,e[t+7],22,-45705983),n=oD(n,r,i,a,e[t+8],7,1770035416),a=oD(a,n,r,i,e[t+9],12,-1958414417),i=oD(i,a,n,r,e[t+10],17,-42063),r=oD(r,i,a,n,e[t+11],22,-1990404162),n=oD(n,r,i,a,e[t+12],7,1804603682),a=oD(a,n,r,i,e[t+13],12,-40341101),i=oD(i,a,n,r,e[t+14],17,-1502002290),r=oD(r,i,a,n,e[t+15],22,1236535329),n=sD(n,r,i,a,e[t+1],5,-165796510),a=sD(a,n,r,i,e[t+6],9,-1069501632),i=sD(i,a,n,r,e[t+11],14,643717713),r=sD(r,i,a,n,e[t],20,-373897302),n=sD(n,r,i,a,e[t+5],5,-701558691),a=sD(a,n,r,i,e[t+10],9,38016083),i=sD(i,a,n,r,e[t+15],14,-660478335),r=sD(r,i,a,n,e[t+4],20,-405537848),n=sD(n,r,i,a,e[t+9],5,568446438),a=sD(a,n,r,i,e[t+14],9,-1019803690),i=sD(i,a,n,r,e[t+3],14,-187363961),r=sD(r,i,a,n,e[t+8],20,1163531501),n=sD(n,r,i,a,e[t+13],5,-1444681467),a=sD(a,n,r,i,e[t+2],9,-51403784),i=sD(i,a,n,r,e[t+7],14,1735328473),r=sD(r,i,a,n,e[t+12],20,-1926607734),n=cD(n,r,i,a,e[t+5],4,-378558),a=cD(a,n,r,i,e[t+8],11,-2022574463),i=cD(i,a,n,r,e[t+11],16,1839030562),r=cD(r,i,a,n,e[t+14],23,-35309556),n=cD(n,r,i,a,e[t+1],4,-1530992060),a=cD(a,n,r,i,e[t+4],11,1272893353),i=cD(i,a,n,r,e[t+7],16,-155497632),r=cD(r,i,a,n,e[t+10],23,-1094730640),n=cD(n,r,i,a,e[t+13],4,681279174),a=cD(a,n,r,i,e[t],11,-358537222),i=cD(i,a,n,r,e[t+3],16,-722521979),r=cD(r,i,a,n,e[t+6],23,76029189),n=cD(n,r,i,a,e[t+9],4,-640364487),a=cD(a,n,r,i,e[t+12],11,-421815835),i=cD(i,a,n,r,e[t+15],16,530742520),r=cD(r,i,a,n,e[t+2],23,-995338651),n=lD(n,r,i,a,e[t],6,-198630844),a=lD(a,n,r,i,e[t+7],10,1126891415),i=lD(i,a,n,r,e[t+14],15,-1416354905),r=lD(r,i,a,n,e[t+5],21,-57434055),n=lD(n,r,i,a,e[t+12],6,1700485571),a=lD(a,n,r,i,e[t+3],10,-1894986606),i=lD(i,a,n,r,e[t+10],15,-1051523),r=lD(r,i,a,n,e[t+1],21,-2054922799),n=lD(n,r,i,a,e[t+8],6,1873313359),a=lD(a,n,r,i,e[t+15],10,-30611744),i=lD(i,a,n,r,e[t+6],15,-1560198380),r=lD(r,i,a,n,e[t+13],21,1309151649),n=lD(n,r,i,a,e[t+4],6,-145523070),a=lD(a,n,r,i,e[t+11],10,-1120210379),i=lD(i,a,n,r,e[t+2],15,718787259),r=lD(r,i,a,n,e[t+9],21,-343485551),n=$E(n,o),r=$E(r,s),i=$E(i,c),a=$E(a,l)}return[n,r,i,a]}function dD(e,t=XE.Hex){let n=t||XE.Base64,r=uD(eD(e),e.length*ZE);switch(n){case XE.Raw:return r;case XE.Hex:return nD(r);case XE.String:return tD(r);case XE.Base64:return rD(r)}}function fD(e){return e&&`getAtOrigin`in e&&`originOf`in e}function pD(e){return gD[mD(e)]||vD}function mD(e){return e.type===`json`?`application/json`:e.type===`blob`?e.blob.type:hD(e.url)}function hD(e){let t=Js(e);return yD[t]||_D}var gD={},_D=`text/plain`,vD=gD[_D],yD={png:`image/png`,jpeg:`image/jpeg`,jpg:`image/jpg`,bmp:`image/bmp`,gif:`image/gif`,json:`application/json`,txt:`text/plain`,xml:`application/xml`,svg:`image/svg+xml`,zip:`application/zip`,pbf:`application/vnd.mapbox-vector-tile`,gz:`application/gzip`,"bin.gz":`application/octet-stream`};for(let e in yD)gD[yD[e]]=e;function bD(e){let t=e?.origins??[void 0];return(n,r)=>{let i=xD(e,n,r);for(let e of t){let t=xn(n,e,r);for(let e in i)t[e]=i[e]}}}function xD(e,t,n){if(e?.type===`resource`)return SD(e,t,n);switch(e?.type??`other`){case`other`:return{read:!0,write:!0};case`url`:{let{read:e,write:t}=one;return{read:e,write:t}}}}function SD(e,t,n){let r=_n(t,n);return{type:String,read:(e,t,n)=>{let i=hc(e,t,n);return r.type===String?i:typeof r.type==`function`?new r.type({url:i}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(t,i,a,o){if(!o?.resources)return typeof t==`string`?void(i[a]=mc(t,o)):void(i[a]=t.write({},o));let s=OD(t),c=mc(s,{...o,verifyItemRelativeUrls:o?.verifyItemRelativeUrls?{writtenUrls:o.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),l=r.type!==String&&(!fD(this)||o?.origin&&this.originIdOf(n)>Jr(o.origin)),u={object:this,propertyName:n,value:t,targetUrl:c,dest:i,targetPropertyName:a,context:o,params:e};o?.portalItem&&c&&!ys(c)?l&&e?.contentAddressed?CD(u):l?wD(u):TD(u):o?.portalItem&&(c==null||vc(c)!=null||bs(c)||l)?CD(u):i[a]=c}}}}function CD(e){let{targetUrl:t,params:n,value:r,context:i,dest:a,targetPropertyName:o}=e;if(!i.portalItem)return;let s=yc(t),c=DD(r,t,i);if(n?.contentAddressed&&c.type!==`json`)return void i.messages?.push(new D(`persistable:contentAddressingUnsupported`,`Property "${o}" is trying to serializing a resource with content of type ${c.type} with content addressing. Content addressing is only supported for json resources.`,{content:c}));let l=n?.contentAddressed&&c.type===`json`?dD(c.jsonString):s?.filename??KE(),u=_s(n?.prefix??s?.prefix,l),d=`${u}.${pD(c)}`;if(n?.contentAddressed&&i.resources&&c.type===`json`){let e=i.resources.toKeep.find(({resource:e})=>e.path===d)??i.resources.toAdd.find(({resource:e})=>e.path===d);if(e)return void(a[o]=e.resource.itemRelativeUrl)}let f=i.portalItem.resourceFromPath(d);bs(t)&&i.resources&&i.resources.pendingOperations.push(tne(t).then(e=>{f.path=`${u}.${pD({type:`blob`,blob:e})}`,a[o]=f.itemRelativeUrl}).catch(()=>{}));let p=n?.compress??!1;i.resources&&ED({...e,resource:f,content:c,compress:p,updates:i.resources.toAdd}),a[o]=f.itemRelativeUrl}function wD(e){let{context:t,targetUrl:n,params:r,value:i,dest:a,targetPropertyName:o}=e;if(!t.portalItem)return;let s=t.portalItem.resourceFromPath(n),c=DD(i,n,t),l=pD(c),u=Js(s.path),d=r?.compress??!1;l===u?(t.resources&&ED({...e,resource:s,content:c,compress:d,updates:t.resources.toUpdate}),a[o]=n):CD(e)}function TD({context:e,targetUrl:t,dest:n,targetPropertyName:r}){e.portalItem&&e.resources&&(e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(t),compress:!1}),n[r]=t)}function ED({object:e,propertyName:t,updates:n,resource:r,content:i,compress:a}){n.push({resource:r,content:i,compress:a,finish:n=>{kD(e,t,n)}})}function DD(e,t,n){return typeof e==`string`?{type:`url`,url:t}:{type:`json`,jsonString:JSON.stringify(e.toJSON(n))}}function OD(e){return e==null?null:typeof e==`string`?e:e.url}function kD(e,t,n){typeof e[t]==`string`?e[t]=n.url:e[t].url=n.url}var AD=class extends I(L){constructor(e){super(e),this.color=null}};e([N({type:J,json:{type:[Wt],write:!0}})],AD.prototype,`color`,void 0),AD=e([P(`esri.effects.FocusAreaOutline`)],AD);var jD=AD,MD,ND=MD=class extends Mo(W.ofType(sh)){constructor(e){super(e)}clone(){return new MD(this.items.map(e=>e.clone()))}write(e,t){return this.toJSON(t)}toJSON(e){let t=e?.layer?.spatialReference;return t?this.toArray().map(n=>{if(!t.equals(n.spatialReference)){if(!zS(n.spatialReference,t))return e?.messages?.push(new zn(`scenefilter:unsupported`,`Scene filters with incompatible spatial references are not supported`,{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;let r=new sh;GS(n,r,t),n=r}let r=n.toJSON(e);return delete r.spatialReference,r}).filter(e=>e!=null):this.toArray().map(t=>t.toJSON(e))}static fromJSON(e,t){let n=new MD;return e.forEach(e=>n.add(sh.fromJSON(e,t))),n}};ND=MD=e([P(`esri.layers.support.PolygonCollection`)],ND);var PD=ND,FD=class extends Mo(Ka){constructor(e){super(e),this.id=`focusarea-${KE()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new PD}readGeometries(e,t,n){Array.isArray(e)?this.geometries=PD.fromJSON(e,n):n.origin!==`web-scene`&&n.origin!==`portal-item`||n.hooks?.onAfterLoad?.(()=>this._loadGeometries(pc(e,n),n))}async _loadGeometries(e,t){let n=await Qc(e,{responseType:`json`});this.geometries=PD.fromJSON(n.data,t)}};e([N({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),N()],FD.prototype,`id`,void 0),e([N({type:String,json:{write:!0}})],FD.prototype,`title`,void 0),e([N({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],FD.prototype,`enabled`,void 0),e([N({type:jD,json:{write:!0}})],FD.prototype,`outline`,void 0),e([N({type:PD,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new PD(e.items.map(e=>e.clone()))}),bD({origins:[`web-scene`,`portal-item`],type:`resource`,prefix:`geometries`,contentAddressed:!0})],FD.prototype,`geometries`,void 0),e([j([`web-scene`,`portal-item`,`service`],`geometries`)],FD.prototype,`readGeometries`,null),FD=e([P(`esri.effects.FocusArea`)],FD);var ID=FD,LD=class extends Mo(Ka){constructor(e){super(e),this.areas=new W,this.style=`bright`}};e([N({type:W.ofType(ID),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:e=>new W(e.items.map(e=>e.clone()))})],LD.prototype,`areas`,void 0),e([N({type:[`bright`,`dark`],nonNullable:!0,json:{write:!0}})],LD.prototype,`style`,void 0),LD=e([P(`esri.effects.FocusAreas`)],LD);var RD=LD;function zD(e){return typeof e==`object`&&!!e&&`loaded`in e&&!0===e.loaded&&`type`in e}function BD(e){return!(!zD(e)||!sE(e)?.operations?.supportsEditing||`editingEnabled`in e&&!cE(e)||$T(e))}function VD(){let e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function HD(e){let t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function UD(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){let g=new Float32Array(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=i,g[5]=a,g[6]=o,g[7]=s,g[8]=c,g[9]=l,g[10]=u,g[11]=d,g[12]=f,g[13]=p,g[14]=m,g[15]=h,g}var WD=VD();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:WD,clone:HD,create:VD,fromValues:UD},Symbol.toStringTag,{value:`Module`}));function GD(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function KD(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=l,e[9]=u,e[10]=d,e[11]=f,e[12]=p,e[13]=m,e[14]=h,e[15]=g,e}function qD(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function JD(e,t){if(e===t){let n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function YD(e,t){return XD(e,t)||qD(e),e}function XD(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],m=t[12],h=t[13],g=t[14],_=t[15],v=n*s-r*o,y=n*c-i*o,b=n*l-a*o,x=r*c-i*s,S=r*l-a*s,ee=i*l-a*c,te=u*h-d*m,ne=u*g-f*m,re=u*_-p*m,ie=d*g-f*h,ae=d*_-p*h,oe=f*_-p*g,se=v*oe-y*ae+b*ie+x*re-S*ne+ee*te;return se?(se=1/se,e[0]=(s*oe-c*ae+l*ie)*se,e[1]=(i*ae-r*oe-a*ie)*se,e[2]=(h*ee-g*S+_*x)*se,e[3]=(f*S-d*ee-p*x)*se,e[4]=(c*re-o*oe-l*ne)*se,e[5]=(n*oe-i*re+a*ne)*se,e[6]=(g*b-m*ee-_*y)*se,e[7]=(u*ee-f*b+p*y)*se,e[8]=(o*ae-s*re+l*te)*se,e[9]=(r*re-n*ae-a*te)*se,e[10]=(m*S-h*b+_*v)*se,e[11]=(d*b-u*S-p*v)*se,e[12]=(s*ne-o*ie-c*te)*se,e[13]=(n*ie-r*ne+i*te)*se,e[14]=(h*y-m*x-g*v)*se,e[15]=(u*x-d*y+f*v)*se,e):null}function ZD(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],m=t[12],h=t[13],g=t[14],_=t[15];return e[0]=s*(f*_-p*g)-d*(c*_-l*g)+h*(c*p-l*f),e[1]=-(r*(f*_-p*g)-d*(i*_-a*g)+h*(i*p-a*f)),e[2]=r*(c*_-l*g)-s*(i*_-a*g)+h*(i*l-a*c),e[3]=-(r*(c*p-l*f)-s*(i*p-a*f)+d*(i*l-a*c)),e[4]=-(o*(f*_-p*g)-u*(c*_-l*g)+m*(c*p-l*f)),e[5]=n*(f*_-p*g)-u*(i*_-a*g)+m*(i*p-a*f),e[6]=-(n*(c*_-l*g)-o*(i*_-a*g)+m*(i*l-a*c)),e[7]=n*(c*p-l*f)-o*(i*p-a*f)+u*(i*l-a*c),e[8]=o*(d*_-p*h)-u*(s*_-l*h)+m*(s*p-l*d),e[9]=-(n*(d*_-p*h)-u*(r*_-a*h)+m*(r*p-a*d)),e[10]=n*(s*_-l*h)-o*(r*_-a*h)+m*(r*l-a*s),e[11]=-(n*(s*p-l*d)-o*(r*p-a*d)+u*(r*l-a*s)),e[12]=-(o*(d*g-f*h)-u*(s*g-c*h)+m*(s*f-c*d)),e[13]=n*(d*g-f*h)-u*(r*g-i*h)+m*(r*f-i*d),e[14]=-(n*(s*g-c*h)-o*(r*g-i*h)+m*(r*c-i*s)),e[15]=n*(s*f-c*d)-o*(r*f-i*d)+u*(r*c-i*s),e}function QD(e){let t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11],p=e[12],m=e[13],h=e[14],g=e[15];return(t*o-n*a)*(d*g-f*h)-(t*s-r*a)*(u*g-f*m)+(t*c-i*a)*(u*h-d*m)+(n*s-r*o)*(l*g-f*p)-(n*c-i*o)*(l*h-d*p)+(r*c-i*s)*(l*m-u*p)}function $D(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],m=t[11],h=t[12],g=t[13],_=t[14],v=t[15],y=n[0],b=n[1],x=n[2],S=n[3];return e[0]=y*r+b*s+x*d+S*h,e[1]=y*i+b*c+x*f+S*g,e[2]=y*a+b*l+x*p+S*_,e[3]=y*o+b*u+x*m+S*v,y=n[4],b=n[5],x=n[6],S=n[7],e[4]=y*r+b*s+x*d+S*h,e[5]=y*i+b*c+x*f+S*g,e[6]=y*a+b*l+x*p+S*_,e[7]=y*o+b*u+x*m+S*v,y=n[8],b=n[9],x=n[10],S=n[11],e[8]=y*r+b*s+x*d+S*h,e[9]=y*i+b*c+x*f+S*g,e[10]=y*a+b*l+x*p+S*_,e[11]=y*o+b*u+x*m+S*v,y=n[12],b=n[13],x=n[14],S=n[15],e[12]=y*r+b*s+x*d+S*h,e[13]=y*i+b*c+x*f+S*g,e[14]=y*a+b*l+x*p+S*_,e[15]=y*o+b*u+x*m+S*v,e}function eO(e,t,n){let r=n[0],i=n[1],a=n[2];if(t===e)e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15];else{let n=t[0],o=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],f=t[7],p=t[8],m=t[9],h=t[10],g=t[11];e[0]=n,e[1]=o,e[2]=s,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=f,e[8]=p,e[9]=m,e[10]=h,e[11]=g,e[12]=n*r+l*i+p*a+t[12],e[13]=o*r+u*i+m*a+t[13],e[14]=s*r+d*i+h*a+t[14],e[15]=c*r+f*i+g*a+t[15]}return e}function tO(e,t,n){let r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function nO(e,t,n,r){let i=r[0],a=r[1],o=r[2],s=Math.sqrt(i*i+a*a+o*o);if(s<=nf())return void GD(e,t);s=1/s,i*=s,a*=s,o*=s;let c=Math.sin(n),l=Math.cos(n),u=1-l,d=t[0],f=t[1],p=t[2],m=t[3],h=t[4],g=t[5],_=t[6],v=t[7],y=t[8],b=t[9],x=t[10],S=t[11],ee=i*i*u+l,te=a*i*u+o*c,ne=o*i*u-a*c,re=i*a*u-o*c,ie=a*a*u+l,ae=o*a*u+i*c,oe=i*o*u+a*c,se=a*o*u-i*c,ce=o*o*u+l;e[0]=d*ee+h*te+y*ne,e[1]=f*ee+g*te+b*ne,e[2]=p*ee+_*te+x*ne,e[3]=m*ee+v*te+S*ne,e[4]=d*re+h*ie+y*ae,e[5]=f*re+g*ie+b*ae,e[6]=p*re+_*ie+x*ae,e[7]=m*re+v*ie+S*ae,e[8]=d*oe+h*se+y*ce,e[9]=f*oe+g*se+b*ce,e[10]=p*oe+_*se+x*ce,e[11]=m*oe+v*se+S*ce,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function rO(e,t,n){let r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+u*r,e[6]=s*i+d*r,e[7]=c*i+f*r,e[8]=l*i-a*r,e[9]=u*i-o*r,e[10]=d*i-s*r,e[11]=f*i-c*r,e}function iO(e,t,n){let r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],l=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-u*r,e[2]=s*i-d*r,e[3]=c*i-f*r,e[8]=a*r+l*i,e[9]=o*r+u*i,e[10]=s*r+d*i,e[11]=c*r+f*i,e}function aO(e,t,n){let r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+u*r,e[2]=s*i+d*r,e[3]=c*i+f*r,e[4]=l*i-a*r,e[5]=u*i-o*r,e[6]=d*i-s*r,e[7]=f*i-c*r,e}function oO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function sO(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cO(e,t,n){if(t===0)return qD(e);let r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a);if(o<=nf())return null;o=1/o,r*=o,i*=o,a*=o;let s=Math.sin(t),c=Math.cos(t),l=1-c;return e[0]=r*r*l+c,e[1]=i*r*l+a*s,e[2]=a*r*l-i*s,e[3]=0,e[4]=r*i*l-a*s,e[5]=i*i*l+c,e[6]=a*i*l+r*s,e[7]=0,e[8]=r*a*l+i*s,e[9]=i*a*l-r*s,e[10]=a*a*l+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lO(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Hue(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function uO(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function dO(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,c=i+i,l=a+a,u=r*s,d=r*c,f=r*l,p=i*c,m=i*l,h=a*l,g=o*s,_=o*c,v=o*l;return e[0]=1-(p+h),e[1]=d+v,e[2]=f-_,e[3]=0,e[4]=d-v,e[5]=1-(u+h),e[6]=m+g,e[7]=0,e[8]=f+_,e[9]=m-g,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Uue(e,t){let n=Wue,r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=r*r+i*i+a*a+o*o;return d>0?(n[0]=2*(s*o+u*r+c*a-l*i)/d,n[1]=2*(c*o+u*i+l*r-s*a)/d,n[2]=2*(l*o+u*a+s*i-c*r)/d):(n[0]=2*(s*o+u*r+c*a-l*i),n[1]=2*(c*o+u*i+l*r-s*a),n[2]=2*(l*o+u*a+s*i-c*r)),dO(e,t,n),e}var Wue=Ox();function fO(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function pO(e,t){let n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],c=t[8],l=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(c*c+l*l+u*u),e}function mO(e,t){let n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function hO(e,t,n,r){let i=t[0],a=t[1],o=t[2],s=t[3],c=i+i,l=a+a,u=o+o,d=i*c,f=i*l,p=i*u,m=a*l,h=a*u,g=o*u,_=s*c,v=s*l,y=s*u,b=r[0],x=r[1],S=r[2];return e[0]=(1-(m+g))*b,e[1]=(f+y)*b,e[2]=(p-v)*b,e[3]=0,e[4]=(f-y)*x,e[5]=(1-(d+g))*x,e[6]=(h+_)*x,e[7]=0,e[8]=(p+v)*S,e[9]=(h-_)*S,e[10]=(1-(d+m))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function gO(e,t,n,r,i){let a=t[0],o=t[1],s=t[2],c=t[3],l=a+a,u=o+o,d=s+s,f=a*l,p=a*u,m=a*d,h=o*u,g=o*d,_=s*d,v=c*l,y=c*u,b=c*d,x=r[0],S=r[1],ee=r[2],te=i[0],ne=i[1],re=i[2],ie=(1-(h+_))*x,ae=(p+b)*x,oe=(m-y)*x,se=(p-b)*S,ce=(1-(f+_))*S,le=(g+v)*S,ue=(m+y)*ee,de=(g-v)*ee,fe=(1-(f+h))*ee;return e[0]=ie,e[1]=ae,e[2]=oe,e[3]=0,e[4]=se,e[5]=ce,e[6]=le,e[7]=0,e[8]=ue,e[9]=de,e[10]=fe,e[11]=0,e[12]=n[0]+te-(ie*te+se*ne+ue*re),e[13]=n[1]+ne-(ae*te+ce*ne+de*re),e[14]=n[2]+re-(oe*te+le*ne+fe*re),e[15]=1,e}function _O(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,l=n*o,u=r*o,d=r*s,f=i*o,p=i*s,m=i*c,h=a*o,g=a*s,_=a*c;return e[0]=1-d-m,e[1]=u+_,e[2]=f-g,e[3]=0,e[4]=u-_,e[5]=1-l-m,e[6]=p+h,e[7]=0,e[8]=f+g,e[9]=p-h,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vO(e,t,n,r,i,a,o){let s=1/(n-t),c=1/(i-r),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*c,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function Gue(e,t,n,r,i){let a=1/Math.tan(t/2),o;return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Kue(e,t,n,r){let i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+s),l=2/(i+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*c*.5,e[9]=(i-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function yO(e,t,n,r,i,a,o){let s=1/(t-n),c=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(o+a)*l,e[15]=1,e}function bO(e,t,n,r){let i=t[0],a=t[1],o=t[2],s=i-n[0],c=a-n[1],l=o-n[2],u=nf();if(Math.abs(s)<u&&Math.abs(c)<u&&Math.abs(l)<u)return void qD(e);let d=1/Math.sqrt(s*s+c*c+l*l);s*=d,c*=d,l*=d;let f=r[0],p=r[1],m=r[2],h=p*l-m*c,g=m*s-f*l,_=f*c-p*s;d=Math.sqrt(h*h+g*g+_*_),d?(d=1/d,h*=d,g*=d,_*=d):(h=0,g=0,_=0);let v=c*_-l*g,y=l*h-s*_,b=s*g-c*h;d=Math.sqrt(v*v+y*y+b*b),d?(d=1/d,v*=d,y*=d,b*=d):(v=0,y=0,b=0),e[0]=h,e[1]=v,e[2]=s,e[3]=0,e[4]=g,e[5]=y,e[6]=c,e[7]=0,e[8]=_,e[9]=b,e[10]=l,e[11]=0,e[12]=-(h*i+g*a+_*o),e[13]=-(v*i+y*a+b*o),e[14]=-(s*i+c*a+l*o),e[15]=1}function que(e,t,n,r){let i=t[0],a=t[1],o=t[2],s=r[0],c=r[1],l=r[2],u=i-n[0],d=a-n[1],f=o-n[2],p=u*u+d*d+f*f;p>0&&(p=1/Math.sqrt(p),u*=p,d*=p,f*=p);let m=c*f-l*d,h=l*u-s*f,g=s*d-c*u;return p=m*m+h*h+g*g,p>0&&(p=1/Math.sqrt(p),m*=p,h*=p,g*=p),e[0]=m,e[1]=h,e[2]=g,e[3]=0,e[4]=d*g-f*h,e[5]=f*m-u*g,e[6]=u*h-d*m,e[7]=0,e[8]=u,e[9]=d,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function Jue(e){return`mat4(`+e[0]+`, `+e[1]+`, `+e[2]+`, `+e[3]+`, `+e[4]+`, `+e[5]+`, `+e[6]+`, `+e[7]+`, `+e[8]+`, `+e[9]+`, `+e[10]+`, `+e[11]+`, `+e[12]+`, `+e[13]+`, `+e[14]+`, `+e[15]+`)`}function Yue(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Xue(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function xO(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Zue(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Que(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function SO(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function CO(e,t){if(e===t)return!0;let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],p=e[11],m=e[12],h=e[13],g=e[14],_=e[15],v=t[0],y=t[1],b=t[2],x=t[3],S=t[4],ee=t[5],te=t[6],ne=t[7],re=t[8],ie=t[9],ae=t[10],oe=t[11],se=t[12],ce=t[13],le=t[14],ue=t[15],de=nf();return Math.abs(n-v)<=de*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-y)<=de*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-b)<=de*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(a-x)<=de*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=de*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-ee)<=de*Math.max(1,Math.abs(s),Math.abs(ee))&&Math.abs(c-te)<=de*Math.max(1,Math.abs(c),Math.abs(te))&&Math.abs(l-ne)<=de*Math.max(1,Math.abs(l),Math.abs(ne))&&Math.abs(u-re)<=de*Math.max(1,Math.abs(u),Math.abs(re))&&Math.abs(d-ie)<=de*Math.max(1,Math.abs(d),Math.abs(ie))&&Math.abs(f-ae)<=de*Math.max(1,Math.abs(f),Math.abs(ae))&&Math.abs(p-oe)<=de*Math.max(1,Math.abs(p),Math.abs(oe))&&Math.abs(m-se)<=de*Math.max(1,Math.abs(m),Math.abs(se))&&Math.abs(h-ce)<=de*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(g-le)<=de*Math.max(1,Math.abs(g),Math.abs(le))&&Math.abs(_-ue)<=de*Math.max(1,Math.abs(_),Math.abs(ue))}function wO(e){let t=nf(),n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],c=e[8],l=e[9],u=e[10];return Math.abs(1-(n*n+a*a+c*c))<=t&&Math.abs(1-(r*r+o*o+l*l))<=t&&Math.abs(1-(i*i+s*s+u*u))<=t}function TO(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}var $ue=$D,ede=xO;Object.freeze(Object.defineProperty({__proto__:null,add:Xue,adjoint:ZD,copy:GD,determinant:QD,equals:CO,exactEquals:SO,frob:Yue,fromQuat:_O,fromQuat2:Uue,fromRotation:cO,fromRotationTranslation:dO,fromRotationTranslationScale:hO,fromRotationTranslationScaleOrigin:gO,fromScaling:sO,fromTranslation:oO,fromXRotation:lO,fromYRotation:Hue,fromZRotation:uO,frustum:vO,getRotation:mO,getScale:pO,getTranslation:fO,hasIdentityRotation:TO,identity:qD,invert:XD,invertOrIdentity:YD,isOrthoNormal:wO,lookAt:bO,mul:$ue,multiply:$D,multiplyScalar:Zue,multiplyScalarAndAdd:Que,ortho:yO,perspective:Gue,perspectiveFromFieldOfView:Kue,rotate:nO,rotateX:rO,rotateY:iO,rotateZ:aO,scale:tO,set:KD,str:Jue,sub:ede,subtract:xO,targetTo:que,translate:eO,transpose:JD},Symbol.toStringTag,{value:`Module`}));var tde=(e,t)=>{let n=KD(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return JD(n,n)},nde=(e,t)=>{let n=KD(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return JD(n,n)},rde=(e,t)=>{let n=1-t,r=KD(e,.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,1);return JD(r,r)},ide=(e,t)=>{let n=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),i=KD(e,.213+.787*r-.213*n,.715-.715*r-.715*n,.072-.072*r+.928*n,0,.213-.213*r+.143*n,.715+.285*r+.14*n,.072-.072*r-.283*n,0,.213-.213*r-.787*n,.715-.715*r+.715*n,.072+.928*r+.072*n,0,0,0,0,1);return JD(i,i)},ade=(e,t)=>{let n=1-2*t,r=KD(e,n,0,0,t,0,n,0,t,0,0,n,t,0,0,0,1);return JD(r,r)},ode=(e,t)=>{let n=KD(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return JD(n,n)},sde=(e,t)=>{let n=1-t,r=KD(e,.393+.607*n,.769-.769*n,.189-.189*n,0,.349-.349*n,.686+.314*n,.168-.168*n,0,.272-.272*n,.534-.534*n,.131+.869*n,0,0,0,0,1);return JD(r,r)},EO=class e{constructor(e,t,n){this.strength=e,this.radius=t,this.threshold=n,this.type=`bloom`}interpolate(e,t,n){this.strength=MO(e.strength,t.strength,n),this.radius=MO(e.radius,t.radius,n),this.threshold=MO(e.threshold,t.threshold,n)}clone(){return new e(this.strength,this.radius,this.threshold)}toJSON(){return{type:`bloom`,radius:NO(this.radius),strength:this.strength,threshold:this.threshold}}},DO=class e{constructor(e){this.radius=e,this.type=`blur`}interpolate(e,t,n){this.radius=Math.round(MO(e.radius,t.radius,n))}clone(){return new e(this.radius)}toJSON(){return{type:`blur`,radius:NO(this.radius)}}},OO=class e{constructor(e,t){this.type=e,this.amount=t,this.type!==`invert`&&this.type!==`grayscale`&&this.type!==`sepia`||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,n){this.amount=MO(e.amount,t.amount,n),this._updateMatrix()}clone(){return new e(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){let e=this._colorMatrix||VD();switch(this.type){case`brightness`:this._colorMatrix=tde(e,this.amount);break;case`contrast`:this._colorMatrix=nde(e,this.amount);break;case`grayscale`:this._colorMatrix=rde(e,this.amount);break;case`invert`:this._colorMatrix=ade(e,this.amount);break;case`saturate`:this._colorMatrix=ode(e,this.amount);break;case`sepia`:this._colorMatrix=sde(e,this.amount)}}},kO=class e{constructor(e,t,n,r){this.offsetX=e,this.offsetY=t,this.blurRadius=n,this.color=r,this.type=`drop-shadow`}interpolate(e,t,n){this.offsetX=MO(e.offsetX,t.offsetX,n),this.offsetY=MO(e.offsetY,t.offsetY,n),this.blurRadius=MO(e.blurRadius,t.blurRadius,n),this.color[0]=Math.round(MO(e.color[0],t.color[0],n)),this.color[1]=Math.round(MO(e.color[1],t.color[1],n)),this.color[2]=Math.round(MO(e.color[2],t.color[2],n)),this.color[3]=MO(e.color[3],t.color[3],n)}clone(){return new e(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){let e=[...this.color];return e[3]*=255,{type:`drop-shadow`,xoffset:NO(this.offsetX),yoffset:NO(this.offsetY),blurRadius:NO(this.blurRadius),color:e}}},AO=class e{constructor(e){this.angle=e,this.type=`hue-rotate`}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,n){this.angle=MO(e.angle,t.angle,n),this._updateMatrix()}clone(){return new e(this.angle)}toJSON(){return{type:`hue-rotate`,angle:this.angle}}_updateMatrix(){let e=this._colorMatrix||VD();this._colorMatrix=ide(e,this.angle)}},jO=class e{constructor(e){this.amount=e,this.type=`opacity`,this.amount=Math.min(this.amount,1)}interpolate(e,t,n){this.amount=MO(e.amount,t.amount,n)}clone(){return new e(this.amount)}toJSON(){return{type:`opacity`,amount:this.amount}}};function MO(e,t,n){return e+(t-e)*n}function NO(e){return Math.round(1e3*Yw(e))/1e3}function cde(e){switch(e.type){case`grayscale`:case`sepia`:case`invert`:return new OO(e.type,0);case`saturate`:case`brightness`:case`contrast`:return new OO(e.type,1);case`opacity`:return new jO(1);case`hue-rotate`:return new AO(0);case`blur`:return new DO(0);case`drop-shadow`:return new kO(0,0,0,[...SE(`transparent`)]);case`bloom`:return new EO(0,0,1)}}function PO(e,t){let n=e.length>t.length?e:t;return(e.length>t.length?t:e).every((e,t)=>e.type===n[t].type)}function FO(e,t){let n=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let e=r.length;e<n.length;e++)r.push(cde(n[e]))}function lde(e){let t=e[0];return!!t&&`type`in t}function ude(e,t){return e.allLayerViews.find(e=>e.uid===t)?.layer.parent===e.map?.basemap}function dde(e){return!!e?.baseLayers.concat(e.referenceLayers).some(IO)}function IO(e){if(LO(e.url))return!0;if(e.type===`vector-tile`)for(let t in e.sourceNameToSource){let n=e.sourceNameToSource[t];if(LO(n?.sourceUrl))return!0}return!1}function fde(e,t){if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus===`not-loaded`)return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};let n=t.baseLayers.at(0);switch(n.loadStatus){case`not-loaded`:n.load();case`loading`:return{spatialReference:null,updating:!0};case`failed`:return{spatialReference:null,updating:!1}}let r=((`supportedSpatialReferences`in n?n.supportedSpatialReferences:null)||[`tileInfo`in n?n.tileInfo?.spatialReference:n.spatialReference]).filter(Boolean),i=e.spatialReference;return i?{spatialReference:r.find(e=>i.equals(e))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}var pde=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function LO(e){if(!e)return!1;let t=new qo(ms(e));return!!t.authority&&pde.test(t.authority)}var RO=()=>E.getLogger(`esri.support.basemapUtils`);function mde(){return{}}function hde(e){for(let t in e){let n=e[t];n&&!n.destroyed&&n.destroy(),delete e[t]}}function gde(e,t){let n;if(typeof e==`string`){let r=e in zT,i=!r&&e.includes(`/`);if(!r&&!i){if(Ic())RO().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{let t=Object.entries(zT).filter(([e,t])=>t.classic||t.is3d).map(([e])=>`"${e}"`).sort().join(`, `);RO().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${t}`)}return null}t&&(n=t[e]),n||(n=r?yE.fromId(e):new yE({style:{id:e}}),t&&(t[e]=n))}else n=Lt(yE,e);return n?.destroyed&&(RO().warn(`The provided basemap is already destroyed`,{basemap:n}),n=null),n}function zO(e){return new Xh({getCollections:()=>[e.tables,e.layers],getChildrenFunction:e=>{let t=[];return`tables`in e&&t.push(e.tables),`layers`in e&&t.push(e.layers),t},itemFilterFunction:e=>{let t=e.parent;return!!t&&`tables`in t&&t.tables.includes(e)}})}function BO(e){for(let t of e.values())t?.destroy();e.clear()}var VO={"world-elevation":{id:`worldElevation`,url:`//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer`,layerType:`ArcGISTiledElevationServiceLayer`},"world-topobathymetry":{id:`worldTopoBathymetry`,url:`//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer`,layerType:`ArcGISTiledElevationServiceLayer`}};function _de(e){if(typeof e!=`string`)return Lt(WE,e);if(e in VO){let t=VO[e];return new WE({resourceInfo:{data:{layers:[t]}}})}return E.getLogger(`esri.support.groundUtils`).warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`),null}function HO(e,t,n){let r,i;if(e)for(let a=0,o=e.length;a<o;a++){if(r=e.at(a),r?.[t]===n)return r;if(r?.type===`group`&&(i=HO(r.layers,t,n),i))return i}}var UO=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.layers=new W;let t=e=>{e.parent&&e.removeFromParent()},n=e=>{e.parent=this,this.layerAdded(e),e.type!==`elevation`&&e.type!==`base-elevation`||E.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},r=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on(`before-add`,e=>{if(e.item===this)return e.preventDefault(),void E.getLogger(this).error(`#add()`,`Cannot add layer to itself.`);t(e.item)}),this.layers.on(`after-add`,e=>n(e.item)),this.layers.on(`after-remove`,e=>r(e.item))])}destroy(){let e=this.layers.toArray();for(let t of e)t.destroy();this.layers.destroy()}removeChildLayer(e){this.layers.remove(e),super.removeChildLayer?.(e)}get layers(){return this._get(`layers`)}set layers(e){this._set(`layers`,sT(e,this._get(`layers`)))}add(e,t){let n=this.layers;if(t=n.getNextIndex(t),e instanceof ZT){let r=e;r.parent===this?this.reorder(r,t):n.add(r,t)}else Ii(e)?e.then(e=>{this.destroyed||this.add(e,t)}):E.getLogger(this).error(`#add()`,`The item being added is not a Layer or a Promise that resolves to a Layer.`)}addMany(e,t){let n=this.layers,r=n.getNextIndex(t);e.slice().forEach(e=>{e.parent===this?this.reorder(e,r):(n.add(e,r),r+=1)})}findLayerById(e){return HO(this.layers,`id`,e)}findLayerByUid(e){return HO(this.layers,`uid`,e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,t){return this.layers.reorder(e,t)}layerAdded(e){}layerRemoved(e){}};return e([N()],r.prototype,`layers`,null),r=e([P(`esri.support.LayersMixin`)],r),r},vde=new Set([`feature`,`subtype-group`]);function WO(e,t,n){if(e)for(let r=0,i=e.length;r<i;r++){let i=e.at(r);if(i[t]===n)return i;if(i?.type===`group`){let e=WO(i.tables,t,n);if(e)return e}}}var GO=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.tables=new W,this.addHandles([this.tables.on(`after-add`,e=>{let t=e.item;t.parent&&t.parent!==this&&t.removeFromParent(),t.parent=this,vde.has(t.type)||E.getLogger(this).error(`Layer 'title:${t.title}, id:${t.id}' of type '${t.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on(`after-remove`,e=>{e.item.parent=null})])}destroy(){let e=this.tables.toArray();for(let t of e)t.destroy();this.tables.destroy()}removeChildLayer(e){this.tables.remove(e),super.removeChildLayer?.(e)}get tables(){return this._get(`tables`)}set tables(e){this._set(`tables`,sT(e,this._get(`tables`)))}findTableById(e){return WO(this.tables,`id`,e)}findTableByUid(e){return WO(this.tables,`uid`,e)}};return e([N()],r.prototype,`tables`,null),r=e([P(`esri.support.TablesMixin`)],r),r},KO=class extends GO(UO(Dh)){constructor(e){super(e),this.allLayers=new Xh({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>`layers`in e?e.layers:null}),this.focusAreas=new RD,this.allTables=zO(this),this.editableLayers=new Xh({getCollections:()=>[this.allLayers],itemFilterFunction:BD}),this._basemapCache=mde(),this.ground=new WE,this.addHandles(Bh(()=>this.ground,(e,t)=>{t?.parent===this&&(t.parent=null),e.parent=this},{sync:!0,initial:!0}))}destroy(){hde(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=zr(this.basemap),zr(this.ground),this._set(`ground`,null)}get basemap(){return this._get(`basemap`)}set basemap(e){this._set(`basemap`,gde(e,this._basemapCache))}get ground(){return this._get(`ground`)}set ground(e){let t=_de(e);t!=null&&this._set(`ground`,t)}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};e([N({readOnly:!0,dependsOn:[]})],KO.prototype,`allLayers`,void 0),e([N({type:RD,nonNullable:!0,json:{write:{overridePolicy:e=>({enabled:e.areas.length>0,ignoreOrigin:!0})}}})],KO.prototype,`focusAreas`,void 0),e([N({readOnly:!0})],KO.prototype,`allTables`,void 0),e([N({type:yE,useTypeForAutocast:!1,json:{read:{source:`baseMap`},write:{target:`baseMap`}},value:null})],KO.prototype,`basemap`,null),e([N({readOnly:!0})],KO.prototype,`editableLayers`,void 0),e([N({type:WE,useTypeForAutocast:!1,nonNullable:!0})],KO.prototype,`ground`,null),e([N()],KO.prototype,`undoRedo`,void 0),KO=e([P(`esri.Map`)],KO);var qO=KO,JO=class extends W{constructor(e){super(e),this.addHandles([this.on(`before-add`,e=>{e.item??e.preventDefault()}),this.on(`after-add`,e=>this._own(e.item)),this.on(`after-remove`,e=>this._release(e.item))])}get owner(){return this._get(`owner`)}set owner(e){this.destroyed||e!==this._get(`owner`)&&(this._releaseAll(),this._set(`owner`,e),this._ownAll())}_ownAll(){for(let e of this.items)this._own(e)}_releaseAll(){for(let e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(W.ofType(this.itemType.Type))(e):new W(e)}};function YO(e,t){return{type:e,cast:cT,set(n){let r=sT(n,this._get(t),e);r&&!r.destroyed&&(r.owner=this),this._set(t,r)}}}e([O()],JO.prototype,`owner`,null),JO=e([P(`esri.core.support.OwningCollection`)],JO);var XO,ZO=Cr()({orthometric:`gravity-related-height`,gravity_related_height:`gravity-related-height`,ellipsoidal:`ellipsoidal`}),QO=ZO.jsonValues.slice();se(QO,`orthometric`);var $O=Cr()({meter:`meters`,foot:`feet`,"us-foot":`us-feet`,"clarke-foot":`clarke-feet`,"clarke-yard":`clarke-yards`,"clarke-link":`clarke-links`,"sears-yard":`sears-yards`,"sears-foot":`sears-feet`,"sears-chain":`sears-chains`,"benoit-1895-b-chain":`benoit-1895-b-chains`,"indian-yard":`indian-yards`,"indian-1937-yard":`indian-1937-yards`,"gold-coast-foot":`gold-coast-feet`,"sears-1922-truncated-chain":`sears-1922-truncated-chains`,"50-kilometers":`50-kilometers`,"150-kilometers":`150-kilometers`}),ek=XO=class extends L{constructor(e){super(e),this.heightModel=`gravity-related-height`,this.heightUnit=`meters`,this.vertCRS=null}writeHeightModel(e,t,n){return ZO.write(e,t,n)}readHeightModel(e,t,n){return ZO.read(e)||(n?.messages&&n.messages.push(yde(e,{context:n})),null)}readHeightUnit(e,t,n){return $O.read(e)||(n?.messages&&n.messages.push(tk(e,{context:n})),null)}readHeightUnitService(e,t,n){return Tu(e)||$O.read(e)||(n?.messages&&n.messages.push(tk(e,{context:n})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new XO({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){let n=Du(t);return new XO({heightModel:e.heightModel,heightUnit:n??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:`web-scene`,...t},super.write(e,t)}static fromJSON(e){if(!e)return null;let t=new XO;return t.read(e,{origin:`web-scene`}),t}};function tk(e,t){return new zn(`height-unit:unsupported`,`Height unit of value '${e}' is not supported`,t)}function yde(e,t){return new zn(`height-model:unsupported`,`Height model of value '${e}' is not supported`,t)}e([N({type:ZO.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:QO,default:`ellipsoidal`,write:{isRequired:!0}}}}})],ek.prototype,`heightModel`,void 0),e([M(`web-scene`,`heightModel`)],ek.prototype,`writeHeightModel`,null),e([j([`web-scene`,`service`],`heightModel`)],ek.prototype,`readHeightModel`,null),e([N({type:$O.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$O.jsonValues,write:{writer:$O.write,isRequired:!0}}}}})],ek.prototype,`heightUnit`,void 0),e([j(`web-scene`,`heightUnit`)],ek.prototype,`readHeightUnit`,null),e([j(`service`,`heightUnit`)],ek.prototype,`readHeightUnitService`,null),e([N({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ek.prototype,`vertCRS`,void 0),e([j(`service`,`vertCRS`,[`vertCRS`,`ellipsoid`,`geoid`])],ek.prototype,`readVertCRS`,null),ek=XO=e([P(`esri.geometry.HeightModelInfo`)],ek);var nk=class extends JO{constructor(e){super(e),this.addHandles(this.on(`before-add`,e=>{e.item!=null&&e.item.parent===this.owner&&(E.getLogger(this).warn(`Analysis inside the collection must be unique. Not adding this element again.`),e.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};nk=e([P(`esri.support.AnalysesCollection`)],nk);function rk(e){return typeof e==`number`}function bde(e){return typeof e==`number`&&isFinite(e)&&Math.floor(e)===e}function xde(e){return typeof e==`boolean`}function ik(e){return typeof e==`string`||e instanceof String}function ak(e){return e==null||ik(e)}function Sde(e){return Array.isArray(e)}function ok(e){return e?.declaredClass===`esri.Graphic`}function Cde(e){return e instanceof Date}var sk;async function wde(){return sk??=R(()=>import(`./WhereClauseCache-BQe8QpPQ.js`),__vite__mapDeps([252,7,8])).then(e=>new e.WhereClauseCache(500,500)),sk}async function ck(e,t){let n=await wde(),r=n.get(e,t);if(r==null)throw n.getError(e,t);return r}function lk(e,t){return e||=null,t||=null,e===`1=1`?t??e:t===`1=1`?e??t:e&&t?`(${e}) AND (${t})`:e??t}function uk(e,t){return e||=null,t||=null,e===`1=1`||t===`1=1`||e===t?e===`1=1`?e:t:e&&t?`(${e}) OR (${t})`:e??t}function dk(e,t){return t.length===0?null:`${e} IN (${Tde(t)})`}function Tde(e){return e.map(e=>typeof e==`string`?Ede(e):e).join(`,`)}function Ede(e,t){return`${t??``}'${e.replaceAll(`'`,`''`)}'`}var Dde=`HH:mm`,Ode=`HH:mm:ss`,kde=`HH:mm:ss.SSS`,Ade=[kde,Ode,Dde,`TT`],jde=`yyyy-MM-dd`;function fk(e){if(!e||!ik(e))return null;let t=Sb.fromFormat(e,jde);return t.isValid?t:null}function pk(e){return e&&ik(e)?Gee(Ade,t=>{let n=Sb.fromFormat(e,t);return n.isValid?n:null})??null:null}function mk(e){if(!e||!ik(e))return null;let t=Sb.fromISO(e);return t.isValid?t:null}var hk=new Set([`integer`,`small-integer`,`long`,`big-integer`,`esriFieldTypeInteger`,`esriFieldTypeSmallInteger`,`esriFieldTypeLong`,`esriFieldTypeBigInteger`]);function Mde(e){return e!=null&&hk.has(e.type)}function gk(e){return e!=null&&(e.type===`date-only`||e.type===`esriFieldTypeDateOnly`)}function _k(e){return e!=null&&(e.type===`timestamp-offset`||e.type===`esriFieldTypeTimestampOffset`)}function vk(e){return e!=null&&(e.type===`time-only`||e.type===`esriFieldTypeTimeOnly`)}fa(hk,new Set([...[`single`,`double`],...[`esriFieldTypeSingle`,`esriFieldTypeDouble`]]));function Nde(e,t){let n=t??e?.domain;if(!n||n.type!==`range`)return;let r=`range`in n?n.range[0]:n.minValue,i=`range`in n?n.range[1]:n.maxValue,a=Mde(e);return gk(e)||vk(e)||_k(e)?{...Pde(e,i,r),isInteger:a}:{min:r!=null&&typeof r==`number`?r:null,max:i!=null&&typeof i==`number`?i:null,rawMin:r,rawMax:i,isInteger:a}}function Pde(e,t,n){return gk(e)?{min:fk(n)?.toMillis(),max:fk(t)?.toMillis(),rawMin:n,rawMax:t}:vk(e)?{min:pk(n)?.toMillis(),max:pk(t)?.toMillis(),rawMin:n,rawMax:t}:_k(e)?{min:mk(n)?.toMillis(),max:mk(t)?.toMillis(),rawMin:n,rawMax:t}:{max:null,min:null}}function Fde(e){if(!e)return;let t=e.match(Ide);return t?.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}var Ide=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function Lde(e){return e.match(Rde)?.[1]?.replaceAll(`\\'`,`'`)??null}var Rde=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/,yk;function bk(){return yk||=(async()=>{let[e,t,n]=await Promise.all([R(()=>import(`./arcadeUtils-hLsIIY_S.js`),__vite__mapDeps([253,254,255,218,6,256,257,258,259,11,12,5,13,260,261,262,263,7,165,264,265,266,267,268,222,223,269])),R(()=>import(`./batchExec-DMEEKqnI.js`),__vite__mapDeps([270,1])),R(()=>import(`./aiServices-UDYWixFW.js`),__vite__mapDeps([271,254,255,218,6,260,267,268]))]);return{arcade:e.arcade,arcadeUtils:e,batchExec:t,aiServices:n,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel,Pixel:e.Pixel}})(),yk}var zde=/^([0-9_])/,Bde=/[^a-z0-9_\u0080-\uffff]+/gi;function xk(e){return e==null?null:e.trim().replaceAll(Bde,`_`).replace(zde,`F$1`)||null}var Vde=[`field`,`field2`,`field3`,`normalizationField`,`rotationInfo.field`,`proportionalSymbolInfo.field`,`proportionalSymbolInfo.normalizationField`,`colorInfo.field`,`colorInfo.normalizationField`],Hde=[`field`,`normalizationField`];function Sk(e,t){if(e!=null&&t!=null){for(let n of Array.isArray(e)?e:[e])if(Ck(Vde,n,t),`visualVariables`in n&&n.visualVariables)for(let e of n.visualVariables)Ck(Hde,e,t)}}function Ck(e,t,n){if(e)for(let r of e){let e=Ye(r,t),i=e&&typeof e!=`function`&&n.get(e);i&&Xe(r,i.name,t)}}function wk(e,t){if(e!=null&&t?.fields?.length)if(`startField`in e){let n=t.get(e.startField),r=t.get(e.endField);e.startField=n?.name??null,e.endField=r?.name??null}else{let n=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=n?.name??null,e.endTimeField=r?.name??null}}var Tk=new Set;function Ek(e,t){return e&&t?(Tk.clear(),Dk(Tk,e,t),Array.from(Tk).sort()):[]}function Dk(e,t,n){if(n)if(t?.fields?.length)if(n.includes(`*`))for(let{name:n}of t.fields)e.add(n);else for(let r of n)Ok(e,t,r);else{if(n.includes(`*`))return e.clear(),void e.add(`*`);for(let t of n)t!=null&&e.add(t)}}function Ok(e,t,n){if(typeof n==`string`)if(t){let r=t.get(n);r&&e.add(r.name)}else e.add(n)}function Ude(e,t){return t==null||e==null?[]:t.includes(`*`)?(e.fields??[]).map(e=>e.name):t}function Wde(e,t,n=1){if(!t||!e)return[];if(t.includes(`*`))return[`*`];let r=Ek(e,t);return r.length/e.fields.length>=n?[`*`]:r}async function kk(e,t,n,r){if(!r)return;let i=Fde(r);if(i)Ok(e,t,i);else{let{arcadeUtils:i}=await bk(),a=i.extractFieldNames(r,n?.partitions??t?.fields?.map(e=>e.name));for(let r of a)Ok(e,n?.index??t,r)}}async function Ak(e,t,n){if(n&&n!==`1=1`){let r=await ck(n,t);if(!r.isStandardized)throw new D(`fieldUtils:collectFilterFields`,`Where clause is not standardized`,{where:n});Dk(e,t,r.fieldNames)}}function Gde({displayField:e,fields:t}){return e||(t?.length?Kde(t):null)}function Kde(e){return jk(e,`name-or-title`)||jk(e,`unique-identifier`)||jk(e,`type-or-category`)||qde(e)}function qde(e){for(let t of e){if(!t?.name)continue;let e=t.name.toLowerCase();if(e.includes(`name`)||e.includes(`title`))return t.name}return null}function jk(e,t){for(let n of e)if(n?.valueType&&n.valueType===t)return n.name;return null}async function Jde(e,t){if(!t)return;let n=t.elevationInfo?.featureExpressionInfo;return n?n.collectRequiredFields(e,t.fieldsIndex):void 0}function Yde(e,t,n){n.onStatisticExpression?kk(e,t,null,n.onStatisticExpression.expression):e.add(n.onStatisticField)}async function Xde(e,t,n){if(!t||!n||!(`fields`in n))return;let r=[],i=n.popupTemplate;r.push(Mk(e,t,i)),n.fields&&r.push(...n.fields.map(async n=>Yde(e,t.fieldsIndex,n))),await Promise.all(r)}async function Zde(e,t){let{fieldsIndex:n,trackInfo:r}=t;if(!t||!r||!n)return;let i=[r.latestObservations.renderer?.collectRequiredFields(e,n),r.previousObservations.renderer?.collectRequiredFields(e,n),r.trackLines.renderer?.collectRequiredFields(e,n)];r.popupTemplate&&i.push(Mk(e,t,r.popupTemplate));for(let t of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(t)for(let r of t)i.push(Ik(e,n,r));await Promise.all(i)}async function Mk(e,t,n){let r=[];n?.expressionInfos&&r.push(...n.expressionInfos.map(n=>kk(e,t.fieldsIndex,null,n.expression)));let i=n?.content;if(Array.isArray(i))for(let n of i)n.type===`expression`&&n.expressionInfo&&r.push(kk(e,t.fieldsIndex,null,n.expressionInfo.expression));await Promise.all(r)}async function Qde(e,t,n){t&&(t.timeInfo&&n?.timeExtent&&Dk(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Dk(e,t.fieldsIndex,[t.floorInfo.floorField]),n?.where!=null&&await Ak(e,t.fieldsIndex,n.where))}async function $de(e,t,n){t&&n&&await Promise.all(n.map(n=>efe(e,t,n)))}async function efe(e,t,n){t&&n&&(n.valueExpression?await kk(e,t.fieldsIndex,null,n.valueExpression):n.field&&Ok(e,t.fieldsIndex,n.field))}function tfe(e){return e?Ek(e.fieldsIndex,Nk(e)):[]}function nfe(e){if(!e)return[];let t=e.geometryFieldsInfo;return t?Ek(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function rfe(e,t,n){if(!t||!n)return;let r=t.fieldsIndex;await Promise.all(n.filters.map(t=>Ak(e,r,t.where)))}var ife=new Set([`oid`,`global-id`,`guid`]),afe=new Set([`oid`,`global-id`]),ofe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function sfe(e){let t=new Set;Pk(e).forEach(e=>t.add(e)),nfe(e).forEach(e=>t.add(e.toLowerCase()));let n=e&&`infoFor3D`in e?e.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(e=>t.add(e.toLowerCase())),Object.values(n.transformFieldRoles).forEach(e=>t.add(e.toLowerCase()))),Array.from(t)}function Nk(e){if(!e)return[];let t=`editFieldsInfo`in e&&e.editFieldsInfo;if(!t)return[];let{creationDateField:n,creatorField:r,editDateField:i,editorField:a}=t;return[n,r,i,a].filter(Boolean)}function Pk(e){return Nk(e).map(e=>e.toLowerCase())}function Fk(e,t){return e.editable&&!ife.has(e.type)&&!Pk(t).includes(e.name?.toLowerCase()??``)}function cfe(e,t){let n=e.name?.toLowerCase()??``;return!(t?.objectIdField!=null&&n===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&n===t.globalIdField.toLowerCase()||sfe(t).includes(n)||afe.has(e.type)||ofe.some(e=>e.test(n)))}async function lfe(e,t){let{labelingInfo:n,fieldsIndex:r}=t;n?.length&&await Promise.all(n.map(t=>Ik(e,r,t)))}async function Ik(e,t,n){if(!n)return;let r=n.getLabelExpression(),i=n.where;if(r.type===`arcade`)await kk(e,t,null,r.expression);else{let n=r.expression.match(/{[^}]*}/g);n&&n.forEach(n=>{Ok(e,t,n.slice(1,-1))})}await Ak(e,t,i)}function Lk(e){let t=e.defaultValue;return t!==void 0&&zk(e,t)?t:e.nullable?null:void 0}function ufe(e){let t=typeof e==`string`?{type:e}:e;return Wk(t)?255:t.type===`esriFieldTypeDate`||t.type===`date`?8:void 0}function Rk(e){return typeof e==`number`&&!isNaN(e)&&isFinite(e)}function dfe(e){return e===null||Rk(e)}function ffe(e){return e===null||Number.isInteger(e)}function pfe(){return!0}function zk(e,t){let n;switch(e.type){case`date`:case`integer`:case`long`:case`small-integer`:case`big-integer`:case`esriFieldTypeDate`:case`esriFieldTypeInteger`:case`esriFieldTypeLong`:case`esriFieldTypeSmallInteger`:case`esriFieldTypeBigInteger`:n=e.nullable?ffe:Number.isInteger;break;case`double`:case`single`:case`esriFieldTypeSingle`:case`esriFieldTypeDouble`:n=e.nullable?dfe:Rk;break;case`string`:case`esriFieldTypeString`:n=e.nullable?ak:ik;break;default:n=pfe}return arguments.length===1?n:n(t)}var Bk=[`integer`,`small-integer`,`big-integer`,`long`],Vk=[`single`,`double`];[...Bk,...Vk];var mfe=[`esriFieldTypeInteger`,`esriFieldTypeSmallInteger`,`esriFieldTypeLong`,`esriFieldTypeBigInteger`],hfe=[`esriFieldTypeSingle`,`esriFieldTypeDouble`],Hk=new Set([...Bk,...mfe]),gfe=new Set([...Vk,...hfe]),_fe=fa(Hk,gfe);function vfe(e){return e!=null&&Hk.has(e.type)}function Uk(e){return e!=null&&_fe.has(e.type)}function Wk(e){return e!=null&&(e.type===`string`||e.type===`esriFieldTypeString`)}function Gk(e){return e!=null&&(e.type===`date`||e.type===`esriFieldTypeDate`)}function Kk(e){return e!=null&&(e.type===`date-only`||e.type===`esriFieldTypeDateOnly`)}function qk(e){return e!=null&&(e.type===`timestamp-offset`||e.type===`esriFieldTypeTimestampOffset`)}function Jk(e){return e!=null&&(e.type===`time-only`||e.type===`esriFieldTypeTimeOnly`)}function Yk(e){return e!=null&&(e.type===`oid`||e.type===`esriFieldTypeOID`)}function Xk(e){return e!=null&&(e.type===`global-id`||e.type===`esriFieldTypeGlobalID`)}function yfe(e,t){return Zk(e,t)===null}function bfe(e){return e==null||typeof e==`number`&&isNaN(e)?null:e}function Zk(e,t){return e==null||e.nullable&&t===null?null:zk(e,t)?Uk(e)&&!xfe(e.type,Number(t))?`numeric-range-validation-error::out-of-range`:null:`type-validation-error::invalid-type`}function xfe(e,t){let n=typeof e==`string`?Qk(e):e;if(!n)return!1;let r=n.min,i=n.max;return n.isInteger?Number.isInteger(t)&&t>=r&&t<=i:t>=r&&t<=i}function Qk(e){switch(e){case`esriFieldTypeSmallInteger`:case`small-integer`:return Sfe;case`esriFieldTypeInteger`:case`esriFieldTypeLong`:case`integer`:case`long`:return Cfe;case`esriFieldTypeBigInteger`:case`big-integer`:return wfe;case`esriFieldTypeSingle`:case`single`:return Tfe;case`esriFieldTypeDouble`:case`double`:return Efe}}var Sfe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Cfe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},wfe={min:-(2**53-1),max:2**53-1,isInteger:!0,rawMin:-(2**53-1),rawMax:2**53-1},$k=(2-2**-23)*2**127,Tfe={min:-$k,max:$k,isInteger:!1,rawMin:-$k,rawMax:$k},Efe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Dfe(e,t,n){switch(e){case`domain-validation-error::invalid-coded-value`:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case`domain-validation-error::value-out-of-range`:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case`type-validation-error::invalid-type`:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case`numeric-range-validation-error::out-of-range`:{let{min:e,max:r}=Qk(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${r}`}}}function eA(e,t){return!Ofe(e,t,null)}function Ofe(e,t,n){if(!e?.attributes||!t){if(n!=null)for(let e of t??[])n.add(e);return!0}let r=new Set(Object.keys(e.attributes)),i=!1;for(let e of t)if(!r.has(e)){if(i=!0,n==null)break;n.add(e)}return i}function tA(e){return!!e&&[`raster.itempixelvalue`,`raster.servicepixelvalue`].some(t=>e.toLowerCase().startsWith(t))}function nA(e){let t=e?.match(/{[^}]+}/g);return t?t.map(e=>e.slice(1,-1).split(`:`)[0].trim()):[]}var rA=class extends L{constructor(e){super(e),this.type=null}};e([N({type:[`attachments`,`custom`,`fields`,`media`,`text`,`expression`,`relationship`,`utility-network-associations`],readOnly:!0,json:{read:!1,write:!0}})],rA.prototype,`type`,void 0),rA=e([P(`esri.popup.content.Content`)],rA);var iA=rA,aA=new xr({asc:`ascending`,desc:`descending`}),oA=class extends I(L){constructor(e){super(e),this.field=null,this.order=`ascending`}};e([N({type:String,json:{write:!0}})],oA.prototype,`field`,void 0),e([N({type:aA.apiValues,json:{type:aA.jsonValues,read:aA.read,write:aA.write}})],oA.prototype,`order`,void 0),oA=e([P(`esri.popup.support.AttachmentsOrderByInfo`)],oA);var sA=oA,cA=class extends I(iA){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType=`auto`,this.orderByFields=null,this.title=null,this.type=`attachments`}};e([N({type:[String],json:{write:!0}})],cA.prototype,`attachmentKeywords`,void 0),e([N({type:[[`application`,`audio`,`image`,`model`,`text`,`video`]],json:{write:!0}})],cA.prototype,`attachmentTypes`,void 0),e([N({type:String,json:{write:!0}})],cA.prototype,`description`,void 0),e([N({type:[`auto`,`preview`,`list`],json:{write:!0}})],cA.prototype,`displayType`,void 0),e([N({type:[sA],json:{write:!0}})],cA.prototype,`orderByFields`,void 0),e([N({type:String,json:{write:!0}})],cA.prototype,`title`,void 0),e([N({type:[`attachments`],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],cA.prototype,`type`,void 0),cA=e([P(`esri.popup.content.AttachmentsContent`)],cA);var lA=cA,uA,dA=uA=class extends iA{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type=`custom`}clone(){return new uA({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?C(this.outFields):null})}};e([N()],dA.prototype,`creator`,void 0),e([N()],dA.prototype,`destroyer`,void 0),e([N()],dA.prototype,`outFields`,void 0),e([N({type:[`custom`],readOnly:!0})],dA.prototype,`type`,void 0),dA=uA=e([P(`esri.popup.content.CustomContent`)],dA);var kfe=dA,fA,pA=fA=class extends L{constructor(e){super(e),this.title=null,this.expression=null,this.returnType=`dictionary`}clone(){return new fA({title:this.title,expression:this.expression})}};e([N({type:String,json:{write:!0}})],pA.prototype,`title`,void 0),e([N({type:String,json:{write:!0}})],pA.prototype,`expression`,void 0),e([N({type:[`dictionary`],readOnly:!0,json:{read:!1,write:!0}})],pA.prototype,`returnType`,void 0),pA=fA=e([P(`esri.popup.ElementExpressionInfo`)],pA);var mA=pA,hA,gA=hA=class extends iA{constructor(e){super(e),this.expressionInfo=null,this.type=`expression`}clone(){return new hA({expressionInfo:this.expressionInfo?.clone()})}};e([N({type:mA,json:{write:!0}})],gA.prototype,`expressionInfo`,void 0),e([N({type:[`expression`],readOnly:!0,json:{read:!1,write:!0}})],gA.prototype,`type`,void 0),gA=hA=e([P(`esri.popup.content.ExpressionContent`)],gA);var Afe=gA,_A=class extends I(L){constructor(e){super(e),this.type=null}};e([O({type:[`date-time`,`number`],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],_A.prototype,`type`,void 0),_A=e([hr(`esri.layers.support.FieldFormat`)],_A);var vA=_A,yA=`auto`,bA=class extends vA{constructor(e){super(e),this.dateStyle=null,this.hour12=yA,this.month=null,this.timeStyle=null,this.type=`date-time`,this.year=null}};e([O({type:[`full`,`long`,`medium`,`short`],json:{write:!0}})],bA.prototype,`dateStyle`,void 0),e([O({type:[`always`,`auto`,`never`],nonNullable:!0,json:{default:yA,write:!0}})],bA.prototype,`hour12`,void 0),e([O({type:[`long`,`short`],json:{write:!0}})],bA.prototype,`month`,void 0),e([O({type:[`full`,`long`,`medium`,`short`],json:{write:!0}})],bA.prototype,`timeStyle`,void 0),e([O({type:[`date-time`]})],bA.prototype,`type`,void 0),e([O({type:[`numeric`],json:{write:!0}})],bA.prototype,`year`,void 0),bA=e([hr(`esri.layers.support.DateTimeFieldFormat`)],bA);var xA=bA,SA={min:0,max:20},CA=2,wA=0,TA=`decimal`,EA=`auto`,DA=class extends vA{constructor(e){super(e),this.maximumFractionDigits=CA,this.minimumFractionDigits=wA,this.style=TA,this.type=`number`,this.useGrouping=EA}};e([O({type:Wt,nonNullable:!0,range:SA,json:{default:CA,write:!0}})],DA.prototype,`maximumFractionDigits`,void 0),e([O({type:Wt,nonNullable:!0,range:SA,json:{default:wA,write:!0}})],DA.prototype,`minimumFractionDigits`,void 0),e([O({type:[`decimal`],nonNullable:!0,json:{default:TA,write:!0}})],DA.prototype,`style`,void 0),e([O({type:[`number`]})],DA.prototype,`type`,void 0),e([O({type:[`always`,`auto`,`never`],nonNullable:!0,json:{default:EA,write:!0}})],DA.prototype,`useGrouping`,void 0),DA=e([hr(`esri.layers.support.NumberFieldFormat`)],DA);var OA=DA,kA=class extends I(L){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};e([A(Xoe)],kA.prototype,`dateFormat`,void 0),e([N({type:Boolean,json:{write:!0}})],kA.prototype,`digitSeparator`,void 0),e([N({type:Wt,json:{write:!0}})],kA.prototype,`places`,void 0),kA=e([P(`esri.popup.support.FieldInfoFormat`)],kA);var AA=kA,jA={base:vA,key:`type`,errorContext:`field-configuration-field-format`,typeMap:{"date-time":xA,number:OA}};function MA(e,t){let{format:n}=e;return t&&PA(t)?n?NA(n,t):ej(t,{hour12:`always`,useGrouping:`always`}):null}function NA(e,t){let{dateFormat:n}=e;if(!t)return n?LA(e):IA(e);if(!PA(t))return;let r={hour12:`always`};switch(t.type){case`integer`:case`small-integer`:case`big-integer`:case`long`:return FA(e);case`single`:case`double`:return IA(e);case`date`:case`timestamp-offset`:return n?LA(e):ej(t,r);case`date-only`:return n?RA(e):ej(t);case`time-only`:return n?zA(e):ej(t,r)}}function PA(e){return Uk(e)||Gk(e)||Kk(e)||Jk(e)||qk(e)}function FA(e){return new OA({useGrouping:e.digitSeparator?`always`:`never`})}function IA(e){let t=FA(e),{places:n}=e;return t.minimumFractionDigits=n??0,t.maximumFractionDigits=n??2,t}function LA(e){return new xA({dateStyle:BA(e),year:WA(e),month:HA(e),timeStyle:UA(e),hour12:VA(e)})}function RA(e){return new xA({dateStyle:BA(e),year:WA(e),month:HA(e)})}function zA(e){return new xA({timeStyle:UA(e),hour12:VA(e)})}function BA(e){let{dateFormat:t}=e;return t?t.startsWith(`short-date`)?`short`:t.startsWith(`day-short-month-year`)?`medium`:t.startsWith(`long-month-day-year`)?`long`:t.startsWith(`long-date`)?`full`:null:null}function VA(e){return e.dateFormat?.endsWith(`-24`)?`never`:`always`}function HA(e){switch(e.dateFormat){case`short-month-year`:return`short`;case`long-month-year`:return`long`;default:return null}}function UA(e){let{dateFormat:t}=e;return t?t.includes(`short-time`)?`short`:t.includes(`long-time`)?`medium`:null:null}function WA(e){switch(e.dateFormat){case`short-month-year`:case`long-month-year`:case`year`:return`numeric`;default:return null}}function GA(e,t){let n=e.type===`number`,r=e.type===`date-time`;if(!t)return n?qA(e):r?JA(e):null;if(PA(t))switch(t.type){case`integer`:case`small-integer`:case`big-integer`:case`long`:return n?KA(e):null;case`single`:case`double`:return n?qA(e):null;case`date`:case`timestamp-offset`:return r?JA(e):null;case`date-only`:return r?YA(e):null;case`time-only`:return r?XA(e):null}}function KA(e){return new AA({digitSeparator:e.useGrouping!==`never`})}function qA(e){let t=KA(e);return t.places=e.maximumFractionDigits,t}function JA(e){let t,n=ZA(e),r=QA(e),i=e.hour12===`never`?`24`:null,a=e.year===`numeric`?`year`:null,o=$A(e);return n&&r&&i?t=`${n}-${r}-${i}`:n&&r?t=`${n}-${r}`:n?t=n:a&&o?t=`${o}-${a}`:a&&(t=a),t?new AA({dateFormat:t}):null}function YA(e){let t,n=ZA(e),r=e.year===`numeric`?`year`:null,i=$A(e);return n?t=n:r&&i?t=`${i}-${r}`:r&&(t=r),t?new AA({dateFormat:t}):null}function XA(e){let t,n=QA(e),r=e.hour12===`never`?`24`:null;return n&&r?t=`short-date-${n}-${r}`:n&&(t=`short-date-${n}`),t?new AA({dateFormat:t}):null}function ZA(e){switch(e.dateStyle){case`short`:return`short-date`;case`medium`:return`day-short-month-year`;case`long`:return`long-month-day-year`;case`full`:return`long-date`;default:return}}function QA(e){return e.timeStyle&&(e.timeStyle===`short`?`short-time`:`long-time`)}function $A(e){switch(e.month){case`short`:return`short-month`;case`long`:return`long-month`;default:return}}function ej(e,t){if(!PA(e))return;let n=t?.useGrouping??`auto`,r=t?.hour12??`auto`;switch(e.type){case`integer`:case`small-integer`:case`big-integer`:case`long`:return new OA({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:n});case`single`:case`double`:return new OA({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:n});case`date`:case`timestamp-offset`:return new xA({dateStyle:`short`,timeStyle:`short`,hour12:r});case`date-only`:return new xA({dateStyle:`short`});case`time-only`:return new xA({timeStyle:`short`,hour12:r})}}var tj=class extends I(L){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption=`text-box`,this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set(`fieldFormat`,e),this._set(`format`,e?GA(e):null)}set format(e){this._set(`format`,e),this._set(`fieldFormat`,e?NA(e):null)}readFormat(e,t){if(!t.fieldFormat)return e?AA.fromJSON(e):null}clone(){let e=super.clone();return e._set(`format`,this.format?.clone()),e._set(`fieldFormat`,this.fieldFormat?.clone()),e}};e([N({value:null,clonable:!1,types:jA,json:{write:{overridePolicy(e,t,n){let{fieldName:r}=this;return{enabled:!!r&&!r.startsWith(`expression/`)&&!r.startsWith(`relationships/`)&&!!n?.writeFieldFormat}}}}})],tj.prototype,`fieldFormat`,null),e([N({type:String,json:{write:!0}})],tj.prototype,`fieldName`,void 0),e([N({value:null,clonable:!1,type:AA,json:{write:!0}})],tj.prototype,`format`,null),e([j(`format`)],tj.prototype,`readFormat`,null),e([N({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],tj.prototype,`isEditable`,void 0),e([N({type:String,json:{write:!0}})],tj.prototype,`label`,void 0),e([N({type:[`count`,`sum`,`min`,`max`,`avg`,`stddev`,`var`],json:{write:!0}})],tj.prototype,`statisticType`,void 0),e([A(new xr({richtext:`rich-text`,textarea:`text-area`,textbox:`text-box`}),{default:`text-box`})],tj.prototype,`stringFieldOption`,void 0),e([N({type:String,json:{write:!0}})],tj.prototype,`tooltip`,void 0),e([N({type:Boolean,json:{write:!0}})],tj.prototype,`visible`,void 0),tj=e([P(`esri.popup.FieldInfo`)],tj);var nj=tj,rj,ij=rj=class extends iA{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type=`fields`}clone(){return new rj(C({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};e([N({type:Object,json:{write:!0}})],ij.prototype,`attributes`,void 0),e([N({type:String,json:{write:!0}})],ij.prototype,`description`,void 0),e([N({type:[nj],json:{write:!0}})],ij.prototype,`fieldInfos`,void 0),e([N({type:String,json:{write:!0}})],ij.prototype,`title`,void 0),e([N({type:[`fields`],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ij.prototype,`type`,void 0),ij=rj=e([P(`esri.popup.content.FieldsContent`)],ij);var aj=ij,oj=class extends L{constructor(e){super(e),this.altText=null,this.caption=``,this.title=``,this.type=null}};e([N({type:String,json:{write:!0}})],oj.prototype,`altText`,void 0),e([N({type:String,json:{write:!0}})],oj.prototype,`caption`,void 0),e([N({type:String,json:{write:!0}})],oj.prototype,`title`,void 0),e([N({type:[`image`,`bar-chart`,`column-chart`,`line-chart`,`pie-chart`],readOnly:!0,json:{read:!1,write:!0}})],oj.prototype,`type`,void 0),oj=e([P(`esri.popup.content.mixins.MediaInfo`)],oj);var sj=oj,cj,lj=cj=class extends F{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new cj({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};e([N()],lj.prototype,`color`,void 0),e([N()],lj.prototype,`fieldName`,void 0),e([N()],lj.prototype,`tooltip`,void 0),e([N()],lj.prototype,`value`,void 0),lj=cj=e([P(`esri.popup.content.support.ChartMediaInfoValueSeries`)],lj);var uj=lj,dj,fj=dj=class extends L{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new dj({colors:C(this.colors),fields:C(this.fields),normalizeField:this.normalizeField,series:C(this.series),tooltipField:this.tooltipField})}};e([N({type:[J],json:{type:[[Wt]],write:!0}})],fj.prototype,`colors`,void 0),e([N({type:[String],json:{write:{isRequired:!0}}})],fj.prototype,`fields`,void 0),e([N({type:String,json:{write:!0}})],fj.prototype,`normalizeField`,void 0),e([N({type:[uj],json:{read:!1}})],fj.prototype,`series`,void 0),e([N({type:String,json:{write:!0}})],fj.prototype,`tooltipField`,void 0),fj=dj=e([P(`esri.popup.content.support.ChartMediaInfoValue`)],fj);var pj=fj,mj=class extends sj{constructor(e){super(e),this.type=null,this.value=void 0}};e([N({type:[`bar-chart`,`column-chart`,`line-chart`,`pie-chart`],readOnly:!0,json:{read:!1,write:!0}})],mj.prototype,`type`,void 0),e([N({type:pj,json:{write:{isRequired:!0}}})],mj.prototype,`value`,void 0),mj=e([P(`esri.popup.content.mixins.ChartMediaInfo`)],mj);var hj=mj,gj=Cr()({barchart:`bar-chart`,columnchart:`column-chart`,linechart:`line-chart`,piechart:`pie-chart`}),_j,vj=_j=class extends hj{constructor(e){super(e),this.type=`bar-chart`}clone(){return new _j({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};e([N({type:[`bar-chart`],readOnly:!0,json:{type:[`barchart`],read:!1,write:{writer:gj.write,isRequired:!0}}})],vj.prototype,`type`,void 0),vj=_j=e([P(`esri.popup.content.BarChartMediaInfo`)],vj);var yj=vj,bj,xj=bj=class extends hj{constructor(e){super(e),this.type=`column-chart`}clone(){return new bj({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};e([N({type:[`column-chart`],readOnly:!0,json:{type:[`columnchart`],read:!1,write:{writer:gj.write,isRequired:!0}}})],xj.prototype,`type`,void 0),xj=bj=e([P(`esri.popup.content.ColumnChartMediaInfo`)],xj);var Sj=xj,Cj,wj=Cj=class extends L{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new Cj({linkURL:this.linkURL,sourceURL:this.sourceURL})}};e([N({type:String,json:{write:!0}})],wj.prototype,`linkURL`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],wj.prototype,`sourceURL`,void 0),wj=Cj=e([P(`esri.popup.content.support.ImageMediaInfoValue`)],wj);var Tj=wj,Ej,Dj=Ej=class extends sj{constructor(e){super(e),this.refreshInterval=0,this.type=`image`,this.value=void 0}clone(){return new Ej({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};e([N({type:Number,json:{write:!0}})],Dj.prototype,`refreshInterval`,void 0),e([N({type:[`image`],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Dj.prototype,`type`,void 0),e([N({type:Tj,json:{write:{isRequired:!0}}})],Dj.prototype,`value`,void 0),Dj=Ej=e([P(`esri.popup.content.ImageMediaInfo`)],Dj);var Oj=Dj,kj,Aj=kj=class extends hj{constructor(e){super(e),this.type=`line-chart`}clone(){return new kj({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};e([N({type:[`line-chart`],readOnly:!0,json:{type:[`linechart`],read:!1,write:{writer:gj.write,isRequired:!0}}})],Aj.prototype,`type`,void 0),Aj=kj=e([P(`esri.popup.content.LineChartMediaInfo`)],Aj);var jj=Aj,Mj,Nj=Mj=class extends hj{constructor(e){super(e),this.type=`pie-chart`}clone(){return new Mj({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};e([N({type:[`pie-chart`],readOnly:!0,json:{type:[`piechart`],read:!1,write:{writer:gj.write,isRequired:!0}}})],Nj.prototype,`type`,void 0),Nj=Mj=e([P(`esri.popup.content.PieChartMediaInfo`)],Nj);var Pj=Nj,Fj={base:sj,key:`type`,defaultKeyValue:`image`,typeMap:{"bar-chart":yj,"column-chart":Sj,"line-chart":jj,"pie-chart":Pj,image:Oj}},Ij,Lj=Ij=class extends iA{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type=`media`}readMediaInfos(e){return e&&e.map(e=>e.type===`image`?Oj.fromJSON(e):e.type===`barchart`?yj.fromJSON(e):e.type===`columnchart`?Sj.fromJSON(e):e.type===`linechart`?jj.fromJSON(e):e.type===`piechart`?Pj.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(e=>e.toJSON())}clone(){return new Ij(C({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};e([N()],Lj.prototype,`activeMediaInfoIndex`,void 0),e([N({type:Object,json:{write:!0}})],Lj.prototype,`attributes`,void 0),e([N({type:String,json:{write:!0}})],Lj.prototype,`description`,void 0),e([N({types:[Fj]})],Lj.prototype,`mediaInfos`,void 0),e([j(`mediaInfos`)],Lj.prototype,`readMediaInfos`,null),e([M(`mediaInfos`)],Lj.prototype,`writeMediaInfos`,null),e([N({type:String,json:{write:!0}})],Lj.prototype,`title`,void 0),e([N({type:[`media`],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Lj.prototype,`type`,void 0),Lj=Ij=e([P(`esri.popup.content.MediaContent`)],Lj);var Rj=Lj,zj,Bj=zj=class extends L{constructor(e){super(e),this.field=null,this.order=null}clone(){return new zj({field:this.field,order:this.order})}};e([N({type:String,json:{write:!0}})],Bj.prototype,`field`,void 0),e([N({type:[`asc`,`desc`],json:{write:!0}})],Bj.prototype,`order`,void 0),Bj=zj=e([P(`esri.popup.support.RelatedRecordsInfoFieldOrder`)],Bj);var Vj=Bj,Hj=class extends I(iA){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType=`list`,this.orderByFields=null,this.relationshipId=null,this.title=null,this.type=`relationship`}};e([N({type:String,json:{write:!0}})],Hj.prototype,`description`,void 0),e([N({type:Number,json:{type:Wt,write:!0}})],Hj.prototype,`displayCount`,void 0),e([N({type:[`list`],json:{write:{isRequired:!0}}})],Hj.prototype,`displayType`,void 0),e([N({type:[Vj],json:{write:!0}})],Hj.prototype,`orderByFields`,void 0),e([N({type:Number,json:{type:Wt,write:{isRequired:!0}}})],Hj.prototype,`relationshipId`,void 0),e([N({type:String,json:{write:!0}})],Hj.prototype,`title`,void 0),e([N({type:[`relationship`],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Hj.prototype,`type`,void 0),Hj=e([P(`esri.popup.content.RelationshipContent`)],Hj);var Uj=Hj,Wj,Gj=Wj=class extends iA{constructor(e){super(e),this.text=null,this.type=`text`}clone(){return new Wj({text:this.text})}};e([N({type:String,json:{write:!0}})],Gj.prototype,`text`,void 0),e([N({type:[`text`],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Gj.prototype,`type`,void 0),Gj=Wj=e([P(`esri.popup.content.TextContent`)],Gj);var Kj=Gj,qj=class extends I(L){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};e([N({type:String,json:{write:!0}})],qj.prototype,`title`,void 0),e([N({type:String,json:{write:!0}})],qj.prototype,`description`,void 0),e([N({type:[`attachment`,`connectivity`,`container`,`content`,`structure`],json:{write:!0}})],qj.prototype,`type`,void 0),e([N({type:Number,json:{type:Wt,write:!0}})],qj.prototype,`associatedNetworkSourceId`,void 0),e([N({type:Number,json:{type:Wt,write:!0}})],qj.prototype,`associatedAssetGroup`,void 0),e([N({type:Number,json:{type:Wt,write:!0}})],qj.prototype,`associatedAssetType`,void 0),qj=e([P(`esri.popup.support.UtilityNetworkAssociationType`)],qj);var Jj=qj,Yj=class extends I(iA){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type=`utility-network-associations`}};e([N({type:String,json:{write:!0}})],Yj.prototype,`description`,void 0),e([N({type:Number,json:{type:Wt,write:!0}})],Yj.prototype,`displayCount`,void 0),e([N({type:String,json:{write:!0}})],Yj.prototype,`title`,void 0),e([N({type:[Jj],json:{write:!0}})],Yj.prototype,`associationTypes`,void 0),e([A({utilityNetworkAssociations:`utility-network-associations`})],Yj.prototype,`type`,void 0),Yj=e([P(`esri.popup.content.UtilityNetworkAssociationsContent`)],Yj);var Xj=Yj,Zj=lA,Qj=iA,$j=kfe,eM=Afe,tM=aj,nM=Rj,rM=Uj,iM=Kj,aM=Xj,oM={base:null,key:`type`,typeMap:{attachment:Zj,media:nM,text:iM,expression:eM,field:tM,relationship:rM,utilityNetworkAssociations:aM}},sM={base:null,key:`type`,typeMap:{attachment:Zj,media:nM,text:iM,expression:eM,field:tM,relationship:rM}},cM,lM=cM=class extends L{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new cM({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([N({type:String,json:{write:!0}})],lM.prototype,`name`,void 0),e([N({type:String,json:{write:!0}})],lM.prototype,`title`,void 0),e([N({type:String,json:{write:!0}})],lM.prototype,`expression`,void 0),e([N({type:[`string`,`number`],json:{write:!0}})],lM.prototype,`returnType`,void 0),lM=cM=e([P(`esri.popup.ExpressionInfo`)],lM);var uM=lM,dM,fM=dM=class extends L{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new dM({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};e([N({type:Boolean,json:{write:!0}})],fM.prototype,`returnTopmostRaster`,void 0),e([N({type:Boolean,json:{write:!0}})],fM.prototype,`showNoDataRecords`,void 0),fM=dM=e([P(`esri.popup.LayerOptions`)],fM);var pM=fM,mM,hM=mM=class extends L{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new mM({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?C(this.orderByFields):null})}};e([N({type:Boolean,json:{write:!0}})],hM.prototype,`showRelatedRecords`,void 0),e([N({type:[Vj],json:{write:!0}})],hM.prototype,`orderByFields`,void 0),hM=mM=e([P(`esri.popup.RelatedRecordsInfo`)],hM);var gM=hM,_M,vM=_M=class extends HT(F){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new _M({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};e([N()],vM.prototype,`active`,void 0),e([N()],vM.prototype,`className`,void 0),e([N()],vM.prototype,`disabled`,void 0),e([N()],vM.prototype,`icon`,void 0),e([N()],vM.prototype,`id`,void 0),e([N()],vM.prototype,`indicator`,void 0),e([N()],vM.prototype,`title`,void 0),e([N()],vM.prototype,`type`,void 0),e([N()],vM.prototype,`visible`,void 0),vM=_M=e([P(`esri.support.actions.ActionBase`)],vM);var yM=vM,bM,xM=bM=class extends yM{constructor(e){super(e),this.image=null,this.type=`button`}clone(){return new bM({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};e([N()],xM.prototype,`image`,void 0),xM=bM=e([P(`esri.support.actions.ActionButton`)],xM);var SM=xM,CM,wM=CM=class extends yM{constructor(e){super(e),this.image=null,this.type=`toggle`,this.value=!1}clone(){return new CM({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};e([N()],wM.prototype,`image`,void 0),e([N()],wM.prototype,`value`,void 0),wM=CM=e([P(`esri.support.actions.ActionToggle`)],wM);var TM=wM,EM=`relationships/`,DM=`expression/`,OM=W.ofType({key:`type`,defaultKeyValue:`button`,base:yM,typeMap:{button:SM,toggle:TM}}),kM={base:Qj,key:`type`,typeMap:{media:nM,custom:$j,text:iM,attachments:Zj,fields:tM,expression:eM,relationship:rM,utilityNetworkAssociations:aM}},AM=new Set([`attachments`,`fields`,`media`,`text`,`expression`,`relationship`]),jM=new Set([...AM,`utility-network-associations`]),MM=class extends I(L){constructor(e){super(e),this.actions=null,this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=``}get content(){return this._get(`content`)??``}set content(e){this._set(`content`,e)}castContent(e){return Array.isArray(e)?e.map(e=>Ut(kM,e)):typeof e==`string`||typeof e==`function`||e instanceof HTMLElement||Ii(e)?e:(E.getLogger(this).error(`content error`,`unsupported content value`,{value:e}),null)}readContent(e,t){let{popupElements:n}=t;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,n):this._readPopupInfo(t)}writeWebSceneContent(e,t,n,r){this._writePopupTemplateContent(e,t,r)}writeWebMapContent(e,t,n,r){this._writePopupTemplateContent(e,t,r)}writeFieldInfos(e,t,n,r){let{content:i}=this,a=Array.isArray(i)?i:null,{writeFieldFormat:o,...s}=r||{};if(e){let n=a?a.filter(e=>e.type===`fields`):[],r=n.length&&n.every(e=>e.fieldInfos?.length);t.fieldInfos=e.filter(Boolean).map(e=>{let t=e.toJSON(s);return r&&(t.visible=!1),t})}if(a)for(let e of a)e.type===`fields`&&this._writeFieldsContent(e,t,s)}writeLayerOptions(e,t,n,r){t[n]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||``}async collectRequiredFields(e,t,n){let r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,n,[...r,...this._getContentExpressionInfos(this.content,r)]),Dk(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,t){let n=new Set;return await this.collectRequiredFields(n,e,t),[...n].sort()}_writePopupTemplateContent(e,t,n){typeof e==`string`?t.description=e:Array.isArray(e)&&(t.popupElements=e.filter(e=>n?.origin===`web-scene`?AM.has(e.type):jM.has(e.type)).map(e=>e?.toJSON(n)),t.popupElements.forEach(e=>{e.type===`attachments`?this._writeAttachmentContent(t):e.type===`media`?this._writeMediaContent(e,t):e.type===`text`?this._writeTextContent(e,t):e.type===`relationship`&&this._writeRelationshipContent(e,t)}))}_writeFieldsContent(e,t,n){let r=e.fieldInfos;if(!Array.isArray(r)||!r.length)return;let i=t.fieldInfos;if(Array.isArray(i))for(let e of r){let t=i.find(t=>t.fieldName?.toLowerCase()===e.fieldName?.toLowerCase());t?t.visible=!0:i.push(e.toJSON(n))}else t.fieldInfos=r.map(e=>e.toJSON(n))}_writeAttachmentContent(e){e.showAttachments||=!0}_writeRelationshipContent(e,t){let n=e.orderByFields?.map(t=>this._toFieldOrderJSON(t,e.relationshipId))||[],r=[...t.relatedRecordsInfo?.orderByFields||[],...n];t.relatedRecordsInfo={showRelatedRecords:!0,...r?.length&&{orderByFields:r}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;let n=C(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...n]:t.mediaInfos=n}_readPopupInfoElements(e,t,n){let r={description:!1,mediaInfos:!1};return n.map(n=>n.type===`media`?(n.mediaInfos||!t||r.mediaInfos||(n.mediaInfos=t,r.mediaInfos=!0),nM.fromJSON(n)):n.type===`text`?(n.text||!e||r.description||(n.text=e,r.description=!0),iM.fromJSON(n)):n.type===`attachments`?Zj.fromJSON(n):n.type===`fields`?tM.fromJSON(n):n.type===`expression`?eM.fromJSON(n):n.type===`relationship`?rM.fromJSON(n):n.type===`utilityNetworkAssociations`?aM.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(e){let{field:t,order:n}=e;if(!t?.startsWith(EM))return null;let r=t.replace(EM,``).split(`/`);if(r.length!==2)return null;let i=parseInt(r[0],10),a=r[1];return!Number.isNaN(i)&&a?rM.fromJSON({relationshipId:i,orderByFields:[{field:a,order:n}]}):null}_toFieldOrderJSON(e,t){let{order:n,field:r}=e;return{field:`${EM}${t}/${r}`,order:n}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:n,relatedRecordsInfo:r={showRelatedRecords:!1}}){let i=[];e?i.push(new iM({text:e})):i.push(new tM),Array.isArray(t)&&t.length&&i.push(nM.fromJSON({mediaInfos:t})),n&&i.push(Zj.fromJSON({displayType:`auto`}));let{showRelatedRecords:a,orderByFields:o}=r;return a&&o?.length&&o.forEach(e=>{let t=this._toRelationshipContent(e);t&&i.push(t)}),i.length?i:e}_getContentElementFields(e){let t=e?.type;if(t===`attachments`)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t===`custom`)return e.outFields||[];if(t===`fields`)return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(t===`media`){let t=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...t.reduce((e,t)=>[...e,...this._getMediaInfoFields(t)],[])]}return t===`text`?this._extractFieldNames(e.text):t===`relationship`||t===`utility-network-associations`?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){let{caption:t,title:n,value:r}=e,i=r||{},{fields:a,normalizeField:o,tooltipField:s,sourceURL:c,linkURL:l}=i,u=[...this._extractFieldNames(n),...this._extractFieldNames(t),...this._extractFieldNames(c),...this._extractFieldNames(l),...a??[]];return o&&u.push(o),s&&u.push(s),u}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((e,t)=>[...e,...t.type===`expression`&&t.expressionInfo?[t.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e==`string`?this._extractFieldNames(e):Array.isArray(e)?e.reduce((e,t)=>[...e,...this._getContentElementFields(t)],[]):[]}async _collectExpressionInfoFields(e,t,n,r){r&&await Promise.all(r.map(r=>kk(e,t,n,r.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:e,visible:t})=>!(t!==void 0&&!t||!e||e.startsWith(EM)||e.startsWith(DM))).map(e=>e.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((e,t)=>[...e,...this._getActionFields(t)],[]):[]}_getActionFields(e){let{className:t,title:n,type:r}=e,i=r===`button`||r===`toggle`?e.image:``;return[...this._extractFieldNames(n),...this._extractFieldNames(t),...this._extractFieldNames(i)]}_getTitleFields(e){return typeof e==`string`?this._extractFieldNames(e):[]}_extractFieldNames(e){return nA(e).filter(e=>!(e.startsWith(EM)||e.startsWith(DM)))}};e([N({type:OM})],MM.prototype,`actions`,void 0),e([N()],MM.prototype,`content`,null),e([Tr(`content`)],MM.prototype,`castContent`,null),e([j(`content`,[`description`,`fieldInfos`,`popupElements`,`mediaInfos`,`showAttachments`,`relatedRecordsInfo`])],MM.prototype,`readContent`,null),e([M(`web-scene`,`content`,{popupElements:{type:W.ofType(sM)},showAttachments:{type:Boolean},mediaInfos:{type:W.ofType(Fj)},description:{type:String},relatedRecordsInfo:{type:gM}})],MM.prototype,`writeWebSceneContent`,null),e([M(`content`,{popupElements:{type:W.ofType(oM)},showAttachments:{type:Boolean},mediaInfos:{type:W.ofType(Fj)},description:{type:String},relatedRecordsInfo:{type:gM}})],MM.prototype,`writeWebMapContent`,null),e([N({type:[uM],json:{write:!0}})],MM.prototype,`expressionInfos`,void 0),e([N({type:[nj]})],MM.prototype,`fieldInfos`,void 0),e([M(`fieldInfos`)],MM.prototype,`writeFieldInfos`,null),e([N({type:pM})],MM.prototype,`layerOptions`,void 0),e([M(`layerOptions`)],MM.prototype,`writeLayerOptions`,null),e([N({type:Boolean,json:{read:{source:`showLastEditInfo`},write:{target:`showLastEditInfo`},default:!0}})],MM.prototype,`lastEditInfoEnabled`,void 0),e([N()],MM.prototype,`outFields`,void 0),e([N()],MM.prototype,`overwriteActions`,void 0),e([N()],MM.prototype,`returnGeometry`,void 0),e([N({json:{type:String}})],MM.prototype,`title`,void 0),e([M(`title`)],MM.prototype,`writeTitle`,null),MM=e([P(`esri.PopupTemplate`)],MM);var NM=MM,PM=Symbol(`idFieldsProviderSymbol`);function FM(e){return!!e&&PM in e}function IM(e){return FM(e)?e[PM]:void 0}var LM=Symbol(`popupProvider`);function RM(e){return typeof e==`object`&&!!e&&`popupEnabled`in e&&`popupTemplate`in e}function zM(e){return!!e&&LM in e}function BM(e){return zM(e)?e[LM]:null}function VM(e,t){switch(t.type){case`object-id`:case`unique-id-simple`:return e.attributes[t.fieldName];case`unique-id-composite`:{let n=[];for(let r of t.fieldNames)n.push(e.attributes[r]??null);return JSON.stringify(n)}}}function HM(e,t){if(`uniqueIdFields`in t&&t.uniqueIdFields?.length){if(t.uniqueIdFields.length===1)return e.attributes?.[t.uniqueIdFields[0]];let n=t.uniqueIdFields.map(t=>e.attributes?.[t]);return JSON.stringify(n)}return`objectIdField`in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}var UM=new xr({esriSMS:`simple-marker`,esriPMS:`picture-marker`,esriSLS:`simple-line`,esriSFS:`simple-fill`,esriPFS:`picture-fill`,esriTS:`text`,esriSHD:`shield-label-symbol`,PointSymbol3D:`point-3d`,LineSymbol3D:`line-3d`,PolygonSymbol3D:`polygon-3d`,WebStyleSymbol:`web-style`,MeshSymbol3D:`mesh-3d`,LabelSymbol3D:`label-3d`,CIMSymbolReference:`cim`}),WM=0,GM=class extends L{constructor(e){super(e),this.id=`sym`+ WM++,this.type=null,this.color=new J([0,0,0,1])}readColor(e){return e?.[0]==null?e:[e[0],e[1],e[2],e[3]/255]}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};e([N({type:UM.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:UM.write,isRequired:!0}}})],GM.prototype,`type`,void 0),e([N({type:J,json:{write:{allowNull:!0}}})],GM.prototype,`color`,void 0),e([j(`color`)],GM.prototype,`readColor`,null),GM=e([P(`esri.symbols.Symbol`)],GM);var KM,qM=KM=class extends GM{constructor(e){super(e),this.data=null,this.type=`cim`}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type===`CIMSymbolReference`){let n=this.data.primitiveOverrides;if(n){let r=n.map(n=>{let r=n.valueExpressionInfo;return r?kk(e,t,null,r.expression):null});await Promise.all(r)}}}clone(){return new KM({data:C(this.data)})}hash(){return ct(JSON.stringify(this.data)).toString()}};e([N({json:{write:!1}})],qM.prototype,`color`,void 0),e([N({json:{write:!0}})],qM.prototype,`data`,void 0),e([j(`data`,[`symbol`])],qM.prototype,`readData`,null),e([M(`data`,{})],qM.prototype,`writeData`,null),e([A({CIMSymbolReference:`cim`},{readOnly:!0})],qM.prototype,`type`,void 0),qM=KM=e([P(`esri.symbols.CIMSymbol`)],qM);var JM=class extends L{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,t,n){e||(t[n]=e)}};e([N({type:Boolean,json:{read:{source:`enable`},write:{target:`enable`}}})],JM.prototype,`enabled`,void 0),e([M(`enabled`)],JM.prototype,`writeEnabled`,null),e([N({type:[`icon`,`object`,`line`,`path`,`fill`,`water`,`extrude`,`text`],readOnly:!0,json:{write:{isRequired:!0}}})],JM.prototype,`type`,void 0),JM=e([P(`esri.symbols.Symbol3DLayer`)],JM);function YM(e,t){let n=t.transparency==null?1:zE(t.transparency),r=t.color;return r&&Array.isArray(r)?new J([r[0]||0,r[1]||0,r[2]||0,n]):null}function XM(e,t){t.color=e.toJSON().slice(0,3);let n=RE(e.a);n!==0&&(t.transparency=n)}function ZM(e){return{type:J,nonNullable:e?.nonNullable,json:{type:[Wt],default:null,read:{source:[`color`,`transparency`],reader:YM},write:{target:{color:{type:[Wt],isRequired:e?.colorRequiredOnWrite},transparency:{type:Wt}},writer:XM}}}}var QM={type:Number,cast:Xw,json:{write:!0}};function $M(e){return e===`emissive`?0:1}var eN=class extends L{constructor(e){super(e),this.color=new J([0,0,0,1])}get extensionLength(){return this._get(`extensionLength`)??0}set extensionLength(e){this._set(`extensionLength`,e)}get size(){return this._get(`size`)??Yw(1)}set size(e){this._set(`size`,e)}clone(){}cloneProperties(){return{color:C(this.color),size:this.size,extensionLength:this.extensionLength}}};e([N({type:[`solid`,`sketch`],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],eN.prototype,`type`,void 0),e([N(ZM({colorRequiredOnWrite:!0}))],eN.prototype,`color`,void 0),e([N({...QM,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],eN.prototype,`extensionLength`,null),e([N(QM)],eN.prototype,`size`,null),eN=e([P(`esri.symbols.edges.Edges3D`)],eN);var tN=eN,nN,rN=nN=class extends tN{constructor(e){super(e),this.type=`sketch`}clone(){return new nN(this.cloneProperties())}};e([A({sketch:`sketch`},{readOnly:!0})],rN.prototype,`type`,void 0),rN=nN=e([P(`esri.symbols.edges.SketchEdges3D`)],rN);var iN=rN,aN,oN=aN=class extends tN{constructor(e){super(e),this.type=`solid`}clone(){return new aN(this.cloneProperties())}};e([A({solid:`solid`},{readOnly:!0})],oN.prototype,`type`,void 0),oN=aN=e([P(`esri.symbols.edges.SolidEdges3D`)],oN);var sN=oN,cN={types:{key:`type`,base:tN,typeMap:{solid:sN,sketch:iN}},json:{write:!0}},lN,uN=lN=class extends L{constructor(){super(...arguments),this.strength=null,this.source=`emissive`}clone(){let e={strength:this.strength,source:this.source};return new lN(e)}};e([N({json:{write:!1}})],uN.prototype,`strength`,void 0),e([N({json:{write:!1}})],uN.prototype,`source`,void 0),uN=lN=e([P(`esri.symbols.support.Symbol3DEmissive`)],uN);var dN,fN=dN=class extends L{constructor(e){super(e),this.color=null,this.emissive=new uN({source:`emissive`})}clone(){let e={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new dN(e)}};e([N(ZM())],fN.prototype,`color`,void 0),e([N({type:uN,json:{write:!1}})],fN.prototype,`emissive`,void 0),fN=dN=e([P(`esri.symbols.support.Symbol3DMaterial`)],fN);var pN,mN=class extends JM{static{pN=this}constructor(e){super(e),this.type=`extrude`,this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new pN({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}};e([A({Extrude:`extrude`},{readOnly:!0})],mN.prototype,`type`,void 0),e([N({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],mN.prototype,`size`,void 0),e([N({type:fN,json:{write:!0}})],mN.prototype,`material`,void 0),e([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mN.prototype,`castShadows`,void 0),e([N(cN)],mN.prototype,`edges`,void 0),mN=pN=e([P(`esri.symbols.ExtrudeSymbol3DLayer`)],mN);var hN=class extends L{constructor(e){super(e)}clone(){throw Error(`Subclasses of LinePattern3D should implement their own clone method.`)}};e([N({type:[`style`],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],hN.prototype,`type`,void 0),hN=e([P(`esri.symbols.patterns.LinePattern3D`)],hN);var gN=[`dash`,`dash-dot`,`dot`,`long-dash`,`long-dash-dot`,`long-dash-dot-dot`,`none`,`short-dash`,`short-dash-dot`,`short-dash-dot-dot`,`short-dot`,`solid`],_N,jfe=Cr()({dash:`dash`,"dash-dot":`dash-dot`,"dash-dot-dot":`long-dash-dot-dot`,dot:`dot`,"long-dash":`long-dash`,"long-dash-dot":`long-dash-dot`,null:`none`,"short-dash":`short-dash`,"short-dash-dot":`short-dash-dot`,"short-dash-dot-dot":`short-dash-dot-dot`,"short-dot":`short-dot`,solid:`solid`}),vN=_N=class extends hN{constructor(e){super(e),this.type=`style`,this.style=`solid`}clone(){let e={style:this.style};return new _N(e)}};e([N({type:[`style`],json:{write:{isRequired:!0}}})],vN.prototype,`type`,void 0),e([A(jfe),N({type:gN,json:{write:{isRequired:!0}}})],vN.prototype,`style`,void 0),vN=_N=e([P(`esri.symbols.patterns.LineStylePattern3D`)],vN);var yN=class extends L{constructor(e){super(e),this.type=`style`}clone(){throw Error(`Subclasses of Pattern3D should implement their own clone method.`)}};e([N({type:[`style`],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yN.prototype,`type`,void 0),yN=e([P(`esri.symbols.patterns.Pattern3D`)],yN);var Mfe=[`backward-diagonal`,`cross`,`diagonal-cross`,`forward-diagonal`,`horizontal`,`none`,`solid`,`vertical`],bN,xN=bN=class extends yN{constructor(e){super(e),this.type=`style`,this.style=`solid`}clone(){return new bN({style:this.style})}};e([N({type:[`style`],json:{write:{isRequired:!0}}})],xN.prototype,`type`,void 0),e([N({type:Mfe,json:{read:!0,write:{isRequired:!0}}})],xN.prototype,`style`,void 0),xN=bN=e([P(`esri.symbols.patterns.StylePattern3D`)],xN);var Nfe={types:{key:`type`,base:yN,typeMap:{style:xN}},json:{write:!0}},SN={types:{key:`type`,base:hN,typeMap:{style:vN}},json:{write:!0}},CN=new J(`white`),Pfe=new J([255,255,255,0]);function Ffe(e){return e.r===0&&e.g===0&&e.b===0}var wN,TN=wN=class extends fN{constructor(e){super(e),this.colorMixMode=null}clone(){let e={color:this.color?.clone(),colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()};return new wN(e)}};e([A({multiply:`multiply`,replace:`replace`,tint:`tint`})],TN.prototype,`colorMixMode`,void 0),TN=wN=e([P(`esri.symbols.support.Symbol3DFillMaterial`)],TN);function EN(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function DN(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function ON(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){return[e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h]}var kN=EN();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:kN,clone:DN,create:EN,fromValues:ON},Symbol.toStringTag,{value:`Module`}));function AN(e){return e<=1024?Array(e).fill(0):new Float64Array(e)}function Ife(e){return(Ae(e)?e.byteLength/8:e.length)<=1024?Array.from(e):new Float64Array(e)}function Lfe(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}function Rfe(e){return[...e]}function zfe(e){let t=EN();for(let n=0;n<16;++n)t[n]=e[n];return t}function jN(e){return e}function MN(e=HN){return jN([e[0],e[1],e[2],e[3],e[4],e[5]])}function NN(e,t,n,r,i,a,o=MN()){return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o}function Bfe(e,t=MN()){return PN(e,0,e.length/3,t)}function PN(e,t,n,r=MN()){return zN(r,VN),FN(r,e,t,n),r}function Vfe(e,t=AN(24)){let[n,r,i,a,o,s]=e;return t[0]=n,t[1]=r,t[2]=i,t[3]=n,t[4]=r,t[5]=s,t[6]=n,t[7]=o,t[8]=i,t[9]=n,t[10]=o,t[11]=s,t[12]=a,t[13]=r,t[14]=i,t[15]=a,t[16]=r,t[17]=s,t[18]=a,t[19]=o,t[20]=i,t[21]=a,t[22]=o,t[23]=s,t}function Hfe(e,t){let n=isFinite(e[2])||isFinite(e[5]);return new Rd(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Ufe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Wfe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function Gfe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function FN(e,t,n=0,r=t.length/3){let i=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5];for(let e=0;e<r;e++)i=Math.min(i,t[n+3*e]),a=Math.min(a,t[n+3*e+1]),o=Math.min(o,t[n+3*e+2]),s=Math.max(s,t[n+3*e]),c=Math.max(c,t[n+3*e+1]),l=Math.max(l,t[n+3*e+2]);e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function Kfe(e,t,n){let r=t.length,i=e[0],a=e[1],o=e[2],s=e[3],c=e[4],l=e[5];if(n)for(let e=0;e<r;e++){let n=t[e];i=Math.min(i,n[0]),a=Math.min(a,n[1]),o=Math.min(o,n[2]),s=Math.max(s,n[0]),c=Math.max(c,n[1]),l=Math.max(l,n[2])}else for(let e=0;e<r;e++){let n=t[e];i=Math.min(i,n[0]),a=Math.min(a,n[1]),s=Math.max(s,n[0]),c=Math.max(c,n[1])}e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=c,e[5]=l}function qfe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function IN(e){return e[0]>=e[3]?0:e[3]-e[0]}function LN(e){return e[1]>=e[4]?0:e[4]-e[1]}function RN(e){return e[2]>=e[5]?0:e[5]-e[2]}function Jfe(e){let t=IN(e),n=RN(e),r=LN(e);return Math.sqrt(t*t+n*n+r*r)}function Yfe(e,t=[0,0,0]){return t[0]=e[0]+IN(e)/2,t[1]=e[1]+LN(e)/2,t[2]=e[2]+RN(e)/2,t}function Xfe(e,t=[0,0,0]){return t[0]=IN(e),t[1]=LN(e),t[2]=RN(e),t}function Zfe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Qfe(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function $fe(e,t){return t==null||Qfe(e,t)}function epe(e,t,n,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i}function tpe(e,t,n=e){let r=e[0]+IN(e)/2,i=e[1]+LN(e)/2,a=e[2]+RN(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=a+(e[2]-a)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=a+(e[5]-a)*t,n}function npe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function rpe(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function ipe(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function zN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ape(e){return e?zN(e,VN):MN(VN)}function ope(e,t=Vd()){return t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function spe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=-1/0,e[3]=t[2],e[4]=t[3],e[5]=1/0,e}function cpe(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=-1/0,e[3]=r,e[4]=i,e[5]=1/0,e}function BN(e){return e.length===6}function lpe(e){return IN(e)===0&&LN(e)===0&&RN(e)===0}function upe(e,t,n){if(e==null||t==null)return e===t;if(!BN(e)||!BN(t))return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var VN=jN([1/0,1/0,1/0,-1/0,-1/0,-1/0]),HN=jN([0,0,0,0,0,0]);MN();function dpe(e,{isPrimitive:t,width:n,depth:r,height:i}){let a=t?10:1;if(n==null&&i==null&&r==null)return[a*e[0],a*e[1],a*e[2]];let o=Ax(n,r,i),s;for(let t=0;t<3;t++){let n=o[t];if(n!=null){s=n/e[t];break}}for(let t=0;t<3;t++)o[t]??(o[t]=e[t]*s);return o}var fpe=NN(-.5,-.5,-.5,.5,.5,.5),ppe=NN(-.5,-.5,0,.5,.5,1),mpe=NN(-.5,-.5,0,.5,.5,.5);function hpe(e){switch(e){case`sphere`:case`cube`:case`diamond`:return fpe;case`cylinder`:case`cone`:case`inverted-cone`:return ppe;case`tetrahedron`:return mpe;default:return}}var UN=[`butt`,`square`,`round`],gpe=[...UN,`none`],WN=[`miter`,`bevel`,`round`],GN,KN=GN=class extends L{constructor(e){super(e),this.color=new J([0,0,0,1]),this.pattern=null,this.patternCap=`butt`}get size(){return this._get(`size`)??Yw(1)}set size(e){this._set(`size`,e)}clone(){let e={color:this.color==null?null:this.color.clone(),size:this.size,pattern:this.pattern==null?null:this.pattern.clone(),patternCap:this.patternCap};return new GN(e)}};e([N(ZM({colorRequiredOnWrite:!0}))],KN.prototype,`color`,void 0),e([N({...QM,json:{write:{isRequired:!0}}})],KN.prototype,`size`,null),e([N(SN)],KN.prototype,`pattern`,void 0),e([N({type:UN,json:{default:`butt`,write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],KN.prototype,`patternCap`,void 0),KN=GN=e([P(`esri.symbols.support.Symbol3DOutline`)],KN);var qN,JN=class extends JM{static{qN=this}constructor(e){super(e),this.type=`fill`,this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){let e={edges:this.edges==null?null:this.edges.clone(),enabled:this.enabled,material:this.material==null?null:this.material.clone(),pattern:this.pattern==null?null:this.pattern.clone(),castShadows:this.castShadows,outline:this.outline==null?null:this.outline.clone()};return new qN(e)}static fromSimpleFillSymbol(e){let t=e.outline&&e.outline.style&&e.outline.style!==`solid`?new vN({style:e.outline.style}):null,n={size:e.outline?.width??0,color:(e.outline?.color??CN).clone(),pattern:t};return t&&e.outline?.cap&&(n.patternCap=e.outline.cap),new qN({material:new TN({color:(e.color??Pfe).clone()}),pattern:e.style&&e.style!==`solid`?new xN({style:e.style}):null,outline:n})}};e([A({Fill:`fill`},{readOnly:!0})],JN.prototype,`type`,void 0),e([N({type:TN,json:{write:!0}})],JN.prototype,`material`,void 0),e([N(Nfe)],JN.prototype,`pattern`,void 0),e([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],JN.prototype,`castShadows`,void 0),e([N({type:KN,json:{write:!0}})],JN.prototype,`outline`,void 0),e([N(cN)],JN.prototype,`edges`,void 0),JN=qN=e([P(`esri.symbols.FillSymbol3DLayer`)],JN);var YN,_pe=Cr()({circle:`circle`,square:`square`,cross:`cross`,x:`x`,kite:`kite`,triangle:`triangle`}),XN=YN=class extends L{constructor(e){super(e)}readHref(e,t,n){return e?pc(e,n):t.dataURI}writeHref(e,t,n,r){e&&(xs(e)?t.dataURI=e:(t.href=mc(e,r),ys(t.href)&&(t.href=gs(t.href))))}clone(){return new YN({href:this.href,primitive:this.primitive})}equals(e){return e.primitive===this.primitive&&e.href===this.href}};e([N({type:String,json:{write:!0,read:{source:[`href`,`dataURI`]}}})],XN.prototype,`href`,void 0),e([j(`href`)],XN.prototype,`readHref`,null),e([M(`href`,{href:{type:String},dataURI:{type:String}})],XN.prototype,`writeHref`,null),e([A(_pe)],XN.prototype,`primitive`,void 0),XN=YN=e([P(`esri.symbols.support.IconSymbol3DLayerResource`)],XN);var vpe=`circle`,ZN=class extends I(L){constructor(e){super(e),this.mode=`hidden`}equals(e){return this.mode===e.mode}};e([N({type:[`adaptive`,`hidden`,`visible`],json:{write:{isRequired:!0}}})],ZN.prototype,`mode`,void 0),ZN=e([P(`esri.symbols.support.OccludedVisibility`)],ZN);var QN=ZN,$N,eP=$N=class extends F{constructor(e){super(e),this.x=0,this.y=0}clone(){return new $N({x:this.x,y:this.y})}equals(e){return e.x===this.x&&e.y===this.y}};e([N({type:Number})],eP.prototype,`x`,void 0),e([N({type:Number})],eP.prototype,`y`,void 0),eP=$N=e([P(`esri.symbols.support.Symbol3DAnchorPosition2D`)],eP);var tP,nP=tP=class extends L{constructor(e){super(e),this.color=new J([0,0,0,1])}get size(){return this._get(`size`)??Yw(1)}set size(e){this._set(`size`,e)}clone(){let e={color:this.color==null?null:this.color.clone(),size:this.size};return new tP(e)}equals(e){return e.size===this.size&&(this.color==null?e.color==null:this.color.equals(e.color))}};e([N(ZM({colorRequiredOnWrite:!0}))],nP.prototype,`color`,void 0),e([N({...QM,json:{write:{isRequired:!0}}})],nP.prototype,`size`,null),nP=tP=e([P(`esri.symbols.support.Symbol3DIconOutline`)],nP);var rP,iP=class extends JM{static{rP=this}constructor(e){super(e),this.material=null,this.resource=null,this.type=`icon`,this.anchor=`center`,this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}get size(){return this._get(`size`)??12}set size(e){this._set(`size`,e)}clone(){return new rP({anchor:this.anchor,anchorPosition:C(this.anchorPosition),enabled:this.enabled,material:C(this.material),outline:C(this.outline),resource:C(this.resource),angle:this.angle,size:this.size,occludedVisibility:C(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){let t=e.color||CN,n=aP(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||CN).clone()}:null;return new rP({size:e.size,angle:e.angle,resource:{primitive:bpe(()=>E.getLogger(this.prototype),e.style)},material:{color:t},outline:r,anchor:n?`relative`:void 0,anchorPosition:n})}static fromPictureMarkerSymbol(e){let t=!e.color||Ffe(e.color)?CN:e.color,n=aP(e);return new rP({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:n?`relative`:void 0,anchorPosition:n})}static fromCIMSymbol(e){return new rP({resource:{href:ws({mediaType:`application/json`,data:JSON.stringify(e.data)})}})}};function aP(e){let t=`width`in e?e.width:e.size,n=`height`in e?e.height:e.size,r=oP(e.xoffset),i=oP(e.yoffset);return(r||i)&&t&&n?{x:-r/t,y:i/n}:null}function oP(e){return isFinite(e)?e:0}e([N({type:fN,json:{write:!0}})],iP.prototype,`material`,void 0),e([N({type:XN,json:{write:!0}})],iP.prototype,`resource`,void 0),e([A({Icon:`icon`},{readOnly:!0})],iP.prototype,`type`,void 0),e([N({...QM,json:{write:{isRequired:!0}}})],iP.prototype,`size`,null),e([A({center:`center`,left:`left`,right:`right`,top:`top`,bottom:`bottom`,topLeft:`top-left`,topRight:`top-right`,bottomLeft:`bottom-left`,bottomRight:`bottom-right`,relative:`relative`},{default:`center`})],iP.prototype,`anchor`,void 0),e([N({type:eP,json:{type:[Number],read:{reader:e=>new eP({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor===`relative`}}}}})],iP.prototype,`anchorPosition`,void 0),e([N({type:nP,json:{write:!0}})],iP.prototype,`outline`,void 0),e([N({type:Number,json:{write:!0,default:0}})],iP.prototype,`angle`,void 0),e([N({type:QN})],iP.prototype,`occludedVisibility`,void 0),iP=rP=e([P(`esri.symbols.IconSymbol3DLayer`)],iP);var ype={circle:`circle`,cross:`cross`,diamond:`kite`,square:`square`,x:`x`,triangle:`triangle`,path:null};function bpe(e,t){return ype[t]||(e().warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),`circle`)}var xpe=[`begin`,`end`,`begin-end`],sP=[`arrow`,`circle`,`square`,`diamond`,`cross`,`x`],cP=class extends I(L){constructor(e){super(e),this.type=`style`,this.placement=`begin-end`,this.style=`arrow`,this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};e([N({type:[`style`],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],cP.prototype,`type`,void 0),e([N({type:xpe,json:{default:`begin-end`,write:!0}})],cP.prototype,`placement`,void 0),e([N({type:sP,json:{default:`arrow`,write:!0}})],cP.prototype,`style`,void 0),e([N({type:J,json:{type:[Wt],default:null,write:!0}})],cP.prototype,`color`,void 0),cP=e([P(`esri.symbols.LineStyleMarker3D`)],cP);var lP,uP=class extends JM{static{lP=this}constructor(e){super(e),this.material=null,this.type=`line`,this.join=`miter`,this.cap=`butt`,this.pattern=null,this.marker=null}get size(){return this._get(`size`)??Yw(1)}set size(e){this._set(`size`,e)}clone(){let e={enabled:this.enabled,material:this.material==null?null:this.material.clone(),size:this.size,join:this.join,cap:this.cap,pattern:this.pattern==null?null:this.pattern.clone(),marker:this.marker==null?null:this.marker.clone()};return new lP(e)}static fromSimpleLineSymbol(e){let t={enabled:!0,size:e.width??Yw(1),cap:e.cap||`butt`,join:e.join||`miter`,pattern:e.style?new vN({style:e.style}):null,material:new fN({color:(e.color||CN).clone()}),marker:e.marker?new cP({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new lP(t)}};e([N({type:fN,json:{write:!0}})],uP.prototype,`material`,void 0),e([A({Line:`line`},{readOnly:!0})],uP.prototype,`type`,void 0),e([N({type:WN,json:{write:!0,default:`miter`}})],uP.prototype,`join`,void 0),e([N({type:UN,json:{write:!0,default:`butt`}})],uP.prototype,`cap`,void 0),e([N({...QM,json:{write:{isRequired:!0}}})],uP.prototype,`size`,null),e([N(SN)],uP.prototype,`pattern`,void 0),e([N({types:{key:`type`,base:cP,typeMap:{style:cP}},json:{write:!0}})],uP.prototype,`marker`,void 0),uP=lP=e([P(`esri.symbols.LineSymbol3DLayer`)],uP);var dP,Spe=Cr()({sphere:`sphere`,cylinder:`cylinder`,cube:`cube`,cone:`cone`,diamond:`diamond`,tetrahedron:`tetrahedron`,invertedCone:`inverted-cone`}),fP=dP=class extends L{constructor(e){super(e)}clone(){return new dP({href:this.href,primitive:this.primitive})}};e([N({type:String,json:{read:hc,write:gc}})],fP.prototype,`href`,void 0),e([A(Spe)],fP.prototype,`primitive`,void 0),fP=dP=e([P(`esri.symbols.support.ObjectSymbol3DLayerResource`)],fP);var Cpe=`sphere`,pP,mP=pP=class extends F{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new pP({x:this.x,y:this.y,z:this.z})}};e([N({type:Number})],mP.prototype,`x`,void 0),e([N({type:Number})],mP.prototype,`y`,void 0),e([N({type:Number})],mP.prototype,`z`,void 0),mP=pP=e([P(`esri.symbols.support.Symbol3DAnchorPosition3D`)],mP);var hP,gP=class extends JM{static{hP=this}constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type=`object`,this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new hP({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!=`string`}};e([N({type:fN,json:{write:!0}})],gP.prototype,`material`,void 0),e([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gP.prototype,`castShadows`,void 0),e([N({type:fP,json:{write:!0}})],gP.prototype,`resource`,void 0),e([A({Object:`object`},{readOnly:!0})],gP.prototype,`type`,void 0),e([N({type:Number,json:{write:!0}})],gP.prototype,`width`,void 0),e([N({type:Number,json:{write:!0}})],gP.prototype,`height`,void 0),e([N({type:Number,json:{write:!0}})],gP.prototype,`depth`,void 0),e([A({center:`center`,top:`top`,bottom:`bottom`,origin:`origin`,relative:`relative`},{default:`origin`})],gP.prototype,`anchor`,void 0),e([N({type:mP,json:{type:[Number],read:{reader:e=>new mP({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor===`relative`}}}}})],gP.prototype,`anchorPosition`,void 0),e([N({type:Number,json:{write:!0}})],gP.prototype,`heading`,void 0),e([N({type:Number,json:{write:!0}})],gP.prototype,`tilt`,void 0),e([N({type:Number,json:{write:!0}})],gP.prototype,`roll`,void 0),e([N({readOnly:!0})],gP.prototype,`isPrimitive`,null),gP=hP=e([P(`esri.symbols.ObjectSymbol3DLayer`)],gP);var _P,vP=class extends JM{static{_P=this}constructor(e){super(e),this.material=null,this.castShadows=!0,this.type=`path`,this.profile=`circle`,this.join=`miter`,this.cap=`butt`,this.width=void 0,this.height=void 0,this.anchor=`center`,this.profileRotation=`all`}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new _P({enabled:this.enabled,material:this.material==null?null:this.material.clone(),castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};e([N({type:fN,json:{write:!0}})],vP.prototype,`material`,void 0),e([N({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],vP.prototype,`castShadows`,void 0),e([A({Path:`path`},{readOnly:!0})],vP.prototype,`type`,void 0),e([N({type:[`circle`,`quad`],nonNullable:!0,json:{write:!0,default:`circle`}})],vP.prototype,`profile`,void 0),e([N({type:WN,nonNullable:!0,json:{write:!0,default:`miter`}})],vP.prototype,`join`,void 0),e([N({type:gpe,nonNullable:!0,json:{write:!0,default:`butt`}})],vP.prototype,`cap`,void 0),e([N({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],vP.prototype,`width`,void 0),e([j(`width`,[`width`,`size`,`height`])],vP.prototype,`readWidth`,null),e([N({type:Number,json:{write:!0}})],vP.prototype,`height`,void 0),e([j(`height`,[`height`,`size`,`width`])],vP.prototype,`readHeight`,null),e([N({type:[`center`,`bottom`,`top`],nonNullable:!0,json:{write:!0,default:`center`}})],vP.prototype,`anchor`,void 0),e([N({type:[`heading`,`all`],nonNullable:!0,json:{write:!0,default:`all`}})],vP.prototype,`profileRotation`,void 0),vP=_P=e([P(`esri.symbols.PathSymbol3DLayer`)],vP);var wpe=[`none`,`underline`,`line-through`],Tpe=[`normal`,`italic`,`oblique`],Epe=[`normal`,`lighter`,`bold`,`bolder`],yP={type:Number,cast:e=>{let t=wt(e);return t===0?1:Xa(t,.1,4)},nonNullable:!0},Dpe=[`left`,`right`,`center`],Ope=[`baseline`,`top`,`middle`,`bottom`],bP={type:Dpe,nonNullable:!0},xP={type:Ope,nonNullable:!0},kpe=8,SP,CP=SP=class extends L{constructor(e){super(e),this.decoration=`none`,this.family=`sans-serif`,this.style=`normal`,this.weight=`normal`}get size(){return this._get(`size`)??9}set size(e){this._set(`size`,e)}castSize(e){return Xw(e)}clone(){return new SP({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};e([N({type:wpe,json:{default:`none`,write:!0}})],CP.prototype,`decoration`,void 0),e([N({type:String,json:{write:!0}})],CP.prototype,`family`,void 0),e([N({type:Number,json:{write:{overridePolicy:(e,t,n)=>({enabled:!n||!n.textSymbol3D})}}})],CP.prototype,`size`,null),e([Tr(`size`)],CP.prototype,`castSize`,null),e([N({type:Tpe,json:{default:`normal`,write:!0}})],CP.prototype,`style`,void 0),e([N({type:Epe,json:{default:`normal`,write:!0}})],CP.prototype,`weight`,void 0),CP=SP=e([P(`esri.symbols.Font`)],CP);var wP,TP=wP=class extends L{constructor(){super(...arguments),this.color=new J([0,0,0,1])}get size(){return this._get(`size`)??0}set size(e){this._set(`size`,e)}clone(){let e={color:C(this.color),size:this.size};return new wP(e)}};e([N(ZM())],TP.prototype,`color`,void 0),e([N(QM)],TP.prototype,`size`,null),TP=wP=e([P(`esri.symbols.support.Symbol3DHalo`)],TP);var EP=class extends I(L){constructor(e){super(e),this.color=null}};e([N(ZM())],EP.prototype,`color`,void 0),EP=e([P(`esri.symbols.support.Symbol3DTextBackground`)],EP);var DP,OP=class extends JM{static{DP=this}constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment=`center`,this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type=`text`,this.verticalAlignment=`baseline`,this.occludedVisibility=null}get font(){return this._get(`font`)||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set(`font`,e)}writeFont(e,t,n,r){let i={...r,textSymbol3D:!0};t.font=e.write({},i),delete t.font.size}get size(){return this._userSize==null?this.font?.size==null?9:this.font.size:this._userSize}set size(e){this._userSize=Number(e),this.font!=null&&(this.font.size=this._userSize),this.notifyChange(`size`)}clone(){let e=new DP({enabled:this.enabled,font:C(this.font),halo:C(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material==null?null:this.material.clone(),text:this.text,verticalAlignment:this.verticalAlignment,background:C(this.background),occludedVisibility:C(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new DP({font:e.font==null?new CP:e.font.clone(),halo:Ape(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new fN({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new EP({color:e.backgroundColor.clone()}):null})}};function Ape(e,t){return e&&t!=null&&t>0?new TP({color:C(e),size:t}):null}e([N({type:CP,json:{write:!0}})],OP.prototype,`font`,null),e([M(`font`)],OP.prototype,`writeFont`,null),e([N({type:TP,json:{write:!0}})],OP.prototype,`halo`,void 0),e([N({...bP,json:{default:`center`,write:!0}})],OP.prototype,`horizontalAlignment`,void 0),e([N({...yP,json:{default:1,write:!0}})],OP.prototype,`lineHeight`,void 0),e([N({type:fN,json:{write:!0}})],OP.prototype,`material`,void 0),e([N({type:EP,json:{write:!0}})],OP.prototype,`background`,void 0),e([N(QM)],OP.prototype,`size`,null),e([N({type:String,json:{write:!0}})],OP.prototype,`text`,void 0),e([A({Text:`text`},{readOnly:!0})],OP.prototype,`type`,void 0),e([N({...xP,json:{default:`baseline`,write:!0}})],OP.prototype,`verticalAlignment`,void 0),e([N({type:QN})],OP.prototype,`occludedVisibility`,void 0),OP=DP=e([P(`esri.symbols.TextSymbol3DLayer`)],OP);var kP,AP=class extends JM{static{kP=this}constructor(e){super(e),this.color=jP.clone(),this.type=`water`,this.waterbodySize=`medium`,this.waveDirection=null,this.waveStrength=`moderate`}clone(){return new kP({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};e([N({type:J,nonNullable:!0,json:{type:[Wt],write:(e,t,n)=>t[n]=e.toArray(1),default:()=>jP.clone(),defaultEquals:e=>e.toCss(!0)===jP.toCss(!0)}})],AP.prototype,`color`,void 0),e([A({Water:`water`},{readOnly:!0})],AP.prototype,`type`,void 0),e([N({type:[`small`,`medium`,`large`],json:{write:!0,default:`medium`}})],AP.prototype,`waterbodySize`,void 0),e([N({type:Number,json:{write:!0,default:null}})],AP.prototype,`waveDirection`,void 0),e([N({type:[`calm`,`rippled`,`slight`,`moderate`],json:{write:!0,default:`moderate`}})],AP.prototype,`waveStrength`,void 0),AP=kP=e([P(`esri.symbols.WaterSymbol3DLayer`)],AP);var jP=new J([0,119,190]),MP,NP=MP=class extends F{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new MP({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};e([N({type:String})],NP.prototype,`name`,void 0),e([N({type:String})],NP.prototype,`styleUrl`,void 0),e([N({type:String})],NP.prototype,`styleName`,void 0),e([N({type:q})],NP.prototype,`portal`,void 0),NP=MP=e([P(`esri.symbols.support.StyleOrigin`)],NP);var PP,FP=PP=class extends F{constructor(){super(...arguments),this.url=``}clone(){return new PP({url:this.url})}};e([N({type:String})],FP.prototype,`url`,void 0),FP=PP=e([P(`esri.symbols.support.Thumbnail`)],FP);var IP={icon:iP,object:gP,line:uP,path:vP,fill:JN,extrude:mN,text:OP,water:AP},jpe=W.ofType({base:JM,key:`type`,typeMap:IP,errorContext:`symbol-layer`}),LP=class extends GM{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;let t=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,n=t?.type,r=n||W;this._set(`symbolLayers`,new r)}get color(){return null}set color(e){this.constructed&&E.getLogger(this).error(`Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.`)}set symbolLayers(e){sT(e,this._get(`symbolLayers`))}readStyleOrigin(e,t,n){if(e.styleUrl&&e.name){let t=pc(e.styleUrl,n);return new NP({styleUrl:t,name:e.name})}if(e.styleName&&e.name)return new NP({portal:n?.portal||q.getDefault(),styleName:e.styleName,name:e.name});n?.messages&&n.messages.push(new zn(`symbol3d:incomplete-style-origin`,`Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property`,{context:n,definition:e}))}writeStyleOrigin(e,t,n,r){if(e.styleUrl&&e.name){let n=mc(e.styleUrl,r);ys(n)&&(n=gs(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&r?.portal&&!ls(e.portal.restUrl,r.portal.restUrl)?r?.messages&&r.messages.push(new zn(`symbol:cross-portal`,`The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.`,{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof JM||e&&IP[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e([N({json:{read:!1,write:!1}})],LP.prototype,`color`,null),e([N({type:jpe,nonNullable:!0,json:{write:!0}}),Tr(cT)],LP.prototype,`symbolLayers`,null),e([N({type:NP})],LP.prototype,`styleOrigin`,void 0),e([j(`styleOrigin`)],LP.prototype,`readStyleOrigin`,null),e([M(`styleOrigin`,{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],LP.prototype,`writeStyleOrigin`,null),e([N({type:FP,json:{read:!1}})],LP.prototype,`thumbnail`,void 0),e([N({type:[`point-3d`,`line-3d`,`polygon-3d`,`mesh-3d`,`label-3d`],readOnly:!0})],LP.prototype,`type`,void 0),LP=e([P(`esri.symbols.Symbol3D`)],LP);var RP=class extends L{constructor(e){super(e),this.visible=!0}clone(){throw Error(`Subclasses of Callout3D should implement their own clone method.`)}};e([N({type:[`line`],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],RP.prototype,`type`,void 0),e([N({readOnly:!0})],RP.prototype,`visible`,void 0),RP=e([P(`esri.symbols.callouts.Callout3D`)],RP);var zP,BP=zP=class extends L{constructor(e){super(e),this.color=new J(`white`)}clone(){return new zP({color:C(this.color)})}};e([N(ZM({colorRequiredOnWrite:!0}))],BP.prototype,`color`,void 0),BP=zP=e([P(`esri.symbols.callouts.LineCallout3DBorder`)],BP);var VP=BP,HP,UP=HP=class extends RP{constructor(e){super(e),this.type=`line`,this.color=new J([0,0,0,1]),this.border=null}get size(){return this._get(`size`)??Yw(1)}set size(e){this._set(`size`,e)}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new HP({color:C(this.color),size:this.size,border:C(this.border)})}};e([A({line:`line`})],UP.prototype,`type`,void 0),e([N(ZM({colorRequiredOnWrite:!0}))],UP.prototype,`color`,void 0),e([N({...QM,json:{write:{isRequired:!0}}})],UP.prototype,`size`,null),e([N({type:VP,json:{write:!0}})],UP.prototype,`border`,void 0),e([N({readOnly:!0})],UP.prototype,`visible`,null),UP=HP=e([P(`esri.symbols.callouts.LineCallout3D`)],UP);function WP(e){if(!e)return!1;let t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function GP(e){return!e||!e.supportsCallout||!e.supportsCallout()?!1:!!e.callout?.visible&&!!WP(e)}function Mpe(e){return e.type===`point-3d`||e.type===`label-3d`}function Npe(e){return e.horizontalAlignment===`center`}var KP={types:{key:`type`,base:RP,typeMap:{line:UP}},json:{write:!0}},qP,JP=qP=class extends L{constructor(e){super(e),this.minWorldLength=0,this.maxWorldLength=null}get screenLength(){return this._get(`screenLength`)??0}set screenLength(e){this._set(`screenLength`,e)}clone(){return new qP({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};e([N({...QM,json:{write:{isRequired:!0}}})],JP.prototype,`screenLength`,null),e([N({type:Number,nonNullable:!0,json:{write:!0,default:0}})],JP.prototype,`minWorldLength`,void 0),e([N({type:Number,json:{write:!0}})],JP.prototype,`maxWorldLength`,void 0),JP=qP=e([P(`esri.symbols.support.Symbol3DVerticalOffset`)],JP);var YP,XP=W.ofType({base:null,key:`type`,typeMap:{text:OP}}),ZP=YP=class extends LP{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.type=`label-3d`,this.symbolLayers=new XP}get symbolLayers(){return this._get(`symbolLayers`)}set symbolLayers(e){sT(e,this._get(`symbolLayers`))}supportsCallout(){return!0}hasVisibleCallout(){return GP(this)}hasVisibleVerticalOffset(){return WP(this)}clone(){return new YP({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail),callout:C(this.callout),verticalOffset:C(this.verticalOffset)})}static fromTextSymbol(e){return new YP({symbolLayers:new W([OP.fromTextSymbol(e)])})}};e([N({type:JP,json:{write:!0}})],ZP.prototype,`verticalOffset`,void 0),e([N(KP)],ZP.prototype,`callout`,void 0),e([N({json:{read:!1,write:!1}})],ZP.prototype,`styleOrigin`,void 0),e([N({type:XP})],ZP.prototype,`symbolLayers`,null),e([A({LabelSymbol3D:`label-3d`},{readOnly:!0})],ZP.prototype,`type`,void 0),ZP=YP=e([P(`esri.symbols.LabelSymbol3D`)],ZP);var QP,$P=W.ofType({base:null,key:`type`,typeMap:{line:uP,path:vP}}),Ppe=W.ofType({base:null,key:`type`,typeMap:{line:uP,path:vP}}),eF=QP=class extends LP{constructor(e){super(e),this.symbolLayers=new $P,this.type=`line-3d`}clone(){return new QP({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleLineSymbol(e){return new QP({symbolLayers:new W([uP.fromSimpleLineSymbol(e)])})}};e([N({type:$P,json:{type:Ppe}})],eF.prototype,`symbolLayers`,void 0),e([A({LineSymbol3D:`line-3d`},{readOnly:!0})],eF.prototype,`type`,void 0),eF=QP=e([P(`esri.symbols.LineSymbol3D`)],eF);var tF,nF=W.ofType({base:null,key:`type`,typeMap:{fill:JN}}),rF=tF=class extends LP{constructor(e){super(e),this.type=`mesh-3d`,this.symbolLayers=new nF}get symbolLayers(){return this._get(`symbolLayers`)}set symbolLayers(e){sT(e,this._get(`symbolLayers`))}clone(){return new tF({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleFillSymbol(e){return new tF({symbolLayers:new W([JN.fromSimpleFillSymbol(e)])})}};e([N({type:nF})],rF.prototype,`symbolLayers`,null),e([A({MeshSymbol3D:`mesh-3d`},{readOnly:!0})],rF.prototype,`type`,void 0),rF=tF=e([P(`esri.symbols.MeshSymbol3D`)],rF);var iF=class extends GM{constructor(e){super(e),this.type=`simple-line`}get width(){return this._get(`width`)??.75}set width(e){this._set(`width`,e)}hash(){return`${this.type}.${this.width}`}};e([A({esriSLS:`simple-line`},{readOnly:!0})],iF.prototype,`type`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],iF.prototype,`width`,null),iF=e([P(`esri.symbols.LineSymbol`)],iF);var aF,oF=aF=class extends L{constructor(e){super(e),this.placement=`begin-end`,this.type=`line-marker`,this.style=`arrow`}writeStyle(e,t,n,r){t[n]=r?.origin===`web-map`?`arrow`:e}set color(e){this._set(`color`,e)}readColor(e){return e?.[0]==null?e:[e[0],e[1],e[2],e[3]/255]}writeColor(e,t,n,r){r?.origin===`web-map`||(t[n]=e)}clone(){return new aF({color:C(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};e([N({type:[`begin`,`end`,`begin-end`],json:{write:!0}})],oF.prototype,`placement`,void 0),e([A({"line-marker":`line-marker`},{readOnly:!0}),N({json:{origins:{"web-map":{write:!1}}}})],oF.prototype,`type`,void 0),e([N({type:sP})],oF.prototype,`style`,void 0),e([M(`style`)],oF.prototype,`writeStyle`,null),e([N({type:J,value:null,json:{write:{allowNull:!0}}})],oF.prototype,`color`,null),e([j(`color`)],oF.prototype,`readColor`,null),e([M(`color`)],oF.prototype,`writeColor`,null),oF=aF=e([P(`esri.symbols.LineSymbolMarker`)],oF);var Fpe=oF,sF,cF=new xr({esriSLSSolid:`solid`,esriSLSDash:`dash`,esriSLSDot:`dot`,esriSLSDashDot:`dash-dot`,esriSLSDashDotDot:`long-dash-dot-dot`,esriSLSNull:`none`,esriSLSShortDash:`short-dash`,esriSLSShortDot:`short-dot`,esriSLSShortDashDot:`short-dash-dot`,esriSLSShortDashDotDot:`short-dash-dot-dot`,esriSLSLongDash:`long-dash`,esriSLSLongDashDot:`long-dash-dot`}),lF=sF=class extends iF{constructor(...e){super(...e),this.type=`simple-line`,this.style=`solid`,this.cap=`round`,this.join=`round`,this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,n,r,i,a){if(e&&typeof e!=`string`)return e;let o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),n!=null&&(o.width=Xw(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),a!=null&&(o.miterLimit=Xw(a)),o}clone(){return new sF({color:C(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};e([A({esriSLS:`simple-line`},{readOnly:!0})],lF.prototype,`type`,void 0),e([N({type:cF.apiValues,json:{read:cF.read,write:cF.write}})],lF.prototype,`style`,void 0),e([N({type:[`butt`,`round`,`square`],json:{write:{overridePolicy:(e,t,n)=>({enabled:e!==`round`&&n?.origin==null})}}})],lF.prototype,`cap`,void 0),e([N({type:[`miter`,`round`,`bevel`],json:{write:{overridePolicy:(e,t,n)=>({enabled:e!==`round`&&n?.origin==null})}}})],lF.prototype,`join`,void 0),e([N({types:{key:`type`,base:null,defaultKeyValue:`line-marker`,typeMap:{"line-marker":Fpe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],lF.prototype,`marker`,void 0),e([N({type:Number,json:{read:!1,write:!1}})],lF.prototype,`miterLimit`,void 0),lF=sF=e([P(`esri.symbols.SimpleLineSymbol`)],lF);var uF=class extends GM{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};e([N({types:{key:`type`,base:null,defaultKeyValue:`simple-line`,typeMap:{"simple-line":lF}},json:{default:null,write:!0}})],uF.prototype,`outline`,void 0),e([N({type:[`simple-fill`,`picture-fill`],readOnly:!0})],uF.prototype,`type`,void 0),uF=e([P(`esri.symbols.FillSymbol`)],uF);function Ipe(e,t,n){return t.imageData?ws({mediaType:t.contentType||`image/png`,isBase64:!0,data:t.imageData}):dF(t.url,n)}function dF(e,t){if(!ys(e)){let n=Rpe(t);if(n)return _s(n,`images`,e)}return pc(e,t)}function Lpe(e,t,n,r){if(xs(e)){let i=Cs(e);if(!i)return;t.contentType=i.mediaType,t.imageData=i.data,n&&n.imageData===t.imageData&&n.url&&gc(n.url,t,`url`,r)}else gc(e,t,`url`,r)}var fF={json:{read:{source:[`imageData`,`url`],reader:Ipe},write:{writer(e,t,n,r){Lpe(e,t,this.source,r)}}}},pF={readOnly:!0,json:{read:{source:[`imageData`,`url`],reader(e,t,n){let r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=dF(t.url,n)),r}}}};function Rpe(e){if(!e)return null;let{origin:t,layer:n}=e;if(t!==`service`&&t!==`portal-item`)return null;let r=n?.type;return r===`feature`||r===`stream`?n.parsedUrl?.path:r===`map-image`||r===`tile`?e.url?.path:null}var mF,hF=mF=class extends uF{constructor(...e){super(...e),this.type=`picture-fill`,this.url=null,this.xscale=1,this.yscale=1,this.source=null}normalizeCtorArgs(e,t,n,r){if(e&&typeof e!=`string`&&e.imageData==null)return e;let i={};return e&&(i.url=e),t&&(i.outline=t),n!=null&&(i.width=Xw(n)),r!=null&&(i.height=Xw(r)),i}get width(){return this._get(`width`)??12}set width(e){this._set(`width`,e)}get height(){return this._get(`height`)??12}set height(e){this._set(`height`,e)}get xoffset(){return this._get(`xoffset`)??0}set xoffset(e){this._set(`xoffset`,e)}get yoffset(){return this._get(`yoffset`)??0}set yoffset(e){this._set(`yoffset`,e)}clone(){let e=new mF({color:C(this.color),height:this.height,outline:C(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set(`source`,C(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};e([A({esriPFS:`picture-fill`},{readOnly:!0})],hF.prototype,`type`,void 0),e([N(fF)],hF.prototype,`url`,void 0),e([N({type:Number,json:{write:!0}})],hF.prototype,`xscale`,void 0),e([N({type:Number,json:{write:!0}})],hF.prototype,`yscale`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],hF.prototype,`width`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],hF.prototype,`height`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],hF.prototype,`xoffset`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],hF.prototype,`yoffset`,null),e([N(pF)],hF.prototype,`source`,void 0),hF=mF=e([P(`esri.symbols.PictureFillSymbol`)],hF);var gF=class extends GM{constructor(e){super(e),this.angle=0,this.type=null}get xoffset(){return this._get(`xoffset`)??0}set xoffset(e){this._set(`xoffset`,e)}get yoffset(){return this._get(`yoffset`)??0}set yoffset(e){this._set(`yoffset`,e)}get size(){return this._get(`size`)??9}set size(e){this._set(`size`,e)}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};e([N({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],gF.prototype,`angle`,void 0),e([N({type:[`simple-marker`,`picture-marker`],readOnly:!0})],gF.prototype,`type`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],gF.prototype,`xoffset`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],gF.prototype,`yoffset`,null),e([N({cast:e=>e===`auto`?e:wt(Xw(e)),json:{write:!0}})],gF.prototype,`size`,null),gF=e([P(`esri.symbols.MarkerSymbol`)],gF);var _F,vF=_F=class extends gF{constructor(...e){super(...e),this.color=null,this.type=`picture-marker`,this.url=null,this.source=null}normalizeCtorArgs(e,t,n){if(e&&typeof e!=`string`&&e.imageData==null)return e;let r={};return e&&(r.url=e),t!=null&&(r.width=Xw(t)),n!=null&&(r.height=Xw(n)),r}get height(){return this._get(`height`)??12}set height(e){this._set(`height`,e)}readHeight(e,t){return t.size||e}get width(){return this._get(`width`)??12}set width(e){this._set(`width`,e)}readWidth(e,t){return t.size||e}get size(){return this._get(`size`)??null}set size(e){this._set(`size`,e)}clone(){let e=new _F({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set(`source`,C(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};e([N({json:{write:!1}})],vF.prototype,`color`,void 0),e([A({esriPMS:`picture-marker`},{readOnly:!0})],vF.prototype,`type`,void 0),e([N(fF)],vF.prototype,`url`,void 0),e([N(pF)],vF.prototype,`source`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],vF.prototype,`height`,null),e([j(`height`,[`height`,`size`])],vF.prototype,`readHeight`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],vF.prototype,`width`,null),e([N({json:{write:!1}})],vF.prototype,`size`,null),vF=_F=e([P(`esri.symbols.PictureMarkerSymbol`)],vF);var yF,bF=W.ofType({base:null,key:`type`,typeMap:{icon:iP,object:gP,text:OP}}),xF=yF=class extends LP{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new bF,this.type=`point-3d`}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(let e of this.symbolLayers.items)switch(e.type){case`icon`:case`text`:case`object`:continue;default:return!1}return!0}hasVisibleCallout(){return GP(this)}hasVisibleVerticalOffset(){return WP(this)}clone(){return new yF({verticalOffset:C(this.verticalOffset),callout:C(this.callout),styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new yF({symbolLayers:new W([iP.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new yF({symbolLayers:new W([iP.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!==`CIMPointSymbol`)return null;let t=e.data.symbol;return new yF(t?.callout?{symbolLayers:new W([iP.fromCIMSymbol(e)]),callout:new UP({size:.5,color:new J([0,0,0])}),verticalOffset:new JP({screenLength:40})}:{symbolLayers:new W([iP.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new yF({symbolLayers:new W([OP.fromTextSymbol(e)])})}};e([N({type:JP,json:{write:!0}})],xF.prototype,`verticalOffset`,void 0),e([N(KP)],xF.prototype,`callout`,void 0),e([N({type:bF,json:{origins:{"web-scene":{write:!0}}}})],xF.prototype,`symbolLayers`,void 0),e([A({PointSymbol3D:`point-3d`},{readOnly:!0})],xF.prototype,`type`,void 0),xF=yF=e([P(`esri.symbols.PointSymbol3D`)],xF);var SF,CF=W.ofType({base:null,key:`type`,typeMap:{extrude:mN,fill:JN,icon:iP,line:uP,object:gP,text:OP,water:AP}}),wF=SF=class extends LP{constructor(e){super(e),this.symbolLayers=new CF,this.type=`polygon-3d`}initialize(){let e=e=>{e.type===`line`&&Ar(E.getLogger(this),`LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.`,{replacement:`Use FillSymbol3DLayer.outline instead.`,version:`4.28`}),e.type===`text`&&Ar(E.getLogger(this),`TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.`,{replacement:`Use Labels instead.`,version:`4.28`})};for(let t of this.symbolLayers)e(t);this.addHandles(Hh(()=>this.symbolLayers,`after-add`,({item:t})=>e(t),Kh))}clone(){return new SF({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromJSON(e){let t=new SF;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type===`fill`&&t.symbolLayers.at(1).type===`line`){let n=t.symbolLayers.at(0),r=t.symbolLayers.at(1);!r.enabled||e.symbolLayers?.[1]&&!1===e.symbolLayers[1].enable||(n.outline={size:r.size,color:r.material==null?null:r.material.color}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new SF({symbolLayers:new W([JN.fromSimpleFillSymbol(e)])})}};e([N({type:CF,json:{write:!0}})],wF.prototype,`symbolLayers`,void 0),e([A({PolygonSymbol3D:`polygon-3d`},{readOnly:!0})],wF.prototype,`type`,void 0),wF=SF=e([P(`esri.symbols.PolygonSymbol3D`)],wF);var TF,EF=new xr({esriSFSSolid:`solid`,esriSFSNull:`none`,esriSFSHorizontal:`horizontal`,esriSFSVertical:`vertical`,esriSFSForwardDiagonal:`forward-diagonal`,esriSFSBackwardDiagonal:`backward-diagonal`,esriSFSCross:`cross`,esriSFSDiagonalCross:`diagonal-cross`}),DF=TF=class extends uF{constructor(...e){super(...e),this.color=new J([0,0,0,.25]),this.outline=new lF,this.type=`simple-fill`,this.style=`solid`}normalizeCtorArgs(e,t,n){if(e&&typeof e!=`string`)return e;let r={};return e&&(r.style=e),t&&(r.outline=t),n&&(r.color=n),r}clone(){return new TF({color:C(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};e([N({type:J})],DF.prototype,`color`,void 0),e([N()],DF.prototype,`outline`,void 0),e([A({esriSFS:`simple-fill`},{readOnly:!0})],DF.prototype,`type`,void 0),e([N({type:EF.apiValues,json:{read:EF.read,write:EF.write}})],DF.prototype,`style`,void 0),DF=TF=e([P(`esri.symbols.SimpleFillSymbol`)],DF);var OF,kF=new xr({esriSMSCircle:`circle`,esriSMSSquare:`square`,esriSMSCross:`cross`,esriSMSX:`x`,esriSMSDiamond:`diamond`,esriSMSTriangle:`triangle`,esriSMSPath:`path`}),AF=OF=class extends gF{constructor(...e){super(...e),this.color=new J([255,255,255,.25]),this.type=`simple-marker`,this.style=`circle`,this.outline=new lF}normalizeCtorArgs(e,t,n,r){if(e&&typeof e!=`string`)return e;let i={};return e&&(i.style=e),t!=null&&(i.size=Xw(t)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(e,t){e&&this.style!==`x`&&this.style!==`cross`&&(t.color=e.toJSON()),e===null&&(t.color=null)}get size(){return this._get(`size`)??12}set size(e){this._set(`size`,e)}set path(e){this.style=`path`,this._set(`path`,e)}clone(){return new OF({angle:this.angle,color:C(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};e([N({type:J})],AF.prototype,`color`,void 0),e([M(`color`)],AF.prototype,`writeColor`,null),e([A({esriSMS:`simple-marker`},{readOnly:!0})],AF.prototype,`type`,void 0),e([N()],AF.prototype,`size`,null),e([N({type:kF.apiValues,json:{read:kF.read,write:kF.write}})],AF.prototype,`style`,void 0),e([N({type:String,json:{write:!0}})],AF.prototype,`path`,null),e([N({types:{key:`type`,base:null,defaultKeyValue:`simple-line`,typeMap:{"simple-line":lF}},json:{default:null,write:!0}})],AF.prototype,`outline`,void 0),AF=OF=e([P(`esri.symbols.SimpleMarkerSymbol`)],AF);var jF,MF=jF=class extends GM{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new CP,this.horizontalAlignment=`center`,this.kerning=!0,this.haloColor=null,this.rightToLeft=null,this.rotated=!1,this.text=``,this.type=`text`,this.verticalAlignment=`baseline`,this.angle=0,this.width=null,this.lineHeight=1}normalizeCtorArgs(e,t,n){if(e&&typeof e!=`string`)return e;let r={};return e&&(r.text=e),t&&(r.font=t),n&&(r.color=n),r}get haloSize(){return this._get(`haloSize`)??null}set haloSize(e){this._set(`haloSize`,e)}get xoffset(){return this._get(`xoffset`)??0}set xoffset(e){this._set(`xoffset`,e)}get yoffset(){return this._get(`yoffset`)??0}set yoffset(e){this._set(`yoffset`,e)}get lineWidth(){return this._get(`lineWidth`)??192}set lineWidth(e){this._set(`lineWidth`,e)}writeLineWidth(e,t,n,r){r&&typeof r!=`string`?r.origin:t[n]=e}castLineWidth(e){return Xw(e)}writeLineHeight(e,t,n,r){r&&typeof r!=`string`?r.origin:t[n]=e}clone(){return new jF({angle:this.angle,backgroundColor:C(this.backgroundColor),borderLineColor:C(this.borderLineColor),borderLineSize:this.borderLineSize,color:C(this.color),font:this.font&&this.font.clone(),haloColor:C(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};e([N({type:J,json:{write:!0}})],MF.prototype,`backgroundColor`,void 0),e([N({type:J,json:{write:!0}})],MF.prototype,`borderLineColor`,void 0),e([N({type:Number,json:{write:!0},cast:Xw})],MF.prototype,`borderLineSize`,void 0),e([N({type:CP,json:{write:!0}})],MF.prototype,`font`,void 0),e([N({...bP,json:{write:!0}})],MF.prototype,`horizontalAlignment`,void 0),e([N({type:Boolean,json:{write:!0}})],MF.prototype,`kerning`,void 0),e([N({type:J,json:{write:!0}})],MF.prototype,`haloColor`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],MF.prototype,`haloSize`,null),e([N({type:Boolean,json:{write:!0}})],MF.prototype,`rightToLeft`,void 0),e([N({type:Boolean,json:{write:!0}})],MF.prototype,`rotated`,void 0),e([N({type:String,json:{write:!0}})],MF.prototype,`text`,void 0),e([A({esriTS:`text`},{readOnly:!0})],MF.prototype,`type`,void 0),e([N({...xP,json:{write:!0}})],MF.prototype,`verticalAlignment`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],MF.prototype,`xoffset`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],MF.prototype,`yoffset`,null),e([N({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],MF.prototype,`angle`,void 0),e([N({type:Number,json:{write:!0}})],MF.prototype,`width`,void 0),e([N({type:Number})],MF.prototype,`lineWidth`,null),e([M(`lineWidth`)],MF.prototype,`writeLineWidth`,null),e([Tr(`lineWidth`)],MF.prototype,`castLineWidth`,null),e([N(yP)],MF.prototype,`lineHeight`,void 0),e([M(`lineHeight`)],MF.prototype,`writeLineHeight`,null),MF=jF=e([P(`esri.symbols.TextSymbol`)],MF);var NF,PF=NF=class extends GM{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type=`web-style`}get _fetchCacheKey(){let e=this.portal==null?q.getDefault():this.portal,t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new NF({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol(e)}async fetchCIMSymbol(e){Or(E.getLogger(this),`WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology`,{version:`4.33`,replacement:`WebStyleSymbol.fetchSymbol`,see:`https://arcg.is/0CXPTr#fetchSymbol`,warnOnce:!0});let t=await this._fetchSymbol({...e,acceptedFormats:[`cim`]});if(t?.type!==`cim`)throw new D(`webstylesymbol:fetchCIMSymbol`,`Resolved web style symbol is not of type 'cim'`);return t}async _fetchSymbol(e){let t=e==null?null:e.cache,n=t?this._fetchCacheKey:null;if(t!=null){let e=n&&t.get(n);if(e)return e.clone()}let{resolveWebStyleSymbol:r}=await R(async()=>{let{resolveWebStyleSymbol:e}=await import(`./webStyleSymbolUtils-l5iZTIfN.js`);return{resolveWebStyleSymbol:e}},__vite__mapDeps([272,231,233]));Ci(e);let i=r(this,{portal:this.portal},e);i.catch(e=>{E.getLogger(this).error(`#fetchSymbol()`,`Failed to create symbol from style`,e)});let a=await i;return t?.set(n,a.clone()),a}};e([N({json:{write:!1}})],PF.prototype,`color`,void 0),e([N({type:String,json:{write:!0}})],PF.prototype,`styleName`,void 0),e([N({type:q,json:{write:!1}})],PF.prototype,`portal`,void 0),e([N({type:String,json:{read:hc,write:gc}})],PF.prototype,`styleUrl`,void 0),e([N({type:FP,json:{read:!1}})],PF.prototype,`thumbnail`,void 0),e([N({type:String,json:{write:!0}})],PF.prototype,`name`,void 0),e([A({styleSymbolReference:`web-style`},{readOnly:!0})],PF.prototype,`type`,void 0),e([N()],PF.prototype,`_fetchCacheKey`,null),PF=NF=e([P(`esri.symbols.WebStyleSymbol`)],PF);function zpe(e){if(!e)return!1;switch(e.type){case`picture-fill`:case`picture-marker`:case`simple-fill`:case`simple-line`:case`simple-marker`:case`text`:case`cim`:return!0;default:return!1}}function FF(e){switch(e?.type){case`label-3d`:case`line-3d`:case`mesh-3d`:case`point-3d`:case`polygon-3d`:return!0;default:return!1}}var IF={base:GM,key:`type`,typeMap:{"simple-fill":DF,"picture-fill":hF,"picture-marker":vF,"simple-line":lF,"simple-marker":AF,text:MF,"label-3d":ZP,"line-3d":eF,"mesh-3d":rF,"point-3d":xF,"polygon-3d":wF,"web-style":PF,cim:qM},errorContext:`symbol`},Bpe={base:GM,key:`type`,typeMap:{"picture-marker":vF,"simple-marker":AF,"point-3d":xF,cim:qM},errorContext:`symbol`},Vpe={base:GM,key:`type`,typeMap:{"simple-line":lF,"line-3d":eF,cim:qM},errorContext:`symbol`},Hpe={base:GM,key:`type`,typeMap:{"simple-fill":DF,"picture-fill":hF,"polygon-3d":wF,cim:qM},errorContext:`symbol`},Upe={base:GM,key:`type`,typeMap:{"picture-marker":vF,"simple-marker":AF,text:MF,"web-style":PF,cim:qM},errorContext:`symbol`},Wpe=Kn({types:IF}),LF={base:GM,key:`type`,typeMap:{"simple-fill":DF,"picture-fill":hF,"picture-marker":vF,"simple-line":lF,"simple-marker":AF,text:MF,"line-3d":eF,"mesh-3d":rF,"point-3d":xF,"polygon-3d":wF,"web-style":PF,cim:qM},errorContext:`symbol`},Gpe={base:GM,key:`type`,typeMap:{text:MF,"label-3d":ZP},errorContext:`symbol`},RF={base:GM,key:`type`,typeMap:{"line-3d":eF,"mesh-3d":rF,"point-3d":xF,"polygon-3d":wF,"web-style":PF,cim:qM},errorContext:`symbol`},Kpe={base:GM,key:`type`,typeMap:{"label-3d":ZP},errorContext:`symbol`},zF=Ut(IF),BF;function qpe(e){if(!e)return null;let t={};for(let n in e){let r=gh(e[n]);r&&(t[n]=r)}return Object.keys(t).length===0?null:t}function Jpe(e){if(e==null)return null;let t={};for(let n in e){let r=e[n];r&&(t[n]=r.toJSON())}return Object.keys(t).length===0?null:t}var VF=class extends I(L){static{BF=this}constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,`uid`,{value:ha(),configurable:!0}),Object.defineProperty(this,`_lastMeshTransform`,{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Bee(E.getLogger(this),`Graphic`,{version:`4.30`})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){let t=this._get(`aggregateGeometries`);JSON.stringify(t)!==JSON.stringify(e)&&this._set(`aggregateGeometries`,e)}set attributes(e){let t=this._get(`attributes`);t!==e&&(this._set(`attributes`,e),this._notifyLayer(`attributes`,t,e))}set geometry(e){let t=this._get(`geometry`);t!==e&&(this._set(`geometry`,e),e?.type!==`mesh`&&this._notifyLayer(`geometry`,t,e))}set popupTemplate(e){let t=this._get(`popupTemplate`);t!==e&&(this._set(`popupTemplate`,e),this._notifyLayer(`popupTemplate`,t,e))}set symbol(e){let t=this._get(`symbol`);t!==e&&(this._set(`symbol`,e),this._notifyLayer(`symbol`,t,e))}get version(){return this._version}set visible(e){let t=this._get(`visible`);t!==e&&(this._set(`visible`,e),this._notifyLayer(`visible`,t,e))}cloneShallow(){return new BF({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;let t=BM(this.origin);if(t)return t.popupTemplate??(e?t.defaultPopupTemplate:null)??null;let n=this.origin&&`layer`in this.origin?this.origin.layer:null;for(let t of[n,this.sourceLayer,this.layer])if(t&&typeof t==`object`){if(`popupTemplate`in t&&t.popupTemplate)return t.popupTemplate;if(e&&`defaultPopupTemplate`in t&&t.defaultPopupTemplate!=null)return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){let n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer(`attributes`,n,t,e)}else this.attributes={[e]:t}}getObjectId(){let e=IM(this.origin);if(e)return HM(this,e);let t=this.sourceLayer??this.layer;return t?HM(this,t):null}getGlobalId(){let e=IM(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);let t=this.sourceLayer??this.layer;return t&&`globalIdField`in t&&t.globalIdField?this.getAttribute(t.globalIdField):null}toJSON(){return{aggregateGeometries:Jpe(this.aggregateGeometries),geometry:this.geometry==null?null:this.geometry.toJSON(),symbol:this.symbol==null?null:this.symbol.toJSON(),attributes:Lo(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){let{geometry:t}=this;if(t?.type===`mesh`){let n={origin:t.origin,transform:t.transform};this._notifyLayer(`origin-transform`,n,n,e.action)}}_notifyLayer(e,t,n,r){if(this._version++,!this.layer||!(`graphicChanged`in this.layer))return;let i={graphic:this,property:e,oldValue:t,newValue:n};e===`origin-transform`&&(i.action=r),e===`attributes`&&(i.attributeName=r),this.layer.graphicChanged(i)}_watchMeshGeometryChanges(){this.addHandles([Bh(()=>this.geometry?.type===`mesh`&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Bh(()=>this.geometry?.type===`mesh`?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{let e=this.geometry;e?.type===`mesh`&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer(`geometry`,this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};e([N({value:null,json:{read:qpe}})],VF.prototype,`aggregateGeometries`,null),e([N({value:null})],VF.prototype,`attributes`,null),e([N({value:null,types:yh,json:{read:gh}})],VF.prototype,`geometry`,null),e([N({type:Boolean})],VF.prototype,`isAggregate`,void 0),e([N({clonable:!1})],VF.prototype,`layer`,void 0),e([N({clonable:`reference`})],VF.prototype,`origin`,void 0),e([N({type:NM,value:null})],VF.prototype,`popupTemplate`,null),e([N({clonable:`reference`})],VF.prototype,`sourceLayer`,void 0),e([N({value:null,types:IF})],VF.prototype,`symbol`,null),e([N({clonable:!1,json:{read:!1,write:!1}})],VF.prototype,`_version`,void 0),e([N({type:Boolean,value:!0})],VF.prototype,`visible`,null),VF=BF=e([P(`esri.Graphic`)],VF);var HF=class extends JO{_own(e){e.layer&&`remove`in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};e([wr({Type:VF,ensureType:Lt(VF)})],HF.prototype,`itemType`,void 0),HF=e([P(`esri.support.GraphicsCollection`)],HF);var UF=class extends F{constructor(e){super(e),this.view=null,this.baseLayerViews=new W,this.groundLayerViews=new W,this.referenceLayerViews=new W,this._loadingHandle=G(()=>this.view?.map?.basemap,e=>{e&&e.load().catch(()=>{})},qh)}destroy(){this._set(`view`,null),this._loadingHandle=Br(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(e=>e.updating)||this.groundLayerViews.some(e=>e.updating)||this.referenceLayerViews.some(e=>e.updating))}};e([N({constructOnly:!0})],UF.prototype,`view`,void 0),e([N({readOnly:!0})],UF.prototype,`baseLayerViews`,void 0),e([N({readOnly:!0})],UF.prototype,`groundLayerViews`,void 0),e([N({readOnly:!0})],UF.prototype,`referenceLayerViews`,void 0),e([N({readOnly:!0})],UF.prototype,`suspended`,null),e([N({type:Boolean,readOnly:!0})],UF.prototype,`updating`,null),UF=e([P(`esri.views.BasemapView`)],UF);var Ype=UF,WF=class extends F{constructor(e){super(e),this.factor=1.5,this.offset=Zw(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty(`factor`),this.commitProperty(`offset`),this.commitProperty(`position`),this.commitProperty(`visible`),this.commitProperty(`size`),this.commitProperty(`maskUrl`),this.commitProperty(`maskEnabled`),this.commitProperty(`overlayUrl`),this.commitProperty(`overlayEnabled`),(this._get(`version`)||0)+1}};e([N({type:Number})],WF.prototype,`factor`,void 0),e([N({nonNullable:!0})],WF.prototype,`offset`,void 0),e([N()],WF.prototype,`position`,void 0),e([N({type:Number,range:{min:0}})],WF.prototype,`size`,void 0),e([N()],WF.prototype,`maskUrl`,void 0),e([N()],WF.prototype,`maskEnabled`,void 0),e([N()],WF.prototype,`overlayUrl`,void 0),e([N()],WF.prototype,`overlayEnabled`,void 0),e([N({readOnly:!0})],WF.prototype,`version`,null),e([N({type:Boolean})],WF.prototype,`visible`,void 0),WF=e([P(`esri.views.Magnifier`)],WF);var GF=WF,KF=class{constructor(e){this._observable=new Oh,this._notifyPending=!1,this._batchDepth=0,this._map=new Map(e)}get size(){return k(this._observable),this._map.size}batch(e){try{this._batchDepth++,e()}finally{this._batchDepth--,this._notifyPending&&this._batchDepth===0&&(this._notifyPending=!1,this._notify())}}clear(){this._map.size>0&&(this._map.clear(),this._notify())}delete(e){let t=this._map.delete(e);return t&&this._notify(),t}entries(){return k(this._observable),this._map.entries()}forEach(e,t){k(this._observable),this._map.forEach((n,r)=>e.call(t,n,r,this),t)}get(e){return k(this._observable),this._map.get(e)}has(e){return k(this._observable),this._map.has(e)}keys(){return k(this._observable),this._map.keys()}set(e,t){return this._map.set(e,t),this._notify(),this}transformValues(e,t=this._map.keys()){this.batch(()=>{for(let n of t){if(!this._map.has(n))continue;let t=this._map.get(n),r=e(t,n);r!==t&&this.set(n,r)}})}values(){return k(this._observable),this._map.values()}[Symbol.iterator](){return k(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}_notify(){this._batchDepth>0?this._notifyPending=!0:this._observable.notify()}};function Xpe(e){return e&&`layer`in e?e.layer:void 0}function qF(e){let t=Xpe(e.origin);return tE(t)&&(t=t.findSublayerForFeature(e)),t??e.sourceLayer??e.layer}var JF,YF=JF=class extends L{constructor(e){super(e),this.name=null,this.code=null}clone(){return new JF({name:this.name,code:this.code})}};e([N({type:String,json:{write:{isRequired:!0}}})],YF.prototype,`name`,void 0),e([N({type:[String,Number],json:{write:{isRequired:!0}}})],YF.prototype,`code`,void 0),YF=JF=e([P(`esri.layers.support.CodedValue`)],YF);var Zpe=new xr({inherited:`inherited`,codedValue:`coded-value`,range:`range`}),XF=class extends L{constructor(e){super(e),this.name=null,this.type=null}};e([N({type:String,json:{write:!0}})],XF.prototype,`name`,void 0),e([A(Zpe),N({json:{write:{isRequired:!0}}})],XF.prototype,`type`,void 0),XF=e([P(`esri.layers.support.Domain`)],XF);var ZF,QF=class extends XF{static{ZF=this}constructor(e){super(e),this.codedValues=null,this.type=`coded-value`}getName(e){let t=null;if(this.codedValues){let n=String(e);this.codedValues.some(e=>(String(e.code)===n&&(t=e.name),!!t))}return t}clone(){return new ZF({codedValues:C(this.codedValues),name:this.name})}};e([N({type:[YF],json:{write:{isRequired:!0}}})],QF.prototype,`codedValues`,void 0),e([A({codedValue:`coded-value`})],QF.prototype,`type`,void 0),QF=ZF=e([P(`esri.layers.support.CodedValueDomain`)],QF);var $F,eI=class extends XF{static{$F=this}constructor(e){super(e),this.type=`inherited`}clone(){return new $F}};e([A({inherited:`inherited`})],eI.prototype,`type`,void 0),eI=$F=e([P(`esri.layers.support.InheritedDomain`)],eI);var tI,nI=class extends XF{static{tI=this}constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type=`range`}clone(){return new tI({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e([N({json:{type:[Number],read:{source:`range`,reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:`range`,writer(e,t,n){t[n]=[this.minValue||0,e]},isRequired:!0}}})],nI.prototype,`maxValue`,void 0),e([N({json:{type:[Number],read:{source:`range`,reader:(e,t)=>t.range?.[0]},write:{target:`range`,writer(e,t,n){t[n]=[e,this.maxValue||0]},isRequired:!0}}})],nI.prototype,`minValue`,void 0),e([A({range:`range`})],nI.prototype,`type`,void 0),nI=tI=e([P(`esri.layers.support.RangeDomain`)],nI);var rI={key:`type`,base:XF,typeMap:{range:nI,"coded-value":QF,inherited:eI}};function iI(e){if(!e?.type)return null;switch(e.type){case`range`:return nI.fromJSON(e);case`codedValue`:return QF.fromJSON(e);case`inherited`:return eI.fromJSON(e)}return null}var aI=new xr({esriFieldTypeSmallInteger:`small-integer`,esriFieldTypeInteger:`integer`,esriFieldTypeSingle:`single`,esriFieldTypeDouble:`double`,esriFieldTypeLong:`long`,esriFieldTypeString:`string`,esriFieldTypeDate:`date`,esriFieldTypeOID:`oid`,esriFieldTypeGeometry:`geometry`,esriFieldTypeBlob:`blob`,esriFieldTypeRaster:`raster`,esriFieldTypeGUID:`guid`,esriFieldTypeGlobalID:`global-id`,esriFieldTypeXML:`xml`,esriFieldTypeBigInteger:`big-integer`,esriFieldTypeDateOnly:`date-only`,esriFieldTypeTimeOnly:`time-only`,esriFieldTypeTimestampOffset:`timestamp-offset`}),oI,Qpe=new xr({binary:`binary`,coordinate:`coordinate`,countOrAmount:`count-or-amount`,currency:`currency`,dateAndTime:`date-and-time`,description:`description`,emailAddress:`email-address`,locationOrPlaceName:`location-or-place-name`,measurement:`measurement`,nameOrTitle:`name-or-title`,none:`none`,orderedOrRanked:`ordered-or-ranked`,percentageOrRatio:`percentage-or-ratio`,phoneNumber:`phone-number`,typeOrCategory:`type-or-category`,uniqueIdentifier:`unique-identifier`}),sI=class extends L{static{oI=this}constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return n?.value??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return n?Qpe.fromJSON(n.fieldValueType):null}clone(){return new oI({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};e([N({type:String,json:{write:!0}})],sI.prototype,`alias`,void 0),e([N({type:[String,Number],json:{write:{allowNull:!0}}})],sI.prototype,`defaultValue`,void 0),e([N()],sI.prototype,`description`,void 0),e([j(`description`)],sI.prototype,`readDescription`,null),e([N({types:rI,json:{read:{reader:iI},write:!0}})],sI.prototype,`domain`,void 0),e([N({type:Boolean,json:{write:!0}})],sI.prototype,`editable`,void 0),e([N({type:Wt,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],sI.prototype,`length`,void 0),e([N({type:String,json:{write:!0}})],sI.prototype,`name`,void 0),e([N({type:Boolean,json:{write:!0}})],sI.prototype,`nullable`,void 0),e([A(aI)],sI.prototype,`type`,void 0),e([N()],sI.prototype,`valueType`,void 0),e([j(`valueType`,[`description`])],sI.prototype,`readValueType`,null),e([N({type:Boolean,json:{read:!1}})],sI.prototype,`visible`,void 0),sI=oI=e([P(`esri.layers.support.Field`)],sI);var cI,lI=cI=class extends L{constructor(e){super(e),this.type=`map-layer`}clone(){let{mapLayerId:e,gdbVersion:t}=this;return new cI({mapLayerId:e,gdbVersion:t})}};e([A({mapLayer:`map-layer`}),N({json:{write:{isRequired:!0}}})],lI.prototype,`type`,void 0),e([N({type:Wt,json:{write:{isRequired:!0}}})],lI.prototype,`mapLayerId`,void 0),e([N({type:String,json:{write:!0}})],lI.prototype,`gdbVersion`,void 0),lI=cI=e([P(`esri.layers.support.source.MapLayerSource`)],lI);var uI,dI=uI=class extends L{constructor(e){super(e),this.type=`query-table`}clone(){let{workspaceId:e,query:t,oidFields:n,spatialReference:r,geometryType:i}=this,a={workspaceId:e,query:t,oidFields:n,spatialReference:r?.clone()??void 0,geometryType:i};return new uI(a)}};e([A({queryTable:`query-table`}),N({json:{write:{isRequired:!0}}})],dI.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],dI.prototype,`workspaceId`,void 0),e([N({type:String,json:{write:!0}})],dI.prototype,`query`,void 0),e([N({type:String,json:{write:!0}})],dI.prototype,`oidFields`,void 0),e([N({type:H,json:{write:!0}})],dI.prototype,`spatialReference`,void 0),e([A(_h)],dI.prototype,`geometryType`,void 0),dI=uI=e([P(`esri.layers.support.source.QueryTableDataSource`)],dI);var fI,pI=fI=class extends L{constructor(e){super(e),this.type=`raster`}clone(){let{workspaceId:e,dataSourceName:t}=this;return new fI({workspaceId:e,dataSourceName:t})}};e([A({raster:`raster`}),N({json:{write:{isRequired:!0}}})],pI.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],pI.prototype,`dataSourceName`,void 0),e([N({type:String,json:{write:!0}})],pI.prototype,`workspaceId`,void 0),pI=fI=e([P(`esri.layers.support.source.RasterDataSource`)],pI);var mI,hI=mI=class extends L{constructor(e){super(e),this.type=`table`}clone(){let{workspaceId:e,gdbVersion:t,dataSourceName:n}=this;return new mI({workspaceId:e,gdbVersion:t,dataSourceName:n})}};e([A({table:`table`}),N({json:{write:{isRequired:!0}}})],hI.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],hI.prototype,`workspaceId`,void 0),e([N({type:String,json:{write:!0}})],hI.prototype,`gdbVersion`,void 0),e([N({type:String,json:{write:!0}})],hI.prototype,`dataSourceName`,void 0),hI=mI=e([P(`esri.layers.support.source.TableDataSource`)],hI);var gI,_I,$pe=Cr()({esriLeftInnerJoin:`left-inner-join`,esriLeftOuterJoin:`left-outer-join`}),vI=gI=class extends L{constructor(e){super(e),this.type=`join-table`}readLeftTableSource(e,t,n){return bI()(e,t,n)}castLeftTableSource(e){return Ut(SI(),e)}readRightTableSource(e,t,n){return bI()(e,t,n)}castRightTableSource(e){return Ut(SI(),e)}clone(){let{leftTableKey:e,rightTableKey:t,leftTableSource:n,rightTableSource:r,joinType:i}=this,a={leftTableKey:e,rightTableKey:t,leftTableSource:n?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:i};return new gI(a)}};e([A({joinTable:`join-table`}),N({json:{write:{isRequired:!0}}})],vI.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],vI.prototype,`leftTableKey`,void 0),e([N({type:String,json:{write:!0}})],vI.prototype,`rightTableKey`,void 0),e([N({json:{write:!0}})],vI.prototype,`leftTableSource`,void 0),e([j(`leftTableSource`)],vI.prototype,`readLeftTableSource`,null),e([Tr(`leftTableSource`)],vI.prototype,`castLeftTableSource`,null),e([N({json:{write:!0}})],vI.prototype,`rightTableSource`,void 0),e([j(`rightTableSource`)],vI.prototype,`readRightTableSource`,null),e([Tr(`rightTableSource`)],vI.prototype,`castRightTableSource`,null),e([A($pe)],vI.prototype,`joinType`,void 0),vI=gI=e([P(`esri.layers.support.source.JoinTableDataSource`)],vI);var yI=null;function bI(){return yI||=Kn({types:SI()}),yI}var xI=null;function SI(){return xI||={key:`type`,base:null,typeMap:{"data-layer":CI,"map-layer":lI}},xI}var eme={key:`type`,base:null,typeMap:{"join-table":vI,"query-table":dI,raster:pI,table:hI}},CI=class extends L{static{_I=this}constructor(e){super(e),this.type=`data-layer`}clone(){let{fields:e,dataSource:t}=this;return new _I({fields:e,dataSource:t})}};e([A({dataLayer:`data-layer`}),N({json:{write:{isRequired:!0}}})],CI.prototype,`type`,void 0),e([N({type:[sI],json:{write:!0}})],CI.prototype,`fields`,void 0),e([N({types:eme,json:{write:!0}})],CI.prototype,`dataSource`,void 0),CI=_I=e([P(`esri.layers.support.source.DataLayerSource`)],CI),CI.from=Lt(CI);var wI=class extends I(L){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};e([N({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],wI.prototype,`onFields`,void 0),e([N({type:String,json:{write:!0}})],wI.prototype,`operator`,void 0),e([N({type:String,json:{write:!0}})],wI.prototype,`searchTerm`,void 0),e([N({type:String,json:{write:!0}})],wI.prototype,`searchType`,void 0),wI=e([P(`esri.rest.support.FullTextSearch`)],wI);var tme=wI,TI,EI=new xr({upperLeft:`upper-left`,lowerLeft:`lower-left`}),DI=TI=class extends L{constructor(e){super(e),this.extent=null,this.mode=`view`,this.originPosition=`upper-left`,this.tolerance=1}clone(){return new TI(C({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};e([N({type:Rd,json:{write:{overridePolicy(){return{enabled:this.mode===`view`}}}}})],DI.prototype,`extent`,void 0),e([N({type:[`view`,`edit`],json:{write:!0}})],DI.prototype,`mode`,void 0),e([N({type:String,json:{read:EI.read,write:EI.write}})],DI.prototype,`originPosition`,void 0),e([N({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode===`view`}}}}})],DI.prototype,`tolerance`,void 0),DI=TI=e([P(`esri.rest.support.QuantizationParameters`)],DI);var OI=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.geometry=null,this.outSpatialReference=null}};return e([N({types:yh,json:{read:gh,write:!0}})],r.prototype,`geometry`,void 0),e([N({type:H,json:{name:`outSR`,write:!0}})],r.prototype,`outSpatialReference`,void 0),e([N({type:YT,json:{write:!0}})],r.prototype,`timeExtent`,void 0),r=e([P(`esri.rest.support.QueryMixin`)],r),r},kI=new xr({esriSpatialRelIntersects:`intersects`,esriSpatialRelContains:`contains`,esriSpatialRelCrosses:`crosses`,esriSpatialRelDisjoint:`disjoint`,esriSpatialRelEnvelopeIntersects:`envelope-intersects`,esriSpatialRelIndexIntersects:`index-intersects`,esriSpatialRelOverlaps:`overlaps`,esriSpatialRelTouches:`touches`,esriSpatialRelWithin:`within`,esriSpatialRelRelation:`relation`}),AI,jI=new xr({count:`count`,sum:`sum`,min:`min`,max:`max`,avg:`avg`,stddev:`stddev`,var:`var`,exceedslimit:`exceedslimit`,percentile_cont:`percentile-continuous`,percentile_disc:`percentile-discrete`,EnvelopeAggregate:`envelope-aggregate`,CentroidAggregate:`centroid-aggregate`,ConvexHullAggregate:`convex-hull-aggregate`}),MI=AI=class extends L{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!==`percentile-continuous`&&this.statisticType!==`percentile-discrete`||(t.statisticParameters=C(e))}clone(){return new AI({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:C(this.statisticParameters)})}};e([N({type:Number,json:{write:!0}})],MI.prototype,`maxPointCount`,void 0),e([N({type:Number,json:{write:!0}})],MI.prototype,`maxRecordCount`,void 0),e([N({type:Number,json:{write:!0}})],MI.prototype,`maxVertexCount`,void 0),e([N({type:String,json:{write:!0}})],MI.prototype,`onStatisticField`,void 0),e([N({type:String,json:{write:!0}})],MI.prototype,`outStatisticFieldName`,void 0),e([N({type:String,json:{read:{source:`statisticType`,reader:jI.read},write:{target:`statisticType`,writer:jI.write}}})],MI.prototype,`statisticType`,void 0),e([N({type:Object})],MI.prototype,`statisticParameters`,void 0),e([M(`statisticParameters`)],MI.prototype,`writeStatisticParameters`,null),MI=AI=e([P(`esri.rest.support.StatisticDefinition`)],MI);var NI,nme=new xr({esriSRUnit_Meter:`meters`,esriSRUnit_Kilometer:`kilometers`,esriSRUnit_Foot:`feet`,esriSRUnit_StatuteMile:`miles`,esriSRUnit_NauticalMile:`nautical-miles`,esriSRUnit_USNauticalMile:`us-nautical-miles`}),Y=class extends OI(L){static{NI=this}static from(e){return Nt(NI,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship=`intersects`,this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e==`number`||typeof e==`object`?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){let n={};for(let t in e){let r=e[t];Array.isArray(r)?n[t]=r.map(e=>e instanceof Date?e.getTime():e):r instanceof Date?n[t]=r.getTime():n[t]=r}t.parameterValues=n}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where=`1=1`}writeWhere(e,t){t.where=e||`1=1`}clone(){return new NI(C({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment==null?null:new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}static{this.MAX_MAX_RECORD_COUNT_FACTOR=5}};e([N({json:{write:!0}})],Y.prototype,`aggregateIds`,void 0),e([N({type:Boolean,json:{write:!0}})],Y.prototype,`cacheHint`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`compactGeometryEnabled`,void 0),e([N({json:{write:!0}})],Y.prototype,`datumTransformation`,void 0),e([Tr(`datumTransformation`)],Y.prototype,`castDatumTransformation`,null),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`defaultSpatialReferenceEnabled`,void 0),e([N({type:Number,json:{write:!0}})],Y.prototype,`distance`,void 0),e([N({type:CI,json:{write:!0}})],Y.prototype,`dynamicDataSource`,void 0),e([N({type:String,json:{write:!0}})],Y.prototype,`formatOf3DObjects`,void 0),e([N({type:[tme],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Y.prototype,`fullText`,void 0),e([N({type:String,json:{write:!0}})],Y.prototype,`gdbVersion`,void 0),e([N({types:yh,json:{read:gh,write:!0}})],Y.prototype,`geometry`,void 0),e([N({type:Number,json:{write:!0}})],Y.prototype,`geometryPrecision`,void 0),e([N({type:[String],json:{write:!0}})],Y.prototype,`groupByFieldsForStatistics`,void 0),e([N({type:String,json:{write:!0}})],Y.prototype,`having`,void 0),e([N({type:Date})],Y.prototype,`historicMoment`,void 0),e([M(`historicMoment`)],Y.prototype,`writeHistoricMoment`,null),e([N({type:Number,json:{write:!0}})],Y.prototype,`maxAllowableOffset`,void 0),e([N({type:Number,cast:e=>e<1?1:e>Y.MAX_MAX_RECORD_COUNT_FACTOR?Y.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Y.prototype,`maxRecordCountFactor`,void 0),e([N({type:[`xyFootprint`],json:{write:!0}})],Y.prototype,`multipatchOption`,void 0),e([N({type:Number,json:{read:{source:`resultRecordCount`}}})],Y.prototype,`num`,void 0),e([N({json:{write:!0}})],Y.prototype,`objectIds`,void 0),e([N({type:[String],json:{write:!0}})],Y.prototype,`orderByFields`,void 0),e([N({type:[String],json:{write:!0}})],Y.prototype,`outFields`,void 0),e([N({type:H,json:{name:`outSR`,write:!0}})],Y.prototype,`outSpatialReference`,void 0),e([N({type:[MI],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Y.prototype,`outStatistics`,void 0),e([N({json:{write:!0}})],Y.prototype,`parameterValues`,void 0),e([M(`parameterValues`)],Y.prototype,`writeParameterValues`,null),e([N({type:U,json:{write:!0}})],Y.prototype,`pixelSize`,void 0),e([N({type:DI,json:{write:!0}})],Y.prototype,`quantizationParameters`,void 0),e([N({type:[Object],json:{write:!0}})],Y.prototype,`rangeValues`,void 0),e([N({type:String,json:{read:{source:`relationParam`},write:{target:`relationParam`,overridePolicy(){return{enabled:this.spatialRelationship===`relation`}}}}})],Y.prototype,`relationParameter`,void 0),e([N({type:String,json:{write:!0}})],Y.prototype,`resultType`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`returnCentroid`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`returnDistinctValues`,void 0),e([N({type:Boolean,json:{default:!0,write:!0}})],Y.prototype,`returnExceededLimitFeatures`,void 0),e([N({type:Boolean,json:{write:!0}})],Y.prototype,`returnGeometry`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`returnQueryGeometry`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`returnM`,void 0),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Y.prototype,`returnZ`,void 0),e([N({type:Boolean,json:{write:!0}})],Y.prototype,`returnTrueCurves`,void 0),e([N({type:H,json:{write:!0}})],Y.prototype,`sourceSpatialReference`,void 0),e([A(kI,{ignoreUnknown:!1,name:`spatialRel`})],Y.prototype,`spatialRelationship`,void 0),e([N({type:Number,json:{read:{source:`resultOffset`}}})],Y.prototype,`start`,void 0),e([M(`start`),M(`num`)],Y.prototype,`writeStart`,null),e([N({type:String,json:{write:!0}})],Y.prototype,`sqlFormat`,void 0),e([N({type:String,json:{write:!0}})],Y.prototype,`text`,void 0),e([N({type:YT,json:{write:!0}})],Y.prototype,`timeExtent`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,`timeReferenceUnknownClient`,void 0),e([A(nme,{ignoreUnknown:!1}),N({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Y.prototype,`units`,void 0),e([N({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Y.prototype,`where`,void 0),e([M(`where`)],Y.prototype,`writeWhere`,null),Y=NI=e([P(`esri.rest.support.Query`)],Y);function PI(e){return!(typeof e!=`object`||!e||!(`id`in e)||!(`type`in e))}function rme(e){return!!(PI(e)&&`on`in e&&e.on)}function FI(e){return!!(PI(e)&&`graphics`in e&&e.graphics)}function II(e){return!!(PI(e)&&`fields`in e&&`fieldsIndex`in e&&`objectIdField`in e&&`createQuery`in e&&e.createQuery&&`queryFeatures`in e&&e.queryFeatures)}function LI(e){return II(e)||FI(e)}function RI(e){return!!(typeof e==`object`&&e&&`layer`in e&&e.layer&&PI(e.layer)&&`view`in e)}function ime(e){return!(!RI(e)||!(`queryGraphics`in e))}function ame(e){return!!(RI(e)&&`highlight`in e&&e.highlight)}function zI(e){return!!(RI(e)&&`createQuery`in e&&e.createQuery&&`queryFeatures`in e&&e.queryFeatures)}function BI(e){return zI(e)||ime(e)}function ome(e){return!!e.isTable}var VI=class extends Dh{constructor(e){super(e),this._layerEditHandles=new W,this._selectionMap=new KF,this._sources=new W,this._trashCan=[],this._updatingHandles=new ew,this._vizTaskId=0,this.highlightEnabled=!0,this.highlightName=`default`,this.layerViewMap=new WeakMap,this.view=null}initialize(){this.addHandles([G(()=>[this.view,this.highlightEnabled],()=>{this._refreshVisualization()}),G(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},qh),Hh(()=>this.sources,`change`,e=>{let t=this._selectionMap,n=[];for(let r of e.removed){let e=t.get(r);e&&(t.delete(r),e.highlightHandle?.remove(),n.push({layer:r,selection:[],added:[],removed:[...e.selection]}))}this._refreshListeners(),n.length&&this._onSelectionChange(n)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.destroyAll(),this._updatingHandles.destroy(),zr(this._layerEditHandles),zr(this._sources)}get count(){let e=0;for(let t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{let[t,n]=e;return{layer:t,selection:[...n.selection]}})}get showHighlight(){return this.highlightEnabled}set showHighlight(e){kr(E.getLogger(this),`showHighlight`,{replacement:`highlightEnabled`}),this.highlightEnabled=e}get sources(){return this._sources}set sources(e){sT(e,this._sources)}get updating(){return this._updatingHandles.updating}add(e,t){let n=new Set;ua(n,this._selectionMap.get(e)?.selection);for(let e of t)n.add(e);this._setSelection(e,Array.from(n))}clear(){let e=this._selectionMap.values();this._trashCan.push(...e);let t=[];for(let[e,n]of this._selectionMap.entries())t.push({layer:e,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}getSelection(e){return this._selectionMap.get(e)?.selection}syncSources(){let e=new Set,t=this.view?.map;if(!t)return;let n=t=>{_ue(t)?(t.layers?.forEach(n),t.tables?.forEach(n)):gue(t)?(t.sublayers?.forEach(n),t.subtables?.forEach(n)):tE(t)?t.sublayers?.forEach(n):LI(t)&&e.add(t)};t.allLayers.forEach(n),t.allTables.forEach(n),this.sources=[...e]}async getSelectedFeatures(e,t={},n=`layerView`){let{view:r,selections:i}=this;if(!r&&n===`layerView`)return E.getLogger(this).warn(`Cannot query layer views without a view.`),[];let a=i.map(async i=>{let{layer:a,selection:o}=i;if(o.length&&II(a)&&(!e||e.includes(a))){if(r&&n===`layerView`&&!a.isTable){let e=await this._findLayerView(a);if(zI(e))return HI(e,o,t)}return HI(a,o,t)}}).filter(ge);return(await Promise.all(a)).filter(ge)}updateSelection(e){let t=new Map;for(let[e,n]of this._selectionMap)t.set(e,new Set(n.selection));let n=!1,r=e.current.concat(e.added);for(let e of r){let r=qF(e);if(LI(r)&&this.sources.includes(r)){let i=yt(t,r,()=>new Set),a=II(r)?e.getObjectId():e;a!=null&&(i.add(a),n=!0)}}for(let r of e.removed){let e=qF(r);if(LI(e)&&this.sources.includes(e)){let i=t.get(e),a=II(e)?r.getObjectId():r;a&&i&&(i.delete(a),n=!0)}}if(n){let{_selectionMap:e,_trashCan:n}=this,r=[];for(let[i,a]of t){let t=e.get(i),o=Array.from(a);t!==void 0&&n.push(t),e.set(i,{selection:o}),r.push({layer:i,selection:o,...te(t===void 0?[]:t.selection,o)})}this._onSelectionChange(r)}}setSelection(e,t){Or(E.getLogger(this),`SelectionManager.setSelection is deprecated. Use SelectionManager.replace instead.`,{replacement:`SelectionManager.replace`,warnOnce:!0}),this.replace(e,t)}appendToSelection(e,t){Or(E.getLogger(this),`SelectionManager.appendToSelection is deprecated. Use SelectionManager.add instead.`,{replacement:`SelectionManager.add`,warnOnce:!0}),this.add(e,t)}remove(e,t){let n=this._selectionMap.get(e);if(!n)return;let r=[];for(let e of n.selection)t.includes(e)||r.push(e);this._setSelection(e,r)}replace(e,t){this._setSelection(e,t)}removeFromSelection(e,t){Or(E.getLogger(this),`SelectionManager.removeFromSelection is deprecated. Use SelectionManager.remove instead.`,{replacement:`SelectionManager.remove`,warnOnce:!0}),this.remove(e,t)}toggle(e,t){let n=this._selectionMap.get(e);if(!n||n.selection.length===0)return void this._setSelection(e,t);let r=new Set(n.selection),i=new Set(t),a=hte(r,i);this._setSelection(e,Array.from(a))}toggleInSelection(e,t){Or(E.getLogger(this),`SelectionManager.toggleInSelection is deprecated. Use SelectionManager.toggle instead.`,{replacement:`SelectionManager.toggle`,warnOnce:!0}),this.toggle(e,t)}async _findLayerView(e){let t=this.layerViewMap.get(e);if(t||!this.view)return t;let n=nE(e)&&e.parent?e.parent:e,r=await this.view.whenLayerView(n).catch(()=>{});return BI(r)?(this.layerViewMap.set(e,r),r.addHandles(Yt(()=>this.layerViewMap.delete(e))),r):void 0}_onSelectionChange(e){this._refreshVisualization(),this.emit(`selection-change`,{view:this.view,changes:e})}async _refreshVisualization(){await this._updatingHandles.addPromise(this._updateVisualization())}async _updateVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();let{_selectionMap:e,highlightName:t,sources:n}=this,r=this.view&&this.highlightEnabled,i=this._vizTaskId;for(let a of n){let n=e.get(a);if(n?.highlightHandle?.remove(),r&&n?.selection.length&&!ome(a)){let e=await this._findLayerView(a);if(ame(e)&&i===this._vizTaskId){let r=n.selection;n.highlightHandle=e.highlight(r,{name:t})}}}}_refreshListeners(){this._layerEditHandles.destroyAll();let e=new Set(this.sources.map(e=>nE(e)?e.parent:e));for(let t of e)LI(t)&&(FI(t)?this._layerEditHandles.push(t.graphics.on(`change`,e=>this._onGraphicsLayerEdit(t,e))):rme(t)&&this._layerEditHandles.push(t.on(`edits`,e=>this._onLayerEdit(t,e))))}_onLayerEdit(e,t){if(tE(e))this._onParentLayerEdit(e,t);else if(t.deletedFeatures.length&&this._selectionMap.has(e)){let n=[];t.deletedFeatures.forEach(({error:e,objectId:t})=>{t!=null&&e==null&&n.push(t)}),this.remove(e,n)}}_onGraphicsLayerEdit(e,t){let{removed:n}=t;n.length&&this._selectionMap.has(e)&&this.remove(e,n)}_onParentLayerEdit(e,t){let{deletedFeatures:n,edits:r,updatedFeatures:i}=t;if(r?.updateFeatures?.forEach(t=>{let n=t.getObjectId()??t.attributes[e.objectIdField];if(n==null||i.find(e=>e.objectId===n)?.error)return;let r=e.findSublayerForFeature(t);if(!LI(r))return;let a=e.sublayers.find(e=>!(!LI(e)||!this.getSelection(e)?.includes(n)));LI(a)&&a!==r&&(this.remove(a,[n]),this.add(r,[n]))}),n.length){let t=[];n.forEach(({error:e,objectId:n})=>{n!=null&&e==null&&t.push(n)}),e.sublayers.forEach(e=>{LI(e)&&this._selectionMap.has(e)&&this.remove(e,t)})}}_setSelection(e,t){if(!this.sources.includes(e))throw Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);let n=this._selectionMap.get(e);if(!n||!sme(n,{selection:t})){n&&this._trashCan.push(n),this._selectionMap.set(e,{selection:[...t]});let r=n?te(n.selection,t):{};this._onSelectionChange([{layer:e,selection:[...t],...r}])}}};e([N()],VI.prototype,`_layerEditHandles`,void 0),e([N()],VI.prototype,`_selectionMap`,void 0),e([N()],VI.prototype,`_sources`,void 0),e([N()],VI.prototype,`_updatingHandles`,void 0),e([N({readOnly:!0,nonNullable:!0})],VI.prototype,`count`,null),e([N({readOnly:!0,nonNullable:!0})],VI.prototype,`hasSelection`,null),e([N()],VI.prototype,`highlightEnabled`,void 0),e([N()],VI.prototype,`highlightName`,void 0),e([N()],VI.prototype,`layerViewMap`,void 0),e([N({readOnly:!0,nonNullable:!0})],VI.prototype,`selections`,null),e([N()],VI.prototype,`showHighlight`,null),e([N()],VI.prototype,`sources`,null),e([N()],VI.prototype,`updating`,null),e([N()],VI.prototype,`view`,void 0),VI=e([P(`esri.views.SelectionManager`)],VI);var sme=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){let n=[...e.selection],r=[...t.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let e=0;e<n.length;e++)if(n[e]!==r[e])return!1}return!0},HI=async(e,t,n={})=>e.queryFeatures(new Y({...n,objectIds:t})).then(t=>({data:t,layer:BI(e)?e.layer:e})),cme=VI,UI=class extends I(F){constructor(e){super(e),this.accentColor=new J([255,127,0]),this.textColor=new J([255,255,255])}};e([N({type:J,nonNullable:!0})],UI.prototype,`accentColor`,void 0),e([N({type:J,nonNullable:!0})],UI.prototype,`textColor`,void 0),UI=e([P(`esri.views.Theme`)],UI);var WI=UI,GI=[`click`,`double-click`,`immediate-click`,`immediate-double-click`,`hold`,`drag`,`key-down`,`key-up`,`pointer-down`,`pointer-move`,`pointer-up`,`pointer-drag`,`mouse-wheel`,`pointer-enter`,`pointer-leave`,`gamepad`,`focus`,`blur`],KI={};function qI(e){return!!KI[e]}function lme(e){for(let t of e)if(!qI(t))return!1;return!0}GI.forEach(e=>{KI[e]=!0});var JI=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:e,priority:t},n)=>this.inputManager?.installHandlers(n,[e],t))}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>this.inputManager?.uninstallHandlers(t)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,n,r){let i=Array.isArray(e)?e:e.split(`,`);if(!lme(i))return i.some(qI)&&console.error(`Error: registering input events and other events on the view at the same time is not supported.`),null;let a,o;Array.isArray(t)?o=t:(a=t,o=[]),typeof n==`function`?a=n:r=n,r??=oT.DEFAULT;let s=this._createUniqueGroupName(),c=new ume(this.view,i,o,a);this._handlers.set(s,{handler:c,priority:r});for(let e of i){let t=this._handlerCounts.get(e)||0;this._handlerCounts.set(e,t+1)}return this.inputManager&&this.inputManager.installHandlers(s,[c],r),Yt(()=>this._removeHandler(s,i))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(let e of t){let t=this._handlerCounts.get(e);t===void 0||(t===1?this._handlerCounts.delete(e):this._handlerCounts.set(e,t-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},ume=class extends nT{constructor(e,t,n,r){super(!0),this._latestDragStart=void 0,this.view=e;for(let i of t)switch(i){case`click`:this.registerIncoming(`click`,n,t=>r(pme(e,t)));break;case`double-click`:this.registerIncoming(`double-click`,n,t=>r(mme(e,t)));break;case`immediate-click`:this.registerIncoming(`immediate-click`,n,t=>r(hme(e,t)));break;case`immediate-double-click`:this.registerIncoming(`immediate-double-click`,n,t=>r(gme(e,t)));break;case`hold`:this.registerIncoming(`hold`,n,t=>r(_me(e,t)));break;case`drag`:this.registerIncoming(`drag`,n,e=>{let t=this._wrapDrag(e);t&&r(t)});break;case`key-down`:this.registerIncoming(`key-down`,n,e=>r(vme(e)));break;case`key-up`:this.registerIncoming(`key-up`,n,e=>r(yme(e)));break;case`pointer-down`:this.registerIncoming(`pointer-down`,n,e=>r(XI(e,`pointer-down`)));break;case`pointer-move`:this.registerIncoming(`pointer-move`,n,e=>r(XI(e,`pointer-move`)));break;case`pointer-up`:this.registerIncoming(`pointer-up`,n,e=>r(XI(e,`pointer-up`)));break;case`pointer-drag`:this.registerIncoming(`pointer-drag`,n,e=>r(bme(e)));break;case`mouse-wheel`:this.registerIncoming(`mouse-wheel`,n,e=>r(xme(e)));break;case`pointer-enter`:this.registerIncoming(`pointer-enter`,n,e=>r(XI(e,`pointer-enter`)));break;case`pointer-leave`:this.registerIncoming(`pointer-leave`,n,e=>r(XI(e,`pointer-leave`)));break;case`gamepad`:this.registerIncoming(`gamepad`,n,e=>{r(Sme(e))});break;case`focus`:this.registerIncoming(`focus`,n,e=>{r(dme(e))});break;case`blur`:this.registerIncoming(`blur`,n,e=>{r(fme(e))})}}_wrapDrag(e){let t=e.data,{x:n,y:r}=t.center,{action:i,pointerType:a,button:o}=t;if(i===`start`&&(this._latestDragStart=t),!this._latestDragStart)return;let s=t.pointer.native,c=t.buttons,{cancelable:l,timestamp:u}=e,d={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return i===`end`&&(this._latestDragStart=void 0),{type:`drag`,action:i,x:n,y:r,origin:d,pointerType:a,button:o,buttons:c,radius:t.radius,angle:$a(t.angle),native:s,timestamp:u,cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}};function dme(e){return{type:`focus`,timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function fme(e){return{type:`blur`,timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function pme(e,t){let{pointerType:n,button:r,buttons:i,x:a,y:o,native:s,eventId:c}=t.data,{cancelable:l,timestamp:u}=t;return{type:`click`,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:u,screenPoint:Zw(a,o),mapPoint:YI(e,a,o),eventId:c,cancelable:l,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function mme(e,t){let{pointerType:n,button:r,buttons:i,x:a,y:o,native:s,eventId:c}=t.data,{cancelable:l,timestamp:u}=t;return{type:`double-click`,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:u,mapPoint:YI(e,a,o),eventId:c,cancelable:l,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function hme(e,t){let{pointerType:n,button:r,buttons:i,x:a,y:o,native:s,eventId:c}=t.data,l=s.pointerId,{cancelable:u,timestamp:d}=t;return{type:`immediate-click`,pointerId:l,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:d,mapPoint:YI(e,a,o),eventId:c,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function gme(e,t){let{pointerType:n,button:r,buttons:i,x:a,y:o,native:s,eventId:c}=t.data,l=s.pointerId,{cancelable:u,timestamp:d}=t;return{type:`immediate-double-click`,pointerId:l,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:d,mapPoint:YI(e,a,o),eventId:c,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function _me(e,t){let{pointerType:n,button:r,buttons:i,x:a,y:o,native:s}=t.data,{cancelable:c,timestamp:l}=t;return{type:`hold`,pointerType:n,button:r,buttons:i,x:a,y:o,native:s,timestamp:l,mapPoint:YI(e,a,o),cancelable:c,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function YI(e,t,n){return e.toMap(Zw(t,n),{exclude:[]})}function vme(e){let{key:t,repeat:n,native:r}=e.data,{cancelable:i,timestamp:a}=e;return{type:`key-down`,key:t,repeat:n,native:r,timestamp:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function yme(e){let{key:t,native:n}=e.data,{cancelable:r,timestamp:i}=e;return{type:`key-up`,key:t,native:n,timestamp:i,cancelable:r,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function XI(e,t){let{x:n,y:r,button:i,buttons:a,native:o,eventId:s}=e.data,c=o.pointerId,l=o.pointerType,{cancelable:u,timestamp:d}=e;return{type:t,x:n,y:r,pointerId:c,pointerType:l,button:i,buttons:a,native:o,timestamp:d,eventId:s,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function bme(e){let{x:t,y:n,buttons:r,native:i,eventId:a}=e.data.currentEvent,{button:o}=e.data.startEvent,s=e.data.startEvent.native.pointerId,c=e.data.startEvent.native.pointerType,l=e.data.action,u={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:d,timestamp:f}=e;return{type:`pointer-drag`,x:t,y:n,pointerId:s,pointerType:c,button:o,buttons:r,action:l,origin:u,native:i,timestamp:f,eventId:a,cancelable:d,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function xme(e){let{cancelable:t,data:n,timestamp:r}=e,{x:i,y:a,deltaY:o,native:s}=n;return{type:`mouse-wheel`,x:i,y:a,deltaY:o,native:s,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}function Sme(e){let{action:t,state:n,device:r}=e.data,{cancelable:i,timestamp:a}=e,{buttons:o,axes:s}=n;return{type:`gamepad`,device:r,timestamp:a,action:t,buttons:o,axes:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),defer:t=>e.defer(t),preventDefault:()=>e.preventDefault()}}var ZI=`z`,QI=`r`,$I={cancel:`Escape`,complete:`Enter`},Cme={...$I,redo:QI,undo:ZI,center:`Alt`,constraint:`Shift`,delete:[`Backspace`,`Delete`],vertexAdd:`f`,pan:` `},wme={toggle:`Control`},Tme={enterInputMode:`Tab`,commit:`Enter`,discard:`Escape`,next:`Tab`},Eme={moveUp:{key:`ArrowUp`,modifier:`Shift`,repeats:!0},moveDown:{key:`ArrowDown`,modifier:`Shift`,repeats:!0},moveLeft:{key:`ArrowLeft`,modifier:`Shift`,repeats:!0},moveRight:{key:`ArrowRight`,modifier:`Shift`,repeats:!0},scaleUp:{key:`+`,modifier:`Shift`},scaleDown:{key:`-`,modifier:`Shift`},factorModifier:{key:tT,continuePropagation:!0},toggleOpacity:`t`,preserveAspectRatio:{key:`Shift`,continuePropagation:!0},rotateIncrements:{key:`Shift`,continuePropagation:!0},editSourcePoints:{key:`Alt`,continuePropagation:!0},undo:ZI,redo:QI},Dme=class{constructor(){this._bindings=new Map}add(e,t){return this.addToggle(e,e=>{e.type===`key-down`&&t(e)})}addToggle(e,t){let n=Ome.fromDefinition(e,t),r=yt(this._bindings,n.key,()=>[]);return r.push(n),Yt(()=>he(r,n))}register(e,t=oT.WIDGET){return Qt([e.on(`key-down`,t=>this.dispatch(e.inputManager,t),t),e.on(`key-up`,t=>this.dispatch(e.inputManager,t),t)])}dispatch(e,t){let n=t.key,r=this._bindings.get(n);if(r)for(let n of r)n.process(e,t)}},Ome=class e{constructor(e,t,n,r,i){this.key=e,this.modifiers=t,this.repeats=n,this.continuePropagation=r,this.callback=i}process(e,t){if(!(t.key!==this.key||`repeat`in t&&t.repeat&&!this.repeats)){for(let t of this.modifiers)if(!e.isModifierKeyDown(t))return;this.continuePropagation||t.stopPropagation(),this.callback(t)}}static fromDefinition(t,n){if(typeof t==`string`)return new e(t,[],!1,!1,n);let{key:r,modifier:i,repeats:a,continuePropagation:o}=t;return new e(r,i?Array.isArray(i)?i:[i]:[],!!a,!!o,n)}};function kme(e){return[e.on(`before-add`,t=>{let n=t.item;if(n==null||e.includes(n))return E.getLogger(`esri.views.interactive.interactiveToolUtils`).warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()}),e.on(`after-remove`,e=>{let t=e.item;t.active&&(t.view.activeTool=null),t.destroy()})]}function eL(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(0)&&e.getEditableFlag(1)}function tL(e){return e.type===`key-down`&&e.key===$I.cancel}function nL(e){return Zw(e.x,e.y)}function rL(e,t){let n=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return n?Zw(t.clientX-n.left,t.clientY-n.top):Zw(0,0)}function iL(e,t){return t instanceof Event?rL(e,t):nL(t)}function aL(e){if(e instanceof Event)return!0;if(typeof e==`object`&&`type`in e)switch(e.type){case`click`:case`double-click`:case`pointer-down`:case`pointer-drag`:case`pointer-enter`:case`pointer-leave`:case`pointer-up`:case`pointer-move`:case`immediate-click`:case`immediate-double-click`:case`hold`:case`drag`:case`mouse-wheel`:return!0;default:return!1}return!1}var oL=class extends F{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new KF,this._grabbedManipulators=new KF,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,`grabbing`)??this._cursorFromMap(this._hoveredManipulators,`pointer`)}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,t){let n=()=>e.stopPropagation();switch(e.type){case`pointer-move`:cL(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case`drag`:this._grabbedManipulators.size>0?this._stopDrag=!0:e.action===`start`?this._externallyDragging=!0:e.action===`end`&&(this._externallyDragging=!1),this._stopDrag&&(n(),e.action===`end`&&(this._stopDrag=!1));break;case`pointer-down`:{if(!lL(e))break;let r=nL(e),i=sL(r,e.pointerType,t.tools);if(i==null)break;let a=i.manipulator,o=i.tool;a==null||o==null||!a.interactive||a.grabbable&&a.grabbableForEvent(e)||!a.grabbing||a.dragging||this._releaseManipulatorBeforeDragging(a,e,t),a!=null&&o!=null&&a.interactive&&a.grabbable&&a.grabbableForEvent(e)&&!a.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:a,tool:o,start:r,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&t.activeTool==null&&(this._revertToNullActiveTool=!0,t.setActiveTool(i.tool)),a.grabbing=!0,a.events.emit(`grab-changed`,{action:`start`,pointerType:e.pointerType,screenPoint:r}),n());break}case`pointer-up`:this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case`pointer-drag`:{if(!lL(e))break;let r=this._grabbedManipulators.get(e.pointerId),i=r?.manipulator,a=r?.tool,{activeTool:o}=t;if(o!=null&&!o.multiTouchEnabled&&t.multiTouchActive&&this._draggedManipulators.size===0&&this._grabbedManipulators.size>0){this.clearPointers(o,t,!0);break}if(i==null||a==null)break;let s=nL(e);s.x=Xa(s.x,0,t.view.width),s.y=Xa(s.y,0,t.view.height);let c=r.start,l=this._draggedManipulators.get(e.pointerId);switch(e.action){case`start`:case`update`:e.action!==`update`&&this._grabbedManipulators.size!==1||(i.dragging=!0,l?i.events.emit(`drag`,{action:`update`,start:c,screenPoint:s}):i.events.emit(`drag`,{action:`start`,start:c,screenPoint:s,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:a,manipulator:i,start:c}));break;case`end`:i.dragging=!1,l&&i.events.emit(`drag`,{action:`end`,start:c,screenPoint:s}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}n();break}case`immediate-click`:{let r=nL(e),i=sL(r,e.pointerType,t.tools);if(!Ame(e)){for(let e of t.tools)if((i==null||i.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){let t=!1;e.manipulators.forEach(({manipulator:e})=>{e.selected&&(e.selected=!1,t=!0)}),t&&e.onManipulatorSelectionChanged&&e.onManipulatorSelectionChanged()}}if(i==null)break;let{manipulator:a,tool:o}=i;if(!a.interactive)break;a.selectable&&o.automaticManipulatorSelection&&(a.selected=!a.selected,o.onManipulatorSelectionChanged&&o.onManipulatorSelectionChanged());let s=e.native.shiftKey;a.events.emit(`immediate-click`,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:s,stopPropagation:n}),uL(a,n);break}case`click`:{let r=nL(e),i=sL(r,e.pointerType,t.tools),a=i?.manipulator;if(a==null||!a.interactive)break;let o=e.native.shiftKey;a.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:o}),n();break}case`double-click`:{let r=nL(e),i=sL(r,e.pointerType,t.tools),a=i==null?null:i.manipulator;if(a==null||!a.interactive)break;let o=e.native.shiftKey;a.events.emit(`double-click`,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:n}),uL(a,n);break}case`immediate-double-click`:{let r=nL(e),i=sL(r,e.pointerType,t.tools),a=i==null?null:i.manipulator;if(a==null||!a.interactive)break;let o=e.native.shiftKey;a.events.emit(`immediate-double-click`,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:n}),e.pointerType===`mouse`&&uL(a,n);break}}this._onFocusChange(t.tools)}_releaseManipulatorBeforeDragging(e,t,n){e.grabbing=!1,e.events.emit(`grab-changed`,{action:`end`,pointerType:t.pointerType,screenPoint:nL(t)}),this._grabbedManipulators.forEach(({manipulator:t},n)=>{t===e&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(n.setActiveTool)}_handlePointerEnd(e,t){let n=this._grabbedManipulators.get(e.pointerId)?.manipulator;n!=null&&n.grabbing&&(n.grabbing=!1,n.events.emit(`grab-changed`,{action:`end`,pointerType:e.pointerType,screenPoint:nL(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(t.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){let t=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:e})=>t.add(e)),this._hoveredManipulators.forEach(({tool:e})=>n.add(e));for(let r of e){r.hasGrabbedManipulators=t.has(r),r.hasHoveredManipulators=n.has(r);let e=this._grabbedManipulators.values(),i=Mr(e,({tool:e})=>e===r);r.firstGrabbedManipulator=i==null?null:i.manipulator}}clearPointers(e,{tools:t,setActiveTool:n},r=!0,i){let a=(t,n)=>!(e!=null&&t!==e||i!=null&&i!==n);this._grabbedManipulators.forEach(({tool:e,manipulator:t,pointerType:n},r)=>{a(e,t)&&(this._grabbedManipulators.delete(r),t.grabbing=!1,t.events.emit(`grab-changed`,{action:`end`,screenPoint:null,pointerType:n}))}),this._draggedManipulators.forEach(({tool:e,manipulator:t},n)=>{a(e,t)&&(this._draggedManipulators.delete(n),t.dragging=!1,t.events.emit(`drag`,{action:`cancel`}))}),r&&this._hoveredManipulators.forEach(({tool:e,manipulator:t},n)=>{a(e,t)&&(this._hoveredManipulators.delete(n),t.hovering=!1)}),this._afterManipulatorRelease(n),this._onFocusChange(t)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,n)=>{this._updateHoveredStateForPointerAtScreenPosition(Zw(t.x,t.y),n,t.pointerType,e)})}handleHoverEvent(e,t){let n=e.type;n!==`pointer-up`&&n!==`immediate-click`&&n!==`pointer-move`||!cL(e.pointerType)||(n!==`pointer-up`&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(nL(e),e.pointerId,e.pointerType,t))}_updateHoveredStateForPointerAtScreenPosition(e,t,n,r){let i=sL(e,n,r),a=this._hoveredManipulators.get(t)?.manipulator;i==null||i.manipulator.interactive||(i=null),i!=null&&a===i.manipulator||(a!=null&&(a.hovering=!1),i==null?this._hoveredManipulators.delete(t):(i.manipulator.hovering=!0,this._hoveredManipulators.set(t,i)),this._onFocusChange(r))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:t},n)=>{e===n&&(this._hoveredManipulators.delete(e),t.hovering=!1)})}_cursorFromMap(e,t){if(!e?.size)return null;for(let{manipulator:t}of e.values())if(t?.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return t}};function sL(e,t,n){for(let r of n){if(r.manipulators==null||!eL(r))continue;let n=r.manipulators.intersect(e,t);if(n!=null)return{tool:r,manipulator:n}}return null}function cL(e){return e===`mouse`}function lL(e){return e.pointerType!==`mouse`||e.button===0}function Ame(e){return!!e.native.shiftKey}function uL(e,t){e?.consumesClicks&&t()}e([N()],oL.prototype,`cursor`,null),oL=e([P(`esri.views.interactive.ToolViewManagerManipulatorState`)],oL);var dL=`attached`,fL=`tools`,jme=1e3,pL=class extends F{constructor(e){super(e),this._updatingHandles=new ew,this._clock=_i,this._manipulatorState=new oL,this.tools=new W,this._interacting=!1,this._interactingTimeout=jme,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(GI,e=>{this._handleInputEvent(e)},oT.TOOL),...kme(this.tools),this.tools.on(`before-add`,({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on(`before-remove`,({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on(`change`,()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view,multiTouchActive:this.view.inputManager?.multiTouchActive}}set activeTool(e){if(e!=null&&!this.view.ready)return void E.getLogger(this).error(`Cannot set active tool while view is not ready.`);if(e===this.activeTool)return;let t=this.activeTool;this._set(`activeTool`,e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(let e of this.tools){this._updateToolEditableFlag(e);let t=eL(e);this.activeTool!=null&&t||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!t)}}get cursor(){let e=this._manipulatorState.cursor;if(e!=null)return e;for(let e of this.tools)if(e.visible&&e.cursor!=null)return e.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Br(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type===`3d`?this.addHandles([G(()=>{let{state:e}=this.view;return`camera`in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on(`elevation-change`,e=>this._forEachManipulator(t=>t.onElevationChange(e)))],dL):this.addHandles(G(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(dL),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(let t of this.tools)t.manipulators&&t.manipulators.forEach(({manipulator:n})=>e(n,t))}_handleInputEvent(e){let t=!1,n={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n);else for(let e of this.tools)!t&&e.visible&&e.handleInputEvent(n);!t&&tL(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this.tools),e.type===`pointer-move`&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(fL);for(let e of this.tools){if(e instanceof F){let t=G(()=>[e.cursor,e.visible,e.editable],()=>{eL(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(t,fL)}e.manipulators&&this.addHandles([e.manipulators.on(`after-remove`,t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on(`change`,()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],fL)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(e=>{this.tools.remove(e)})}get test(){}};e([N({constructOnly:!0,nonNullable:!0})],pL.prototype,`view`,void 0),e([N({value:null})],pL.prototype,`activeTool`,null),e([N({readOnly:!0,type:W})],pL.prototype,`tools`,void 0),e([N()],pL.prototype,`cursor`,null),e([N({readOnly:!0})],pL.prototype,`updating`,null),e([N()],pL.prototype,`_interacting`,void 0),e([N({readOnly:!0})],pL.prototype,`interacting`,null),pL=e([P(`esri.views.ToolViewManager`)],pL);var mL=new J(`cyan`),Mme=.25,Nme=new J(`black`),Pme=.4,Fme=.2,Ime=.25,hL=`default`,Lme=`temporary`,Rme=new J(`yellow`),gL,_L=gL=class extends F{constructor(e){super(e),this.name=hL,this.color=mL.clone(),this.haloColor=null,this.haloOpacity=1,this.fillOpacity=Mme,this.shadowColor=Nme.clone(),this.shadowOpacity=Pme,this.shadowDifference=Fme,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){return new gL({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(e){this.color=e.color.clone(),this.haloColor=e.haloColor?.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};e([N({type:String,constructOnly:!0,nonNullable:!0})],_L.prototype,`name`,void 0),e([N({type:J,nonNullable:!0})],_L.prototype,`color`,void 0),e([N({type:J})],_L.prototype,`haloColor`,void 0),e([N({nonNullable:!0})],_L.prototype,`haloOpacity`,void 0),e([N({nonNullable:!0})],_L.prototype,`fillOpacity`,void 0),e([N({type:J,nonNullable:!0})],_L.prototype,`shadowColor`,void 0),e([N({nonNullable:!0})],_L.prototype,`shadowOpacity`,void 0),e([N({nonNullable:!0})],_L.prototype,`shadowDifference`,void 0),e([N({nonNullable:!0})],_L.prototype,`haloWidth`,void 0),e([N({nonNullable:!0})],_L.prototype,`haloBlur`,void 0),_L=gL=e([P(`esri.views.support.HighlightOptions`)],_L);var vL=_L;function zme(){return new(W.ofType(vL))([new vL({name:hL}),new vL({name:Lme,color:Rme})])}var Bme={standard:.15,spacemouse:.025,unknown:0},Vme=RegExp(`^(3dconnexion|space(mouse|navigator|pilot|explorer))`,`i`);function Hme(e){return e.mapping===`standard`?`standard`:Vme.test(e.id)?`spacemouse`:`unknown`}var yL=class extends F{constructor(e){super(e),this._deviceType=null,this._gamepadIndex=null}get axisThreshold(){return Bme[this.deviceType]}get deviceType(){return this._deviceType??`unknown`}set gamepad(e){this._deviceType=Hme(e),this._gamepadIndex=e.index}get native(){return navigator.getGamepads()[this._gamepadIndex??-1]}};e([N()],yL.prototype,`_deviceType`,void 0),e([N({type:Number})],yL.prototype,`axisThreshold`,null),e([N({type:String})],yL.prototype,`deviceType`,null),e([N({constructOnly:!0})],yL.prototype,`gamepad`,null),yL=e([P(`esri.views.input.gamepad.GamepadInputDevice`)],yL);var bL=yL,xL=class extends F{constructor(e){super(e),this.devices=new W,this.enabledFocusMode=`document`}};e([N({type:W.ofType(bL),readOnly:!0})],xL.prototype,`devices`,void 0),e([N({type:[`document`,`view`,`none`]})],xL.prototype,`enabledFocusMode`,void 0),xL=e([P(`esri.views.input.gamepad.GamepadSettings`)],xL);var Ume=xL,SL=class extends F{constructor(e){super(e),this.gamepad=new Ume}};e([N({readOnly:!0})],SL.prototype,`gamepad`,void 0),SL=e([P(`esri.views.input.Input`)],SL);var Wme=SL,CL=()=>N({type:[`pan`,`rotate`,`zoom`,`none`],nonNullable:!0}),wL=class extends F{constructor(e){super(e),this.dragPrimary=`pan`,this.dragSecondary=`rotate`,this.dragTertiary=`zoom`,this.mouseWheel=`zoom`}};e([CL()],wL.prototype,`dragPrimary`,void 0),e([CL()],wL.prototype,`dragSecondary`,void 0),e([CL()],wL.prototype,`dragTertiary`,void 0),e([N({type:[`zoom`,`none`],nonNullable:!0})],wL.prototype,`mouseWheel`,void 0),wL=e([P(`esri.views.navigation.NavigationActionMap`)],wL);var TL=wL,EL=class extends F{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode=`pan`,this.tiltDirection=`forward-down`,this.velocityFactor=1}};e([N({type:Boolean,nonNullable:!0})],EL.prototype,`enabled`,void 0),e([N({type:bL})],EL.prototype,`device`,void 0),e([N({type:[`pan`,`zoom`],nonNullable:!0})],EL.prototype,`mode`,void 0),e([N({type:[`forward-down`,`forward-up`],nonNullable:!0})],EL.prototype,`tiltDirection`,void 0),e([N({type:Number,nonNullable:!0})],EL.prototype,`velocityFactor`,void 0),EL=e([P(`esri.views.navigation.gamepad.GamepadSettings`)],EL);var DL=EL,OL=class extends F{constructor(e){super(e),this.actionMap=new TL,this.browserTouchPanEnabled=!0,this.gamepad=new DL,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel===`zoom`}set mouseWheelZoomEnabled(e){kr(E.getLogger(this),`mouseWheelZoomEnabled`,{replacement:`actionMap.mouseWheel`,version:`4.32`,warnOnce:!0}),this.actionMap.mouseWheel=e?`zoom`:`none`}};e([N({type:TL,nonNullable:!0})],OL.prototype,`actionMap`,void 0),e([N({type:Boolean})],OL.prototype,`browserTouchPanEnabled`,void 0),e([N({type:DL,nonNullable:!0})],OL.prototype,`gamepad`,void 0),e([N({type:Boolean})],OL.prototype,`momentumEnabled`,void 0),e([N({type:Boolean})],OL.prototype,`mouseWheelZoomEnabled`,null),OL=e([P(`esri.views.navigation.Navigation`)],OL);var kL=OL,AL=class{constructor(e,t){this.text=e,this.score=t}},jL=10,Gme=class{constructor(e,t,n){this.index=e,this.bbox=t,this.score=n}};function Kme(e){let t=e.contributors,n={maxZoom:0,attributions:[]};if(!t)return n;for(let e of t){if(!e.coverageAreas?.length||!e.attribution)continue;let t=n.attributions.length;n.attributions.push(e.attribution);for(let r of e.coverageAreas){let e=r.bbox,i=new Gme(t,Ud(e[1],e[0],e[3],e[2]),r.score??100);for(let e=r.zoomMin;e<=r.zoomMax;e++)n[e]??=[],n[e].push(i)}}return n.maxZoom=Math.max.apply(null,Object.keys(n).map(e=>+e).filter(e=>Number.isFinite(e))),n}function qme(e,t,n,r){let i=t?.scaleToZoom(n)??0;if(i=Math.min(e.maxZoom??0,Math.round(i)),!r||i==null||i<=-1)return[];let a=e[i],{x:o,y:s}=FS(r.center.clone().normalize(),H.WGS84),c=new Set;return a?.filter(e=>{let t=!c.has(e.index)&&Zd(e.bbox,o,s);return t&&c.add(e.index),t}).map(t=>new AL(e.attributions[t.index],t.score))??[]}function Jme(e){return ML(e,`user`)?new AL(e.copyright,jL):null}function Yme(e){return ML(e)?new AL(e.copyright,jL):null}function ML(e,t){return typeof e==`object`&&!!e&&`copyright`in e&&typeof e.copyright==`string`&&e.copyright.length>0&&(!t||fD(e)&&e.originOf(`copyright`)===`user`)}function Xme(e){return typeof e==`object`&&!!e&&`hasAttributionData`in e&&!0===e.hasAttributionData&&`attributionDataUrl`in e&&`fetchAttributionData`in e&&typeof e.fetchAttributionData==`function`}function Zme(e){return typeof e==`object`&&!!e&&`portalItem`in e&&e.portalItem!=null&&typeof e.portalItem==`object`&&`accessInformation`in e.portalItem&&typeof e.portalItem.accessInformation==`string`&&e.portalItem.accessInformation.length>0}function Qme(e){return Zme(e)?new AL(e.portalItem.accessInformation,jL):null}function $me(e,t){let n=new globalThis.Map;for(let e of t){let t=n.get(e.text);t?e.score>t.score&&n.set(e.text,e):n.set(e.text,e)}let r=Array.from(n.values()).sort((e,t)=>t.score-e.score);return e&&S(e,r,(e,t)=>e.text===t.text)?e:r}function ehe(e,t,n){let r=PL(e),i=t,a=the(r,i,n);if(r){let t=ek.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!n&&t!==r.heightUnit){let e=new D(`layerview:unmatched-height-unit`,`The vertical units of the layer must match the horizontal units (${t})`,{horizontalUnit:t});return new D(`layerview:unsupported-height-model-info`,`The vertical coordinate system of the layer is not supported`,{heightModelInfo:r,error:e})}}if(!nhe(e)||a===4)return new D(`layerview:unsupported-height-model-info`,`The vertical coordinate system of the layer is not supported`,{heightModelInfo:r});switch(a){case 1:{let e=r?.heightUnit||`unknown`,t=i?.heightUnit||`unknown`,n=new D(`layerview:incompatible-height-unit`,`The vertical units of the layer (${e}) must match the vertical units of the scene (${t})`,{layerUnit:e,sceneUnit:t});return new D(`layerview:incompatible-height-model-info`,`The vertical coordinate system of the layer is incompatible with the scene`,{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:n})}case 2:{let e=r?.heightModel||`unknown`,t=i?.heightModel||`unknown`,n=new D(`layerview:incompatible-height-model`,`The height model of the layer (${e}) must match the height model of the scene (${t})`,{layerHeightModel:e,sceneHeightModel:t});return new D(`layerview:incompatible-height-model-info`,`The vertical coordinate system of the layer is incompatible with the scene`,{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:n})}case 3:{let e=r?.vertCRS||`unknown`,t=i?.vertCRS||`unknown`,n=new D(`layerview:incompatible-vertical-datum`,`The vertical datum of the layer (${e}) must match the vertical datum of the scene (${t})`,{layerDatum:e,sceneDatum:t});return new D(`layerview:incompatible-height-model-info`,`The vertical coordinate system of the layer is incompatible with the scene`,{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:n})}}return null}function the(e,t,n){if(!NL(e)||!NL(t))return 4;if(e==null||t==null)return 0;if(!n&&e.heightUnit!==t.heightUnit)return 1;if(e.heightModel!==t.heightModel)return 2;switch(e.heightModel){case`gravity-related-height`:return 0;case`ellipsoidal`:return e.vertCRS===t.vertCRS?0:3;default:return 4}}function NL(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function nhe(e){return`heightModelInfo`in e&&e.heightModelInfo!=null||e.spatialReference!=null||!LL(e)}function PL(e){if(e.type===`integrated-mesh-3dtiles`||e.type===`gaussian-splat`)return null;let t=e.url?Dc(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType===`ImageServer`)&&FL(e)&&e.heightModelInfo?e.heightModelInfo:LL(e)?ek.deriveUnitFromSR(rhe,e.spatialReference):null}function FL(e){return`heightModelInfo`in e}function IL(e){if(e.type===`unknown`||!(`capabilities`in e))return!1;switch(e.type){case`catalog`:case`catalog-footprint`:case`csv`:case`feature`:case`geojson`:case`subtype-group`:case`ogc-feature`:case`oriented-imagery`:case`wfs`:case`knowledge-graph-sublayer`:return!0;default:return!1}}function LL(e){return IL(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):zL(e)}function RL(e){return e.layers!=null||zL(e)||IL(e)||FL(e)}function zL(e){switch(e.type){case`building-scene`:case`elevation`:case`integrated-mesh`:case`integrated-mesh-3dtiles`:case`point-cloud`:case`scene`:case`voxel`:return!0;case`base-dynamic`:case`base-elevation`:case`base-tile`:case`bing-maps`:case`catalog`:case`catalog-footprint`:case`catalog-dynamic-group`:case`csv`:case`dimension`:case`gaussian-splat`:case`geojson`:case`feature`:case`subtype-group`:case`geo-rss`:case`graphics`:case`group`:case`imagery`:case`imagery-tile`:case`kml`:case`knowledge-graph`:case`link-chart`:case`knowledge-graph-sublayer`:case`line-of-sight`:case`map-image`:case`map-notes`:case`media`:case`ogc-feature`:case`open-street-map`:case`oriented-imagery`:case`parquet`:case`route`:case`stream`:case`tile`:case`unknown`:case`unsupported`:case`vector-tile`:case`video`:case`viewshed`:case`wcs`:case`web-tile`:case`wfs`:case`wms`:case`wmts`:case null:return!1}return!1}var rhe=new ek({heightModel:`gravity-related-height`}),BL,VL=null;async function ihe(e){VL||=R(()=>import(`./geometryServiceUtils-B66sKfND.js`),[]).then(e=>BL=e),await VL,Ci(e)}async function HL(e,t,n,r){if(!e)return null;let i=e.spatialReference;return jS()||zS(i,t)?FS(e,t):BL?BL.projectGeometry(e,t,n,r):(await Promise.race([ihe(r),PS(r)]),HL(e,t,n,r))}var UL=class extends F{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Vr(this._projectExtentTask.task)),this._set(`map`,null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){let e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _spatialReferenceTask(){if(this.suspended)return this._get(`_spatialReferenceTask`)??{updating:!1};let e;if(this._collectLayers(this.mapCollections,t=>{let n=this._getSupportedSpatialReferences(t);if(n.length>0){let t=this._narrowDownSpatialReferenceCandidates(e,n);t!=null&&(e=t)}return e?.length===1})&&e?.length!==1)return{updating:!0};let t=this._pickSpatialReferenceCandidate(e);return{spatialReference:t?.spatialReference??null,viewingMode:t?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get(`_tileInfoTask`)??{updating:!1};let e=this.map?.(),t=this.spatialReference;if(!t)return{updating:this._spatialReferenceTask.updating};let n,r=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],e=>!(!(`tileInfo`in e)||!e.tileInfo?.spatialReference.equals(t))&&(n=e,!0),e=>`tileInfo`in e);return n?{tileInfo:n.tileInfo,updating:!1}:{updating:r}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get(`_heightModelInfoTask`)?.heightModelInfo)return this._get(`_heightModelInfoTask`)??{updating:!1};let e={},t=this._collectLayers(this.mapCollections,t=>{let n=PL(t);return!!n&&(e={heightModelInfo:n,vcsWkid:t.spatialReference?.vcsWkid,latestVcsWkid:t.spatialReference?.latestVcsWkid},!0)},e=>RL(e));return{...e,updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get(`_extentCandidatesTask`)??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let e=[],t=this._collectLayers(this.mapCollections,t=>{let n=`fullExtents`in t&&t.fullExtents||(t.fullExtent==null?[]:[t.fullExtent]),r=this.requiresExtentInSpatialReference?null:n[0],i=n.find(e=>e.spatialReference.equals(this.spatialReference))??r;if(i)return e.push({extent:i,layer:t}),!0;if(this._getSupportedSpatialReferences(t).length>0)for(let r of n)e.push({extent:r,layer:t});return!1});return{candidates:e,updating:t}}get _extentTask(){let{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let n=this._pickExtentCandidate(e),r=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Vr(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:r.clone(),task:Bw(async e=>{try{let t=await HL(n.extent,r,`portalItem`in n.layer?n.layer.portalItem:void 0,e);this._projectExtentTask={...this._projectExtentTask,task:null,output:t}}catch{if(Ti(e))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;let n=[];for(let r of e)for(let e of t){if(!r.spatialReference.equals(e.spatialReference))continue;let t=ohe(r.viewingMode,e.viewingMode);if(!1!==t){n.push({spatialReference:r.spatialReference,viewingMode:t});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){let t=this.defaultSpatialReference;return e==null||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:e})=>e.equals(t))&&(e=e.filter(({spatialReference:e})=>e.equals(t))),e.length>1&&e.some(({viewingMode:e})=>e!==2)&&(e=e.filter(({viewingMode:e})=>e!==2)),e[0])}_getSupportedSpatialReferences(e){let t=`supportedSpatialReferences`in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];let n=[];for(let r of t){let t=this.getSpatialReferenceSupport(r,e);if(t!=null){let e=t.constraints??[{spatialReference:r,viewingMode:null}];for(let{spatialReference:t,viewingMode:r}of e)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!t.equals(this.userSpatialReference)||n.push({spatialReference:t,viewingMode:r})}}return n}_pickExtentCandidate(e){let t=this.spatialReference;return e.find(({extent:e})=>t.equals(e.spatialReference))||e[0]}_collectLayers(e,t,n=()=>!0){switch(this._loadMaybe(this.map?.())){case`loading`:return!0;case`failed`:return!1}let r=new ahe(n,t);for(let t of e)if(this._collectCollection(t,r),r.done||r.preloading===this.sourcePreloadCount)break;return r.updating}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case`loading`:t.updating=!0,++t.preloading;return;case`failed`:return}for(let n of e.layers)if((n.type!==`graphics`||!n.internal)&&t.layerFilter(n)){switch(this._loadMaybe(n)){case`failed`:continue;case`loading`:t.updating=!0,++t.preloading;break;case`loaded`:if(t.updating||(t.done=t.pushLayer(n)),t.done||t.preloading===this.sourcePreloadCount)break;`layers`in n&&this._collectCollection({layers:n.layers},t)}if(t.done||t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&`loadStatus`in e&&e.loadStatus!=null?e.loadStatus===`not-loaded`?(e.load().catch(e=>{ji(e)}),`loading`):e.loadStatus:`loaded`}};e([N()],UL.prototype,`required`,void 0),e([N({constructOnly:!0})],UL.prototype,`map`,void 0),e([N({constructOnly:!0})],UL.prototype,`getSpatialReferenceSupport`,void 0),e([N()],UL.prototype,`defaultSpatialReference`,void 0),e([N()],UL.prototype,`userSpatialReference`,void 0),e([N()],UL.prototype,`sourcePreloadCount`,void 0),e([N()],UL.prototype,`priorityCollection`,void 0),e([N()],UL.prototype,`requiresExtentInSpatialReference`,void 0),e([N()],UL.prototype,`suspended`,void 0),e([N({readOnly:!0})],UL.prototype,`ready`,null),e([N({readOnly:!0})],UL.prototype,`heightModelInfoReady`,null),e([N({readOnly:!0})],UL.prototype,`spatialReference`,null),e([N({readOnly:!0})],UL.prototype,`extent`,null),e([N({readOnly:!0})],UL.prototype,`heightModelInfo`,null),e([N({readOnly:!0})],UL.prototype,`vcsWkid`,null),e([N({readOnly:!0})],UL.prototype,`latestVcsWkid`,null),e([N({readOnly:!0})],UL.prototype,`viewingMode`,null),e([N({readOnly:!0})],UL.prototype,`tileInfo`,null),e([N({readOnly:!0})],UL.prototype,`mapCollections`,null),e([N({readOnly:!0})],UL.prototype,`_spatialReferenceTask`,null),e([N({readOnly:!0})],UL.prototype,`_tileInfoTask`,null),e([N({readOnly:!0})],UL.prototype,`_heightModelInfoTask`,null),e([N({readOnly:!0})],UL.prototype,`_extentCandidatesTask`,null),e([N()],UL.prototype,`_extentTask`,null),e([N()],UL.prototype,`_projectExtentTask`,void 0),UL=e([P(`esri.views.support.DefaultsFromMap`)],UL);var ahe=class{constructor(e,t){this.layerFilter=e,this.pushLayer=t,this.preloading=-1,this.updating=!1,this.done=!1}};function ohe(e,t){return e==null?t:(t==null||e===t)&&e}function she(e){return`tryRecycleWith`in e}var che=class{constructor(e,t,n){this.layer=e,this.view=t,this.layerViewImporter=n,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=zi(),this.promise=this._deferred.promise,Oi(this._controller.signal,()=>{this._recycleController?.abort();let t=new D(`cancelled:layerview-create`,`layerview creation cancelled`,{layer:e});this._deferred?.reject(t)})}tryRecycle(e){if(!this.done||!this.layerView||!she(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;let t=this.layer.type,n=this._recycleController.signal;for(let r=0;r<e.length;r++){let i=e[r];if(i.type!==t)continue;let a=this.layerView.tryRecycleWith(i,{signal:n});if(a){e.splice(r,1),this.layer=i;let t=this.layerView,o=t.view;return this.promise=a.then(()=>(Ci(n),i.emit(`layerview-destroy`,{view:o,layerView:t}),o.emit(`layerview-destroy`,{view:o,layerView:t,layer:void 0}),i.emit(`layerview-create`,{view:o,layerView:t}),o.emit(`layerview-create`,{view:o,layerView:t,layer:void 0}),t)),this.promise}}return null}destroy(){this._controller.abort();let{layerView:e}=this;if(e){let{layer:t,view:n}=this;t.emit(`layerview-destroy`,{view:n,layerView:e}),n.emit(`layerview-destroy`,{layer:t,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){let{view:e}=this;if(this._started||!e.map)return;this._started=!0;let{_controller:{signal:t},layer:n}=this;this._map=e.map;try{let r,i;if(await n.load({signal:t}),n.prefetchResources&&await n.prefetchResources({signal:t}),lhe(n))r=await n.createLayerView(e,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new D(`layer:view-not-supported`,`No layerview implementation was found`);let i=await this.layerViewImporter.importLayerView(n);Ci(t),r=`default`in i?new i.default({layer:n,view:e}):new i({layer:n,view:e})}let a=()=>{i=Br(i),r.destroyed||r.destroy(),this.done=!0};i=Oi(t,a),Ci(t);try{await r.when()}catch(e){throw a(),e}if(!this._map?.allLayers?.includes(n))return a(),void this._deferred?.reject(new D(`view:no-layerview-for-layer`,`The layer has been removed from the map`,{layer:n}));this.layerView=r,n.emit(`layerview-create`,{view:e,layerView:r}),e.emit(`layerview-create`,{layer:n,layerView:r}),this.done=!0,this._deferred?.resolve(r)}catch(t){n.emit(`layerview-create-error`,{view:e,error:t}),e.emit(`layerview-create-error`,{layer:n,error:t}),this.done=!0,this._deferred?.reject(new D(`layerview:create-error`,`layerview creation failed`,{layer:n,error:t}))}}};function lhe(e){return e.createLayerView!==ZT.prototype.createLayerView}function uhe(e){return typeof e==`object`&&!!e&&`layerViews`in e}var WL=class extends F{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new ew,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let e=this.view.map?.allLayers;if(e)for(let t of e)!1!==this.layerViewFilter?.(t)&&this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise??(this._workPromise=zi(),this._workPromise.promise.catch(()=>{})),this.removeHandles(`reschedule`),this.addHandles(Qi(this._doWork),`reschedule`),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;let{map:e}=this.view;if(!e)return void this.clear();if(this._map!==e&&(this.clear(),this._map=e),this._workPromise==null)return void this.notifyChange(`updating`);this.removeHandles(`reschedule`),this.removeHandles(`collection-change`);let t=new Set,n=[],r=this.view.ready,i=e=>{if(e!=null){for(let a of e)if(a){if(!1===this.layerViewFilter?.(a))continue;t.add(a);let e=this._layerLayerViewInfoMap.get(a);e&&r?e.start():e||this._recyclingInfoMap.has(a)||n.push(a),`layers`in a&&a.layers&&i(a.layers)}}};for(let e of this._rootCollectionNames)i(mn(this,e));let a=[],o=e=>{let t=e.tryRecycle(n);t?(this._recyclingInfoMap.set(e.layer,e),this.notifyChange(`updating`),t.then(()=>{this._recyclingInfoMap.delete(e.layer),this._layerLayerViewInfoMap.set(e.layer,e),this._reschedule(),this.notifyChange(`updating`)}).catch(t=>{ji(t)||(this._recyclingInfoMap.delete(e.layer),e.destroy(),this._reschedule(),this.notifyChange(`updating`))})):a.push(e)};for(let e of this._layerLayerViewInfoMap.values())t.has(e.layer)||(this._layerLayerViewInfoMap.delete(e.layer),o(e));for(let e of this._recyclingInfoMap.values())t.has(e.layer)||(this._recyclingInfoMap.delete(e.layer),o(e));for(let e of n)this._createLayerView(e);this._refreshCollections(),a.forEach(e=>e.destroy());let s=[e?.ground?.layers,e?.basemap?.baseLayers,e?.basemap?.groundLayers,e?.basemap?.referenceLayers,e?.layers].filter(e=>!!e);t.forEach(e=>`layers`in e&&s.push(e.layers)),this.addHandles(s.map(e=>this._watchUpdatingTracking.addOnCollectionChange(()=>e,this._reschedule)),`collection-change`),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([Hh(()=>this.view?.map?.allLayers,`change`,this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),G(()=>{let e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),Jh)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),BO(this._recyclingInfoMap),BO(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Si()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||gt(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(let t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),BO(this._layerLayerViewInfoMap),BO(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();let t=this._layerLayerViewInfoMap.get(e)?.promise;if(!t){let t=this._recyclingInfoMap.get(e)?.promise;if(!t)throw new D(`view:no-layerview-for-layer`,`No layerview has been found for the layer`,{layer:e});return t}return t}isCreatingLayerViewsForLayer(e,t){this.commitProperty(`updatingRemaining`);let n=this._layerLayerViewInfoMap.get(e);if(!n?.done)return!0;let r=n.layerView;return!(!r||!t||r.parent===t)||!!(n.done&&r&&`layers`in e&&e.layers?.length)&&e.layers.some(e=>this.isCreatingLayerViewsForLayer(e,r))}isRecyclingLayerViewForLayer(e){return this._recyclingInfoMap.has(e)}_refreshCollections(){for(let[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(mn(this,e),mn(this,t),this.view);this.notifyChange(`updating`),this.notifyChange(`updatingRemaining`)}_clearCollections(){for(let e of this._layersToLayerViews.values())mn(this,e)?.removeAll()}_populateLayerViewsOwners(e,t,n){if(!e||!t)return void t?.removeAll();let r=0;for(let i of e){let e=this._layerLayerViewInfoMap.get(i);if(!e?.layerView)continue;let{layerView:a}=e;a.layer=i,a.parent=n,t.at(r)!==a&&t.splice(r,0,a),`layers`in i&&uhe(a)&&this._populateLayerViewsOwners(i.layers,a.layerViews,a),++r}r<t.length&&t.splice(r)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);let t=new che(e,this.view,this.layerViewImporter);t.promise?.then(()=>this._refreshCollections(),t=>{t&&(ji(t)||t.name===`cancelled:layerview-create`)||E.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??`no title`}', id:'${e.id??`no id`}' of type '${e.type}'.`,{layer:e,error:t}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange(`updating`),this.notifyChange(`updatingRemaining`)}};e([N()],WL.prototype,`_workPromise`,void 0),e([N({readOnly:!0})],WL.prototype,`_watchUpdatingTracking`,void 0),e([N({readOnly:!0})],WL.prototype,`_layersToLayerViews`,void 0),e([N({constructOnly:!0})],WL.prototype,`layerviewMapping`,void 0),e([N({readOnly:!0})],WL.prototype,`_rootCollectionNames`,null),e([N({constructOnly:!0})],WL.prototype,`layerViewFilter`,void 0),e([N()],WL.prototype,`layerViewImporter`,void 0),e([N()],WL.prototype,`supportsGround`,void 0),e([N({readOnly:!0})],WL.prototype,`updating`,null),e([N({readOnly:!0})],WL.prototype,`updatingRemaining`,null),e([N({constructOnly:!0})],WL.prototype,`view`,void 0),WL=e([P(`esri.views.support.LayerViewManager`)],WL);var dhe=WL,GL=class extends F{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};e([N()],GL.prototype,`featureTitleFields`,void 0),e([N()],GL.prototype,`utilityNetworkFields`,void 0),e([N()],GL.prototype,`globalIdField`,void 0),GL=e([P(`esri.views.support.RequiredFieldsOptions`)],GL);var fhe=GL,KL,X=class extends wh(uT){static{KL=this}constructor(e){super(e),this._userSpatialReference=null,this.handles=new Pr,this.updatingHandles=new ew,this.allLayerViews=new Xh({getCollections:()=>this.layerviewCollections,getChildrenFunction:mhe}),this.animationsEnabled=!0,this.attributionVisible=!0,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new HF,this.typeSpecificPreconditionsReady=!0,this.layerViews=new W,this.magnifier=new GF,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new W,this._highPriorityCursorHandles=new W,this.input=new Wme,this.navigation=new kL,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new JI(this),this.persistableViewModels=new W,this.requiredFieldsOptions=new fhe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(G(()=>this.preconditionsReady,e=>{let t=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,KL.views.add(this)):(this._lockedSpatialReference=null,KL.views.remove(this)),this.notifyChange(`spatialReference`),!e&&t)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(e&&!t){try{this._startup()}catch(e){queueMicrotask(()=>{this.fatalError=new D(`view:startup-error`,`View._startup failed`,e)});return}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},Kh)),this.analyses=new nk}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,Uh(()=>this.ready)))),this.basemapView=new Ype({view:this}),this.layerViewManager=new dhe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new pL({view:this}),this.selectionManager=new cme({view:this}),this.addHandles([Bh(()=>this.readyState===`map-content-error`&&!this.spatialReference,()=>{E.getLogger(this).warn(`#spatialReference`,`no spatial reference could be derived from the currently added map layers`)}),G(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Jh),G(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Kh),G(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Jh)])}get _layerToLayerviewMapping(){return KL._layerToLayerview}static{this._layerToLayerview=[[`view.map.basemap.baseLayers`,`view.basemapView.baseLayerViews`],[`view.map.basemap.groundLayers`,`view.basemapView.groundLayerViews`],[`view.map.basemap.referenceLayers`,`view.basemapView.referenceLayerViews`],[`view.map.layers`,`view.layerViews`]]}destroy(){this.destroyed||(KL.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set(`navigation`,null)),this.graphics=zr(this.graphics),this.analyses=zr(this.analyses),this.defaultsFromMap.destroy(),this._set(`defaultsFromMap`,null),this.analysisViewManager=zr(this.analysisViewManager),this.toolViewManager=zr(this.toolViewManager),this.layerViewManager=zr(this.layerViewManager),this.selectionManager=zr(this.selectionManager),this.basemapView=zr(this.basemapView),this.layerViews.destroyAll(),this.invalidate(),this.handles.destroy(),this.map=zr(this.map),this.updatingHandles.destroy())}_startup(){this._set(`ready`,!0)}_teardown(){this._set(`ready`,!1)}whenReady(){return Promise.resolve(this)}toMap(){return E.getLogger(this).error(`#toMap()`,`Not implemented on this instance of View`),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get analyses(){return this._get(`analyses`)}set analyses(e){this._set(`analyses`,e)}get animation(){return this._get(`animation`)}set animation(e){this._set(`animation`,e)}get attributionItems(){return this.suspended?[]:$me(this._get(`attributionItems`),this.getAttributionItems())}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new UL({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get(`extent`)}set extent(e){this._set(`extent`,e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get(`highlights`)??zme()}set highlights(e){this._set(`highlights`,sT(e,this._get(`highlights`),W.ofType(vL)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||mT(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get(`map`)&&(e?.destroyed&&(E.getLogger(this).warn(`#map`,`The provided map is already destroyed`,{map:e}),e=null),mT(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set(`map`,e))}get readyState(){if(this.destroyed)return this._get(`readyState`);if(!this.map)return`missing-map`;if(`container`in this&&!this.container)return`missing-container`;if(this.fatalError)return`rendering-error`;if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){let e=!(`loaded`in this.map)||this.map.loaded,t=this.map.ground.loaded,n=this.map.basemap?.loaded??!0;return e&&n&&t&&!this.map?.allLayers.length?`empty-map`:(this._readyStateWaitingTask||(this._readyStateWaitingTask=Bw(e=>Fi(c(`view-readyState-waiting-delay`),null,e)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,`ready-state-task`)),this._readyStateWaitingTask?.finished?`map-content-error`:`loading`)}return this._readyStateWaitingTask=Vr(this._readyStateWaitingTask),this.removeHandles(`ready-state-task`),this.ready?`ready`:`loading`}get spatialReference(){let e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){let t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){let t=!Pl(e,this._get(`spatialReference`));this._set(`_userSpatialReference`,e),t&&(this._set(`spatialReference`,e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??`system`}set timeZone(e){this._userTimeZone=e,Eb(e)||E.getLogger(this).warn(`#timeZone`,`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??`default`}acquireCursor(e,t=`low`){let n=t===`high`?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,r={cursor:e},i=Yt(()=>n.remove(r));return n.add(r),this.addHandles(i),i}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new WI}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getAttributionItems(){return this.allLayerViews.items.flatMap(e=>e.attributionItems)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&`heightModelInfo`in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new D(`view:importLayerView-missing`,`importLayerView() not implemented`)}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&E.getLogger(this).warn(`#when()`,`Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead.`),super.when(e,t)}forceReadyCycle(){this.ready&&(Bh(()=>this.destroyed||!1===this.preconditionsReady,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,t){return super.on(e,t)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}static{this.views=new W}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){let t=document.createElement(`div`);t.setAttribute(`style`,`display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;`);let n=document.createElement(`div`);n.innerHTML=`Unable to display map. WebGL2 support is required.`,n.setAttribute(`style`,`font-size: 24px; font-weight: bold;`);let r=document.createElement(`div`);r.innerHTML=`Ensure that your browser and hardware meet the minimum requirements.`,r.setAttribute(`style`,`font-size: 18px;`);let i=document.createElement(`a`);i.innerHTML=`https://esriurl.com/webgl-faq`,i.target=`_blank`,i.setAttribute(`style`,`font-size: 18px;`),i.href=`https://esriurl.com/webgl-faq`,t.appendChild(n),t.appendChild(r),t.appendChild(i);let a=this.getSurface();throw a&&a.appendChild(t),e}}};e([N()],X.prototype,`_userSpatialReference`,void 0),e([N()],X.prototype,`activeTool`,null),e([N({readOnly:!0})],X.prototype,`allLayerViews`,void 0),e([N({readOnly:!0})],X.prototype,`layerviewCollections`,null),e([N(YO(nk,`analyses`))],X.prototype,`analyses`,null),e([N()],X.prototype,`animation`,null),e([N()],X.prototype,`animationsEnabled`,void 0),e([N({readOnly:!0})],X.prototype,`attributionItems`,null),e([N()],X.prototype,`attributionVisible`,void 0),e([N()],X.prototype,`basemapView`,void 0),e([N()],X.prototype,`center`,null),e([N()],X.prototype,`defaultsFromMapSettings`,null),e([N()],X.prototype,`defaultsFromMap`,null),e([N()],X.prototype,`dependencies`,void 0),e([N()],X.prototype,`displayFilterEnabled`,void 0),e([N({type:Rd})],X.prototype,`extent`,null),e([N()],X.prototype,`fatalError`,void 0),e([N(YO(HF,`graphics`))],X.prototype,`graphics`,void 0),e([N({readOnly:!0,type:ek})],X.prototype,`heightModelInfo`,null),e([N({type:W.ofType(vL)})],X.prototype,`highlights`,null),e([N({readOnly:!0})],X.prototype,`interacting`,null),e([N({constructOnly:!0})],X.prototype,`layerViewFilter`,void 0),e([N({readOnly:!0})],X.prototype,`navigating`,null),e([N({readOnly:!0,dependsOn:[`fatalError`,`_isValid`,`_readyCycleForced`,`map`,`map.loaded?`,`width`,`height`,`spatialReference`,`_lockedSpatialReference`,`defaultsFromMap.ready`,`typeSpecificPreconditionsReady`]})],X.prototype,`preconditionsReady`,null),e([N({readOnly:!0})],X.prototype,`typeSpecificPreconditionsReady`,void 0),e([N({type:W,readOnly:!0})],X.prototype,`layerViews`,void 0),e([N()],X.prototype,`resolution`,null),e([N({type:GF})],X.prototype,`magnifier`,void 0),e([N({value:null,type:qO})],X.prototype,`map`,null),e([N()],X.prototype,`padding`,void 0),e([N({readOnly:!0})],X.prototype,`ready`,void 0),e([N()],X.prototype,`_readyStateWaitingTask`,void 0),e([N({readOnly:!0})],X.prototype,`readyState`,null),e([N({type:H})],X.prototype,`spatialReference`,null),e([N()],X.prototype,`stationary`,null),e([N({type:YT})],X.prototype,`timeExtent`,null),e([N({type:String,nonNullable:!0})],X.prototype,`timeZone`,null),e([N()],X.prototype,`tools`,null),e([N()],X.prototype,`toolViewManager`,void 0),e([N({readOnly:!0})],X.prototype,`type`,void 0),e([N({type:Number})],X.prototype,`scale`,void 0),e([N({readOnly:!0})],X.prototype,`updating`,void 0),e([N({readOnly:!0})],X.prototype,`initialExtentRequired`,void 0),e([N({readOnly:!0})],X.prototype,`initialExtent`,null),e([N()],X.prototype,`cursor`,null),e([N({readOnly:!0})],X.prototype,`input`,void 0),e([N({type:kL,nonNullable:!0})],X.prototype,`navigation`,void 0),e([N()],X.prototype,`layerViewManager`,void 0),e([N()],X.prototype,`analysisViewManager`,void 0),e([N()],X.prototype,`selectionManager`,void 0),e([N()],X.prototype,`width`,void 0),e([N()],X.prototype,`height`,void 0),e([N({readOnly:!0})],X.prototype,`resizing`,void 0),e([N({value:null,readOnly:!0})],X.prototype,`size`,null),e([N({readOnly:!0})],X.prototype,`suspended`,void 0),e([N({readOnly:!0})],X.prototype,`viewEvents`,void 0),e([N({readOnly:!0})],X.prototype,`persistableViewModels`,void 0),e([N()],X.prototype,`_isValid`,void 0),e([N()],X.prototype,`_readyCycleForced`,void 0),e([N()],X.prototype,`_lockedSpatialReference`,void 0),e([N()],X.prototype,`_userTimeZone`,void 0),e([N()],X.prototype,`_lockedTimeZone`,void 0),e([N()],X.prototype,`_userTimeExtent`,void 0),e([N()],X.prototype,`_lockedTimeExtent`,void 0),e([N({type:WI})],X.prototype,`theme`,void 0),e([N({readOnly:!0,type:WI})],X.prototype,`effectiveTheme`,null),X=KL=e([P(`esri.views.View`)],X);var qL=globalThis.$arcgis;qL&&!qL.views&&Object.defineProperty(qL,`views`,{configurable:!1,enumerable:!0,writable:!1,value:X.views});var phe=X;function mhe(e){return e.layerViews}function JL(){return[0,0]}function YL(e){return[e[0],e[1]]}function XL(e,t){return[e,t]}function hhe(e,t){return[e,t]}function ZL(e,t=JL()){let n=Math.min(2,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function QL(){return JL()}function $L(){return XL(1,1)}function eR(){return XL(1,0)}function tR(){return XL(0,1)}var nR=QL(),rR=$L(),iR=eR(),aR=tR();Object.freeze(Object.defineProperty({__proto__:null,ONES:rR,UNIT_X:iR,UNIT_Y:aR,ZEROS:nR,clone:YL,create:JL,freeze:hhe,fromArray:ZL,fromValues:XL,ones:$L,unitX:eR,unitY:tR,zeros:QL},Symbol.toStringTag,{value:`Module`}));function ghe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function oR(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function sR(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e}function cR(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=n*a-r*i;return c?(c=1/c,e[0]=a*c,e[1]=-r*c,e[2]=-i*c,e[3]=n*c,e[4]=(i*s-a*o)*c,e[5]=(r*o-n*s)*c,e):null}function _he(e){return e[0]*e[3]-e[1]*e[2]}function lR(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=n[0],u=n[1],d=n[2],f=n[3],p=n[4],m=n[5];return e[0]=r*l+a*u,e[1]=i*l+o*u,e[2]=r*d+a*f,e[3]=i*d+o*f,e[4]=r*p+a*m+s,e[5]=i*p+o*m+c,e}function uR(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*l,e[1]=i*u+o*l,e[2]=r*-l+a*u,e[3]=i*-l+o*u,e[4]=s,e[5]=c,e}function dR(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r*l,e[1]=i*l,e[2]=a*u,e[3]=o*u,e[4]=s,e[5]=c,e}function fR(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*l+a*u+s,e[5]=i*l+o*u+c,e}function pR(e,t){let n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function mR(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function hR(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function vhe(e){return`mat2d(`+e[0]+`, `+e[1]+`, `+e[2]+`, `+e[3]+`, `+e[4]+`, `+e[5]+`)`}function yhe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function bhe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function gR(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function xhe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function She(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function Che(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function whe(e,t){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=t[0],l=t[1],u=t[2],d=t[3],f=t[4],p=t[5],m=nf();return Math.abs(n-c)<=m*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=m*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-u)<=m*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-d)<=m*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-f)<=m*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-p)<=m*Math.max(1,Math.abs(s),Math.abs(p))}var The=lR,Ehe=gR;Object.freeze(Object.defineProperty({__proto__:null,add:bhe,copy:ghe,determinant:_he,equals:whe,exactEquals:Che,frob:yhe,fromRotation:pR,fromScaling:mR,fromTranslation:hR,identity:oR,invert:cR,mul:The,multiply:lR,multiplyScalar:xhe,multiplyScalarAndAdd:She,rotate:uR,scale:dR,set:sR,str:vhe,sub:Ehe,subtract:gR,translate:fR},Symbol.toStringTag,{value:`Module`}));function _R(){return[1,0,0,1,0,0]}function vR(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Dhe(e,t,n,r,i,a){return[e,t,n,r,i,a]}var Ohe=_R();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Ohe,clone:vR,create:_R,fromValues:Dhe},Symbol.toStringTag,{value:`Module`}));var yR={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new lh({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:H.WebMercator}),minus180Line:new lh({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:H.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new lh({paths:[[[180,-180],[180,180]]],spatialReference:H.WGS84}),minus180Line:new lh({paths:[[[-180,-180],[-180,180]]],spatialReference:H.WGS84})}};function bR(e,t){return Math.ceil((e-t)/(2*t))}function xR(e,t){let n=SR(e);for(let e of n)for(let n of e)n[0]+=t;return e}function SR(e){return mh(e)?e.rings:e.paths}function CR(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function wR(e){return typeof e==`string`?Qo(e):C(e)}function TR(e,t,n){let r={};for(let i in e){if(i===`declaredClass`)continue;let a=e[i];if(a!=null&&typeof a!=`function`)if(Array.isArray(a))r[i]=a.map(e=>TR(e));else if(typeof a==`object`)if(a.toJSON){let e=a.toJSON(n?.[i]);r[i]=t?e:JSON.stringify(e)}else r[i]=t?a:JSON.stringify(a);else r[i]=a}return r}function khe(e,t){return e?t&&Lc(e)?t:Fc(e)??rc?.findCredential(e)?.token:null}async function Ahe(e,t,n){return khe(e,t)||(!rc&&nt.request.useIdentity&&await R(()=>import(`./IdentityManager-BfkQwmP4.js`),[]),(await rc.getCredential(e,n))?.token)}async function jhe(e,t,n,r){let i=wR(e),a=t[0].spatialReference,o={...r,responseType:`json`,query:{...i.query,f:`json`,sr:Il(a),target:JSON.stringify({geometryType:hh(t[0]),geometries:t}),cutter:JSON.stringify(n)}},s=await Qc(i.path+`/cut`,o),{cutIndexes:c,geometries:l=[]}=s.data;return{cutIndexes:c,geometries:l.map(e=>{let t=gh(e);return t.spatialReference=a,t})}}function Mhe(e){return{geometryType:hh(e[0]),geometries:e.map(e=>e.toJSON())}}function ER(e,t,n){let r=Kie(t);return e.map(e=>{let t=r.fromJSON(e);return t.spatialReference=n,t})}async function Nhe(e,t,n){let r=typeof e==`string`?Qo(e):e,i=t[0].spatialReference,a=hh(t[0]),o={...n,query:{...r.query,f:`json`,sr:Il(i),geometries:JSON.stringify(Mhe(t))}},{data:s}=await Qc(r.path+`/simplify`,o);return ER(s.geometries,a,i)}var DR=()=>E.getLogger(`esri.geometry.support.normalizeUtils`);function Phe(e){return e.type===`polygon`}function Fhe(e){return e[0].type===`polygon`}function Ihe(e){return e[0].type===`polyline`}function OR(e){let t=[],n=0,r=0;for(let i=0;i<e.length;i++){let a=e[i],o=null;for(let e=0;e<a.length;e++)o=a[e],t.push(o),e===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&t.push([(n+r)/2,0])}return t}function kR(e,t){if(!(e instanceof lh||e instanceof sh)){let e=`straightLineDensify: the input geometry is neither polyline nor polygon`;throw DR().error(e),new D(`internal:geometry`,e)}let n=SR(e),r=[];for(let e of n){let n=[];r.push(n),n.push([e[0][0],e[0][1]]);for(let r=0;r<e.length-1;r++){let i=e[r][0],a=e[r][1],o=e[r+1][0],s=e[r+1][1],c=Math.sqrt((o-i)*(o-i)+(s-a)*(s-a)),l=(s-a)/c,u=(o-i)/c,d=c/t;if(d>1){for(let e=1;e<=d-1;e++){let r=e*t,o=u*r+i,s=l*r+a;n.push([o,s])}let e=(c+Math.floor(d-1)*t)/2,r=u*e+i,o=l*e+a;n.push([r,o])}n.push([o,s])}}return Phe(e)?new sh({rings:r,spatialReference:e.spatialReference}):new lh({paths:r,spatialReference:e.spatialReference})}function AR(e,t,n){if(t){let t=kR(e,1e6);e=ad(t,!0)}return n&&(e=xR(e,n)),e}function jR(e,t,n){if(Array.isArray(e)){let r=e[0];if(r>t){let n=bR(r,t);e[0]=r+n*(-2*t)}else if(r<n){let t=bR(r,n);e[0]=r+t*(-2*n)}}else{let r=e.x;if(r>t){let n=bR(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){let t=bR(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function Lhe(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){let i=t.cutIndexes[r],a=t.geometries[r],o=SR(a);for(let e=0;e<o.length;e++){let t=o[e];t.some(n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){let r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));let r=-360*bR(n,180);for(let n=0;n<t.length;n++){let t=a.getPoint(e,n);a.setPoint(e,n,t.clone().offset(r,0))}return!0}})}if(i===n){if(Fhe(e))for(let t of SR(a))e[i]=e[i].addRing(t);else if(Ihe(e))for(let t of SR(a))e[i]=e[i].addPath(t)}else n=i,e[i]=a}return e}async function MR(e,t,n){if(!Array.isArray(e))return MR([e],t);t&&typeof t!=`string`&&DR().warn(`normalizeCentralMeridian()`,`The url object is deprecated, use the url string instead`);let r=typeof t==`string`?t:t?.url??nt.geometryServiceUrl,i,a,o,s,c,l,u,d,f=0,p=[],m=[];for(let t of e)if(t!=null)if(i||(i=t.spatialReference,a=Fl(i),o=i.isWebMercator,l=o?102100:4326,s=yR[l].maxX,c=yR[l].minX,u=yR[l].plus180Line,d=yR[l].minus180Line),a)if(t.type===`mesh`)m.push(t);else if(t.type===`point`)m.push(jR(t.clone(),s,c));else if(t.type===`multipoint`){let e=t.clone();e.points=e.points.map(e=>jR(e,s,c)),m.push(e)}else if(t.type===`extent`){let e=t.clone()._normalize(!1,!1,a);m.push(e.rings?new sh(e):e)}else if(t.extent){let e=t.extent,n=bR(e.xmin,c)*(2*s),r=n===0?t.clone():xR(t.clone(),n);e.offset(n,0);let{xmin:i,xmax:a}=e;i=Number(i.toFixed(9)),a=Number(a.toFixed(9)),e.intersects(u)&&a!==s?(f=a>f?a:f,r=AR(r,o),p.push(r),m.push(`cut`)):e.intersects(d)&&i!==c?(f=a*(2*s)>f?a*(2*s):f,r=AR(r,o,360),p.push(r),m.push(`cut`)):m.push(r)}else m.push(t.clone());else m.push(t);else m.push(t);let h=bR(f,s),g=-90,_=h,v=new lh;for(;h>0;){let e=360*h-180;v.addPath([[e,g],[e,-1*g]]),g*=-1,h--}if(p.length>0&&_>0){let t=Lhe(p,await jhe(r,p,v,n)),i=[],a=[];for(let n=0;n<m.length;n++){let r=m[n];if(r!==`cut`)a.push(r);else{let r=t.shift(),s=e[n];s!=null&&s.type===`polygon`&&s.rings&&s.rings.length>1&&r.rings.length>=s.rings.length?(i.push(r),a.push(`simplify`)):a.push(o?id(r):r)}}if(!i.length)return a;let s=await Nhe(r,i,n),c=[];for(let e=0;e<a.length;e++){let t=a[e];t===`simplify`?c.push(o?id(s.shift()):s.shift()):c.push(t)}return c}let y=[];for(let e=0;e<m.length;e++){let t=m[e];if(t!==`cut`)y.push(t);else{let e=p.shift();y.push(!0===o?id(e):e)}}return y}function Rhe(e){if(!e)return null;let t=e.extent;if(!t)return null;let n=e.spatialReference&&Fl(e.spatialReference);if(!n)return t;let[r,i]=n.valid,a=2*i,{width:o}=t,s,{xmin:c,xmax:l}=t;if([c,l]=[l,c],e.type===`extent`||o===0||o<=i||o>a||c<r||l>i)return t;switch(e.type){case`polygon`:if(!(e.rings.length>1))return t;s=OR(e.rings);break;case`polyline`:if(!(e.paths.length>1))return t;s=OR(e.paths);break;case`multipoint`:s=e.points}let u=t.clone();for(let e=0;e<s.length;e++){let t=s[e][0];t<0?(t+=i,l=Math.max(t,l)):(t-=i,c=Math.min(t,c))}return u.xmin=c,u.xmax=l,u.width<o?(u.xmin-=i,u.xmax-=i,u):t}function NR(e,t,n){let r=Fl(n);if(r==null)return e;let[i,a]=r.valid,o=2*a,s=0,c=0;t>a?s=Math.ceil(Math.abs(t-a)/o):t<i&&(s=-Math.ceil(Math.abs(t-i)/o)),e>a?c=Math.ceil(Math.abs(e-a)/o):e<i&&(c=-Math.ceil(Math.abs(e-i)/o));let l=e+(s-c)*o,u=l-t;return u>a?l-=o:u<i&&(l+=o),l}function zhe(e,t){return PR(t)?.normalize(e)??e}function PR(e){let t=Fl(e);if(t==null)return null;let[n,r]=t.valid;return new xo(n,r)}var Bhe=PR(H.WGS84);PR(H.WebMercator);var FR=96,IR=39.37,Vhe=180/Math.PI;function LR(e){return e.wkid?e:e.spatialReference||H.WGS84}function RR(e,t){return t.type?lf(e,t.x,t.y):cf(e,t)}function zR(e){return Ou(e)}function BR(e,t,n=0){let r=e.width,i=e.height;if(n!==0){let t=Qa(n),a=Math.abs(Math.cos(t)),o=Math.abs(Math.sin(t));r=e.width*a+e.height*o,i=e.width*o+e.height*a}let a=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(r/a,i/o)*Jhe(e.spatialReference)}async function VR(e,t,n,r){let i,a;if(!e||Array.isArray(e)&&!e.length)return null;if(W.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]==`object`){let i=e.every(e=>`attributes`in e),a=e.some(e=>!e.geometry),o=e;if(i&&a&&t&&t.allLayerViews){let n=new Map;for(let t of e){let e=t.layer,r=n.get(e)||[],i=t.attributes[e.objectIdField];i!=null&&r.push(i),n.set(e,r)}let r=[];n.forEach((e,n)=>{let i=t.allLayerViews?.find(e=>e.layer.id===n.id);if(i&&`queryFeatures`in i){let t=n.createQuery();t.objectIds=e,t.returnGeometry=!0,r.push(i.queryFeatures(t))}});let i=await Promise.all(r),a=[];for(let e of i)if(e&&e.features&&e.features.length)for(let t of e.features)t.geometry!=null&&a.push(t.geometry);o=a}for(let e of o)r=await VR(e,t,n,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]==`number`&&typeof e[1]==`number`)i=new U(e);else if(e instanceof Wu)i=e;else if(`geometry`in e){if(e.geometry)i=e.geometry;else if(e.layer){let n=e.layer,r=t.allLayerViews?.find(e=>e.layer.id===n.id);if(r&&`queryFeatures`in r){let t=n.createQuery();t.objectIds=[e.attributes[n.objectIdField]],t.returnGeometry=!0,i=(await r.queryFeatures(t))?.features?.[0]?.geometry}}}if(i==null)return null;switch(i.type){case`point`:a=new Rd({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case`extent`:case`multipoint`:case`polygon`:case`polyline`:a=Rhe(i);break;default:a=i.extent}if(!a)return null;jS()||zS(a.spatialReference,n)||await PS();let o=FS(a,n);if(!o)return null;if(r){let e=o.center,t=e.clone();t.x=NR(e.x,r.center.x,n),t.x!==e.x&&o.centerAt(t),r=r.union(o)}else r=o;return r}function Hhe(e){if(e&&(!Array.isArray(e)||typeof e[0]!=`number`)&&(typeof e==`object`||Array.isArray(e)&&typeof e[0]==`object`)){if(`layer`in e&&e.layer?.minScale!=null&&e.layer.maxScale!=null){let t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(e=>`layer`in e)){let t=0,n=0;for(let r of e){let e=r.layer;e?.minScale&&e.maxScale&&(t=e.minScale<t?e.minScale:t,n=e.maxScale>n?e.maxScale:n)}return t&&n?{min:t,max:n}:null}}}function HR(e,t){let n=LR(e);return Pl(n,t)||n.imageCoordinateSystem||t.imageCoordinateSystem?e:FS(e,t)}async function Uhe(e,t){if(!e||!t)return new Sh({targetGeometry:new U,scale:0,rotation:0});let n=t.spatialReference,{constraints:r,padding:i,viewpoint:a,size:o}=t,s=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]],c=null;e instanceof Sh?c=e:e.viewpoint?c=e.viewpoint:e.target&&e.target.declaredClass===`esri.Viewpoint`&&(c=e.target);let l=null;c?.targetGeometry?l=c.targetGeometry:e instanceof Rd?l=e:e instanceof Wu?l=await VR(e,t,n):e&&(l=await VR(e.center,t,n)||await VR(e.target,t,n)||await VR(e,t,n)),!l&&a?.targetGeometry?l=a.targetGeometry:!l&&t.extent&&(l=t.extent),n||=LR(t.spatialReference||t.extent||l),jS()||Pl(l.spatialReference,n)||zS(l.spatialReference,n)||await PS();let u=HR(l,n),d=`center`in u?u.center:u;!1!==t.pickClosestTarget&&d.type===`point`&&a.targetGeometry?.type===`point`&&(d.x=NR(d.x,a.targetGeometry.x,d.spatialReference));let f=0;c?f=c.rotation:e.hasOwnProperty(`rotation`)?f=e.rotation:a&&(f=a.rotation);let p=0;p=c?.targetGeometry!=null&&c.targetGeometry.type===`point`?c.scale:`scale`in e&&e.scale?e.scale:`zoom`in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(l)||l.type===`point`||l.type===`extent`&&l.width===0&&l.height===0?a.scale:BR(HR(l.extent,n),s,f);let m=Hhe(e.target??e);m&&(m.min&&m.min<p?p=m.min:m.max&&m.max>p&&(p=m.max));let h=new Sh({targetGeometry:d,scale:p,rotation:f});return r&&(h=r.fit(h),r.constrainByGeometry(h),r.rotationEnabled||(h.rotation=a.rotation)),h}function UR(e,t){let n=e.targetGeometry,r=t.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function WR(e,t,n){return n?lf(e,.5*(t[0]-n.right+n.left),.5*(t[1]-n.bottom+n.top)):gf(e,t,.5)}var Whe=function(){let e=JL();return function(t,n,r){let i=n.targetGeometry;RR(e,i);let a=.5*KR(n);return t.xmin=e[0]-a*r[0],t.ymin=e[1]-a*r[1],t.xmax=e[0]+a*r[0],t.ymax=e[1]+a*r[1],t.spatialReference=i.spatialReference,t}}();function Ghe(e,t,n,r,i){return $R(e,t,n.center),e.scale=BR(n,r),i?.constraints?.constrain(e),e}function Khe(e,t,n,r){return XR(e,t,n,r),cR(e,e)}var GR=function(){let e=JL();return function(t,n,r){return Lf(t,Yhe(t,n),WR(e,n,r))}}(),qhe=function(){let e=_R(),t=JL();return function(n,r,i,a){let o=KR(r),s=JR(r);return lf(t,o,o),mR(e,t),uR(e,e,s),fR(e,e,GR(t,i,a)),fR(e,e,[0,a.top-a.bottom]),lf(n,e[4],e[5])}}();function KR(e){return e.scale*qR(e.targetGeometry?.spatialReference)}function qR(e){return Jl(e)?1/(zR(e)*IR*FR):1}function JR(e){return af(e.rotation)||0}function Jhe(e){return Jl(e)?zR(e)*IR*FR:1}function Yhe(e,t){return gf(e,t,.5)}var YR=function(){let e=JL(),t=JL(),n=JL();return function(r,i,a,o,s,c){return Sf(e,i),gf(t,a,.5*c),lf(n,1/o*c,-1/o*c),hR(r,t),s&&uR(r,r,s),dR(r,r,n),fR(r,r,e),r}}(),XR=function(){let e=JL();return function(t,n,r,i){let a=KR(n),o=JR(n);return RR(e,n.targetGeometry),YR(t,e,r,a,o,i)}}(),Xhe=function(){let e=JL();return function(t,n,r,i){let a=KR(n);return RR(e,n.targetGeometry),YR(t,e,r,a,0,i)}}();function ZR(e){let t=Fl(e);return t?t.valid[1]-t.valid[0]:0}function Zhe(e,t){return Math.round(ZR(e)/t)}var QR=function(){let e=JL(),t=JL(),n=[0,0,0];return function(r,i,a){df(e,r,i),Cf(e,e),df(t,r,a),Cf(t,t),Tf(n,e,t);let o=Math.acos(wf(e,t)/(bf(e)*bf(t)))*Vhe;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Qhe=function(){let e=JL();return function(t,n,r,i){let a=t.targetGeometry;return UR(t,n),qhe(e,n,r,i),a.x+=e[0],a.y+=e[1],t}}(),$R=function(e,t,n){UR(e,t);let r=e.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,e},$he=function(){let e=JL();return function(t,n,r,i,a){a||=`center`,Lf(e,r,i),gf(e,e,.5);let o=e[0],s=e[1];switch(a){case`center`:lf(e,0,0);break;case`left`:lf(e,-o,0);break;case`top`:lf(e,0,s);break;case`right`:lf(e,o,0);break;case`bottom`:lf(e,0,-s);break;case`top-left`:lf(e,-o,s);break;case`bottom-left`:lf(e,-o,-s);break;case`top-right`:lf(e,o,s);break;case`bottom-right`:lf(e,o,-s)}return iz(t,n,e),t}}();function ege(e,t,n){return UR(e,t),e.rotation+=n,e}function tge(e,t,n){return UR(e,t),e.rotation=n,e}var nge=function(){let e=JL();return function(t,n,r,i,a){return UR(t,n),isNaN(r)||r===0||(nz(e,i,n,a),t.scale=n.scale*r,rz(e,e,t,a),iz(t,t,lf(e,e[0]-i[0],i[1]-e[1]))),t}}();function ez(e,t,n){return UR(e,t),e.scale=n,e}var tz=function(){let e=JL();return function(t,n,r,i,a,o){return UR(t,n),isNaN(r)||r===0||(nz(e,a,n,o),t.scale=n.scale*r,t.rotation+=i,rz(e,e,t,o),iz(t,t,lf(e,e[0]-a[0],a[1]-e[1]))),t}}(),rge=function(){let e=JL(),t=JL();return function(n,r,i,a,o,s,c){return GR(t,s,c),uf(e,o,t),a?tz(n,r,i,a,e,s):nge(n,r,i,e,s)}}(),nz=function(){let e=_R();return function(t,n,r,i){return Of(t,n,Khe(e,r,i,1))}}(),rz=function(){let e=_R();return function(t,n,r,i){return Of(t,n,XR(e,r,i,1))}}(),iz=function(){let e=JL(),t=_R();return function(n,r,i){UR(n,r);let a=KR(r),o=n.targetGeometry;return pR(t,JR(r)),dR(t,t,XL(a,a)),Of(e,i,t),o.x+=e[0],o.y+=e[1],n}}();function az(){let e=new Float32Array(6);return e[0]=1,e[3]=1,e}function ige(e){let t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function age(e,t,n,r,i,a){let o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o}function oz(e,t,n,r){let i=t[r],a=t[r+1];e[r]=n[0]*i+n[2]*a+n[4],e[r+1]=n[1]*i+n[3]*a+n[5]}function sz(e,t,n,r=0,i=0,a=2){let o=i||t.length/a;for(let i=r;i<o;i++)oz(e,t,n,i*a)}Object.freeze(Object.defineProperty({__proto__:null,clone:ige,create:az,fromValues:age,transform:oz,transformMany:sz},Symbol.toStringTag,{value:`Module`}));function cz(){let e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function lz(e){let t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function oge(e,t,n,r,i,a,o,s,c){let l=new Float32Array(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=c,l}Object.freeze(Object.defineProperty({__proto__:null,clone:lz,create:cz,fromValues:oge},Symbol.toStringTag,{value:`Module`}));function uz(){return new Float32Array(2)}function sge(e){let t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function dz(e,t){let n=new Float32Array(2);return n[0]=e,n[1]=t,n}function fz(){return uz()}function pz(){return dz(1,1)}function mz(){return dz(1,0)}function hz(){return dz(0,1)}var gz=fz(),_z=pz(),cge=mz(),lge=hz();Object.freeze(Object.defineProperty({__proto__:null,ONES:_z,UNIT_X:cge,UNIT_Y:lge,ZEROS:gz,clone:sge,create:uz,fromValues:dz,ones:pz,unitX:mz,unitY:hz,zeros:fz},Symbol.toStringTag,{value:`Module`}));function uge(e){return e instanceof Float32Array&&e.length>=2}function dge(e){return Array.isArray(e)&&e.length>=2}function vz(e){return uge(e)||dge(e)}var yz,bz=[0,0],xz=yz=class extends L{constructor(e){super(e),this._viewpoint2D={center:JL(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Rd,this.id=0,this.inverseTransform=_R(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=_R(),this.transformNoRotation=_R(),this.displayMat3=cz(),this.displayViewMat3=cz(),this.viewMat3=cz(),this.viewMat2d=az(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set(`pixelRatio`,e),this._update()}set size(e){this._set(`size`,e),this._update()}set viewpoint(e){if(e){let t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}get visibleArea(){let[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){let t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=UR(n,e.viewpoint),this._set(`size`,cf(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set(`size`,[e.size[0],e.size[1]])),this._set(`pixelRatio`,e.pixelRatio),this}clone(){return new yz({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,n){return vz(t)?Of(e,t,this.inverseTransform):(bz[0]=t,bz[1]=n,Of(e,bz,this.inverseTransform))}toScreen(e,t,n){return vz(t)?Of(e,t,this.transform):(bz[0]=t,bz[1]=n,Of(e,bz,this.transform))}toScreenNoRotation(e,t,n){return vz(t)?Of(e,t,this.transformNoRotation):(bz[0]=t,bz[1]=n,Of(e,bz,this.transformNoRotation))}wrapMapCoordinate(e,t){cf(e,t);let[n]=t,[r]=this.center,{extent:i,spatialReference:a}=this,{xmin:o,xmax:s}=i;if(a.isWrappable){let e=ZR(a)/2;o=Math.max(o,r-e),s=Math.min(s,r+e)}return(n<o||n>s)&&(e[0]=NR(n,r,a)),e}getScreenTransform(e,t){let{center:n}=this._viewpoint2D,r=this._get(`pixelRatio`)||1,i=this._get(`size`);return YR(e,n,i,t,0,r),e}_update(){let{center:e,spatialReference:t,scale:n,rotation:r}=this._viewpoint2D,i=this._get(`pixelRatio`)||1,a=this._get(`size`),o=new Sh({targetGeometry:new U(e[0],e[1],t),scale:n,rotation:r});if(this._set(`viewpoint`,o),!a||!t||!n)return;this.resolution=KR(o),this.rotation=r,this.scale=n,this.spatialReference=t,cf(this.center,e);let s=a[0]===0?0:2/a[0],c=a[1]===0?0:-2/a[1];xp(this.displayMat3,s,0,0,0,c,0,-1,1,1);let l=Sp(this.viewMat3),u=dz(a[0]/2,a[1]/2),d=dz(-a[0]/2,-a[1]/2),f=af(r);Op(l,l,u),kp(l,l,f),Op(l,l,d),Dp(this.displayViewMat3,this.displayMat3,l);let p=hR(this.viewMat2d,u);return uR(p,p,f),fR(p,p,d),Whe(this.extent,o,a),XR(this.transform,o,a,i),cR(this.inverseTransform,this.transform),Xhe(this.transformNoRotation,o,a,i),this.worldScreenWidth=Zhe(this.spatialReference,this.resolution),this._set(`id`,this.id+1),this.notifyChange(`visibleArea`),this}};e([N({readOnly:!0})],xz.prototype,`id`,void 0),e([N({value:1,json:{write:!0}})],xz.prototype,`pixelRatio`,null),e([N({json:{write:!0}})],xz.prototype,`size`,null),e([N()],xz.prototype,`spatialReference`,void 0),e([N({type:Sh,json:{write:!0}})],xz.prototype,`viewpoint`,null),e([N({readOnly:!0})],xz.prototype,`visibleArea`,null),xz=yz=e([P(`esri.views.2d.ViewState`)],xz);var Sz=xz,Cz,wz,Tz=Cz=class extends F{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Cz({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};e([N()],Tz.prototype,`left`,void 0),e([N()],Tz.prototype,`top`,void 0),e([N()],Tz.prototype,`right`,void 0),e([N()],Tz.prototype,`bottom`,void 0),Tz=Cz=e([P(`esri.views.2d.PaddedViewState.Padding`)],Tz);var Ez=wz=class extends Sz{constructor(...e){super(...e),this.paddedViewState=new Sz,this._updateContent=(()=>{let e=JL();return()=>{let t=this._get(`size`),n=this._get(`padding`);if(!t||!n)return;let r=this.paddedViewState;lf(e,n.left+n.right,n.top+n.bottom),df(e,t,e),cf(r.size,e);let i=r.viewpoint;i&&(this.viewpoint=i)}})(),this.addHandles(G(()=>[this.size,this.padding],()=>this._updateContent(),Kh)),this.padding=new Tz,this.size=[0,0]}get padding(){return this._get(`padding`)}set padding(e){this._set(`padding`,e||new Tz)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e,n=this._get(`padding`);n&&(t=Qhe(e.clone(),e,this._get(`size`),n));let{targetGeometry:r,rotation:i,scale:a}=t,{x:o,y:s,spatialReference:c}=r,l=this._viewpoint2D;l.center[0]=o,l.center[1]=s,l.rotation=i,l.scale=a,l.spatialReference=c,this._update()}}clone(){return new wz({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};e([N()],Ez.prototype,`paddedViewState`,void 0),e([N({type:Tz})],Ez.prototype,`padding`,null),e([N()],Ez.prototype,`viewpoint`,null),Ez=wz=e([P(`esri.views.2d.PaddedViewState`)],Ez);var Dz=Ez,Oz=class extends F{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};e([N()],Oz.prototype,`SCHEDULER_LOG_SLOW_TASKS`,void 0),e([N()],Oz.prototype,`FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES`,void 0),Oz=e([P(`esri.views.support.debugFlags`)],Oz);var kz=new Oz,Az=Symbol(`Yield`),jz=class{constructor(){this._tasks=[],this._numPendingTasks=rT(0),this._readyToRun=rT(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return Az;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,n){return this._addTask((r,i)=>new Fz(r,i,e,t,n),Array.prototype.push)}unshift(e,t,n){return this._addTask((r,i)=>new Fz(r,i,e,t,n),Array.prototype.unshift)}pushGenerator(e,t,n){return this._addTask((r,i)=>new fge(r,i,e,t,n),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;let t=this._tasks.shift();this._updateReadyToRun();try{if(Ti(t.signal))this._cancelTask(t,Si());else switch(t.type){case 0:this._processSimple(t,e);break;case 1:this._processGenerator(t,e);break;case 2:this._processIterator(t,e);break;default:}}catch(e){t.reject(e)}return!0}cancelAll(){let e=Si();for(let t of this._tasks)this._cancelTask(t,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,t){if(e.abortCallback){let n=e.abortCallback(t);e.type===2&&e.iterator.return&&Mz(e.iterator.return()),Ii(n)?n.then(e.resolve,e.reject):e.resolve(n)}else e.type===2&&e.iterator.throw&&Mz(e.iterator.throw(t)),e.reject(t)}_onIteratorResult(e,t){t.done?e.resolve(t.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,t){let n=e.callback(t);Ii(n)?n.then(e.resolve,e.reject):e.resolve(n)}_processGenerator(e,t){let n=e.generatorFunction(t),r=new pge(e.resolve,e.reject,n,e.signal,e.abortCallback);this._processIterator(r,t)}_processIterator(e,t){let n=e.iterator.next(t);Ii(n)?n.then(t=>this._onIteratorResult(e,t),e.reject):this._onIteratorResult(e,n)}_addTask(e,t){return new Promise((n,r)=>{let i=e(n,r);t.call(this._tasks,i),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function Mz(e){Ii(e)?e.then(Nz,Nz):Nz(e)}function Nz(e){ji(e)||e instanceof Error||e instanceof D||typeof e==`object`&&e&&`done`in e&&e.done||E.getLogger(`esri.layers.support.PromiseQueue`).warn(`Generator iterator was aborted, but it is not done.`)}var Pz=class{constructor(e,t,n,r){this.resolve=e,this.reject=t,this.signal=n,this.abortCallback=r}},Fz=class extends Pz{constructor(e,t,n,r,i){super(e,t,r,i),this.callback=n,this.type=0}},fge=class extends Pz{constructor(e,t,n,r,i){super(e,t,r,i),this.generatorFunction=n,this.type=1}},pge=class extends Pz{constructor(e,t,n,r,i){super(e,t,r,i),this.iterator=n,this.type=2}};function mge(){return new yge}var Iz={RESOURCE_CONTROLLER_IMMEDIATE:`immediate`,RESOURCE_CONTROLLER:`schedule`,SLIDE:`slide`,STREAM_DATA_LOADER:`stream loader`,ELEVATION_QUERY:`elevation query`,TERRAIN_SURFACE:`terrain`,SURFACE_GEOMETRY_UPDATES:`surface geometry updates`,LOD_RENDERER:`LoD renderer`,GRAPHICS_CORE:`Graphics3D`,I3S_CONTROLLER:`I3S`,POINT_CLOUD_LAYER:`point cloud`,FEATURE_TILE_FETCHER:`feature fetcher`,STREAM_CONTROLLER:`stream controller`,OVERLAY:`overlay`,OVERLAY_RENDERER:`overlay renderer`,STAGE:`stage`,GRAPHICS_DECONFLICTOR:`graphics deconflictor`,FILTER_VISIBILITY:`graphics filter visibility`,SCALE_VISIBILITY:`graphics scale visibility`,FRUSTUM_VISIBILITY:`graphics frustum visibility`,POINT_OF_INTEREST_FREQUENT:`POI frequent`,POINT_OF_INTEREST_INFREQUENT:`POI infrequent`,LABELER:`labeler`,FEATURE_QUERY_ENGINE:`feature query`,FEATURE_TILE_TREE:`feature tile tree`,FEATURE_TILE_TREE_ACTIVE:`fast feature tile tree`,ELEVATION_ALIGNMENT:`elevation alignment`,ELEVATION_ALIGNMENT_SCENE:`elevation alignment scene`,TEXT_TEXTURE_ATLAS:`text texture atlas`,TEXTURE_UNLOAD:`texture unload`,LINE_OF_SIGHT_TOOL:`line of sight tool`,LINE_OF_SIGHT_TOOL_INTERACTIVE:`interactive line of sight tool`,ELEVATION_PROFILE:`elevation profile`,SNAPPING:`snapping`,SHADOW_ACCUMULATOR:`shadow accumulator`,CLOUDS_GENERATOR:`clouds generator`,FLOW_GENERATOR:`flow generator`,MAPVIEW_FETCH_QUEUE:`mapview fetch queue`,MAPVIEW_LAYERVIEW_UPDATE:`mapview layerview update`,MAPVIEW_VECTOR_TILE_PARSING_QUEUE:`mapview vector tile parsing queue`,NONE:0,TEST_PRIO:1},Lz=0,Rz=new Map([[Iz.RESOURCE_CONTROLLER_IMMEDIATE,Lz],[Iz.RESOURCE_CONTROLLER,4],[Iz.SLIDE,Lz],[Iz.STREAM_DATA_LOADER,Lz],[Iz.ELEVATION_QUERY,Lz],[Iz.TERRAIN_SURFACE,1],[Iz.SURFACE_GEOMETRY_UPDATES,1],[Iz.LOD_RENDERER,2],[Iz.GRAPHICS_CORE,2],[Iz.I3S_CONTROLLER,2],[Iz.POINT_CLOUD_LAYER,2],[Iz.FEATURE_TILE_FETCHER,2],[Iz.STREAM_CONTROLLER,2],[Iz.CLOUDS_GENERATOR,2],[Iz.OVERLAY,4],[Iz.OVERLAY_RENDERER,4],[Iz.STAGE,4],[Iz.GRAPHICS_DECONFLICTOR,4],[Iz.FILTER_VISIBILITY,4],[Iz.SCALE_VISIBILITY,4],[Iz.FRUSTUM_VISIBILITY,4],[Iz.POINT_OF_INTEREST_FREQUENT,6],[Iz.POINT_OF_INTEREST_INFREQUENT,30],[Iz.LABELER,8],[Iz.FEATURE_QUERY_ENGINE,8],[Iz.FEATURE_TILE_TREE,16],[Iz.FEATURE_TILE_TREE_ACTIVE,Lz],[Iz.ELEVATION_ALIGNMENT,12],[Iz.ELEVATION_ALIGNMENT_SCENE,14],[Iz.TEXT_TEXTURE_ATLAS,12],[Iz.TEXTURE_UNLOAD,12],[Iz.LINE_OF_SIGHT_TOOL,16],[Iz.LINE_OF_SIGHT_TOOL_INTERACTIVE,Lz],[Iz.SNAPPING,Lz],[Iz.SHADOW_ACCUMULATOR,30],[Iz.FLOW_GENERATOR,12],[Iz.MAPVIEW_FETCH_QUEUE,Lz],[Iz.MAPVIEW_LAYERVIEW_UPDATE,2],[Iz.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Lz]]);function zz(e){return Rz.has(e)?Rz.get(e):typeof e==`number`?e:1}var hge=Vi(6.5),Bz=Vi(1),gge=Vi(30),_ge=Vi(1e3/30),vge=Vi(100),Vz=.9,yge=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=rT(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new fi(`total`),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new Hz,this.state=1,this._tasks=[],this._runQueue=[],this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=G(()=>kz.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,qh);for(let e of Object.keys(Iz))this.performanceInfo.tasks.set(Iz[e],new fi(String(Iz[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,Br(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,t){let n=new bge(this,e,t);return this._tasks.push(n),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new fi(e)),n}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){let e=this._budget.now();this._runFrame();let t=this._budget.now();this._recordFrameTaskTimes(t-e);let n=this.state===2?`Idle`:this.state===1?`Interacting`:`Animating`;return di(`${n} Frame Tasks`,e,t,`Maps SDK`,`Scheduling`),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let t=hge,n=e.frameDuration,r=Bz;switch(this.state){case 2:t=Vi(0),n=Vi(Math.max(vge,e.frameDuration)),r=gge;break;case 1:n=Vi(Math.max(_ge,e.frameDuration))}return n=Vi(n-e.elapsedFrameTime-t),this.state!==2&&n<Bz&&!this._forceTask?(this._forceTask=!0,!1):(n=Vi(Math.max(n,r)),this._budget.reset(n),this._updateLoad(),this._schedule())}_runFrame(){this._forceTask=!1,this._microTaskQueued=!1,this._run(),this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(Vi(0)),this._budget.madeProgress()}removeTask(e){se(this._tasks,e),se(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(t=>{t.name===e&&t.setPriority(e)})}_getState(e){if(this._runQueue.some(t=>t.name===e))return`s`;let t=`i`;return this._tasks.forEach(n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=`r`:t!==`r`&&(t=`w`))}),t}_getRuntime(e){let t=0;return this._tasks.forEach(n=>{n.name===e&&(t+=n.runtime)}),t}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){let e=new Map;if(this._tasks.forEach(t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)}),e.size===0)return null;let t=``;return e.forEach((e,n)=>{t+=e>1?` ${e}x ${n}`:` ${n}`}),t}_updateLoad(){let e=this._tasks.reduce((e,t)=>t.needsUpdate?++e:e,0);this._load=this._load*Vz+e*(1-Vz)}_schedule(){for(ue(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Lz&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,t=0;if(this._tasks.forEach(n=>{n.needsUpdate&&n.schedulePriority!==0&&n.basePriority!==Lz&&n.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,n.basePriority),n.schedulePriority===1?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){let e=this._budget.now(),t=this._runQueue.pop();this._budget.resetProgress();try{t.task.runTask(this._budget)===Az&&(t.blockFrame=this._frameNumber)}catch(e){E.getLogger(`esri.views.support.Scheduler`).error(`Exception in task "${t.name}"`,e),t.blockFrame=this._frameNumber}!this._budget.hasProgressed&&t.blockFrame!==this._frameNumber&&t.needsUpdate&&(t.name,Iz.I3S_CONTROLLER,t.blockFrame=this._frameNumber),t.schedulePriority=t.basePriority;let n=this._budget.now(),r=n-e;if(di(`${t.name}`,e,n,`Maps SDK`,`Scheduling`),t.runtime+=r,this._frameTaskTimes.set(t.priority,this._frameTaskTimes.get(t.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(let e of Object.keys(Iz))this._frameTaskTimes.set(Iz[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((e,t)=>this.performanceInfo.tasks.get(t).push(e)),this.performanceInfo.total.push(e)}get test(){return this._test}},bge=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,t,n){this._scheduler=e,this.name=t,this.blockFrame=0,this.runtime=0,this._queue=new jz,this._handles=new Pr,this._basePriority=zz(t),this.schedulePriority=this._basePriority,this._task=rT(n??this._queue),this._handles.add(Bh(()=>this.task.readyToRun,t=>e.taskRunningChanged(t)))}remove(){this.processQueue(Uz),this._scheduler.removeTask(this),this.schedule=Wz.schedule,this.reschedule=Wz.reschedule,this.scheduleGenerator=Wz.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;let t=zz(e);this._basePriority!==Lz&&this.schedulePriority===0||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,t,n){return this._queue.push(e,t,n)}reschedule(e,t,n){return this._queue.unshift(e,t,n)}scheduleGenerator(e,t,n){return this._queue.pushGenerator(e,t,n)}processQueue(e){return this._queue.runTask(e)}},Hz=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}},Uz=new Hz;Uz.enabled=!1;var Wz=new class{remove(){}processQueue(){}schedule(e,t,n){try{if(Ti(t)){let e=(Si());return n?Promise.resolve(n(e)):Promise.reject(e)}return Li(e(Uz))}catch(e){return Promise.reject(e)}}reschedule(e,t,n){return this.schedule(e,t,n)}async scheduleGenerator(e,t,n){if(Ti(t)){let e=(Si());if(n)return n(e);throw e}let r=(e(Uz));for(;;){let e=(r.next(Uz)),i=Ii(e)?await e:e;if(Ti(t)){let e=(Si());if(n){let t=(n(e)),i=(r.return(null));return Ii(i)&&await Mi(i),t}let t=(r.throw(e));throw Ii(t)&&await Mi(t),e}if(i.done)return i.value}}},xge=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=mge(),this._schedulerHandle=Bh(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Ii(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=e=>{if(this._updateRequested=!1,this.view?.destroyed)return;let{allLayerViews:t,graphicsView:n,labelManager:r,state:{id:i}}=this.view;t?.forEach(this._updateLayerView,this),r!=null&&(r.lastUpdateId!==i&&(r.viewChange(),r.lastUpdateId=i),r.updateRequested&&r.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==i&&(n.viewChange(),n.lastUpdateId=i),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(e)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;let e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new Dz,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=G(()=>e.stationary,e=>{this.stationary=e,this.requestFrame()}),this._frameTaskHandle=$i(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();let t=this.view.state,n=e.lastUpdateId;n!=null&&(this.stationary||e.moving)||(e.moving=!0),n!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),`layerViews`in e&&e.layerViews?.forEach(this._updateLayerView,this)}},Sge=0,Gz=t=>{let n=t,r=class extends n{constructor(...e){super(...e),Object.defineProperty(this,`uid`,{writable:!1,configurable:!1,value:Sge++})}};return r=e([hr(`esri.core.NumericIdentifiable`)],r),r};function Cge(e,t){let{spatialReference:n}=t,r=[t.x,t.y],i,a,o,s,c=[0,0],l=wge(e);for(let e=0;e<l.length;e++){let t=l[e];for(let n=0;n<t.length-1;n++){Sie(c,r,t,n);let l=vf(r,c);(i==null||l<i)&&(i=l,a=[...c],o=e,s=n)}}if(i==null||!a||o==null||s==null)throw new D(`nearest-coordinate:failed`,`Failed to find the nearest coordinate`);let[u,d]=a;return{coordinate:new U({x:u,y:d,spatialReference:n}),distance:i}}function wge(e){switch(e.type){case`extent`:return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case`polygon`:return e.rings;case`polyline`:return e.paths}}var Kz,qz=Kz=class extends Gz(F){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return FS(this.geometry,this.spatialReference)}catch(e){return E.getLogger(this).error(`#constraints.geometry`,`could not project the geometry to the view's spatial reference`,{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;let n=e.targetGeometry;if(this.normalizedGeometry.type===`extent`?md(this.normalizedGeometry,n):_d(this.normalizedGeometry,n))return e;let{coordinate:r}=Cge(this.normalizedGeometry,n);return r&&(e.targetGeometry=r),e}clone(){return new Kz({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};e([N({constructOnly:!0})],qz.prototype,`geometry`,void 0),e([N({readOnly:!0})],qz.prototype,`normalizedGeometry`,null),e([N({constructOnly:!0})],qz.prototype,`spatialReference`,void 0),qz=Kz=e([P(`esri.views.2d.constraints.GeometryConstraint`)],qz);var Jz,Yz=Jz=class extends Gz(F){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Jz({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};e([N()],Yz.prototype,`enabled`,void 0),e([N()],Yz.prototype,`rotationEnabled`,void 0),Yz=Jz=e([P(`esri.views.2d.constraints.RotationConstraint`)],Yz);var Xz=Yz,Zz,Qz=Zz=class extends Gz(F){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:n,maxScale:r,minZoom:i,maxZoom:a}=this,o=-1,s=-1,c=!1,l=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!t?.length)return this._set(`effectiveMinScale`,n),void this._set(`effectiveMaxScale`,r);t=t.map(e=>e.clone()),t.sort((e,t)=>t.scale-e.scale),t.forEach((e,t)=>e.level=t);for(let i of t)!c&&n>0&&n>=i.scale&&(o=i.level,c=!0),!l&&r>0&&r>=i.scale&&(s=e?e.level:-1,l=!0),e=i;i===-1&&(i=n===0?0:o),a===-1&&(a=r===0?t.length-1:s),i=Math.max(i,0),i=Math.min(i,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),i>a&&([i,a]=[a,i]),n=t[i].scale,r=t[a].scale,t.splice(0,i),t.splice(a-i+1),t.forEach((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale}),this._set(`effectiveLODs`,t),this._set(`effectiveMinZoom`,i),this._set(`effectiveMaxZoom`,a),this._set(`effectiveMinScale`,n),this._set(`effectiveMaxScale`,r)}constrain(e,t){if(t&&e.scale===t.scale)return e;let n=this.effectiveMinScale,r=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,o=r!==0&&e.scale<r,s=n!==0&&e.scale>n;if(o||s){let o=s?n:r;if(t&&a){let n=(o-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*n,i.y=a.y+(i.y-a.y)*n}e.scale=o}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);let t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);let t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];let n=Math.floor(e),r=Math.ceil(e);return t[n]+(e-n)*(t[r]-t[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;let t=this._scales,n,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(n=t[i],r=t[i+1],r===e)return i+this.effectiveMinZoom+1;if(n>e&&r<e)return i+this.effectiveMinZoom+1-(e-r)/(n-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;let t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}clone(){return new Zz({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,n)=>Math.abs(n-e)<=Math.abs(t-e)?n:t,this._scales[0])),this._lodByScale[e].scale}};e([N({readOnly:!0})],Qz.prototype,`effectiveLODs`,void 0),e([N({readOnly:!0})],Qz.prototype,`effectiveMinZoom`,void 0),e([N({readOnly:!0})],Qz.prototype,`effectiveMaxZoom`,void 0),e([N({readOnly:!0})],Qz.prototype,`effectiveMinScale`,void 0),e([N({readOnly:!0})],Qz.prototype,`effectiveMaxScale`,void 0),e([N()],Qz.prototype,`lods`,void 0),e([N()],Qz.prototype,`minZoom`,void 0),e([N()],Qz.prototype,`maxZoom`,void 0),e([N()],Qz.prototype,`minScale`,void 0),e([N()],Qz.prototype,`maxScale`,void 0),e([N()],Qz.prototype,`snapToZoom`,void 0),Qz=Zz=e([P(`esri.views.2d.constraints.ZoomConstraint`)],Qz);var $z=Qz,Tge={base:null,key:`type`,typeMap:{extent:Rd,polygon:sh}},eB=class extends F{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new W}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set(`geometry`,e):this._set(`geometry`,null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){let e=this._get(`_geometry`);return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new qz({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Xz({rotationEnabled:this.rotationEnabled})}get _zoom(){let e=this._get(`_zoom`),t=this.lods||this.view?.constraintsInfo.lods,n=this.minZoom,r=this.maxZoom,i=this.minScale,a=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===n&&e.maxZoom===r&&e.minScale===i&&e.maxScale===a&&e.snapToZoom===o?e:new $z({lods:t,minZoom:n,maxZoom:r,minScale:i,maxScale:a,snapToZoom:o})}canZoomInTo(e){let t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){let t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(n=>n.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};e([N({readOnly:!0})],eB.prototype,`effectiveLODs`,null),e([N({readOnly:!0})],eB.prototype,`effectiveMinScale`,null),e([N({readOnly:!0})],eB.prototype,`effectiveMaxScale`,null),e([N({readOnly:!0})],eB.prototype,`effectiveMinZoom`,null),e([N({readOnly:!0})],eB.prototype,`effectiveMaxZoom`,null),e([N({types:Tge,value:null})],eB.prototype,`geometry`,null),e([N({type:[ZS]})],eB.prototype,`lods`,void 0),e([N()],eB.prototype,`minScale`,void 0),e([N()],eB.prototype,`maxScale`,void 0),e([N()],eB.prototype,`minZoom`,void 0),e([N()],eB.prototype,`maxZoom`,void 0),e([N()],eB.prototype,`rotationEnabled`,void 0),e([N()],eB.prototype,`snapToZoom`,void 0),e([N({type:W})],eB.prototype,`customConstraints`,void 0),e([N()],eB.prototype,`view`,void 0),e([N({readOnly:!0})],eB.prototype,`version`,null),e([N({type:qz,readOnly:!0})],eB.prototype,`_geometry`,null),e([N({type:Xz})],eB.prototype,`_rotation`,null),e([N({readOnly:!0,type:$z})],eB.prototype,`_zoom`,null),eB=e([P(`esri.views.2d.MapViewConstraints`)],eB);var tB=eB,nB=class extends F{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign=`center`,this.addHandles([G(()=>this.constraints?.version,e=>{this.constraints&&e&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Kh)])}get center(){if(!this.ready)return this._get(`center`);let{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty(`id`),new U({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set(`center`,e);let t;try{t=this._project(e,this.state.spatialReference)}catch(t){E.getLogger(this).error(new D(`mapview:invalid-center`,`could not project the value in the view's spatial reference`,{input:e,error:t}));return}let n=this.viewpoint;$R(n,n,t),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty(`id`),this.state.paddedViewState.extent.clone()):this._get(`extent`)}set extent(e){if(e==null)return;let t=e;if(!t.width||!t.height)return void E.getLogger(this).error(new D(`mapview:invalid-extent`,`invalid extent size`));if(!this.ready)return this._set(`extent`,t),this._set(`center`,void 0),this._set(`viewpoint`,void 0),this._set(`scale`,void 0),void this._set(`zoom`,void 0);try{t=this._project(t,this.state.spatialReference)}catch(e){E.getLogger(this).error(new D(`mapview:invalid-extent`,`could not project the value in the view's spatial reference`,{error:e}));return}let n=this.viewpoint;Ghe(n,n,t,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get(`padding`)}set padding(e){this.ready?(this.state.padding=e,this._set(`padding`,this.state.padding)):this._set(`padding`,e)}get resolution(){return this.ready?(this.state.commitProperty(`id`),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty(`id`),this.state.rotation):this._get(`rotation`)}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set(`rotation`,e);let t=this.viewpoint;tge(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty(`id`),this.state.scale):this._get(`scale`)}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set(`scale`,e),this._set(`zoom`,void 0);let t=this._get(`extent`);t&&(this._set(`extent`,void 0),this._set(`center`,t.center));return}let t=this.viewpoint;ez(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get(`viewpoint`)}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set(`viewpoint`,e),this._set(`extent`,void 0),this._set(`center`,void 0),this._set(`zoom`,void 0),void this._set(`scale`,void 0);let t,n;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new D(`mapview:invalid-viewpoint`,`invalid scale value of ${e.scale}`):e.targetGeometry??(n=new D(`mapview:invalid-viewpoint`,`geometry not defined`))}catch(e){n=new D(`mapview:invalid-viewpoint`,`could not project the value in the view's spatial reference`,{error:e})}if(n)return void E.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;let r=new Sh({targetGeometry:new U,scale:0,rotation:0});UR(r,t),this.constraints?.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this._set(`viewpoint`,r)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get(`zoom`)}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set(`zoom`,e),this._set(`scale`,void 0);let t=this._get(`extent`);t&&(this._set(`extent`,void 0),this._set(`center`,t.center));return}let t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set(`zoom`,-1);let n=this.viewpoint;ez(n,n,t),this.viewpoint=n,this._set(`zoom`,this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};let{padding:t,constraints:n}=this,r=this._get(`center`),i=this._get(`extent`),a=this._get(`scale`),o=this._get(`rotation`),s=this._get(`viewpoint`),c=this._get(`zoom`),l=c!=null&&n!=null&&n.zoomToScale(c)||void 0,u,d,f,p=s?.rotation,m=s?.targetGeometry;m?.type===`extent`?u=m:m?.type===`point`&&(d=m,f=s?.scale);let h=i??u;return{center:r??d??h?.center,rotation:o??p,scale:(a??l??f??(h&&BR(h,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,n,r){let i=e.targetGeometry;try{this._project(e,n)}catch(t){E.getLogger(this).warn(new zn(`mapview:startup-projection-error`,`projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.`,{center:i.toJSON(),spatialReference:n,error:t})),e.targetGeometry=r||new U({x:0,y:0,spatialReference:n})}this.constraints?.fit(e),this._set(`state`,new Dz({padding:this.padding,size:t,viewpoint:e})),this._set(`ready`,!0)}teardown(){this._set(`ready`,!1);let{center:[e,t],spatialReference:n,rotation:r,scale:i}=this.state.paddedViewState,a=new U({x:e,y:t,spatialReference:n});this._set(`viewpoint`,null),this._set(`extent`,null),this._set(`center`,a),this._set(`zoom`,-1),this._set(`rotation`,r),this._set(`scale`,i),this._set(`state`,null)}changeSpatialReference(e){let t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{let e=t.viewpoint.clone();e.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=e}let n=t.clone(),[r,i]=t.center,a=null;try{a=this._project(new U({x:r,y:i,spatialReference:t.spatialReference}),e)}catch(t){al()||E.getLogger(this).warn(new zn(`mapview:spatial-reference-change`,`could not project the view's center to the new spatial reference`,{center:a?.toJSON(),spatialReference:e,error:t}))}a||=new U({x:0,y:0,spatialReference:e});let o=$R(new Sh({targetGeometry:new U,scale:0,rotation:0}),t.viewpoint,a);n.viewpoint=o;try{let r=[t.size[0]/2,t.size[1]/2],i=[r[0]+20,r[1]],a=t.toMap([0,0],i),{x:s,y:l}=this._project(new U({x:a[0],y:a[1],spatialReference:t.spatialReference}),e);a[0]=s,a[1]=l,n.toScreen(a,a);let u=QR(r,a,i),d=Math.hypot(a[0]-r[0],a[1]-r[1])/20;!Number.isFinite(d)||Math.abs(d)>4?(o.rotation=0,o.targetGeometry=new U({x:0,y:0,spatialReference:e})):(o.scale*=d,o.scale>c(`mapview-srswitch-adjust-rotation-scale-threshold`)?o.rotation=0:o.rotation+=Number.isFinite(u)?u:0)}catch{}this._get(`constraints`)?.constrain(o,void 0),this._get(`state`).viewpoint=o}resize(e,t){if(!this.ready)return;let n=this.state,r=this.state.paddedViewState.viewpoint,i=this.state.paddedViewState.size.slice();n.size=[e,t],$he(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints?.constrain(r,void 0)??r,this.state.viewpoint=r}toMap(e){if(!this.ready)return null;let t=[0,0],[n,r]=this.state.toMap(t,[e.x,e.y]),i=this.state.spatialReference;return new U({x:n,y:r,spatialReference:i})}toScreen(e,t){if(!this.ready)return null;let n=this._project(e,this.state.spatialReference),r=[n.x,n.y];return!1===t?.pickClosestTarget||this.state.paddedViewState.wrapMapCoordinate(r,r),this.state.toScreen(r,r),Zw(r[0],r[1])}_project(e,t){let n=e?.targetGeometry||e;if(!t)return e;if(!n)return null;if(t.imageCoordinateSystem||n.spatialReference?.imageCoordinateSystem||Pl(t,n.spatialReference))return e;let r=FS(n,t);if(!r)throw new D(`mapview:projection-not-possible`,`projecting input geometry to target spatial reference returned a null value`,{geometry:n,spatialReference:t});return rB(e)?(e.targetGeometry=r,e):r}};function rB(e){return e?.declaredClass===`esri.Viewpoint`}e([N({type:U})],nB.prototype,`center`,null),e([N()],nB.prototype,`constraints`,void 0),e([N({type:Rd})],nB.prototype,`extent`,null),e([N({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],nB.prototype,`padding`,null),e([N()],nB.prototype,`ready`,void 0),e([N()],nB.prototype,`resizeAlign`,void 0),e([N({readOnly:!0})],nB.prototype,`resolution`,null),e([N({type:Number})],nB.prototype,`rotation`,null),e([N({type:Number})],nB.prototype,`scale`,null),e([N({readOnly:!0})],nB.prototype,`state`,void 0),e([N({type:Sh})],nB.prototype,`viewpoint`,null),e([N({readOnly:!0})],nB.prototype,`visibleArea`,null),e([N()],nB.prototype,`zoom`,null),nB=e([P(`esri.views.2d.ViewStateManager`)],nB);var iB=160,aB=class extends F{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer??=setInterval(()=>{performance.now()-this._timestamp>=iB&&this.clear()},iB)}clear(){this._timer&&=(clearInterval(this._timer),void 0)}};e([N()],aB.prototype,`_timer`,void 0),e([N()],aB.prototype,`stationary`,null),aB=e([P(`esri.views.2d.support.StationaryManager`)],aB);var oB=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.fullOpacity=1,this.stateManager=new nB({constraints:new tB({view:this})}),this.stationaryManager=new aB,this.mapViewNavigation=null,this.renderingOptions={samplingMode:`dynamic`,edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new xge(this),this.viewEvents=new JI(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([G(()=>this.viewpoint,()=>this.stationaryManager.flip(),Kh)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(e){let t=this._get(`animation`);if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return void this._set(`animation`,null);this._set(`animation`,e);let n=()=>{this.destroyed||e===this._get(`animation`)&&(this._set(`animation`,null),this.frameTask?.requestFrame())};e.when(n,n)}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;let t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get rotation(){return this.stateManager.rotation??0}set rotation(e){let{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}};return e([N({readOnly:!0})],r.prototype,`animationManager`,void 0),e([N({readOnly:!0})],r.prototype,`fullOpacity`,void 0),e([N()],r.prototype,`stateManager`,void 0),e([N()],r.prototype,`constraintsInfo`,null),e([N()],r.prototype,`extent`,null),e([N({readOnly:!0})],r.prototype,`state`,null),e([N({readOnly:!0})],r.prototype,`mapViewNavigation`,void 0),e([N()],r.prototype,`renderingOptions`,void 0),e([N({readOnly:!0})],r.prototype,`interacting`,null),e([N()],r.prototype,`stationary`,null),e([N()],r.prototype,`animation`,null),e([N({type:tB})],r.prototype,`constraints`,null),e([N()],r.prototype,`padding`,null),e([N()],r.prototype,`resizeAlign`,null),e([N()],r.prototype,`rotation`,null),e([N({readOnly:!0})],r.prototype,`viewEvents`,void 0),e([N({type:Sh})],r.prototype,`viewpoint`,null),r=e([P(`esri.views.Viewport2DBaseMixin`)],r),r},sB=()=>nt.respectPrefersReducedMotion&&window.matchMedia(`(prefers-reduced-motion: reduce)`).matches,cB=class extends uT{constructor(e){super(e),this.state=`running`,this.target=null,this._resolver=null}initialize(){this._resolver=zi(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state===`finished`||this.state===`stopped`}stop(){this.state!==`stopped`&&this.state!==`finished`&&(this._set(`state`,`stopped`),this._resolver?.reject(new D(`view:animation-stopped`,`ViewAnimation stopped`)))}finish(){this.state!==`stopped`&&this.state!==`finished`&&(this._set(`state`,`finished`),this._resolver?.resolve())}update(e,t){t||=Ii(e)?`waiting-for-target`:`running`,this._set(`target`,e),this._set(`state`,t)}static{this.state={RUNNING:`running`,STOPPED:`stopped`,FINISHED:`finished`,WAITING_FOR_TARGET:`waiting-for-target`}}};e([N({readOnly:!0})],cB.prototype,`done`,null),e([N({readOnly:!0,type:String})],cB.prototype,`state`,void 0),e([N()],cB.prototype,`target`,void 0),cB=e([P(`esri.views.ViewAnimation`)],cB);var lB=cB,uB=class extends F{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,t){if(!e)return void E.getLogger(this).error(`#goTo()`,`target cannot be null or undefined`);let n=new lB;this.view.animation=n,await Uh(()=>this.view.ready,t);let r={...t,animate:t?.animate??(!sB()&&this.view.animationsEnabled),animationMode:t?.animationMode??`auto`},{extent:i,spatialReference:a,size:o,viewpoint:s,constraints:c,padding:l,allLayerViews:u}=this.view,d=Uhe(e,{extent:i,spatialReference:a,size:o,viewpoint:s,constraints:c,padding:l,allLayerViews:u,pickClosestTarget:t?.pickClosestTarget??!0});return n?.update(d),this._gotoTask={},r.animate?this._gotoAnimated(d,r):this._gotoImmediate(d,r)}_gotoImmediate(e,t){let n=this._gotoTask,r=this.view.animation,i=e.then(e=>{if(Ci(t),n!==this._gotoTask)throw new D(`view:goto-interrupted`,`Goto was interrupted`);this.view.viewpoint=r.target=e,r.finish()});return this._cancellableGoTo(n,r,i,t)}_gotoAnimated(e,t){let n=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();let i=e.then(e=>{if(Ci(t),n!==this._gotoTask)throw new D(`view:goto-interrupted`,`Goto was interrupted`);return r.update(e),this.view.animationManager.animate(r,this.view.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,r,i,t)}_cancellableGoTo(e,t,n,r){let i=()=>e===this._gotoTask;return Ai(n,r).finally(()=>{i()&&(t.done||t.stop())})}};e([N({constructOnly:!0})],uB.prototype,`view`,void 0),uB=e([P(`esri.views.2d.GoToManager`)],uB);function dB(e,t){switch(t){case`primary`:return e.pointerType===`touch`||e.button===0;case`secondary`:return e.pointerType!==`touch`&&e.button===2;case`tertiary`:return e.pointerType!==`touch`&&e.button===1}}function fB(e,t){return t.some(t=>dB(e,t))}function pB(e,{dragPrimary:t,dragSecondary:n,dragTertiary:r}){return[{key:`primary`,value:t},{key:`secondary`,value:n},{key:`tertiary`,value:r}].filter(t=>t.value===e).map(e=>e.key)}var mB=class extends nT{constructor(e,t){super(!0),this._view=e,this.registerIncoming(`double-click`,t,e=>this._handleDoubleClick(e,t))}_handleDoubleClick(e,t){dB(e.data,`primary`)&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},hB=class extends nT{constructor(e,t,n){super(!0),this.view=e,this.pointerType=t,this.registerIncoming(`double-tap-drag`,n,e=>this._handleDoubleTapDrag(e))}_handleDoubleTapDrag(e){let{data:t}=e,{pointerType:n}=t;if(n!==this.pointerType)return;e.stopPropagation();let{action:r,delta:i}=t,{view:a}=this,{mapViewNavigation:o}=a;switch(r){case`begin`:{let{scale:e}=a;this._startScale=e,this._currentScale=e,this._previousDelta=i,o.begin();break}case`update`:{if(this._previousDelta.y===i.y)return;this._previousDelta=i;let e=1.015**i.y,t=this._startScale*e,n=t/this._currentScale;o.setViewpointImmediate(n),this._currentScale=t;break}case`end`:{let{constraints:e}=a,{effectiveLODs:t,snapToZoom:n}=e;if(!n||!t)return void o.end();let r=e.snapScale(this._currentScale),s=(i.y>0?Math.max(r,e.snapToPreviousScale(this._startScale)):Math.min(r,e.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(s).then(()=>{o.end()});break}}}},gB=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){let t=e.data,n=t.pointers.size;switch(t.action){case`start`:this._currentCount=n,this._emitStart(e);break;case`added`:this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case`update`:this._emitUpdate(e);break;case`removed`:this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case`end`:this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},_B=class extends nT{constructor(e,t,n){super(!0),this.view=e,this.pointerActions=t,this.registerIncoming(`drag`,n,e=>this._handleDrag(e)),this.registerIncoming(`pointer-down`,()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new gB({start:(e,t)=>{this.view.mapViewNavigation.pan.begin(this.view,t.data),t.stopPropagation()},update:(e,t)=>{this.view.mapViewNavigation.pan.update(this.view,t.data),t.stopPropagation()},end:(e,t)=>{this.view.mapViewNavigation.pan.end(this.view,t.data),t.stopPropagation()},condition:(e,t)=>e===1&&fB(t.data,this.pointerActions)})}_handleDrag(e){let t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},vB=class extends nT{constructor(e,t,n){super(!0),this._view=e,this.pointerActions=t;let r=this._view.mapViewNavigation;this._dragEventSeparator=new gB({start:(e,t)=>{r.rotate.begin(this._view,t.data),t.stopPropagation()},update:(e,t)=>{r.rotate.update(this._view,t.data),t.stopPropagation()},end:(e,t)=>{r.rotate.end(),t.stopPropagation()},condition:(e,t)=>e===1&&fB(t.data,this.pointerActions)}),this.registerIncoming(`drag`,n,e=>this._dragEventSeparator.handle(e))}};function yB(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function bB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function xB(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function SB(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function CB(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function wB(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function TB(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function EB(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function DB(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function OB(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function kB(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function AB(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function jB(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function MB(e,t=0,n=1){return e[0]=Math.min(Math.max(e[0],t),n),e[1]=Math.min(Math.max(e[1],t),n),e[2]=Math.min(Math.max(e[2],t),n),e}function NB(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function PB(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function FB(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function IB(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function LB(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function RB(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function zB(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function BB(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function VB(e,t){let n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function HB(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function UB(e,t,n){let r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];return e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o,e}function WB(e,t,n){let r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2],l=i*c-a*s,u=a*o-r*c,d=r*s-i*o,f=Math.sqrt(l*l+u*u+d*d);return e[0]=l/f,e[1]=u/f,e[2]=d/f,e}function GB(e,t,n,r){let i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function KB(e,t,n,r,i,a){let o=a*a,s=o*(2*a-3)+1,c=o*(a-2)+a,l=o*(a-1),u=o*(3-2*a);return e[0]=t[0]*s+n[0]*c+r[0]*l+i[0]*u,e[1]=t[1]*s+n[1]*c+r[1]*l+i[1]*u,e[2]=t[2]*s+n[2]*c+r[2]*l+i[2]*u,e}function qB(e,t,n,r,i,a){let o=1-a,s=o*o,c=a*a,l=s*o,u=3*a*s,d=3*c*o,f=c*a;return e[0]=t[0]*l+n[0]*u+r[0]*d+i[0]*f,e[1]=t[1]*l+n[1]*u+r[1]*d+i[1]*f,e[2]=t[2]*l+n[2]*u+r[2]*d+i[2]*f,e}function JB(e,t=1){let n=rf,r=2*n()*Math.PI,i=2*n()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=i*t,e}function YB(e,t,n){let r=t[0],i=t[1],a=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12],e[1]=n[1]*r+n[5]*i+n[9]*a+n[13],e[2]=n[2]*r+n[6]*i+n[10]*a+n[14],e}function XB(e,t,n){let r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function ZB(e,t,n){let r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],c=t[1],l=t[2],u=i*l-a*c,d=a*s-r*l,f=r*c-i*s,p=i*f-a*d,m=a*u-r*f,h=r*d-i*u,g=2*o;return e[0]=s+u*g+2*p,e[1]=c+d*g+2*m,e[2]=l+f*g+2*h,e}function QB(e,t,n,r){let i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function $B(e,t,n,r){let i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function eV(e,t,n,r){let i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function tV(e,t){VB(nV,e),VB(rV,t);let n=HB(nV,rV);return n>1?0:n<-1?Math.PI:Math.acos(n)}var nV=Ox(),rV=Ox();function iV(e){return`vec3(`+e[0]+`, `+e[1]+`, `+e[2]+`)`}function aV(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function oV(e,t){if(e===t)return!0;let n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],c=nf();return Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))}function sV(e,t,n){let r=n[0]-t[0],i=n[1]-t[1],a=n[2]-t[2],o=r*r+i*i+a*a;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=a*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}var cV=CB,lV=wB,uV=TB,dV=IB,fV=LB,pV=yB,mV=RB;Object.freeze(Object.defineProperty({__proto__:null,abs:OB,add:SB,angle:tV,bezier:qB,ceil:EB,clamp:MB,copy:bB,cross:UB,crossAndNormalize:WB,direction:sV,dist:dV,distance:IB,div:uV,divide:TB,dot:HB,equals:oV,exactEquals:aV,floor:DB,hermite:KB,inverse:BB,len:pV,length:yB,lerp:GB,max:jB,min:AB,mul:lV,multiply:wB,negate:zB,normalize:VB,random:JB,rotateX:QB,rotateY:$B,rotateZ:eV,round:NB,scale:PB,scaleAndAdd:FB,set:xB,sign:kB,sqrDist:fV,sqrLen:mV,squaredDistance:LB,squaredLength:RB,str:iV,sub:cV,subtract:CB,transformMat3:XB,transformMat4:YB,transformQuat:ZB},Symbol.toStringTag,{value:`Module`}));function hV(e){let t=e*e;return e<0&&(t*=-1),t}function gV(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function _V(e,t,n){let r=n,i=e.state,a=e.device,o=t.tiltDirection===`forward-down`?1:-1;return a.deviceType===`standard`?(r.translation[0]=hV(i.axes[0]),r.translation[1]=hV(i.axes[1]),r.translation[2]=hV(i.buttons[7])-hV(i.buttons[6]),r.heading=hV(i.axes[2]),r.tilt=hV(i.axes[3])):a.deviceType===`spacemouse`&&(r.translation[0]=1.2*hV(i.axes[0]),r.translation[1]=1.2*hV(i.axes[1]),r.translation[2]=2*-hV(i.axes[2]),r.heading=1.2*hV(i.axes[5]),r.tilt=1.2*hV(i.axes[3])),r.tilt*=o,PB(r.translation,r.translation,1),r}function vV(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}var yV=class extends nT{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Pr,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming(`gamepad`,e=>this._handleGamePadEvent(e)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([G(()=>this._view.navigation.gamepad?.enabled,e=>{e?(this._handle.resume(),this._frameTask||=$i({update:e=>this._frameUpdate(e.deltaTime)})):(this._handle.pause(),this._frameTask&&=(this._frameTask.remove(),null))},qh)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&=(this._frameTask.remove(),null),super.onUninstall()}_handleGamePadEvent(e){let t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action===`end`?(this._currentDevice=null,gV(this._transformation)):(this._currentDevice=e.data.device,_V(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){let t=this._transformation;if(vV(t))return void this._frameTask?.pause();let n=this._view.viewpoint.clone(),r=this._view.navigation.gamepad.velocityFactor,i=xV*r*e;iz(n,n,[t.translation[0]*i,-t.translation[1]*i]);let a=1+t.translation[2]*SV*e,o=this._view.constraints.rotationEnabled?-t.heading*bV*e:0,s=this._view.size,c=[s[0]/2,s[1]];tz(n,n,a,o,c,s);let l=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=l}},bV=.06,xV=.7,SV=6e-4;function CV(e){let t=()=>e(document.visibilityState===`visible`);return document.addEventListener(`visibilitychange`,t),Yt(()=>document.removeEventListener(`visibilitychange`,t))}var wV=class extends nT{constructor(e,t,n){super(!0),this.view=e,this.keys=t,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=e=>{let t=this._keyMap[e.data.key];if(e.modifiers.has(`Meta`)||e.modifiers.has(`Control`))return void this._stopMovement();if(t==null)return;e.stopPropagation(),e.preventDefault();let n=e.type===`key-down`;if(this._pressedKeys[n?`add`:`delete`](t),n){if(this._direction===t)return;this._direction=t,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{let e=this._timeout===void 0,t=this._pressedKeys.size>0;e||t?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction??this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[t.left]:`left`,[t.right]:`right`,[t.up]:`up`,[t.down]:`down`},this.registerIncoming(`key-down`,n,this._handleKey),this.registerIncoming(`key-up`,n,this._handleKey),this.registerIncoming(`blur`,n,this._stopMovement),this._visibilityHandle=CV(e=>e?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){let t=this._currentDirection!=null;if(e!=null){if(t||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case`left`:this.view.mapViewNavigation.continuousPanLeft();break;case`right`:this.view.mapViewNavigation.continuousPanRight();break;case`up`:this.view.mapViewNavigation.continuousPanUp();break;case`down`:this.view.mapViewNavigation.continuousPanDown()}}else t&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},TV=class extends nT{constructor(e,t,n){super(!0),this.view=e,this.keys=t,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(t),this.registerIncoming(`key-down`,n,e=>this._handleKeyDown(e)),this.registerIncoming(`key-up`,n,e=>this._handleKeyUp(e)),this.registerIncoming(`blur`,n,()=>this._handleStop()),this._visibilityHandle=CV(e=>e?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,`clockwise`),this._addKeyMapping(e.counterClockwise,`counterClockwise`),this._addKeyMapping(e.reset,`reset`)}_addKeyMapping(e,t){for(let n of e)this._keyToDirection.set(n,t)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){let n=e.modifiers;if(n.size>0&&!n.has(`Shift`)||!this.view.constraints.rotationEnabled)return;let r=this._keyToDirection.get(e.data.key);if(this._pressed=r!=null,this._pressed){if(e.preventDefault(),t)switch(this.view.mapViewNavigation.begin(),r){case`clockwise`:this.view.mapViewNavigation.continuousRotateClockwise();break;case`counterClockwise`:this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case`reset`:this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},EV=class extends nT{constructor(e,t,n){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming(`key-down`,n,e=>this._handleKeyDown(e)),t.zoomIn.forEach(e=>this._keysToZoomAction[e]=0),t.zoomOut.forEach(e=>this._keysToZoomAction[e]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){let t=e.modifiers;if(t.size>0&&!t.has(`Shift`))return;let{key:n}=e.data;if(!(n in this._keysToZoomAction))return;let r=this._keysToZoomAction[n],{mapViewNavigation:i}=this.view,a=null;switch(r){case 0:a=i.zoomIn();break;case 1:a=i.zoomOut();break;default:return}i.begin(),a.then(()=>i.end()),e.stopPropagation()}},DV=.6,OV=class extends nT{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming(`mouse-wheel`,t,e=>this._handleMouseWheel(e))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!==`zoom`||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;let t=this._view.mapViewNavigation,{x:n,y:r,deltaY:i}=e.data,a=1/DV**(1/60*i),o=t.zoom(a,[n,r]);this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()})}},kV=class extends nT{constructor(e){super(!0),this.view=e,this.registerIncoming(`drag`,e=>this._handleDrag(e)),this.registerIncoming(`pointer-down`,()=>this._stopMomentumNavigation());let t=this.view.mapViewNavigation;this._dragEventSeparator=new gB({start:(e,n)=>{t.pinch.begin(this.view,n.data),n.stopPropagation()},update:(e,n)=>{t.pinch.update(this.view,n.data),n.stopPropagation()},end:(e,n)=>{t.pinch.end(this.view),n.stopPropagation()},condition:e=>e>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function AV(e){let t=e.native;return t?{buttons:t.buttons.map(e=>e.pressed?e.value||1:0),axes:t.axes.map(t=>NV(t,e.axisThreshold))}:{buttons:[],axes:[]}}function jV(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(let n=0;n<e.buttons.length;n++)if(e.buttons[n]!==t.buttons[n])return!1;return!0}function MV(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function NV(e,t){let n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}var PV=class{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{let t=e.gamepad,n=t.index,r=this._inputDevices[n];r&&(this._emitGamepadEvent(t,AV(r),!1),this._inputDevices.splice(n,1),this._latestUpdate.splice(n,1),this._input.gamepad.devices.remove(r),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=[],this._inputDevices=[],this._callback=null;let n=`getGamepads`in window.navigator,r=window.isSecureContext;this.supported=n&&r,this.supported&&(IV(e=>this._connectGamepad(e)),window.addEventListener(`gamepadconnected`,this._onConnectGamepad),window.addEventListener(`gamepaddisconnected`,this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener(`gamepadconnected`,this._onConnectGamepad),window.removeEventListener(`gamepaddisconnected`,this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){let t=new bL({gamepad:e});t.deviceType!==`unknown`&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask??=$i({update:()=>this._readGamepadState()})}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])}_readGamepadState(){let e=document.hasFocus(),t=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode===`document`&&!e||this._input.gamepad.enabledFocusMode===`view`&&!t;IV(e=>{let t=this._inputDevices[e.index];if(!t)return;let r=this._latestUpdate[e.index],i=AV(t),a=n||MV(i);r&&(r.timestamp===e.timestamp||!r.active&&a||jV(r.state,i))||this._emitGamepadEvent(e,i,!a)})}_emitGamepadEvent(e,t,n){let r=this._latestUpdate[e.index],i=r&&r.active;if(!i&&!n)return;let a=!i&&n?`start`:i&&n?`update`:`end`;this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:a})}};function FV(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function IV(e){for(let t of navigator.getGamepads())FV(t)&&e(t)}var LV=c(`edge`),RV=c(`chrome`),zV=c(`ff`),BV=c(`safari`),VV=`esri-view-surface`,HV={touchNone:`${VV}--touch-none`,touchPan:`${VV}--touch-pan`},UV=class e{static{this.test={disableSubpixelCoordinates:!1}}constructor(e,t){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute(`tabindex`)||e.setAttribute(`tabindex`,`0`),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener(`keydown`,this._preventAltKeyDefault),this._gamepadSource=new PV(e,t),this._gamepadSource.onEvent=e=>this._callback(`gamepad`,e)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=zr(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener(`keydown`,this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(let t in this._active)if(!e||!e.has(t)){let e=this._active[t];this._element.removeEventListener(WV[t],e),delete this._active[t]}e&&e.forEach(e=>{if(!this._active[e]&&WV[e]){let t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(WV[e],t),this._active[e]=t}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has(`gamepad`)??!1)}setPointerCapture(e,t){t?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?HV.touchNone:HV.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?HV.touchPan:HV.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener(`touchmove`,this._preventMultiTouchPanning):this._element.removeEventListener(`touchmove`,this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(HV.touchNone),this._element.classList.remove(HV.touchPan),this._element.removeEventListener(`touchmove`,this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(t,n){let r=rL(this._element,t);return e.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}_handleKey(e,t){let{key:n}=t;n&&e===`key-up`&&this._keyDownState.delete(n);let r={native:t,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e===`key-down`&&this._keyDownState.add(r.key),this._callback(e,r)}_handlePointer(e,t){let n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,t){let n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&c(`mac`)&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,t){let n=this._getDeltaFromTrackpadOrMouseWheel(t);switch(t.deltaMode){case 0:LV&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}LV?n*=.7:RV||BV?n*=.6:zV&&(n*=1.375);let r=Math.abs(n);r>100&&(n=n/r*200/(1+Math.exp(-.02*(r-100))));let i=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,i)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){let n={native:t};t.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key===`Alt`&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},WV={"key-down":`keydown`,"key-up":`keyup`,"pointer-down":`pointerdown`,"pointer-up":`pointerup`,"pointer-move":`pointermove`,"mouse-wheel":`wheel`,"pointer-capture-got":`gotpointercapture`,"pointer-capture-lost":`lostpointercapture`,"context-menu":`contextmenu`,"pointer-enter":`pointerenter`,"pointer-leave":`pointerleave`,"pointer-cancel":`pointercancel`,focus:`focus`,blur:`blur`},GV=class extends nT{constructor(){super(!0),this.registerIncoming(`context-menu`,e=>e.data.native.preventDefault())}},KV=()=>({maximumClickDelay:300}),qV=(e={})=>({...KV(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...e}),JV=(e={})=>({...KV(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...e});function YV(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function XV(e,t){let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function ZV(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Zw()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){let[n,r]=e,[i,a]=[r.x-n.x,r.y-n.y];return t.radius=Math.sqrt(i*i+a*a)/2,t.center.x=(n.x+r.x)/2,t.center.y=(n.y+r.y)/2,t}let n=0,r=0;for(let t=0;t<e.length;t++)n+=e[t].x,r+=e[t].y;n/=e.length,r/=e.length;let i=e.map(e=>e.x-n),a=e.map(e=>e.y-r),o=0,s=0,c=0,l=0,u=0,d=0,f=0;for(let e=0;e<i.length;e++){let t=i[e],n=a[e],r=t*t,p=n*n;o+=r,s+=p,c+=t*n,l+=r*t,u+=p*n,d+=t*p,f+=n*r}let p=.5*(l+d),m=.5*(u+f),h=o*s-c*c,g=(p*s-m*c)/h,_=(o*m-c*p)/h,v=Zw(g+n,_+r);return{radius:Math.sqrt(g*g+_*_+(o+s)/e.length),center:v}}function QV(e){let{native:t}=e,{pointerId:n,button:r,pointerType:i}=t;return i===`mouse`?`${n}:${r}`:`${i}`}var $V=class extends nT{constructor(e={},t=_i){super(!1),this._clock=t,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Zw(0,0),this._pointerState=new Map,this._parameters=JV(e),this._doubleTapDrag=this.registerOutgoing(`double-tap-drag`),this._dragEventSeparator=new gB({start:(e,t)=>this._dragStart(e,t),update:(e,t)=>this._dragUpdate(t),end:(e,t)=>this._dragEnd(t)}),this.registerIncoming(`drag`,e=>this._dragEventSeparator.handle(e)),this.registerIncoming(`pointer-down`,e=>this._handlePointerDown(e)),this.registerIncoming(`pointer-up`,()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=Br(e.doubleTapTimeout)})}get hasPendingInputs(){for(let e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){let t=this._pointerState.get(e);t&&(t.doubleTapTimeout=Br(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,t){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:n,modifiers:r}=t,{center:i}=n;this._dragStartCenter=i;let a=eH(`begin`,Zw(0,0),n);this._doubleTapDrag.emit(a,void 0,r),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;let{data:t,modifiers:n}=e,{center:r}=t,i=eH(`update`,Zw(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),t);this._doubleTapDrag.emit(i,void 0,n),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;let{data:t,modifiers:n}=e,{center:r}=t,i=eH(`end`,Zw(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),t);this._doubleTapDrag.emit(i,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){let{data:t}=e,n=QV(t),r=this._pointerState.get(n),{pointerType:i}=t.native;if(r){let a=i===`touch`?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(n),YV(r.event.data,t)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){let{data:t}=e,{pointerType:n}=t.native,r=QV(t),i=n===`touch`?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._clearPointerDown(r),i);this._pointerState.set(r,{event:e,doubleTapTimeout:a}),this.refreshHasPendingInputs()}};function eH(e,t,n){let{button:r,buttons:i,pointer:a,pointers:o,pointerType:s,timestamp:c}=n;return{action:e,delta:t,button:r,buttons:i,pointer:a,pointers:o,pointerType:s,timestamp:c}}var tH=class extends nT{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing(`drag`),this.registerIncoming(`pointer-drag`,this._handlePointerDrag.bind(this)),this.registerIncoming(`pointer-up`,this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming(`pointer-capture-lost`,this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming(`pointer-cancel`,this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,n,r){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:r,pointers:iH(this._activePointerMap),pointer:t,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(e){let t=e.native.pointerId,n=rH(this._activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,r);let i=aH(r,nH(this._activePointerMap));r.initialAngle=i,r.lastAngle=i,this._updatePointerAngles(n)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;let t=e.native.pointerId,n=this._activePointerMap.get(t);n?n.event=e:this._addPointer(e)}_removePointer(e){let t=rH(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){let t=rH(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=aH(n,t)-e,n.lastAngle=aH(n,t)-e})}_emitEvent(e,t,n){let r=rH(this._activePointerMap);this._drag.emit(this._createPayload(e,t,r,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){let t=e.data.native.pointerId,n=Vi(e.timestamp);this._activePointerMap.get(t)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent(`end`,e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent(`removed`,e.data,Vi(e.timestamp))))}_handlePointerDrag(e){let t=e.data,n=t.currentEvent,r=Vi(e.timestamp);switch(t.action){case`start`:case`update`:this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent(`update`,n,r)):(this._addPointer(n),this._emitEvent(`added`,n,r),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent(`start`,n,r))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType===`touch`&&this._activePointerMap.size===1}};function nH(e){let t=[];return e.forEach(e=>{t.push(Zw(e.event.x,e.event.y))}),ZV(t)}function rH(e){let t=nH(e),n=0;return e.forEach(e=>{let r=aH(e,t),i=r-e.lastAngle;for(;i>Math.PI;)i-=2*Math.PI;for(;i<-Math.PI;)i+=2*Math.PI;r=e.lastAngle+i,e.lastAngle=r;let a=r-e.initialAngle;n+=a}),n/=e.size||1,{angle:n,radius:t.radius,center:t.center}}function iH(e){let t=new Map;return e.forEach((e,n)=>t.set(n,e.event)),t}function aH(e,t){let n=e.event,r=n.x-t.center.x,i=n.y-t.center.y;return Math.atan2(i,r)}var oH=class extends nT{constructor(e={},t=_i){super(!1),this._clock=t,this._pointerState=new Map,this._parameters=JV(e),this._immediateDoubleClick=this.registerOutgoing(`immediate-double-click`),this.registerIncoming(`pointer-down`,this._handlePointerDown.bind(this)),this.registerIncoming(`pointer-up`,this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){let t=e.data,n=QV(t);if(!this._pointerState.has(n)){let e={downButton:t.native.button,x:t.x,y:t.y,immediateDoubleClick:null};this._pointerState.set(n,e),this.startCapturingPointer(t.native)}}_handlePointerUp(e){let t=e.data,n=QV(t),r=this._pointerState.get(n);if(r&&r.downButton===t.native.button){let n=r.immediateDoubleClick,i=e.data.native.pointerType===`touch`?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),YV(n,e.data)>i?this._startImmediateDoubleClick(e,r):(this._immediateDoubleClick.emit(e.data,void 0,n.modifiers),this._removeState(t))):YV(r,e.data)>i?this._removeState(t):this._startImmediateDoubleClick(e,r)}}_startImmediateDoubleClick(e,t){let n=e.data.native.pointerType===`touch`?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),n)}}_removeState(e){let t=QV(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},sH=class extends nT{constructor(e={},t=_i){super(!1),this._clock=t,this._pointerState=new Map,this._parameters=qV(e),this._pointerDrag=this.registerOutgoing(`pointer-drag`),this._immediateClick=this.registerOutgoing(`immediate-click`),this._pointerHold=this.registerOutgoing(`hold`),this.registerIncoming(`pointer-down`,e=>this._handlePointerDown(e)),this.registerIncoming(`pointer-up`,e=>this._handlePointerLoss(e,`pointer-up`)),this.registerIncoming(`pointer-capture-lost`,e=>this._handlePointerLoss(e,`pointer-capture-lost`)),this.registerIncoming(`pointer-cancel`,e=>this._handlePointerLoss(e,`pointer-cancel`)),this._moveHandle=this.registerIncoming(`pointer-move`,e=>this._handlePointerMove(e)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=Br(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){let t=e.data,n=t.native.pointerId,r=null;this._pointerState.size===0&&(r=this._clock.setTimeout(()=>{let t=this._pointerState.get(n);if(t){if(!t.isDragging){let n=t.previousEvent;this._pointerHold.emit(n,void 0,e.modifiers),t.holdEmitted=!0}t.holdTimeout=null}},this._parameters.holdDelay));let i={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(n,i),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){let t=e.data,n=t.native.pointerId,r=this._pointerState.get(n);r&&(r.isDragging?this._pointerDrag.emit(cH(`update`,r,t),void 0,r.modifiers):XV(t,r.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),r.previousEvent=t)}_getDragThreshold(e){switch(e){case`touch`:return this._parameters.movementUntilTouchDrag;case`pen`:return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){let t=e.data,n=t.native.pointerId;this._pointerState.forEach(r=>{r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,n===r.startEvent.native.pointerId?this._pointerDrag.emit(cH(`start`,r,t)):this._pointerDrag.emit(cH(`start`,r,r.previousEvent),e.timestamp))})}_handlePointerLoss(e,t){let n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging?this._pointerDrag.emit(cH(`end`,i,t===`pointer-up`?n:i.previousEvent),void 0,i.modifiers):t===`pointer-up`&&i.downButton===n.native.button&&e.timestamp-i.startTimestamp<=this._parameters.maximumClickDelay&&!i.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(r),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}};function cH(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}var lH=class extends nT{constructor(e={},t=_i){super(!1),this._clock=t,this._pointerState=new Map,this._parameters=JV(e),this._click=this.registerOutgoing(`click`),this._doubleClick=this.registerOutgoing(`double-click`),this.registerIncoming(`immediate-click`,e=>this._handleImmediateClick(e)),this.registerIncoming(`pointer-down`,e=>this._handlePointerDown(e))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=Br(e.doubleClickTimer))}get hasPendingInputs(){for(let e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,t){let n=this._pointerState.get(e);n&&(n.doubleClickTimer=Br(n.doubleClickTimer),t&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){let t=this._pointerState.get(e);t.pointerDownCount===1&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){let t=e.data,{pointerType:n}=t.native,r=uH(t);if(!this._pointerState.has(r))return void this._startClick(e);let i=this._pointerState.get(r),{data:a,modifiers:o}=i.event,s=n===`touch`?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;YV(a,t)>s?(this._clearDoubleClickTimer(r,!0),this._startClick(e)):(this._clearDoubleClickTimer(r,!1),i.pointerDownCount===2&&this._doubleClick.emit(a,void 0,o))}_handlePointerDown(e){let t=QV(e.data),n=this._pointerState.get(t);n&&(n.pointerDownCount+=1)}_startClick(e){let{data:t}=e,{native:{pointerType:n}}=t,r=QV(t),i=n===`touch`?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,a=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),i);this._pointerState.set(r,{event:e,doubleClickTimer:a,pointerDownCount:1}),this.refreshHasPendingInputs()}};function uH(e){let{pointerId:t,pointerType:n,button:r}=e.native;return n===`mouse`?`${t}:${r}`:`${n}`}var dH={counter:`Control`,pan:{left:`ArrowLeft`,right:`ArrowRight`,up:`ArrowUp`,down:`ArrowDown`},zoom:{zoomIn:[`=`,`+`],zoomOut:[`-`,`_`]},rotate:{clockwise:[`a`,`A`],counterClockwise:[`d`,`D`],reset:[`n`,`N`]}},fH=Symbol(`handles`),pH=class extends F{initialize(){let e=()=>this.view?.ready;this.addHandles([Bh(()=>!e(),()=>this._disconnect()),Bh(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(fH),this._inputManager=zr(this._inputManager)}_connect(){let e=this.view.surface,t=new UV(e,this.view.input),n=[new oH,new sH,new lH,new tH(this.view.navigation),new $V],r=new aT({eventSource:t,recognizers:n}),i=new _B(this.view,[`primary`]),a=new vB(this.view,[`secondary`]);r.installHandlers(`prevent-context-menu`,[new GV],oT.INTERNAL),r.installHandlers(`navigation`,[new kV(this.view),new yV(this.view),new OV(this.view),new mB(this.view),new mB(this.view,[dH.counter]),i,new wV(this.view,dH.pan),new EV(this.view,dH.zoom),new TV(this.view,dH.rotate),a,new hB(this.view,`touch`)],oT.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,this.addHandles([G(()=>this.view?.navigation?.browserTouchPanEnabled,e=>{this._source&&(this._source.browserTouchPanningEnabled=!e)},qh),G(()=>{let{actionMap:e}=this.view.navigation;return{panActions:pB(`pan`,e),rotateActions:pB(`rotate`,e)}},({panActions:e,rotateActions:t})=>{i.pointerActions=e,a.pointerActions=t},Jh)],fH)}get test(){}};e([N()],pH.prototype,`view`,void 0),e([N()],pH.prototype,`latestPointerInfo`,null),e([N()],pH.prototype,`multiTouchActive`,null),pH=e([P(`esri.views.2d.input.MapViewInputManager`)],pH);var mH=pH,hH=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.goToManager=new uB({view:this}),this.inputManager=new mH({view:this}),this.addHandles([this.on(`resize`,e=>this.stateManager.resize(e.width,e.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(e,t,n,r){return this.viewEvents.on(e,t,n,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}goTo(e,t){return this.goToManager.goTo(e,t)}toMap(e){if(!this.ready)return null;let t=aL(e)?iL(this,e):e;return this.stateManager.toMap(t)}};return e([N()],r.prototype,`goToManager`,void 0),e([N({readOnly:!0})],r.prototype,`interacting`,null),e([N()],r.prototype,`stationary`,null),e([N({readOnly:!0})],r.prototype,`inputManager`,void 0),r=e([P(`esri.views.Viewport2DMixin`)],r),r},gH=class{constructor(e){this._view=e,this.viewpoint=new Sh({targetGeometry:new U,scale:0,rotation:0})}get view(){return this._view}get size(){let[e,t]=this._view.size;return Math.sqrt(e*e+t*t)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return qR(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,t){t.pan=od(this.center,e.center);let n=Math.abs(e.rotation-this.rotation);n=n>=180?360-n:n,t.rotate=Qa(n),t.sourceZoom=this.scale,t.targetZoom=e.scale}interpolate(e,t,n){let{pan:r,rotate:i,zoom:a,zoomOffset:o}=n,{center:s}=this;s.spatialReference=e.center.spatialReference,s.x=Za(e.center.x,t.center.x,r),s.y=Za(e.center.y,t.center.y,r),this.viewpoint.scale=Za(e.scale,t.scale+o,a);let c=e.rotation,l=t.rotation;Math.abs(l-c)>=180&&(c+=360*(c<l?1:-1)),this.viewpoint.rotation=Za(c,l,i)}copyFrom(e){UR(this.viewpoint,e.viewpoint),this._view=e.view}};function _H(e,t,n,r){let i=3*e,a=3*(n-e)-i,o=1-i-a,s=3*t,c=3*(r-t)-s,l=1-s-c;function u(e){return((o*e+a)*e+i)*e}function d(e){return((l*e+c)*e+s)*e}function f(e){return(3*o*e+2*a)*e+i}function p(e,t){let n,r,i,a,o,s;for(i=e,s=0;s<8;s++){if(a=u(i)-e,Math.abs(a)<t)return i;if(o=f(i),Math.abs(o)<1e-6)break;i-=a/o}if(n=0,r=1,i=e,i<n)return n;if(i>r)return r;for(;n<r;){if(a=u(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i}return function(e,t=1e-6){return d(p(e,t))}}var vH={};vH.ease=_H(.25,.1,.25,1),vH.linear=_H(0,0,1,1),vH.easeIn=vH[`ease-in`]=_H(.42,0,1,1),vH.easeOut=vH[`ease-out`]=_H(0,0,.58,1),vH.easeInOut=vH[`ease-in-out`]=_H(.42,0,.58,1);var yH=e=>e,bH=e=>e*e,xH=e=>1-bH(1-e),SH=e=>e<.5?bH(2*e)/2:(xH(2*(e-.5))+1)/2,CH=e=>e*e*e,wH=e=>1-CH(1-e),TH=e=>e<.5?CH(2*e)/2:(wH(2*(e-.5))+1)/2,EH=e=>e*e*e*e,DH=e=>1-EH(1-e),OH=e=>e<.5?EH(2*e)/2:(DH(2*(e-.5))+1)/2,kH=e=>e*e*e*e*e,AH=e=>1-kH(1-e),jH=e=>e<.5?kH(2*e)/2:(AH(2*(e-.5))+1)/2,MH=e=>1-Math.cos(e*Math.PI/2),NH=e=>1-MH(1-e),PH=e=>e<.5?MH(2*e)/2:(NH(2*(e-.5))+1)/2,FH=e=>2**(10*(e-1)),IH=e=>1-FH(1-e),LH=e=>e<.5?FH(2*e)/2:(IH(2*(e-.5))+1)/2,RH=e=>-(Math.sqrt(1-e*e)-1),zH=e=>1-RH(1-e),BH=e=>e<.5?RH(2*e)/2:(zH(2*(e-.5))+1)/2;function VH(e){let t=2*(e-Math.sqrt((e-1)*e)),n=t/2/e;return r=>r<n?e*r*r:t*r-t+1}function HH(e,t){return(n,r)=>n<t?t*e(n/t,r):1-e((1-n)/(1-t),r)*(1-t)}var UH=HH(VH(1),1),WH=HH(VH(1),0),GH=HH(VH(1),.5),KH=HH(VH(2),1),qH=HH(VH(2),0),JH=HH(VH(2),.5),YH=HH(VH(3),1),XH=HH(VH(3),0),ZH=HH(VH(3),.5),QH=HH(VH(4),1),$H=HH(VH(4),0),eU=HH(VH(4),.5),tU={linear:yH,"in-quad":bH,"out-quad":xH,"in-out-quad":SH,"in-coast-quad":UH,"out-coast-quad":WH,"in-out-coast-quad":GH,"in-cubic":CH,"out-cubic":wH,"in-out-cubic":TH,"in-coast-cubic":KH,"out-coast-cubic":qH,"in-out-coast-cubic":JH,"in-quart":EH,"out-quart":DH,"in-out-quart":OH,"in-coast-quart":YH,"out-coast-quart":XH,"in-out-coast-quart":ZH,"in-quint":kH,"out-quint":AH,"in-out-quint":jH,"in-coast-quint":QH,"out-coast-quint":$H,"in-out-coast-quint":eU,"in-sine":MH,"out-sine":NH,"in-out-sine":PH,"in-expo":FH,"out-expo":IH,"in-out-expo":LH,"in-circ":RH,"out-circ":zH,"in-out-circ":BH,"quad-in":bH,"quad-out":xH,"quad-in-out":SH,"quad-in-coast":UH,"quad-out-coast":WH,"quad-in-out-coast":GH,"cubic-in":CH,"cubic-out":wH,"cubic-in-out":TH,"cubic-in-coast":KH,"cubic-out-coast":qH,"cubic-in-out-coast":JH,"quart-in":EH,"quart-out":DH,"quart-in-out":OH,"quart-in-coast":YH,"quart-out-coast":XH,"quart-in-out-coast":ZH,"quint-in":kH,"quint-out":AH,"quint-in-out":jH,"quint-in-coast":QH,"quint-out-coast":$H,"quint-in-out-coast":eU,"sine-in":MH,"sine-out":NH,"sine-in-out":PH,"expo-in":FH,"expo-out":IH,"expo-in-out":LH,"circ-in":RH,"circ-out":zH,"circ-in-out":BH,ease:e=>vH.ease(e),"ease-in":e=>vH.easeIn(e),"ease-out":e=>vH.easeOut(e),"ease-in-out":e=>vH.easeInOut(e)},nU=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}},rU={desiredScreenFlow:2,minDuration:Vi(500),maxDuration:Vi(8e3)},iU={...rU,maxDuration:Vi(4e3)},aU=class e{constructor(e){this._createCamera=e,this.compared=new nU,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:rU.desiredScreenFlow},this.source=e(),this.target=e()}clone(){let t=new e(this._createCamera);return t.copyFrom(this),t}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,t,n){this.source!==e&&this.source.copyFrom(e),this.target!==t&&this.target.copyFrom(t),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=n.desiredScreenFlow??rU.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){let t=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/t}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>nf()}get hasFov(){return Math.abs(this.compared.fov)>nf()}get hasRotate(){return this.compared.rotate>nf()}},oU=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},sU=class{constructor(){this.segments=[]}get time(){return this.segments.reduce((e,t)=>Ui(e+t.time),Ui(0))}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;let n=0,r=0,i=this.definition,a=this.segments.reduce((e,t)=>e||t.definition.hasZoom,!1);for(let o=0;o<this.segments.length;o++){let s=this.segments[o],c=s.definition;if(e<=s.time||o===this.segments.length-1){if(this.segmentInterpolateComponentsAt(s,s.time===0?0:e/s.time,t),i.hasPan&&!isNaN(t.pan)&&isFinite(i.compared.pan)?t.pan=(n+c.compared.pan*t.pan)/i.compared.pan:t.pan=1,i.hasRotate&&!isNaN(t.rotate)&&isFinite(i.compared.rotate)?t.rotate=(r+c.compared.rotate*t.rotate)/i.compared.rotate:t.rotate=1,a&&!isNaN(t.zoom)&&isFinite(c.compared.targetZoom)){let{sourceZoom:e,targetZoom:n}=c.compared,r=t.zoom*(n-e)+e,i=this.segments[0].definition.compared.sourceZoom,a=this.segments[this.segments.length-1].definition.compared.targetZoom,o=Math.abs(n-i)>Math.abs(e-i)?n:e;t.zoomOffset=o-a,t.zoom=(r-i)/(o-i)}else t.zoom=1;return t}e-=s.time,n+=c.compared.pan,r+=c.compared.rotate}}segmentInterpolateComponentsAt(e,t,n){e.interpolateComponentsAt(t,n)}},cU=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){let e=this.definition,t=e.compared,n=t.sourceZoom,r=t.targetZoom;this._zoomSign=n>r?1:-1,this._panPixelsAtSource=t.pan*e.source.pixelsPerPanAtZoom(n);let i=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=t.rotate*i}_updatePixelFlow(){let e=this.definition.compared.sourceZoom,t=this.definition.compared.targetZoom,{hasZoom:n,hasPan:r,hasRotate:i}=this.definition,a=0,o=0;n&&(r&&(a=(t/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),i&&(o=this._zoomSign*(Math.log(e/t)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;let s=this.definition.desiredPixelFlow;if(n&&r&&i){let e=a+o+a*o;this._zoomPixelFlow=a*o/e*s,this._panPixelFlow=o/e*s,this._rotatePixelFlow=a/e*s}else if(n&&r){let e=1+a;this._zoomPixelFlow=a/e*s,this._panPixelFlow=1/e*s}else if(n&&i){let e=1+o;this._zoomPixelFlow=o/e*s,this._rotatePixelFlow=1/e*s}else if(r&&i){let e=this._panPixelsAtSource/this._rotatePixels,t=1+e;this._panPixelFlow=e/t*s,this._rotatePixelFlow=1/t*s}else r?this._panPixelFlow=s:n?this._zoomPixelFlow=s:i&&(this._rotatePixelFlow=s);if(this._time=Ui(Math.max(this.rotateTime,this.zoomTime,this.panTime)),this.fovTime>this._time){let e=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=e,this._panPixelFlow/=e,this._rotatePixelFlow/=e}}get rotateTime(){return this.definition.hasRotate?Ui(this._rotatePixels/this._rotatePixelFlow):Ui(0)}get zoomTime(){return this.definition.hasZoom?Ui(this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow):Ui(0)}get fovTime(){return this.definition.hasFov?Ui(Math.abs(this.definition.compared.fov)/lU):Ui(0)}get panTime(){if(!this.definition.hasPan)return Ui(0);if(this.definition.hasZoom){let e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,t=e*this._panPixelsAtSource;return Ui(Math.log(t*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow))}return Ui(this._panPixelsAtSource/this._panPixelFlow)}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){let t=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom;return(t*(t/n)**-e-t)/(n-t)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){let{segmentStart:t,segmentEnd:n}=this.definition;return t+e*(n-t)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){let t=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(t*e*this._time)-1))/(t*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),t.zoom=this._interpolateComponentsZoom(e),t.pan=this._interpolateComponentsPan(e),t.rotate=this._interpolateComponentsRotate(e),t.zoomOffset=0,t.fov=this._interpolateComponentsFov(e)}},lU=Qa(45);function uU(e,t,n){let r=t-e.compared.sourceZoom,i=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(n.ascensionFactor*Math.LN2*e.compared.pan+i)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*i)}function dU(e,t,n){let r=1/t,i=Math.log(e.compared.sourceZoom*r),a=1/e.desiredPixelFlow,o=1/Math.LN2,s=t-e.compared.sourceZoom,c=1/s,l=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(s))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*a*o*c*l-e.halfWindowSize*i*a*o*c+e.halfWindowSize*i*a*o*l/(s*s)}function fU(e,t,n){let r=t-e.compared.sourceZoom,i=1/r,a=1/t,o=Math.log(e.compared.sourceZoom*a),s=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*a*s+2*i*o+2*a-2*o*s/(r*r)-s/(t*t))/(e.desiredPixelFlow*Math.LN2)}function pU(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function mU(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function hU(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function gU(e,t,n){return-e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function _U(e,t,n){return e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function vU(e,t,n){return-2*e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function yU(e,t,n){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function bU(e,t,n){let r=Math.log(t/e.compared.targetZoom),i=1/e.desiredPixelFlow,a=1/Math.LN2,o=-t+e.compared.targetZoom,s=1/o,c=(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*i*a*s+e.halfWindowSize*r*i*a*c/(o*o)+e.halfWindowSize*i*a*s*c/t}function xU(e,t,n){let r=t-e.compared.targetZoom,i=1/r,a=1/t,o=Math.log(t/e.compared.targetZoom),s=(e.halfWindowPanAtZoom(t)+n.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*a*s-2*i*o+2*a+2*o*s/(r*r)-s/(t*t))/(e.desiredPixelFlow*Math.LN2)}function SU(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function CU(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function wU(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function TU(e){let t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));let n=Math.LN2*e.compared.pan,r=t,i=e.halfWindowPanAtZoom(r),a=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*i);return e.compared.sourceZoom<=e.compared.targetZoom?a*(n-i):a*(n+i)}function EU(e,t){let n=DU(e,t),r={ascensionFactor:t.ascensionFactor==null?.5:t.ascensionFactor,descensionFactor:t.descensionFactor==null?.5:t.descensionFactor},i=r.ascensionFactor===0,a=r.descensionFactor===0,o=i?pU:uU,s=i?mU:dU,c=i?hU:fU,l=a?SU:yU,u=a?CU:bU,d=a?wU:xU,f=t=>o(e,t,r)+gU(e,t,r)+l(e,t,r),p=t=>s(e,t,r)+_U(e,t,r)+u(e,t,r),m=t=>c(e,t,r)+vU(e,t,r)+d(e,t,r),h=f(n),g=TU(e),_,v=t.maximumIterations||20,y=t.maximumDistance==null?1/0:t.maximumDistance;for(_=0;_<v;_++){let r=t.desiredSlope??1e-6,i=p(n);Math.abs(i)>r&&(i+=r);let a=i/m(n);if(isNaN(a)||n>=y&&a<0){if(!isFinite(y))return null;n=y,h=f(n);break}if(n-=a,n<=e.compared.sourceZoom||n<=e.compared.targetZoom)return null;let o=f(n);if(Math.abs(o-h)/h<=.005)break;h=o}return isNaN(h)||h>g*.7||n<=e.compared.sourceZoom||n<=e.compared.targetZoom?null:n}function DU(e,t){let n=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<n?t.maximumDistance==null?1.5*n:n+(t.maximumDistance-n)/2:t.maximumDistance?Math.min(t.maximumDistance,r):r}var OU=class extends sU{constructor(e,t){super(),this._preallocSegments=[new cU,new cU,new cU],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,t)}update(e,t){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();let n=t?.apex?EU(e,t.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,n?this._updateWithApex(n,t?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,t,n){e.interpolateComponentsAt(t,n),e===this._ascensionSegment?n.zoom=xH(n.zoom):e===this._descensionSegment&&(n.zoom=bH(n.zoom))}_updateWithApex(e,t){let[n,r,i]=this._preallocSegments,a=t?.ascensionFactor??.5,o=Math.min(1-a,t?.ascensionFactor!=null&&t.descensionFactor!=null?t.descensionFactor:.5),s=1-a-o;n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentEnd=a,n.update(),this._ascensionSegment=n,this.segments.push(n),s>0&&(r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.copyFrom(this.definition),r.definition.compared.sourceZoom=e,r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*s,r.definition.compared.rotate=this.definition.compared.rotate*s,r.definition.segmentStart=n.definition.segmentEnd,r.definition.segmentEnd=n.definition.segmentEnd+s,r.update(),this.segments.push(r)),i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.sourceZoom=e,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentStart=a+s,i.update(),this._descensionSegment=i,this.segments.push(i)}_updateWithoutApex(){let[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}},kU=new oU,AU=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=Vi(0),this._easing=GH,this.definition=new aU(e),this.path=new OU}update(e,t,n){this.definition.update(e,t,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings(Hi(isFinite(this.path.time)?this.path.time:Ui(0)),n),this._easing=n.easing??(this._time>=1e3?GH:IH)}cameraAt(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);let n=this.path.interpolateComponentsAt(e,kU);t.interpolate(this.definition.source,this.definition.target,n)}_normalizedEasing(e){let t=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(n-t)}_applyTimeSettings(e,t){let n=t.speedFactor==null?1:t.speedFactor,r=t.minDuration??rU.minDuration/n,i=t.maxDuration??rU.maxDuration/n;return e=t.duration==null?Vi(Math.min(Math.max(e/n,r),i)):Vi(t.duration)}},jU=2e3,MU=64,NU=class{constructor(e){this._view=e,this._animation=new AU(()=>new gH(this._view)),this._current=new gH(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,t,n={}){UR(this._current.viewpoint,e),UR(this._source.viewpoint,e),UR(this._target.viewpoint,t),this._animation.update(this._source,this._target,n)}applyRatio(e,t){this._animation.cameraAt(t,this._current),UR(e,this._current.viewpoint)}},PU=class extends F{constructor(e){super(e),this._animation=null,this._destinationViewState=new Dz,this.updateFunction=null,this.easing=tU.ease,this.viewpoint=new Sh({targetGeometry:new U,scale:0,rotation:0}),this._updateTask=$i({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new NU(e.view)}destroy(){this._updateTask=Br(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,t,n){this.stop();let r=this.viewpoint;UR(r,t);let i=e.target;this._transition.update(this.viewpoint,i,{apex:{maximumDistance:Math.min(Math.min(t.scale,i.scale)*MU,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:n?.duration,maxDuration:n?.animationMode===`auto`?Vi(1/0):n?.maxDuration??iU.maxDuration,speedFactor:n?.speedFactor,easing:(typeof n?.easing==`string`?tU[n.easing]:n?.easing)||this.easing}),n?.animationMode===`auto`&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=i,FU(this._transition.animation,n,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,i,{duration:Vi(0)}));let a=()=>{this.animation===e&&this._updateTask&&(e.state===`finished`&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;let n=new lB({target:e.clone()}),r=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){let t=this.animation;if(t&&t.state!==lB.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{let e=performance.now()-this._startTime,t=this._transition.duration,n=t>0?e/t:1,r=n>=1;this._transition.applyRatio(this.viewpoint,n),r&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function FU(e,t,n,r){if(t?.duration!=null)return!0;let{time:i,isLinear:a}=e,o=t?.speedFactor||1;if(i>(t?.maxDuration??iU.maxDuration/o))return!1;if(a){let e=1.5,t=JL(),a=Zw(...r.toScreen(t,...n.center)),s=Zw(...n.toScreen(t,...r.center)),c=s!=null&&s.x>-1*n.size[0]&&s.x<(e+.5)*n.size[0]&&s.y>-1*n.size[1]&&s.y<(e+.5)*n.size[1],l=a!=null&&a.x>-1*r.size[0]&&a.x<(e+.5)*r.size[0]&&a.y>-1*r.size[1]&&a.y<(e+.5)*r.size[1];if(i>jU/o&&!c&&!l)return!1}return!0}e([N()],PU.prototype,`easing`,void 0),e([N()],PU.prototype,`view`,void 0),e([N()],PU.prototype,`viewpoint`,void 0),PU=e([P(`esri.views.2d.AnimationManager`)],PU);var IU=PU;function LU(){return Promise.all([R(()=>import(`./webglDeps-BWjFb4yh.js`),__vite__mapDeps([273,5,138,274,275,276,277,33])),R(()=>import(`./mapViewDeps-CiOnhExb.js`),__vite__mapDeps([278,140,205,142,143,144,145,13,5,146,147,148,149,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,119,281,152,213,214,282,165,163,283,83,164,284,274,9,10,155,14,179,180,161,151,127,285,286,287,288,167,289,290,207,291,292,293,294,56,276,101,295,168,296,297,169,298,299,300]))])}var RU=()=>LU().then(()=>R(()=>import(`./TileLayerView2D-C4L21-H4.js`),__vite__mapDeps([301,205,142,143,144,145,13,5,146,147,148,149,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,119,152,282,165,163,283,83,164,284,274,9,10,155,14,179,180,302,161,151,303,304,234,305,306,307,286,287,167,289,290,207,291,292,293,308,309,310,296,297,169,311,56,312,313,314,315,101]))),zU=()=>LU().then(()=>R(()=>import(`./FeatureLayerView2D-D4jjlQc9.js`),__vite__mapDeps([316,317,318,143,142,144,145,13,5,146,147,148,149,279,205,118,280,11,12,209,162,34,138,275,277,33,137,282,1,165,163,283,83,164,284,274,156,319,184,27,166,141,320,302,321,304,234,130,128,129,119,131,322,10,18,288,292,293,169,312,313,307,315,323]))),BU={"base-dynamic":()=>LU().then(()=>R(()=>import(`./BaseDynamicLayerView2D-llBzsmFA.js`),__vite__mapDeps([324,205,118,279,5,280,11,12,13,209,162,148,34,138,275,277,33,137,304,234,308,283,83,309,325,326,312,313,274]))),"base-tile":RU,"bing-maps":RU,catalog:()=>LU().then(()=>R(()=>import(`./CatalogLayerView2D-CRvxk8PM.js`),__vite__mapDeps([327,280,304,234,312]))),"catalog-dynamic-group":()=>LU().then(()=>R(()=>import(`./CatalogDynamicGroupLayerView2D-DYYpZrXc.js`),__vite__mapDeps([328,280,304,234,312]))),"catalog-footprint":()=>LU().then(()=>R(()=>import(`./CatalogFootprintLayerView2D-HYQThAnm.js`),__vite__mapDeps([329,317,318,143,142,144,145,13,5,146,147,148,149,279,205,118,280,11,12,209,162,34,138,275,277,33,137,282,1,165,163,283,83,164,284,274,156,319,184,27,166,141,320,302,321,304,234,130,128,129,119,131,322,10,18,288,292,293,169,312,313,307,315,323,330]))),csv:zU,"geo-rss":()=>LU().then(()=>R(()=>import(`./GeoRSSLayerView2D-DytFMiSX.js`),__vite__mapDeps([331,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,179,180,161,151,304,234,286,287,292,293,296,297,169,300,312]))),feature:zU,geojson:zU,parquet:zU,graphics:()=>LU().then(()=>R(()=>import(`./GraphicsLayerView2D-COxLOSpl.js`),__vite__mapDeps([332,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,179,180,161,151,304,234,286,287,292,293,296,297,169,300,312,315]))),group:()=>LU().then(()=>R(()=>import(`./GroupLayerView2D-C-AfU19Q.js`),__vite__mapDeps([333,280,304,234,312]))),imagery:()=>LU().then(()=>R(()=>import(`./ImageryLayerView2D-CsHxUh8S.js`),__vite__mapDeps([334,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,179,180,182,194,192,195,161,151,269,321,304,234,323,286,287,292,293,308,309,325,335,173,296,297,169,311,326,174,312,313,314,307,315]))),"imagery-tile":()=>LU().then(()=>R(()=>import(`./ImageryTileLayerView2D--RGFPT3o.js`),__vite__mapDeps([336,205,118,279,5,280,11,12,13,209,162,148,34,138,275,277,33,137,337,195,338,339,182,194,192,269,321,304,234,323,335,173,293,283,83,309,164,284,298,174,312,313,314,307,315,274,340]))),kml:()=>LU().then(()=>R(()=>import(`./KMLLayerView2D-DwS_y_tW.js`),__vite__mapDeps([341,140,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,213,214,282,165,163,283,83,164,284,274,9,10,155,14,179,180,195,342,161,151,304,234,286,287,292,293,308,309,325,294,56,276,291,101,296,297,169,300,312,340]))),"knowledge-graph":()=>LU().then(()=>R(()=>import(`./KnowledgeGraphLayerView2D-D_7_RVU0.js`),__vite__mapDeps([343,280,304,234,312]))),"link-chart":()=>LU().then(()=>R(()=>import(`./KnowledgeGraphLayerView2D-D_7_RVU0.js`),__vite__mapDeps([343,280,304,234,312]))),"knowledge-graph-sublayer":zU,"map-image":()=>LU().then(()=>R(()=>import(`./MapImageLayerView2D-C9KBsHpP.js`),__vite__mapDeps([344,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,179,180,345,302,303,161,151,321,304,234,305,306,307,323,286,287,292,293,308,309,325,296,297,169,311,326,312,313,314,315]))),"map-notes":()=>LU().then(()=>R(()=>import(`./MapNotesLayerView2D-BgnojtMe.js`),__vite__mapDeps([346,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,179,180,161,151,304,234,286,287,292,293,296,297,169,300,312,315]))),media:()=>LU().then(()=>R(()=>import(`./MediaLayerView2D-DUO9fT1h.js`),__vite__mapDeps([347,205,142,143,144,145,13,5,146,147,148,149,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,119,348,155,152,282,165,163,283,83,164,284,274,9,10,14,179,180,161,151,304,234,286,287,167,289,290,207,291,349,298,295,297,169,56,312,101]))),"ogc-feature":()=>LU().then(()=>R(()=>import(`./OGCFeatureLayerView2D-DwpYA7_V.js`),__vite__mapDeps([350,317,318,143,142,144,145,13,5,146,147,148,149,279,205,118,280,11,12,209,162,34,138,275,277,33,137,282,1,165,163,283,83,164,284,274,156,319,184,27,166,141,320,302,321,304,234,130,128,129,119,131,322,10,18,288,292,293,169,312,313,307,315,323,330]))),"open-street-map":RU,"oriented-imagery":zU,route:()=>LU().then(()=>R(()=>import(`./RouteLayerView2D-DMDzLfa9.js`),__vite__mapDeps([351,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,179,180,161,151,304,234,352,353,354,286,287,292,293,296,297,169,300,312,315]))),stream:()=>LU().then(()=>R(()=>import(`./StreamLayerView2D-DWY2e1V7.js`),__vite__mapDeps([355,317,318,143,142,144,145,13,5,146,147,148,149,279,205,118,280,11,12,209,162,34,138,275,277,33,137,282,1,165,163,283,83,164,284,274,156,319,184,27,166,141,320,302,321,304,234,130,128,129,119,131,322,10,18,288,292,293,169,312,313,307,315,323,330]))),"subtype-group":()=>LU().then(()=>R(()=>import(`./SubtypeGroupLayerView2D-DKxMB8q1.js`),__vite__mapDeps([356,317,318,143,142,144,145,13,5,146,147,148,149,279,205,118,280,11,12,209,162,34,138,275,277,33,137,282,1,165,163,283,83,164,284,274,156,319,184,27,166,141,320,302,321,304,234,130,128,129,119,131,322,10,18,288,292,293,169,312,313,307,315,323]))),tile:RU,"vector-tile":()=>LU().then(()=>R(()=>import(`./VectorTileLayerView2D-bHPPmG7U.js`),__vite__mapDeps([357,205,191,144,118,279,5,280,11,12,13,209,162,148,34,138,275,277,33,137,4,119,146,304,234,206,207,208,290,147,293,312,313]))),video:()=>LU().then(()=>R(()=>import(`./VideoLayerView2D-w1iWKqYt.js`),__vite__mapDeps([358,205,142,143,144,145,13,5,146,147,148,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,282,165,163,283,83,164,284,274,9,10,155,14,359,179,180,360,361,227,226,161,151,304,234,286,287,292,293,349,298,296,297,169,300,312]))),wcs:()=>LU().then(()=>R(()=>import(`./ImageryTileLayerView2D--RGFPT3o.js`),__vite__mapDeps([336,205,118,279,5,280,11,12,13,209,162,148,34,138,275,277,33,137,337,195,338,339,182,194,192,269,321,304,234,323,335,173,293,283,83,309,164,284,298,174,312,313,314,307,315,274,340]))),"web-tile":RU,wfs:zU,wms:()=>LU().then(()=>R(()=>import(`./WMSLayerView2D-CmtdBR78.js`),__vite__mapDeps([362,205,118,279,5,280,11,12,13,209,162,148,34,138,275,277,33,137,363,321,304,234,323,308,283,83,309,325,326,312,313,274]))),wmts:()=>LU().then(()=>R(()=>import(`./WMTSLayerView2D-DDplpvTq.js`),__vite__mapDeps([364,205,118,279,5,280,11,12,13,209,162,148,34,138,275,277,33,137,304,234,308,283,83,309,310,293,312,313,274]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function VU(e){let t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(`.`)+1):`Unknown`,n=t.replaceAll(/([a-z])([A-Z])/g,`$1-$2`).toLowerCase();return new D(`${n}:view-not-supported`,`${t} is not supported in 2D`)}var HU={hasLayerViewModule:e=>BU[e.type]!=null,importLayerView:e=>{let t=BU[e.type];if(t==null)throw VU(e);return t(e)}},UU=class e{static{this.pool=new Ur(()=>new e(``),null,null,25,50)}static getId(e,t,n,r){return typeof e==`object`?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${t}/${n}/${r}`}constructor(e,t,n,r){this.set(e,t,n,r)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){let e=4095&this.row,t=4095&this.col,n=63&this.level;return(3&this.world)<<30|t<<22|e<<8|n}acquire(e,t,n,r){this.set(e,t,n,r)}contains(e){let t=e.level-this.level;return t>=0&&this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}containsChild(e){let t=e.level-this.level;return t>0&&this.row===e.row>>t&&this.col===e.col>>t&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new e(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,t,n,r){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e==`object`)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e==`string`){let[t,n,r,i]=e.split(`/`);this.level=parseFloat(t),this.row=parseFloat(n),this.col=parseFloat(r),this.world=parseFloat(i)}else this.level=+e,this.row=+t,this.col=+n,this.world=+r||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new e(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,t,n){let r=this.clone();return r.col+=e,r.row+=t,n.normalizeKey(r),r}getChildKeys(){let t=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new e(t,n,r,i),new e(t,n,r+1,i),new e(t,n+1,r,i),new e(t,n+1,r+1,i)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};function WU(e,t){return[e,t]}function GU(e,t,n){return e[0]=t,e[1]=n,e}function KU(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}var qU=new UU(`0/0/0/0`),JU=class e{static create(t,n,r=null){let i=Fl(t.spatialReference),a=n.origin||WU(t.origin.x,t.origin.y),o=WU(t.size[0]*n.resolution,t.size[1]*n.resolution),s=WU(-1/0,-1/0),c=WU(1/0,1/0),l=WU(1/0,1/0);r!=null&&(GU(s,Math.max(0,Math.floor((r.xmin-a[0])/o[0])),Math.max(0,Math.floor((a[1]-r.ymax)/o[1]))),GU(c,Math.max(0,Math.floor((r.xmax-a[0])/o[0])),Math.max(0,Math.floor((a[1]-r.ymin)/o[1]))),GU(l,c[0]-s[0]+1,c[1]-s[1]+1));let{cols:u,rows:d}=n,f,p,m,h;return!r&&u&&d&&(GU(s,u[0],d[0]),GU(c,u[1],d[1]),GU(l,u[1]-u[0]+1,d[1]-d[0]+1)),t.isWrappable?(f=WU(Math.ceil(Math.round((i.valid[1]-i.valid[0])/n.resolution)/t.size[0]),l[1]),p=!0,m=i.origin,h=i.valid):(f=l,p=!1),new e(n.level,n.resolution,n.scale,a,s,c,l,o,f,p,m,h)}constructor(e,t,n,r,i,a,o,s,c,l,u,d){this.level=e,this.resolution=t,this.scale=n,this.origin=r,this.first=i,this.last=a,this.size=o,this.norm=s,this.worldSize=c,this.wrap=l,this._spatialReferenceOrigin=u,this._spatialReferenceValid=d}normalizeCol(e){if(!this.wrap)return e;let t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}normalizeKey(e){if(!this.wrap)return;let t=this.worldSize[0],n=e.col;n<0?(e.col=n+t,--e.world):n>=t&&(e.col=n-t,e.world+=1)}denormalizeCol(e,t){return this.wrap?this.worldSize[0]*t+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){let t=this.origin[0]+e*this.norm[0],n=this._spatialReferenceOrigin,r=this._spatialReferenceValid;return this.wrap&&n&&r?t===n[0]?r[0]:this.origin[0]===n[0]&&e===this.worldSize[0]?r[1]:t:t}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,t,n=!1){qU.set(t);let r=n?qU.col:this.denormalizeCol(qU.col,qU.world),i=qU.row;return KU(e,this.getXForColumn(r),this.getYForRow(i+1),this.getXForColumn(r+1),this.getYForRow(i)),e}getTileCoords(e,t,n=!1){qU.set(t);let r=n?qU.col:this.denormalizeCol(qU.col,qU.world);return Array.isArray(e)?GU(e,this.getXForColumn(r),this.getYForRow(qU.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(qU.row)),e}},YU=class e{constructor(){this.spans=[]}static{this.pool=new Ur(()=>new e)}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){let e=this.lodInfo;for(let{row:t,colFrom:n,colTo:r}of this.spans)for(let i=n;i<=r;i++){let n=e.getWorldForColumn(i);yield new UU(e.level,t,e.normalizeCol(i),n)}}forEach(e,t){let{spans:n,lodInfo:r}=this,{level:i}=r;if(n.length!==0)for(let{row:a,colFrom:o,colTo:s}of n)for(let n=o;n<=s;n++)e.call(t,i,a,r.normalizeCol(n),r.getWorldForColumn(n))}},XU=class{constructor(e,t,n){this.row=e,this.colFrom=t,this.colTo=n}},ZU=new UU(`0/0/0/0`),QU=class e{static create(t,n){t[1]>n[1]&&([t,n]=[n,t]);let[r,i]=t,[a,o]=n,s=a-r,c=o-i,l=c===0?0:s/c,u=(Math.ceil(i)-i)*l,d=(Math.floor(i)-i)*l;return new e(r,Math.floor(i),Math.ceil(o),l,s<0?u:d,s<0?d:u,s<0?a:r,s<0?r:a)}constructor(e,t,n,r,i,a,o,s){this.x=e,this.ymin=t,this.ymax=n,this.invM=r,this.leftAdjust=i,this.rightAdjust=a,this.leftBound=o,this.rightBound=s}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}},$U=[[0,0],[0,0],[0,0],[0,0]],eW=1e-6,tW=class{constructor(e,t=null,n=e.lods[0].level,r=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._infoByScale={},this._infoByLevel={};let i=e.lods.filter(e=>e.level>=n&&e.level<=r);this.minScale=i[0].scale,this.maxScale=i[i.length-1].scale;let a=this._lodInfos=i.map(n=>JU.create(e,n,t));i.forEach((e,t)=>{this._infoByLevel[e.level]=a[t],this._infoByScale[e.scale]=a[t],this.scales[t]=e.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e==`number`?e:e.level]}getTileBounds(e,t,n=!1){ZU.set(t);let r=this._infoByLevel[ZU.level];return r?r.getTileBounds(e,ZU,n):e}getTileCoords(e,t,n=!1){ZU.set(t);let r=this._infoByLevel[ZU.level];return r?r.getTileCoords(e,ZU,n):e}getTileCoverage(e,t=192,n=!0,r=`closest`){if(!n&&(e.scale>this.minScale||e.scale<this.maxScale))return null;let i=r===`closest`?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=YU.pool.acquire(i),o=this._wrap,s,c,l,u=1/0,d=-1/0,f=a.spans;$U[0][0]=$U[0][1]=$U[1][1]=$U[3][0]=-t,$U[1][0]=$U[2][0]=e.size[0]+t,$U[2][1]=$U[3][1]=e.size[1]+t;for(let t of $U)e.toMap(t,t),t[0]=i.getColumnForX(t[0]),t[1]=i.getRowForY(t[1]);let p=[],m=3;for(let e=0;e<4;e++){if($U[e][1]===$U[m][1]){m=e;continue}let t=QU.create($U[e],$U[m]);u=Math.min(t.ymin,u),d=Math.max(t.ymax,d),p[t.ymin]===void 0&&(p[t.ymin]=[]),p[t.ymin].push(t),m=e}if(u==null||d==null||d-u>100)return null;let h=[];for(s=u;s<d;){p[s]!=null&&(h=h.concat(p[s])),c=1/0,l=-1/0;for(let e=h.length-1;e>=0;e--){let t=h[e];c=Math.min(c,t.getLeftCol()),l=Math.max(l,t.getRightCol())}if(c=Math.floor(c),l=Math.floor(l),s>=i.first[1]&&s<=i.last[1])if(o)if(i.size[0]<i.worldSize[0]){let e=Math.floor(l/i.worldSize[0]);for(let t=Math.floor(c/i.worldSize[0]);t<=e;t++)f.push(new XU(s,Math.max(i.getFirstColumnForWorld(t),c),Math.min(i.getLastColumnForWorld(t),l)))}else f.push(new XU(s,c,l));else c>i.last[0]||l<i.first[0]||(c=Math.max(c,i.first[0]),l=Math.min(l,i.last[0]),f.push(new XU(s,c,l)));s+=1;for(let e=h.length-1;e>=0;e--){let t=h[e];t.ymax>=s?t.incrRow():h.splice(e,1)}}return a}getTileParentId(e){ZU.set(e);let t=this._infoByLevel[ZU.level],n=this._lodInfos.indexOf(t)-1;return n<0?null:(this._getTileIdAtLOD(ZU,this._lodInfos[n],ZU),ZU.id)}getTileResolution(e){let t=this._infoByLevel[typeof e==`object`?e.level:e];return t?t.resolution:-1}getTileScale(e){let t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){ZU.set(t);let n=this._infoByLevel[ZU.level],r=e.lodInfo;if(r.resolution>n.resolution){this._getTileIdAtLOD(ZU,r,ZU);let t=r.denormalizeCol(ZU.col,ZU.world);for(let n of e.spans)if(n.row===ZU.row&&n.colFrom<=t&&n.colTo>=t)return!0}if(r.resolution<n.resolution){let[t,i,a,o]=e.spans.reduce((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e),[1/0,-1/0,1/0,-1/0]),s=n.denormalizeCol(ZU.col,ZU.world),c=r.getColumnForX(n.getXForColumn(s)),l=r.getRowForY(n.getYForRow(ZU.row)),u=r.getColumnForX(n.getXForColumn(s+1))-1,d=r.getRowForY(n.getYForRow(ZU.row+1))-1;return!(c>o||u<a||l>i||d<t)}let i=r.denormalizeCol(ZU.col,ZU.world);return e.spans.some(e=>e.row===ZU.row&&e.colFrom<=i&&e.colTo>=i)}normalizeBounds(e,t,n){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){let t=Fl(this.tileInfo.spatialReference),r=-n*(t.valid[1]-t.valid[0]);e[0]+=r,e[2]+=r}return e}getSmallestInfoForScale(e){let t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let n=1;n<t.length-1;n++)if(e>t[n]+eW)return this._infoByScale[t[n-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){let t=this.scales;return this._infoByScale[e]||(e=t.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t,t[0])),this._infoByScale[e]}scaleToLevel(e){let t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let n=t.length-1;n>=0;n--)if(e<t[n])return n===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[n]].level+(t[n]-e)/(t[n]-t[n+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,t,n){let r=this._infoByLevel[n.level];return e.set(n),t.resolution<r.resolution?null:(t.resolution===r.resolution||(e.level=t.level,e.col=Math.floor(n.col*r.resolution/t.resolution+.01),e.row=Math.floor(n.row*r.resolution/t.resolution+.01)),e)}},nW=class{constructor(e,t){this.item=e,this.controller=t,this.promise=null}},rW=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new KF,this._controllers=new KF,this._processingItems=new KF,this._pausedSignal=rT(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Zh(e.peeker),this.process=e.process;let t=e.scheduler;e.priority&&t&&(this._task=t.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=Br(this._schedule),this._task=Br(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){let t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();let e=[];this._controllers.forEach(t=>e.push(t)),this._controllers.clear(),e.forEach(e=>e.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((t,n)=>e(n))}get(e){let t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,t){let n=this.get(e);if(n)return n;let r=new AbortController,i=null;t&&(i=Oi(t,()=>r.abort()));let a=()=>{let t=this._processingItems.get(e);t&&t.controller.abort(),o(),c.reject(Si())},o=()=>{s.remove(),i?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},s=ki(r.signal,a),c=zi();return this._deferreds.set(e,c),this._controllers.set(e,r),c.promise.then(o,o),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){let e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){let e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Si()),this._removeItem(e)),e}reset(){let e=Array.from(this._processingItems.values());this._processingItems.clear();for(let t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){let e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Qi(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&=(this._schedule.remove(),null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let t,n=new AbortController,r=new nW(e,n);this._processingItems.set(e,r);try{t=this.process(e,n.signal)}catch(e){this._processError(r,e)}Ii(t)?(r.promise=t,t.then(e=>this._processResult(r,e),e=>this._processError(r,e))):this._processResult(r,t)}get test(){}},iW=[0,0],aW=class extends F{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){let{concurrency:e,process:t,scheduler:n,priority:r}=this;this._queue=new rW({concurrency:e,scheduler:n,priority:r,process:(e,n)=>{let r=this._keyToItem.get(e);return t(r,{signal:n})},peeker:e=>this._peek(e)})}destroy(){this.clear(),this._queue=zr(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){let t=typeof e==`string`?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e==`string`?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){let t=e.key.id;if(this._queue.has(t))return this._queue.get(t);let n=this._queue.push(t),r=this.tileInfoView.getTileScale(e.key),i=yt(this._tilesByScale,r,()=>new Set),a=()=>{i.delete(e.key),i.size===0&&this._tilesByScale.delete(r),this._keyToItem.delete(t)};return i.add(e.key),this._keyToItem.set(t,e),n.then(a,a),n}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;let t=new Set;for(let n of e)t.add(this._keyToItem.get(n).key);let n=this.state.scale,r,i=1/0;for(let[e,a]of this._tilesByScale)if(la(a,e=>t.has(e))){let t=Math.abs(e-n);t<i&&(r=a,i=t)}return this._getClosestTileKey(r,e).id}_getClosestTileKey(e,t){let n=this.tileInfoView,r=this.state.center,i,a=1/0;for(let o of e)if(t.has(o.id)){n.getTileCoords(iW,o);let e=vf(iW,r);e<a&&(a=e,i=o)}return i}};e([N({constructOnly:!0})],aW.prototype,`concurrency`,void 0),e([N({constructOnly:!0})],aW.prototype,`priority`,void 0),e([N({constructOnly:!0})],aW.prototype,`process`,void 0),e([N({constructOnly:!0})],aW.prototype,`scheduler`,void 0),e([N()],aW.prototype,`state`,void 0),e([N({constructOnly:!0})],aW.prototype,`tileInfoView`,void 0),aW=e([P(`esri.views.2d.tiling.TileQueue`)],aW);var oW=aW,sW=class{constructor(e,t,n){this.maxSize=e,this._tileInfoView=t,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){let t=this._tilePerId.get(e);if(!t)return;let n=t.key.level,r=this._tileKeysPerLevel[n];cW(this._tilePerId,e);for(let t=0;t<r.length;t++)if(r[t].id===e){r.splice(t,1);break}return t.visible=!0,t}add(e){e.visible=!1;let t=e.key,n=t.id;if(this._tilePerId.has(n))return;this._tilePerId.set(n,e);let r=t.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(t)}prune(e,t,n){let r=this._tilePerId.size;if(r<=this.maxSize)return;let i=this._tileKeysPerLevel.length-1;for(;r>this.maxSize&&i>=0;)i!==e&&(r=this._pruneAroundCenterTile(r,t,n,i)),i--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,t,n,e))}_pruneAroundCenterTile(e,t,n,r){let i=this._tileKeysPerLevel[r];if(!i||i.length===0)return e;let{size:a,origin:o}=this._tileInfoView.tileInfo,s=n*a[0],c=n*a[1],l=[0,0],u=[0,0];for(i.sort((e,n)=>(l[0]=o.x+s*(e.col+.5),l[1]=o.y-c*(e.row+.5),u[0]=o.x+s*(n.col+.5),u[1]=o.y-c*(n.row+.5),yf(l,t)-yf(u,t)));i.length>0;){let t=i.pop();if(this._removeTile(t.id),--e===this.maxSize)break}return e}_removeTile(e){let t=this._tilePerId.get(e);this._removedFunc&&t&&this._removedFunc(t),cW(this._tilePerId,e)}};function cW(e,t){e.delete(t)}var lW=new UU(0,0,0,0),uW=new Map,dW=[],fW=[],pW=class{constructor(e){this._previousScale=1/0,this.cachePolicy=`keep`,this.coveragePolicy=`closest`,this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new sW(e.cacheSize,this.tileInfoView,e=>{this.releaseTile(e)}))}destroy(){this.tileIndex.clear()}update(e){let{resampling:t,tileIndex:n}=this,{scale:r,center:i,resolution:a}=e.state,{minScale:o,maxScale:s}=this.tileInfoView,c=!e.stationary&&r>this._previousScale;if(this._previousScale=r,!t&&(r>o||r<s))return this.tiles.length=0,void this.clear();let l=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!l)return this.tiles.length=0,void this.clear();let{spans:u,lodInfo:d}=l,{level:f}=d;this.tiles.length=0,n.forEach(e=>e.visible=!0);let p=0,m=0;if(u.length>0)for(let{row:e,colFrom:t,colTo:r}of u)for(let i=t;i<=r;i++){p++;let t=lW.set(f,e,d.normalizeCol(i),d.getWorldForColumn(i)).id,r=n.get(t);if(r)r.isReady?(uW.set(t,r),m++):c||this._addParentTile(t,uW);else{if(this._tileCache?.has(t)){if(r=this._tileCache.pop(t),this.tileIndex.set(t,r),r.isReady){uW.set(t,r),m++;continue}}else r=this.acquireTile(lW),this.tileIndex.set(t,r);c||this._addParentTile(t,uW)}}let h=m===p;for(let[e,t]of n){if(uW.has(e))continue;lW.set(e);let n=this.tileInfoView.intersects(l,lW),r=this.cachePolicy===`purge`?lW.level!==f:lW.level>f;!n||!c&&h?!r&&n||dW.push(t):t.isReady?r&&this.cachePolicy===`purge`&&this._hasReadyAncestor(lW,f)?dW.push(t):fW.push(t):r&&dW.push(t)}for(let e of fW)e.isReady&&uW.set(e.key.id,e);for(let e of dW)this._tileCache?this._tileCache.add(e):this.releaseTile(e),n.delete(e.key.id);for(let e of uW.values())this.tiles.push(e);for(let e of n.values())uW.has(e.key.id)||(e.visible=!1);this._tileCache?.prune(f,i,a),YU.pool.release(l),fW.length=0,dW.length=0,uW.clear()}clear(){let{tileIndex:e}=this;for(let t of e.values())this.releaseTile(t);e.clear()}refresh(e){for(let t of this.tileIndex.values())e(t);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let n=e,r=null;for(;n=this.tileInfoView.getTileParentId(n),n;)if(this.tileIndex.has(n)){if(r=this.tileIndex.get(n),r?.isReady){t.has(r.key.id)||t.set(r.key.id,r);break}}else if(this._tileCache?.has(n)&&(r=this._tileCache.pop(n),this.tileIndex.set(n,r),r?.isReady)){t.has(r.key.id)||t.set(r.key.id,r);break}}_hasReadyAncestor(e,t){let n=Vd();this.tileInfoView.getTileBounds(n,e,!0);for(let r of this.tileIndex.values())if(r.isReady&&r.key.level>=t&&r.key.level<e.level){let e=Vd();if(this.tileInfoView.getTileBounds(e,r.key,!0),Qd(e,n))return!0}return!1}},mW={"area-measurement":()=>R(()=>import(`./AreaMeasurementAnalysisView2D-De_vkYqU.js`),__vite__mapDeps([365,366,367,368,369,140,370,371,372,373,13,5,205,374,154,375,153,376,377,378,379,93,88,89,191,90,87,91,92,380,221,381,220,281,213,214,45,94,95,46,97,124,359,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404])),dimension:null,"direct-line-measurement":null,"distance-measurement":()=>R(()=>import(`./DistanceMeasurementAnalysisView2D-CHPQwWI2.js`),__vite__mapDeps([405,366,367,368,369,140,370,205,374,154,375,153,376,377,372,373,13,5,378,379,93,88,89,191,90,87,91,92,380,221,381,220,281,213,214,45,94,95,46,97,124,359,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404])),"elevation-profile":()=>R(()=>import(`./ElevationProfileAnalysisView2D-49vHRrhm.js`),__vite__mapDeps([406,407,366,367,368,369,140,370,408,372,373,13,5,205,374,154,376,378,379,93,88,89,191,99,90,87,91,92,409,380,221,219,410,281,45,94,95,46,97,124,359,251,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404])),"line-of-sight":null,"shadow-cast":null,slice:null,viewshed:null,"volume-measurement":null};function hW(e){let t=mW[e.type];if(!t)throw new D(`analysis-view-module-import-utils:analysis-not-supported`,`Analysis "${e.type}" is not supported`);return t()}var gW=class{constructor(e,t={}){this.events=new Eh,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e==null?t.canvas!=null&&(this._canvas=t.canvas):(this._canvas=document.createElement(`canvas`),this._canvas.setAttribute(`style`,`width: 100%; height:100%; display:block; willChange:transform`),e.contains(this._canvas)||e.appendChild(this._canvas));let n={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:`high-performance`},r=this._canvas.getContext(`webgl2`,n);r||(r=this._canvas.getContext(`webgl2`,{...n,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=r,this._handles=Qt([bi(this._canvas,`webglcontextlost`,e=>this.events.emit(`webgl-context-lost`,e))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,t){if(this._hasMajorPerformanceCaveat||c(`esri-force-performance-mode`)){if(++this._lastRenderFrameCounter>=c(`esri-performance-mode-frames-between-render`)&&(t(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){let[t,n,r,i,a,o]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${t}, ${n}, ${r}, ${i}, ${a}, ${o})`}}else t()}resize(e){let t=this._canvas,n=t.style,{state:{size:r},pixelRatio:i}=e,a=r[0],o=r[1],s=Math.round(a*i),c=Math.round(o*i);t.width===s&&t.height===c||(t.width=s,t.height=c),n.width=a+`px`,n.height=o+`px`}_computeViewTransform(e,t){let[n,r]=e.center,[i,a]=t.center,[o,s]=e.toScreen([0,0],i,a),[c,l]=e.toScreen([0,0],n,r),u=c-o,d=l-s,f=e.scale/t.scale,p=t.rotation-e.rotation,m=_R();return oR(m),dR(m,m,[f,f]),uR(m,m,Qa(p)),fR(m,m,[u,d]),m}};function _W(e,t,n,r,i){vW(e,t,n||0,r||e.length-1,i||bW)}function vW(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(a-c)/a)*(o-a/2<0?-1:1);vW(e,t,Math.max(n,Math.floor(t-o*c/a+l)),Math.min(r,Math.floor(t+(a-o)*c/a+l)),i)}var u=e[t],d=n,f=r;for(yW(e,n,t),i(e[r],u)>0&&yW(e,n,r);d<f;){for(yW(e,d,f),d++,f--;i(e[d],u)<0;)d++;for(;i(e[f],u)>0;)f--}i(e[n],u)===0?yW(e,n,f):yW(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function yW(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bW(e,t){return e<t?-1:e>t?1:0}function xW(e,t){if(!(this instanceof xW))return new xW(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t==`function`?this.toBBox=t:this._initFormat(t)),this.clear()}function SW(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function CW(e,t){wW(e,0,e.children.length,t,e)}function wW(e,t,n,r,i){i||=PW(null),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a,o=t;o<n;o++)a=e.children[o],TW(i,e.leaf?r(a):a);return i}function TW(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function EW(e,t){return e.minX-t.minX}function DW(e,t){return e.minY-t.minY}function OW(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function kW(e){return e.maxX-e.minX+(e.maxY-e.minY)}function AW(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function jW(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,a-r)}function MW(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function NW(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function PW(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function FW(e,t,n,r,i){for(var a,o=[t,n];o.length;)(n=o.pop())-(t=o.pop())<=r||(a=t+Math.ceil((n-t)/r/2)*r,_W(e,a,t,n,i),o.push(t,a,a,n))}xW.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(!NW(e,t))return n;for(var i,a,o,s,c=[];t;){for(i=0,a=t.children.length;i<a;i++)o=t.children[i],NW(e,s=t.leaf?r(o):o)&&(t.leaf?n.push(o):MW(e,s)?this._all(o,n):c.push(o));t=c.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!NW(e,t))return!1;for(var r,i,a,o,s=[];t;){for(r=0,i=t.children.length;r<i;r++)if(a=t.children[r],NW(e,o=t.leaf?n(a):a)){if(t.leaf||MW(e,o))return!0;s.push(a)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=PW([]),this},remove:function(e,t){if(e==null)return this;for(var n,r,i,a,o=this.data,s=this.toBBox(e),c=[],l=[];o||c.length;){if(o||(o=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),o.leaf&&(i=SW(e,o.children,t))!==-1)return o.children.splice(i,1),c.push(o),this._condense(c),this;a||o.leaf||!MW(o,s)?r?(n++,o=r.children[n],a=!1):o=null:(c.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:EW,compareMinY:DW,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var i,a=n-t+1,o=this._maxEntries;if(a<=o)return CW(i=PW(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/o**(r-1))),(i=PW([])).leaf=!1,i.height=r;var s,c,l,u,d=Math.ceil(a/o),f=d*Math.ceil(Math.sqrt(o));for(FW(e,t,n,f,this.compareMinX),s=t;s<=n;s+=f)for(FW(e,s,l=Math.min(s+f-1,n),d,this.compareMinY),c=s;c<=l;c+=d)u=Math.min(c+d-1,l),i.children.push(this._build(e,c,u,r-1));return CW(i,this.toBBox),i},_chooseSubtree:function(e,t,n,r){for(var i,a,o,s,c,l,u,d;r.push(t),!t.leaf&&r.length-1!==n;){for(u=d=1/0,i=0,a=t.children.length;i<a;i++)c=OW(o=t.children[i]),(l=AW(e,o)-c)<d?(d=l,u=c<u?c:u,s=o):l===d&&c<u&&(u=c,s=o);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,i=n?e:r(e),a=[],o=this._chooseSubtree(i,this.data,t,a);for(o.children.push(e),TW(o,i);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(i,a,t)},_split:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),o=PW(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,CW(n,this.toBBox),CW(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(e,t){this.data=PW([e,t]),this.data.height=e.height+1,this.data.leaf=!1,CW(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var r,i,a,o,s,c,l,u;for(c=l=1/0,r=t;r<=n-t;r++)o=jW(i=wW(e,0,r,this.toBBox),a=wW(e,r,n,this.toBBox)),s=OW(i)+OW(a),o<c?(c=o,u=r,l=s<l?s:l):o===c&&s<l&&(l=s,u=r);return u},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:EW,i=e.leaf?this.compareMinY:DW;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);var i,a,o=this.toBBox,s=wW(e,0,t,o),c=wW(e,n-t,n,o),l=kW(s)+kW(c);for(i=t;i<n-t;i++)a=e.children[i],TW(s,e.leaf?o(a):a),l+=kW(s);for(i=n-t-1;i>=t;i--)a=e.children[i],TW(c,e.leaf?o(a):a),l+=kW(c);return l},_adjustParentBBoxes:function(e,t,n){for(var r=n;r>=0;r--)TW(t[r],e)},_condense:function(e){for(var t,n=e.length-1;n>=0;n--)e[n].children.length===0?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():CW(e[n],this.toBBox)},_initFormat:function(e){var t=[`return a`,` - b`,`;`];this.compareMinX=Function(`a`,`b`,t.join(e[0])),this.compareMinY=Function(`a`,`b`,t.join(e[1])),this.toBBox=Function(`a`,`return {minX: a`+e[0]+`, minY: a`+e[1]+`, maxX: a`+e[2]+`, maxY: a`+e[3]+`};`)}};function IW(e,{timeZone:t,timeExtent:n}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:n?.start,currentEnd:n?.end}}}}var LW=class e{constructor(e,t){this.key=new UU(0,0,0,0),this.bounds=Vd(),this.objectIds=new Set,this.key.set(t);let n=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.level=n.level,this.scale=n.scale,this.minScale=e.zoomToScale(n.level-1),this.maxScale=e.zoomToScale(n.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Gd(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:`upperLeft`,scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return IW(this.scale,e)}createChildTiles(){let t=this.key.getChildKeys(),n=oi.acquire();for(let r=0;r<t.length;r++)n[r]=new e(this.tileInfoView,t[r]);return n}getQuantizationParameters(){return DI.fromJSON({mode:`view`,originPosition:`upperLeft`,tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}},RW={added:[],removed:[]},zW=new Set,BW=new UU(0,0,0,0);function VW(e,t){let n=Fl(t);if(!n)return null;let[r,i]=n.valid;return e[2]>i?[Vd([e[0],e[1],i,e[3]]),Vd([r,e[1],r+e[2]-i,e[3]])]:e[0]<r?[Vd([r,e[1],e[2],e[3]]),Vd([i-(r-e[0]),e[1],i,e[3]])]:null}var HW=class extends Th{constructor(e){super(),this._tiles=new Map,this._index=xW(9,c(`esri-csp-restrictions`)?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[`.bounds[0]`,`.bounds[1]`,`.bounds[2]`,`.bounds[3]`]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||Yd(e)===0||Xd(e)===0)return[];let t=VW(e,this.tileScheme.spatialReference);return t==null?this.boundsIntersections(e):[...new Set([...this.boundsIntersections(t[0]),...this.boundsIntersections(t[1])])]}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){let t={added:[],removed:[]};for(let n of e.added)if(!this.has(n)){let e=new LW(this.tileScheme,n);this._tiles.set(n,e),this._index.insert(e),t.added.push(e)}for(let n of e.removed)if(this.has(n)){let e=this.get(n);this._tiles.delete(n),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach(e=>this.tiles.push(e)),(t.added.length||t.removed.length)&&this.emit(`update`,t)}setViewState(e){let t=this.tileScheme.getTileCoverage(e,0);if(!t)return;let{spans:n,lodInfo:r}=t,{level:i}=r;if(n.length>0)for(let{row:e,colFrom:t,colTo:a}of n)for(let n=t;n<=a;n++){let t=BW.set(i,e,r.normalizeCol(n),r.getWorldForColumn(n)).id;if(zW.add(t),!this.has(t)){let e=new LW(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),RW.added.push(e)}}for(let e=this.tiles.length-1;e>=0;e--){let t=this.tiles[e];zW.has(t.id)||(this._tiles.delete(t.id),this.tiles.splice(e,1),this._index.remove(t),RW.removed.push(t))}(RW.added.length||RW.removed.length)&&this.emit(`update`,RW),YU.pool.release(t),zW.clear(),RW.added.length=0,RW.removed.length=0}},UW=1e-30,WW=512,GW=16777216,KW=8,qW=29,JW=24,YW=4,XW=0,ZW=0,QW=0,$W=1,eG=2,tG=3,nG=4,rG=5,iG=6,aG=12,oG=13,sG=5,cG=6,lG=5,uG=6,dG=6,fG=64,pG=128,mG=1.05,hG=3,gG=1,_G=3,vG=3,yG=5,bG=6,xG=1.15,SG=4,CG=128,wG=248,TG=2,EG=128,DG=1,OG=10,kG=1024,AG=128,jG=4,MG=1,NG=1<<20,PG=.75,FG=10,IG=.75,LG=256,RG=32,zG=512,BG=0,VG=1,HG=1,UG=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],WG=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],GG=()=>E.getLogger(`esri.views.webgl.checkWebGLError`);function KG(e){switch(e.getError()){case e.NO_ERROR:return null;case e.INVALID_ENUM:return`Invalid Enum. An unacceptable value has been specified for an enumerated argument.`;case e.INVALID_VALUE:return`Invalid Value. A numeric argument is out of range.`;case e.INVALID_OPERATION:return`Invalid Operation. The specified command is not allowed for the current state.`;case e.INVALID_FRAMEBUFFER_OPERATION:return`Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.`;case e.OUT_OF_MEMORY:return`Out of memory. Not enough memory is left to execute the command.`;case e.CONTEXT_LOST_WEBGL:return`WebGL context has been lost`;default:return`Unknown error`}}var qG=!!c(`enable-feature:webgl-debug`);function JG(){return qG}function YG(){return qG}function XG(e,t=JG()){if(t){let t=KG(e);if(t){let e=Error().stack;GG().error(new D(`webgl-error`,`WebGL error occurred`,{message:t,stack:e}))}}}var ZG={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},QG={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Z={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},$G=Object.values(Z),eK={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},tK={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},nK={FLOAT:QG.FLOAT,UNSIGNED_BYTE:QG.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:QG.BYTE,UNSIGNED_SHORT:QG.UNSIGNED_SHORT,SHORT:QG.SHORT,UNSIGNED_INT:QG.UNSIGNED_INT,INT:QG.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},rK=33984,iK={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},aK=1029,oK=0,sK=36064,cK=36065,lK=36066,uK=36067,dK=33306,fK=36096,pK=36128,mK={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497},hK=new Set([QG.BYTE,QG.SHORT,QG.INT,QG.UNSIGNED_BYTE,QG.UNSIGNED_SHORT,QG.UNSIGNED_INT]);function gK(e,t,n,r=0){let i=e.gl;e.bindBuffer(n);for(let a of n.layout){let n=t.get(a.name);if(n==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}let o=r*a.stride;if(a.count<=4)a.integer&&hK.has(a.type)?i.vertexAttribIPointer(n,a.count,a.type,a.stride,a.offset+o):i.vertexAttribPointer(n,a.count,a.type,a.normalized,a.stride,a.offset+o),i.enableVertexAttribArray(n),a.divisor>0&&i.vertexAttribDivisor(n,a.divisor);else if(a.count===9)for(let e=0;e<3;e++)i.vertexAttribPointer(n+e,3,a.type,a.normalized,a.stride,a.offset+12*e+o),i.enableVertexAttribArray(n+e),a.divisor>0&&i.vertexAttribDivisor(n+e,a.divisor);else if(a.count===16)for(let e=0;e<4;e++)i.vertexAttribPointer(n+e,4,a.type,a.normalized,a.stride,a.offset+16*e+o),i.enableVertexAttribArray(n+e),a.divisor>0&&i.vertexAttribDivisor(n+e,a.divisor);else console.error(`Unsupported vertex attribute element count: `+a.count);if(JG()){let t=KG(e.gl);t&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${o}:`,t,a)}}}function _K(e){switch(e){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function vK(e){switch(e){case 6406:case 6409:case 6403:case 36244:case Z.R8:case Z.R8I:case Z.R8UI:case Z.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Z.RGBA4:case Z.R16F:case Z.R16I:case Z.R16UI:case Z.RG8:case Z.RG8I:case Z.RG8UI:case Z.RG8_SNORM:case Z.RGB565:case Z.RGB5_A1:case tK.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Z.RGB8:case Z.RGB8I:case Z.RGB8UI:case Z.RGB8_SNORM:case Z.SRGB8:case tK.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Z.RGBA8:case Z.R32F:case Z.R11F_G11F_B10F:case Z.RG16F:case Z.R32I:case Z.R32UI:case Z.RG16I:case Z.RG16UI:case Z.RGBA8I:case Z.RGBA8UI:case Z.RGBA8_SNORM:case Z.SRGB8_ALPHA8:case Z.RGB9_E5:case Z.RGB10_A2UI:case Z.RGB10_A2:case tK.DEPTH_COMPONENT32F:case eK.DEPTH24_STENCIL8:return 4;case eK.DEPTH32F_STENCIL8:return 5;case Z.RGB16F:case Z.RGB16I:case Z.RGB16UI:return 6;case Z.RG32F:case Z.RG32I:case Z.RG32UI:case Z.RGBA16F:case Z.RGBA16I:case Z.RGBA16UI:return 8;case Z.RGB32F:case Z.RGB32I:case Z.RGB32UI:return 12;case Z.RGBA32F:case Z.RGBA32I:case Z.RGBA32UI:return 16;case mK.COMPRESSED_RGB_S3TC_DXT1_EXT:case mK.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case mK.COMPRESSED_RGBA_S3TC_DXT3_EXT:case mK.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case mK.COMPRESSED_R11_EAC:case mK.COMPRESSED_SIGNED_R11_EAC:case mK.COMPRESSED_RGB8_ETC2:case mK.COMPRESSED_SRGB8_ETC2:case mK.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case mK.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case mK.COMPRESSED_RG11_EAC:case mK.COMPRESSED_SIGNED_RG11_EAC:case mK.COMPRESSED_RGBA8_ETC2_EAC:case mK.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}var yK=class{constructor(e=0,t=e){this.width=e,this.height=t,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=nK.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function bK(e){return e.width<=0||e.height<=0||e.depth<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:vK(e.internalFormat))*(e.target===34067?6:1))}var xK=()=>E.getLogger(`esri/views/webgl/textureUtils`);function SK(e){let{width:t,height:n,depth:r}=e;(t!=null&&t<0||n!=null&&n<0||r!=null&&r<0)&&xK().error(`Negative dimension parameters are not allowed!`);let{internalFormat:i}=e;if(i&&(wK(i)||TK(i))){let{linearFilterDepth:t,compareEnabled:n,samplingMode:r,hasMipmap:i}=e;i&&xK().error(`Depth textures cannot have mipmaps`),t?r!==9729&&r!==9728&&xK().error(`Depth textures cannot sample mipmaps`):(r!==9728&&xK().error(`Depth textures without filtering must use NEAREST filtering`),n&&xK().error(`Depth textures without filtering cannot use compare function`))}}function CK(e){return $G.includes(e)}function wK(e){return tt(tK,e)}function TK(e){return tt(eK,e)}function EK(e){return e!=null&&tt(mK,e)}function DK(e){return e!=null&&`type`in e&&e.type===`compressed`}function OK(e){return e!=null&&`byteLength`in e}function kK(e){return e!=null&&!DK(e)&&!OK(e)}function AK(e){return e===32879||e===35866}function jK(e,t,n,r=1){let i=Math.max(t,n);return e===32879&&(i=Math.max(i,r)),Math.floor(Math.log2(i))+1}function MK(e){if(e.internalFormat!=null)return e.internalFormat;switch(e.dataType){case nK.FLOAT:switch(e.pixelFormat){case 6408:return Z.RGBA32F;case 6407:return Z.RGB32F;default:throw new D(`texture:unknown-format`,`Unable to derive format`)}case nK.UNSIGNED_BYTE:switch(e.pixelFormat){case 6408:return Z.RGBA8;case 6407:return Z.RGB8}}let{pixelFormat:t}=e;return e.internalFormat=t===34041?eK.DEPTH24_STENCIL8:t===6402?tK.DEPTH_COMPONENT24:t,e.internalFormat}function NK(e){let t=`width`in e?e.width:e.codedWidth,n=`height`in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,n=e.videoHeight),{width:t,height:n,depth:1}}var PK=class e extends yK{constructor(e,t){switch(super(),this.context=e,Object.assign(this,t),this.internalFormat){case Z.R16F:case Z.R32F:case Z.R8_SNORM:case Z.R8:this.pixelFormat=6403;break;case Z.R8I:case Z.R8UI:case Z.R16I:case Z.R16UI:case Z.R32I:case Z.R32UI:this.pixelFormat=36244}}static validate(t,n){return new e(t,n)}},FK=!!c(`esri-tests-disable-gpu-memory-measurements`),IK=()=>E.getLogger(`esri/views/webgl/Texture`),LK=class e{static{this.TEXTURE_UNIT_FOR_UPDATES=0}static{this.compressionWorkerHandle=null}constructor(e,t=null,n=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,`context`in e)this._descriptor=e,n=t;else{let n=PK.validate(e,t);if(!n)throw new D(`texture:invalid-descriptor`,`Texture descriptor invalid`);this._descriptor=n}this._descriptor.target===34067?this._setDataCubeMap(n):this.setData(n)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return FK?0:bK(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(iK.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,t){let n=this._descriptor;if(n.width!==e||n.height!==t){if(this._wasImmutablyAllocated)throw new D(`texture:immutable-resize`,`Immutable textures can't be resized!`);n.width=e,n.height=t,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!DK(e)&&this._descriptor.internalFormat&&tt(mK,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!DK(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(t,n,r,i,a,o,s=0){o||IK().error(`An attempt to use uninitialized data!`),this.hasWebGLTextureObject||IK().error(`An attempt to update uninitialized texture!`);let c=this._descriptor;c.internalFormat=MK(c);let{context:l,pixelFormat:u,dataType:d,target:f,isImmutable:p}=c;if(p&&!this._wasImmutablyAllocated)throw new D(`texture:uninitialized`,`Cannot update immutable texture before allocation!`);let m=l.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES,!0);(n<0||r<0||n+i>c.width||r+a>c.height)&&IK().error(`An attempt to update out of bounds of the texture!`),this._configurePixelStorage();let{gl:h}=l;s&&(i&&a||IK().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),h.pixelStorei(h.UNPACK_SKIP_ROWS,s)),kK(o)?h.texSubImage2D(f,t,n,r,i,a,u,d,o):DK(o)?h.compressedTexSubImage2D(f,t,n,r,i,a,c.internalFormat,o.levels[t]):h.texSubImage2D(f,t,n,r,i,a,u,d,o),s&&h.pixelStorei(h.UNPACK_SKIP_ROWS,0),l.bindTexture(m,e.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,n,r,i,a,o,s,c){c||IK().error(`An attempt to use uninitialized data!`),this.hasWebGLTextureObject||IK().error(`An attempt to update an uninitialized texture!`);let l=this._descriptor;l.internalFormat=MK(l);let{context:u,pixelFormat:d,dataType:f,isImmutable:p,target:m}=l;if(p&&!this._wasImmutablyAllocated)throw new D(`texture:uninitialized`,`Cannot update immutable texture before allocation!`);AK(m)||IK().warn(`Attempting to set 3D texture data on a non-3D texture`);let h=u.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),(n<0||r<0||i<0||n+a>l.width||r+o>l.height||i+s>l.depth)&&IK().error(`An attempt to update out of bounds of the texture!`),this._configurePixelStorage();let{gl:g}=u;if(DK(c))c=c.levels[t],g.compressedTexSubImage3D(m,t,n,r,i,a,o,s,l.internalFormat,c);else{let e=c;g.texSubImage3D(m,t,n,r,i,a,o,s,d,f,e)}u.bindTexture(h,e.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){let t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new D(`texture:immutable-change`,`Cannot add mipmaps to immutable texture after allocation`);t.hasMipmap=!0,this._samplingModeDirty=!0,SK(t)}t.samplingMode===9729?(this._samplingModeDirty=!0,t.samplingMode=9985):t.samplingMode===9728&&(this._samplingModeDirty=!0,t.samplingMode=9984);let n=this._descriptor.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(n,e.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){let e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new D(`texture:immutable-change`,`Cannot delete mipmaps to immutable texture after allocation`);e.hasMipmap=!1,this._samplingModeDirty=!0,SK(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,SK(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),SK(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&=(this._applySamplingMode(),!1),this._wrapModeDirty&&=(this._applyWrapMode(),!1),this._shadowFilterDirty&&=(this._applyShadowMode(),!1)}abortCompression(){this._compressionAbortController=Vr(this._compressionAbortController)}_setData(t,n){let r=this._descriptor,i=r.context?.gl;if(!i)return;XG(i),this.hasWebGLTextureObject||(this._glName=i.createTexture(),r.context.instanceCounter.increment(iK.Texture,this)),SK(r);let a=r.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),XG(i);let o=n??r.target,s=AK(o);if(kK(t))this._setDataFromTexImageSource(t,o);else{let{width:e,height:n,depth:a}=r;if(e==null||n==null)throw new D(`texture:missing-size`,`Width and height must be specified!`);if(s&&a==null)throw new D(`texture:missing-depth`,`Depth must be specified!`);if(r.internalFormat=MK(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,e,n,a),DK(t)){if(!EK(r.internalFormat))throw new D(`texture:format-mismatch`,`Attempting to use compressed data with an uncompressed format!`);this._setDataFromCompressedSource(t,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,e,n,a,t),XG(i),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),XG(i),r.context.bindTexture(a,e.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let t=34069;t<=34074;t++)this._setData(e,t)}_configurePixelStorage(){let e=this._descriptor.context.gl,{unpackAlignment:t,flipped:n,preMultiplyAlpha:r}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_setDataFromTexImageSource(e,t){let{gl:n}=this._descriptor.context,r=this._descriptor;r.internalFormat=MK(r);let i=AK(t),{width:a,height:o,depth:s}=NK(e);r.width&&r.height,r.width||=a,r.height||=o,i&&r.depth,i&&(r.depth=s),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(t,r.internalFormat,r.hasMipmap,a,o,s),this._texImage(t,0,r.internalFormat,a,o,s,e),XG(n),r.hasMipmap&&(this.generateMipmap(),XG(n))}_setDataFromCompressedSource(e,t,n){let r=this._descriptor,{width:i,height:a,depth:o}=r,s=e.levels,c=jK(n,i,a,o),l=Math.min(c,s.length)-1;this._descriptor.context.gl.texParameteri(r.target,33085,l),this._forEachMipmapLevel((e,r,i,a)=>{let o=s[Math.min(e,s.length-1)];this._compressedTexImage(n,e,t,r,i,a,o)},l)}_texStorage(e,t,n,r,i,a){let{gl:o}=this._descriptor.context;if(!CK(t)&&!wK(t)&&!TK(t))throw new D(`texture:missing-format`,`Immutable textures must have a sized internal format`);if(!this._descriptor.isImmutable)return;let s=n?jK(e,r,i,a):1;if(AK(e)){if(a==null)throw new D(`texture:missing-depth`,`Missing depth dimension for 3D texture upload`);o.texStorage3D(e,s,t,r,i,a)}else o.texStorage2D(e,s,t,r,i);this._wasImmutablyAllocated=!0}_texImage(e,t,n,r,i,a,o){let s=this._descriptor.context.gl,c=AK(e),{isImmutable:l,pixelFormat:u,dataType:d}=this._descriptor;if(l){if(o!=null){let n=o;if(c){if(a==null)throw new D(`texture:missing-depth`,`Missing depth dimension for 3D texture upload`);s.texSubImage3D(e,t,0,0,0,r,i,a,u,d,n)}else s.texSubImage2D(e,t,0,0,r,i,u,d,n)}}else{let l=o;if(c){if(a==null)throw new D(`texture:missing-depth`,`Missing depth dimension for 3D texture upload`);s.texImage3D(e,t,n,r,i,a,0,u,d,l)}else s.texImage2D(e,t,n,r,i,0,u,d,l)}}_compressedTexImage(e,t,n,r,i,a,o){let s=this._descriptor.context.gl,c=AK(e);if(this._descriptor.isImmutable){if(o!=null)if(c){if(a==null)throw new D(`texture:missing-depth`,`Missing depth dimension for 3D texture upload`);s.compressedTexSubImage3D(e,t,0,0,0,r,i,a,n,o)}else s.compressedTexSubImage2D(e,t,0,0,r,i,n,o)}else if(c){if(a==null)throw new D(`texture:missing-depth`,`Missing depth dimension for 3D texture upload`);s.compressedTexImage3D(e,t,n,r,i,a,0,o)}else s.compressedTexImage2D(e,t,n,r,i,0,o)}async _compressOnWorker(t){let{width:n,height:r,context:i,flipped:a,preMultiplyAlpha:o,hasMipmap:s}=this._descriptor,c=this._descriptor.compress?.compressionTracker,l=this._descriptor.compress?.compressionCallback,{compressedTextureETC:u,compressedTextureS3TC:d}=i.capabilities;if(!e.compressionWorkerHandle?.isCompressible(t,this._descriptor)||!u&&!d)return;this.abortCompression();let f=new AbortController,p;this._compressionAbortController=f,c?.increment();try{t instanceof Uint8Array?p=t.buffer:(p=await createImageBitmap(t,{imageOrientation:a?`flipY`:`none`}),Ci(f));let i={data:p,width:n,height:r,needsFlip:t instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:s,hasETC:!!u,hasS3TC:!!d},c=await e.compressionWorkerHandle.invoke(i,f.signal,1);if(Ci(f),c.compressedTexture&&this.hasWebGLTextureObject){let e=this.usedMemory;this._descriptor.internalFormat=c.internalFormat,this._setData(c.compressedTexture),l?.(e-this.usedMemory)}}catch(e){ji(e)||IK().error(`Texture compression failed!`)}finally{c?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),p instanceof ImageBitmap&&p.close()}}_forEachMipmapLevel(e,t=1/0){let{width:n,height:r,depth:i,hasMipmap:a,target:o}=this._descriptor,s=o===32879;if(n==null||r==null||s&&i==null)throw new D(`texture:missing-size`,`Missing texture dimensions for mipmap calculation`);for(let o=0;e(o,n,r,i),a&&(n!==1||r!==1||s&&i!==1)&&!(o>=t);++o)n=Math.max(1,n>>1),r=Math.max(1,r>>1),s&&(i=Math.max(1,i>>1))}_applySamplingMode(){let e=this._descriptor,t=e.context?.gl,n=e.samplingMode,r=e.samplingMode;n===9985||n===9987?(n=9729,e.hasMipmap||(r=9729)):n!==9984&&n!==9986||(n=9728,e.hasMipmap||(r=9728)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,n),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,r)}_applyWrapMode(){let e=this._descriptor,t=e.context?.gl;typeof e.wrapMode==`number`?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){let e=this._descriptor,t=e.context?.gl,n=e.compareEnabled?t.COMPARE_REF_TO_TEXTURE:t.NONE;t.texParameteri(e.target,t.TEXTURE_COMPARE_MODE,n),e.compareEnabled&&t.texParameteri(e.target,t.TEXTURE_COMPARE_FUNC,t.GREATER),XG(t)}_applyAnisotropicFilteringParameters(){let e=this._descriptor,t=e.context.capabilities.textureFilterAnisotropic;t&&e.context.gl.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},RK=()=>E.getLogger(`esri.views.2d.engine.webgl.painter.highlight.HighlightGradient`);function zK(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}var BK=[0,0,0,0],VK=class{constructor(){this.type=`single`,this._highlightOptions=new vL,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey=``,this._texelData=new Uint8Array(4*256),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,t){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,6),t.setUniform2fv(`u_minMaxDistance`,this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:63,activeGradient:this}]}_updateGradientTexture(e){let t=HK(this._highlightOptions);if(t===this._optionsShadeTexKey)return;this._optionsShadeTexKey=t,zK(this._highlightOptions,this._convertedHighlightOptions);let n=this._convertedHighlightOptions,r=n.outlinePosition-n.outlineWidth/2-n.outerHaloWidth,i=n.outlinePosition-n.outlineWidth/2,a=n.outlinePosition+n.outlineWidth/2,o=n.outlinePosition+n.outlineWidth/2+n.innerHaloWidth,s=Math.sqrt(Math.PI/2)*1,c=Math.abs(r)>s?Math.round(10*(Math.abs(r)-s))/10:0,l=Math.abs(o)>s?Math.round(10*(Math.abs(o)-s))/10:0,u;c&&!l?RK().error(`The outer rim of the highlight is `+c+`px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards).`):!c&&l?RK().error(`The inner rim of the highlight is `+l+`px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards).`):c&&l&&RK().error(`The highlight is `+Math.max(c,l)+`px away from the edge of the feature; consider reducing some width values.`);let d=[void 0,void 0,void 0,void 0];function f(e,t,n){d[0]=(1-n)*e[0]+n*t[0],d[1]=(1-n)*e[1]+n*t[1],d[2]=(1-n)*e[2]+n*t[2],d[3]=(1-n)*e[3]+n*t[3]}let{_texelData:p}=this;for(let e=0;e<256;++e)u=r+e/255*(o-r),u<r?(d[0]=0,d[1]=0,d[2]=0,d[3]=0):u<i?f(BK,n.outlineColor,(u-r)/(i-r)):u<a?[d[0],d[1],d[2],d[3]]=n.outlineColor:u<o?f(n.outlineColor,n.fillColor,(u-a)/(o-a)):[d[0],d[1],d[2],d[3]]=n.fillColor,p[4*e]=255*d[0],p[4*e+1]=255*d[1],p[4*e+2]=255*d[2],p[4*e+3]=255*d[3];if(this._minMaxDistance[0]=r,this._minMaxDistance[1]=o,!this._shadeTex){let t=new yK(256,1);t.wrapMode=33071,this._shadeTex=new LK(e,t)}this._shadeTex.updateData(0,0,0,256,1,this._texelData)}};function HK(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}var UK=class{constructor(){this.type=`multi`,this.gradients=[]}setHighlightOptions(e){for(let t=0;t<e.length;t++)this.gradients[t]||(this.gradients[t]=new VK),this.gradients[t].setHighlightOptions(e[t]);for(let t=e.length+1;t<this.gradients.length;t++)this.gradients[t].destroy();this.gradients.length=e.length}destroy(){for(let e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1,t=[];for(let n=0;n<this.gradients.length;n++){let r=this.gradients[n];t.push({activeReasons:e,activeGradient:r}),e<<=1}return t}},WK={color:{write:[!0,!0,!0,!0],blendMode:`composite`},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},GK={color:{write:[!0,!0,!0,!0],blendMode:`additive`},depth:!1,stencil:!1},KK={...WK,color:{write:[!0,!0,!0,!0],blendMode:`delete`}};function qK({pixelRatio:e,state:t,displayLevel:n,requiredLevel:r},i){let a=1/2**(n-i.key.level),o=1/2**(r-i.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:a,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:t.scale,currentZoom:n,metersPerSRUnit:Ou(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function JK(e){return e.passOptions?.type===`highlight`}function YK(e){return e.passOptions?.type===`hittest`}function XK(e){if(!YK(e))return null;let{position:t,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}=e.passOptions;return{position:t,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}}function ZK(e){if(!JK(e))return null;let{activeReasons:t,highlightAll:n}=e.passOptions;return{activeReasons:t,highlightAll:n?1:0}}function QK(e,t,n){let r={};for(let i in n)typeof n[i]==`function`?r[i]=n[i](e,t):r[i]=n[i];return r}function $K(e,t){let{attributeView:n,context:r}=e;return{storage:n.getUniforms(r),view:qK(e,t),hittestRequest:XK(e),highlight:ZK(e)}}function eq(e){return{inside:e.selection===2,outside:e.selection===3}}function tq(e){return YK(e)?GK:JK(e)&&e.passOptions.stepType===`clear`?KK:WK}function nq(e){let{row:t,col:n}=e.key,r=n*512,i=t*512;return{tileOffsetFromLocalOrigin:[r%GW,i%GW],maxIntsToLocalOrigin:[Math.floor(r/GW),Math.floor(i/GW)]}}var rq=new xr({esriGeometryPoint:`point`,esriGeometryMultipoint:`multipoint`,esriGeometryPolyline:`polyline`,esriGeometryPolygon:`polygon`,esriGeometryMultiPatch:`multipatch`,mesh:`mesh`});function iq(e){return rq.toJSON(e)}function aq(e){let{bandCount:t,attributeTable:n,colormap:r,pixelType:i}=e.raster.rasterInfo;return t===1&&(n!=null||r!=null||i===`u8`||i===`s8`)}function oq(e,t){return t==null?(e?.destroy(),null):(e?.type===`single`&&Array.isArray(t)&&(e.destroy(),e=null),e?.type!==`multi`||Array.isArray(t)||(e.destroy(),e=null),e||=Array.isArray(t)?new UK:new VK,_e(t)?e.type===`multi`&&e.setHighlightOptions(t):e.type===`single`&&e.setHighlightOptions(t),e)}function sq(e,t,n,r){let{painter:i,highlightGradient:a}=e,{highlight:o}=i.effects;if(!a)return;let s=e.passOptions,c=a.getReasonsWithGradients();for(let a=0;a<c.length;a++){let s={...e,passOptions:{type:`highlight`,activeGradient:r==null?c[a].activeGradient:c[r].activeGradient,activeReasons:c[a].activeReasons,stepType:`burn`,highlightAll:t}};if(o.bind(s),n(s),a<c.length-1){let i=0;for(let e=a+1;e<c.length;e++)i|=c[e].activeReasons;n({...e,passOptions:{type:`highlight`,activeGradient:r==null?c[a].activeGradient:c[r].activeGradient,activeReasons:i,stepType:`clear`,highlightAll:t}})}let l={...e,passOptions:{type:`highlight`,activeGradient:r==null?c[a].activeGradient:c[r].activeGradient,activeReasons:c[a].activeReasons,stepType:`draw`,highlightAll:t}};i.setPipelineState(tq(e)),i.updatePipelineState(e.context),o.draw(l),o.unbind()}e.passOptions=s}var cq=e=>parseFloat(e)/100;function lq(e,t,n){let r=typeof e.left==`string`?cq(e.left)*t:e.left,i=typeof e.right==`string`?cq(e.right)*t:e.right,a=typeof e.top==`string`?cq(e.top)*n:e.top,o=typeof e.bottom==`string`?cq(e.bottom)*n:e.bottom,s=a;return{xmin:r,xmax:Math.max(t-i,r),ymin:s,ymax:Math.max(n-o,a)}}function uq(e,t,n,r){switch(t.type){case`rect`:{let{width:r,height:i}=e,{xmin:a,xmax:o,ymin:s,ymax:c}=lq(t,r,i),{x:l,y:u}=n;return l>a&&l<o&&u>s&&u<c}case`path`:return t.path.length===0||!Array.isArray(t.path[0][0])||vd(t.path,[n.x,n.y]);case`geometry`:return t.geometry==null||(t.geometry.type===`polygon`?_d(t.geometry,r):md(t.geometry,r))}}function dq(e){if(!e.highlights)return null;let t=e.highlights.findIndex(e=>e.name===`default`);return t===-1?null:e.highlights.items[t]}function fq(e,t){if(!e.highlights){if(!t)return;e.highlights=new W([new vL])}let n=e.highlights.findIndex(e=>e.name===`default`);t?e.highlights.items[n].assignFrom(t):(e.highlights.removeAt(n),e.highlights.length===0&&(e.highlights=null))}async function pq(e,t,n){let r=aL(t)?iL(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set,a=new Set,o=!1,s=null,c=null;n?.include?hq(n.include,mq(e,e=>{i.add(e),_q(e,e=>a.add(e))},(e,t)=>{a.add(e),i.add(t)},e=>{s||=new Set,s.add(e)},e=>i.add(e),()=>o=!0)):(o=!0,i=new Set(e.allLayerViews),i.forEach(e=>{_q(e,e=>a.add(e))})),n?.exclude&&hq(n.exclude,mq(e,e=>{i.delete(e),_q(e,e=>a.delete(e))},e=>a.delete(e),e=>{c||=new Set,c.add(e)}));let l=e.toMap(r),u=e.allLayerViews.filter(t=>!t.suspended&&i.has(t)&&t.clips.every(t=>uq(e,t,r,l))).reverse(),d=[...o?e.graphicsView.hitTest(l).map(e=>({type:`graphic`,graphic:e,layer:null,mapPoint:l})):[],...await Promise.all(u.map(e=>e.hitTest(l,r)).toArray())].filter(ge).flat().filter(ge);return d=d.filter(e=>e.type!==`graphic`||e.layer?.type!==`subtype-group`||a.has(e.graphic.layer)),s&&(d=d.filter(e=>!(`graphic`in e)||!e.graphic||s?.has(gq(e.graphic)))),c&&(d=d.filter(e=>!(`graphic`in e)||!e.graphic||!c?.has(gq(e.graphic)))),{screenPoint:r,results:d}}function mq(e,t,n,r,i,a){return o=>{if(o instanceof VF){if(o.layer===e)a?.();else{let t=e.allLayerViews.find(e=>e.layer===o.layer);t&&i?.(t)}r(gq(o))}else if(!(`layer`in o&&`element`in o))if(o.type===`subtype-sublayer`){let t=e.allLayerViews.find(e=>e.layer===o.parent);t&&n(o,t)}else{let n=e.allLayerViews.find(e=>e.layer===o);n&&t(n)}}}function hq(e,t){if(e)if(Nr(e))for(let n of e)if(Nr(n))for(let e of n)t(e);else t(n);else t(e)}function gq(e){let t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??`MapView`}/${t}`:`"MapView/${e.uid}`}function _q(e,t){let n=e.layer;n?.type===`subtype-group`&&n.sublayers.forEach(e=>{t(e)})}var vq=null,yq=!0;function bq(e,t,n){if(!e||!t)throw Error(`Cannot construct image data without dimensions`);if(yq)try{return new ImageData(e,t)}catch{yq=!1}return Cq(e,t,n)}function xq(e,t,n,r){if(!t||!n)throw Error(`Cannot construct image data without dimensions`);if(yq)try{return new ImageData(e,t,n)}catch{yq=!1}let i=Cq(t,n,r);return i.data.set(e,0),i}function Sq(){return vq||(vq=document.createElement(`canvas`),vq.width=1,vq.height=1),vq}function Cq(e,t,n){return n||=Sq(),n.getContext(`2d`).createImageData(e,t)}async function wq(e,t){let n=window.URL.createObjectURL(e);try{let{data:e}=await Qc(n,{...t,responseType:`image`});return e}catch(e){throw ji(e)?e:new D(`invalid-image`,`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function Tq(e,t){let{arrayBuffer:n,mediaType:r}=await Eq(e,t),i=r===`image/png`;if(r===`image/gif`){let{isAnimatedGIF:e,parseGif:r}=await R(async()=>{let{isAnimatedGIF:e,parseGif:t}=await import(`./gif-CZFMTdnX.js`);return{isAnimatedGIF:e,parseGif:t}},[]);if(e(n))return r(n,t)}if(i){let{isAnimatedPNG:e,parseApng:r}=await R(async()=>{let{isAnimatedPNG:e,parseApng:t}=await import(`./apng-DVUp_6dk.js`);return{isAnimatedPNG:e,parseApng:t}},__vite__mapDeps([411,190]));if(e(n))return r(n,t)}return wq(new Blob([n],{type:r}),t)}async function Eq(e,t){let n=Cs(e);if(n?.isBase64)return{arrayBuffer:Vo(n.data),mediaType:n.mediaType};let r=await Qc(e,{responseType:`array-buffer`,...t});return{arrayBuffer:r.data,mediaType:r.getHeader?.(`Content-Type`)??``}}function Dq(e,t,n){let{ctx:r,canvas:i}=kq(e,n),a=r.getImageData(0,0,e.width,e.height),o=Mq(i,t);return Aq(i),{dataUrl:o,data:a}}function Oq(e,t){let{ctx:n,canvas:r}=kq(e,t),i=n.getImageData(0,0,e.width,e.height);return Aq(r),i}function kq(e,t){let n=Ege();t.premultipliedAlpha&&Age(e),n.width=e.width,n.height=e.height;let r=n.getContext(`2d`,{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&kge(r),{ctx:r,canvas:n}}function Aq(e){e.width=0,e.height=0}function Ege(){return jq??=document.createElement(`canvas`),jq}var jq=null;function Mq(e,t){let n=jge[t.format],r=t.quality/100;return e.toDataURL(n,r)}function Nq(e,t){let n=Oge(e),r=Nge[n];return{format:n,quality:Xa(t??r,0,100)}}function Pq(e,t){return t/Math.max(e[0],e[1])}function Dge(e,t,n,r=0,i=0,a=e.width-r,o=e.height-i,s=!1){let{data:c}=e,{width:l,height:u,data:d}=t,f=a/l,p=o/u,m=Math.ceil(f/2),h=Math.ceil(p/2),g=e.width;for(let e=0;e<u;e++)for(let t=0;t<l;t++){let a=4*(t+(s?u-e-1:e)*l),o=0,_=0,v=0,y=0,b=0,x=0,S=(e+.5)*p;for(let a=Math.floor(e*p);a<(e+1)*p;a++){let e=Math.abs(S-(a+.5))/h,s=(t+.5)*f,l=e*e;for(let e=Math.floor(t*f);e<(t+1)*f;e++){let t=Math.abs(s-(e+.5))/m,u=Math.sqrt(l+t*t);if(u>=1)continue;let d=2*u*u*u-3*u*u+1,f=4*(r+e+(i+a)*g);x+=d*c[f+3],_+=d,!n&&c[f+3]<255&&(d=d*c[f+3]/255),v+=d*c[f],y+=d*c[f+1],b+=d*c[f+2],o+=d}}d[a]=v/o,d[a+1]=y/o,d[a+2]=b/o,d[a+3]=x/_}return t}function Oge(e){switch(e){case`png`:case`jpg`:case`jpeg`:return e;default:return Mge}}function kge(e){e.save(),e.globalCompositeOperation=`copy`,e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function Age(e){let t=e.data,n=t.length;for(let e=0;e<n;e+=4){let n=t[e+3];if(n!==255&&n>0){let r=255/n;t[e]=t[e]*r,t[e+1]=t[e+1]*r,t[e+2]=t[e+2]*r}}}var jge={png:`image/png`,jpg:`image/jpeg`,jpeg:`image/jpeg`},Fq=98,Mge=`png`,Nge={png:100,jpg:Fq,jpeg:Fq},Iq={flipY:!0,premultipliedAlpha:!0};async function Pge(e,t){let n=await Lq(e,t),{format:r,quality:i}=Nq(t?.format,t?.quality);return Dq(n,{format:r,quality:i},Iq)}async function Fge(e,t){let n=await Lq(e,t);return Oq(n,Iq)}function Lq(e,t){let n=Rge(t||{},Lge(e.stage,e.size),e.size,e.padding),r=Ige(t,e.allLayerViews);return e.stage.takeScreenshot(n,r,e.backgroundColor,t?.rotation)}function Ige(e={},t){if(!e.layers)return;let n=[];return e.layers.forEach(e=>{let r=t.find(t=>t.layer.id===e.id);r?.container&&n.push(r.container)}),n}function Lge(e,t){return Math.min(4,Pq(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function Rge(e,t,n,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;e.width!=null&&e.height!=null?i=[e.width,e.height]:e.width==null&&e.height!=null?i=[e.height,e.height]:e.width!=null&&e.height==null?i=[e.width,e.width]:e.width==null&&e.height==null&&(i=null);let a=n[0]-(r.left+r.right),o=n[1]-(r.top+r.bottom),s,c,l=e.area||{x:0,y:0,width:a,height:o};if(i){let e=a/o,t=i[0]/i[1];if(t>e){let e=l.width/t;l={x:l.x,y:Math.round(l.y+(l.height-e)/2),width:l.width,height:Math.round(e)}}else{let e=l.height*t;l={x:Math.round(l.x+(l.width-e)/2),y:l.y,width:Math.round(e),height:l.height}}}else i=[l.width,l.height];return i[0]>l.width?(s=Math.min(i[0]/l.width,t),c=i[0]/l.width/s):(s=1,c=i[0]/l.width),{cropArea:{x:Math.round((l.x+r.left)*s),y:Math.round((l.y+r.top)*s),width:Math.round(l.width*s),height:Math.round(l.height*s)},outputScale:c,resolutionScale:s}}var zge=e=>e.includes(`Brush`),Rq=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),zge(e)&&this.record(`Esri.FirstDraw`),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},zq=Symbol(`analyses-owner-handles`),Bq=class extends F{constructor(e){super(e),this._allAnalysisViews=new W,this._creatingViewCount=0,this._attachedToViewResolver=Vq(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(e,t)=>this.view.emit(e,t)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Si(`AnalysisViewManager was destroyed`)),this._set(`view`,null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Si()),this._attachedToViewResolver=Vq()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;let t=this._items.get(e);if(t==null||t.state.list===1)throw new D(`AnalysisViewManager:no-analysis-view-for-analysis`,`The analysis does not exist in view.analyses`,{analysis:e});return t.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),zq)}_disconnectOwners(){this.removeHandles(zq),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(let t of e)this._addAnalysis(t);let t=e.on(`after-add`,e=>this._addAnalysis(e.item)),n=e.on(`after-remove`,e=>this._removeAnalysis(e.item));return Yt(()=>{t.remove(),n.remove();for(let t of e)this._removeAnalysis(t)})}_addAnalysis(e){let t=this._items.get(e);if(t==null){let t={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,t),t.createAnalysisViewTask=Bw(n=>this._createAnalysisViewPromise(t,n).then(t=>(this._emitOnView(`analysis-view-create`,{analysis:e,analysisView:t}),t),t=>{throw this._emitOnView(`analysis-view-create-error`,{analysis:e,error:t}),t}))}else t.state.list=0}_removeAnalysis(e){let t=this._items.get(e);t==null?E.getLogger(this).error(`Trying to remove analysis which was not added`):(t.state.list=1,this._scheduleUpdate())}_scheduleUpdate(){this._scheduledUpdateHandle??=Qi(()=>this._update())}_update(){this._scheduledUpdateHandle=Br(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;let{analysis:t,view:n}=e;switch(this._items.delete(t),e.state.view){case 0:e.createAnalysisViewTask=Vr(e.createAnalysisViewTask);break;case 1:n!=null&&(this._allAnalysisViews.remove(n),e.view=zr(n),e.createAnalysisViewTask=null,this._emitOnView(`analysis-view-destroy`,{analysis:t,analysisView:n}))}})}async _createAnalysisViewPromise(e,t){let{analysis:n}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(n.type))try{this._moduleMap.set(n.type,await this.importAnalysisViewModule(n))}catch{throw--this._creatingViewCount,new D(`AnalysisViewManager:no-analysis-view-for-analysis`,`Analysis of type "${n.type}" is not supported`)}if(Ti(t))throw--this._creatingViewCount,Si(`AnalysisView creation aborted`);let r=new(this._moduleMap.get(n.type)).default({analysis:n,view:this.view}),i=!0;Oi(t,()=>{i&&this._destroyAnalysisView(n,r)});try{await r.when()}catch(e){throw i=!1,this._destroyAnalysisView(n,r),e}if(Ti(t))throw Si();return i=!1,e.view=r,e.state.view=1,this._allAnalysisViews.add(r),--this._creatingViewCount,r}_destroyAnalysisView(e,t){t.destroyed||(--this._creatingViewCount,t.destroy(),this._emitOnView(`analysis-view-destroy`,{analysis:e,analysisView:t}))}};e([O()],Bq.prototype,`updating`,null),e([O({constructOnly:!0})],Bq.prototype,`importAnalysisViewModule`,void 0),e([O({constructOnly:!0})],Bq.prototype,`view`,void 0),e([O()],Bq.prototype,`_allAnalysisViews`,void 0),e([O()],Bq.prototype,`_creatingViewCount`,void 0),Bq=e([hr(`esri.views.support.AnalysisViewManager`)],Bq);var Bge=Bq;function Vq(){let e=zi();return e.promise.catch(()=>{}),e}var Vge=class{constructor(e){this.getUnmaskedRenderer=e}};function Hq(e){let t=e.getExtension(`WEBGL_debug_renderer_info`);return t?new Vge(()=>e.getParameter(t.UNMASKED_RENDERER_WEBGL)):null}var Uq;function Wq(){return Uq??=Wge(),Uq}var Hge=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer=`unloaded`}};function Uge(e){if(typeof WebGL2RenderingContext>`u`)return null;let t=document.createElement(`canvas`);if(!t)return null;let n=t.getContext(`webgl2`,{failIfMajorPerformanceCaveat:!0});if(n??(n=t.getContext(`webgl2`),n!=null&&(e.majorPerformanceCaveat=!0,e.unmaskedRenderer=Hq(n)?.getUnmaskedRenderer()??`unknown`)),n==null)return n;e.available=!0,e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;let r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),n}function Wge(){let e=new Hge,t=Uge(e);return t==null||(e.supportsColorBufferFloat=t.getExtension(`EXT_color_buffer_float`)!==null,e.supportsColorBufferFloatBlend=t.getExtension(`EXT_float_blend`)!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension(`EXT_color_buffer_half_float`)!==null),e}function Gge(e){let t=Wq();return t.available?e===`3d`&&t.majorPerformanceCaveat?new D(`webgl:major-performance-caveat-detected`,`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new D(`webgl:vertex-shader-samplers-required`,`WebGL support for vertex shader samplers is required but not supported.`):new D(`webgl:high-precision-fragment-required`,`WebGL support for high precision fragment shaders is required but not supported.`):new D(`webgl:required`,`WebGL2 is required but not supported.`,Error().stack)}function Kge(e){return e&&`nodeType`in e}function qge(e){return e&&typeof e.render==`function`}var Gq={component:`esri-component`},Kq=class extends F{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get(`id`)??this.widget?.id??this.node?.id}set id(e){this._set(`id`,e)}set node(e){let t=this._get(`node`);e!==t&&(e&&e.classList.add(Gq.component),t&&t.classList.remove(Gq.component),this._set(`node`,e))}castNode(e){return this.widget?.destroy(),e?typeof e==`string`||Kge(e)?(this._set(`widget`,null),aC(e)):(qge(e)&&!e.domNode&&(e.domNode=document.createElement(`div`)),this._set(`widget`,e),e.domNode):(this._set(`widget`,null),null)}};e([N()],Kq.prototype,`id`,null),e([N()],Kq.prototype,`node`,null),e([Tr(`node`)],Kq.prototype,`castNode`,null),e([N({readOnly:!0})],Kq.prototype,`widget`,void 0),Kq=e([P(`esri.views.ui.Component`)],Kq);var qq=Kq,Jq=Symbol(`widget`),Yq=Symbol(`widget-test-data`),Jge=[],Yge={},Xq=new Map;function Zq(e,t){let n=t.children;if(n?.length)for(let t=0;t<n.length;++t)n[t]=Zq(e,n[t]);else n=Jge;let r=t.vnodeSelector;if($q(r)){let i=t.properties||Yge,a=i.key||r,o={key:a,afterCreate:Xge,afterUpdate:Zge,afterRemoved:Qq,parentWidget:e,widgetConstructor:r,widgetProperties:{...i,key:a,children:n}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function Xge(e,t,n,{parentWidget:r,widgetConstructor:i,widgetProperties:a}){let o=new i(a);o.container=e,Xq.set(e,o),o.afterCreate?.(o,e),r.addHandles(Yt(()=>Qq(e))),queueMicrotask(()=>{o[Yq].projector?.renderNow()})}function Zge(e,t,n,{widgetProperties:r}){let i=Xq.get(e);i&&(i.set(r),i.afterUpdate?.(i,e))}function Qq(e){let t=Xq.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),Xq.delete(e))}function $q(e){return typeof e==`function`&&e[Jq]}var eJ=new Map;function tJ(){eJ.clear()}function Qge(e){return eJ.get(e)}function $ge(e,t){eJ.set(e,t)}function nJ(e){eJ.delete(e)}function e_e(...e){let t=oi.acquire();for(let n=0;n<e.length;n++){let r=e[n],i=typeof r;if(i===`string`)t.push(r);else if(Array.isArray(r))t.push.apply(t,r);else if(i===`object`)for(let e in r)r[e]&&t.push(e)}let n=t.join(` `);return oi.release(t),n}(()=>{let e=new Map,t=new ResizeObserver(t=>{tJ();for(let n of t)e.get(n.target)?.(n)}),n=(n,r,i)=>(e.set(n,r),t.observe(n,i),Yt(()=>{t.unobserve(n),e.delete(n)}));return(e,t,r)=>{let i=null;return Qt([G(()=>typeof e==`function`?e():e,e=>{i?.remove(),e&&(i=n(e,t,r))},Jh),Yt(()=>i?.remove())])}})();function rJ(e){let t=e?.closest(`[dir]`);return t!==null&&t instanceof HTMLElement&&t.dir===`rtl`||document.dir===`rtl`}function t_e(e){this[e.getAttribute(`data-node-ref`)]=null}function n_e(e){this[e.getAttribute(`data-node-ref`)]=e}async function iJ(e,t){await sa(wi(t));let n=typeof e==`function`?e():e;n&&(`setFocus`in n&&typeof n.setFocus==`function`?await n.setFocus():n instanceof HTMLElement&&n.focus())}function r_e(){return function(e,t){if(!e[t])throw TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:a_e(e[t])}}}function i_e(e){let t=e?.type;return e instanceof KeyboardEvent||t===`keyup`||t===`keydown`||t===`keypress`}function a_e(e){return function(t,...n){i_e(t)?sC(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...n)}}function o_e(e){return(t,n)=>{t.hasOwnProperty(`_messageBundleProps`)||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:n})}}function s_e(e){return t=>{t.hasOwnProperty(`_delegatedEventNames`)||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);let n=t._delegatedEventNames;e=Array.isArray(e)?e:c_e(e),n.push(...e)}}function c_e(e){return e.split(`,`).map(e=>e.trim())}var l_e=function(e){return{vnodeSelector:``,properties:void 0,children:void 0,text:e.toString(),domNode:null}},aJ=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?aJ(i,t):i!=null&&!1!==i&&(i.hasOwnProperty(`vnodeSelector`)||(i=l_e(i)),t.push(i))}},u_e=function(e,t){var n=[...arguments].slice(2);if(n.length===1&&typeof n[0]==`string`)return{vnodeSelector:e,properties:t||void 0,children:void 0,text:n[0],domNode:null};var r=[];return aJ(n,r),{vnodeSelector:e,properties:t||void 0,children:r,text:void 0,domNode:null}},d_e=r_e,oJ=e_e,sJ=o_e,cJ=s_e,lJ=rJ;function uJ(e,t,...n){return typeof e!=`function`||$q(e)?u_e(e,t??null,...n):e(t,...n)}function f_e(...e){return e}function p_e(e){return e&&typeof e.render==`function`}function m_e(e){return e&&typeof e.postMixInProperties==`function`&&typeof e.buildRendering==`function`&&typeof e.postCreate==`function`&&typeof e.startup==`function`}var h_e={left:0,top:0,bottom:0,right:0},dJ={bottom:30,top:15,right:15,left:15},fJ=`esri-ui`,pJ={ui:fJ,corner:`${fJ}-corner`,innerContainer:`${fJ}-inner-container`,manualContainer:`${fJ}-manual-container`,cornerContainer:`${fJ}-corner-container`,topLeft:`${fJ}-top-left`,topRight:`${fJ}-top-right`,bottomLeft:`${fJ}-bottom-left`,bottomRight:`${fJ}-bottom-right`};function g_e(e){return e&&!e._started&&typeof e.postMixInProperties==`function`&&typeof e.buildRendering==`function`&&typeof e.postCreate==`function`&&typeof e.startup==`function`}function mJ(e){return e===0?`0`:`${e}px`}function hJ(e){let t=typeof e==`object`&&!!e&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&(`component`in e||`index`in e||`position`in e)?e:null}function gJ(e,{top:t,bottom:n,left:r,right:i}){e.style.top=t,e.style.bottom=n,e.style.left=r,e.style.right=i}var _J=class extends Dh{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=[],this._componentMap=new Map,this._removeWidgetHandleKey=Symbol(`componentOnRemoveSymbol`),this._locale=lx(),this.view=null,this._applyViewPadding=()=>{let e=this.container;e&&gJ(e,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let e=this._innerContainer;e&&gJ(e,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([G(()=>[this.view?.padding,this.container],this._applyViewPadding,qh),G(()=>this.padding,this._applyUIPadding,qh),G(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute(`lang`,t)},qh),ux(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(let e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set(`view`,null)}set container(e){let t=this._get(`container`);e!==t&&(e&&(e.classList.add(pJ.ui),YC(e),this._attachContainers(e)),t&&(t.classList.remove(pJ.ui),gJ(t,{top:``,bottom:``,left:``,right:``}),t.textContent=``),this._set(`container`,e))}get height(){let e=this.view?.height??0;if(e===0)return e;let t=this._getViewPadding(),{top:n,bottom:r}=t;return Math.max(e-n-r,0)}get padding(){return this._get(`padding`)}set padding(e){this._overrideIfSome(`padding`,e)}castPadding(e){return typeof e==`number`?{bottom:e,top:e,right:e,left:e}:{...dJ,...e}}get width(){let e=this.view?.width??0;if(e===0)return e;let t=this._getViewPadding(),{left:n,right:r}=t;return Math.max(e-n-r,0)}add(e,t){let n,r,i;if(Array.isArray(e))return void e.forEach(e=>this.add(e,t));let a=hJ(e);a&&({index:n,position:t,component:e,key:r}=a),t&&typeof t==`object`&&({index:n,key:r,position:t,internal:i}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n??this._getNumComponentsAtPosition(t),r,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(e=>this.remove(e,t));let n=this._find(e);if(n){let e=this._componentMap.get(n);if(!e||e.key!==t)return;let r=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),n.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(t=>{let n=this._componentMap.get(t);n&&n.position===e.position&&n.index>e.index&&n.index--}),this._components.splice(r,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(let n of e)this.empty(n,t);return}let n=this._positionNameToContainerLookup[e??`manual`],r=Array.prototype.slice.call(n.children).map(e=>this._findByNode(e)).filter(e=>e==null?!1:!(this._componentMap.get(e)?.internal??!1)||t.removeInternal);for(let e of r)this.remove(e)}move(e,t){if(Array.isArray(e)&&e.forEach(e=>this.move(e,t)),!e)return;let n,r=hJ(e)||hJ(t);if(r&&(n=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;let i=this.remove(e);i&&this.add(i,{position:t,index:n})}find(e){if(!e)return null;let t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(e=>this._getComponentsAtPosition(e,t)):this._getComponentsAtPosition(e,t):this._components.filter(e=>t.includeInternal||!this._componentMap.get(e)?.internal).map(({widget:e,node:t})=>e??t)}getPosition(e){for(let t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,r,i){e instanceof qq||(e=new qq({node:e}));let{widget:a}=e;a!=null&&a instanceof F&&a.addHandles(Yt(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);let o=this._positionNameToContainerLookup[t];this._components.some(e=>{let t=this._componentMap.get(e)?.position,r=t?this._positionNameToContainerLookup[t]:null;return o===r&&this._componentMap.get(e)?.index===n})&&this._components.forEach(e=>{let t=this._componentMap.get(e),r=t?.position,i=r?this._positionNameToContainerLookup[r]:null;t&&i===o&&t.index>=n&&t.index++}),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:r,position:t,internal:i,index:n})}_find(e){return e?e instanceof qq?this._findByComponent(e):typeof e==`string`?this._findById(e):`domNode`in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??h_e}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){let e=document.createElement(`div`);e.classList.add(pJ.innerContainer,pJ.cornerContainer);let t=document.createElement(`div`);t.classList.add(pJ.innerContainer,pJ.manualContainer);let n=document.createElement(`div`);n.classList.add(pJ.topLeft,pJ.corner),e.appendChild(n);let r=document.createElement(`div`);r.classList.add(pJ.topRight,pJ.corner),e.appendChild(r);let i=document.createElement(`div`);i.classList.add(pJ.bottomLeft,pJ.corner),e.appendChild(i);let a=document.createElement(`div`);a.classList.add(pJ.bottomRight,pJ.corner),e.appendChild(a),this._innerContainer=e,this._manualContainer=t;let o=lJ();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":i,"bottom-right":a,"top-leading":o?r:n,"top-trailing":o?n:r,"bottom-leading":o?a:i,"bottom-trailing":o?i:a},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){let t=e.position??`manual`,{component:n,index:r}=e,i=this._positionNameToContainerLookup[t],a=r!=null&&r>-1;if(g_e(n.widget)&&n.widget.startup(),!a)return void i.appendChild(n.node);let o=Array.from(i.children);if(o.length!==0){for(let e of o){let t=this._findByNode(e);if(t&&r<(this._componentMap.get(t)?.index??0))return void e.parentNode?.insertBefore(n.node,e)}i.appendChild(n.node)}else i.appendChild(n.node)}_toPixelPosition(e){return{top:mJ(e.top),left:mJ(e.left),right:mJ(e.right),bottom:mJ(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return e?this._components.find(({node:t})=>t===e):null}_getComponentsAtPosition(e,t){let n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(e=>this._findByNode(e)).filter(ge).filter(e=>t.includeInternal||!this._componentMap.get(e)?.internal).map(({widget:e,node:t})=>e??t)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};e([N()],_J.prototype,`_locale`,void 0),e([N()],_J.prototype,`container`,null),e([N()],_J.prototype,`height`,null),e([N({value:dJ})],_J.prototype,`padding`,null),e([Tr(`padding`)],_J.prototype,`castPadding`,null),e([N()],_J.prototype,`view`,void 0),e([N()],_J.prototype,`width`,null),_J=e([P(`esri.views.ui.UI`)],_J);var __e=_J,v_e={handleInterceptedEvent:(e,t,n,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||n,[r]))},y_e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,n)=>{t.startsWith(`-`)?e.style.setProperty(t,n):e.style[t]=n}},b_e=e=>({...y_e,...e}),x_e=(e,t)=>{let n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n},S_e=(e,t)=>e.find(t),vJ=(e,t,n=!1)=>{let r=e;return t.forEach((e,i)=>{let a=r?.children?S_e(r.children,t=>t.domNode===e):void 0;n&&!a&&i!==t.length-1||(r=a)}),r},C_e=e=>{let t,n={...v_e,...e},r=b_e(n),i=r.performanceLogger,a,o=!0,s=!1,c=[],l=[],u=(e,a,o)=>{let s;r.eventHandlerInterceptor=(e,r,a,o)=>function(e){let r;i(`domEvent`,e);let a=x_e(e.currentTarget,s.domNode),o=a.some(e=>customElements.get(e?.tagName?.toLowerCase()));if(e.eventPhase===Event.CAPTURING_PHASE||!o)a.reverse(),r=vJ(s.getLastRender(),a);else{let t=e.composedPath(),n=t.slice(t.indexOf(e.currentTarget),t.indexOf(s.domNode)).reverse();r=vJ(s.getLastRender(),n,!0)}let c;return r&&(c=n.handleInterceptedEvent(t,r,this,e)),i(`domEventProcessed`,e),c},n.postProcessProjectionOptions?.(r);let u=o();s=e(a,u,r),r.eventHandlerInterceptor=void 0,c.push(s),l.push(o),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(s,u)},d=()=>{if(a=void 0,o){o=!1,i(`renderStart`,void 0);for(let e=0;e<c.length;e++){let t=l[e]();i(`rendered`,void 0);try{c[e].update(t)}catch(e){console.error(e)}i(`patched`,void 0)}i(`renderDone`,void 0),o=!0}};return n.modifyDoRenderImplementation&&(d=n.modifyDoRenderImplementation(d,c,l)),t={renderNow:d,scheduleRender:()=>{a||s||(a=requestAnimationFrame(d))},stop:()=>{a&&=(cancelAnimationFrame(a),void 0),s=!0},resume:()=>{s=!1,o=!0,t.scheduleRender()},append:(e,t)=>{u(Cw.append,e,t)},insertBefore:(e,t)=>{u(Cw.insertBefore,e,t)},merge:(e,t)=>{u(Cw.merge,e,t)},replace:(e,t)=>{u(Cw.replace,e,t)},detach:e=>{for(let t=0;t<l.length;t++)if(l[t]===e)return l.splice(t,1),c.splice(t,1)[0];throw Error(`renderFunction was not found`)}},t},yJ=(e,t,...n)=>{try{return e?.call(t,...n)}catch(t){console.error(t,e)}},bJ=async(e,t,...n)=>{try{return await e?.call(t,...n)}catch(t){console.error(t,e)}},xJ=Symbol.for(`controller`),w_e=e=>typeof e==`object`&&!!e&&(xJ in e||`hostConnected`in e||`hostDisconnected`in e||`hostUpdate`in e||`hostUpdated`in e),T_e=e=>typeof e?.then==`function`,SJ,CJ=e=>{SJ!==e&&(SJ=e,queueMicrotask(()=>SJ===e?SJ=void 0:0))},wJ=e=>SJ,TJ=[],EJ=e=>{if(e===void 0){TJ=[];return}let t=TJ.indexOf(e);TJ=t===-1?[...TJ,e]:TJ.slice(0,t+1),queueMicrotask(()=>TJ=[])},DJ=()=>TJ,OJ,E_e=e=>{OJ!==e&&(OJ=e,queueMicrotask(()=>OJ===e?OJ=void 0:0))},D_e=()=>{let e=OJ;return OJ=void 0,e},O_e=async(e,t)=>{let n=kJ(e);if(n===void 0)return e;if(await n.ready,typeof t==`function`){let e=n.watchExports(exports=>t(exports,e))}return n.exports},k_e=async e=>{let t=kJ(e);return await t.ready,t},kJ=e=>{let t=wJ().manager.X(e);if(t!==void 0)return t;if(w_e(e))return e;let n=D_e();if(n!==void 0)return n},AJ=!1,A_e=e=>{AJ=!0;try{return e()}finally{AJ=!1}},jJ=globalThis,MJ=jJ.ShadowRoot&&(jJ.ShadyCSS===void 0||jJ.ShadyCSS.nativeShadow)&&`adoptedStyleSheets`in Document.prototype&&`replace`in CSSStyleSheet.prototype,NJ=Symbol(),PJ=new WeakMap,FJ=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==NJ)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(MJ&&e===void 0){let n=t!==void 0&&t.length===1;n&&(e=PJ.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&PJ.set(t,e))}return e}toString(){return this.cssText}},j_e=e=>new FJ(typeof e==`string`?e:e+``,void 0,NJ),M_e=(e,...t)=>{let n=e.length===1?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if(typeof e==`number`)return e;throw Error(`Value passed to 'css' function must be a 'css' function result: `+e+`. Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.`)})(n)+e[r+1]),e[0]);return new FJ(n,e,NJ)},N_e=(e,t)=>{if(MJ)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(let n of t){let t=document.createElement(`style`),r=jJ.litNonce;r!==void 0&&t.setAttribute(`nonce`,r),t.textContent=n.cssText,e.appendChild(t)}},IJ=MJ?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t=``;for(let n of e.cssRules)t+=n.cssText;return j_e(t)})(e):e,{is:P_e,defineProperty:F_e,getOwnPropertyDescriptor:I_e,getOwnPropertyNames:L_e,getOwnPropertySymbols:R_e,getPrototypeOf:z_e}=Object,LJ=globalThis,RJ=LJ.trustedTypes,B_e=RJ?RJ.emptyScript:``,V_e=LJ.reactiveElementPolyfillSupport,zJ=(e,t)=>e,BJ={toAttribute(e,t){switch(t){case Boolean:e=e?B_e:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},VJ=(e,t)=>!P_e(e,t),HJ={attribute:!0,type:String,converter:BJ,reflect:!1,useDefault:!1,hasChanged:VJ};Symbol.metadata??=Symbol(`metadata`),LJ.litPropertyMetadata??=new WeakMap;var UJ=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=HJ){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let n=Symbol(),r=this.getPropertyDescriptor(e,n,t);r!==void 0&&F_e(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){let{get:r,set:i}=I_e(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:r,set(t){let a=r?.call(this);i?.call(this,t),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??HJ}static _$Ei(){if(this.hasOwnProperty(zJ(`elementProperties`)))return;let e=z_e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(zJ(`finalized`)))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(zJ(`properties`))){let e=this.properties,t=[...L_e(e),...R_e(e)];for(let n of t)this.createProperty(n,e[n])}let e=this[Symbol.metadata];if(e!==null){let t=litPropertyMetadata.get(e);if(t!==void 0)for(let[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(let[e,t]of this.elementProperties){let n=this._$Eu(e,t);n!==void 0&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let n=new Set(e.flat(1/0).reverse());for(let e of n)t.unshift(IJ(e))}else e!==void 0&&t.push(IJ(e));return t}static _$Eu(e,t){let n=t.attribute;return!1===n?void 0:typeof n==`string`?n:typeof e==`string`?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,t=this.constructor.elementProperties;for(let n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return N_e(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){let n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(r!==void 0&&!0===n.reflect){let i=(n.converter?.toAttribute===void 0?BJ:n.converter).toAttribute(t,n.type);this._$Em=e,i==null?this.removeAttribute(r):this.setAttribute(r,i),this._$Em=null}}_$AK(e,t){let n=this.constructor,r=n._$Eh.get(e);if(r!==void 0&&this._$Em!==r){let e=n.getPropertyOptions(r),i=typeof e.converter==`function`?{fromAttribute:e.converter}:e.converter?.fromAttribute===void 0?BJ:e.converter;this._$Em=r;let a=i.fromAttribute(t,e.type);this[r]=a??this._$Ej?.get(r)??a,this._$Em=null}}requestUpdate(e,t,n){if(e!==void 0){let r=this.constructor,i=this[e];if(n??=r.getPropertyOptions(e),!((n.hasChanged??VJ)(i,t)||n.useDefault&&n.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(r._$Eu(e,n))))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:r,wrapped:i},a){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,a??t??this[e]),!0!==i||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),!0===r&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}let e=this.constructor.elementProperties;if(e.size>0)for(let[t,n]of e){let{wrapped:e}=n,r=this[t];!0!==e||this._$AL.has(t)||r===void 0||this.C(t,void 0,n,r)}}let e=!1,t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((e=>this._$ET(e,this[e]))),this._$EM()}updated(e){}firstUpdated(e){}};UJ.elementStyles=[],UJ.shadowRootOptions={mode:`open`},UJ[zJ(`elementProperties`)]=new Map,UJ[zJ(`finalized`)]=new Map,V_e?.({ReactiveElement:UJ}),(LJ.reactiveElementVersions??=[]).push(`2.1.1`);
/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/
var WJ=globalThis,GJ=WJ.trustedTypes,KJ=GJ?GJ.createPolicy(`lit-html`,{createHTML:e=>e}):void 0,qJ=`$lit$`,JJ=`lit$${Math.random().toFixed(9).slice(2)}$`,YJ=`?`+JJ,H_e=`<${YJ}>`,XJ=document,ZJ=()=>XJ.createComment(``),QJ=e=>e===null||typeof e!=`object`&&typeof e!=`function`,$J=Array.isArray,eY=e=>$J(e)||typeof e?.[Symbol.iterator]==`function`,tY=`[ 	
\f\r]`,nY=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,rY=/-->/g,iY=/>/g,aY=RegExp(`>|${tY}(?:([^\\s"'>=/]+)(${tY}*=${tY}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,`g`),oY=/'/g,sY=/"/g,cY=/^(?:script|style|textarea|title)$/i,lY=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),U_e=lY(1),W_e=lY(2),G_e=lY(3),uY=Symbol.for(`lit-noChange`),dY=Symbol.for(`lit-nothing`),fY=new WeakMap,pY=XJ.createTreeWalker(XJ,129);function mY(e,t){if(!$J(e)||!e.hasOwnProperty(`raw`))throw Error(`invalid template strings array`);return KJ===void 0?t:KJ.createHTML(t)}var hY=(e,t)=>{let n=e.length-1,r=[],i,a=t===2?`<svg>`:t===3?`<math>`:``,o=nY;for(let t=0;t<n;t++){let n=e[t],s,c,l=-1,u=0;for(;u<n.length&&(o.lastIndex=u,c=o.exec(n),c!==null);)u=o.lastIndex,o===nY?c[1]===`!--`?o=rY:c[1]===void 0?c[2]===void 0?c[3]!==void 0&&(o=aY):(cY.test(c[2])&&(i=RegExp(`</`+c[2],`g`)),o=aY):o=iY:o===aY?c[0]===`>`?(o=i??nY,l=-1):c[1]===void 0?l=-2:(l=o.lastIndex-c[2].length,s=c[1],o=c[3]===void 0?aY:c[3]===`"`?sY:oY):o===sY||o===oY?o=aY:o===rY||o===iY?o=nY:(o=aY,i=void 0);let d=o===aY&&e[t+1].startsWith(`/>`)?` `:``;a+=o===nY?n+H_e:l>=0?(r.push(s),n.slice(0,l)+qJ+n.slice(l)+JJ+d):n+JJ+(l===-2?t:d)}return[mY(e,a+(e[n]||`<?>`)+(t===2?`</svg>`:t===3?`</math>`:``)),r]},gY=class e{constructor({strings:t,_$litType$:n},r){let i;this.parts=[];let a=0,o=0,s=t.length-1,c=this.parts,[l,u]=hY(t,n);if(this.el=e.createElement(l,r),pY.currentNode=this.el.content,n===2||n===3){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;(i=pY.nextNode())!==null&&c.length<s;){if(i.nodeType===1){if(i.hasAttributes())for(let e of i.getAttributeNames())if(e.endsWith(qJ)){let t=u[o++],n=i.getAttribute(e).split(JJ),r=/([.?@])?(.*)/.exec(t);c.push({type:1,index:a,name:r[2],strings:n,ctor:r[1]===`.`?xY:r[1]===`?`?SY:r[1]===`@`?CY:bY}),i.removeAttribute(e)}else e.startsWith(JJ)&&(c.push({type:6,index:a}),i.removeAttribute(e));if(cY.test(i.tagName)){let e=i.textContent.split(JJ),t=e.length-1;if(t>0){i.textContent=GJ?GJ.emptyScript:``;for(let n=0;n<t;n++)i.append(e[n],ZJ()),pY.nextNode(),c.push({type:2,index:++a});i.append(e[t],ZJ())}}}else if(i.nodeType===8)if(i.data===YJ)c.push({type:2,index:a});else{let e=-1;for(;(e=i.data.indexOf(JJ,e+1))!==-1;)c.push({type:7,index:a}),e+=JJ.length-1}a++}}static createElement(e,t){let n=XJ.createElement(`template`);return n.innerHTML=e,n}};function _Y(e,t,n=e,r){if(t===uY)return t;let i=r===void 0?n._$Cl:n._$Co?.[r],a=QJ(t)?void 0:t._$litDirective$;return i?.constructor!==a&&(i?._$AO?.(!1),a===void 0?i=void 0:(i=new a(e),i._$AT(e,n,r)),r===void 0?n._$Cl=i:(n._$Co??=[])[r]=i),i!==void 0&&(t=_Y(e,i._$AS(e,t.values),i,r)),t}var vY=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:n}=this._$AD,r=(e?.creationScope??XJ).importNode(t,!0);pY.currentNode=r;let i=pY.nextNode(),a=0,o=0,s=n[0];for(;s!==void 0;){if(a===s.index){let t;s.type===2?t=new yY(i,i.nextSibling,this,e):s.type===1?t=new s.ctor(i,s.name,s.strings,this,e):s.type===6&&(t=new wY(i,this,e)),this._$AV.push(t),s=n[++o]}a!==s?.index&&(i=pY.nextNode(),a++)}return pY.currentNode=XJ,r}p(e){let t=0;for(let n of this._$AV)n!==void 0&&(n.strings===void 0?n._$AI(e[t]):(n._$AI(e,n,t),t+=n.strings.length-2)),t++}},yY=class e{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,r){this.type=2,this._$AH=dY,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=_Y(this,e,t),QJ(e)?e===dY||e==null||e===``?(this._$AH!==dY&&this._$AR(),this._$AH=dY):e!==this._$AH&&e!==uY&&this._(e):e._$litType$===void 0?e.nodeType===void 0?eY(e)?this.k(e):this._(e):this.T(e):this.$(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==dY&&QJ(this._$AH)?this._$AA.nextSibling.data=e:this.T(XJ.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:n}=e,r=typeof n==`number`?this._$AC(e):(n.el===void 0&&(n.el=gY.createElement(mY(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(t);else{let e=new vY(r,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=fY.get(e.strings);return t===void 0&&fY.set(e.strings,t=new gY(e)),t}k(t){$J(this._$AH)||(this._$AH=[],this._$AR());let n=this._$AH,r,i=0;for(let a of t)i===n.length?n.push(r=new e(this.O(ZJ()),this.O(ZJ()),this,this.options)):r=n[i],r._$AI(a),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){let t=e.nextSibling;e.remove(),e=t}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},bY=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,r,i){this.type=1,this._$AH=dY,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=i,n.length>2||n[0]!==``||n[1]!==``?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=dY}_$AI(e,t=this,n,r){let i=this.strings,a=!1;if(i===void 0)e=_Y(this,e,t,0),a=!QJ(e)||e!==this._$AH&&e!==uY,a&&(this._$AH=e);else{let r=e,o,s;for(e=i[0],o=0;o<i.length-1;o++)s=_Y(this,r[n+o],t,o),s===uY&&(s=this._$AH[o]),a||=!QJ(s)||s!==this._$AH[o],s===dY?e=dY:e!==dY&&(e+=(s??``)+i[o+1]),this._$AH[o]=s}a&&!r&&this.j(e)}j(e){e===dY?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??``)}},xY=class extends bY{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===dY?void 0:e}},SY=class extends bY{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==dY)}},CY=class extends bY{constructor(e,t,n,r,i){super(e,t,n,r,i),this.type=5}_$AI(e,t=this){if((e=_Y(this,e,t,0)??dY)===uY)return;let n=this._$AH,r=e===dY&&n!==dY||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==dY&&(n===dY||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH==`function`?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},wY=class{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){_Y(this,e)}},K_e={M:qJ,P:JJ,A:YJ,C:1,L:hY,R:vY,D:eY,V:_Y,I:yY,H:bY,N:SY,U:CY,B:xY,F:wY},q_e=WJ.litHtmlPolyfillSupport;q_e?.(gY,yY),(WJ.litHtmlVersions??=[]).push(`3.3.1`);var J_e=(e,t,n)=>{let r=n?.renderBefore??t,i=r._$litPart$;if(i===void 0){let e=n?.renderBefore??null;r._$litPart$=i=new yY(t.insertBefore(ZJ(),e),e,void 0,n??{})}return i._$AI(e),i},TY=globalThis,EY=class extends UJ{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=J_e(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return uY}};EY._$litElement$=!0,EY.finalized=!0,TY.litElementHydrateSupport?.({LitElement:EY});var Y_e=TY.litElementPolyfillSupport;Y_e?.({LitElement:EY}),(TY.litElementVersions??=[]).push(`4.2.1`);
/**
* @license
* Copyright 2022 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/
var X_e=!1,DY=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}},Z_e=(e,t)=>{let n=t>Q_e?$_e:t/eve,r=0,i=setInterval(()=>{r+=n,r>=t&&(clearInterval(i),e())},n);return i},Q_e=4e3,$_e=2e3,eve=4,tve=(e,t,n)=>{let r=Object.keys(e),i=r.length;OY===void 0&&queueMicrotask(kY),OY??=new Map;let a=OY.get(e);return a===void 0&&(a={callbacks:[],keyCount:i},OY.set(e,a)),a.keyCount!==i&&(a.callbacks.forEach(e=>e(r)),a.callbacks=[],a.keyCount=i),a.callbacks.push(r=>{let a=e=>yJ(t,null,e),o=r[i];o===void 0?a(void 0):e[o]===n?a(o):a(void 0)}),n},OY=void 0,kY=()=>{OY?.forEach(({callbacks:e},t)=>{let n=Object.keys(t);e.forEach(e=>e(n))}),OY=void 0},nve=(e,t,n)=>{let r=e.manager;return r.V!==dY&&r.V!==n&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=n,r.T.push((e,r)=>yJ(t,void 0,n===r?e:void 0)),n},AY=(e=[wJ(),...DJ()],t,n)=>{let r=Array.isArray(e)?e:[e],i=r.length+1,a=e=>{--i,e!==void 0&&(i=Math.min(i,0)),i===0&&t(e)};r.forEach(e=>tve(e,t=>a(t===void 0?void 0:{key:t,host:e,isReactive:!1}),n));for(let e of r)if(`manager`in e&&e.manager.component===e){nve(e,t=>a(t===void 0?void 0:{key:t,host:e,isReactive:!0}),n);break}return n},rve=((e=``,t={},n=wJ())=>{let r={emit:r=>{e===``&&kY();let i=new CustomEvent(e,{detail:r,cancelable:!0,bubbles:!0,composed:!0,...t});return n.el.dispatchEvent(i),i}};return e===``&&AY(void 0,t=>e=t.key,r),r}).bind(null,``),ive=xJ,jY=class{constructor(e){this.#hostConnected=[],this.#hostDisconnected=[],this.#hostLoad=[],this.#hostLoaded=[],this.#hostUpdate=[],this.#hostUpdated=[],this.#hostDestroy=[],this.#hostLifecycle=[],this.#lifecycleCleanups=[],this.#loadCalled=!1,this.P=new DY,this.connectedCalled=!1,this.loadedCalled=!1,this[ive]=!0,this.#exportWatchers=[];let t=this,n=e??wJ(new.target.name);t.#component=n,t.ready=t.P.promise,t.#exports=NY(t),t.component=n,t.#component.addController(t),t.#component.manager!==void 0&&(EJ(t),queueMicrotask(()=>t.catchUpLifecycle()))}#hostConnected;#hostDisconnected;#hostLoad;#hostLoaded;#hostUpdate;#hostUpdated;#hostDestroy;#hostLifecycle;#lifecycleCleanups;#loadCalled;#component;catchUpLifecycle(){let{manager:e}=this.#component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#loadCalled&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#exports;get exports(){return this.#exports}set exports(exports){let t=this.#exports;t!==exports&&(this.#exports=exports,this.#exportWatchers.forEach(yJ),this.connectedCalled&&this.O!==!1&&this.#component.requestUpdate(this.O,t)),this.P.resolve(exports)}setProvisionalExports(exports,t=!0){this.#exports=t?NY(exports):exports,this.#exportWatchers.forEach(yJ)}#exportWatchers;watchExports(e){let t=()=>e(this.#exports);return this.#exportWatchers.push(t),()=>void this.#exportWatchers.splice(this.#exportWatchers.indexOf(t),1)}get use(){return CJ(this.#component),O_e}get useRef(){return CJ(this.#component),k_e}get useRefSync(){return CJ(this.#component),kJ}controllerRemoved(){this.#component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#hostConnected.push(e)}onDisconnected(e){this.#hostDisconnected.push(e)}onLoad(e){this.#hostLoad.push(e)}onLoaded(e){this.#hostLoaded.push(e)}onUpdate(e){this.#hostUpdate.push(e)}onUpdated(e){this.#hostUpdated.push(e)}onDestroy(e){this.#hostDestroy.push(e)}onLifecycle(e){this.#hostLifecycle.push(e),this.connectedCalled&&this.#component.el.isConnected&&this.#callLifecycle(e)}triggerConnected(){let e=this;e.hostConnected&&yJ(e.hostConnected,e),e.#hostConnected.forEach(yJ),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){let e=this;e.hostDisconnected&&yJ(e.hostDisconnected,e),e.#hostDisconnected.forEach(yJ),e.#lifecycleCleanups.forEach(yJ),e.#lifecycleCleanups=[]}async triggerLoad(){if(this.#loadCalled)return;this.#loadCalled=!0;let e=this;e.hostLoad&&await bJ(e.hostLoad,e),this.#hostLoad.length>0&&await Promise.allSettled(this.#hostLoad.map(bJ)),this.P.resolve(this.#exports)}triggerLoaded(){this.loadedCalled||=(this.hostLoaded&&yJ(this.hostLoaded,this),this.#hostLoaded.forEach(yJ),!0)}triggerUpdate(e){this.hostUpdate&&yJ(this.hostUpdate,this,e),this.#hostUpdate.forEach(MY,e)}triggerUpdated(e){this.hostUpdated&&yJ(this.hostUpdated,this,e),this.#hostUpdated.forEach(MY,e)}triggerDestroy(){this.hostDestroy&&yJ(this.hostDestroy,this),this.#hostDestroy.forEach(yJ)}triggerLifecycle(){this.hostLifecycle&&this.#callLifecycle(()=>this.hostLifecycle()),this.#hostLifecycle.forEach(this.#callLifecycle,this)}#callLifecycle(e){CJ(this.#component);let t=yJ(e);(Array.isArray(t)?t:[t]).forEach(e=>{typeof e==`function`?this.#lifecycleCleanups.push(e):typeof e==`object`&&typeof e.remove==`function`&&this.#lifecycleCleanups.push(e.remove)})}};function MY(e){yJ(e,void 0,this)}var ave=jY,NY=e=>{if(typeof e!=`object`&&typeof e!=`function`||e===null)return e;let t=new Proxy(e,{get(e,n,r){if(!((n===`exports`||n===`_exports`)&&n in e&&e[n]===t)&&(n in e||n in Promise.prototype||typeof n==`symbol`))return typeof e==`function`?e[n]:Reflect.get(e,n,r)}});return t},ove=e=>e.replace(sve,(e,t)=>`${t===0?``:`-`}${e.toLowerCase()}`),sve=/[A-Z]+(?![a-z])|[A-Z]/gu;`randomUUID`in crypto;var PY=e=>{let t=e;for(;t=t.parentNode??t.host;)if(t?.constructor?.lumina){let n=t;return n.manager?.loadedCalled||(n.J??n._offspring).push(e),(n.I??n._postLoad).promise}return!1},FY={};function IY(){}var LY=Object.defineProperty,cve=globalThis.HTMLElement??IY;(class extends cve{constructor(){super(),this.#store={},this.#pendingAttributes=[],this.I=new DY,this.H=new DY,this.J=[];let e=this,t=e.constructor;e._offspring=e.J,e._postLoad=e.I,t.C?.forEach(t=>{Object.hasOwn(e,t)&&(e.#store[t]=e[t],delete e[t])}),t.A?e.#initializeComponent({a:t.A}):t.B.then(async n=>{await t.K.p,e.#initializeComponent(await(n.default?.then(e=>typeof e==`function`?{a:e}:e)??n))}).catch(t=>{e.H.reject(t),setTimeout(()=>{throw t})})}static{this.lumina=!0}static F(){for(let e of this.C??[])LY(this.prototype,e,{configurable:!0,enumerable:!0,get(){return this.#store[e]},set(t){this.#store[e]=t}});for(let e of this.E??[])LY(this.prototype,e,{async value(...t){return this.#litElement||await this.H.promise,await this.#litElement[e](...t)},configurable:!0});for(let e of this.D??[])LY(this.prototype,e,{value(...t){return this.#litElement[e](...t)},configurable:!0})}#litElement;#store;#pendingAttributes;get manager(){return this.#litElement?.manager}attributeChangedCallback(e,t,n){this.#litElement?.attributeChangedCallback(e,t,n),this.#litElement||this.#pendingAttributes.push(e)}connectedCallback(){this.#litElement?this.#litElement.connectedCallback?.():queueMicrotask(()=>this.G=PY(this))}disconnectedCallback(){this.#litElement?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}#initializeComponent(e){let t=this.constructor,n=t.L,r=this.#store,i=Object.values(e).find(e=>e.L===n),a=`${n}--lazy`,o=i;for(;o&&!Object.hasOwn(o,`lumina`);)o=Object.getPrototypeOf(o);uve(o),t.A||(t.A=i,customElements.define(a,i)),i.N=this;let s=document.createElement(a);i.N=void 0,this.#litElement=s,this.#store=s,this.#pendingAttributes.forEach(e=>s.attributeChangedCallback(e,null,this.getAttribute(e))),Object.entries(r).forEach(lve,s);let c=this.isConnected;(c||this.G)&&(s.connectedCallback?.(),c||s.disconnectedCallback())}addController(){}requestUpdate(){this.#litElement?.requestUpdate()}});function lve([e,t]){this[e]=t}var uve=e=>{let t=e.prototype,n=Element.prototype;Object.hasOwn(t,`isConnected`)||(t.setAttribute=function(e,t){n.setAttribute.call(this.el,e,t)},t.removeAttribute=function(e){n.removeAttribute.call(this.el,e)},LY(t,`isConnected`,{get(){return Reflect.get(n,`isConnected`,this.el)}}))},RY={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},zY=e=>(...t)=>({_$litDirective$:e,values:t}),BY=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}},dve=zY(class extends BY{constructor(e){if(super(e),e.type!==RY.ATTRIBUTE||e.name!==`class`||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return` `+Object.keys(e).filter((t=>e[t])).join(` `)+` `}update(e,[t]){if(this.st===void 0){for(let n in this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(` `).split(/\s/).filter((e=>e!==``)))),t)t[n]&&!this.nt?.has(n)&&this.st.add(n);return this.render(t)}let n=e.element.classList;for(let e of this.st)e in t||(n.remove(e),this.st.delete(e));for(let e in t){let r=!!t[e];r===this.st.has(e)||this.nt?.has(e)||(r?(n.add(e),this.st.add(e)):(n.remove(e),this.st.delete(e)))}return uY}}),VY=`important`,fve=` !`+VY,pve=zY(class extends BY{constructor(e){if(super(e),e.type!==RY.ATTRIBUTE||e.name!==`style`||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{let r=e[n];return r==null?t:t+`${n=n.includes(`-`)?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,`-$&`).toLowerCase()}:${r};`}),``)}update(e,[t]){let{style:n}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(let e of this.ft)t[e]??(this.ft.delete(e),e.includes(`-`)?n.removeProperty(e):n[e]=null);for(let e in t){let r=t[e];if(r!=null){this.ft.add(e);let t=typeof r==`string`&&r.endsWith(fve);e.includes(`-`)||t?n.setProperty(e,t?r.slice(0,-11):r,t?VY:``):n[e]=r}}return uY}}),{I:mve}=K_e,HY=e=>e.strings===void 0,hve={},UY=(e,t=hve)=>e._$AH=t,gve=zY(class extends BY{constructor(e){if(super(e),e.type!==RY.PROPERTY&&e.type!==RY.ATTRIBUTE&&e.type!==RY.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!HY(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===uY||t===dY)return t;let n=e.element,r=e.name;if(e.type===RY.PROPERTY){if(t===n[r])return uY}else if(e.type===RY.BOOLEAN_ATTRIBUTE){if(!!t===n.hasAttribute(r))return uY}else if(e.type===RY.ATTRIBUTE&&n.getAttribute(r)===t+``)return uY;return UY(e),t}}),WY=(e,t)=>{let n=e._$AN;if(n===void 0)return!1;for(let e of n)e._$AO?.(t,!1),WY(e,t);return!0},GY=e=>{let t,n;do{if((t=e._$AM)===void 0)break;n=t._$AN,n.delete(e),e=t}while(n?.size===0)},KY=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(n===void 0)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),yve(t)}};function _ve(e){this._$AN===void 0?this._$AM=e:(GY(this),this._$AM=e,KY(this))}function vve(e,t=!1,n=0){let r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(t)if(Array.isArray(r))for(let e=n;e<r.length;e++)WY(r[e],!1),GY(r[e]);else r!=null&&(WY(r,!1),GY(r));else WY(this,e)}var yve=e=>{e.type==RY.CHILD&&(e._$AP??=vve,e._$AQ??=_ve)},bve=class extends BY{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),KY(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(WY(this,e),GY(this))}setValue(e){if(HY(this._$Ct))this._$Ct._$AI(e,this);else{let t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}},xve=()=>new Sve,Sve=class{},qY=new WeakMap,Cve=zY(class extends bve{render(e){return dY}update(e,[t]){let n=t!==this.G;return n&&this.G!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),dY}rt(e){if(this.isConnected||(e=void 0),typeof this.G==`function`){let t=this.ht??globalThis,n=qY.get(t);n===void 0&&(n=new WeakMap,qY.set(t,n)),n.get(this.G)!==void 0&&this.G.call(this.ht,void 0),n.set(this.G,e),e!==void 0&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return typeof this.G==`function`?qY.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),wve=class extends ave{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=dY,this.T=[],this.#exportsStore=new WeakMap,this.#component=e,this.exports=void 0,this.hasDestroy=JY in e&&typeof e.destroy==`function`,EY.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){let t=e.el.localName;throw e.el.remove(),Error(`The ${t} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${JY} prop.`)}this.#autoDestroyTimeout!==void 0&&clearTimeout(this.#autoDestroyTimeout),kY();for(let t of e.M)`triggerConnected`in t?t.triggerConnected():yJ(t.hostConnected,t)},hostDisconnected:()=>{for(let t of e.M)`triggerDisconnected`in t?t.triggerDisconnected():yJ(t.hostDisconnected,t);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(let t of e.M)`triggerUpdate`in t?t.triggerUpdate(this.Q):yJ(t.hostUpdate,t,this.Q)},hostUpdated:()=>{for(let t of e.M)`triggerUpdated`in t?t.triggerUpdated(this.Q):yJ(t.hostUpdated,t,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),CJ(e)}#autoDestroyTimeout;#component;async destroy(){if(!this.destroyed){this.#component.el.isConnected&&(this.hasDestroy=!1,this.#component.el.remove()),this.#autoDestroyTimeout=void 0,this.destroyed=!0;for(let e of this.#component.M)`triggerDestroy`in e?e.triggerDestroy():yJ(e.hostDestroy,e);this.#component.M.splice(0)}}U(){this.#autoDestroyTimeout!==void 0&&clearTimeout(this.#autoDestroyTimeout),!this.#component.el.isConnected&&!this.#component.autoDestroyDisabled&&(this.#autoDestroyTimeout=Z_e(()=>void this.#component.destroy(),Tve))}S(e,t){let n=this.T;this.V=dY,this.T=[],n.forEach(n=>n(e,t))}#exportsStore;W(e,exports){(typeof exports==`object`&&exports||typeof exports==`function`)&&this.#exportsStore.set(exports,e)}X(exports){if(typeof exports==`object`&&exports||typeof exports==`function`)return this.#exportsStore.get(exports)}},Tve=1e3,JY=`autoDestroyDisabled`,Eve=class e extends EY{constructor(){super(),this.M=[],this.manager=new wve(this);let t=this,n=t.constructor,r=n.N,i=n.K.o,a=e.prototype.shouldUpdate;t.#postLoadedDeferred=r?.H??new DY,t.I=r?.I??new DY,t.J=r?.J??[],t._offspring=t.J,t._postLoad=t.I,t.el=r??t,t.#enableUpdating=t.enableUpdating,t.enableUpdating=IY,t.shouldUpdate!==a&&(t.#originalShouldUpdate=t.shouldUpdate,t.shouldUpdate=a),i&&(t.#observables=new Map,n.elementProperties.forEach((e,n)=>t.#observables.set(n,i())))}static finalizeStyles(e){let t=super.finalizeStyles(e),n=this.shadowRootOptions===FY;return this.K?.commonStyles===void 0||n?t:[this.K.commonStyles,...t]}static createProperty(e,t){let n=typeof t==`number`?t:Array.isArray(t)?t[0]:0,r=Array.isArray(t)?t[1]:void 0,i=r?.hasChanged??VJ,a={attribute:n&1&&typeof e==`string`?ove(e):!1,reflect:!!(n&2),type:n&4?Boolean:n&8?Number:void 0,state:!!(n&16),readOnly:!!(n&32),noAccessor:!!(n&64),c:!1,...r,hasChanged(e,t){let n=i(e,t);return a.c=n,n}};super.createProperty(e,a)}static getPropertyDescriptor(e,t,n){let r=this.K,i=super.getPropertyDescriptor(e,t,n);return n.d=i,{...i,get(){return r.t?.(this.#observables.get(e)),i.get?.call(this)},set(t){let r=this.manager;if(n.readOnly&&!AJ&&(r.R||r.connectedCalled))throw Error(`Cannot assign to read-only property "${e}" of ${this.el.localName}. Trying to assign "${t}"`);i.set.call(this,t??void 0),n.c&&this.#observables?.get(e)?.notify(),r.T.length>0&&(kY(),r?.S(e,t))}}}static{this.lumina=!0}#observables;#originalShouldUpdate;#enableUpdating;#postLoadedDeferred;#trackingTarget;connectedCallback(){if(this.el.hasAttribute(`defer-hydration`))return;let e=this.constructor.K.c?.(()=>this.requestUpdate());this.#trackingTarget=e;let t=!this.manager.connectedCalled;super.connectedCallback(),t?queueMicrotask(()=>this.#load().catch(e=>{this.#postLoadedDeferred.reject(e),setTimeout(()=>{throw e})})):e&&this.requestUpdate()}#doTrackedUpdate(e){try{this.#trackingTarget.clear(),this.constructor.K.r(this.#trackingTarget,()=>super.update(e))}catch(e){throw this.#trackingTarget.clear(),e}}disconnectedCallback(){super.disconnectedCallback(),this.#trackingTarget?.destroy(),this.#trackingTarget=void 0}createRenderRoot(){let e=this.el.shadowRoot,t=this.constructor,n=t.shadowRootOptions,r=e??(n===FY?this.el:this.el.attachShadow(n));if(this.isConnected){let e=r.getRootNode();e.adoptedStyleSheets=[...e.adoptedStyleSheets,...t.elementStyles.map(e=>`styleSheet`in e?e.styleSheet:e)]}return r}async#load(){let e=this.el.G??PY(this.el);e&&await e;let t=[];for(let e of this.M)`triggerLoad`in e?t.push(e.triggerLoad()):t.push(bJ(e.hostLoad,e));await Promise.all(t),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(e=>e.has(JY)&&this.manager.U()),this.#enableUpdating(!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();let n=this.J.filter(e=>!e.manager?.loadedCalled);n.length&&await Promise.allSettled(n.map(async e=>await e.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,``);for(let e of this.M)`triggerLoaded`in e?e.triggerLoaded():yJ(e.hostLoaded,e);this.loaded?.(),this.#postLoadedDeferred.resolve()}shouldUpdate(e){return this.manager.Q=e,this.#originalShouldUpdate?.(e)??!0}update(e){this.#trackingTarget?this.#doTrackedUpdate(e):super.update(e)}listen(e,t,n){let r=t?.bind(this)??t;this.manager.onLifecycle(()=>(this.el.addEventListener(e,r,n),()=>this.el.removeEventListener(e,r,n)))}listenOn(e,t,n,r){let i=n?.bind(this)??n;this.manager.onLifecycle(()=>(e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)))}async componentOnReady(){return await this.#postLoadedDeferred.promise,this}addController(e){this.M.push(e),!(xJ in e)&&this.renderRoot&&this.el.isConnected&&e.hostConnected?.()}removeController(e){this.M.splice(this.M.indexOf(e),1),e.controllerRemoved?.()}},Dve=e=>{let t,n=e=>{t=new URL(e,globalThis.location?.href||void 0).href},r={...e,getAssetPath(e){let n=new URL(e,t);return n.origin===globalThis.location?.origin?n.pathname:n.href},setAssetPath:n,customElement(e,t){t.K=r,t.L=e,customElements.get(e)||customElements.define(e,t)}};return n(e.defaultAssetPath),r},Ove=e=>typeof e==`object`&&e?dve(e):e,kve=e=>typeof e==`object`&&e?pve(e):e,Ave=dY;function jve(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}var Mve={toAttribute:e=>e===!0?``:e===!1?null:e},YY=`calcite-mode-auto`,XY=`calcite-mode-dark`,Nve={autoMode:YY,darkMode:XY,lightMode:`calcite-mode-light`,rtl:`calcite--rtl`,calciteAnimate:`calcite-animate`,calciteAnimateInUp:`calcite-animate__in-up`,calciteAnimateInDown:`calcite-animate__in-down`,calciteAnimateInRight:`calcite-animate__in-right`,calciteAnimateInLeft:`calcite-animate__in-left`},Pve={filter:250,nextTick:0,resize:150,reposition:100},Fve=25;function ZY(){let{classList:e}=document.body,t=window.matchMedia(`(prefers-color-scheme: dark)`).matches,n=()=>e.contains(XY)||e.contains(YY)&&t?`dark`:`light`,r=e=>document.body.dispatchEvent(new CustomEvent(`calciteModeChange`,{bubbles:!0,detail:{mode:e}})),i=e=>{a!==e&&r(e),a=e},a=n();r(a),window.matchMedia(`(prefers-color-scheme: dark)`).addEventListener(`change`,e=>i(e.matches?`dark`:`light`)),new MutationObserver(()=>i(n())).observe(document.body,{attributes:!0,attributeFilter:[`class`]})}var QY=globalThis.calciteConfig,Ive=QY?.focusTrapStack||[],Lve=QY?.logLevel||`info`,$Y=`3.3.3`,Rve=`2025-10-08`,zve=`7391af08e`;function Bve(){if(QY&&QY.version)return;console.info(`Using Calcite Components ${$Y} [Date: ${Rve}, Revision: ${zve}]`);let e=QY||globalThis.calciteConfig||{};Object.defineProperty(e,`version`,{value:$Y,writable:!1}),globalThis.calciteConfig=e}document.readyState===`interactive`?ZY():document.addEventListener(`DOMContentLoaded`,ZY,{once:!0}),queueMicrotask(Bve);var{customElement:Vve,getAssetPath:Hve,setAssetPath:Uve}=Dve({defaultAssetPath:`https://js.arcgis.com/calcite-components/3.3.3/`,hydratedAttribute:`calcite-hydrated`}),eX=!1,Wve=e=>{eX=!0,Uve(e)},tX;function Gve(){eX||Wve(ms(rl(tX)))}function nX(e){let t=[];for(let n of Object.keys(e))customElements.get(`calcite-${n}`)||t.push(e[n]?.());return t.length>0?Promise.all(t):null}tX=`components/assets`;var rX=new Set;function Kve(e){rX.add(e),e.finally(()=>rX.delete(e))}function qve(e){return Yt()}var iX,Jve=0;function aX(e,t){let n=Object.prototype.hasOwnProperty;for(let r in t)n.call(t,r)&&n.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]==`object`&&typeof t[r]==`object`?aX(e[r],t[r]):e[r]=t[r]);return e}var Yve=C_e({postProcessProjectionOptions(e){let t=e.eventHandlerInterceptor,n=/capture$/i;e.eventHandlerInterceptor=(e,r,i,a)=>{let o=t?.(e,r,i,a),s=n.test(e);if(!((e=e.replace(n,``)).toLowerCase()in i)||s){let t=e[2].toLowerCase()+e.slice(3),n=e=>o?.call(i,e);i.addEventListener(t,n,s);let r=()=>i.removeEventListener(t,n,s),c=a.afterRemoved;a.afterRemoved=e=>{c?.(e),r()}}return o}},handleInterceptedEvent(e,t,n,r){let{eventPhase:i,type:a}=r,o=i===Event.CAPTURING_PHASE,s=`on${a}${o?`capture`:``}`,c=t.properties;(c&&s in c||(s=`on${a[0].toUpperCase()}${a.slice(1)}${o?`Capture`:``}`,c&&s in c))&&(tJ(),e.scheduleRender(),c[s].call(c.bind||n,r))}}),oX=!1,sX=class extends lT(Dh){static{this[iX]=!0}constructor(e,t){super(e,t),this._attached=!1,this._projector=Yve,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Ri(async()=>{if(this._messageBundleProps?.length){let e=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:e,propertyName:t})=>{if(this.destroyed)return;let n=await xse(e);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(n=aX(C(n),this.uiStrings)),this[t]=n)}));if(this.destroyed)return;for(let t of e)t.status===`rejected`&&E.getLogger(this).error(`widget-intl:locale-error`,this.declaredClass,t.reason)}await this.loadLocale()}),this.addHandles(qve()),Gve();let n=`esri-widget-uid-`+KE(),r=this.render.bind(this);this._trackingTarget=new ga(()=>{this.autoRenderingEnabled&&this.scheduleRender()});let i=()=>({vnodeSelector:`div`,properties:{key:`${n}-hidden`,class:``,styles:{display:`none`}},domNode:null,children:void 0,text:void 0}),a=()=>{if(!this._readyForTrueRender||this.destroyed)return null;let e=r()??i(),t=e.properties??={};if(t.key??=n,$q(e.vnodeSelector)){if(!this.visible)return i()}else this.visible?t.styles||={}:(t.class=``,t.styles={display:`none`}),t.styles.display??=``;let a=0;return e.children?.forEach(e=>{$q(e.vnodeSelector)||(e.properties??={},e.properties.key??=`${this.id}--${a++}`)}),Zq(this,e)};this.render=()=>{if(oX)return a();let e=Qge(this)??null;if(e)return e;this._trackingTarget.clear(),oX=!0;try{e=Nn(this._trackingTarget,a)}catch(e){throw E.getLogger(this).error(e),e}finally{oX=!1}return e&&$ge(this,e),e};let o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Kve(this._resourcesFetch)}normalizeCtorArgs(e,t){let n={...e};return t&&(n.container=t),n}postInitialize(){}beforeFirstRender(){let e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(Di):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(zr(this._trackingTarget),zr(this.viewModel),this._detach(this.container),this._set(`container`,null),this.render=()=>null,this._projector=null,nJ(this))}get container(){return this._get(`container`)}set container(e){this._get(`container`)||this._set(`container`,aC(e))}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome(`icon`,e)}get id(){return this._get(`id`)||this.container?.id||Date.now().toString(16)+`-widget-`+ Jve++}set id(e){e&&this._set(`id`,e)}get label(){return this.declaredClass.split(`.`).pop()}set label(e){this._overrideIfSome(`label`,e)}get renderable(){return this._resourcesFetch}get visible(){return this._get(`visible`)}set visible(e){this._set(`visible`,e)}get[(iX=Jq,Yq)](){return{projector:this._projector}}static{this.vnodeSelector=`div`}render(){throw Error(`not implemented`)}removeContainer(){this._set(`container`,null)}scheduleRender(){this.destroyed||(nJ(this),this._projector.scheduleRender())}classes(...e){return oJ.apply(this,e)}renderNow(){nJ(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(G(()=>this.viewModel,(e,t)=>{t&&this.removeHandles(`delegated-events`),e&&vi(e)&&this.addHandles(this._delegatedEventNames.map(t=>bi(e,t,e=>{this.emit(t,e)})),`delegated-events`)},Jh)),this.postInitialize();let e=async()=>{await this._loadLocale().catch(Di),this.scheduleRender()};this.addHandles([ux(e),G(()=>this.uiStrings,e)]),this.addHandles(Bh(()=>this.container,e=>{this.destroyed||this._attach(e)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&=(this._projector.detach(this.render),!1),e?.parentNode?.removeChild(e)}};e([N()],sX.prototype,`_readyForTrueRender`,void 0),e([N({value:null})],sX.prototype,`container`,null),e([N()],sX.prototype,`icon`,null),e([N()],sX.prototype,`id`,null),e([N()],sX.prototype,`label`,null),e([N()],sX.prototype,`renderable`,null),e([N()],sX.prototype,`uiStrings`,void 0),e([N()],sX.prototype,`viewModel`,void 0),e([N({value:!0})],sX.prototype,`visible`,null),e([N()],sX.prototype,`key`,void 0),e([N()],sX.prototype,`children`,void 0),e([N()],sX.prototype,`afterCreate`,void 0),e([N()],sX.prototype,`afterUpdate`,void 0),e([N()],sX.prototype,`afterRemoved`,void 0),sX=e([P(`esri.widgets.Widget`)],sX);var cX=sX,Xve=new Map;function Zve(e){return Xve.get(e)}function Qve(e,t){return e.length!==t.length||e.some((e,n)=>e.text!==t[n].text)}function $ve(e,t,n){!n||!t||e.find(e=>e.layerView===t&&e.text===n)||e.push({text:n,layerView:t})}var lX=Symbol(`attributions`),uX=class extends F{constructor(e){super(e),this._clear=()=>{this.removeHandles(lX)},this.items=new W,this.view=null,this._allLayerViewsChange=()=>{this.removeHandles(lX);let e=this.view?.allLayerViews,t=!1;if(e){for(let n of e)this.addHandles(G(()=>[n.attributionItems],()=>this._updateAttributionItems()),lX),`type`in n&&n.type===`integrated-mesh-3dtiles`&&(t=!0,this.addHandles([G(()=>n.suspended,()=>this._updateAttributionItems()),n.on(`visible-geometry-changed`,()=>this._updateAttributionItems())],lX));t&&this.addHandles(Bh(()=>!0===this.view?.stationary,()=>this._updateAttributionItems()),lX)}this._updateAttributionItems()},this.addHandles([Hh(()=>this.view?.allLayerViews,`change`,this._allLayerViewsChange,{onListenerAdd:this._allLayerViewsChange,onListenerRemove:this._clear})])}destroy(){this.view=null,this.items.removeAll()}get state(){return this.view?.ready?this.view.allLayerViews.some(e=>e.attributionUpdating)?`loading`:`ready`:`disabled`}_updateAttributionItems(){let e=this.view,t=e?.allLayerViews,n=[],r=!1,i=null,a=null;if(e&&t){for(let e of t){if(e.suspended)continue;`type`in e&&e.type===`integrated-mesh-3dtiles`&&(a||=e,e.layer.hasGoogleUrl&&(r=!0,i=e));let t=e.attributionItems.slice().sort((e,t)=>t.score-e.score).map(e=>e.text).join(`, `);$ve(n,e,t)}if(a){let t=Zve(e);if(t){let e=t.getAttributionText();for(let t=e.length-1;t>-1;--t)n.unshift({text:e[t],layerView:a})}}r&&i&&n.unshift({text:`Google Maps`,layerView:i}),Qve(this.items,n)&&(this.items.removeAll(),this.items.addMany(n))}else this._clear()}};e([N({readOnly:!0,type:W})],uX.prototype,`items`,void 0),e([N({readOnly:!0})],uX.prototype,`state`,null),e([N()],uX.prototype,`view`,void 0),uX=e([P(`esri.widgets.Attribution.AttributionViewModel`)],uX);var dX=uX,fX=`esri-attribution`,pX={base:fX,poweredBy:`${fX}__powered-by`,sources:`${fX}__sources`,open:`${fX}--open`,sourcesOpen:`${fX}__sources--open`,link:`${fX}__link`},mX=class extends cX{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(e=>{e.forEach(({target:e})=>{this._scheduleOverflowCheck(e)})}),this._mutationObserver=new MutationObserver(e=>{let t=!1;for(let n of e)if(n.type===`childList`||n.type===`characterData`||n.type===`attributes`){t=!0;break}t&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=` | `,this.messages=null,this.viewModel=new dX,c(`esri-deprecation-warnings`)&&Ar(E.getLogger(`esri.widgets.Attribution`),`This widget is deprecated. Use View.attributionVisible and View.attributionItems instead.`,{replacement:`view.attributionVisible and view.attributionItems`,warnOnce:!0})}initialize(){this.addHandles(Hh(()=>this.viewModel?.items,`change`,()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame??=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)})}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get icon(){return`description`}set icon(e){this._overrideIfSome(`icon`,e)}get label(){return this.messages?.widgetLabel??``}set label(e){this._overrideIfSome(`label`,e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e={[pX.open]:this._isOpen};return uJ(`div`,{bind:this,class:this.classes(pX.base,XC.widget,e),dir:`ltr`,onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return uJ(`div`,{class:pX.poweredBy},`Powered by`,` `,uJ(`a`,{class:pX.link,href:`https://www.esri.com/`,rel:`noreferrer`,target:`_blank`},`Esri`))}_renderSourcesNode(){let e=this._isOpen,t=this._isInteractive,n=t?0:void 0,{attributionText:r}=this,i={[pX.sourcesOpen]:e,[XC.interactive]:t};return uJ(`div`,{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(pX.sources,i),innerHTML:r,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let t=!1,{clientHeight:n,clientWidth:r,scrollWidth:i}=e,a=i>r,o=this._attributionTextOverflowed!==a;if(this._attributionTextOverflowed=a,o&&(t=!0),this._isOpen){let e=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};e([N()],mX.prototype,`_isOpen`,void 0),e([N()],mX.prototype,`_isInteractive`,null),e([N()],mX.prototype,`_attributionTextOverflowed`,void 0),e([N()],mX.prototype,`_prevSourceNodeHeight`,void 0),e([N({readOnly:!0,dependsOn:[`viewModel.items.length`,`itemDelimiter`]})],mX.prototype,`attributionText`,null),e([N()],mX.prototype,`icon`,null),e([N()],mX.prototype,`itemDelimiter`,void 0),e([N()],mX.prototype,`label`,null),e([N(),sJ(`esri/widgets/Attribution/t9n/Attribution`)],mX.prototype,`messages`,void 0),e([N()],mX.prototype,`view`,null),e([N({type:dX})],mX.prototype,`viewModel`,void 0),e([d_e()],mX.prototype,`_toggleState`,null),mX=e([P(`esri.widgets.Attribution`)],mX);var eye=mX;function hX(){let e=c(`mapview-essential-goto-duration`);return e==null?e:Vi(e)}function tye(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}function nye(e,t,n){return e.goTo(t,n)}var gX=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.goToOverride=null,this.view=null}callGoTo(e){let{view:t}=this;return Rr(t),this.goToOverride?this.goToOverride(t,e):nye(t,e.target,e.options)}};return e([N()],r.prototype,`goToOverride`,void 0),e([N()],r.prototype,`view`,void 0),r=e([P(`esri.widgets.support.GoTo`)],r),r},_X=class extends gX(F){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(qh)}destroy(){this.view=null}get canShowNorth(){return tye(this.view)}get state(){return!this.view?.ready||this.view.type===`2d`&&!this.view.constraints.rotationEnabled?`disabled`:this.canShowNorth?`compass`:`rotation`}reset(){this.view?.ready&&(this.view?.type===`2d`?this.callGoTo({target:{rotation:0},options:{animationMode:`always`,duration:hX()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set(`orientation`,{z:e})}_updateForCamera(e){if(!e)return;let t=-e.heading;this._set(`orientation`,{x:0,y:0,z:t})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type===`2d`?G(()=>e?.rotation,this._updateForRotation,qh):G(()=>e?.camera,this._updateForCamera,qh))}_watchForView(e){this.addHandles(G(()=>this.view,this._updateRotationWatcher,e))}};e([N({readOnly:!0})],_X.prototype,`canShowNorth`,null),e([N({readOnly:!0})],_X.prototype,`orientation`,void 0),e([N({readOnly:!0})],_X.prototype,`state`,null),e([N()],_X.prototype,`view`,void 0),_X=e([P(`esri.widgets.Compass.CompassViewModel`)],_X);var vX=_X,yX=`esri-compass`,bX={base:yX,iconContainer:`${yX}__icon-container`},xX=class extends cX{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new vX,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=e=>({transform:`rotateZ(${e.z}deg)`})}loadDependencies(){return nX({button:()=>R(()=>import(`./calcite-button-CrXR0T3m.js`),__vite__mapDeps([412,413,414,415,416,417,418,419,420,421,422,423,424,425])),icon:()=>R(()=>import(`./calcite-icon-QCQFZW6c.js`),__vite__mapDeps([426,415,417,420,421,423]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state===`rotation`?`arrow-up`:`compass-needle`}set icon(e){this._overrideIfSome(`icon`,e)}get label(){return this.messages?.widgetLabel??``}set label(e){this._overrideIfSome(`label`,e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){let{orientation:e,state:t}=this.viewModel,{messages:n}=this;return uJ(`div`,{class:this.classes(bX.base,XC.widget)},uJ(`calcite-button`,{class:XC.widgetButton,disabled:t===`disabled`,kind:`neutral`,label:n.reset,onclick:this._reset,round:!0,scale:`s`,title:n.reset},uJ(`div`,{"aria-hidden":`true`,class:bX.iconContainer,title:n.reset},uJ(`calcite-icon`,{icon:this.icon,styles:this._toRotationTransform(e)}))))}};e([N()],xX.prototype,`goToOverride`,null),e([N()],xX.prototype,`icon`,null),e([N()],xX.prototype,`label`,null),e([N(),sJ(`esri/widgets/Compass/t9n/Compass`)],xX.prototype,`messages`,void 0),e([N()],xX.prototype,`view`,null),e([N({type:vX})],xX.prototype,`viewModel`,void 0),xX=e([P(`esri.widgets.Compass`)],xX);var rye=xX,SX=`esri-navigation-toggle`,CX={base:SX,isLayoutHorizontal:`${SX}--horizontal`},wX=class extends F{constructor(e){super(e),this._navigationMode=`pan`,this.view=null,e?.isDefaultViewModel||Ree(E.getLogger(this),`Navigation Toggle`,`arcgis-navigation-toggle`,{version:`4.33`})}normalizeCtorArgs(e={}){let{isDefaultViewModel:t,...n}=e;return n}initialize(){this.addHandles(Bh(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type===`3d`?`ready`:`disabled`}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._updateNavigationActionMap()}toggle(){this.state!==`disabled`&&(this.navigationMode=this.navigationMode===`pan`?`rotate`:`pan`)}_updateNavigationActionMap(){let e=this.view?.navigation?.actionMap;if(!e)return;let t=this._navigationMode===`pan`;e.dragPrimary=t?`pan`:`rotate`,e.dragSecondary=t?`rotate`:`pan`}};e([N({readOnly:!0})],wX.prototype,`state`,null),e([N()],wX.prototype,`_navigationMode`,void 0),e([N()],wX.prototype,`view`,void 0),wX=e([P(`esri.widgets.NavigationToggle.NavigationToggleViewModel`)],wX);var TX=wX,EX=class extends cX{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new TX({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{let e=this.viewModel?.navigationMode===`pan`?this._rotateButton:this._panButton;iJ(e),this.toggle()},e?.isDefaultUI||Dr(E.getLogger(this),`Navigation Toggle`,`arcgis-navigation-toggle`,{version:`4.32`})}normalizeCtorArgs(e={}){let{isDefaultUI:t,...n}=e;return n}loadDependencies(){return nX({button:()=>R(()=>import(`./calcite-button-CrXR0T3m.js`),__vite__mapDeps([412,413,414,415,416,417,418,419,420,421,422,423,424,425]))})}get icon(){return`move`}set icon(e){this._overrideIfSome(`icon`,e)}get label(){return this.messages?.widgetLabel??``}set label(e){this._overrideIfSome(`label`,e)}set layout(e){e!==`horizontal`&&(e=`vertical`),this._set(`layout`,e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e=this.viewModel?.state===`disabled`,t=this.viewModel?.navigationMode===`pan`,n=this.messages.toggle;return uJ(`div`,{class:this.classes(CX.base,XC.widget,{[CX.isLayoutHorizontal]:this.layout===`horizontal`})},uJ(`calcite-button`,{afterCreate:e=>{this._panButton=e},appearance:t?`outline-fill`:`solid`,class:XC.widgetButton,disabled:e,iconStart:`move`,kind:`neutral`,label:n,onclick:this._toggle,tabIndex:t?void 0:-1,title:n}),uJ(`calcite-button`,{afterCreate:e=>{this._rotateButton=e},appearance:t?`solid`:`outline-fill`,class:XC.widgetButton,disabled:e,iconStart:`rotate`,kind:`neutral`,label:n,onclick:this._toggle,tabIndex:t?-1:void 0,title:n}))}};e([N()],EX.prototype,`icon`,null),e([N()],EX.prototype,`label`,null),e([N({value:`vertical`})],EX.prototype,`layout`,null),e([N(),sJ(`esri/widgets/NavigationToggle/t9n/NavigationToggle`)],EX.prototype,`messages`,void 0),e([N()],EX.prototype,`view`,null),e([N({type:TX})],EX.prototype,`viewModel`,void 0),EX=e([P(`esri.widgets.NavigationToggle`)],EX);var iye=EX,DX=class extends F{get canZoomIn(){if(!this.view?.ready)return!1;let e=this.view?.constraints?.effectiveMaxScale;return e===0||this._scale>e}get canZoomOut(){let{view:e}=this;if(!e?.ready)return!1;let t=e.constraints?.effectiveMinScale;return t===0||this._scale<t}get _scale(){let e=this.view?.animation?.target;return(e&&`then`in e?void 0:e?.scale)??this.view?.scale??0}};e([N({readOnly:!0})],DX.prototype,`canZoomIn`,null),e([N({readOnly:!0})],DX.prototype,`canZoomOut`,null),e([N()],DX.prototype,`view`,void 0),e([N()],DX.prototype,`_scale`,null),DX=e([P(`esri.widgets.Zoom.ZoomConditions2D`)],DX);var aye=DX,OX=class extends F{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};e([N({readOnly:!0})],OX.prototype,`canZoomIn`,null),e([N({readOnly:!0})],OX.prototype,`canZoomOut`,null),e([N()],OX.prototype,`view`,void 0),OX=e([P(`esri.widgets.Zoom.ZoomConditions3D`)],OX);var oye=OX,kX=class extends F{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?`ready`:`disabled`}set view(e){e?e.type===`2d`?this._zoomConditions=new aye({view:e}):e.type===`3d`&&(this._zoomConditions=new oye({view:e})):this._zoomConditions=null,this._set(`view`,e)}zoomIn(){let e=this.view;this.canZoomIn&&e&&(e.type===`2d`?e.mapViewNavigation.zoomIn():Mi(e.goTo({zoomFactor:2})))}zoomOut(){let e=this.view;this.canZoomOut&&e&&(e.type===`2d`?e.mapViewNavigation.zoomOut():Mi(e.goTo({zoomFactor:.5})))}};e([N()],kX.prototype,`_zoomConditions`,void 0),e([N()],kX.prototype,`canZoomIn`,null),e([N()],kX.prototype,`canZoomOut`,null),e([N({readOnly:!0})],kX.prototype,`state`,null),e([N()],kX.prototype,`view`,null),kX=e([P(`esri.widgets.Zoom.ZoomViewModel`)],kX);var AX=kX,jX={base:`esri-zoom`,horizontalLayout:`esri-zoom--horizontal`},MX=class extends cX{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new AX,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return nX({button:()=>R(()=>import(`./calcite-button-CrXR0T3m.js`),__vite__mapDeps([412,413,414,415,416,417,418,419,420,421,422,423,424,425]))})}get icon(){return`magnifying-glass-plus`}set icon(e){this._overrideIfSome(`icon`,e)}get label(){return this.messages?.widgetLabel??``}set label(e){this._overrideIfSome(`label`,e)}set layout(e){e!==`horizontal`&&(e=`vertical`),this._set(`layout`,e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){let e={[jX.horizontalLayout]:this.layout===`horizontal`},{canZoomIn:t,canZoomOut:n}=this.viewModel,{zoomIn:r,zoomOut:i}=this.messages;return uJ(`div`,{class:this.classes(jX.base,XC.widget,e)},uJ(`calcite-button`,{class:XC.widgetButton,disabled:!t,iconStart:`plus`,kind:`neutral`,label:r,onclick:this.zoomIn,title:r}),uJ(`calcite-button`,{class:XC.widgetButton,disabled:!n,iconStart:`minus`,kind:`neutral`,label:i,onclick:this.zoomOut,title:i}))}};e([N()],MX.prototype,`icon`,null),e([N()],MX.prototype,`label`,null),e([N({value:`vertical`})],MX.prototype,`layout`,null),e([N(),sJ(`esri/widgets/Zoom/t9n/Zoom`)],MX.prototype,`messages`,void 0),e([N()],MX.prototype,`view`,null),e([N({type:AX})],MX.prototype,`viewModel`,void 0),MX=e([P(`esri.widgets.Zoom`)],MX);var sye=MX;function cye(e){return e?.view!==void 0}var NX=class extends __e{constructor(e){super(e),this._defaultPositionLookup={attribution:`manual`,compass:`top-left`,"navigation-toggle":`top-left`,zoom:`top-left`},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(t=>{let n=this._find(t),r=n?.widget;cye(r)&&(r.view=e)})},this._componentsWatcher=(e,t)=>{this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([G(()=>this.components,this._componentsWatcher,qh),G(()=>this.view,this._updateViewAwareWidgets,qh)])}_add(e,t,n,r,i){let a=e;if(typeof e==`string`&&this._defaultPositionLookup[e]){if(this._find(e))return;a=this._createComponent(e)}super._add(a,t,n,r,i)}_removeComponents(e){e.forEach(e=>{let t=this._find(e);t&&(this.remove(t),t.destroy())})}_adjustPadding(e){if(!e.includes(`attribution`)&&!this._isOverridden(`padding`)){let{top:e}=this.padding;this.padding=e}}_addComponents(e){this.constructed&&e.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(e){let t=this._createWidget(e);return new qq({id:e,node:t})}_createWidget(e){let t=this.view;switch(e){case`attribution`:return new eye({view:t});case`compass`:return new rye({view:t});case`navigation-toggle`:return new iye({view:t,isDefaultUI:!0});case`zoom`:return new sye({view:t})}}};e([N()],NX.prototype,`components`,void 0),NX=e([P(`esri.views.ui.DefaultUI`)],NX);var PX=NX,FX=class extends PX{constructor(e){super(e),this.components=[`zoom`]}};e([N()],FX.prototype,`components`,void 0),FX=e([P(`esri.views.ui.2d.DefaultUI2D`)],FX);var IX=FX,LX=class{constructor(e={},t={},n=8,r=1/0){this.disabledExtensions=e,this.debugWebGLExtensions=t,this.maxAnisotropy=n,this.maxPreferredTexturePixels=r}},RX=class e{constructor(e,t,n=``){this.major=e,this.minor=t,this._context=n}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){let t=this._context&&this._context+`:`,n=this._context&&this._context+` `;throw new D(t+`unsupported-version`,`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,n=``){let[r,i]=t.split(`.`),a=/^\s*\d+\s*$/;if(!r?.match||!a.test(r))throw new D((n&&n+`:`)+`invalid-version`,"Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!a.test(i))throw new D((n&&n+`:`)+`invalid-version`,"Expected minor version to be a number, but got '${version}'",{version:t});return new e(parseInt(r,10),parseInt(i,10),n)}},zX=class extends RX{constructor(e,t){super(e,t,`webmap`)}};function BX(e){return typeof e==`object`&&!!e&&`declaredClass`in e&&e.declaredClass===`esri.WebMap`}var VX=new zX(2,36),HX,UX=HX=class extends L{constructor(e){super(e),this.color=new J([0,0,0,1])}clone(){return new HX(C({color:this.color}))}};e([N({type:J,json:{write:!0}})],UX.prototype,`color`,void 0),UX=HX=e([P(`esri.webmap.background.ColorBackground`)],UX);var WX=UX,GX,KX,qX,JX,YX,XX,ZX;async function lye(){let[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,GridView2D:a,Stage:o}]=await Promise.all([R(()=>import(`./webglDeps-BWjFb4yh.js`),__vite__mapDeps([273,5,138,274,275,276,277,33])),R(()=>import(`./mapViewDeps-CiOnhExb.js`),__vite__mapDeps([278,140,205,142,143,144,145,13,5,146,147,148,149,1,191,118,279,280,11,12,209,162,34,138,275,277,33,137,119,281,152,213,214,282,165,163,283,83,164,284,274,9,10,155,14,179,180,161,151,127,285,286,287,288,167,289,290,207,291,292,293,294,56,276,101,295,168,296,297,169,298,299,300]))]);KX=e,qX=t,JX=n,YX=r,XX=i,ZX=a,GX=o}var QX=class extends hH(oB(pce(Xle(Mw(phe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Xh({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new kL({actionMap:new TL({dragTertiary:`none`})}),this.renderingOptions={samplingMode:`dynamic`,edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analysisViewManager=new Bge({importAnalysisViewModule:e=>hW(e),view:this}),this.floors=new W,this.grid=null,this.map=null,this.timeline=new Rq,this.type=`2d`,this.view2dType=null,this.ui=new IX,this.test={takeScreenshot:async e=>Fge(this._getScreenshotView(e),e)},this.padding={top:0,right:0,bottom:0,left:0},Ise()}destroy(){this.layerViewManager.clear(),this._set(`preconditionsReady`,!1),this.frameTask=zr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set(`inputManager`,null)}get graphicsTileStore(){return new HW(this.featuresTilingScheme)}get constraintsInfo(){let e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get initialExtentRequired(){if(!this.stateManager)return!1;let{scale:e,constraints:t,center:n,viewpoint:r,extent:i}=this,a=this.zoom;return!(this.map&&`initialViewProperties`in this.map&&this.map.initialViewProperties?.viewpoint)&&!i&&(t?.effectiveLODs||(a=-1),(!n||e===0&&a===-1)&&(r?.targetGeometry==null||r.targetGeometry.type!==`extent`&&!r.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){let e=this._getDefaultViewpoint();if(!e)return!1;let t=e.targetGeometry,n=this.spatialReference;return NS(t.spatialReference,n)}get analyses(){return super.analyses}set analyses(e){super.analyses=e}get background(){return BX(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override(`background`,e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get extent(){return super.extent}set extent(e){super.extent=e}get highlightOptions(){return dq(this)}set highlightOptions(e){fq(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get(`spatialReferenceLocked`)}set spatialReferenceLocked(e){this.stage&&E.getLogger(this).warn(`spatialReferenceLocked cannot be changed after the view has become ready`),this._set(`spatialReferenceLocked`,e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){let e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.analysisViewManager.updating||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(e=>!e.destroyed&&!(`layerViews`in e)&&!0===e.updating)||e);if(c(`esri-2d-log-updating`)){let n=this.allLayerViews.reduce((e,t)=>({...e,[`${t.layer.id}(${t.layer.type})`]:!t.destroyed&&!(`layerViews`in t)&&t.updating}),{});console.log(`Updating MapView: ${t}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(n)}\n-> updatingMagnifier: ${e}\n`)}return t}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){let e=this.stateManager.visibleArea;return e&&new sh({rings:[e.map(e=>[e[0],e[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,t){return pq(this,e,t)}async takeScreenshot(e){return Pge(this._getScreenshotView(e),e)}toScreen(e,t){return this.stateManager.toScreen(e,t)}async whenAnalysisView(e){if(e.parent==null)throw new D(`view:no-analysisview-for-analysis`,`The analysis does not exist in view.analyses`,{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&`initialViewProperties`in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return BX(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return BX(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return HU.hasLayerViewModule(e)}importLayerView(e){return HU.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(E.getLogger(this).error(`#pixelSizeAt()`,`Map view cannot be used before it is ready`),null)}async popupHitTest(e){let t=this.toMap(e),n=await this.hitTest(e),r=this.allLayerViews.toArray().filter(n=>n.clips.every(n=>uq(this,n,e,t))).reverse(),i=new globalThis.Map(r.map(e=>[e.layer.uid,e])),a=[],o=0,s=0;for(;o<n.results.length||s<r.length;){let e=n.results.at(o);if(e&&e.type!==`graphic`){++o;continue}let c=i.get((e?.layer??e?.graphic.layer)?.uid);if((!e||c)&&s<r.length&&r.at(s)!==c){let e=r.at(s);`fetchPopupFeaturesAtLocation`in e&&a.push({mapPoint:t,layerView:e}),++s}else e&&(a.push({graphic:e.graphic,layerView:c}),++o)}return{hits:a,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Gge(this.type);if(c(`safari`)&&c(`safari`)<9&&(e=new D(`mapview:browser-not-supported`,`This browser is not supported by MapView (Safari < 9)`,{type:`safari`,requiredVersion:9,detectedVersion:c(`safari`)})),e!=null)throw E.getLogger(this).warn(`#validate()`,e.message),e}loadAsyncDependencies(){return lye()}_getDefaultViewpoint(){let{constraints:e,initialExtent:t,map:n,padding:r,size:i}=this;if(!e)return null;let a=n&&`initialViewProperties`in n?n.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),s=a?.viewpoint,c=s?.targetGeometry?.extent??t,l=c?.center,u=s?.rotation??0,d=s?.scale||c&&BR(c,[i[0]-r.left-r.right,i[1]-r.top-r.bottom]),f=o.center??l,p=o.rotation??u,m=o.scale??d;return f&&m?new Sh({targetGeometry:f,scale:m,rotation:p}):null}_startup(){this.timeline.begin(`MapView Startup`);let e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;let t=new gW(this.surface),n=new GX(this.surface,{canvas:this.renderCanvas,contextOptions:new LX(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},t);this.stage=n,this._magnifierView=new XX,this._magnifierView.magnifier=this.magnifier,this._gridView=new ZX;let r=new JX({view:this});this._set(`labelManager`,r);let i=new IU({view:this});this._set(`animationManager`,i);let a=new YX({view:this,animationManager:i});this._set(`mapViewNavigation`,a),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on(`change`,()=>this._updateStageChildren()),n.on(`webgl-error`,e=>this.fatalError=e.error),G(()=>this.stationary,e=>n.stationary=e,Jh),G(()=>this.background,e=>{n.backgroundColor=e?.color,this._magnifierView.backgroundColor=e?.color},Jh),G(()=>this.magnifier,e=>this._magnifierView.magnifier=e,Jh),G(()=>this.grid,e=>this._gridView.grid=e,Jh),G(()=>this.renderingOptions,e=>n.renderingOptions=e,Jh),G(()=>this.highlights.items.map(e=>({name:e.name,options:{fillColor:e.color,haloColor:e.haloColor,fillOpacity:e.fillOpacity,haloOpacity:e.haloOpacity,haloWidth:e.haloWidth,haloBlur:e.haloBlur}})),()=>{n.highlightGradient=oq(n.highlightGradient,this.highlights.items)},Jh),G(()=>this.state.id,()=>n.state=this.state,Jh),G(()=>this.animationsEnabled,e=>this.stage.animationsEnabled=e,Jh)],`map-view`),this._updateStageChildren();let o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(e=>e(this)),this.timeline.end(`MapView Startup`),this.frameTask.start(),this._set(`ready`,!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles(`map-view`),this.mapViewNavigation.destroy(),this._set(`mapViewNavigation`,null),this.animation=null,this.animationManager.destroy(),this._set(`animationManager`,null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set(`graphicsView`,null),this._magnifierView=null,this._gridView=null,this._set(`labelManager`,null),this._set(`mapViewNavigation`,null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set(`ready`,!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this.stage.addChild(e.container)});let e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){let e=new tW(tC.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set(`featuresTilingScheme`,e);let t=new KX({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new qX(e)});this._set(`graphicsView`,t)}_destroySpatialReferenceDependentProperties(){let e=this.graphicsView;this._set(`graphicsView`,null),e.destroy(),this._set(`featuresTilingScheme`,null)}_getScreenshotView(e){let{allLayerViews:t,padding:n,size:r,stage:i}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:n,size:r,stage:i}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(let e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(let e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}static{this.type=`2d`}};e([N({constructOnly:!0})],QX.prototype,`deactivatedWebGLExtensions`,void 0),e([N({constructOnly:!0})],QX.prototype,`debugWebGLExtensions`,void 0),e([N({readOnly:!0})],QX.prototype,`featuresTilingScheme`,void 0),e([N({readOnly:!0})],QX.prototype,`graphicsTileStore`,null),e([N()],QX.prototype,`graphicsView`,void 0),e([N()],QX.prototype,`constraintsInfo`,null),e([N()],QX.prototype,`initialExtentRequired`,null),e([N()],QX.prototype,`labelManager`,void 0),e([N({type:kL,nonNullable:!0})],QX.prototype,`navigation`,void 0),e([N({constructOnly:!0})],QX.prototype,`renderCanvas`,void 0),e([N()],QX.prototype,`renderingOptions`,void 0),e([N({constructOnly:!0})],QX.prototype,`supersampleScreenshotsEnabled`,void 0),e([N()],QX.prototype,`defaultsFromMapSettings`,null),e([N({readOnly:!0})],QX.prototype,`typeSpecificPreconditionsReady`,null),e([N()],QX.prototype,`analysisViewManager`,void 0),e([N({type:WX})],QX.prototype,`background`,null),e([N({type:U})],QX.prototype,`center`,null),e([N({type:W})],QX.prototype,`floors`,void 0),e([N()],QX.prototype,`grid`,void 0),e([N({type:vL})],QX.prototype,`highlightOptions`,null),e([N()],QX.prototype,`map`,void 0),e([N()],QX.prototype,`padding`,null),e([N({readOnly:!0})],QX.prototype,`rendering`,null),e([N({readOnly:!0})],QX.prototype,`resolution`,null),e([N()],QX.prototype,`scale`,null),e([N({type:Boolean,value:!1})],QX.prototype,`spatialReferenceLocked`,null),e([N({readOnly:!0})],QX.prototype,`tileInfo`,null),e([N({type:Rq,readOnly:!0})],QX.prototype,`timeline`,void 0),e([N({readOnly:!0})],QX.prototype,`type`,void 0),e([N({readOnly:!0})],QX.prototype,`updating`,null),e([N({readOnly:!0})],QX.prototype,`view2dType`,void 0),e([N({readOnly:!0})],QX.prototype,`visibleArea`,null),e([N()],QX.prototype,`zoom`,null),e([N({readOnly:!0})],QX.prototype,`navigating`,null),e([N(),Tr(e=>e instanceof PX?e:Nt(IX,e))],QX.prototype,`ui`,void 0),QX=e([P(`esri.views.View2D`)],QX);var uye=QX,$X=class extends uye{constructor(e){super(e),this.view2dType=`map`}};e([N({readOnly:!0})],$X.prototype,`view2dType`,void 0),$X=e([P(`esri.views.MapView`)],$X);var dye=$X,fye=class e{constructor(){this._propertyOriginMap=new Map,this._originStores=Array(8),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){let n=new e,r=this._originStores[0];r&&r.forEach((e,t)=>{n.set(t,C(e),0)});for(let e=2;e<8;e++){let r=this._originStores[e];r&&r.forEach((r,i)=>{t&&t.has(i)||n.set(i,C(r),e)})}return n}get(e,t){let n=t===void 0?this._values:this._originStores[t];return n?n.get(e):void 0}keys(e){let t=e==null?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,n=7){let r=this._originStores[n];if(r||(r=new Map,this._originStores[n]=r),r.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=n){let r=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,n),r!==t}return!1}delete(e,t=7){let n=this._originStores[t];if(!n)return;let r=n.get(e);if(n.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let n=t-1;n>=0;n--){let t=this._originStores[n];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,n);break}}}return r}has(e,t){let n=t===void 0?this._values:this._originStores[t];return!!n&&n.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;let n=this._originStores[t],r=n?.get(e),i=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),i!==r}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,t){return this.has(e,t)&&this.originOf(e)===t}isBelowOrigin(e,t){return!this.has(e)||this.originOf(e)<t}forEach(e){this._values.forEach(e)}},eZ=t=>{let n=t,r=class extends n{constructor(...e){super(...e);let t=an(this),n=t.store,r=new fye;t.store=r,To(t,n,r)}read(e,t){Do(this,e,t)}getAtOrigin(e,t){let n=tZ(this),r=Jr(t);if(typeof e==`string`)return n.get(e,r);let i={};return e.forEach(e=>{i[e]=n.get(e,r)}),i}originOf(e){return Yr(this.originIdOf(e))}originIdOf(e){return tZ(this).originOf(e)}revert(e,t){let n=tZ(this),r=Jr(t),i=an(this),a;a=typeof e==`string`?e===`*`?n.keys(r):[e]:e,a.forEach(e=>{i.invalidate(e),n.revert(e,r),i.commit(e)})}};return r=e([hr(`esri.core.ReadOnlyMultiOriginJSONSupport`)],r),r};function tZ(e){return an(e).store}eZ(F);var pye=t=>{let n=t,r=class extends n{constructor(...e){super(...e)}clear(e,t=`user`){an(this).clearOrigin(e,Jr(t))}write(e,t){return jo(this,e||={},t),e}setAtOrigin(e,t,n){an(this).setAtOrigin(e,t,Jr(n))}removeOrigin(e){let t=nZ(this),n=Jr(e),r=t.keys(n);for(let e of r)t.originOf(e)===n&&t.set(e,t.get(e,n),7)}updateOrigin(e,t){let n=nZ(this),r=Jr(t),i=mn(this,e);for(let t=r+1;t<8;++t)n.delete(e,t);n.set(e,i,r)}toJSON(e){return this.write({},e)}};return r=e([P(`esri.core.WriteableMultiOriginJSONMixin`)],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function nZ(e){return an(e).store}var rZ=t=>{let n=pye(eZ(t)),r=class extends n{};return r=e([hr(`esri.core.MultiOriginJSONSupport`)],r),r},iZ=rZ(F);async function mye(e){let t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return ad(e);let n=H.WGS84;return await BS(t,n),FS(e,n)}function aZ(e,t){if(!oZ(e,t)){let n=e.typeKeywords;n?n.push(t):e.typeKeywords=[t]}}function oZ(e,t){return!!e.typeKeywords?.includes(t)}function hye(e){return oZ(e,cZ.HOSTED_SERVICE)}function sZ(e,t){let n=e.typeKeywords;if(n){let e=n.indexOf(t);e>-1&&n.splice(e,1)}}function gye(e,t,n){n?aZ(e,t):sZ(e,t)}async function _ye(e){let t=e.clone().normalize(),n;if(t.length>1)for(let e of t)n?e.width>n.width&&(n=e):n=e;else n=t[0];return mye(n)}var cZ={CHARTS:`Charts`,DYNAMIC:`Dynamic`,DEVELOPER_BASEMAP:`DeveloperBasemap`,GROUP_LAYER_MAP:`Map`,HOSTED_SERVICE:`Hosted Service`,JSAPI:`ArcGIS API for JavaScript`,LOCAL_SCENE:`ViewingMode-Local`,METADATA:`Metadata`,MULTI_LAYER:`Multilayer`,ORIENTED_IMAGERY_LAYER:`OrientedImageryLayer`,SINGLE_LAYER:`Singlelayer`,SUBTYPE_GROUP_LAYER:`SubtypeGroupLayer`,SUBTYPE_GROUP_TABLE:`SubtypeGroupTable`,TABLE:`Table`,TILED_IMAGERY:`Tiled Imagery`};function vye(e){let{portal:t,isOrgItem:n,itemControl:r}=e,i=t.user?.privileges,a=!i||i.includes(`features:user:edit`),o=!!n&&!!i?.includes(`features:user:fullEdit`),s=r===`update`||r===`admin`;return s?o=a=!0:o&&(a=!0),{features:{edit:a,fullEdit:o},content:{updateItem:s}}}var lZ=class extends L{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};e([N({type:String,json:{write:{isRequired:!0}}})],lZ.prototype,`facilityIdField`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],lZ.prototype,`layerId`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],lZ.prototype,`nameField`,void 0),e([N({type:String,json:{write:!0}})],lZ.prototype,`siteIdField`,void 0),e([N({type:Number,json:{read:{source:`subLayerId`},write:{target:`subLayerId`},origins:{"web-scene":{read:!1,write:!1}}}})],lZ.prototype,`sublayerId`,void 0),lZ=e([P(`esri.layers.support.FacilityLayerInfo`)],lZ);var yye=lZ,uZ=class extends L{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`facilityIdField`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`layerId`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`levelIdField`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`levelNumberField`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`longNameField`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`shortNameField`,void 0),e([N({type:Number,json:{read:{source:`subLayerId`},write:{target:`subLayerId`},origins:{"web-scene":{read:!1,write:!1}}}})],uZ.prototype,`sublayerId`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],uZ.prototype,`verticalOrderField`,void 0),uZ=e([P(`esri.layers.support.LevelLayerInfo`)],uZ);var bye=uZ,dZ=class extends L{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};e([N({type:String,json:{write:{isRequired:!0}}})],dZ.prototype,`layerId`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],dZ.prototype,`nameField`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],dZ.prototype,`siteIdField`,void 0),e([N({type:Number,json:{read:{source:`subLayerId`},write:{target:`subLayerId`},origins:{"web-scene":{read:!1,write:!1}}}})],dZ.prototype,`sublayerId`,void 0),dZ=e([P(`esri.layers.support.SiteLayerInfo`)],dZ);var xye=dZ,fZ=class extends L{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};e([N({type:bye,json:{write:{isRequired:!0}}})],fZ.prototype,`levelLayer`,void 0),e([N({type:yye,json:{write:{isRequired:!0}}})],fZ.prototype,`facilityLayer`,void 0),e([N({type:xye,json:{write:!0}})],fZ.prototype,`siteLayer`,void 0),fZ=e([P(`esri.support.MapFloorInfo`)],fZ);var Sye=fZ,pZ,mZ=pZ=class extends L{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new pZ(C({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};e([N({type:String,nonNullable:!0,json:{read:{source:`activeRangeName`},write:{target:`activeRangeName`,isRequired:!0}}})],mZ.prototype,`activeRange`,void 0),e([N({type:[Number],json:{write:!0}})],mZ.prototype,`currentRangeExtent`,void 0),e([N({type:[Number],json:{write:!0}})],mZ.prototype,`fullRangeExtent`,void 0),mZ=pZ=e([P(`esri.webdoc.RangeInfo`)],mZ);var hZ=mZ,gZ,_Z=gZ=class extends L{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new gZ(C({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};e([N({type:Boolean,json:{read:{source:`enabled`},write:{target:`enabled`}}})],_Z.prototype,`enabled`,void 0),e([N({type:Boolean,json:{read:{source:`longNames`},write:{target:`longNames`}}})],_Z.prototype,`longNames`,void 0),e([N({type:Boolean,json:{read:{source:`minimized`},write:{target:`minimized`}}})],_Z.prototype,`minimized`,void 0),e([N({type:Boolean,json:{read:{source:`pinnedLevels`},write:{target:`pinnedLevels`}}})],_Z.prototype,`pinnedLevels`,void 0),e([N({type:String,json:{read:{source:`site`},write:{target:`site`}}})],_Z.prototype,`site`,void 0),e([N({type:String,json:{read:{source:`facility`},write:{target:`facility`}}})],_Z.prototype,`facility`,void 0),e([N({type:String,json:{read:{source:`level`},write:{target:`level`}}})],_Z.prototype,`level`,void 0),_Z=gZ=e([P(`esri.webdoc.widgets.FloorFilter`)],_Z);var Cye=_Z,vZ,yZ=new xr({slider:`slider`,picker:`picker`}),bZ=vZ=class extends L{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new vZ({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};e([N({type:yZ.apiValues,nonNullable:!0,json:{type:yZ.jsonValues,default:null,read:{reader:yZ.read},write:{isRequired:!0,writer:yZ.write}}})],bZ.prototype,`interactionMode`,void 0),e([N({type:Wt,json:{read:{source:`numberOfStops`},write:{target:`numberOfStops`,overridePolicy(){let e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],bZ.prototype,`numStops`,void 0),e([N({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],bZ.prototype,`stopInterval`,void 0),bZ=vZ=e([P(`esri.webdoc.widgets.Range`)],bZ);var wye=bZ,xZ=Cr()({esriTimeUnitsMilliseconds:`milliseconds`,esriTimeUnitsSeconds:`seconds`,esriTimeUnitsMinutes:`minutes`,esriTimeUnitsHours:`hours`,esriTimeUnitsDays:`days`,esriTimeUnitsWeeks:`weeks`,esriTimeUnitsMonths:`months`,esriTimeUnitsYears:`years`,esriTimeUnitsDecades:`decades`,esriTimeUnitsCenturies:`centuries`,esriTimeUnitsUnknown:void 0}),SZ=class extends I(L){constructor(e){super(e),this.unit=`milliseconds`,this.value=0}toMilliseconds(){return KT(this.value,this.unit,`milliseconds`)}};e([A(xZ,{nonNullable:!0})],SZ.prototype,`unit`,void 0),e([N({type:Number,json:{write:!0},nonNullable:!0})],SZ.prototype,`value`,void 0),SZ=e([P(`esri.time.TimeInterval`)],SZ);var CZ,wZ=CZ=class extends L{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?YT.fromArray(e):void 0}writeCurrentTimeExtent(e,t,n){e&&Xe(n,e.toArray(),t)}readFullTimeExtent(e,t){let n=t.properties;if(!n)return;let r=n.endTime==null?null:new Date(n.endTime),i=n.startTime==null?null:new Date(n.startTime);return new YT({start:i,end:r})}writeFullTimeExtent(e,t){if(!e)return;let n=t.properties=t.properties||{},r=e.end,i=e.start;r&&(n.endTime=r==null?null:r.getTime()),i&&(n.startTime=i==null?null:i.getTime())}readStopInterval(e,t,n){return e?SZ.fromJSON({value:e.interval,unit:e.units},n):null}writeStopInterval(e,t,n,r){if(!e)return;let i=e.toJSON(r);Xe(`properties.timeStopInterval`,{interval:i.value,units:i.unit},t)}readStops(e){return e?.length?e.map(e=>new Date(e)):null}writeStops(e,t,n){e?.length&&Xe(n,e.map(e=>e.getTime()),t)}clone(){return new CZ(C({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};e([N({type:YT,json:{type:[[Wt,Gt]],read:{source:`properties.currentTimeExtent`},write:{target:`properties.currentTimeExtent`}}})],wZ.prototype,`currentTimeExtent`,void 0),e([j(`currentTimeExtent`)],wZ.prototype,`readCurrentTimeExtent`,null),e([M(`currentTimeExtent`)],wZ.prototype,`writeCurrentTimeExtent`,null),e([N({type:YT,json:{read:{source:[`properties.endTime`,`properties.startTime`]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],wZ.prototype,`fullTimeExtent`,void 0),e([j(`fullTimeExtent`)],wZ.prototype,`readFullTimeExtent`,null),e([M(`fullTimeExtent`)],wZ.prototype,`writeFullTimeExtent`,null),e([N({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:`properties.loop`},write:{target:`properties.loop`}}})],wZ.prototype,`loop`,void 0),e([N({type:Wt,json:{read:{source:`properties.numberOfStops`},write:{target:`properties.numberOfStops`,overridePolicy(){let e=!!this.stopInterval,t=!!this.stops?.length,n=!(e||t);return{enabled:n,isRequired:n}}}}})],wZ.prototype,`numStops`,void 0),e([N({type:[1,2],nonNullable:!0,json:{type:Wt,read:{source:`properties.thumbCount`},write:{target:`properties.thumbCount`,isRequired:!0}}})],wZ.prototype,`numThumbs`,void 0),e([N({type:Number,nonNullable:!0,json:{read:{source:`properties.thumbMovingRate`},write:{target:`properties.thumbMovingRate`,isRequired:!0}}})],wZ.prototype,`stopDelay`,void 0),e([N({type:SZ,json:{read:{source:`properties.timeStopInterval`},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:xZ.jsonValues.filter(e=>e!==`esriTimeUnitsUnknown`)}},overridePolicy(){let e=this.numStops!=null,t=!!this.stops?.length;return{enabled:!t,isRequired:!(e||t)}}}}})],wZ.prototype,`stopInterval`,void 0),e([j(`stopInterval`)],wZ.prototype,`readStopInterval`,null),e([M(`stopInterval`)],wZ.prototype,`writeStopInterval`,null),e([N({type:[Date],json:{type:[Wt],read:{source:`properties.stops`},write:{target:`properties.stops`,overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],wZ.prototype,`stops`,void 0),e([j(`stops`)],wZ.prototype,`readStops`,null),e([M(`stops`)],wZ.prototype,`writeStops`,null),wZ=CZ=e([P(`esri.webdoc.widgets.TimeSlider`)],wZ);var Tye=wZ,TZ,EZ=TZ=class extends L{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new TZ(C({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};e([N({type:wye,json:{write:!0}})],EZ.prototype,`range`,void 0),e([N({type:Tye,json:{write:!0}})],EZ.prototype,`timeSlider`,void 0),e([N({type:Cye,json:{write:!0}})],EZ.prototype,`floorFilter`,void 0),EZ=TZ=e([P(`esri.webdoc.Widgets`)],EZ);var Eye=EZ,Dye={width:600,height:400},DZ=1.5;function Oye(e,t){t||=Dye;let{width:n,height:r}=t,i=n/r;return i<DZ?r=n/DZ:i>DZ&&(n=r*DZ),n>e.width&&(r*=e.width/n,n=e.width),r>e.height&&(n*=e.height/r,r=e.height),{width:Math.round(n),height:Math.round(r)}}function OZ(e,t){return{...kZ(e,t),readResourcePaths:[]}}function kye(e,t,n){let r=Qo(e.itemUrl);return{...kZ(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,resources:n?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function kZ(e,t){return{origin:t,url:Qo(e.itemUrl),portal:e.portal||q.getDefault(),portalItem:e}}var AZ=class extends L{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){let e=this.geometries.map(e=>e.toJSON()),t=this.geometries[0],n={};return n.outSR=Il(this.outSpatialReference),n.inSR=Il(t.spatialReference),n.geometries=JSON.stringify({geometryType:hh(t),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(n.transformForward=this.transformForward),n}};e([N()],AZ.prototype,`geometries`,void 0),e([N({type:H,json:{read:{source:`outSR`}}})],AZ.prototype,`outSpatialReference`,void 0),e([N()],AZ.prototype,`transformation`,void 0),e([N()],AZ.prototype,`transformForward`,void 0),AZ=e([P(`esri.rest.support.ProjectParameters`)],AZ);var Aye=Lt(AZ);async function jZ(e,t,n){t=Aye(t);let r=wR(e),i={...r.query,f:`json`,...t.toJSON()},a=t.outSpatialReference,o=hh(t.geometries[0]),s=CR(i,n);return Qc(r.path+`/project`,s).then(({data:{geometries:e}})=>ER(e,o,a))}function jye(e,t){return t.resourceInfo?MZ(t,t.resourceInfo,{origin:e.origin}):t.portalItem?.id?Mye(e,t,t.portalItem):Promise.resolve()}function MZ(e,t,n){let r={context:{...n,layerContainerType:`operational-layers`}};return e.portalItem&&(r.context.portal=e.portalItem.portal||q.getDefault()),R(async()=>{let{populateOperationalLayers:e}=await import(`./layersCreator-B_NbEqg2.js`);return{populateOperationalLayers:e}},__vite__mapDeps([248,242,243,244,249,245,246])).then(({populateOperationalLayers:n})=>{let i=[],a=t.operationalLayers;a?.length&&i.push(n(e.layers,a,r));let o={...r,context:{...r.context,layerContainerType:`tables`},defaultLayerType:`ArcGISFeatureLayer`},s=t.tables;return s?.length&&i.push(n(e.tables,s,o)),Promise.allSettled(i).then(()=>{})})}async function Mye(e,t,n){if(await n.load().catch(t=>{throw new D(`${e.name}:load-portal-item`,`Failed to load portal item`,{error:t})}),n.type!==e.itemType)throw new D(`${e.name}:invalid-portal-item`,`Invalid portal item type '${n.type}', expected '${e.itemType}'`,{type:n.type});let r=await n.fetchData();t.resourceInfo=r;let i=OZ(n,e.origin);await Nye(e,t,r,i),t.resourceReferences={portalItem:n,paths:i.readResourcePaths};let a=await Fye(t.initialViewProperties,n,E.getLogger(t));if(a){let n=t.initialViewProperties?.clone()??e.createInitialViewProperties();n.viewpoint=a,t.initialViewProperties=n}}function Nye(e,t,n,r){let i=Pye(e,n);return t.read(i,r),MZ(t,i,r)}function Pye(e,t){let n=e.parseVersion(t.version||``,e.name);return e.currentVersion.validate(n),t.version=`${n.major}.${n.minor}`,t}async function Fye(e,t,n){if(e?.viewpoint?.targetGeometry)return null;let r=await Iye(e,t,n);return r?new Sh({targetGeometry:r}):null}async function Iye(e,t,n){let r=e?.spatialReference,i=t?.extent;if(!r||!i)return null;if(r.isWGS84)return i.clone();if(r.isWebMercator)return id(i);let{getGeometryServiceURL:a}=await R(async()=>{let{getGeometryServiceURL:e}=await import(`./geometryServiceUtils-B66sKfND.js`);return{getGeometryServiceURL:e}},[]);try{let e=await a(t),n=new AZ({geometries:[i],outSpatialReference:r});return(await jZ(e,n))[0]}catch(e){n.error(`Error projecting item's extent:`,e)}return null}function NZ(e){return{enabled:!!e?.length}}var PZ,FZ=PZ=class extends L{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new PZ({exactMatch:this.exactMatch,type:this.type,name:this.name})}};e([N({type:Boolean,json:{write:!0}})],FZ.prototype,`exactMatch`,void 0),e([N({type:String,json:{write:!0}})],FZ.prototype,`name`,void 0),e([A(aI)],FZ.prototype,`type`,void 0),FZ=PZ=e([P(`esri.webdoc.applicationProperties.SearchLayerField`)],FZ);var Lye=FZ,IZ,LZ=IZ=class extends L{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new IZ(C({field:this.field,id:this.id,subLayer:this.subLayer}))}};e([N({type:Lye,json:{write:{isRequired:!0}}})],LZ.prototype,`field`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],LZ.prototype,`id`,void 0),e([N({type:Wt,json:{write:!0}})],LZ.prototype,`subLayer`,void 0),LZ=IZ=e([P(`esri.webdoc.applicationProperties.SearchLayer`)],LZ);var Rye=LZ,RZ,zZ=RZ=class extends L{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new RZ({exactMatch:this.exactMatch,type:this.type,name:this.name})}};e([N({type:Boolean,json:{write:!0}})],zZ.prototype,`exactMatch`,void 0),e([N({type:String,json:{write:!0}})],zZ.prototype,`name`,void 0),e([A(aI)],zZ.prototype,`type`,void 0),zZ=RZ=e([P(`esri.webdoc.applicationProperties.SearchTableField`)],zZ);var zye=zZ,BZ,VZ=BZ=class extends L{constructor(e){super(e),this.field=null,this.id=null}clone(){return new BZ(C({field:this.field,id:this.id}))}};e([N({type:zye,json:{write:{isRequired:!0}}})],VZ.prototype,`field`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],VZ.prototype,`id`,void 0),VZ=BZ=e([P(`esri.webdoc.applicationProperties.SearchTable`)],VZ);var Bye=VZ,HZ,UZ=W.ofType(Rye),WZ=W.ofType(Bye),GZ=HZ=class extends L{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new UZ,this.tables=new WZ}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,n){t[n]=!e}clone(){return new HZ(C({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};e([N({type:Boolean,nonNullable:!0,json:{read:{source:`disablePlaceFinder`},write:{target:`disablePlaceFinder`,isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],GZ.prototype,`addressSearchEnabled`,void 0),e([j(`addressSearchEnabled`)],GZ.prototype,`readAddressSearchEnabled`,null),e([M(`addressSearchEnabled`)],GZ.prototype,`writeAddressSearchEnabled`,null),e([N({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],GZ.prototype,`enabled`,void 0),e([N({type:String,json:{write:!0}})],GZ.prototype,`hintText`,void 0),e([N({type:UZ,json:{write:{overridePolicy:NZ},origins:{"web-scene":{write:{isRequired:!0}}}}})],GZ.prototype,`layers`,void 0),e([N({type:WZ,json:{read:!0,write:{overridePolicy:NZ}}})],GZ.prototype,`tables`,void 0),GZ=HZ=e([P(`esri.webdoc.applicationProperties.Search`)],GZ);var Vye=GZ,KZ,qZ=KZ=class extends L{constructor(e){super(e),this.search=null}clone(){return new KZ(C({search:this.search}))}};e([N({type:Vye,json:{write:!0}})],qZ.prototype,`search`,void 0),qZ=KZ=e([P(`esri.webdoc.applicationProperties.Viewing`)],qZ);var Hye=qZ,JZ,YZ=JZ=class extends L{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new JZ(C({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};e([N({json:{write:!0}})],YZ.prototype,`editing`,void 0),e([N({json:{write:!0}})],YZ.prototype,`offline`,void 0),e([N({type:Hye,json:{write:!0}})],YZ.prototype,`viewing`,void 0),YZ=JZ=e([P(`esri.webmap.ApplicationProperties`)],YZ);var Uye=YZ,XZ,ZZ=XZ=class extends L{constructor(){super(...arguments),this.url=``}destroy(){this.url=``}get isSecureUrl(){return Ds(this.url)}get isDataURI(){return xs(this.url)}clone(){return new XZ({url:this.url})}};e([N({type:String,json:{write:{isRequired:!0}}})],ZZ.prototype,`url`,void 0),e([N()],ZZ.prototype,`isSecureUrl`,null),e([N()],ZZ.prototype,`isDataURI`,null),ZZ=XZ=e([P(`esri.webdoc.support.SlideThumbnail`)],ZZ);var Wye={type:YT,json:{read:{source:`timeExtent`,reader:e=>e?Array.isArray(e)?YT.fromArray(e):YT.fromJSON(e):null},write:{writer:(e,t,n,r)=>{e&&(e.isEmpty?r?.messages&&r.messages.push(new D(`invalid-timeExtent`,`TimeExtent cannot be empty`)):t[n]=e.toArray())},target:{timeExtent:{type:[[Wt,Gt]]}}}}},QZ,$Z=QZ=class extends HT(L){constructor(e){super(e),this.name=null,this.thumbnail=new ZZ,this.timeExtent=null}castThumbnail(e){return typeof e==`string`?new ZZ({url:e}):Lt(ZZ,e)}set viewpoint(e){let{targetGeometry:t,scale:n}=e;t!=null&&t.type===`point`&&n==null&&E.getLogger(this).warn(`Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.`,e),this._set(`viewpoint`,e)}readViewpoint(e,t){let{extent:n,viewpoint:r}=t;return Sh.fromJSON(r||{targetGeometry:n})}writeViewpoint(e,t,n,r){if(!e)return;let{targetGeometry:i}=e;if(i!=null&&i.type!==`extent`){let e=`Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.`;r?.messages?r.messages.push(new D(`property:unsupported`,e)):E.getLogger(this).error(e);return}i!=null&&(t.extent=i.toJSON()),t[n]=e.toJSON()}clone(){return new QZ(C({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};e([N({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],$Z.prototype,`name`,void 0),e([N({type:ZZ,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],$Z.prototype,`thumbnail`,void 0),e([Tr(`thumbnail`)],$Z.prototype,`castThumbnail`,null),e([N(Wye)],$Z.prototype,`timeExtent`,void 0),e([N({type:Sh,nonNullable:!0,json:{write:!0}})],$Z.prototype,`viewpoint`,null),e([j(`viewpoint`,[`extent`,`viewpoint`])],$Z.prototype,`readViewpoint`,null),e([M(`viewpoint`)],$Z.prototype,`writeViewpoint`,null),$Z=QZ=e([P(`esri.webmap.Bookmark`)],$Z);var Gye=$Z,eQ=class extends I(F){constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=Dg,this.viewpoint=null}};e([N({type:WX})],eQ.prototype,`background`,void 0),e([N({type:hZ})],eQ.prototype,`rangeInfo`,void 0),e([N({type:H})],eQ.prototype,`spatialReference`,void 0),e([N({type:YT})],eQ.prototype,`timeExtent`,void 0),e([N({nonNullable:!0})],eQ.prototype,`timeZone`,void 0),e([N({type:Sh})],eQ.prototype,`viewpoint`,void 0),eQ=e([P(`esri.webmap.InitialViewProperties`)],eQ);var tQ=eQ,nQ=W.ofType(Gye),Kye=new Map([[`image/jpeg`,`jpeg`],[`image/jpg`,`jpg`],[`image/png`,`png`],[`image/gif`,`gif`]]),qye=`ArcGIS Pro`,Jye=cZ.JSAPI,rQ=class extends rZ(fT(lT(qO))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new nQ,this.floorInfo=null,this.initialViewProperties=new tQ,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=Ri(async(e,t,n)=>{let{save:r,saveAs:i}=await R(async()=>{let{save:e,saveAs:t}=await import(`./webdocSaveUtils-D83id4-v.js`);return{save:e,saveAs:t}},__vite__mapDeps([427,428,240,429,430]));switch(e){case 0:return r(this.context,this,t);case 1:return i(this.context,this,n,t)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=zr(this.portalItem)}initialize(){if(this.when().catch(e=>{E.getLogger(this).error(`#load()`,`Failed to load web map`,e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(e){this.addResolvingPromise(Promise.reject(e));return}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set(`authoringApp`,e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=Jye}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set(`authoringAppVersion`,e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=`5.0`}readInitialViewProperties(e,t){let n=new tQ;t.background&&(n.background=WX.fromJSON(t.background));let r=t.initialState?.timeExtent;r&&(n.timeExtent=YT.fromArray(r));let i=t.initialState?.viewpoint;return i&&(i.rotation&&zX.parse(t.version||``,`webmap`).lessThan(2,20)&&t.authoringApp===qye&&(i.rotation*=-1),n.viewpoint=Sh.fromJSON(i)),t.mapRangeInfo&&(n.rangeInfo=hZ.fromJSON(t.mapRangeInfo)),t.spatialReference&&(n.spatialReference=H.fromJSON(t.spatialReference)),t.timeZone&&(n.timeZone=t.timeZone),n}writeInitialViewProperties(e,t,n,r){if(!e)return;e.background?.color&&(t.background=e.background.write({},r));let{timeExtent:i,viewpoint:a}=e;if(a||i){let e={};a&&(e.viewpoint=a.write({},r)),i&&(e.timeExtent=i.toArray()),t.initialState=e}e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(r)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},r)),t.timeZone=e.timeZone}writeLayers(e,t,n,r){t[n]=this._writeLayers(e,r,`operational-layers`)}get loaded(){return super.loaded}readSourceVersion(e,t){let[n,r]=t.version.split(`.`);return new zX(parseInt(n,10),parseInt(r,10))}writeSourceVersion(e,t,n){t[n]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(e,t,n,r){let i=this._writeLayers(e,r,`tables`);i.length&&(t[n]=i)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override(`thumbnailUrl`,e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(e){return this.addResolvingPromise(jye(this.context,this)),Promise.resolve(this)}loadAll(){return hT(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,t){t={...t,origin:this.context.origin};let n=this._getAuthoringPropsState();Oo(this,e,t=>super.read(e,t),t),this._restoreAuthoringPropsFromState(n)}write(e,t){if(this.loadStatus!==`loaded`){let e=new D(`webmap:not-loaded`,`Web map must be loaded before it can be serialized`);throw E.getLogger(this).error(`#toJSON()`,`Web map must be loaded before it can be serialized`,this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,t){return this._debouncedSaveOperations(1,t,e)}async updateFrom(e,t){let n=this._updateFromInternal(e,t);this._updateFromPromise=n,await n,n===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){let t=this.resourceInfo;return this._collectAllLayersJSON([...t?.baseMap?.baseMapLayers||[],...t?.operationalLayers||[],...this.basemap?.resourceInfo?.data?.baseMapLayers||[]]).find(t=>t.id===e.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden(`thumbnailUrl`)&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let e=this.thumbnailUrl;return e&&=this._isOverridden(`thumbnailUrl`)?e:Ks(e,`w`,`8192`),{thumbnailUrl:e,filename:this._thumbnailFilename}}restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_collectAllLayersJSON(e){return e.reduce((e,t)=>(e.push(t),t.layerType===`GroupLayer`&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e),[])}_writeLayers(e,t,n){return t={...t,layerContainerType:n},e.map(e=>hE(e,n===`tables`?null:this.getLayerJSONFromResourceInfo(e),t)).filter(ge).toArray()}_validateJSON(e){let t=zX.parse(e.version||``,`webmap`);return this.context.currentVersion.validate(t),e.version=`${t.major}.${t.minor}`,e}_removeDanglingLayerRefs(){let e=this.applicationProperties,t=e?.viewing?.search,n=e=>this.allLayers.some(t=>t.id===e);if(t?.layers&&(t.layers=t.layers.filter(e=>n(e.id))),t?.tables&&(t.tables=t.tables.filter(e=>this.tables.some(t=>t.id===e.id))),e){let t=e.editing?.locationTracking;t?.info&&!n(t.info.layerId)&&(e.editing=null)}let r=`presentation`in this?this.presentation:null,i=r?.slides;i&&i.forEach(e=>{e.visibleLayers&&=e.visibleLayers.filter(e=>n(e.id))})}async _updateFromInternal(e,t){if(t??={},await Uh(()=>e.ready),this._updateInitialViewProperties(e,t),e.map===this)for(let t of e.allLayerViews)`visible`in t&&`visible`in t.layer&&t._isOverridden(`visible`)&&(t.layer.visible=t.visible),`featureEffect`in t&&`featureEffect`in t.layer&&t._isOverridden(`featureEffect`)&&(t.layer.featureEffect=t.featureEffect);await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){if(t.backgroundExcluded||(this.initialViewProperties.background=e.background?.clone()),this.initialViewProperties.spatialReference=e.spatialReference?.clone(),this.initialViewProperties.timeZone=e.timeZone,t.viewpointExcluded||(this.initialViewProperties.viewpoint=new Sh({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(let t of e.persistableViewModels)t.updateWebDocument(this)}_getViewExtent(e){let t=e.center.clone().normalize(),n=e.extent.clone(),r=n.width/2;return n.xmin=t.x-r,n.xmax=t.x+r,n}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;let n=Oye(e,t.thumbnailSize),r=await e.takeScreenshot({format:`png`,width:n.width,height:n.height});this._setAutoGeneratedThumbnail(r.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride(`thumbnailUrl`),this.clear(`thumbnailUrl`,`user`),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(xs(e)){let t=Cs(e),n=t?.mediaType,r=n&&Kye.get(n.toLowerCase())||null,i=`thumbnail${Date.now()}`;return r?`${i}.${r}`:i}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};e([N()],rQ.prototype,`_updateFromPromise`,void 0),e([N({type:Uye,json:{write:!0}})],rQ.prototype,`applicationProperties`,void 0),e([N({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],rQ.prototype,`authoringApp`,null),e([M(`authoringApp`)],rQ.prototype,`writeAuthoringApp`,null),e([N({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],rQ.prototype,`authoringAppVersion`,null),e([M(`authoringAppVersion`)],rQ.prototype,`writeAuthoringAppVersion`,null),e([N({type:nQ,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],rQ.prototype,`bookmarks`,void 0),e([N({type:Sye,json:{name:`mapFloorInfo`,write:!0}})],rQ.prototype,`floorInfo`,void 0),e([N({type:tQ,nonNullable:!0,json:{read:{source:[`background`,`initialState.timeExtent`,`initialState.viewpoint`,`mapRangeInfo`,`spatialReference`,`timeZone`]},write:{ignoreOrigin:!0,target:{background:{type:WX},"initialState.timeExtent":{type:YT},"initialState.viewpoint":{type:Sh},mapRangeInfo:{type:hZ},spatialReference:{type:H},"timeZone:":{type:String}}}}})],rQ.prototype,`initialViewProperties`,void 0),e([j(`initialViewProperties`)],rQ.prototype,`readInitialViewProperties`,null),e([M(`initialViewProperties`)],rQ.prototype,`writeInitialViewProperties`,null),e([N({json:{read:!1,write:{target:`operationalLayers`,ignoreOrigin:!0}}})],rQ.prototype,`layers`,void 0),e([M(`layers`)],rQ.prototype,`writeLayers`,null),e([N({type:RT})],rQ.prototype,`portalItem`,void 0),e([N()],rQ.prototype,`resourceInfo`,void 0),e([N({readOnly:!0,type:zX,json:{read:{source:`version`},write:{allowNull:!0,ignoreOrigin:!0,target:`version`,isRequired:!0}}})],rQ.prototype,`sourceVersion`,void 0),e([j(`sourceVersion`)],rQ.prototype,`readSourceVersion`,null),e([M(`sourceVersion`)],rQ.prototype,`writeSourceVersion`,null),e([N({json:{read:!1,write:{ignoreOrigin:!0}}})],rQ.prototype,`tables`,void 0),e([M(`tables`)],rQ.prototype,`writeTables`,null),e([N()],rQ.prototype,`thumbnailUrl`,null),e([N()],rQ.prototype,`updatingFromView`,null),e([N({type:Eye,json:{write:!0}})],rQ.prototype,`widgets`,void 0),rQ=e([P(`esri.WebDocument2D`)],rQ);var Yye=rQ,iQ=(e=>e)([`operational-layers`,`basemap-base-layers`,`basemap-ground-layers`,`ground`]),aQ,oQ=aQ=class extends L{constructor(e){super(e),this.expression=null,this.name=null,this.returnType=`boolean`,this.title=null}clone(){return new aQ({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([N({type:String,json:{write:!0}})],oQ.prototype,`expression`,void 0),e([N({type:String,json:{write:!0}})],oQ.prototype,`name`,void 0),e([N({type:[`boolean`,`date`,`number`,`string`],json:{write:!0}})],oQ.prototype,`returnType`,void 0),e([N({type:String,json:{write:!0}})],oQ.prototype,`title`,void 0),oQ=aQ=e([P(`esri.form.ExpressionInfo`)],oQ);var Xye=oQ,sQ=class extends L{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};e([O({type:String,json:{write:!0}})],sQ.prototype,`description`,void 0),e([O({type:String,json:{write:!0}})],sQ.prototype,`label`,void 0),e([O()],sQ.prototype,`type`,void 0),e([O({type:String,json:{write:!0}})],sQ.prototype,`visibilityExpression`,void 0),sQ=e([hr(`esri.form.elements.Element`)],sQ);var cQ=class extends I(L){constructor(e){super(e),this.type=null}};e([N()],cQ.prototype,`type`,void 0),cQ=e([P(`esri.form.elements.inputs.attachments.Input`)],cQ);var lQ=cQ,uQ=[`any`,`capture`,`upload`],dQ=class extends lQ{constructor(e){super(e),this.type=`audio`,this.inputMethod=`any`,this.maxDuration=null}};e([N({type:[`audio`],readOnly:!0,json:{write:!0}})],dQ.prototype,`type`,void 0),e([N({type:uQ,json:{write:!0}})],dQ.prototype,`inputMethod`,void 0),e([N({type:Number,json:{write:!0}})],dQ.prototype,`maxDuration`,void 0),dQ=e([P(`esri.form.elements.inputs.attachments.AudioInput`)],dQ);var fQ=dQ,pQ=class extends lQ{constructor(e){super(e),this.type=`document`,this.maxFileSize=null}};e([N({type:[`document`],readOnly:!0,json:{write:!0}})],pQ.prototype,`type`,void 0),e([N({type:Number,json:{write:!0}})],pQ.prototype,`maxFileSize`,void 0),pQ=e([P(`esri.form.elements.inputs.attachments.DocumentInput`)],pQ);var mQ=pQ,hQ=class extends lQ{constructor(e){super(e),this.type=`image`,this.inputMethod=`any`,this.maxImageSize=null}};e([N({type:[`image`],readOnly:!0,json:{write:!0}})],hQ.prototype,`type`,void 0),e([N({type:uQ,json:{write:!0}})],hQ.prototype,`inputMethod`,void 0),e([N({type:Number,json:{write:!0}})],hQ.prototype,`maxImageSize`,void 0),hQ=e([P(`esri.form.elements.inputs.attachments.ImageInput`)],hQ);var gQ=hQ,_Q=class extends lQ{constructor(e){super(e),this.type=`signature`,this.inputMethod=`any`}};e([N({type:[`signature`],readOnly:!0,json:{write:!0}})],_Q.prototype,`type`,void 0),e([N({type:uQ,json:{write:!0}})],_Q.prototype,`inputMethod`,void 0),_Q=e([P(`esri.form.elements.inputs.attachments.SignatureInput`)],_Q);var vQ=_Q,yQ=class extends lQ{constructor(e){super(e),this.type=`video`,this.inputMethod=`any`,this.maxDuration=null}};e([N({type:[`video`],readOnly:!0,json:{write:!0}})],yQ.prototype,`type`,void 0),e([N({type:uQ,json:{write:!0}})],yQ.prototype,`inputMethod`,void 0),e([N({type:Number,json:{write:!0}})],yQ.prototype,`maxDuration`,void 0),yQ=e([P(`esri.form.elements.inputs.attachments.VideoInput`)],yQ);var bQ=yQ;function xQ(e){return{nestableTypes:{base:lQ,key:`type`,typeMap:{audio:fQ,document:mQ,image:gQ,signature:vQ,video:bQ}},allTypes:{base:lQ,key:`type`,typeMap:{attachment:e,audio:fQ,document:mQ,image:gQ,signature:vQ,video:bQ}}}}function Zye(e,t,n){return e?e.map(e=>Ut(n?t.nestableTypes:t.allTypes,e)):null}function Qye(e,t,n){if(!e)return null;let r=n?t.nestableTypes.typeMap:t.allTypes.typeMap;return e.filter(e=>r[e.type]).map(e=>r[e.type].fromJSON(e))}function $ye(e,t,n){if(!e)return null;let r=n?t.nestableTypes.typeMap:t.allTypes.typeMap;return e.filter(e=>r[e.type]).map(e=>e.toJSON())}var SQ=class extends lQ{constructor(e){super(e),this.type=`attachment`,this.attachmentAssociationType=`exact`}get inputTypes(){return this._get(`inputTypes`)??null}set inputTypes(e){this._set(`inputTypes`,e)}castInputs(e){return Zye(e,CQ,!0)}readInputs(e,t){return Qye(t.inputTypes,CQ,!0)}writeInputs(e,t){t.inputTypes=$ye(e,CQ,!0)}};e([N({type:[`attachment`],readOnly:!0,json:{write:!0}})],SQ.prototype,`type`,void 0),e([N({type:[`any`,`exact`,`exactOrNone`],json:{write:!0}})],SQ.prototype,`attachmentAssociationType`,void 0),e([N({json:{write:{isRequired:!0}}})],SQ.prototype,`inputTypes`,null),e([Tr(`inputTypes`)],SQ.prototype,`castInputs`,null),e([j(`inputTypes`)],SQ.prototype,`readInputs`,null),e([M(`inputTypes`)],SQ.prototype,`writeInputs`,null),SQ=e([P(`esri.form.elements.inputs.attachments.AttachmentInput`)],SQ);var CQ=xQ(SQ),ebe=SQ,wQ,tbe=xQ(ebe),TQ=wQ=class extends sQ{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression=`{attachmentKeyword}_{now}`,this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type=`attachment`,this.useOriginalFilename=!0}clone(){return new wQ({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};e([N({type:Boolean,json:{write:!0}})],TQ.prototype,`allowUserRename`,void 0),e([N({type:String,json:{write:{isRequired:!0}}})],TQ.prototype,`attachmentKeyword`,void 0),e([N({type:Boolean,json:{write:!0}})],TQ.prototype,`displayFilename`,void 0),e([N({type:String,json:{write:!0}})],TQ.prototype,`editableExpression`,void 0),e([N({type:String,json:{write:!0}})],TQ.prototype,`filenameExpression`,void 0),e([N({types:tbe.allTypes,json:{read:{source:`inputType`},write:{target:`inputType`,isRequired:!0}}})],TQ.prototype,`input`,void 0),e([N({type:Number,json:{write:!0}})],TQ.prototype,`maxAttachmentCount`,void 0),e([N({type:Number,json:{write:!0}})],TQ.prototype,`minAttachmentCount`,void 0),e([N({type:[`attachment`],readOnly:!0,json:{read:!1,write:!0}})],TQ.prototype,`type`,void 0),e([N({type:Boolean,json:{write:!0}})],TQ.prototype,`useOriginalFilename`,void 0),TQ=wQ=e([P(`esri.form.elements.AttachmentElement`)],TQ);var EQ=TQ,DQ=class extends L{constructor(e){super(e),this.type=null}};e([N()],DQ.prototype,`type`,void 0),DQ=e([P(`esri.form.elements.inputs.Input`)],DQ);var OQ=DQ,kQ=class extends OQ{constructor(e){super(e),this.maxLength=null,this.minLength=0}};e([N({type:Number,json:{write:!0}})],kQ.prototype,`maxLength`,void 0),e([N({type:Number,json:{write:!0}})],kQ.prototype,`minLength`,void 0),kQ=e([P(`esri.form.elements.inputs.TextInput`)],kQ);var AQ=kQ,jQ,MQ=jQ=class extends AQ{constructor(e){super(e),this.type=`barcode-scanner`}clone(){return new jQ({maxLength:this.maxLength,minLength:this.minLength})}};e([N({type:[`barcode-scanner`],json:{read:!1,write:!0}})],MQ.prototype,`type`,void 0),MQ=jQ=e([P(`esri.form.elements.inputs.BarcodeScannerInput`)],MQ);var nbe=MQ,NQ,PQ=NQ=class extends OQ{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type=`combo-box`}clone(){return new NQ({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e([N({type:String,json:{write:!0}})],PQ.prototype,`noValueOptionLabel`,void 0),e([N({type:Boolean,json:{write:!0}})],PQ.prototype,`showNoValueOption`,void 0),e([N({type:[`combo-box`],json:{read:!1,write:!0}})],PQ.prototype,`type`,void 0),PQ=NQ=e([P(`esri.form.elements.inputs.ComboBoxInput`)],PQ);var rbe=PQ,FQ;function IQ(e){return e??null}function LQ(e){return e??null}var RQ=FQ=class extends OQ{constructor(e){super(e),this.max=null,this.min=null,this.type=`date-picker`}readMax(e,t){return IQ(t.max)}writeMax(e,t){t.max=LQ(e)}readMin(e,t){return IQ(t.min)}writeMin(e,t){t.min=LQ(e)}clone(){return new FQ({max:this.max,min:this.min})}};e([N({type:String,json:{type:String,write:!0}})],RQ.prototype,`max`,void 0),e([j(`max`)],RQ.prototype,`readMax`,null),e([M(`max`)],RQ.prototype,`writeMax`,null),e([N({type:String,json:{type:String,write:!0}})],RQ.prototype,`min`,void 0),e([j(`min`)],RQ.prototype,`readMin`,null),e([M(`min`)],RQ.prototype,`writeMin`,null),e([N({type:[`date-picker`],json:{read:!1,write:!0}})],RQ.prototype,`type`,void 0),RQ=FQ=e([P(`esri.form.elements.inputs.DatePickerInput`)],RQ);var ibe=RQ,zQ;function BQ(e){return e??null}function VQ(e){return e??null}var HQ=zQ=class extends OQ{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution=`minutes`,this.type=`datetimeoffset-picker`}readMax(e,t){return BQ(t.max)}writeMax(e,t){t.max=VQ(e)}readMin(e,t){return BQ(t.min)}writeMin(e,t){t.min=VQ(e)}readTimeResolution(e,t){return BQ(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=VQ(e)}clone(){return new zQ({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([N({type:Boolean,json:{write:!0}})],HQ.prototype,`includeTimeOffset`,void 0),e([N({type:String,json:{type:String,write:!0}})],HQ.prototype,`max`,void 0),e([j(`max`)],HQ.prototype,`readMax`,null),e([M(`max`)],HQ.prototype,`writeMax`,null),e([N({type:String,json:{type:String,write:!0}})],HQ.prototype,`min`,void 0),e([j(`min`)],HQ.prototype,`readMin`,null),e([M(`min`)],HQ.prototype,`writeMin`,null),e([N({type:String,json:{type:String,write:!0}})],HQ.prototype,`timeResolution`,void 0),e([j(`timeResolution`)],HQ.prototype,`readTimeResolution`,null),e([M(`timeResolution`)],HQ.prototype,`writeTimeResolution`,null),e([N({type:[`datetimeoffset-picker`],json:{read:!1,write:!0}})],HQ.prototype,`type`,void 0),HQ=zQ=e([P(`esri.form.elements.inputs.DateTimeOffsetPickerInput`)],HQ);var abe=HQ,UQ;function WQ(e){return e==null?null:new Date(e)}function GQ(e){return e?e.getTime():null}var KQ=UQ=class extends OQ{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type=`datetime-picker`}readMax(e,t){return WQ(t.max)}writeMax(e,t){t.max=GQ(e)}readMin(e,t){return WQ(t.min)}writeMin(e,t){t.min=GQ(e)}clone(){return new UQ({includeTime:this.includeTime,max:this.max,min:this.min})}};e([N({type:Boolean,json:{write:!0}})],KQ.prototype,`includeTime`,void 0),e([N({type:Date,json:{type:Number,write:!0}})],KQ.prototype,`max`,void 0),e([j(`max`)],KQ.prototype,`readMax`,null),e([M(`max`)],KQ.prototype,`writeMax`,null),e([N({type:Date,json:{type:Number,write:!0}})],KQ.prototype,`min`,void 0),e([j(`min`)],KQ.prototype,`readMin`,null),e([M(`min`)],KQ.prototype,`writeMin`,null),e([N({type:[`datetime-picker`],json:{read:!1,write:!0}})],KQ.prototype,`type`,void 0),KQ=UQ=e([P(`esri.form.elements.inputs.DateTimePickerInput`)],KQ);var obe=KQ,qQ,JQ=qQ=class extends OQ{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type=`radio-buttons`}clone(){return new qQ({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e([N({type:String,json:{write:!0}})],JQ.prototype,`noValueOptionLabel`,void 0),e([N({type:Boolean,json:{write:!0}})],JQ.prototype,`showNoValueOption`,void 0),e([N({type:[`radio-buttons`],json:{read:!1,write:!0}})],JQ.prototype,`type`,void 0),JQ=qQ=e([P(`esri.form.elements.inputs.RadioButtonsInput`)],JQ);var sbe=JQ,YQ,XQ=YQ=class extends OQ{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type=`switch`}clone(){return new YQ({offValue:this.offValue,onValue:this.onValue})}};e([N({type:[String,Number],json:{write:!0}})],XQ.prototype,`offValue`,void 0),e([N({type:[String,Number],json:{write:!0}})],XQ.prototype,`onValue`,void 0),e([N({type:[`switch`],json:{read:!1,write:!0}})],XQ.prototype,`type`,void 0),XQ=YQ=e([P(`esri.form.elements.inputs.SwitchInput`)],XQ);var cbe=XQ,ZQ,QQ=ZQ=class extends AQ{constructor(e){super(e),this.type=`text-area`}clone(){return new ZQ({maxLength:this.maxLength,minLength:this.minLength})}};e([N({type:[`text-area`],json:{read:!1,write:!0}})],QQ.prototype,`type`,void 0),QQ=ZQ=e([P(`esri.form.elements.inputs.TextAreaInput`)],QQ);var lbe=QQ,$Q,e$=$Q=class extends AQ{constructor(e){super(e),this.type=`text-box`}clone(){return new $Q({maxLength:this.maxLength,minLength:this.minLength})}};e([N({type:[`text-box`],json:{read:!1,write:!0}})],e$.prototype,`type`,void 0),e$=$Q=e([P(`esri.form.elements.inputs.TextBoxInput`)],e$);var ube=e$,t$;function n$(e){return e??null}function r$(e){return e??null}var i$=t$=class extends OQ{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution=`minutes`,this.type=`time-picker`}readMax(e,t){return n$(t.max)}writeMax(e,t){t.max=r$(e)}readMin(e,t){return n$(t.min)}writeMin(e,t){t.min=r$(e)}readTimeResolution(e,t){return n$(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=r$(e)}clone(){return new t$({max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([N({type:String,json:{type:String,write:!0}})],i$.prototype,`max`,void 0),e([j(`max`)],i$.prototype,`readMax`,null),e([M(`max`)],i$.prototype,`writeMax`,null),e([N({type:String,json:{type:String,write:!0}})],i$.prototype,`min`,void 0),e([j(`min`)],i$.prototype,`readMin`,null),e([M(`min`)],i$.prototype,`writeMin`,null),e([N({type:String,json:{type:String,write:!0}})],i$.prototype,`timeResolution`,void 0),e([j(`timeResolution`)],i$.prototype,`readTimeResolution`,null),e([M(`timeResolution`)],i$.prototype,`writeTimeResolution`,null),e([N({type:[`time-picker`],json:{read:!1,write:!0}})],i$.prototype,`type`,void 0),i$=t$=e([P(`esri.form.elements.inputs.TimePickerInput`)],i$);var dbe=i$,fbe=nbe,pbe=rbe,mbe=ibe,hbe=abe,gbe=obe,_be=sbe,vbe=cbe,ybe=lbe,bbe=ube,xbe=dbe,Sbe={base:OQ,key:`type`,typeMap:{"barcode-scanner":fbe,"combo-box":pbe,"date-picker":mbe,"datetime-picker":gbe,"datetimeoffset-picker":hbe,"radio-buttons":_be,switch:vbe,"text-area":ybe,"text-box":bbe,"time-picker":xbe}},a$,o$=a$=class extends sQ{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type=`field`,this.valueExpression=null}clone(){return new a$({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};e([N({types:rI,json:{read:{reader:iI},write:!0}})],o$.prototype,`domain`,void 0),e([N({type:Boolean,json:{write:!0}})],o$.prototype,`editable`,void 0),e([N({type:String,json:{write:!0}})],o$.prototype,`editableExpression`,void 0),e([N({type:String,json:{write:!0}})],o$.prototype,`fieldName`,void 0),e([N({type:String,json:{write:!0}})],o$.prototype,`hint`,void 0),e([N({types:Sbe,json:{read:{source:`inputType`},write:{target:`inputType`}}})],o$.prototype,`input`,void 0),e([N({type:String,json:{write:!0}})],o$.prototype,`requiredExpression`,void 0),e([N({type:String,json:{read:!1,write:!0}})],o$.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],o$.prototype,`valueExpression`,void 0),o$=a$=e([P(`esri.form.elements.FieldElement`)],o$);var s$,c$=s$=class extends sQ{constructor(e){super(e),this.displayCount=null,this.displayType=`list`,this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type=`relationship`}clone(){return new s$({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:C(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e([N({type:Number,json:{write:!0}})],c$.prototype,`displayCount`,void 0),e([N({type:[`list`],json:{write:!0}})],c$.prototype,`displayType`,void 0),e([N({type:String,json:{write:!0}})],c$.prototype,`editableExpression`,void 0),e([N({type:[Vj],json:{write:!0}})],c$.prototype,`orderByFields`,void 0),e([N({type:Number,json:{write:!0}})],c$.prototype,`relationshipId`,void 0),e([N({type:[`relationship`],json:{read:!1,write:!0}})],c$.prototype,`type`,void 0),c$=s$=e([P(`esri.form.elements.RelationshipElement`)],c$);var l$=c$,u$,d$=u$=class extends sQ{constructor(e){super(e),this.text=null,this.textFormat=`plain-text`,this.type=`text`}clone(){return new u$({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};e([N({type:String,json:{write:!0}})],d$.prototype,`text`,void 0),e([N({type:String,json:{write:!0}})],d$.prototype,`textFormat`,void 0),e([N({type:[`text`],readOnly:!0,json:{read:!1,write:!0}})],d$.prototype,`type`,void 0),d$=u$=e([P(`esri.form.elements.TextElement`)],d$);var f$=d$,p$=class extends I(sQ){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type=`utilityNetworkAssociations`}};e([N({type:[Jj],json:{write:{isRequired:!0}}})],p$.prototype,`associationTypes`,void 0),e([N({type:String,json:{write:!0}})],p$.prototype,`editableExpression`,void 0),e([N({type:[`utilityNetworkAssociations`],json:{read:!1,write:!0}})],p$.prototype,`type`,void 0),p$=e([P(`esri.form.elements.UtilityNetworkAssociationsElement`)],p$);var m$=p$,Cbe=e=>e.type===`field`,wbe=e=>e.type===`group`,Tbe=e=>e.type===`text`;function h$(e){return{typesWithGroup:{base:sQ,key:`type`,typeMap:{attachment:EQ,field:o$,group:e,relationship:l$,text:f$,utilityNetworkAssociations:m$}},typesWithoutGroup:{base:sQ,key:`type`,typeMap:{attachment:EQ,field:o$,relationship:l$,text:f$,utilityNetworkAssociations:m$}}}}function g$(e,t,n=!0){if(!e)return null;let r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>r[e.type]).map(e=>r[e.type].fromJSON(e))}function _$(e,t,n=!0){if(!e)return null;let r=n?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(e=>r[e.type]).map(e=>e.toJSON())}function v$(e,t,n=!0){return e?e.map(e=>Ut(n?t.typesWithGroup:t.typesWithoutGroup,e)):null}var y$,b$=y$=class extends sQ{constructor(e){super(e),this.initialState=`expanded`,this.type=`group`}get elements(){return this._get(`elements`)??null}set elements(e){this._set(`elements`,e)}castElements(e){return v$(e,x$,!1)}readElements(e,t){return g$(t.formElements,x$,!1)}writeElements(e,t){t.formElements=_$(e,x$,!1)}clone(){return new y$({description:this.description,elements:C(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e([N({json:{write:!0}})],b$.prototype,`elements`,null),e([Cn(`elements`)],b$.prototype,`castElements`,null),e([j(`elements`,[`formElements`])],b$.prototype,`readElements`,null),e([M(`elements`)],b$.prototype,`writeElements`,null),e([N({type:[`collapsed`,`expanded`],json:{write:!0}})],b$.prototype,`initialState`,void 0),e([N({type:String,json:{read:!1,write:!0}})],b$.prototype,`type`,void 0),b$=y$=e([P(`esri.form.elements.GroupElement`)],b$);var x$=h$(b$),S$=b$,C$,w$=h$(S$),T$=C$=class extends L{constructor(e){super(e),this.description=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}get elements(){return this._get(`elements`)??null}set elements(e){this._set(`elements`,e)}castElements(e){return v$(e,w$)}readElements(e,t){return g$(t.formElements,w$)}writeElements(e,t){t.formElements=_$(e,w$)}clone(){return new C$({description:this.description,expressionInfos:C(this.expressionInfos),elements:C(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){let n=new Set,{description:r,elements:i,expressionInfos:a,title:o}=this;if(O$(n,e,r),O$(n,e,o),!i)return[];let s=Ebe(i,a).map(t=>kk(n,e,null,t));await Promise.all(s);for(let r of i)E$(n,{fieldsIndex:e,relationships:t},r);return Array.from(n).sort()}};function E$(e,t,n){let{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(O$(e,r,n.label),O$(e,r,n.description),n.type){case`field`:Ok(e,r,n.fieldName);break;case`group`:n.elements.forEach(n=>E$(e,t,n));break;case`relationship`:if(t.relationships){let i=t.relationships.find(e=>e.id===n.relationshipId);i&&Ok(e,r,i.keyField)}Dk(e,r,n.orderByFields?.map(e=>e.field));break;case`text`:O$(e,r,n.text)}}function Ebe(e,t){if(!t||t.length===0)return[];let n=D$(e),r=[];for(let e of t)n.has(e.name)&&r.push(e.expression);return r}function D$(e){let t=new Set;for(let n of e)if(da(t,n.visibilityExpression),!Tbe(n)){if(wbe(n))ua(t,D$(n.elements));else if(da(t,n.editableExpression),Cbe(n)){let{requiredExpression:e,valueExpression:r}=n;ua(t,[e,r])}}return t}function O$(e,t,n){Dk(e,t,nA(n))}e([N({type:String,json:{write:!0}})],T$.prototype,`description`,void 0),e([N({json:{write:!0}})],T$.prototype,`elements`,null),e([Tr(`elements`)],T$.prototype,`castElements`,null),e([j(`elements`,[`formElements`])],T$.prototype,`readElements`,null),e([M(`elements`)],T$.prototype,`writeElements`,null),e([N({type:[Xye],json:{write:!0}})],T$.prototype,`expressionInfos`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],T$.prototype,`preserveFieldValuesWhenHidden`,void 0),e([N({type:String,json:{write:!0}})],T$.prototype,`title`,void 0),T$=C$=e([P(`esri.form.FormTemplate`)],T$);var k$=Symbol(`getSliceableSymbol`),A$=class{};A$=e([P(`esri.graphic.GraphicOrigin`)],A$);var Dbe=Symbol(`isFeatureGraphicOrigin`),j$,Obe=class extends A${get[(j$=Dbe,LM)](){return this.layer}get[PM](){return this.layer}get[k$](){return this.layer}constructor(e){super(),this[j$]=!0,this.type=`feature`,this.layer=e}get id(){return this.layer.id}},M$=Tx;function N$(e,t,n){if(e.hasM==null||e.hasZ)for(let e of t)for(let t of e)t.length>2&&(t[2]*=n)}function P$(e,t,n){if(!e&&!t||!n)return;let r=Eu(n);F$(e,n,r),F$(t,n,r)}function F$(e,t,n){if(e)for(let r of e)kbe(r.geometry,t,n)}function kbe(e,t,n){if(!e?.spatialReference||Pl(e.spatialReference,t))return;let r=Eu(e.spatialReference)/n;if(r!==1){if(`x`in e)e.z!=null&&(e.z*=r);else if(`rings`in e)N$(e,e.rings,r);else if(`paths`in e)N$(e,e.paths,r);else if(`points`in e&&(e.hasM==null||e.hasZ))for(let t of e.points)t.length>2&&(t[2]*=r)}}function I$(e,t,n){if(t==null||n==null||n.vcsWkid||Pl(t,n)||iu(t)||iu(n))return;let r=Eu(t)/Eu(n);if(r!==1)switch(e){case`point`:case`esriGeometryPoint`:return e=>Abe(e,r);case`polyline`:case`esriGeometryPolyline`:return e=>Mbe(e,r);case`polygon`:case`esriGeometryPolygon`:return e=>jbe(e,r);case`multipoint`:case`esriGeometryMultipoint`:return e=>Nbe(e,r);case`extent`:case`esriGeometryEnvelope`:return e=>Pbe(e,r);default:return}}function Abe(e,t){e?.z!=null&&(e.z*=t)}function jbe(e,t){if(e)for(let n of e.rings)for(let e of n)e.length>2&&(e[2]*=t)}function Mbe(e,t){if(e)for(let n of e.paths)for(let e of n)e.length>2&&(e[2]*=t)}function Nbe(e,t){if(e)for(let n of e.points)n.length>2&&(n[2]*=t)}function Pbe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function L$(e,t,n){if(!n?.features||!n.hasZ)return;let r=I$(n.geometryType,t,e.outSpatialReference);if(r)for(let e of n.features)r(e.geometry)}var R$,z$=new xr({esriGeometryPoint:`point`,esriGeometryMultipoint:`multipoint`,esriGeometryPolyline:`polyline`,esriGeometryPolygon:`polygon`,esriGeometryEnvelope:`extent`,mesh:`mesh`,"":null}),B$=R$=class extends L{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,VF)}writeGeometryType(e,t,n,r){if(e)return void z$.write(e,t,n,r);let{features:i}=this;if(i){for(let e of i)if(e?.geometry!=null)return void z$.write(e.geometry.type,t,n,r)}}readQueryGeometry(e,t){if(!e)return null;let n=!!e.spatialReference,r=gh(e);return r&&!n&&t.spatialReference&&(r.spatialReference=H.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());let{features:n}=this;if(n){for(let e of n)if(e&&e.geometry!=null&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}}clone(){return new R$(this.cloneProperties())}cloneProperties(){return C({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){let t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){let r=t.features[n];r.geometry&&=(e?.[n])?.toJSON()||r.geometry}return t}quantize(e){let{scale:[t,n],translate:[r,i]}=e,a=e=>Math.round((e-r)/t),o=e=>Math.round((i-e)/n),s=this.features,c=this._getQuantizationFunction(this.geometryType,a,o);for(let e=0,t=s.length;e<t;e++)c?.(s[e].geometry)||(s.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){let{geometryType:e,features:t,transform:n}=this;if(!n)return this;let{translate:[r,i],scale:[a,o]}=n,s=e=>e*a+r,c=e=>i-e*o,l=null,u=null;if(this.hasZ&&n?.scale?.[2]!=null){let{translate:[,,e],scale:[,,t]}=n;l=n=>n*t+e}if(this.hasM&&n?.scale?.[3]!=null){let{translate:[,,,e],scale:[,,,t]}=n;u=n=>n==null?n:n*t+e}let d=this._getHydrationFunction(e,s,c,l,u);for(let{geometry:e}of t)e!=null&&d&&d(e);return this.transform=null,this}readFeaturesWithClass(e,t,n){let r=H.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){let a=e[t],o=n.fromJSON(a),s=a.geometry?.spatialReference;o.geometry==null||s||(o.geometry.spatialReference=r);let c=a.aggregateGeometries,l=o.aggregateGeometries;if(c&&l!=null)for(let e in l){let t=l[e],n=c[e],i=n?.spatialReference;t==null||i||(t.spatialReference=r)}i.push(o)}return i}_quantizePoints(e,t,n){let r,i,a=[];for(let o=0,s=e.length;o<s;o++){let s=e[o];if(o>0){let e=t(s[0]),o=n(s[1]);e===r&&o===i||(a.push([e-r,o-i]),r=e,i=o)}else r=t(s[0]),i=n(s[1]),a.push([r,i])}return a.length>0?a:null}_getQuantizationFunction(e,t,n){return e===`point`?e=>(e.x=t(e.x),e.y=n(e.y),e):e===`polyline`||e===`polygon`?e=>{let r=mh(e)?e.rings:e.paths,i=[];for(let e=0,a=r.length;e<a;e++){let a=r[e],o=this._quantizePoints(a,t,n);o&&i.push(o)}return i.length>0?(mh(e)?e.rings=i:e.paths=i,e):null}:e===`multipoint`?e=>{let r=this._quantizePoints(e.points,t,n);return r&&r.length>0?(e.points=r,e):null}:e===`extent`?e=>e:null}_getHydrationFunction(e,t,n,r,i){return e===`point`?e=>{e.x=t(e.x),e.y=n(e.y),r&&(e.z=r(e.z))}:e===`polyline`||e===`polygon`?e=>{let a=mh(e)?e.rings:e.paths,o,s;for(let e=0,r=a.length;e<r;e++){let r=a[e];for(let e=0,i=r.length;e<i;e++){let i=r[e];e>0?(o+=i[0],s+=i[1]):(o=i[0],s=i[1]),i[0]=t(o),i[1]=n(s)}}if(r&&i)for(let e=0,t=a.length;e<t;e++){let t=a[e];for(let e=0,n=t.length;e<n;e++){let n=t[e];n[2]=r(n[2]),n[3]=i(n[3])}}else if(r)for(let e=0,t=a.length;e<t;e++){let t=a[e];for(let e=0,n=t.length;e<n;e++){let n=t[e];n[2]=r(n[2])}}else if(i)for(let e=0,t=a.length;e<t;e++){let t=a[e];for(let e=0,n=t.length;e<n;e++){let n=t[e];n[2]=i(n[2])}}}:e===`extent`?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),r&&e.zmax!=null&&e.zmin!=null&&(e.zmax=r(e.zmax),e.zmin=r(e.zmin)),i&&e.mmax!=null&&e.mmin!=null&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:e===`multipoint`?e=>{let a=e.points,o,s;for(let e=0,r=a.length;e<r;e++){let r=a[e];e>0?(o+=r[0],s+=r[1]):(o=r[0],s=r[1]),r[0]=t(o),r[1]=n(s)}if(r&&i)for(let e=0,t=a.length;e<t;e++){let t=a[e];t[2]=r(t[2]),t[3]=i(t[3])}else if(r)for(let e=0,t=a.length;e<t;e++){let t=a[e];t[2]=r(t[2])}else if(i)for(let e=0,t=a.length;e<t;e++){let t=a[e];t[2]=i(t[2])}}:null}};e([N({type:String,json:{write:!0}})],B$.prototype,`displayFieldName`,void 0),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],B$.prototype,`exceededTransferLimit`,void 0),e([N({type:[VF],json:{write:!0}})],B$.prototype,`features`,void 0),e([j(`features`)],B$.prototype,`readFeatures`,null),e([N({type:[sI],json:{write:!0}})],B$.prototype,`fields`,void 0),e([N({type:[`point`,`multipoint`,`polyline`,`polygon`,`extent`,`mesh`],json:{read:{reader:z$.read}}})],B$.prototype,`geometryType`,void 0),e([M(`geometryType`)],B$.prototype,`writeGeometryType`,null),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],B$.prototype,`hasM`,void 0),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],B$.prototype,`hasZ`,void 0),e([N({types:yh,json:{write:!0}})],B$.prototype,`queryGeometry`,void 0),e([j(`queryGeometry`)],B$.prototype,`readQueryGeometry`,null),e([N({type:H,json:{write:!0}})],B$.prototype,`spatialReference`,void 0),e([M(`spatialReference`)],B$.prototype,`writeSpatialReference`,null),e([N({json:{write:!0}})],B$.prototype,`transform`,void 0),B$=R$=e([P(`esri.rest.support.FeatureSet`)],B$),B$.prototype.toJSON.isDefaultToJSON=!0;var Fbe=0,V$=class extends fT(lT(W)){constructor(e){super(e),this._idToClientGeometry=null,this.type=`memory`}load(e){let t=e==null?null:e.signal;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){let e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?`polygon`:e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);let n=await this._connection.invoke(`queryFeatures`,e?e.toJSON():null,t);L$(e,this.layer.spatialReference,n);let r=B$.fromJSON(n);if(!this._requiresClientGraphicMapping()||!this._idToClientGeometry)return r;let i=this.layer.objectIdField;for(let e of r.features){let t=e.attributes[i],n=this._idToClientGeometry.get(t);n!==void 0&&(e.geometry=n)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new D(`query-features-json:unsupported`,`Cannot query in JSON format for client only geometry types (mesh and extent)`);await this.load(t);let n=await this._connection.invoke(`queryFeatures`,e?e.toJSON():null,t);return L$(e,this.layer.spatialReference,n),n}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke(`queryFeatureCount`,e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke(`queryObjectIds`,e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke(`queryExtent`,e?e.toJSON():null,t)).then(e=>({count:e.count,extent:Rd.fromJSON(e.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke(`querySnapping`,e,t))}async queryAttributeBins(e,t={}){return await this.load(),this._connection.invoke(`queryAttributeBins`,e?.toJSON(),t)}async _applyEdits(e){if(!this._connection)throw new D(`feature-layer-source:edit-failure`,`Memory source not loaded`);let t=this.layer.objectIdField,n=null,r=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);let a=e=>`objectId`in e&&e.objectId!=null?e.objectId:`attributes`in e&&e.attributes[t]!=null?e.attributes[t]:null;if(e.addFeatures&&(n=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(let t of e.deleteFeatures){let e=a(t);e!=null&&r.push(e)}let o=e.updateFeatures&&this._idToClientGeometry?new Map:null;if(e.updateFeatures){for(let t of e.updateFeatures)if(i.push(this._serializeFeature(t)),o&&t.geometry!=null){let e=a(t);e!=null&&o.set(e,t)}}P$(n?n.features:null,i,this.layer.spatialReference);let{fullExtent:s,featureEditResults:c}=await this._connection.invoke(`applyEdits`,{adds:n?n.features:[],updates:i,deletes:r});return this.fullExtent=s,n&&n.finish(c.uidToObjectId),this._updateIdToClientGeometries(o,c),this._createEditsResult(c)}async _prepareClientMapping(e,t){if(this._layerOrSourceGeometryType!==`mesh`||e==null)return;let n=[];for(let{geometry:r}of e)r==null||r.type!==`mesh`||r.hasExtent||r.loaded||n.push(r.load({signal:t}));n.length&&await Promise.all(n)}_updateIdToClientGeometries(e,t){if(this._idToClientGeometry){if(e)for(let n of t.updateResults){if(!n.success)continue;let t=e.get(n.objectId);t!=null&&this._addIdToClientGeometry(t)}for(let e of t.deleteResults)e.success&&this._idToClientGeometry.delete(e.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){let t=!0===e.success?null:e.error||{code:void 0,description:``};return{objectId:e.objectId,globalId:e.globalId,error:t?new D(`feature-layer-source:edit-failure`,t.description,{code:t.code}):null}}_prepareAddFeatures(e){let t=new Map,n=Array(e.length),r=null;for(let i=0;i<e.length;i++){let a=e[i],o=this._serializeFeature(a);r||a.geometry==null||(r=a.geometry.type),n[i]=o,t.set(`${o.uid}`,a)}let i=this;return{features:n,inferredGeometryType:r,finish(e){let n=i.sourceJSON.objectIdField;for(let r in e){let a=e[r],o=t.get(r);o&&(o.attributes||={},a===-1?delete o.attributes[n]:o.attributes[n]=a,i._addIdToClientGeometry(o))}}}}_addIdToClientGeometry(e){if(!this._idToClientGeometry)return;let t=this.sourceJSON.objectIdField,n=e.attributes?.[t];n!=null&&this._idToClientGeometry.set(n,e.geometry??null)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e===`mesh`||e===`multipatch`||e===`extent`}_serializeFeature(e){let{attributes:t}=e,n=this._geometryForSerialization(e),r=(Fbe++).toString();return n?{uid:r,geometry:n.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){let{geometry:t}=e;return t==null?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?sh.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await M$(`MemorySourceWorker`,{strategy:c(`feature-layers-workers`)?`dedicated`:`local`,signal:e,registryTarget:this});let{fields:t,spatialReference:n,objectIdField:r,hasM:i,hasZ:a,timeInfo:o,dateFieldsTimeZone:s}=this.layer,l=this.layer.originOf(`spatialReference`)===`defaults`;await this._prepareClientMapping(this.items,e);let u=this._prepareAddFeatures(this.items);this.addHandles(this.on(`before-changes`,e=>{E.getLogger(this).error(`Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead`),e.preventDefault()}));let d={features:u.features,fields:t?.map(e=>e.toJSON()),geometryType:vh.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!==`mesh`&&i,hasZ:this._layerOrSourceGeometryType===`mesh`||a,objectIdField:r,spatialReference:l?null:n&&n.toJSON(),timeInfo:o?.toJSON()??null,dateFieldsTimeZone:s},f=await this._connection.invoke(`load`,d,{signal:e});for(let e of f.warnings)E.getLogger(this.layer).warn(`#load()`,`${e.message} (title: '${this.layer.title||`no title`}', id: '${this.layer.id??`no id`}')`,{warning:e});f.featureErrors.length&&E.getLogger(this.layer).warn(`#load()`,`Encountered ${f.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||`no title`}', id: '${this.layer.id??`no id`}')`,{errors:f.featureErrors});let p=f.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(p.geometryType=vh.toJSON(u.inferredGeometryType)),this.sourceJSON=p,this._requiresClientGraphicMapping()&&(this._idToClientGeometry=new Map),u.finish(f.assignedObjectIds)}};e([wr({Type:VF,ensureType:Lt(VF)})],V$.prototype,`itemType`,void 0),e([N()],V$.prototype,`type`,void 0),e([N({constructOnly:!0})],V$.prototype,`layer`,void 0),e([N({readOnly:!0})],V$.prototype,`_workerGeometryType`,null),e([N()],V$.prototype,`sourceJSON`,void 0),V$=e([P(`esri.layers.graphics.sources.MemorySource`)],V$);function Ibe(e){return`portalItem`in e}var H$=t=>{let n=t,r=class extends n{get apiKey(){return this._isOverridden(`apiKey`)?this._get(`apiKey`):Ibe(this)?this.portalItem?.apiKey:null}set apiKey(e){e==null?(this._clearOverride(`apiKey`),this.clear(`apiKey`,`user`)):this._override(`apiKey`,e)}};return e([N({type:String})],r.prototype,`apiKey`,null),r=e([P(`esri.layers.mixins.APIKeyMixin`)],r),r},U$=t=>{let n=t,r=class extends n{get title(){if(this._get(`title`)&&this.originOf(`title`)!==`defaults`)return this._get(`title`);if(this.url){let e=Dc(this.url);if(e?.title)return e.title}return this._get(`title`)||``}set title(e){this._set(`title`,e)}set url(e){this._set(`url`,Mc(e,E.getLogger(this)))}};return e([N()],r.prototype,`title`,null),e([N({type:String})],r.prototype,`url`,null),r=e([P(`esri.layers.mixins.ArcGISService`)],r),r},W$=class extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name=`SyntaxError`}format(e){let t=`Error: `+this.message;if(this.location){let n=null,r=e.find(e=>e.source===this.location.source);r&&(n=r.text.split(/\r\n|\n|\r/g));let i=this.location.start,a=this.location.source&&typeof this.location.source.offset==`function`?this.location.source.offset(i):i,o=this.location.source+`:`+a.line+`:`+a.column;if(n){let e=this.location.end,r=``.padEnd(a.line.toString().length,` `),s=n[i.line-1],c=(i.line===e.line?e.column:s.length+1)-i.column||1;t+=`
 --> `+o+`
`+r+` |
`+a.line+` | `+s+`
`+r+` | `+``.padEnd(i.column-1,` `)+``.padEnd(c,`^`)}else t+=`
 at `+o}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}let r=Object.prototype.hasOwnProperty.call(RegExp.prototype,`unicode`)?RegExp(`[\\p{C}\\p{Mn}\\p{Mc}]`,`gu`):null;function i(e){return r?e.replace(r,e=>`\\u{`+n(e)+`}`):e}function a(e){return i(e.replace(/\\/g,`\\\\`).replace(/"/g,`\\"`).replace(/\0/g,`\\0`).replace(/\t/g,`\\t`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/[\x00-\x0F]/g,e=>`\\x0`+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>`\\x`+n(e)))}function o(e){return i(e.replace(/\\/g,`\\\\`).replace(/\]/g,`\\]`).replace(/\^/g,`\\^`).replace(/-/g,`\\-`).replace(/\0/g,`\\0`).replace(/\t/g,`\\t`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/[\x00-\x0F]/g,e=>`\\x0`+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>`\\x`+n(e)))}let s={literal:e=>`"`+a(e.text)+`"`,class(e){let t=e.parts.map(e=>Array.isArray(e)?o(e[0])+`-`+o(e[1]):o(e));return`[`+(e.inverted?`^`:``)+t.join(``)+`]`+(e.unicode?`u`:``)},any:()=>`any character`,end:()=>`end of input`,other:e=>e.description};function c(e){return s[e.type](e)}function l(e){let t=e.map(c);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+` or `+t[1];default:return t.slice(0,-1).join(`, `)+`, or `+t[t.length-1]}}function u(e){return e?`"`+a(e)+`"`:`end of input`}return`Expected `+l(e)+` but `+u(t)+` found.`}};function Lbe(e,t){let n={},r=(t=t===void 0?{}:t).grammarSource,i={start:at},a=at,o=`none`,s=`grad`,c=`turn`,l=/^[ \t\n\r]/,u=/^[a-z\-]/,d=/^[0-9a-fA-F]/,f=/^[+\-]/,p=/^[0-9]/,m=et(`none`),h=Ze(`none`,!1),g=Ze(`)`,!1),_=Ze(`,`,!1),v=Qe([` `,`	`,`
`,`\r`],!1,!1,!1),y=et(`function`),b=Ze(`(`,!1),x=et(`identifier`),S=Qe([[`a`,`z`],`-`],!1,!1,!1),ee=et(`percentage`),te=Ze(`%`,!1),ne=et(`length`),re=Ze(`px`,!1),ie=Ze(`cm`,!1),ae=Ze(`mm`,!1),oe=Ze(`in`,!1),se=Ze(`pt`,!1),ce=Ze(`pc`,!1),le=et(`angle`),ue=Ze(`deg`,!1),de=Ze(`rad`,!1),fe=Ze(`grad`,!1),pe=Ze(`turn`,!1),me=et(`number`),he=et(`color`),ge=Ze(`#`,!1),_e=Qe([[`0`,`9`],[`a`,`f`],[`A`,`F`]],!1,!1,!1),ve=Qe([`+`,`-`],!1,!1,!1),ye=Qe([[`0`,`9`]],!1,!1,!1),be=Ze(`.`,!1),xe=Ze(`e`,!1);function Se(){return[]}function Ce(e,t){return{type:`function`,name:e,parameters:t||[]}}function we(e,t){return t.length>0?bt(e,t,3):[e]}function Te(e){return{type:`quantity`,value:e.value,unit:e.unit}}function Ee(e){return{type:`color`,colorType:e.type,value:e.value}}function De(e){return e}function Oe(){return Ye()}function ke(e){return{value:e,unit:`%`}}function Ae(e){return{value:e,unit:`px`}}function je(e){return{value:e,unit:`cm`}}function Me(e){return{value:e,unit:`mm`}}function Ne(e){return{value:e,unit:`in`}}function Pe(e){return{value:e,unit:`pt`}}function Fe(e){return{value:e,unit:`pc`}}function Ie(e){return{value:e,unit:`deg`}}function Le(e){return{value:e,unit:`rad`}}function Re(e){return{value:e,unit:`grad`}}function C(e){return{value:e,unit:`turn`}}function ze(e){return{value:e,unit:null}}function Be(){return{type:`hex`,value:Ye()}}function Ve(e){return{type:`function`,value:e}}function He(){return{type:`named`,value:Ye()}}function Ue(){return parseFloat(Ye())}let w=0|t.peg$currPos,We=w,Ge=[{line:1,column:1}],Ke,qe=w,Je=t.peg$maxFailExpected||[],T=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw Error(`Can't start parsing from rule "`+t.startRule+`".`);a=i[t.startRule]}function Ye(){return e.substring(We,w)}function Xe(t=w){let n=e.codePointAt(t);return n===void 0?``:String.fromCodePoint(n)}function Ze(e,t){return{type:`literal`,text:e,ignoreCase:t}}function Qe(e,t,n,r){return{type:`class`,parts:e,inverted:t,ignoreCase:n,unicode:r}}function $e(){return{type:`end`}}function et(e){return{type:`other`,description:e}}function tt(t){let n,r=Ge[t];if(r)return r;if(t>=Ge.length)n=Ge.length-1;else for(n=t;!Ge[--n];);for(r=Ge[n],r={line:r.line,column:r.column};n<t;)e.charCodeAt(n)===10?(r.line++,r.column=1):r.column++,n++;return Ge[t]=r,r}function nt(e,t,n){let i=tt(e),a=tt(t);return{source:r,start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:a.line,column:a.column}}}function rt(e){w<qe||(w>qe&&(qe=w,Je=[]),Je.push(e))}function it(e,t,n){return new W$(W$.buildMessage(e,t),e,t,n)}function at(){let e;return e=ot(),e===n&&(e=st()),e}function ot(){let t,r;return T++,t=w,dt(),e.substr(w,4)===o?(r=o,w+=4):(r=n,T===0&&rt(h)),r===n?(w=t,t=n):(dt(),We=t,t=Se()),T--,t===n&&T===0&&rt(m),t}function st(){let e,t;if(e=[],t=ct(),t!==n)for(;t!==n;)e.push(t),t=ct();else e=n;return e}function ct(){let t,r,i,a;return t=w,dt(),r=ft(),r===n?(w=t,t=n):(dt(),i=lt(),i===n&&(i=null),dt(),e.charCodeAt(w)===41?(a=`)`,w++):(a=n,T===0&&rt(g)),a===n?(w=t,t=n):(dt(),We=t,t=Ce(r,i))),t}function lt(){let t,r,i,a,o,s,c,l;if(t=w,r=ut(),r!==n){for(i=[],a=w,o=dt(),e.charCodeAt(w)===44?(s=`,`,w++):(s=n,T===0&&rt(_)),s===n&&(s=null),c=dt(),l=ut(),l===n?(w=a,a=n):(o=[o,s,c,l],a=o);a!==n;)i.push(a),a=w,o=dt(),e.charCodeAt(w)===44?(s=`,`,w++):(s=n,T===0&&rt(_)),s===n&&(s=null),c=dt(),l=ut(),l===n?(w=a,a=n):(o=[o,s,c,l],a=o);We=t,t=we(r,i)}else w=t,t=n;return t}function ut(){let e,t;return e=w,t=E(),t===n&&(t=mt(),t===n&&(t=ht(),t===n&&(t=gt()))),t!==n&&(We=e,t=Te(t)),e=t,e===n&&(e=w,t=_t(),t!==n&&(We=e,t=Ee(t)),e=t),e}function dt(){let t,r;for(T++,t=[],r=e.charAt(w),l.test(r)?w++:(r=n,T===0&&rt(v));r!==n;)t.push(r),r=e.charAt(w),l.test(r)?w++:(r=n,T===0&&rt(v));return T--,t}function ft(){let t,r,i;return T++,t=w,r=pt(),r===n?(w=t,t=n):(e.charCodeAt(w)===40?(i=`(`,w++):(i=n,T===0&&rt(b)),i===n?(w=t,t=n):(We=t,t=De(r))),T--,t===n&&(r=n,T===0&&rt(y)),t}function pt(){let t,r,i;if(T++,t=w,r=[],i=e.charAt(w),u.test(i)?w++:(i=n,T===0&&rt(S)),i!==n)for(;i!==n;)r.push(i),i=e.charAt(w),u.test(i)?w++:(i=n,T===0&&rt(S));else r=n;return r!==n&&(We=t,r=Oe()),t=r,T--,t===n&&(r=n,T===0&&rt(x)),t}function E(){let t,r,i;return T++,t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.charCodeAt(w)===37?(i=`%`,w++):(i=n,T===0&&rt(te)),i===n?(w=t,t=n):(We=t,t=ke(r))),T--,t===n&&T===0&&rt(ee),t}function mt(){let t,r,i;return T++,t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.substr(w,2)===`px`?(i=`px`,w+=2):(i=n,T===0&&rt(re)),i===n?(w=t,t=n):(We=t,t=Ae(r))),t===n&&(t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.substr(w,2)===`cm`?(i=`cm`,w+=2):(i=n,T===0&&rt(ie)),i===n?(w=t,t=n):(We=t,t=je(r))),t===n&&(t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.substr(w,2)===`mm`?(i=`mm`,w+=2):(i=n,T===0&&rt(ae)),i===n?(w=t,t=n):(We=t,t=Me(r))),t===n&&(t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.substr(w,2)===`in`?(i=`in`,w+=2):(i=n,T===0&&rt(oe)),i===n?(w=t,t=n):(We=t,t=Ne(r))),t===n&&(t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.substr(w,2)===`pt`?(i=`pt`,w+=2):(i=n,T===0&&rt(se)),i===n?(w=t,t=n):(We=t,t=Pe(r))),t===n&&(t=w,dt(),r=vt(),r===n?(w=t,t=n):(e.substr(w,2)===`pc`?(i=`pc`,w+=2):(i=n,T===0&&rt(ce)),i===n?(w=t,t=n):(We=t,t=Fe(r)))))))),T--,t===n&&T===0&&rt(ne),t}function ht(){let t,r,i;return T++,t=w,r=vt(),r===n?(w=t,t=n):(e.substr(w,3)===`deg`?(i=`deg`,w+=3):(i=n,T===0&&rt(ue)),i===n?(w=t,t=n):(We=t,t=Ie(r))),t===n&&(t=w,r=vt(),r===n?(w=t,t=n):(e.substr(w,3)===`rad`?(i=`rad`,w+=3):(i=n,T===0&&rt(de)),i===n?(w=t,t=n):(We=t,t=Le(r))),t===n&&(t=w,r=vt(),r===n?(w=t,t=n):(e.substr(w,4)===s?(i=s,w+=4):(i=n,T===0&&rt(fe)),i===n?(w=t,t=n):(We=t,t=Re(r))),t===n&&(t=w,r=vt(),r===n?(w=t,t=n):(e.substr(w,4)===c?(i=c,w+=4):(i=n,T===0&&rt(pe)),i===n?(w=t,t=n):(We=t,t=C(r)))))),T--,t===n&&(r=n,T===0&&rt(le)),t}function gt(){let e,t;return T++,e=w,dt(),t=vt(),t===n?(w=e,e=n):(We=e,e=ze(t)),T--,e===n&&T===0&&rt(me),e}function _t(){let t,r,i,a;if(T++,t=w,e.charCodeAt(w)===35?(r=`#`,w++):(r=n,T===0&&rt(ge)),r!==n){if(i=[],a=e.charAt(w),d.test(a)?w++:(a=n,T===0&&rt(_e)),a!==n)for(;a!==n;)i.push(a),a=e.charAt(w),d.test(a)?w++:(a=n,T===0&&rt(_e));else i=n;i===n?(w=t,t=n):(We=t,t=Be())}else w=t,t=n;return t===n&&(t=w,r=ct(),r!==n&&(We=t,r=Ve(r)),t=r,t===n&&(t=w,r=pt(),r!==n&&(We=t,r=He()),t=r)),T--,t===n&&(r=n,T===0&&rt(he)),t}function vt(){let t,r,i,a,o,s,c,l;for(t=w,r=e.charAt(w),f.test(r)?w++:(r=n,T===0&&rt(ve)),r===n&&(r=null),i=w,a=[],o=e.charAt(w),p.test(o)?w++:(o=n,T===0&&rt(ye));o!==n;)a.push(o),o=e.charAt(w),p.test(o)?w++:(o=n,T===0&&rt(ye));if(e.charCodeAt(w)===46?(o=`.`,w++):(o=n,T===0&&rt(be)),o!==n){if(s=[],c=e.charAt(w),p.test(c)?w++:(c=n,T===0&&rt(ye)),c!==n)for(;c!==n;)s.push(c),c=e.charAt(w),p.test(c)?w++:(c=n,T===0&&rt(ye));else s=n;s===n?(w=i,i=n):(a=[a,o,s],i=a)}else w=i,i=n;if(i===n)if(i=[],a=e.charAt(w),p.test(a)?w++:(a=n,T===0&&rt(ye)),a!==n)for(;a!==n;)i.push(a),a=e.charAt(w),p.test(a)?w++:(a=n,T===0&&rt(ye));else i=n;if(i!==n){if(a=w,e.charCodeAt(w)===101?(o=`e`,w++):(o=n,T===0&&rt(xe)),o!==n){if(s=e.charAt(w),f.test(s)?w++:(s=n,T===0&&rt(ve)),s===n&&(s=null),c=[],l=e.charAt(w),p.test(l)?w++:(l=n,T===0&&rt(ye)),l!==n)for(;l!==n;)c.push(l),l=e.charAt(w),p.test(l)?w++:(l=n,T===0&&rt(ye));else c=n;c===n?(w=a,a=n):(o=[o,s,c],a=o)}else w=a,a=n;a===n&&(a=null),We=t,t=Ue()}else w=t,t=n;return t}function yt(e,t){return e.map(function(e){return e[t]})}function bt(e,t,n){return[e].concat(yt(t,n))}Ke=a();let xt=Ke!==n&&w===e.length;function St(){throw Ke!==n&&w<e.length&&rt($e()),it(Je,qe<e.length?Xe(qe):null,qe<e.length?nt(qe,qe+1):nt(qe,qe))}return t.peg$library?{peg$result:Ke,peg$currPos:w,peg$FAILED:n,peg$maxFailExpected:Je,peg$maxFailPos:qe,peg$success:xt,peg$throw:xt?void 0:St}:xt?Ke:void St()}function G$(e){if(!e||e.length===0)return null;if(typeof e==`string`){let t=K$(e);return t&&t.length!==0?t:null}let t=e.map(e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new D(`effect:invalid-scale`,`scale must be finite and greater than 0`,{stop:e});return{scale:e.scale,effects:K$(e.value)}});t.sort((e,t)=>t.effects.length-e.effects.length);for(let e=0;e<t.length-1;e++){if(!PO(t[e].effects,t[e+1].effects))throw new D(`effect:interpolation-impossible`,`Cannot interpolate by scale between 2 lists of mixed effects`,{a:t[e].effects,b:t[e+1].effects});FO(t[e].effects,t[e+1].effects)}return t.sort((e,t)=>t.scale-e.scale),t}function K$(e){let t;if(!e)return[];try{t=Lbe(e)}catch(t){throw new D(`effect:invalid-syntax`,`Invalid effect syntax`,{value:e,error:t})}return t.map(e=>Rbe(e))}function Rbe(e){try{switch(e.name){case`grayscale`:case`sepia`:case`saturate`:case`invert`:case`brightness`:case`contrast`:return zbe(e);case`opacity`:return Bbe(e);case`hue-rotate`:return Vbe(e);case`blur`:return Hbe(e);case`drop-shadow`:return Ube(e);case`bloom`:return Wbe(e)}}catch(t){throw t.details.filter=e,t}throw new D(`effect:unknown-effect`,`Effect '${e.name}' is not supported`,{effect:e})}function zbe(e){let t=1;return q$(e.parameters,1),e.parameters.length===1&&(t=Q$(e.parameters[0])),new OO(e.name,t)}function Bbe(e){let t=1;return q$(e.parameters,1),e.parameters.length===1&&(t=Q$(e.parameters[0])),new jO(t)}function Vbe(e){let t=0;return q$(e.parameters,1),e.parameters.length===1&&(t=Xbe(e.parameters[0])),new AO(t)}function Hbe(e){let t=0;return q$(e.parameters,1),e.parameters.length===1&&(t=$$(e.parameters[0]),Y$(t,e.parameters[0])),new DO(t)}function Ube(e){let t=[],n=null;for(let r of e.parameters)if(r.type===`color`){if(t.length&&Object.freeze(t),n)throw new D(`effect:type-error`,`Accepts only one color`,{});n=Zbe(r)}else{let e=$$(r);if(Object.isFrozen(t))throw new D(`effect:type-error`,`<length> parameters not consecutive`,{lengths:t});t.push(e),t.length===3&&Y$(e,r)}if(t.length<2||t.length>3)throw new D(`effect:type-error`,`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new kO(t[0],t[1],t[2]||0,n||e1(`black`))}function Wbe(e){let t=1,n=0,r=0;return q$(e.parameters,3),e.parameters[0]&&(t=Q$(e.parameters[0])),e.parameters[1]&&(n=$$(e.parameters[1]),Y$(n,e.parameters[1])),e.parameters[2]&&(r=Q$(e.parameters[2])),new EO(t,n,r)}function q$(e,t){if(e.length>t)throw new D(`effect:type-error`,`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function J$(e){if(e.type===`color`)return`<color>`;if(e.unit){if(e.unit in Z$)return`<length>`;if(e.unit in X$)return`<angle>`;if(e.unit===`%`)return`<percentage>`}return`<double>`}function Y$(e,t){if(e<0)throw new D(`effect:type-error`,`Negative values are not allowed, Actual: ${e}`,{term:t})}function Gbe(e){if(e.type!==`quantity`||e.unit!==null)throw new D(`effect:type-error`,`Expected <double>, Actual: ${J$(e)}`,{term:e})}function Kbe(e){if(e.type!==`quantity`||e.unit!==null&&e.unit!==`%`)throw new D(`effect:type-error`,`Expected <double> or <percentage>, Actual: ${J$(e)}`,{term:e})}var X$={deg:1,grad:.9,rad:180/Math.PI,turn:360};function qbe(e){if(e.type!==`quantity`||!(e.value===0&&e.unit===null||e.unit&&X$[e.unit]!=null))throw new D(`effect:type-error`,`Expected <angle>, Actual: ${J$(e)}`,{term:e})}var Z$={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Jbe(e){if(e.type!==`quantity`||!(e.value===0&&e.unit===null||e.unit&&Z$[e.unit]!=null))throw new D(`effect:type-error`,`Expected <length>, Actual: ${J$(e)}`,{term:e})}function Q$(e){Kbe(e);let t=e.value;return Y$(t,e),e.unit===`%`?.01*t:t}function Ybe(e){return Gbe(e),Y$(e.value,e),e.value}function Xbe(e){return qbe(e),e.value*X$[e.unit]||0}function $$(e){return Jbe(e),e.value*Z$[e.unit]||0}function Zbe(e){switch(e.colorType){case`hex`:return Iue(e.value);case`named`:return e1(e.value);case`function`:return exe(e.value)}}function e1(e){if(!xE(e))throw new D(`effect:unknown-color`,`color '${e}' isn't valid`,{namedColor:e});return Fue(e)}var Qbe=/^rgba?/i,$be=/^hsla?/i;function exe(e){if(q$(e.parameters,4),Qbe.test(e.name))return[Q$(e.parameters[0]),Q$(e.parameters[1]),Q$(e.parameters[2]),e.parameters[3]?Q$(e.parameters[3]):1];if($be.test(e.name))return wE(Ybe(e.parameters[0]),Q$(e.parameters[1]),Q$(e.parameters[2]),e.parameters[3]?Q$(e.parameters[3]):1);throw new D(`effect:syntax-error`,`Invalid color function '${e.name}'`,{colorFunction:e})}function t1(e,t,n){try{return nxe(e)}catch(e){n?.messages?.push(e)}return null}function n1(e,t,n,r){try{let r=txe(e);Xe(n,r,t)}catch(e){r.messages&&r.messages.push(e)}}function txe(e){let t=G$(e);return t?lde(t)?t.map(e=>e.toJSON()):t.map(({scale:e,effects:t})=>({scale:e,value:t.map(e=>e.toJSON())})):null}function nxe(e){if(!e||e.length===0)return null;if(rxe(e)){let t=[];for(let n of e)t.push({scale:n.scale,value:r1(n.value)});return t}return r1(e)}function rxe(e){let t=e[0];return!!t&&`scale`in t}function r1(e){if(!e?.length)return``;let t=[];for(let n of e){let e=[];switch(n.type){case`grayscale`:case`sepia`:case`saturate`:case`invert`:case`brightness`:case`contrast`:case`opacity`:e=[i1(n,`amount`)];break;case`blur`:e=[i1(n,`radius`,`pt`)];break;case`hue-rotate`:e=[i1(n,`angle`,`deg`)];break;case`drop-shadow`:e=[i1(n,`xoffset`,`pt`),i1(n,`yoffset`,`pt`),i1(n,`blurRadius`,`pt`),ixe(n,`color`)];break;case`bloom`:e=[i1(n,`strength`),i1(n,`radius`,`pt`),i1(n,`threshold`)]}let r=`${n.type}(${e.filter(Boolean).join(` `)})`;G$(r),t.push(r)}return t.join(` `)}function i1(e,t,n){if(e[t]==null)throw new D(`effect:missing-parameter`,`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:``+e[t]}function ixe(e,t){if(e[t]==null)throw new D(`effect:missing-parameter`,`Missing parameter '${t}' in ${e.type} effect`,{effect:e});let n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}var a1={type:`average.color-burn.color-dodge.color.darken.destination-atop.destination-in.destination-out.destination-over.difference.exclusion.hard-light.hue.invert.lighten.lighter.luminosity.minus.multiply.normal.overlay.plus.reflect.saturation.screen.soft-light.source-atop.source-in.source-out.vivid-light.xor`.split(`.`),nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:iQ}},"portal-item":{read:!0,write:{layerContainerTypes:iQ}}}}},o1={read:{reader:t1},write:{allowNull:!0,writer:n1,layerContainerTypes:iQ}},s1={json:{read:!1,write:!1,origins:{"web-map":o1,"portal-item":o1}}},c1=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.blendMode=`normal`,this.effect=null}};return e([N(a1)],r.prototype,`blendMode`,void 0),e([N(s1)],r.prototype,`effect`,void 0),r=e([P(`esri.layers.mixins.BlendLayer`)],r),r},l1=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.customParameters=null}};return e([N({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],r.prototype,`customParameters`,void 0),r=e([P(`esri.layers.mixins.CustomParametersMixin`)],r),r},u1=96;function axe(e,t){let n=t||e.extent,r=e.width,i=Ou(n?.spatialReference);return n&&r?n.width/r*i*au*u1:0}function oxe(e,t){return e/(Ou(t)*au*u1)}function sxe(e,t,n){return cxe(e,t)&&lxe(e,n)}function cxe(e,t){return t===0||no(e,t)||e<t}function lxe(e,t){return t===0||no(e,t)||e>t}function uxe(e,t){return no(e,t)?0:(e||1/0)>(t||1/0)?1:-1}var d1={write:{overridePolicy:(e,t,n)=>({enabled:!n||n.filterMode===`scale`})}},f1=class extends I(L){constructor(e){super(e),this.id=KE(),this.maxScale=0,this.minScale=0,this.title=``,this.where=null}};e([N({type:String,json:{write:!0}})],f1.prototype,`id`,void 0),e([N({type:Number,json:d1})],f1.prototype,`maxScale`,void 0),e([N({type:Number,json:d1})],f1.prototype,`minScale`,void 0),e([N({type:String,json:{write:!0}})],f1.prototype,`title`,void 0),e([N({type:String,json:{write:!0}})],f1.prototype,`where`,void 0),f1=e([P(`esri.layers.support.DisplayFilter`)],f1);function dxe(e,t){return{...t,filterMode:e.mode}}function fxe(e,t){return p1(e,t).next().value??null}function pxe(e,t,n){let r=mxe(e);if(r&&(ro(t,r[0])||io(n,r[1])))return``;let i=Array.from(p1(e,t,n)),a=hxe(i,t,n)?`1=1`:i.map(e=>e.where||`1=1`).reduce((e,t)=>uk(e,t),``);return a&&a!==`1=1`?a:``}function mxe(e){if(m1(e)===`manual`)return null;let t=[-1/0,1/0];for(let{minScale:n,maxScale:r}of e.filters)t[0]=Math.max(t[0],h1(n)),t[1]=Math.min(t[1],g1(r));return t}function*p1(e,t,n){if(m1(e)===`manual`){let t=e.filters.find(t=>t.id===e.activeFilterId);t&&(yield t)}else{typeof t==`object`&&(t=t.scale);for(let r of e.filters)gxe(r.minScale,r.maxScale,t,n)&&(yield r)}}function hxe(e,t,n){if(e.length===0)return!0;let r=h1(e.at(0)?.minScale),i=g1(e.at(-1)?.maxScale);if(io(r,t)||ro(i,n))return!0;for(let t=0;t<e.length-1;t++){let n=e[t],r=e[t+1];if(io(h1(r.minScale),g1(n.maxScale)))return!0}return!1}function gxe(e,t,n,r){return e=h1(e),n=h1(n),t=g1(t),!(!no(n,e)&&(r??n)>e)&&!ao(t,n)&&(r===void 0||!no(r,e))}function m1(e){return`mode`in e?e.mode:e.filterMode}function h1(e){return e||1/0}function g1(e){return e||0}var _1=class extends I(L){constructor(e){super(e),this.activeFilterId=null,this.filters=new(W.ofType(f1)),this.mode=`manual`}writeFilters(e,t,n,r){let i=e.toArray();this.mode===`scale`&&i.sort((e,t)=>{let n=uxe(t.minScale,e.minScale),r=e.maxScale-t.maxScale;return n===0?r:n}),t[n]=i.map(e=>e.toJSON(r))}write(e,t){return super.write(e,dxe(this,t))}};e([N({type:String,json:{write:{overridePolicy:(e,t,n)=>({enabled:n.filterMode===`manual`,isRequired:!0})}}})],_1.prototype,`activeFilterId`,void 0),e([N({type:W.ofType(f1),nonNullable:!0,json:{write:!0}})],_1.prototype,`filters`,void 0),e([M(`filters`)],_1.prototype,`writeFilters`,null),e([N({type:[`manual`,`scale`],nonNullable:!0,json:{name:`filterMode`,write:!0}})],_1.prototype,`mode`,void 0),_1=e([P(`esri.layers.support.DisplayFilterInfo`)],_1);var v1=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return e([N(y1)],r.prototype,`displayFilterEnabled`,void 0),e([N(b1)],r.prototype,`displayFilterInfo`,void 0),r=e([P(`esri.layers.mixins.DisplayFilteredLayer`)],r),r},y1={type:Boolean,json:{name:`layerDefinition.disableDisplayFilter`,read:{reader:e=>!e},write:{layerContainerTypes:iQ,writer(e,t,n){Xe(n,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},b1={type:_1,json:{name:`layerDefinition.displayFilterInfo`,write:{enabled:!0,allowNull:!0,layerContainerTypes:iQ},origins:{"web-scene":{write:!1,read:!1}}}},x1=JE(),S1=new Map,C1=new Map;async function _xe(e,t,n){if(!e||!n)return!1;if(!t)return!0;let r=new URL(e).host,i=S1.get(r);if(!i){let t=e.replace(/\/FeatureServer/i,`/VersionManagementServer`).replace(/\/\d*$/,``);i=(await Qc(t,{responseType:`json`,query:{f:`json`}})).data.defaultVersionName}return i===t}async function w1(e,t,n=!1){if(!e||!t)return!0;let r=e.replace(/\/FeatureServer/i,`/VersionManagementServer`).replace(/\/\d*$/,``),i=C1.get(r)?.entries();if(i){for(let[e,a]of i)if(a.name===t){let t=!a.stack?.hasForwardEdits();if(!t&&n){let[{deleteForwardEdits:t},{default:n}]=await Promise.all([R(()=>import(`./deleteForwardEdits-5u_UoBrE.js`),[]),R(()=>import(`./DeleteForwardEditsParameters-CO_gvMAX.js`),[])]),i=await t(r,e,new n({sessionId:x1,moment:a.moment}));return i.success&&a.stack?.clearForwardEdits(),i.success}return t}}return!0}function T1(e,t){if(!e)return!1;let n=e.replace(/\/FeatureServer/i,`/VersionManagementServer`).replace(/\/\d*$/,``),r=C1.get(n)?.entries();if(r){for(let[e,n]of r)if(n.name===t)return n.lockType===`edit`}return!1}var E1=new Eh;function D1(e){return E1.on(`apply-edits`,new WeakRef(e))}function O1(e){return E1.on(`update-moment`,new WeakRef(e))}function k1(e,t,n=null,r=!1){let i=zi();return r=t==null||r,E1.emit(`apply-edits`,{serviceUrl:e,layerId:t,gdbVersion:n,mayReceiveServiceEdits:r,result:i.promise}),i}var A1=Symbol();function vxe(e){return typeof e==`object`&&!!e&&A1 in e}function j1(e){return typeof e==`object`&&!!e&&`gdbVersion`in e}function M1(e,t,n){let r=new URL(e).host,i=S1.get(r),a=e=>!e||e===i;return a(t)&&a(n)||t===n}var N1=t=>{var n;let r=t,i=class extends r{static{n=A1}constructor(...e){super(...e),this[n]=!0,this._applyEditsHandler=e=>{let{serviceUrl:t,layerId:n,gdbVersion:r,mayReceiveServiceEdits:i,result:a}=e,o=t===this.url,s=n!=null&&this.layerId!=null&&n===this.layerId,c=j1(this),l=j1(this)&&M1(t,r,this.gdbVersion);if(!o||c&&!l||!s&&!i)return;let u=a.then(e=>{if(this.lastEditsEventDate=new Date,s&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit(`edits`,C(e)),e;let n=e.editedFeatures?.find(({layerId:e})=>e===this.layerId);if(n){let{adds:t,updates:r,deletes:i}=n.editedFeatures,a={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map(({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],deletedFeatures:i?i.map(({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],updatedFeatures:r?r.map(({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]})):[],editedFeatures:C(e.editedFeatures),exceededTransferLimit:!1,historicMoment:C(e.historicMoment)};return this.emit(`edits`,a),a}let i={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:C(e.editedFeatures),exceededTransferLimit:!1,historicMoment:C(e.historicMoment)};return`historicMoment`in this&&this._shouldUpdateHistoricMoment(t,r,i.historicMoment)&&this.emit(`edits`,i),i}).then(e=>(`historicMoment`in this&&this._shouldUpdateHistoricMoment(t,r,e.historicMoment)&&(this.historicMoment=e.historicMoment),e));this.emit(`apply-edits`,{result:u})},this._updateMomentHandler=e=>{let{serviceUrl:t,gdbVersion:n,moment:r}=e,i=t===this.url,a=j1(this),o=j1(this)&&M1(t,n,this.gdbVersion),s=j1(this)&&!M1(t,this.gdbVersion,null);i&&a&&o&&s&&`historicMoment`in this&&this.historicMoment!==r&&(this.historicMoment=r)},this.when().then(()=>{this.addHandles(D1(this._applyEditsHandler)),`historicMoment`in this&&this.addHandles(O1(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(e,t,n){return`historicMoment`in this&&this.historicMoment!==n&&T1(e,t)}};return e([N()],i.prototype,`lastEditsEventDate`,void 0),i=e([P(`esri.layers.mixins.EditBusLayer`)],i),i},P1,F1=new xr({esriSpatialRelIntersects:`intersects`,esriSpatialRelContains:`contains`,esriSpatialRelCrosses:`crosses`,esriSpatialRelDisjoint:`disjoint`,esriSpatialRelEnvelopeIntersects:`envelope-intersects`,esriSpatialRelIndexIntersects:`index-intersects`,esriSpatialRelOverlaps:`overlaps`,esriSpatialRelTouches:`touches`,esriSpatialRelWithin:`within`,esriSpatialRelRelation:`relation`}),I1=new xr({esriSRUnit_Meter:`meters`,esriSRUnit_Kilometer:`kilometers`,esriSRUnit_Foot:`feet`,esriSRUnit_StatuteMile:`miles`,esriSRUnit_NauticalMile:`nautical-miles`,esriSRUnit_USNauticalMile:`us-nautical-miles`}),L1=P1=class extends L{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=`intersects`,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){let{where:t,geometry:n,spatialRelationship:r,timeExtent:i,objectIds:a,units:o,distance:s}=this;return new Y({geometry:C(n),objectIds:C(a),spatialRelationship:r,timeExtent:C(i),where:t,units:o,distance:s,...e})}clone(){let{where:e,geometry:t,spatialRelationship:n,timeExtent:r,objectIds:i,units:a,distance:o}=this;return new P1({geometry:C(t),objectIds:C(i),spatialRelationship:n,timeExtent:C(r),where:e,units:a,distance:o})}};e([N({type:String,json:{write:!0}})],L1.prototype,`where`,void 0),e([N({types:yh,json:{write:!0}})],L1.prototype,`geometry`,void 0),e([N({type:F1.apiValues,json:{name:`spatialRel`,read:{reader:F1.read},write:{allowNull:!1,writer:F1.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],L1.prototype,`spatialRelationship`,void 0),e([N({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],L1.prototype,`distance`,void 0),e([N({type:[Number],json:{write:!0}})],L1.prototype,`objectIds`,void 0),e([N({type:I1.apiValues,json:{read:I1.read,write:{writer:I1.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],L1.prototype,`units`,void 0),e([N({type:YT,json:{write:!0}})],L1.prototype,`timeExtent`,void 0),L1=P1=e([P(`esri.layers.support.FeatureFilter`)],L1);var R1=L1,z1,B1={read:{reader:t1},write:{writer:n1,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},V1={read:{reader:t1},write:{writer:n1,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},H1={name:`showExcludedLabels`,default:!0},U1=z1=class extends L{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){let n=super.write(e,t);if(t?.origin){if(n.filter){let e=Object.keys(n.filter);if(e.length>1||e[0]!==`where`)return t.messages?.push(new D(`web-document-write:unsupported-feature-effect`,`Invalid feature effect 'filter'. A filter can only contain a 'where' property`,{layer:t.layer,effect:this})),null}if(`showExcludedLabels`in n)return t.messages?.push(new D(`web-document-write:unsupported-feature-effect`,`Invalid value for property 'excludedLabelsVisible' which should always be 'true'`,{layer:t.layer,effect:this})),null}return n}clone(){return new z1({filter:this.filter==null?null:this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([N({type:R1,json:{write:{allowNull:!0,writer(e,t,n,r){let i=e?.write({},r);i&&Object.keys(i).length!==0?Xe(n,i,t):Xe(n,null,t)}}}})],U1.prototype,`filter`,void 0),e([N({json:{read:t1,write:{writer:n1,allowNull:!0},origins:{"web-map":B1,"portal-item":B1}}})],U1.prototype,`includedEffect`,void 0),e([N({json:{read:t1,write:{writer:n1,allowNull:!0},origins:{"web-map":V1,"portal-item":V1}}})],U1.prototype,`excludedEffect`,void 0),e([N({type:Boolean,json:{write:!0,name:`showExcludedLabels`,origins:{"web-map":H1,"portal-item":H1}}})],U1.prototype,`excludedLabelsVisible`,void 0),U1=z1=e([P(`esri.layers.support.FeatureEffect`)],U1);var W1={write:{allowNull:!0}},G1={type:U1,json:{origins:{"web-map":W1,"portal-item":W1}}},K1=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.featureEffect=null}};return e([N(G1)],r.prototype,`featureEffect`,void 0),r=e([P(`esri.layers.mixins.FeatureEffectLayer`)],r),r},q1,J1=q1=class extends L{constructor(e){super(e),this.expression=void 0,this.title=void 0}async collectRequiredFields(e,t){return kk(e,t,null,this.expression)}clone(){return new q1({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};e([N({type:String,json:{write:{isRequired:!0}}})],J1.prototype,`expression`,void 0),e([N({type:String,json:{write:!0}})],J1.prototype,`title`,void 0),J1=q1=e([P(`esri.symbols.support.FeatureExpressionInfo`)],J1);var Y1=J1,X1={unknown:1,inches:_u(1,`meters`,`inches`),feet:_u(1,`meters`,`feet`),"us-feet":_u(1,`meters`,`us-feet`),yards:_u(1,`meters`,`yards`),miles:_u(1,`meters`,`miles`),"nautical-miles":_u(1,`meters`,`nautical-miles`),millimeters:_u(1,`meters`,`millimeters`),centimeters:_u(1,`meters`,`centimeters`),decimeters:_u(1,`meters`,`decimeters`),meters:_u(1,`meters`,`meters`),kilometers:_u(1,`meters`,`kilometers`),"decimal-degrees":1/wu(1,`meters`,Po.radius)};function yxe(e){return!!e&&X1[e]!=null}function bxe(e){return 1/(X1[e]||1)}function xxe(){let e=Object.keys(X1);return he(e,`decimal-degrees`),e.sort(),e}var Sxe=xxe(),Z1=Cr()({onTheGround:`on-the-ground`,relativeToGround:`relative-to-ground`,relativeToScene:`relative-to-scene`,absoluteHeight:`absolute-height`}),Q1=new xr({foot:`feet`,kilometer:`kilometers`,meter:`meters`,mile:`miles`,"us-foot":`us-feet`,yard:`yards`}),$1=class extends I(L){constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return e==null?t.featureExpression&&t.featureExpression.value===0?{expression:`0`}:void 0:e.expression?e:void 0}writeFeatureExpressionInfo(e,t,n,r){t[n]=e.write({},r),e.expression===`0`&&(t.featureExpression={value:0})}get mode(){let{offset:e,featureExpressionInfo:t}=this;return this._isOverridden(`mode`)?this._get(`mode`):e!=null||t?`relative-to-ground`:`on-the-ground`}set mode(e){this._override(`mode`,e)}set unit(e){this._set(`unit`,e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Hr(this.featureExpressionInfo,e.featureExpressionInfo)}};e([N({type:Y1,json:{write:!0}})],$1.prototype,`featureExpressionInfo`,void 0),e([j(`featureExpressionInfo`,[`featureExpressionInfo`,`featureExpression`])],$1.prototype,`readFeatureExpressionInfo`,null),e([M(`featureExpressionInfo`,{featureExpressionInfo:{type:Y1},"featureExpression.value":{type:[0]}})],$1.prototype,`writeFeatureExpressionInfo`,null),e([N({type:Z1.apiValues,nonNullable:!0,json:{type:Z1.jsonValues,read:Z1.read,write:{writer:Z1.write,isRequired:!0}}})],$1.prototype,`mode`,null),e([N({type:Number,json:{write:!0}})],$1.prototype,`offset`,void 0),e([N({type:Sxe,json:{type:String,read:Q1.read,write:Q1.write}})],$1.prototype,`unit`,null),$1=e([P(`esri.symbols.support.ElevationInfo`)],$1);var e0=class extends L{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};e([O({type:String,json:{write:!0}})],e0.prototype,`description`,void 0),e([O({type:String,json:{write:!0}})],e0.prototype,`label`,void 0),e([O()],e0.prototype,`type`,void 0),e0=e([hr(`esri.tables.elements.AttributeTableElement`)],e0);var t0=e0,n0=class extends I(t0){constructor(e){super(e),this.displayType=`auto`,this.type=`attachment`}clone(){return super.clone()}};e([N({type:[`auto`],json:{write:!0}})],n0.prototype,`displayType`,void 0),e([N({type:[`attachment`],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],n0.prototype,`type`,void 0),n0=e([P(`esri.tables.elements.AttributeTableAttachmentElement`)],n0);var r0=n0,i0=class extends I(t0){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type=`field`}clone(){return super.clone()}};e([N({type:String,json:{read:!1,write:!1}})],i0.prototype,`description`,void 0),e([N({type:String,json:{write:{enabled:!0,isRequired:!0}}})],i0.prototype,`fieldName`,void 0),e([N({type:String,json:{read:!1,write:!1}})],i0.prototype,`label`,void 0),e([N({type:[`field`],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],i0.prototype,`type`,void 0),i0=e([P(`esri.tables.elements.AttributeTableFieldElement`)],i0);var a0=i0,o0=class extends I(t0){constructor(e){super(e),this.relationshipId=null,this.type=`relationship`}clone(){return super.clone()}};e([N({type:Number,json:{type:Wt,write:{enabled:!0,isRequired:!0}}})],o0.prototype,`relationshipId`,void 0),e([N({type:[`relationship`],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],o0.prototype,`type`,void 0),o0=e([P(`esri.tables.elements.AttributeTableRelationshipElement`)],o0);var s0=o0,c0={base:t0,key:`type`,typeMap:{attachment:r0,field:a0,relationship:s0}};function Cxe(e){return{typesWithGroup:{base:t0,key:`type`,typeMap:{attachment:r0,field:a0,group:e,relationship:s0}},typesWithoutGroup:c0}}var l0=class extends I(t0){constructor(e){super(e),this.elements=null,this.type=`group`}clone(){return super.clone()}};e([N({types:[c0],json:{name:`attributeTableElements`,write:!0}})],l0.prototype,`elements`,void 0),e([N({type:[`group`],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],l0.prototype,`type`,void 0),l0=e([P(`esri.tables.elements.AttributeTableGroupElement`)],l0);var wxe=l0,u0=class extends I(L){constructor(e){super(e),this.field=null,this.order=null}};e([N({type:String,json:{write:!0}})],u0.prototype,`field`,void 0),e([N({type:[`asc`,`desc`],json:{write:!0}})],u0.prototype,`order`,void 0),u0=e([P(`esri.tables.support.FieldOrder`)],u0);var Txe=u0,d0,Exe=Cxe(wxe),f0=d0=class extends L{constructor(e){super(e),this.elements=null,this.orderByFields=null}clone(){return new d0({elements:C(this.elements),orderByFields:C(this.orderByFields)})}};e([N({types:[Exe.typesWithGroup],json:{name:`attributeTableElements`,write:!0}})],f0.prototype,`elements`,void 0),e([N({type:[Txe],json:{write:!0}})],f0.prototype,`orderByFields`,void 0),f0=d0=e([P(`esri.tables.AttributeTableTemplate`)],f0);var p0=f0,m0={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:`screenSizePerspective`,write:{enabled:!0,layerContainerTypes:iQ}}},h0={type:Boolean,value:!0,json:{name:`disablePopup`,read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,n){t[n]=!e}}}},g0={type:Boolean,value:!0,nonNullable:!0,json:{name:`showLabels`,write:{enabled:!0,layerContainerTypes:iQ}}},_0={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:gc}}},v0={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:`showLegend`,write:{enabled:!0,layerContainerTypes:iQ}}},y0={value:null,type:$1,json:{origins:{service:{name:`elevationInfo`,write:!0}},name:`layerDefinition.elevationInfo`,write:{enabled:!0,layerContainerTypes:iQ}}};function Dxe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}var b0={write:{enabled:!0,layerContainerTypes:iQ},read:!0},x0={type:Number,json:{origins:{"web-document":b0,"portal-item":{write:{layerContainerTypes:iQ}}}}},S0={...x0,json:{...x0.json,origins:{"web-document":{...b0,write:{enabled:!0,layerContainerTypes:iQ,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:[`layerDefinition.drawingInfo.transparency`,`drawingInfo.transparency`],reader:(e,t,n)=>n&&n.origin!==`service`||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition?.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?zE(t.layerDefinition.drawingInfo.transparency):void 0:zE(t.drawingInfo.transparency)}}},Oxe={type:Rd,readOnly:!0,json:{origins:{service:{read:{source:[`fullExtent`,`spatialReference`],reader:(e,t)=>{let n=Rd.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference==`object`&&(n.spatialReference=H.fromJSON(t.spatialReference)),n}}}},read:!1}},C0={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},w0={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:`layerDefinition.minScale`,write:{layerContainerTypes:iQ}}},T0={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:`layerDefinition.maxScale`,write:{layerContainerTypes:iQ}}},E0={json:{write:{ignoreOrigin:!0,layerContainerTypes:iQ},origins:{"web-map":{read:!1,write:!1}}}},D0={type:p0,json:{name:`attributeTableInfo`,write:!0}},O0=class extends I(L){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([N()],O0.prototype,`creatorField`,void 0),e([N()],O0.prototype,`creationDateField`,void 0),e([N()],O0.prototype,`editorField`,void 0),e([N()],O0.prototype,`editDateField`,void 0),e([N()],O0.prototype,`realm`,void 0),e([N(wb(`dateFieldsTimeReference`,!0))],O0.prototype,`timeZone`,void 0),O0=e([P(`esri.layers.support.EditFieldsInfo`)],O0);var k0=class extends I(L){constructor(e){super(e)}};e([N({constructOnly:!0,json:{write:!0}})],k0.prototype,`name`,void 0),e([N({constructOnly:!0,json:{write:!0}})],k0.prototype,`fields`,void 0),e([N({constructOnly:!0,json:{write:!0}})],k0.prototype,`isAscending`,void 0),e([N({constructOnly:!0,json:{write:!0}})],k0.prototype,`indexType`,void 0),e([N({constructOnly:!0,json:{write:!0}})],k0.prototype,`isUnique`,void 0),e([N({constructOnly:!0,json:{write:!0}})],k0.prototype,`description`,void 0),k0=e([P(`esri.layers.support.FeatureIndex`)],k0);async function A0(e,t,n){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=j0(e));let r=kxe(e),i=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let a=null;for(;;){let o=await e.source.queryFeaturesJSON(t,n);if(a==null?a=o:a.features=a.features.concat(o.features),a.exceededTransferLimit=o.exceededTransferLimit,!i||!o.exceededTransferLimit)break;t.start+=r}return a}function kxe(e){return j0(e)*Axe(e)}function Axe(e){return e.capabilities.query.maxRecordCount||2e3}function j0(e){return e.capabilities.query.supportsMaxRecordCountFactor?Y.MAX_MAX_RECORD_COUNT_FACTOR:1}var M0,N0=M0=class extends L{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new M0({minValue:this.minValue,maxValue:this.maxValue})}};e([N({type:Number,json:{write:!0}})],N0.prototype,`minValue`,void 0),e([N({type:Number,json:{write:!0}})],N0.prototype,`maxValue`,void 0),N0=M0=e([P(`esri.renderers.support.AuthoringInfoClassBreakInfo`)],N0);var P0,F0=P0=class extends L{constructor(e){super(e),this.field=``,this.normalizationField=``,this.label=``,this.classBreakInfos=[]}clone(){return new P0({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:C(this.classBreakInfos)})}};e([N({type:String,json:{write:!0}})],F0.prototype,`field`,void 0),e([N({type:String,json:{write:!0}})],F0.prototype,`normalizationField`,void 0),e([N({type:String,json:{write:!0}})],F0.prototype,`label`,void 0),e([N({type:[N0],json:{write:!0}})],F0.prototype,`classBreakInfos`,void 0),F0=P0=e([P(`esri.renderers.support.AuthoringInfoFieldInfo`)],F0);var I0,L0=I0=class extends L{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new I0({label:this.label,value:this.value,size:this.size})}};e([N({type:String,json:{write:!0}})],L0.prototype,`label`,void 0),e([N({type:Number,json:{write:!0}})],L0.prototype,`size`,void 0),e([N({type:Number,json:{write:!0}})],L0.prototype,`value`,void 0),L0=I0=e([P(`esri.renderers.support.AuthoringInfoSizeStop`)],L0);var jxe=L0,R0,z0=new xr({percentTotal:`percent-of-total`,ratio:`ratio`,percent:`percent`}),B0=new xr({sizeInfo:`size`,colorInfo:`color`,transparencyInfo:`opacity`,rotationInfo:`rotation`}),V0={key:e=>typeof e==`number`?`number`:`string`,typeMap:{number:Number,string:String},base:null},H0=[`high-to-low`,`above-and-below`,`centered-on`,`extremes`],U0=[...new Set([...[`high-to-low`,`above-and-below`,`centered-on`,`extremes`,`above`,`below`],...[`high-to-low`,`above-and-below`,`above`,`below`,`reference-size`,`spike`]])],W0=[`seconds`,`minutes`,`hours`,`days`,`months`,`years`],Mxe=[`circle`,`diamond`,`hexagon-flat`,`hexagon-pointy`,`square`],Nxe=[`triangle-closed-outline`,`triangle-gradient-fill-closed`,`triangle-gradient-fill-closed-outline`,`triangle-gradient-fill-open`,`triangle-gradient-fill-open-outline`,`triangle-open-outline`,`triangle-solid-fill-closed`,`triangle-solid-fill-closed-outline`,`triangle-solid-fill-open`,`triangle-solid-fill-open-outline`],G0=R0=class extends L{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e==`string`||typeof e==`number`?e:null}get normalizationField(){return this.theme===`reference-size`||this.theme===`spike`?this._get(`normalizationField`):null}set normalizationField(e){this._set(`normalizationField`,e)}get referenceSizeScale(){return this.theme===`reference-size`?this._get(`referenceSizeScale`):null}set referenceSizeScale(e){this._set(`referenceSizeScale`,e)}get referenceSizeSymbolStyle(){return this.theme===`reference-size`?this._get(`referenceSizeSymbolStyle`):null}set referenceSizeSymbolStyle(e){this._set(`referenceSizeSymbolStyle`,e)}get spikeSymbolStyle(){return this.theme===`spike`?this._get(`spikeSymbolStyle`):null}set spikeSymbolStyle(e){this._set(`spikeSymbolStyle`,e)}castStartTime(e){return typeof e==`string`||typeof e==`number`?e:null}get sizeStops(){return this.theme===`reference-size`||this.theme===`spike`?this._get(`sizeStops`):null}set sizeStops(e){this._set(`sizeStops`,e)}get style(){return this.type===`color`?this._get(`style`):null}set style(e){this._set(`style`,e)}get theme(){return this.type===`color`||this.type===`size`?this._get(`theme`)||`high-to-low`:null}set theme(e){this._set(`theme`,e)}clone(){return new R0({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,spikeSymbolStyle:this.spikeSymbolStyle,sizeStops:C(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};e([N({types:V0,json:{write:!0}})],G0.prototype,`endTime`,void 0),e([Cn(`endTime`)],G0.prototype,`castEndTime`,null),e([N({type:String,json:{write:!0}})],G0.prototype,`field`,void 0),e([N({type:Number,json:{write:!0}})],G0.prototype,`maxSliderValue`,void 0),e([N({type:Number,json:{write:!0}})],G0.prototype,`minSliderValue`,void 0),e([N({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],G0.prototype,`normalizationField`,null),e([N({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],G0.prototype,`referenceSizeScale`,null),e([N({type:Mxe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],G0.prototype,`referenceSizeSymbolStyle`,null),e([N({type:Nxe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],G0.prototype,`spikeSymbolStyle`,null),e([N({types:V0,json:{write:!0}})],G0.prototype,`startTime`,void 0),e([Cn(`startTime`)],G0.prototype,`castStartTime`,null),e([N({type:[jxe],json:{origins:{"web-scene":{write:!1}},write:!0}})],G0.prototype,`sizeStops`,null),e([N({type:z0.apiValues,value:null,json:{type:z0.jsonValues,read:z0.read,write:z0.write}})],G0.prototype,`style`,null),e([N({type:U0,value:null,json:{type:U0,origins:{"web-scene":{type:H0,write:{writer:(e,t)=>{H0.includes(e)&&(t.theme=e)}}}},write:!0}})],G0.prototype,`theme`,null),e([N({type:B0.apiValues,json:{type:B0.jsonValues,read:B0.read,write:B0.write}})],G0.prototype,`type`,void 0),e([N({type:W0,json:{type:W0,write:!0}})],G0.prototype,`units`,void 0),G0=R0=e([P(`esri.renderers.support.AuthoringInfoVisualVariable`)],G0);var Pxe=G0,K0=class extends L{constructor(e){super(e),this.type=null}};e([N({readOnly:!0,json:{read:!1,write:!0}})],K0.prototype,`type`,void 0),K0=e([P(`esri.rest.support.ColorRamp`)],K0);var q0,J0=q0=class extends K0{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type=`algorithmic`}clone(){return new q0({fromColor:C(this.fromColor),toColor:C(this.toColor),algorithm:this.algorithm})}};e([A({esriCIELabAlgorithm:`cie-lab`,esriHSVAlgorithm:`hsv`,esriLabLChAlgorithm:`lab-lch`})],J0.prototype,`algorithm`,void 0),e([N({type:J,json:{type:[Wt],write:{isRequired:!0}}})],J0.prototype,`fromColor`,void 0),e([N({type:J,json:{type:[Wt],write:{isRequired:!0}}})],J0.prototype,`toColor`,void 0),e([N({type:[`algorithmic`],json:{write:{isRequired:!0}}})],J0.prototype,`type`,void 0),J0=q0=e([P(`esri.rest.support.AlgorithmicColorRamp`)],J0);var Y0,X0=Y0=class extends K0{constructor(e){super(e),this.colorRamps=null,this.type=`multipart`,this.weights=void 0}writeColorRamps(e,t,n,r){let i=e?.map(e=>e.toJSON(r)),{weights:a}=this;if(i&&a?.length&&i.length===a?.length){let e=100/a.reduce((e,t)=>e+t),t=0;i.forEach((n,r)=>{n.start=t,t+=a[r]*e,n.stop=t})}t.colorRamps=i}readWeights(e,t){let n=t.colorRamps?.map(({start:e,stop:t})=>e==null||t==null?-1:t-e);if(!n?.some(e=>e<0))return n}clone(){return new Y0({colorRamps:C(this.colorRamps)})}};e([N({type:[J0],json:{write:{isRequired:!0}}})],X0.prototype,`colorRamps`,void 0),e([M(`colorRamps`)],X0.prototype,`writeColorRamps`,null),e([N({type:[`multipart`],json:{write:{isRequired:!0}}})],X0.prototype,`type`,void 0),e([N({type:[Number]})],X0.prototype,`weights`,void 0),e([j(`weights`,[`colorRamps`])],X0.prototype,`readWeights`,null),X0=Y0=e([P(`esri.rest.support.MultipartColorRamp`)],X0);var Z0={key:`type`,base:K0,typeMap:{algorithmic:J0,multipart:X0}};function Q0(e){return e?.type?e.type===`algorithmic`?J0.fromJSON(e):e.type===`multipart`?X0.fromJSON(e):null:null}var $0,e2=new xr({esriClassifyDefinedInterval:`defined-interval`,esriClassifyEqualInterval:`equal-interval`,esriClassifyManual:`manual`,esriClassifyNaturalBreaks:`natural-breaks`,esriClassifyQuantile:`quantile`,esriClassifyStandardDeviation:`standard-deviation`}),t2=new xr({classedSize:`class-breaks-size`,classedColor:`class-breaks-color`,univariateColorSize:`univariate-color-size`,relationship:`relationship`,predominance:`predominance`,dotDensity:`dot-density`,flow:`flow`}),n2=[`inches`,`feet`,`yards`,`miles`,`nautical-miles`,`millimeters`,`centimeters`,`decimeters`,`meters`,`kilometers`],Fxe=[`high-to-low`,`above-and-below`,`above`,`below`],Ixe=[`flow-line`,`wave-front`],Lxe=[`caret`,`circle-caret`,`arrow`,`circle-arrow`,`plus-minus`,`circle-plus-minus`,`square`,`circle`,`triangle`,`happy-sad`,`thumb`,`custom`],r2=$0=class extends L{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){let e=this._get(`classificationMethod`),t=this.type;return t&&t!==`relationship`?t===`class-breaks-size`||t===`class-breaks-color`?e||`manual`:null:e}set classificationMethod(e){this._set(`classificationMethod`,e)}readColorRamp(e){return e?Q0(e):void 0}get fields(){return this.type&&this.type!==`predominance`?null:this._get(`fields`)}set fields(e){this._set(`fields`,e)}get field1(){return this.type&&this.type!==`relationship`?null:this._get(`field1`)}set field1(e){this._set(`field1`,e)}get field2(){return this.type&&this.type!==`relationship`?null:this._get(`field2`)}set field2(e){this._set(`field2`,e)}get flowTheme(){return this.type===`flow`?this._get(`flowTheme`):null}set flowTheme(e){this._set(`flowTheme`,e)}get focus(){return this.type&&this.type!==`relationship`?null:this._get(`focus`)}set focus(e){this._set(`focus`,e)}get numClasses(){return this.type&&this.type!==`relationship`?null:this._get(`numClasses`)}set numClasses(e){this._set(`numClasses`,e)}get statistics(){return this.type===`univariate-color-size`&&this.univariateTheme===`above-and-below`?this._get(`statistics`):null}set statistics(e){this._set(`statistics`,e)}get standardDeviationInterval(){let e=this.type;return e&&e!==`relationship`&&e!==`class-breaks-size`&&e!==`class-breaks-color`||this.classificationMethod&&this.classificationMethod!==`standard-deviation`?null:this._get(`standardDeviationInterval`)}set standardDeviationInterval(e){this._set(`standardDeviationInterval`,e)}get type(){return this._get(`type`)}set type(e){let t=e;e===`classed-size`?t=`class-breaks-size`:e===`classed-color`&&(t=`class-breaks-color`),this._set(`type`,t)}get univariateSymbolStyle(){return this.type===`univariate-color-size`&&this.univariateTheme===`above-and-below`?this._get(`univariateSymbolStyle`):null}set univariateSymbolStyle(e){this._set(`univariateSymbolStyle`,e)}get univariateTheme(){return this.type===`univariate-color-size`?this._get(`univariateTheme`):null}set univariateTheme(e){this._set(`univariateTheme`,e)}clone(){return new $0({classificationMethod:this.classificationMethod,colorRamp:C(this.colorRamp),fadeRatio:C(this.fadeRatio),fields:this.fields?.slice(),field1:C(this.field1),field2:C(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};e([N({type:e2.apiValues,value:null,json:{type:e2.jsonValues,read:e2.read,write:e2.write,origins:{"web-document":{default:`manual`,type:e2.jsonValues,read:e2.read,write:e2.write}}}})],r2.prototype,`classificationMethod`,null),e([N({types:Z0,json:{write:!0}})],r2.prototype,`colorRamp`,void 0),e([j(`colorRamp`)],r2.prototype,`readColorRamp`,null),e([N({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r2.prototype,`fadeRatio`,void 0),e([N({type:[String],value:null,json:{write:!0}})],r2.prototype,`fields`,null),e([N({type:F0,value:null,json:{write:!0}})],r2.prototype,`field1`,null),e([N({type:F0,value:null,json:{write:!0}})],r2.prototype,`field2`,null),e([N({type:Ixe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],r2.prototype,`flowTheme`,null),e([N({type:[`HH`,`HL`,`LH`,`LL`],value:null,json:{write:!0}})],r2.prototype,`focus`,null),e([N({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],r2.prototype,`isAutoGenerated`,void 0),e([N({type:Number,value:null,json:{type:Wt,write:!0}})],r2.prototype,`numClasses`,null),e([N({type:n2,json:{type:n2,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],r2.prototype,`lengthUnit`,void 0),e([N({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r2.prototype,`maxSliderValue`,void 0),e([N({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r2.prototype,`minSliderValue`,void 0),e([N({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],r2.prototype,`statistics`,null),e([N({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],r2.prototype,`standardDeviationInterval`,null),e([N({type:t2.apiValues,value:null,json:{type:t2.jsonValues,read:t2.read,write:t2.write}})],r2.prototype,`type`,null),e([N({type:[Pxe],json:{write:!0}})],r2.prototype,`visualVariables`,void 0),e([N({type:Lxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],r2.prototype,`univariateSymbolStyle`,null),e([N({type:Fxe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],r2.prototype,`univariateTheme`,null),r2=$0=e([P(`esri.renderers.support.AuthoringInfo`)],r2);var i2=new xr({simple:`simple`,uniqueValue:`unique-value`,classBreaks:`class-breaks`,heatmap:`heatmap`,dotDensity:`dot-density`,dictionary:`dictionary`,pieChart:`pie-chart`},{ignoreUnknown:!0}),a2=class extends L{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];let t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};e([N({type:r2,json:{write:!0}})],a2.prototype,`authoringInfo`,void 0),e([N({type:i2.apiValues,readOnly:!0,json:{type:i2.jsonValues,read:!1,write:{writer:i2.write,ignoreOrigin:!0,isRequired:!0}}})],a2.prototype,`type`,void 0),a2=e([P(`esri.renderers.Renderer`)],a2);var o2=class extends I(L){constructor(){super(...arguments),this.showLegend=null,this.title=null}};e([N({type:Boolean,json:{write:!0}})],o2.prototype,`showLegend`,void 0),e([N({type:String,json:{write:!0}})],o2.prototype,`title`,void 0),o2=e([P(`esri.renderers.visualVariables.support.VisualVariableLegendOptions`)],o2);var s2=o2,c2=new xr({colorInfo:`color`,transparencyInfo:`opacity`,rotationInfo:`rotation`,sizeInfo:`size`}),l2=class extends L{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e==`function`?(E.getLogger(this).error(`.field: field must be a string value`),null):Ct(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};e([N()],l2.prototype,`index`,void 0),e([N({type:c2.apiValues,readOnly:!0,json:{read:c2.read,write:{writer:c2.write,isRequired:!0}}})],l2.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],l2.prototype,`field`,void 0),e([Tr(`field`)],l2.prototype,`castField`,null),e([N({type:String,json:{write:!0}})],l2.prototype,`valueExpression`,void 0),e([N({type:String,json:{write:!0}})],l2.prototype,`valueExpressionTitle`,void 0),e([N({readOnly:!0})],l2.prototype,`arcadeRequired`,null),e([N({type:s2,json:{write:!0}})],l2.prototype,`legendOptions`,void 0),l2=e([P(`esri.renderers.visualVariables.VisualVariable`)],l2);var u2,d2=u2=class extends L{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,n){t[n]=e??0}clone(){return new u2({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};e([N({type:J,json:{type:[Wt],write:{isRequired:!0}}})],d2.prototype,`color`,void 0),e([N({type:String,json:{write:!0}})],d2.prototype,`label`,void 0),e([N({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],d2.prototype,`value`,void 0),e([M(`value`)],d2.prototype,`writeValue`,null),d2=u2=e([P(`esri.renderers.visualVariables.support.ColorStop`)],d2);var f2=d2,p2,m2=p2=class extends l2{constructor(e){super(e),this.type=`color`,this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value),this._set(`stops`,e)}clone(){return new p2({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};e([N({readOnly:!0})],m2.prototype,`cache`,null),e([N({type:[`color`],json:{type:[`colorInfo`]}})],m2.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],m2.prototype,`normalizationField`,void 0),e([N({type:[f2],json:{write:!0}})],m2.prototype,`stops`,null),m2=p2=e([P(`esri.renderers.visualVariables.ColorVariable`)],m2);var h2,g2=h2=class extends L{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return zE(t.transparency)}writeOpacity(e,t,n){t[n]=RE(e)}clone(){return new h2({label:this.label,opacity:this.opacity,value:this.value})}};e([N({type:String,json:{write:!0}})],g2.prototype,`label`,void 0),e([N({type:Number,json:{type:Wt,write:{target:`transparency`,isRequired:!0}}})],g2.prototype,`opacity`,void 0),e([j(`opacity`,[`transparency`])],g2.prototype,`readOpacity`,null),e([M(`opacity`)],g2.prototype,`writeOpacity`,null),e([N({type:Number,json:{write:{isRequired:!0}}})],g2.prototype,`value`,void 0),g2=h2=e([P(`esri.renderers.visualVariables.support.OpacityStop`)],g2);var Rxe=g2,_2,v2=_2=class extends l2{constructor(e){super(e),this.type=`opacity`,this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value),this._set(`stops`,e)}clone(){return new _2({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};e([N({readOnly:!0})],v2.prototype,`cache`,null),e([N({type:[`opacity`],json:{type:[`transparencyInfo`]}})],v2.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],v2.prototype,`normalizationField`,void 0),e([N({type:[Rxe],json:{write:!0}})],v2.prototype,`stops`,null),v2=_2=e([P(`esri.renderers.visualVariables.OpacityVariable`)],v2);var y2,b2=y2=class extends l2{constructor(e){super(e),this.axis=null,this.type=`rotation`,this.rotationType=`geographic`}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new y2({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};e([N({readOnly:!0})],b2.prototype,`cache`,null),e([N({type:[`heading`,`tilt`,`roll`],json:{origins:{"web-scene":{default:`heading`,write:!0}}}})],b2.prototype,`axis`,void 0),e([N({type:[`rotation`],json:{type:[`rotationInfo`]}})],b2.prototype,`type`,void 0),e([N({type:[`geographic`,`arithmetic`],json:{write:!0,origins:{"web-document":{write:!0,default:`geographic`}}}})],b2.prototype,`rotationType`,void 0),b2=y2=e([P(`esri.renderers.visualVariables.RotationVariable`)],b2);function zxe(e){return Xw(e)}var x2,S2=x2=class extends L{constructor(e){super(e),this.label=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}get size(){return this._get(`size`)}set size(e){this._set(`size`,e)}clone(){return new x2({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};e([N({type:String,json:{write:!0}})],S2.prototype,`label`,void 0),e([N({type:Number,cast:Xw,json:{write:{isRequired:!0}}})],S2.prototype,`size`,null),e([N({type:Number,json:{write:{isRequired:!0}}})],S2.prototype,`value`,void 0),e([N({type:Boolean,json:{write:!1}})],S2.prototype,`useMinValue`,void 0),e([N({type:Boolean,json:{write:!1}})],S2.prototype,`useMaxValue`,void 0),S2=x2=e([P(`esri.renderers.visualVariables.support.SizeStop`)],S2);var C2=class extends s2{constructor(){super(...arguments),this.customValues=null}};e([N({type:[Number],json:{write:!0}})],C2.prototype,`customValues`,void 0),C2=e([P(`esri.renderers.visualVariables.support.SizeVariableLegendOptions`)],C2);var Bxe=C2;function w2(e){return e&&e.declaredClass===`esri.renderers.visualVariables.SizeVariable`}function T2(e){return e!=null&&!isNaN(e)&&isFinite(e)}function E2(e){return e.valueExpression?`expression`:e.field&&typeof e.field==`string`?`field`:`unknown`}function Vxe(e,t){let n=t||E2(e),r=e.valueUnit||`unknown`;return n===`unknown`?`constant`:e.stops?`stops`:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?`clamped-linear`:r===`unknown`?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?`proportional`:`additive`:`identity`:`real-world-size`}var D2=()=>E.getLogger(`esri.renderers.visualVariables.support.visualVariableUtils`),O2=e=>D2().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),k2=()=>D2().error(`Use of arcade expressions requires an arcade context`),A2=new VF,j2=Math.PI,M2=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function N2(e,t,n){let r=`visualVariables`in e?e.visualVariables?.find(e=>e.type===`color`):e;if(!r)return;if(r.declaredClass!==`esri.renderers.visualVariables.ColorVariable`)return void O2(`ColorVariable`);let i=typeof t==`number`,a=i?null:t,o=a?.attributes,s=i?t:null,c=r.field,{ipData:l,hasExpression:u}=r.cache,d=r.cache.compiledFunc;if(!c&&!u){let e=r.stops;return e&&e[0]&&e[0].color}if(typeof s!=`number`)if(u){if(n?.arcade==null)return void k2();let e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},t=n.arcade.arcadeUtils,i=t.getViewInfo(e),o=t.createExecContext(a,i,n.timeZone);if(!d){let e=t.createSyntaxTree(r.valueExpression);d=t.createFunction(e),r.cache.compiledFunc=d}s=t.executeFunction(d,o)}else o&&(s=o[c]);let f=r.normalizationField,p=o!=null&&f!=null?parseFloat(o[f]):void 0;if(s!=null&&(!f||i||!isNaN(p)&&p!==0)){T2(p)&&!i&&(s/=p);let e=B2(s,l);if(e){let t=e[0],i=e[1],a=t===i?r.stops[t].color:J.blendColors(r.stops[t].color,r.stops[i].color,e[2],n?.color);return new J(a)}}}function P2(e,t,n){let r=`visualVariables`in e?e.visualVariables?.find(e=>e.type===`opacity`):e;if(!r)return;if(r.declaredClass!==`esri.renderers.visualVariables.OpacityVariable`)return void O2(`OpacityVariable`);let i=typeof t==`number`,a=i?null:t,o=a?.attributes,s=i?t:null,c=r.field,{ipData:l,hasExpression:u}=r.cache,d=r.cache.compiledFunc;if(!c&&!u){let e=r.stops;return e&&e[0]&&e[0].opacity}if(typeof s!=`number`)if(u){if(n?.arcade==null)return void k2();let e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},t=n.arcade.arcadeUtils,i=t.getViewInfo(e),o=t.createExecContext(a,i,n.timeZone);if(!d){let e=t.createSyntaxTree(r.valueExpression);d=t.createFunction(e),r.cache.compiledFunc=d}s=t.executeFunction(d,o)}else o&&(s=o[c]);let f=r.normalizationField,p=o!=null&&f!=null?parseFloat(o[f]):void 0;if(s!=null&&(!f||i||!isNaN(p)&&p!==0)){T2(p)&&!i&&(s/=p);let e=B2(s,l);if(e){let t=e[0],n=e[1];if(t===n)return r.stops[t].opacity;{let i=r.stops[t].opacity;return i+(r.stops[n].opacity-i)*e[2]}}}}function F2(e,t,n){let r=`visualVariables`in e?e.visualVariables?.find(e=>e.type===`rotation`):e;if(!r)return;if(r.declaredClass!==`esri.renderers.visualVariables.RotationVariable`)return void O2(`RotationVariable`);let i=r.axis||`heading`,a=i===`heading`&&r.rotationType===`arithmetic`?90:0,o=i===`heading`&&r.rotationType===`arithmetic`?-1:1,s=typeof t==`number`?null:t,c=s?.attributes,l=r.field,{hasExpression:u}=r.cache,d=r.cache.compiledFunc,f=null;if(!l&&!u)return f;if(u){if(n?.arcade==null)return void k2();let e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},t=n.arcade.arcadeUtils,i=t.getViewInfo(e),a=t.createExecContext(s,i,n.timeZone);if(!d){let e=t.createSyntaxTree(r.valueExpression);d=t.createFunction(e),r.cache.compiledFunc=d}f=t.executeFunction(d,a)}else c&&(f=c[l]);return f=typeof f!=`number`||isNaN(f)?null:a+o*f,f}function Hxe(e,t,n){let r=typeof t==`number`,i=r?null:t,a=i?.attributes,o=r?t:null,{isScaleDriven:s}=e.cache,c=e.cache.compiledFunc;if(s){let t=n?.scale,r=n?.view;o=t==null||r===`3d`?Uxe(e):t}else if(!r)switch(e.inputValueType){case`expression`:{if(n?.arcade==null)return void k2();let t={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},r=n.arcade.arcadeUtils,a=r.getViewInfo(t),s=r.createExecContext(i,a,n.timeZone);if(!c){let t=r.createSyntaxTree(e.valueExpression);c=r.createFunction(t),e.cache.compiledFunc=c}o=r.executeFunction(c,s);break}case`field`:a&&(o=a[e.field]);break;case`unknown`:o=null}if(!T2(o))return null;if(r||!e.normalizationField)return o;let l=a?parseFloat(a[e.normalizationField]):null;return T2(l)&&l!==0?o/l:null}function Uxe(e){let t=null,n=null,r=e.stops;return r?(t=r[0].value,n=r[r.length-1].value):(t=e.minDataValue||0,n=e.maxDataValue||0),(t+n)/2}function I2(e,t,n){let r=`visualVariables`in e?e.visualVariables?.find(e=>e.type===`size`):e;if(!r)return;if(r.declaredClass!==`esri.renderers.visualVariables.SizeVariable`)return void O2(`SizeVariable`);let i=z2(Hxe(r,t,n),r,t,n,r.cache.ipData);return i==null||isNaN(i)?void 0:i}function L2(e,t,n){return e==null?null:w2(e)?I2(e,t,n):T2(e)?e:null}function R2(e,t,n){return T2(n)&&e>n?n:T2(t)&&e<t?t:e}function Wxe(e,t,n,r){let i=L2(t.minSize,n,r)||t.minDataValue;return e==null&&i==null?null:(e??0)+(i??0)}function Gxe(e,t,n){let r=e.stops,i=r?.length&&r[0].size;return i??=e.minSize,L2(i,t,n)}function Kxe(e,t,n,r){let i=L2(t.minSize,n,r);if(e==null)return i;let{minDataValue:a,maxDataValue:o}=t;if(a==null||o==null)return null;let s=(e-a)/(o-a),c=L2(t.maxSize,n,r),l=r?.shape;if(e<=a)return i;if(e>=o)return c;if(i==null||c==null)return null;if(t.scaleBy===`area`&&l){let e=l===`circle`,t=e?j2*(i/2)**2:i*i,n=t+s*((e?j2*(c/2)**2:c*c)-t);return e?2*Math.sqrt(n/j2):Math.sqrt(n)}return i+s*(c-i)}function qxe(e,t,n,r){let i=L2(t.minSize,n,r);if(e==null||i==null)return i;let a=r?.shape,{minDataValue:o}=t;if(o==null)return null;let s=e/o,c=L2(t.maxSize,n,r),l=null;return l=a===`circle`?2*Math.sqrt(s*(i/2)**2):a===`square`||a===`diamond`||a===`image`?Math.sqrt(s*i**2):s*i,R2(l,i,c)}function Jxe(e,t,n,r,i){if(e==null)return null;let[a,o,s]=B2(e,i);if(a===o)return L2(t.stops?.[a].size,n,r);{let e=L2(t.stops?.[a].size,n,r),i=L2(t.stops?.[o].size,n,r);return e==null||i==null?null:e+(i-e)*s}}function Yxe(e,t,n,r){let i=(r?.resolution??1)*X1[t.valueUnit],a=L2(t.minSize,n,r),o=L2(t.maxSize,n,r),{valueRepresentation:s}=t;if(e==null)return a;let c=null;return c=s===`area`?2*Math.sqrt(e/j2)/i:s===`radius`||s===`distance`?2*e/i:e/i,R2(c,a,o)}function Xxe(e){return e}function z2(e,t,n,r,i){switch(t.transformationType){case`additive`:return Wxe(e,t,n,r);case`constant`:return Gxe(t,n,r);case`clamped-linear`:return Kxe(e,t,n,r);case`proportional`:return qxe(e,t,n,r);case`stops`:return Jxe(e,t,n,r,i);case`real-world-size`:return Yxe(e,t,n,r);case`identity`:return Xxe(e);case`unknown`:return null}}function Zxe(e,t,n){let{isScaleDriven:r}=e.cache;if(!(r&&n===`3d`||t))return null;let i={scale:t,view:n},a=L2(e.minSize,A2,i),o=L2(e.maxSize,A2,i);if(a!=null||o!=null){if(a>o){let e=o;o=a,a=e}return{minSize:a,maxSize:o}}}function Qxe(e,t,n){if(!e.visualVariables)return;let r=[],i=[],a=[],o=[],s=[];for(let t of e.visualVariables)switch(t.type){case`color`:i.push(t);break;case`opacity`:a.push(t);break;case`rotation`:s.push(t);break;case`size`:o.push(t)}return i.forEach(e=>{let i=N2(e,t,n);r.push({variable:e,value:i})}),a.forEach(e=>{let i=P2(e,t,n);r.push({variable:e,value:i})}),s.forEach(e=>{let i=F2(e,t,n);r.push({variable:e,value:i})}),o.forEach(e=>{let i=I2(e,t,n);r.push({variable:e,value:i})}),r}function B2(e,t){if(!t)return;let n=0,r=t.length-1;return t.some((t,i)=>e<t?(r=i,!0):(n=i,!1)),[n,r,(e-t[n])/(t[r]-t[n])]}function $xe(e,t,n){let r=[`proportional`,`proportional`,`proportional`];for(let i of e){let e=i.useSymbolValue?`symbol-value`:I2(i,t,n)??`proportional`;switch(i.axis){case`width`:r[0]=e;break;case`depth`:r[1]=e;break;case`height`:r[2]=e;break;case`width-and-depth`:r[0]=e,r[1]=e;break;case`all`:case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:i.axis}}return r}var V2,H2=new xr({width:`width`,depth:`depth`,height:`height`,widthAndDepth:`width-and-depth`,all:`all`}),U2=new xr({unknown:`unknown`,inch:`inches`,foot:`feet`,yard:`yards`,mile:`miles`,"nautical-mile":`nautical-miles`,millimeter:`millimeters`,centimeter:`centimeters`,decimeter:`decimeters`,meter:`meters`,kilometer:`kilometers`});function W2(e){if(e!=null)return typeof e==`string`||typeof e==`number`?zxe(e):e.type===`size`?w2(e)?e:(delete(e={...e}).type,new K2(e)):void 0}function G2(e,t,n){if(typeof e!=`object`)return e;let r=new K2;return r.read(e,n),r}var K2=V2=class extends l2{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type=`size`,this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&M2.test(this.valueExpression)}}set index(e){w2(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),w2(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set(`index`,e)}get inputValueType(){return E2(this)}set maxDataValue(e){e&&this.stops&&(E.getLogger(this).warn(`cannot set maxDataValue when stops is not null.`),e=null),this._set(`maxDataValue`,e)}get maxSize(){return this._get(`maxSize`)}set maxSize(e){e&&this.stops&&(E.getLogger(this).warn(`cannot set maxSize when stops is not null.`),e=null),this._set(`maxSize`,W2(e))}readMaxSize(e,t,n){return G2(e,t,n)}set minDataValue(e){e&&this.stops&&(E.getLogger(this).warn(`cannot set minDataValue when stops is not null.`),e=null),this._set(`minDataValue`,e)}get minSize(){return this._get(`minSize`)}set minSize(e){e&&this.stops&&(E.getLogger(this).warn(`cannot set minSize when stops is not null.`),e=null),this._set(`minSize`,W2(e))}readMinSize(e,t,n){return G2(e,t,n)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize==`object`&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize==`object`&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value):e&&=(E.getLogger(this).warn(`cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null.`),null),this._set(`stops`,e)}get transformationType(){return Vxe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&`$view.scale`}writeValueExpressionWebScene(e,t,n,r){if(e===`$view.scale`){if(r?.messages){let e=this.index,t=typeof e==`string`?e:`visualVariables[${e}]`;r.messages.push(new D(`property:unsupported`,this.type+`VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.`,{instance:this,propertyName:t+`.valueExpression`,context:r}))}}else t[n]=e}readValueUnit(e){return e?U2.read(e):null}clone(){return new V2({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:w2(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:w2(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===`clamped-linear`){let{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===`stops`){let e=this.stops;if(!e)return this;let t=e.map(e=>e.size).reverse(),n=e.length;for(let r=0;r<n;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(e=>e.value||0)}};e([N({readOnly:!0})],K2.prototype,`cache`,null),e([N({type:H2.apiValues,json:{type:H2.jsonValues,origins:{"web-map":{read:!1}},read:H2.read,write:H2.write}})],K2.prototype,`axis`,void 0),e([N()],K2.prototype,`index`,null),e([N({type:String,readOnly:!0})],K2.prototype,`inputValueType`,null),e([N({type:Bxe,json:{write:!0}})],K2.prototype,`legendOptions`,void 0),e([N({type:Number,value:null,json:{write:!0}})],K2.prototype,`maxDataValue`,null),e([N({type:Number,useTypeForAutocast:!1,value:null,json:{write:!0}})],K2.prototype,`maxSize`,null),e([j(`maxSize`)],K2.prototype,`readMaxSize`,null),e([N({type:Number,value:null,json:{write:!0}})],K2.prototype,`minDataValue`,null),e([N({type:Number,useTypeForAutocast:!1,value:null,json:{write:!0}})],K2.prototype,`minSize`,null),e([j(`minSize`)],K2.prototype,`readMinSize`,null),e([N({type:String,json:{write:!0}})],K2.prototype,`normalizationField`,void 0),e([N({readOnly:!0})],K2.prototype,`arcadeRequired`,null),e([N({type:String})],K2.prototype,`scaleBy`,void 0),e([N({type:[S2],value:null,json:{write:!0}})],K2.prototype,`stops`,null),e([N({type:[`outline`],json:{write:!0}})],K2.prototype,`target`,void 0),e([N({type:String,readOnly:!0})],K2.prototype,`transformationType`,null),e([N({type:[`size`],json:{type:[`sizeInfo`]}})],K2.prototype,`type`,void 0),e([N({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],K2.prototype,`useSymbolValue`,void 0),e([N({type:String,json:{write:!0}})],K2.prototype,`valueExpression`,void 0),e([j(`valueExpression`,[`valueExpression`,`expression`])],K2.prototype,`readValueExpression`,null),e([M(`web-scene`,`valueExpression`)],K2.prototype,`writeValueExpressionWebScene`,null),e([N({type:[`radius`,`diameter`,`area`,`width`,`distance`],json:{write:!0}})],K2.prototype,`valueRepresentation`,void 0),e([N({type:U2.apiValues,json:{write:U2.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],K2.prototype,`valueUnit`,void 0),e([j(`valueUnit`)],K2.prototype,`readValueUnit`,null),K2=V2=e([P(`esri.renderers.visualVariables.SizeVariable`)],K2);var eSe={color:m2,size:K2,opacity:v2,rotation:b2},tSe=new xr({colorInfo:`color`,transparencyInfo:`opacity`,rotationInfo:`rotation`,sizeInfo:`size`}),nSe=/^\[([^\]]+)\]$/i,q2=class extends F{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(e=>!!e),e?.length){for(let t of e)switch(t.type){case`color`:this.colorVariables.push(t);break;case`opacity`:this.opacityVariables.push(t);break;case`rotation`:this.rotationVariables.push(t);break;case`size`:this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(e=>!!e.target)&&e.sort((e,t)=>{let n=null;return n=e.target===t.target?0:e.target?1:-1,n});for(let t=0;t<e.length;t++)e[t].index=t;this._set(`visualVariables`,e)}else this._set(`visualVariables`,e)}readVariables(e,t,n){let{rotationExpression:r,rotationType:i}=t,a=r?.match(nSe),o=a?.[1];if(o&&(e||=[],e.push({type:`rotationInfo`,rotationType:i,field:o})),e)return e.map(e=>{let t=tSe.read(e.type),r=eSe[t];r||(E.getLogger(this).warn(`Unknown variable type: ${t}`),n?.messages&&n.messages.push(new zn(`visual-variable:unsupported`,`visualVariable of type '${t}' is not supported`,{definition:e,context:n})));let i=new r;return i.read(e,n),i})}writeVariables(e,t){let n=[];for(let r of e){let e=r.toJSON(t);e&&n.push(e)}return n}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};e([N()],q2.prototype,`visualVariables`,null),q2=e([P(`esri.renderers.visualVariables.VisualVariableFactory`)],q2);var rSe={base:l2,key:`type`,typeMap:{opacity:v2,color:m2,rotation:b2,size:K2}},J2=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this._vvFactory=new q2}set visualVariables(e){this._vvFactory.visualVariables=e,this._set(`visualVariables`,this._vvFactory.visualVariables)}readVisualVariables(e,t,n){return this._vvFactory.readVariables(e,t,n)}writeVisualVariables(e,t,n,r){t[n]=this._vvFactory.writeVariables(e,r)}get arcadeRequiredForVisualVariables(){return this.visualVariables?.some(({arcadeRequired:e})=>e)??!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType(`size`,t).length>0||this.getVisualVariablesForType(`color`,t).length>0||this.getVisualVariablesForType(`opacity`,t).length>0||this.getVisualVariablesForType(`rotation`,t).length>0}getVisualVariablesForType(e,t){return this.visualVariables?.filter(n=>n.type===e&&(typeof t==`string`?n.target===t:!1!==t||!n.target))??[]}async collectVVRequiredFields(e,t){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(let r of n)r&&(r.field&&Ok(e,t,r.field),r.normalizationField&&Ok(e,t,r.normalizationField),r.valueExpression&&(iSe(r.valueExpression,e,t)||await kk(e,t,null,r.valueExpression)))}};return e([N({types:[rSe],value:null,json:{write:!0}})],r.prototype,`visualVariables`,null),e([j(`visualVariables`,[`visualVariables`,`rotationType`,`rotationExpression`])],r.prototype,`readVisualVariables`,null),e([M(`visualVariables`)],r.prototype,`writeVisualVariables`,null),r=e([P(`esri.renderers.mixins.VisualVariablesMixin`)],r),r};function iSe(e,t,n){let r=Lde(e);return r!=null&&(Ok(t,n,r),!0)}var Y2=[252,146,31,255],aSe=[153,153,153,255],X2={type:`esriSMS`,style:`esriSMSCircle`,size:6,color:Y2,outline:{type:`esriSLS`,style:`esriSLSSolid`,width:.75,color:[153,153,153,255]}},Z2={type:`esriSLS`,style:`esriSLSSolid`,width:.75,color:Y2},Q2={type:`esriSFS`,style:`esriSFSSolid`,color:[252,146,31,196],outline:{type:`esriSLS`,style:`esriSLSSolid`,width:.75,color:[255,255,255,191]}},oSe={type:`esriTS`,color:[255,255,255,255],font:{family:`arial-unicode-ms`,size:10,weight:`bold`},horizontalAlignment:`center`,kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:``,xoffset:0,yoffset:0,angle:0},sSe={type:`esriSMS`,style:`esriSMSCircle`,color:[0,0,0,255],outline:null,size:10.5},cSe={type:`esriSLS`,style:`esriSLSSolid`,color:[0,0,0,255],width:1.5},lSe={type:`esriSFS`,style:`esriSFSSolid`,color:[0,0,0,255],outline:null},$2=AF.fromJSON(X2),e4=lF.fromJSON(Z2),t4=DF.fromJSON(Q2),uSe=MF.fromJSON(oSe);function dSe(e){if(e==null)return null;switch(e.type){case`mesh`:return null;case`point`:case`multipoint`:return $2;case`polyline`:return e4;case`polygon`:case`extent`:return t4}return null}var fSe=AF.fromJSON(sSe),pSe=lF.fromJSON(cSe),mSe=DF.fromJSON(lSe),hSe=xF.fromSimpleMarkerSymbol($2),gSe=eF.fromSimpleLineSymbol(e4),_Se=wF.fromSimpleFillSymbol(t4),vSe=new rF({symbolLayers:new W([new JN({material:{color:Y2},edges:new sN({size:Yw(1),color:new J(aSe)})})])}),ySe=new eF({symbolLayers:new W([new uP({material:{color:new J([0,0,0])},size:Yw(1)})])}),bSe=new wF({symbolLayers:new W([new JN({outline:{color:new J([0,0,0]),size:Yw(1)}})])});function xSe(e){if(e==null)return null;switch(e.type){case`mesh`:return vSe;case`point`:case`multipoint`:return hSe;case`polyline`:return gSe;case`polygon`:case`extent`:return _Se}return null}var n4=`#useCIMFallbackSymbology()`,r4={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function i4(e,t=r4){if(!e)return{symbol:null};let{retainId:n=r4.retainId,ignoreDrivers:r=r4.ignoreDrivers,hasLabelingContext:i=r4.hasLabelingContext,retainCIM:a=r4.retainCIM,cimFallbackEnabled:o=r4.cimFallbackEnabled}=t,s=null;if(FF(e))s=e.clone();else if(e.type===`web-style`)s=e.clone();else if(e.type===`cim`){let n=e.data?.symbol?.type;switch(n){case`CIMPointSymbol`:s=a?e.clone():xF.fromCIMSymbol(e);break;case`CIMLineSymbol`:o&&(s=ySe.clone(),t?.logWarning?.(n4,`Unsupported CIM line symbology converted to fallback 3D line symbology`));break;case`CIMPolygonSymbol`:o&&(s=bSe.clone(),t?.logWarning?.(n4,`Unsupported CIM polygon symbology converted to fallback 3D polygon symbology`))}if(!s)return{error:new D(`symbol-conversion:unsupported-cim-symbol`,`CIM symbol of type '${n||`unknown`}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof lF)s=eF.fromSimpleLineSymbol(e);else if(e instanceof AF)s=xF.fromSimpleMarkerSymbol(e);else if(e instanceof vF)s=xF.fromPictureMarkerSymbol(e);else if(e instanceof DF)s=t.geometryType&&t.geometryType===`mesh`?rF.fromSimpleFillSymbol(e):wF.fromSimpleFillSymbol(e);else{if(!(e instanceof MF))return{error:new D(`symbol-conversion:unsupported-2d-symbol`,`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};s=i?ZP.fromTextSymbol(e):xF.fromTextSymbol(e)}return n&&s&&s.type!==`cim`&&(s.id=e.id),!r||s.type===`cim`||s instanceof PF||s.symbolLayers.forEach(e=>e.ignoreDrivers=!0),{symbol:s}}function a4(e,t,n,r){let i=c4(e,{},{context:r,isLabelSymbol:!1});i!=null&&Xe(n,i,t)}function o4(e,t,n,r){let i=c4(e,{},{context:r,isLabelSymbol:!0});i!=null&&(t[n]=i)}function s4(e){return FF(e)||e instanceof PF}function SSe(e){return e?.type===`polygon-3d`||e?.type===`line-3d`}function c4(e,t,n){if(e==null)return null;let{context:r,isLabelSymbol:i}=n,a=r?.origin,o=r?.messages;if(a===`web-scene`&&!s4(e)){let n=i4(e,{retainCIM:!0,hasLabelingContext:i});return n.symbol==null?(o?.push(new D(`symbol:unsupported`,`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:n.error})),null):n.symbol.write(t,r)}return rE(r?.layer)&&SSe(e)?(o?.push(new D(`symbol:unsupported`,`Symbols of type '${e.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:e,context:r})),null):(a===`web-map`||a===`portal-item`&&!rE(r?.layer))&&s4(e)?(o?.push(new D(`symbol:unsupported`,`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function CSe(e,t){return Wpe(e,null,t)}var l4={types:LF,json:{write:{writer:a4},origins:{"web-scene":{types:RF,write:{writer:a4},read:{reader:Kn({types:RF})}}}}},u4=T({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},l4),d4={types:{base:GM,key:`type`,typeMap:{"simple-fill":IF.typeMap[`simple-fill`],"picture-fill":IF.typeMap[`picture-fill`],"polygon-3d":IF.typeMap[`polygon-3d`],cim:IF.typeMap.cim}},json:{write:{writer:a4},origins:{"web-scene":{type:wF,write:{writer:a4}}}}},f4={cast:e=>e==null||typeof e==`string`||typeof e==`number`?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}},p4,m4=p4=class extends J2(a2){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type=`simple`}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(n=>n.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),``)??``}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),``)}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new p4({description:this.description,label:this.label,symbol:C(this.symbol),visualVariables:C(this.visualVariables),authoringInfo:C(this.authoringInfo)})}};e([N({type:String,json:{write:!0}})],m4.prototype,`description`,void 0),e([N({type:String,json:{write:!0}})],m4.prototype,`label`,void 0),e([N(u4)],m4.prototype,`symbol`,void 0),e([A({simple:`simple`})],m4.prototype,`type`,void 0),m4=p4=e([P(`esri.renderers.SimpleRenderer`)],m4);var wSe=new Set([`esri.Color`,`esri.portal.Portal`,`esri.symbols.support.Symbol3DAnchorPosition2D`,`esri.symbols.support.Symbol3DAnchorPosition3D`]);function h4(e){return e instanceof F}function g4(e){return e instanceof W?Object.keys(e.items):h4(e)?an(e).keys():e?Object.keys(e):[]}function _4(e,t){return e instanceof W?e.items[t]:e[t]}function TSe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function v4(e){return e?e.declaredClass:null}function y4(e,t){let n=e.diff;if(n&&typeof n==`function`)return n(e,t);let r=g4(e),i=g4(t);if(r.length===0&&i.length===0)return;if(!r.length||!i.length||TSe(e,t))return{type:`complete`,oldValue:e,newValue:t};let a=i.filter(e=>!r.includes(e)),o=r.filter(e=>!i.includes(e)),s=r.filter(n=>i.includes(n)&&_4(e,n)!==_4(t,n)).concat(a,o).sort(),c=v4(e);if(c&&wSe.has(c)&&s.length)return{type:`complete`,oldValue:e,newValue:t};let l,u=h4(e)&&h4(t);for(let r of s){let i=_4(e,r),a=_4(t,r),o;if((u||typeof i!=`function`&&typeof a!=`function`)&&i!==a&&(i!=null||a!=null)){if(n&&n[r]&&typeof n[r]==`function`)o=n[r]?.(i,a);else if(i instanceof Date&&a instanceof Date){if(i.getTime()===a.getTime())continue;o={type:`complete`,oldValue:i,newValue:a}}else o=typeof i==`object`&&typeof a==`object`&&v4(i)===v4(a)?y4(i,a):{type:`complete`,oldValue:i,newValue:a};o!=null&&(l==null?l={type:`partial`,diff:{[r]:o}}:l.diff[r]=o)}}return l}function ESe(e,t){if(e==null)return!1;let n=t.split(`.`),r=e;for(let e of n){if(r.type===`complete`)return!0;if(r.type!==`partial`)return!1;{let t=r.diff[e];if(!t)return!1;r=t}}return!0}function b4(e,t){if(typeof e!=`function`&&typeof t!=`function`&&(e!=null||t!=null))return e==null||t==null||typeof e==`object`&&typeof t==`object`&&v4(e)!==v4(t)?{type:`complete`,oldValue:e,newValue:t}:y4(e,t)}function x4(e){if(e==null)return!0;switch(e.type){case`complete`:return!1;case`collection`:{let t=e;for(let e of t.added)if(!x4(e))return!1;for(let e of t.removed)if(!x4(e))return!1;for(let e of t.changed)if(!x4(e))return!1;return!0}case`partial`:for(let t in e.diff)if(!x4(e.diff[t]))return!1;return!0}}var S4,DSe=Cr()({ascendingValues:`ascending-values`,descendingValues:`descending-values`}),C4=S4=class extends I(L){static from(e){return Nt(S4,e)}constructor(e){super(e),this.title=null,this.order=null}};e([N({type:String,json:{write:!0}})],C4.prototype,`title`,void 0),e([A(DSe)],C4.prototype,`order`,void 0),C4=S4=e([P(`esri.renderers.support.RendererLegendOptions`)],C4);var w4=C4,T4=class extends I(L){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};e([N(f4)],T4.prototype,`value`,void 0),e([N(f4)],T4.prototype,`value2`,void 0),e([N(f4)],T4.prototype,`value3`,void 0),T4=e([P(`esri.renderers.support.UniqueValue`)],T4);var E4=class extends I(L){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null}get values(){return this._get(`values`)}set values(e){if(e!=null){let t=typeof(e=Array.isArray(e)?e:[e])[0];e=t===`string`||t===`number`?e.map(e=>new T4({value:e})):t===`object`?e[0]instanceof T4?e:e.map(e=>new T4(e)):null}this._set(`values`,e)}};e([N({type:String,json:{write:!0}})],E4.prototype,`description`,void 0),e([N({type:String,json:{write:!0}})],E4.prototype,`label`,void 0),e([N(l4)],E4.prototype,`symbol`,void 0),e([N({json:{type:[[String]],read:{reader:e=>e?e.map(e=>new T4({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(e,t)=>{let n=[];for(let t of e){let e=[t.value,t.value2,t.value3].filter(ge).map(e=>e.toString());n.push(e)}t.values=n}}}})],E4.prototype,`values`,null),E4=e([P(`esri.renderers.support.UniqueValueClass`)],E4);var D4=class extends I(L){constructor(e){super(e),this.heading=null,this.classes=null}};e([N({type:String,json:{write:!0}})],D4.prototype,`heading`,void 0),e([N({type:[E4],json:{write:{isRequired:!0}}})],D4.prototype,`classes`,void 0),D4=e([P(`esri.renderers.support.UniqueValueGroup`)],D4);var O4,k4=O4=class extends L{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new O4({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){let e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};e([N({type:String,json:{write:!0}})],k4.prototype,`description`,void 0),e([N({type:String,json:{write:!0}})],k4.prototype,`label`,void 0),e([N(u4)],k4.prototype,`symbol`,void 0),e([N(f4)],k4.prototype,`value`,void 0),k4=O4=e([P(`esri.renderers.support.UniqueValueInfo`)],k4);var A4=new Map;async function OSe(e,t){try{return{data:(await N4(e,t)).data,baseUrl:Ns(e),styleUrl:e}}catch(e){return Ei(e),null}}function kSe(e,t,n){let r=t.portal==null?q.getDefault():t.portal,i,a=`${r.url} - ${r.user?.username} - ${e}`,o=A4.get(a);if(o)return o;let s=ASe(e,r,n).then(e=>(i=e,e.fetchData())).then(t=>({data:t,baseUrl:i.itemUrl??``,styleName:e}));return A4.set(a,s),s}function ASe(e,t,n){return t.load(n).then(()=>{let r=new xT({disableExtraQuery:!0,query:`owner:${P4} AND type:${F4} AND typekeywords:"${e}"`});return t.queryItems(r,n)}).then(({results:t})=>{let r=null,i=e.toLowerCase();if(t&&Array.isArray(t)){for(let e of t)if(e.typeKeywords?.some(e=>e.toLowerCase()===i)&&e.type===F4&&e.owner===P4){r=e;break}}if(!r)throw new D(`symbolstyleutils:style-not-found`,`The style '${e}' could not be found`,{styleName:e});return r.load(n)})}function j4(e,t,n){return e?.styleUrl==null?e?.styleName==null?Promise.reject(new D(`symbolstyleutils:style-url-and-name-missing`,`Either styleUrl or styleName is required to resolve a style`)):kSe(e.styleName,t,n):OSe(e.styleUrl,n)}function jSe(e){return e===null||e.type===`CIMSymbolReference`?e:{type:`CIMSymbolReference`,symbol:e}}function MSe(e,t){for(let n of t)switch(n){case`cim`:if(e.cimRef)return{format:n,url:encodeURI(e.cimRef)};break;case`web-gltf-basisu`:{let t=M4(e,`gltf_basisu`);if(t)return{format:n,url:t};break}case`web-gltf`:{let t=M4(e,`gltf`);if(t)return{format:n,url:t};break}case`web`:{let t=M4(e,`gltf`);if(t)return{format:`web-gltf`,url:t};if(e.webRef)return{format:n,url:encodeURI(e.webRef)};break}}}function M4(e,t){if(!c(`enable-feature:force-wosr`))return e.formatInfos?.find(e=>e.type===t)?.href}function N4(e,t){let n={responseType:`json`,query:{f:`json`},...t};return Qc(gs(e),n)}var P4=`esri_en`,F4=`Style`,NSe=`https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json`,I4,L4=`uvInfos-watcher`,R4=`uvGroups-watcher`,PSe=`,`,FSe=Lt(k4);function ISe(e){let{field1:t,field2:n,field3:r,fieldDelimiter:i,uniqueValueInfos:a,valueExpression:o}=e,s=!(!t||!n);return[{classes:(a??[]).map(e=>{let{symbol:a,label:c,value:l,description:u}=e,[d,f,p]=s?l?.toString()?.split(i||``)||[]:[l],m=[];return(t||o)&&m.push(d),n&&m.push(f),r&&m.push(p),{symbol:a,label:c,values:[m],description:u}})}]}function z4(e){return e!=null&&e!==``&&(typeof e!=`string`||e.trim()!==``&&e.toLowerCase()!==`<null>`)||(e=null),e+``}var B4=I4=class extends J2(a2){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type=`unique-value`,this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:`complete`,oldValue:e,newValue:t};let n=!1,r={type:`collection`,added:[],removed:[],changed:[],unchanged:[]};for(let i=0;i<t.length;i++){let a=e.find(e=>e.value===t[i].value);a?b4(a,t[i])?(r.changed.push({type:`complete`,oldValue:a,newValue:t[i]}),n=!0):r.unchanged.push({oldValue:a,newValue:t[i]}):(r.added.push(t[i]),n=!0)}for(let i=0;i<e.length;i++)t.find(t=>t.value===e[i].value)||(r.removed.push(e[i]),n=!0);return n?r:void 0}},this._set(`uniqueValueInfos`,[]),this._set(`uniqueValueGroups`,[])}get _cache(){return{compiledFunc:null}}set field(e){this._set(`field`,e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e==`function`?e:Ct(e)}writeField(e,t,n,r){typeof e==`string`?t[n]=e:r?.messages?r.messages.push(new D(`property:unsupported`,`UniqueValueRenderer.field set to a function cannot be written to JSON`)):E.getLogger(this).error(`.field: cannot write field to JSON since it's not a string value`)}set field2(e){this._set(`field2`,e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set(`field3`,e),this._updateUniqueValues()}set valueExpression(e){this._set(`valueExpression`,e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set(`defaultSymbol`,e)}set fieldDelimiter(e){this._set(`fieldDelimiter`,e),this._updateUniqueValues()}readPortal(e,t,n){return n.portal||q.getDefault()}readStyleOrigin(e,t,n){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){let e=pc(t.styleUrl,n);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,n,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=mc(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?E.getLogger(this).error(`#uniqueValueGroups=`,`Cannot modify unique value groups of a UniqueValueRenderer created from a web style`):(this._set(`uniqueValueGroups`,e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?E.getLogger(this).error(`#uniqueValueInfos=`,`Cannot modify unique value infos of a UniqueValueRenderer created from a web style`):(this._set(`uniqueValueInfos`,e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void E.getLogger(this).error(`#addUniqueValueInfo()`,`Cannot modify unique value infos of a UniqueValueRenderer created from a web style`);let n;n=typeof e==`object`?FSe(e):new k4({value:e,symbol:zF(t)}),this.uniqueValueInfos?.push(n),this._valueInfoMap[z4(n.value)]=n,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void E.getLogger(this).error(`#removeUniqueValueInfo()`,`Cannot modify unique value infos of a UniqueValueRenderer created from a web style`);let t=this.uniqueValueInfos;if(t)for(let n=0;n<t.length;n++){let r=t[n];if(String(r.value)===String(e)){delete this._valueInfoMap[z4(e)],t.splice(n,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let n=t;return this.valueExpression&&t?.arcade==null&&(n={...n,arcade:await bk()}),this._getUniqueValueInfo(e,n)}getSymbol(e,t){return this.valueExpression&&t?.arcade==null?void E.getLogger(this).error(`#getSymbol()`,`Please use getSymbolAsync if valueExpression is used`):this._getUniqueValueInfo(e,t)?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&n?.arcade==null){let e=await bk(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),n={...n,arcade:e}}return this._getUniqueValueInfo(e,n)?.symbol||this.defaultSymbol}get symbols(){let e=[];if(this._isInfosSource)for(let t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);else for(let t of this.uniqueValueGroups??[])for(let n of t.classes??[])n.symbol&&e.push(n.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),``)??``}getMeshHash(){let e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=this.uniqueValueInfos?.reduce((e,t)=>e+t.getMeshHash(),``);return`${e}.${t}.${n}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){let e=new I4({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:C(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:C(this.visualVariables),legendOptions:C(this.legendOptions),authoringInfo:C(this.authoringInfo),backgroundFillSymbol:C(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set(`portal`,this.portal);let t=C(this.uniqueValueInfos),n=C(this.uniqueValueGroups);return this.styleOrigin&&(e._set(`styleOrigin`,Object.freeze(C(this.styleOrigin))),Object.freeze(t),Object.freeze(n)),e._set(`uniqueValueInfos`,t),e._updateValueInfoMap(),e._set(`uniqueValueGroups`,n),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){let n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){let n=[...this.symbols.map(n=>n.collectRequiredFields(e,t)),kk(e,t,null,this.valueExpression)];Ok(e,t,this.field),Ok(e,t,this.field2),Ok(e,t,this.field3),await Promise.all(n)}populateFromStyle(){return j4(this.styleOrigin,{portal:this.portal}).then(e=>{let t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach(n=>{let r=new PF({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:n.name});this.defaultSymbol||n.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);let i=new k4({value:n.name,symbol:r});t.push(i),this._valueInfoMap[z4(n.name)]=i}),this._set(`uniqueValueInfos`,Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set(`fieldDelimiter`,PSe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};let{uniqueValueInfos:e}=this;if(e)for(let t of e)this._valueInfoMap[z4(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(L4);let{uniqueValueInfos:e}=this;if(e){let t=[];for(let n of e)t.push(G(()=>({symbol:n.symbol,value:n.value,label:n.label,description:n.description}),(e,t)=>{e!==t&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,L4)}}_watchUniqueValueGroups(){this.removeHandles(R4);let{uniqueValueGroups:e}=this;if(e){let t=[];for(let n of e){t.push(G(()=>({classes:n.classes}),(e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(let e of n.classes??[])t.push(G(()=>({symbol:e.symbol,values:e.values,label:e.label,description:e.description}),(e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,R4)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set(`uniqueValueInfos`,null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();let e=[],{field:t,field2:n,field3:r,fieldDelimiter:i,uniqueValueGroups:a,valueExpression:o}=this;if(!t&&!o)return this._set(`uniqueValueInfos`,e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();let s=!(!t||!n);for(let t of a)for(let a of t.classes??[]){let{symbol:t,label:o,values:c,description:l}=a;for(let a of c??[]){let{value:c,value2:u,value3:d}=a,f=[c];n&&f.push(u),r&&f.push(d);let p=s?f.join(i||``):f[0]??void 0;e.push(new k4({symbol:t,label:o,value:p,description:l}))}}this._set(`uniqueValueInfos`,e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set(`uniqueValueGroups`,null),void this._watchUniqueValueGroups();let{field:t,field2:n,valueExpression:r,fieldDelimiter:i,uniqueValueInfos:a}=this;if(!t&&!r||!a.length)return this._set(`uniqueValueGroups`,[]),void this._watchUniqueValueGroups();let o=!(!t||!n),s=a.map(e=>{let{symbol:t,label:n,value:r,description:a}=e,[s,c,l]=o?r?.toString()?.split(i||``)||[]:[r];return new E4({symbol:t,label:n,description:a,values:[new T4({value:s,value2:c,value3:l})]})}),c=[new D4({classes:s})];e&&Object.freeze(c),this._set(`uniqueValueGroups`,c),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){let{viewingMode:n,scale:r,spatialReference:i,arcade:a,timeZone:o}=t??{},s=this._cache.compiledFunc,c=a.arcadeUtils;if(!s){let e=c.createSyntaxTree(this.valueExpression);s=c.createFunction(e),this._cache.compiledFunc=s}let l=c.executeFunction(s,c.createExecContext(e,c.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._valueInfoMap[z4(l)]}_getUnqiueValueInfoForFields(e){let t=this.field,n=e.attributes,r;if(this.field2){let e=this.field2,i=this.field3,a=[];t&&a.push(n[t]),e&&a.push(n[e]),i&&a.push(n[i]),r=a.join(this.fieldDelimiter||``)}else t&&(r=n[t]);return this._valueInfoMap[z4(r)]}static fromPortalStyle(e,t){let n=new I4(t?.properties);n._set(`styleOrigin`,Object.freeze({styleName:e})),n._set(`portal`,t?.portal||q.getDefault());let r=n.populateFromStyle();return r.catch(t=>{E.getLogger(this.prototype).error(`#fromPortalStyle('${e}'[, ...])`,`Failed to create unique value renderer from style name`,t)}),r}static fromStyleUrl(e,t){let n=new I4(t?.properties);n._set(`styleOrigin`,Object.freeze({styleUrl:e}));let r=n.populateFromStyle();return r.catch(t=>{E.getLogger(this.prototype).error(`#fromStyleUrl('${e}'[, ...])`,`Failed to create unique value renderer from style URL`,t)}),r}};e([N({readOnly:!0})],B4.prototype,`_cache`,null),e([A({uniqueValue:`unique-value`})],B4.prototype,`type`,void 0),e([N(d4)],B4.prototype,`backgroundFillSymbol`,void 0),e([N({value:null,json:{type:String,read:{source:`field1`},write:{target:`field1`}}})],B4.prototype,`field`,null),e([Tr(`field`)],B4.prototype,`castField`,null),e([M(`field`)],B4.prototype,`writeField`,null),e([N({type:String,value:null,json:{write:!0}})],B4.prototype,`field2`,null),e([N({type:String,value:null,json:{write:!0}})],B4.prototype,`field3`,null),e([N({type:Boolean,json:{name:`drawInClassOrder`,default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],B4.prototype,`orderByClassesEnabled`,void 0),e([N({type:String,value:null,json:{write:!0}})],B4.prototype,`valueExpression`,null),e([N({type:String,json:{write:!0}})],B4.prototype,`valueExpressionTitle`,void 0),e([N({type:w4,json:{write:!0}})],B4.prototype,`legendOptions`,void 0),e([N({type:String,json:{write:!0}})],B4.prototype,`defaultLabel`,void 0),e([N(T({...l4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],B4.prototype,`defaultSymbol`,null),e([N({type:String,value:null,json:{write:!0}})],B4.prototype,`fieldDelimiter`,null),e([N({type:q,readOnly:!0})],B4.prototype,`portal`,void 0),e([j(`portal`,[`styleName`])],B4.prototype,`readPortal`,null),e([N({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],B4.prototype,`styleOrigin`,void 0),e([j(`styleOrigin`,[`styleName`,`styleUrl`])],B4.prototype,`readStyleOrigin`,null),e([M(`styleOrigin`,{styleName:{type:String},styleUrl:{type:String}})],B4.prototype,`writeStyleOrigin`,null),e([N({type:[D4],json:{read:{source:[`uniqueValueGroups`,`uniqueValueInfos`],reader:(e,t,n)=>(t.uniqueValueGroups||ISe(t)).map(e=>D4.fromJSON(e,n))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],B4.prototype,`uniqueValueGroups`,null),e([N({type:[k4],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],B4.prototype,`uniqueValueInfos`,null),B4=I4=e([P(`esri.renderers.UniqueValueRenderer`)],B4);var V4,H4=class extends L{static{V4=this}constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new V4(C({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};e([N({type:[String],json:{write:!0}})],H4.prototype,`attachmentTypes`,void 0),e([N({type:String,json:{read:{source:`attachmentsDefinitionExpression`},write:{target:`attachmentsDefinitionExpression`}}})],H4.prototype,`attachmentsWhere`,void 0),e([N({type:Boolean,json:{write:!0}})],H4.prototype,`cacheHint`,void 0),e([N({type:[String],json:{write:!0}})],H4.prototype,`keywords`,void 0),e([N({type:[String],json:{write:!0}})],H4.prototype,`globalIds`,void 0),e([N({json:{write:!0}})],H4.prototype,`name`,void 0),e([N({type:Number,json:{read:{source:`resultRecordCount`}}})],H4.prototype,`num`,void 0),e([N({type:[Number],json:{write:!0}})],H4.prototype,`objectIds`,void 0),e([N({type:[String],json:{write:!0}})],H4.prototype,`orderByFields`,void 0),e([N({type:Boolean,json:{default:!1,write:!0}})],H4.prototype,`returnMetadata`,void 0),e([N({type:[Number],json:{write:!0}})],H4.prototype,`size`,void 0),e([N({type:Number,json:{read:{source:`resultOffset`}}})],H4.prototype,`start`,void 0),e([M(`start`),M(`num`)],H4.prototype,`writeStart`,null),e([N({type:String,json:{read:{source:`definitionExpression`},write:{target:`definitionExpression`}}})],H4.prototype,`where`,void 0),H4=V4=e([P(`esri.rest.support.AttachmentQuery`)],H4),H4.from=Lt(H4);var U4=Cr()({naturalLog:`natural-log`,squareRoot:`square-root`,percentOfTotal:`percent-of-total`,log:`log`,field:`field`}),W4=`percent-of-total`,G4=`field`,LSe=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get(`normalizationType`),t=!!this.normalizationField,n=this.normalizationTotal!=null;return t||n?(e=t&&G4||n&&W4||null,t&&n&&E.getLogger(this).warn(`warning: both normalizationField and normalizationTotal are set!`)):e!==G4&&e!==W4||(e=null),e}set normalizationType(e){this._set(`normalizationType`,e)}};return e([N({type:String,json:{name:`parameters.normalizationField`,write:!0}})],r.prototype,`normalizationField`,void 0),e([N({type:Number,json:{name:`parameters.normalizationMaxValue`,write:!0}})],r.prototype,`normalizationMaxValue`,void 0),e([N({type:Number,json:{name:`parameters.normalizationMinValue`,write:!0}})],r.prototype,`normalizationMinValue`,void 0),e([N({type:Number,json:{name:`parameters.normalizationTotal`,write:!0}})],r.prototype,`normalizationTotal`,void 0),e([A(U4,{name:`parameters.normalizationType`})],r.prototype,`normalizationType`,null),r=e([P(`esri.rest.support.NormalizationBinParametersMixin`)],r),r},K4,q4=class extends L{static{K4=this}constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression=`1=1`)}clone(){return new K4(C({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};e([N({type:Boolean,json:{write:!0}})],q4.prototype,`cacheHint`,void 0),e([N({type:CI,json:{write:!0}})],q4.prototype,`dynamicDataSource`,void 0),e([N({type:String,json:{write:!0}})],q4.prototype,`gdbVersion`,void 0),e([N({type:Number,json:{write:!0}})],q4.prototype,`geometryPrecision`,void 0),e([N({type:Date})],q4.prototype,`historicMoment`,void 0),e([M(`historicMoment`)],q4.prototype,`_writeHistoricMoment`,null),e([N({type:Number,json:{write:!0}})],q4.prototype,`maxAllowableOffset`,void 0),e([N({json:{write:!0}})],q4.prototype,`objectIds`,void 0),e([N({type:[String],json:{write:!0}})],q4.prototype,`orderByFields`,void 0),e([N({type:[String],json:{write:!0}})],q4.prototype,`outFields`,void 0),e([N({type:H,json:{read:{source:`outSR`},write:{target:`outSR`}}})],q4.prototype,`outSpatialReference`,void 0),e([N({json:{write:!0}})],q4.prototype,`relationshipId`,void 0),e([N({type:Number,json:{read:{source:`resultOffset`}}})],q4.prototype,`start`,void 0),e([M(`start`),M(`num`)],q4.prototype,`writeStart`,null),e([N({type:Number,json:{read:{source:`resultRecordCount`}}})],q4.prototype,`num`,void 0),e([N({json:{write:!0}})],q4.prototype,`returnGeometry`,void 0),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],q4.prototype,`returnM`,void 0),e([N({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],q4.prototype,`returnZ`,void 0),e([N({type:String,json:{read:{source:`definitionExpression`},write:{target:`definitionExpression`}}})],q4.prototype,`where`,void 0),q4=K4=e([P(`esri.rest.support.RelationshipQuery`)],q4),q4.from=Lt(q4);var J4=new xr({esriGeometryPoint:`point`,esriGeometryMultipoint:`multipoint`,esriGeometryPolyline:`polyline`,esriGeometryPolygon:`polygon`,esriGeometryMultiPatch:`multipatch`});async function Y4(e,t,n,r){let i=await h3(e);if(await X4(e,t,r),!i.addAttachment)throw new D(r,`Layer source does not support addAttachment capability`);return i.addAttachment(t,n)}function X4(e,t,n){let{attributes:r}=t,{objectIdField:i}=e;return e.capabilities?.data?.supportsAttachment?t?r?i&&r[i]?Promise.resolve():Promise.reject(new D(n,`feature is missing the identifying attribute ${i}`)):Promise.reject(new D(n,`'attributes' are required on a feature to query attachments`)):Promise.reject(new D(n,`A feature is required to add/delete/update attachments`)):Promise.reject(new D(n,`this layer doesn't support attachments`))}async function Z4(e,t,n,r,i){let a=await h3(e);if(await X4(e,t,i),!a.updateAttachment)throw new D(i,`Layer source does not support updateAttachment capability`);return a.updateAttachment(t,n,r)}async function Q4(e,t,n){let{applyEdits:r}=await R(async()=>{let{applyEdits:e}=await import(`./editingSupport-CJyHeYaa.js`);return{applyEdits:e}},__vite__mapDeps([431,432])),i=await e.load(),a=n;return i.type===`feature`&&i.infoFor3D&&t.deleteFeatures!=null&&i.globalIdField!=null&&(a={...a,globalIdToObjectId:await S3(i,t.deleteFeatures,i.globalIdField)}),r(i,i.source,t,n)}async function RSe(e,t,n){let{uploadAssets:r}=await R(async()=>{let{uploadAssets:e}=await import(`./editingSupport-CJyHeYaa.js`);return{uploadAssets:e}},__vite__mapDeps([431,432])),i=await e.load();return r(i,i.source,t,n)}async function $4(e,t,n,r){let i=await h3(e);if(await X4(e,t,r),!i.deleteAttachments)throw new D(r,`Layer source does not support deleteAttachments capability`);return i.deleteAttachments(t,n)}async function e3(e,t,n){let r=(await e.load({signal:t?.signal})).source;if(!r.fetchRecomputedExtents)throw new D(n,`Layer source does not support fetchUpdates capability`);return r.fetchRecomputedExtents(t)}async function t3(e,t,n,r){let i=H4.from(t);await e.load();let a=e.source,o=e.capabilities;if(!o?.data?.supportsAttachment)throw new D(r,`this layer doesn't support attachments`);let{attachmentTypes:s,objectIds:c,globalIds:l,num:u,size:d,start:f,where:p}=i;if(!o?.operations?.supportsQueryAttachments&&(s?.length>0||l?.length>0||d?.length>0||u||f||p))throw new D(r,`when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported`,i);if(!(c?.length||l?.length||p))throw new D(r,`'objectIds', 'globalIds', or 'where' are required to perform attachment query`,i);if(!a.queryAttachments)throw new D(r,`Layer source does not support queryAttachments capability`,i);return!o?.attachment?.supportsOrderByFields&&i.orderByFields?.length&&(i=i.clone(),i.orderByFields=null),a.queryAttachments(i)}async function n3(e,t,n,r){let i=await h3(e);if(!i.queryObjectIds)throw new D(r,`Layer source does not support queryObjectIds capability`);return i.queryObjectIds(Y.from(t)??e.createQuery(),n)}async function r3(e,t,n,r){let i=await h3(e);if(!i.queryFeatureCount)throw new D(r,`Layer source does not support queryFeatureCount capability`);return i.queryFeatureCount(Y.from(t)??e.createQuery(),n)}async function i3(e,t,n,r){let i=await h3(e);if(!i.queryExtent)throw new D(r,`Layer source does not support queryExtent capability`);return i.queryExtent(Y.from(t)??e.createQuery(),n)}async function a3(e,t,n,r){let i=await h3(e);if(!i.queryRelatedFeatures)throw new D(r,`Layer source does not support queryRelatedFeatures capability`);return i.queryRelatedFeatures(q4.from(t),n)}async function o3(e,t,n,r){let i=await h3(e);if(!i.queryRelatedFeaturesCount)throw new D(r,`Layer source does not support queryRelatedFeaturesCount capability`);return i.queryRelatedFeaturesCount(q4.from(t),n)}async function s3(e){let t=e.source;if(t?.refresh)try{let{dataChanged:n,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:`service`,url:e.parsedUrl})),n)return!0}catch{}if(e.definitionExpression)try{return(await ck(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function c3(e){let t=new Y;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,t.outFields=[`*`],t.multipatchOption=e.geometryType===`multipatch`?`xyFootprint`:null;let n=e.capabilities?.query;n&&(t.compactGeometryEnabled=n.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference);let r=e.capabilities?.data;r?.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r?.supportsM&&e.returnM!=null&&(t.returnM=e.returnM);let{timeOffset:i,timeExtent:a}=e;return t.timeExtent=i!=null&&a!=null?a.offset(-i.value,i.unit):a||null,t}function l3(e){let{globalIdField:t,fields:n}=e;if(t)return t;if(n){for(let e of n)if(e.type===`esriFieldTypeGlobalID`)return e.name}}function u3(e){let{objectIdField:t,fields:n}=e;if(t)return t;if(n){for(let e of n)if(e.type===`esriFieldTypeOID`)return e.name}}function zSe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty(`capabilities`)||e.hasOwnProperty(`drawingInfo`)||e.hasOwnProperty(`hasAttachments`)||e.hasOwnProperty(`htmlPopupType`)||e.hasOwnProperty(`relationships`)||e.hasOwnProperty(`timeInfo`)||e.hasOwnProperty(`typeIdField`)||e.hasOwnProperty(`types`)?10:9.3}function d3(e,t,n,r){let i=n?.feature,a=!!e.subtypes?.length;if(a&&!n?.excludeImpliedDomains){let n=p3(e,t);if(n)return n}let o=a&&f3(e,i);if(o){let e=o?.domains?.[t];return e?.type===`inherited`?r:e}let s=C3(e.types,e.typeIdField,i);if(s){let e=s.domains&&s.domains[t];if(e&&e?.type!==`inherited`)return e}if(r)return r;if(!n?.excludeImpliedDomains){let n=BSe(e,t);if(n)return n}return null}function f3(e,t){let{subtypes:n,subtypeField:r}=e;if(!t?.attributes||!n?.length||!r)return null;let i=t.attributes[r];return i==null?null:n.find(e=>e.code===i)}function p3(e,t){let{fieldsIndex:n,subtypeField:r}=e,{name:i,type:a}=n.get(t)??{};if(!i)return null;if((r&&n.get(r)?.name)===i&&e.subtypes?.length){let t=e.subtypes.map(e=>new YF({code:m3(e.code,a),name:e.name}));if(t?.length)return new QF({codedValues:t})}return null}function BSe(e,t){let{fieldsIndex:n}=e,{name:r,type:i}=n.get(t)??{};if(!r)return null;if((`typeIdField`in e?n.get(e.typeIdField)?.name:null)===r&&`types`in e&&e.types?.length){let t=e.types.map(e=>new YF({code:m3(e.id,i),name:e.name}));return new QF({codedValues:t})}return null}function m3(e,t){return t?Wk({type:t})&&typeof e==`number`?`${e}`:vfe({type:t})&&typeof e==`string`?Number.parseInt(e,10):e:e}async function h3(e){return(await e.load()).source}async function VSe(e,t){if(!rc)return;let n=rc.findCredential(e);if(n)return n.userId;let r;try{let n=await aE(e,t);n&&(r=await rc.checkSignInStatus(`${n}/sharing`))}catch{}return r?r.userId:null}async function g3(e,t){if(!rc||rc.findCredential(e))return;let n;try{let r=await aE(e,t);r&&(n=await rc.checkSignInStatus(`${r}/sharing`))}catch{}if(n)try{let n=t==null?null:t.signal;await rc.getCredential(e,{signal:n})}catch{}}async function _3(e,t,n){let r=e.parsedUrl?.path;r&&e.authenticationTriggerEvent===t&&await g3(r,n)}async function HSe(e){let t=e.parsedUrl?.path;t&&USe(e)&&await g3(t)}function USe(e){return WSe(e)&&(`serviceDefinitionExpression`in e&&v3(e.serviceDefinitionExpression)||`definitionExpression`in e&&v3(e.definitionExpression))}function WSe(e){return!(!oE(e)||!e.capabilities?.query.supportsCurrentUser)}function v3(e){return!!e?.toLowerCase().includes(`current_user`)}function y3(e){return!w3(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}var b3=Kn({types:LF});function x3(e,t){if(e.defaultSymbol)return e.types?.length?new B4({defaultSymbol:b3(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(e=>({id:e.id,symbol:b3(e.symbol,e,t)}))}):new m4({symbol:b3(e.defaultSymbol,e,t)})}function GSe(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;let n=e.editingInfo?.lastEditDate?.getTime();return n==null||(t*=1e3,Date.now()-n<t)}async function S3(e,t,n){if(t==null)return null;let r=[],{objectIdField:i}=e;if(t.forEach(e=>{let t=null;if(`attributes`in e){let{attributes:r}=e;t={globalId:r[n],objectId:r[i]!=null&&r[i]!==-1?r[i]:null}}else t={globalId:e.globalId,objectId:e.objectId!=null&&e.objectId!==-1?e.objectId:null};t.globalId!=null&&(t.objectId!=null&&t.objectId!==-1||r.push(t.globalId))}),r.length===0)return null;let a=e.createQuery();a.where=r.map(e=>`${n}='${e}'`).join(` OR `),a.returnGeometry=!1,a.outFields=[i,n],a.cacheHint=!1;let o=await zw(A0(e,a));if(!o.ok)return null;let s=new Map,c=o.value.features;for(let e of c){let t=e.attributes[n],r=e.attributes[i];t!=null&&r!=null&&r!==-1&&s.set(YE(t),r)}return s}function C3(e,t,n){if(!t||!n||!e)return null;let r=n.getAttribute(t);return r==null?null:e.find(e=>{let{id:t}=e;return t!=null&&t.toString()===r.toString()})??null}function w3(e){return e.sourceJSON?.isMultiServicesView||KSe(e)}function KSe(e){return!!e.sourceJSON?.capabilities?.toLowerCase().split(`,`).map(e=>e.trim()).includes(`map`)}function T3(e,t,n){let r=t?.queryAttributeBins;if(!t?.operations?.supportsQueryBins||!r)throw new D(n,`Layer source does not support binning`);switch(e.binParameters?.type){case`auto-interval`:if(!r.supportsAutoInterval)throw new D(n,`Layer source does not support auto-interval binning`);if(e.binParameters.normalizationType&&(!r.supportsNormalization||!E3(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new D(n,`Layer source does not support normalization binning`);break;case`date`:if(!r.supportsDate)throw new D(n,`Layer source does not support date binning`);if(e.binParameters.snapToData&&!r.supportsSnapToData)throw new D(n,`Layer source does not support snapToData binning`);if(e.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new D(n,`Layer source does not support returnFullIntervalBin binning`);break;case`fixed-boundaries`:if(!r.supportsFixedBoundaries)throw new D(n,`Layer source does not support fixed-boundaries binning`);break;case`fixed-interval`:if(!r.supportsFixedInterval)throw new D(n,`Layer source does not support fixed-interval binning`);if(e.binParameters.normalizationType&&(!r.supportsNormalization||!E3(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new D(n,`Layer source does not support normalization binning`)}if(e.binParameters?.stackBy&&!r.supportsStackBy)throw new D(n,`Layer source does not support stackBy binning`);if(e.binParameters?.splitBy&&!r.supportsSplitBy)throw new D(n,`Layer source does not support splitBy binning`);if(e.binParameters?.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new D(n,`Layer source does not support firstDayOfWeek binning`);let i=r?.supportedStatistics;if(e.outStatistics&&i){let t=new Map([[`count`,`count`],[`sum`,`sum`],[`min`,`min`],[`max`,`max`],[`avg`,`avg`],[`stddev`,`stddev`],[`var`,`var`],[`percentile-continuous`,`percentileContinuous`],[`percentile-discrete`,`percentileDiscrete`],[`centroid-aggregate`,`centroid`],[`convex-hull-aggregate`,`convexHull`],[`envelope-aggregate`,`envelope`]]);for(let{statisticType:r}of e.outStatistics){let e=t.get(r);if(e&&!i[e])throw new D(n,`Layer source does not support ${r} statistic type`)}}}function E3(e,t){return e!=null&&!!t?.[U4.toJSON(e)]}var D3=class extends I(L){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([N({type:String,json:{read:{source:`shapeAreaFieldName`}}})],D3.prototype,`shapeAreaField`,void 0),e([N({type:String,json:{read:{source:`shapeLengthFieldName`}}})],D3.prototype,`shapeLengthField`,void 0),e([N({type:String,json:{read:e=>Bu.read(e)||Vu.read(e)}})],D3.prototype,`units`,void 0),D3=e([P(`esri.layers.support.GeometryFieldsInfo`)],D3);var O3,k3=O3=class extends L{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new W}clone(){return new O3({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};e([N({type:String,json:{write:{isRequired:!0}}})],k3.prototype,`floorField`,void 0),e([N({json:{read:!1,write:!1}})],k3.prototype,`viewAllMode`,void 0),e([N({json:{read:!1,write:!1}})],k3.prototype,`viewAllLevelIds`,void 0),k3=O3=e([P(`esri.layers.support.LayerFloorInfo`)],k3);function A3(e){let{nonStandardUrlAllowed:t=!1,separator:n}=e??{},r=C(_0),i=r.json?.write;return typeof i==`object`&&i&&(i.writer=function(e,t,r,i){fne(this,e,n,t,i)}),{...r,set:function(e){if(e==null)return void this._set(`url`,e);let n=dne({layer:this,url:e,nonStandardUrlAllowed:t,logger:E.getLogger(this)});this._set(`url`,n.url),n.layerId!=null&&this._set(`layerId`,n.layerId)}}}function j3(e,t){let{separator:n}=t??{},r=Qo(e.url);return r!=null&&(e.dynamicDataSource==null?e.layerId!=null&&(r.path=_s(r.path,n??``,e.layerId.toString())):r.path=_s(r.path,`dynamicLayer`)),r}var M3=new xr({esriRelCardinalityOneToOne:`one-to-one`,esriRelCardinalityOneToMany:`one-to-many`,esriRelCardinalityManyToMany:`many-to-many`}),N3=new xr({esriRelRoleOrigin:`origin`,esriRelRoleDestination:`destination`}),P3=class extends I(L){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};e([N({json:{read:M3.read,write:M3.write}})],P3.prototype,`cardinality`,void 0),e([N({json:{name:`catalogID`}})],P3.prototype,`catalogId`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`composite`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`id`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`keyField`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`keyFieldInRelationshipTable`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`name`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`relatedTableId`,void 0),e([N({json:{read:!0,write:!0}})],P3.prototype,`relationshipTableId`,void 0),e([N({json:{read:N3.read,write:N3.write}})],P3.prototype,`role`,void 0),P3=e([P(`esri.layers.support.Relationship`)],P3);var qSe=[[`binary`,`application/octet-stream`,`bin`,``]];function JSe(e,t){return U3(t.name,e?.supportedFormats??[])!=null}function YSe(e,t){if(!e)return!1;let n=L3(t,e.supportedFormats??[]);return n!=null&&e.editFormats.includes(n)}function F3(e,t){return W3(tCe(e,t))}function I3(e,t){return W3(U3(e,t))}function XSe(e,t){return G3(eCe(e,t))}function L3(e,t){return I3(e.name,t)??F3(e.type,t)}function R3(e,t,n){return F3(e,n)??I3(t,n)}function z3({supportedFormats:e}){return R3(`model/gltf-binary`,`glb`,e)}function ZSe(e){let t=z3(e);return t!=null&&e.editFormats.includes(t)}function B3({supportedFormats:e}){return R3(`model/gltf+json`,`gltf`,e)}function V3(e){if(!e)return null;let t=z3(e),n=B3(e),r=null;for(let i of e.queryFormats){if(i===t)return i;i===n&&(r=i)}return r}function QSe({supportedFormats:e}){return R3(`application/esri3do-SR_world`,`wld`,e)}function $Se({supportedFormats:e}){return R3(`application/esri3do-SR_prj`,`prj`,e)}function H3(e){return[...qSe,...e]}function eCe(e,t){return H3(t).find(t=>W3(t)===e)}function tCe(e,t){let n=e.toLowerCase();return H3(t).find(e=>G3(e)===n)}function U3(e,t){let n=e.toLowerCase();return H3(t).find(e=>nCe(e).some(e=>n.endsWith(e)))}function W3(e){return e?.[0]}function G3(e){return e?.[1].toLowerCase()}function nCe(e){return e?.[2].split(`,`).map(e=>e.toLowerCase())??[]}function rCe(e){return e.tables?.find(e=>e.role===`assetMaps`)}function Q(e,t,n){return!!q3(e,t,n)}function K3(e,t,n){return q3(e,t,n)}function q3(e,t,n){return e&&e.hasOwnProperty(t)?e[t]:n}var iCe={name:`supportsName`,size:`supportsSize`,contentType:`supportsContentType`,keywords:`supportsKeywords`,exifInfo:`supportsExifInfo`},aCe=[`cubic-bezier`,`circular-arc`,`elliptic-arc`];function oCe(e){let t=e?.supportedSpatialAggregationStatistics?.map(e=>e.toLowerCase());return{envelope:!!t?.includes(`envelopeaggregate`),centroid:!!t?.includes(`centroidaggregate`),convexHull:!!t?.includes(`convexhullaggregate`)}}function J3(e,t){return!!(e?.supportedOperationsWithCacheHint?.map(e=>e.toLowerCase()))?.includes(t.toLowerCase())}function sCe(e){let t=e?.supportedStatisticTypes?.map(e=>e.toLowerCase());return{count:!!t?.includes(`count`),sum:!!t?.includes(`sum`),min:!!t?.includes(`min`),max:!!t?.includes(`max`),avg:!!t?.includes(`avg`),var:!!t?.includes(`var`),stddev:!!t?.includes(`stddev`),percentileContinuous:!!t?.includes(`percentile_cont`),percentileDiscrete:!!t?.includes(`percentile_disc`),envelope:!!t?.includes(`envelopeaggregate`),centroid:!!t?.includes(`centroidaggregate`),convexHull:!!t?.includes(`convexhullaggregate`)}}function cCe(e){let t=e?.supportedNormalizationTypes?.map(e=>e.toLowerCase());return{field:!!t?.includes(`field`),log:!!t?.includes(`log`),naturalLog:!!t?.includes(`naturallog`),percentOfTotal:!!t?.includes(`percentoftotal`),squareRoot:!!t?.includes(`squareroot`)}}function Y3(e,t){return{analytics:lCe(e),attachment:uCe(e),data:dCe(e),metadata:fCe(e),operations:pCe(e.capabilities,e,t),query:mCe(e,t),queryAttributeBins:_Ce(e),queryRelated:hCe(e),queryTopFeatures:gCe(e),editing:vCe(e)}}function lCe(e){return{supportsCacheHint:J3(e.advancedQueryCapabilities,`queryAnalytics`)}}function uCe(e){let t=e.attachmentProperties,n={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:J3(e.advancedQueryCapabilities,`queryAttachments`),supportsOrderByFields:Q(e.advancedQueryCapabilities,`supportsQueryAttachmentOrderByFields`,!1),supportsResize:Q(e,`supportsAttachmentsResizing`,!1),supportsTypeWildcard:Q(e.advancedQueryCapabilities,`supportsQueryAttachmentWithTypeWildcard`,!1)};return t&&Array.isArray(t)&&t.forEach(e=>{let t=iCe[e.name];t&&(n[t]=!!e.isEnabled)}),n}function dCe(e){let t=Q(e.advancedQueryCapabilities,`supportsTrueCurve`,!1);return{isVersioned:Q(e,`isDataVersioned`,!1),isBranchVersioned:Q(e,`isDataBranchVersioned`,!1),supportsAttachment:Q(e,`hasAttachments`,!1),supportsM:Q(e,`hasM`,!1),supportsTrueCurve:t,supportedCurveTypes:yCe(e,t),supportsZ:Q(e,`hasZ`,!1)}}function fCe(e){return{supportsAdvancedFieldProperties:Q(e,`supportsFieldDescriptionProperty`,!1)}}function pCe(e,t,n){let r=e?.toLowerCase().split(`,`).map(e=>e.trim())??[],i=n?Dc(n):null,a=r.includes(i?.serverType===`MapServer`?`data`:`query`),o=r.includes(`editing`)&&!t.datesInUnknownTimezone&&!0!==t.uniqueIdInfo?.OIDFieldContainsHashValue,s=o&&r.includes(`create`),c=o&&r.includes(`delete`),l=o&&r.includes(`update`),u=r.includes(`changetracking`),d=t.advancedQueryCapabilities;return o&&!(s||c||l)&&(s=c=l=!0),{supportsCalculate:Q(t,`supportsCalculate`,!1),supportsTruncate:Q(t,`supportsTruncate`,!1),supportsValidateSql:Q(t,`supportsValidateSql`,!1),supportsAdd:s,supportsDelete:c,supportsEditing:o,supportsChangeTracking:u,supportsQuery:a,supportsQueryAnalytics:Q(d,`supportsQueryAnalytic`,!1),supportsQueryAttachments:Q(d,`supportsQueryAttachments`,!1),supportsQueryBins:Q(d,`supportsQueryBins`,!1)||!!t.queryBinsCapabilities,supportsQueryPivot:Q(d,`supportsQueryPivot`,!1),supportsQueryTopFeatures:Q(d,`supportsTopFeaturesQuery`,!1),supportsResizeAttachments:Q(t,`supportsAttachmentsResizing`,!1),supportsSync:r.includes(`sync`),supportsUpdate:l,supportsExceedsLimitStatistics:Q(t,`supportsExceedsLimitStatistics`,!1),supportsAsyncConvert3D:Q(t,`supportsAsyncConvert3D`,!1)}}function mCe(e,t){let n=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,a=e.currentVersion,o=t?.includes(`MapServer`),s=!o||a>=c(`mapserver-pbf-version-support`),l=jc(t),u=new Set((e.supportedQueryFormats??``).split(`,`).map(e=>e.toLowerCase().trim()));return{maxRecordCount:K3(e,`maxRecordCount`,void 0),maxRecordCountFactor:K3(e,`maxRecordCountFactor`,void 0),maxUniqueIDCount:K3(e,`maxUniqueIDCount`,void 0),standardMaxRecordCount:K3(e,`standardMaxRecordCount`,void 0),supportedSpatialAggregationStatistics:oCe(n),supportsCacheHint:Q(n,`supportsQueryWithCacheHint`,!1)||J3(n,`query`),supportsCentroid:Q(n,`supportsReturningGeometryCentroid`,!1),supportsCentroidOnDegeneratedQuantizedGeometry:l||t==null,supportsCompactGeometry:l,supportsCurrentUser:Q(n,`supportsCurrentUserQueries`,!1),supportsDefaultSpatialReference:Q(n,`supportsDefaultSR`,!1),supportsDegeneratedQuantizedGeometry:Q(n,`supportsDegeneratedQuantizedGeometry`,!1),supportsDisjointSpatialRelationship:Q(n,`supportsDisjointSpatialRel`,!1),supportsDistance:Q(n,`supportsQueryWithDistance`,!1),supportsDistinct:Q(n,`supportsDistinct`,e.supportsAdvancedQueries),supportsExtent:Q(n,`supportsReturningQueryExtent`,!1),supportsFormatPBF:s&&u.has(`pbf`),supportsFullTextSearch:Q(n,`supportsFullTextSearch`,!1),supportsGeometryProperties:Q(n,`supportsReturningGeometryProperties`,!1),supportsHavingClause:Q(n,`supportsHavingClause`,!1),supportsHistoricMoment:Q(i,`supportsQueryWithHistoricMoment`,!1),supportsMaxRecordCountFactor:Q(n,`supportsMaxRecordCountFactor`,!1),supportsOrderBy:Q(n,`supportsOrderBy`,e.supportsAdvancedQueries),supportsPagination:Q(n,`supportsPagination`,!1),supportsPaginationOnAggregatedQueries:Q(n,`supportsPaginationOnAggregatedQueries`,!1),supportsPercentileStatistics:Q(n,`supportsPercentileStatistics`,!1),supportsQuantization:Q(e,`supportsCoordinatesQuantization`,!1),supportsQuantizationEditMode:Q(e,`supportsQuantizationEditMode`,!1),supportsQueryByAnonymous:Q(r,`allowAnonymousToQuery`,!0),supportsQueryByOthers:Q(r,`allowOthersToQuery`,!0),supportsQueryGeometry:Q(e,`supportsReturningQueryGeometry`,!1),supportsResultType:Q(n,`supportsQueryWithResultType`,!1),supportsReturnMesh:!!V3(e.infoFor3D),supportsSpatialAggregationStatistics:Q(n,`supportsSpatialAggregationStatistics`,!1),supportsSqlExpression:Q(n,`supportsSqlExpression`,!1),supportsStandardizedQueriesOnly:Q(e,`useStandardizedQueries`,!1),supportsStatistics:Q(n,`supportsStatistics`,e.supportsStatistics),supportsTopFeaturesQuery:Q(n,`supportsTopFeaturesQuery`,!1),supportsTrueCurve:Q(n,`supportsTrueCurve`,!1),tileMaxRecordCount:K3(e,`tileMaxRecordCount`,void 0)}}function hCe(e){let t=e.advancedQueryCapabilities,n=Q(t,`supportsAdvancedQueryRelated`,!1);return{supportsPagination:Q(t,`supportsQueryRelatedPagination`,!1),supportsCount:n,supportsOrderBy:n,supportsCacheHint:J3(t,`queryRelated`)}}function gCe(e){return{supportsCacheHint:J3(e.advancedQueryCapabilities,`queryTopFilter`)}}function _Ce(e){let t=e?e.queryBinsCapabilities:void 0;return{supportsDate:Q(t,`supportsDateBin`,!1),supportsFixedInterval:Q(t,`supportsFixedIntervalBin`,!1),supportsAutoInterval:Q(t,`supportsAutoIntervalBin`,!1),supportsFixedBoundaries:Q(t,`supportsFixedBoundariesBin`,!1),supportsStackBy:Q(t,`supportsStackBy`,!1),supportsSplitBy:Q(t,`supportsSplitBy`,!1),supportsSnapToData:Q(t,`supportsSnapToData`,!1),supportsReturnFullIntervalBin:Q(t,`supportsReturnFullIntervalBin`,!1),supportsFirstDayOfWeek:Q(t,`supportsFirstDayOfWeek`,!1),supportsNormalization:Q(t,`supportsNormalization`,!1),supportedStatistics:sCe(t),supportedNormalizationTypes:cCe(t)}}function vCe(e){let t=e.ownershipBasedAccessControlForFeatures,n=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Q(e,`allowGeometryUpdates`,!0),supportsGlobalId:Q(e,`supportsApplyEditsWithGlobalIds`,!1),supportsReturnServiceEditsInSourceSpatialReference:Q(e,`supportsReturnServiceEditsInSourceSR`,!1),supportsRollbackOnFailure:Q(e,`supportsRollbackOnFailureParameter`,!1),supportsTrueCurveUpdate:Q(e,`allowTrueCurveUpdates`,!0),supportsTrueCurveUpdateByTrueCurveClientsOnly:Q(e,`onlyAllowTrueCurveUpdatesByTrueCurveClients`,!0),supportsUpdateWithoutM:Q(e,`allowUpdateWithoutMValues`,!1),supportsUploadWithItemId:Q(e,`supportsAttachmentsByUploadId`,!1),supportsDeleteByAnonymous:Q(t,`allowAnonymousToDelete`,!0),supportsDeleteByOthers:Q(t,`allowOthersToDelete`,!0),supportsUpdateByAnonymous:Q(t,`allowAnonymousToUpdate`,!0),supportsUpdateByOthers:Q(t,`allowOthersToUpdate`,!0),supportsAsyncApplyEdits:Q(n,`supportsAsyncApplyEdits`,!1),zDefault:K3(e,`zDefault`,void 0)}}function yCe(e,t){let n=e.supportedCurveTypes??e.advancedQueryCapabilities?.supportedCurveTypes;return Array.isArray(n)?n.map(e=>qie.fromJSON(e)).filter(ge):t?aCe:[]}function bCe(e){return{operations:{supportsAppend:Q(e,`supportsAppend`,!1),supportsCoverageQuery:e?.playbackInfo?.klv[`0601`]??!1,supportsExportClip:Q(e,`supportsExportClip`,!1),supportsExportFrameset:Q(e,`supportsExportFrameset`,!1),supportsMensuration:Q(e,`supportsMensuration`,!1),supportsPreviews:Q(e,`supportsPreviews`,!1),supportsUpdate:Q(e,`supportsUpdate`,!1)}}}var X3=class extends I(L){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;let t={};for(let n of Object.keys(e))t[n]=iI(e[n]);return t}writeDomains(e,t){if(!e)return;let n={};for(let t of Object.keys(e))e[t]&&(n[t]=e[t]?.toJSON());t.domains=n}};e([N({type:Number,json:{write:!0}})],X3.prototype,`code`,void 0),e([N({type:Object,json:{write:!0}})],X3.prototype,`defaultValues`,void 0),e([N({json:{write:!0}})],X3.prototype,`domains`,void 0),e([j(`domains`)],X3.prototype,`readDomains`,null),e([M(`domains`)],X3.prototype,`writeDomains`,null),e([N({type:String,json:{write:!0}})],X3.prototype,`name`,void 0),X3=e([P(`esri.layers.support.Subtype`)],X3);var Z3=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(W.ofType(k0)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=H.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.url=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(e,t){throw Error(`Not implemented`)}getField(e){return this.fieldsIndex.get(e)}get authenticationTriggerEvent(){if(!this.url)return null;let{capabilities:e}=this;if(e){let{query:t,operations:n,editing:r}=e;if(!t.supportsQueryByOthers||!t.supportsQueryByAnonymous||n.supportsEditing&&!(r.supportsUpdateByOthers&&r.supportsUpdateByAnonymous&&r.supportsDeleteByOthers&&r.supportsDeleteByAnonymous))return`load`}if(v3(this.serviceDefinitionExpression)||v3(this.definitionExpression))return`load`;if(this.userHasUpdateItemPrivileges){if(GSe(this))return`load`;if(this.hasUpdateItemRestrictions)return e.operations.supportsQuery?`editing`:`load`}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return`editing`;let t=this.editFieldsInfo;return(t?.creatorField||t?.editorField)&&e?.operations.supportsEditing?`editing`:null}readCapabilitiesFromService(e,t){return Y3(t,this.url)}readEditingInfo(e,t){let{editingInfo:n}=t;return n?{lastEditDate:n.lastEditDate==null?null:new Date(n.lastEditDate)}:null}get effectiveCapabilities(){let e=this.capabilities;if(!e)return null;let t=C(e),{operations:n,editing:r}=t;return w3(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),t):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=r.supportsDeleteByOthers=r.supportsGeometryUpdate=r.supportsUpdateByOthers=!0,t):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=r.supportsGeometryUpdate=!0),t)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(e,t){return l3(t)}get hasFullEditingRestrictions(){let e=this.capabilities;if(!e||w3(this))return!1;let{operations:t,editing:n}=e;return t.supportsEditing&&!(t.supportsAdd&&t.supportsDelete&&t.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){let e=this.capabilities;if(!e)return!1;let{operations:t,editing:n}=e;return w3(this)?!t.supportsQuery:!(t.supportsAdd&&t.supportsDelete&&t.supportsEditing&&t.supportsQuery&&t.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(e,t){return t.type===`Table`}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readMinScale(e,t){return t.effectiveMinScale||e||0}readObjectIdFieldFromService(e,t){return u3(t)}get parsedUrl(){return j3(this)}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readUniqueIdFields(e,t){return t.uniqueIdInfo?.OIDFieldContainsHashValue?t.uniqueIdInfo.fields:null}readVersion(e,t){return zSe(t)}get isUrlHostModified(){let{loaded:e,url:t,_isUrlHostModified:n}=this;if(n)return!0;if(!e||!t||this.originIdOf(`url`)<7)return!1;let r=this.sourceJSON?.preferredHost;if(!r||!fs(t,`https://${r}`,!0))return!1;for(let e=6;e>=3;e--){let n=this.getAtOrigin(`url`,Yr(e));if(n)return!fs(t,n,!0)}return!1}applyPreferredHost(e){let{url:t,portalItem:n}=this;if(!t||!dE(n))return;let r=lE();r&&this._isUrlHostModificationEnabled&&(this._set(`url`,r),this._isUrlHostModified=!0,n&&fE(n,uE()))}applyHostFromPortalItem(){let{url:e,portalItem:t}=this;if(!e||this.originIdOf(`url`)===7||!t?.url||!dE(t)||!oZ(t,cZ.HOSTED_SERVICE)||fs(e,t.url,!0)||!this._isUrlHostModificationEnabled)return;let n=Hs(t.url);this._set(`url`,Vs(e,n)),this._isUrlHostModified=!0}};return e([N({readOnly:!0})],r.prototype,`authenticationTriggerEvent`,null),e([N({type:String,json:{origins:{service:{read:{source:`copyrightText`}}}}})],r.prototype,`copyright`,void 0),e([N({readOnly:!0,json:{read:!1,origins:{service:{read:{source:`advancedQueryCapabilities.allowGeometryUpdates.allowUpdateWithoutMValues.archivingInfo.capabilities.datesInUnknownTimezone.hasAttachments.hasM.hasZ.isDataBranchVersioned.isDataVersioned.maxRecordCount.maxRecordCountFactor.maxUniqueIDCount.ownershipBasedAccessControlForFeatures.standardMaxRecordCount.supportedQueryFormats.supportsAdvancedQueries.supportsApplyEditsWithGlobalIds.supportsAttachmentsByUploadId.supportsAttachmentsResizing.supportsCalculate.supportsCoordinatesQuantization.supportsExceedsLimitStatistics.supportsFieldDescriptionProperty.supportsQuantizationEditMode.supportsRollbackOnFailureParameter.supportsStatistics.supportsTruncate.supportsValidateSql.tileMaxRecordCount.useStandardizedQueries`.split(`.`)}}}}})],r.prototype,`capabilities`,void 0),e([j(`service`,`capabilities`)],r.prototype,`readCapabilitiesFromService`,null),e([N(wb(`dateFieldsTimeReference`))],r.prototype,`dateFieldsTimeZone`,void 0),e([N({type:Boolean})],r.prototype,`datesInUnknownTimezone`,void 0),e([N({type:String,json:{origins:{service:{read:!1,write:!1}},name:`layerDefinition.definitionExpression`,write:{enabled:!0,allowNull:!0}}})],r.prototype,`definitionExpression`,void 0),e([N({type:String,json:{origins:{service:{read:{source:`displayField`}}}}})],r.prototype,`displayField`,void 0),e([N({readOnly:!0,type:O0})],r.prototype,`editFieldsInfo`,void 0),e([N({readOnly:!0})],r.prototype,`editingInfo`,void 0),e([j(`editingInfo`)],r.prototype,`readEditingInfo`,null),e([N({readOnly:!0})],r.prototype,`effectiveCapabilities`,null),e([N()],r.prototype,`effectiveEditingEnabled`,null),e([N((()=>{let e=C(y0),t=e.json.origins;return t[`web-map`]={read:!1,write:!1},t[`portal-item`]={read:!1,write:!1},e})())],r.prototype,`elevationInfo`,void 0),e([N()],r.prototype,`fieldsIndex`,void 0),e([N({type:k3,json:{name:`layerDefinition.floorInfo`,write:{layerContainerTypes:iQ}}})],r.prototype,`floorInfo`,void 0),e([N({type:Rd,json:{origins:{service:{read:{source:`extent`}}}}})],r.prototype,`fullExtent`,void 0),e([N()],r.prototype,`gdbVersion`,void 0),e([N({readOnly:!0,type:D3,json:{read:{source:`geometryProperties`}}})],r.prototype,`geometryFieldsInfo`,void 0),e([N({type:[`point`,`polygon`,`polyline`,`multipoint`,`multipatch`,`mesh`],json:{origins:{service:{read:J4.read}}}})],r.prototype,`geometryType`,void 0),e([N({type:String})],r.prototype,`globalIdField`,void 0),e([j(`service`,`globalIdField`,[`globalIdField`,`fields`])],r.prototype,`readGlobalIdFieldFromService`,null),e([N({readOnly:!0})],r.prototype,`hasFullEditingRestrictions`,null),e([N({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,`hasM`,void 0),e([N({readOnly:!0})],r.prototype,`hasUpdateItemRestrictions`,null),e([N({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,`hasZ`,void 0),e([N({readOnly:!0,type:ek})],r.prototype,`heightModelInfo`,void 0),e([N({type:Date})],r.prototype,`historicMoment`,void 0),e([N({type:W.ofType(k0),readOnly:!0})],r.prototype,`indexes`,void 0),e([N({readOnly:!0})],r.prototype,`isTable`,void 0),e([j(`service`,`isTable`,[`type`])],r.prototype,`readIsTableFromService`,null),e([N({type:Number,json:{origins:{service:{read:{source:`id`}},"portal-item":{read:!1,write:{target:`id`}}},read:!1}})],r.prototype,`layerId`,void 0),e([N(T0)],r.prototype,`maxScale`,void 0),e([j(`service`,`maxScale`,[`maxScale`,`effectiveMaxScale`])],r.prototype,`readMaxScale`,null),e([N(w0)],r.prototype,`minScale`,void 0),e([j(`service`,`minScale`,[`minScale`,`effectiveMinScale`])],r.prototype,`readMinScale`,null),e([N({type:String})],r.prototype,`objectIdField`,void 0),e([j(`service`,`objectIdField`,[`objectIdField`,`fields`])],r.prototype,`readObjectIdFieldFromService`,null),e([N({readOnly:!0})],r.prototype,`parsedUrl`,null),e([N(wb(`preferredTimeReference`))],r.prototype,`preferredTimeZone`,void 0),e([N({type:[P3],readOnly:!0})],r.prototype,`relationships`,void 0),e([N({type:Boolean})],r.prototype,`returnM`,void 0),e([N({type:Boolean})],r.prototype,`returnZ`,void 0),e([N({readOnly:!0,json:{write:!1}})],r.prototype,`serverGens`,void 0),e([N({readOnly:!0})],r.prototype,`serviceDefinitionExpression`,void 0),e([j(`service`,`serviceDefinitionExpression`,[`definitionQuery`,`definitionExpression`])],r.prototype,`readServiceDefinitionExpression`,null),e([N({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,`serviceItemId`,void 0),e([N()],r.prototype,`sourceJSON`,void 0),e([N({type:H,json:{origins:{service:{read:{source:`extent.spatialReference`}}}}})],r.prototype,`spatialReference`,void 0),e([N({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,`subtypeField`,void 0),e([N({type:[X3],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,`subtypes`,void 0),e([N({type:String,json:{read:{source:`timeInfo.trackIdField`}}})],r.prototype,`trackIdField`,void 0),e([N({type:[String],readOnly:!0})],r.prototype,`uniqueIdFields`,void 0),e([j(`service`,`uniqueIdFields`,[`uniqueIdInfo.OIDFieldContainsHashValue`,`uniqueIdInfo.fields`])],r.prototype,`readUniqueIdFields`,null),e([N(A3({nonStandardUrlAllowed:!0}))],r.prototype,`url`,void 0),e([N({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,`version`,void 0),e([j(`service`,`version`,[`currentVersion`,`capabilities`,`drawingInfo`,`hasAttachments`,`htmlPopupType`,`relationships`,`timeInfo`,`typeIdField`,`types`])],r.prototype,`readVersion`,null),e([N({readOnly:!0})],r.prototype,`isUrlHostModified`,null),r=e([P(`esri.layers.mixins.FeatureLayerBase`)],r),r},xCe=class extends A${constructor(e){super(),this.type=`aggregate`,this.featureReductionProvider=e}get id(){return this.featureReductionProvider.id}get[LM](){let e=this.featureReductionProvider.featureReduction;return e&&`popupTemplate`in e?e:null}},Q3=class extends I(L){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};e([N({type:String,json:{write:!0}})],Q3.prototype,`expression`,void 0),e([N({type:String,json:{write:!0}})],Q3.prototype,`title`,void 0),e([N({type:String,json:{write:!0}})],Q3.prototype,`returnType`,void 0),Q3=e([P(`esri.layers.support.ExpressionInfo`)],Q3);var $3,e6=class extends L{static{$3=this}constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new $3({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:C(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};e([N({type:Boolean,json:{write:!0}})],e6.prototype,`isAutoGenerated`,void 0),e([N({type:String,json:{write:!0}})],e6.prototype,`name`,void 0),e([N({type:String,json:{write:!0}})],e6.prototype,`alias`,void 0),e([N({type:String,json:{write:!0}})],e6.prototype,`onStatisticField`,void 0),e([N({type:Q3,json:{write:!0}})],e6.prototype,`onStatisticExpression`,void 0),e([N({type:String,json:{write:!0}})],e6.prototype,`statisticType`,void 0),e6=$3=e([P(`esri.layers.support.AggregateField`)],e6);var t6=class extends L{constructor(){super(...arguments),this.type=null}};e([N({type:[`selection`,`cluster`,`binning`],readOnly:!0,json:{read:!1,write:!0}})],t6.prototype,`type`,void 0),t6=e([P(`esri.layers.support.FeatureReduction`)],t6);var n6=`__begin__`,r6=`__end__`,SCe=new RegExp(n6,`ig`),CCe=new RegExp(r6,`ig`),i6=RegExp(`^`+n6,`i`),a6=RegExp(r6+`$`,`i`),o6=`"`,wCe=o6+` + `,TCe=` + `+o6;function s6(e){return e.replaceAll(RegExp(`\\[`,`g`),`{`).replaceAll(RegExp(`\\]`,`g`),`}`)}function ECe(e){return e.replaceAll(RegExp(`\\{`,`g`),`[`).replaceAll(RegExp(`\\}`,`g`),`]`)}function c6(e){let t={expression:``,type:`none`};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type=`conventional`):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type=`arcade`):e.labelExpression!=null&&(t.expression=s6(e.labelExpression),t.type=`conventional`),t}function DCe(e){let t=c6(e);if(!t)return null;switch(t.type){case`conventional`:return l6(t.expression);case`arcade`:return t.expression}return null}function OCe(e){let t=c6(e);if(!t)return null;switch(t.type){case`conventional`:return ACe(t.expression);case`arcade`:return u6(t.expression)}return null}function l6(e){let t;return e?(t=at(e,e=>n6+`$feature["`+e+`"]__end__`),t=i6.test(t)?t.replace(i6,``):o6+t,t=a6.test(t)?t.replace(a6,``):t+o6,t=t.replaceAll(SCe,wCe).replaceAll(CCe,TCe)):t=`""`,t}var kCe=/^\s*\{([^}]+)\}\s*$/i;function ACe(e){return(e?.match(kCe))?.[1].trim()||null}var jCe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,MCe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,NCe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function u6(e){if(!e)return null;let t=jCe.exec(e)||MCe.exec(e);return t?t[1]||t[3]:(t=NCe.exec(e),t?t[2]:null)}var d6,f6=class extends L{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}static{d6=this}readExpression(e,t){return t.value?l6(t.value):e}writeExpression(e,t,n){this.value!=null&&(e=l6(this.value)),e!=null&&(t[n]=e)}clone(){return new d6({expression:this.expression,title:this.title,value:this.value})}};e([N({type:String,json:{write:{writerEnsuresNonNull:!0}}})],f6.prototype,`expression`,void 0),e([j(`expression`,[`expression`,`value`])],f6.prototype,`readExpression`,null),e([M(`expression`)],f6.prototype,`writeExpression`,null),e([N({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],f6.prototype,`title`,void 0),e([N({json:{read:!1,write:!1}})],f6.prototype,`value`,void 0),f6=d6=e([P(`esri.layers.support.LabelExpressionInfo`)],f6);var p6,m6=new xr({esriServerPointLabelPlacementAboveCenter:`above-center`,esriServerPointLabelPlacementAboveLeft:`above-left`,esriServerPointLabelPlacementAboveRight:`above-right`,esriServerPointLabelPlacementBelowCenter:`below-center`,esriServerPointLabelPlacementBelowLeft:`below-left`,esriServerPointLabelPlacementBelowRight:`below-right`,esriServerPointLabelPlacementCenterCenter:`center-center`,esriServerPointLabelPlacementCenterLeft:`center-left`,esriServerPointLabelPlacementCenterRight:`center-right`,esriServerLinePlacementAboveAfter:`above-after`,esriServerLinePlacementAboveAlong:`above-along`,esriServerLinePlacementAboveBefore:`above-before`,esriServerLinePlacementAboveStart:`above-start`,esriServerLinePlacementAboveEnd:`above-end`,esriServerLinePlacementBelowAfter:`below-after`,esriServerLinePlacementBelowAlong:`below-along`,esriServerLinePlacementBelowBefore:`below-before`,esriServerLinePlacementBelowStart:`below-start`,esriServerLinePlacementBelowEnd:`below-end`,esriServerLinePlacementCenterAfter:`center-after`,esriServerLinePlacementCenterAlong:`center-along`,esriServerLinePlacementCenterBefore:`center-before`,esriServerLinePlacementCenterStart:`center-start`,esriServerLinePlacementCenterEnd:`center-end`,esriServerPolygonPlacementAlwaysHorizontal:`always-horizontal`},{ignoreUnknown:!0});function h6(e,t,n){return{enabled:!rE(n?.layer)}}function g6(e){return!e||e.origin!==`service`&&e.layer?.type!==`map-image`}function PCe(e){return e?.type===`map-image`}function _6(e){return!!PCe(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function FCe(e){return g6(e)||_6(e?.layer)}var v6=class extends L{static{p6=this}static evaluateWhere(e,t){let n=(e,t,n)=>{switch(t){case`=`:return e==n;case`<>`:return e!=n;case`>`:return e>n;case`>=`:return e>=n;case`<`:return e<n;case`<=`:return e<=n}return!1};try{if(e==null)return!0;let r=e.split(` `);if(r.length===3)return n(t[r[0]],r[1],r[2]);if(r.length===7){let e=n(t[r[0]],r[1],r[2]),i=r[3],a=n(t[r[4]],r[5],r[6]);switch(i){case`AND`:return e&&a;case`OR`:return e||a}}return!1}catch{}}constructor(e){super(e),this.type=`label`,this.name=null,this.allowOverrun=!1,this.deconflictionStrategy=`static`,this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition=`curved`,this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.symbol=uSe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){let n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e}writeLabelExpression(e,t,n){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=ECe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){let t=u6(this.labelExpressionInfo.expression);t&&(e=`[`+t+`]`)}}e!=null&&(t[n]=e)}writeLabelExpressionInfo(e,t,n,r){if(e==null&&this.labelExpression!=null&&g6(r))e=new f6({expression:this.getLabelExpressionArcade()});else if(!e)return;let i=e.toJSON(r);i.expression&&(t[n]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}get repeatLabelDistance(){return this._get(`repeatLabelDistance`)}set repeatLabelDistance(e){this._set(`repeatLabelDistance`,e)}getLabelExpression(){return c6(this)}getLabelExpressionArcade(){return DCe(this)}getLabelExpressionSingleField(){return OCe(this)}hash(){return JSON.stringify(this)}clone(){return new p6({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:C(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:C(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};e([N({type:String,json:{write:!0}})],v6.prototype,`name`,void 0),e([N({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:h6}}}}})],v6.prototype,`allowOverrun`,void 0),e([N({type:String,json:{write:!0,default:`static`,origins:{"web-scene":{write:!1},"portal-item":{default:`static`,write:{overridePolicy:h6}}}}})],v6.prototype,`deconflictionStrategy`,void 0),e([N({type:String,json:{write:{overridePolicy(e,t,n){return this.labelExpressionInfo&&n?.origin===`service`&&_6(n.layer)?{enabled:!1}:{allowNull:!0}}}}})],v6.prototype,`labelExpression`,void 0),e([j(`labelExpression`)],v6.prototype,`readLabelExpression`,null),e([M(`labelExpression`)],v6.prototype,`writeLabelExpression`,null),e([N({type:f6,json:{write:{overridePolicy:(e,t,n)=>FCe(n)?{allowNull:!0}:{enabled:!1}}}})],v6.prototype,`labelExpressionInfo`,void 0),e([M(`labelExpressionInfo`)],v6.prototype,`writeLabelExpressionInfo`,null),e([N({type:m6.apiValues,json:{type:m6.jsonValues,read:m6.read,write:m6.write}})],v6.prototype,`labelPlacement`,void 0),e([N({type:[`curved`,`parallel`],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],v6.prototype,`labelPosition`,void 0),e([N({type:Number})],v6.prototype,`maxScale`,void 0),e([M(`maxScale`)],v6.prototype,`writeMaxScale`,null),e([N({type:Number})],v6.prototype,`minScale`,void 0),e([M(`minScale`)],v6.prototype,`writeMinScale`,null),e([N({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:h6}}}}})],v6.prototype,`repeatLabel`,void 0),e([N({type:Number,cast:Xw,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:h6}}}}})],v6.prototype,`repeatLabelDistance`,null),e([N({types:Gpe,json:{origins:{"web-scene":{types:Kpe,write:o4,default:null}},write:o4,default:null}})],v6.prototype,`symbol`,void 0),e([N({type:Boolean,json:{write:!0}})],v6.prototype,`useCodedValues`,void 0),e([N({type:String,json:{write:!0}})],v6.prototype,`where`,void 0),v6=p6=e([P(`esri.layers.support.LabelClass`)],v6);var y6,b6=y6=class extends L{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new y6({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){let e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};e([N({type:String,json:{write:!0}})],b6.prototype,`description`,void 0),e([N({type:String,json:{write:!0}})],b6.prototype,`label`,void 0),e([N({type:Number,json:{read:{source:`classMinValue`},write:{target:`classMinValue`}}})],b6.prototype,`minValue`,void 0),e([N({type:Number,json:{read:{source:`classMaxValue`},write:{target:`classMaxValue`}}})],b6.prototype,`maxValue`,void 0),e([N(u4)],b6.prototype,`symbol`,void 0),b6=y6=e([P(`esri.renderers.support.ClassBreakInfo`)],b6);var x6,S6=`log`,C6=`percent-of-total`,w6=`field`,T6=new xr({esriNormalizeByLog:S6,esriNormalizeByPercentOfTotal:C6,esriNormalizeByField:w6}),ICe=Lt(b6),E6=x6=class extends J2(a2){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type=`class-breaks`,this.valueExpression=null,this.valueExpressionTitle=null,this._set(`classBreakInfos`,[])}readClassBreakInfos(e,t,n){if(!Array.isArray(e))return;let r=t.minValue;return e.map(e=>{let t=new b6;return t.read(e,n),t.minValue??=r,t.maxValue??=t.minValue,r=t.maxValue,t})}writeClassBreakInfos(e,t,n,r){let i=e.map(e=>e.write({},r));this._areClassBreaksConsecutive()&&i.forEach(e=>delete e.classMinValue),t[n]=i}castField(e){return e==null?e:typeof e==`function`?(E.getLogger(this).error(`.field: field must be a string value`),null):Ct(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get(`normalizationType`),t=!!this.normalizationField,n=this.normalizationTotal!=null;return t||n?(e=t&&w6||n&&C6||null,t&&n&&E.getLogger(this).warn(`warning: both normalizationField and normalizationTotal are set!`)):e!==w6&&e!==C6||(e=null),e}set normalizationType(e){this._set(`normalizationType`,e)}addClassBreakInfo(e,t,n){let r=null;r=typeof e==`number`?new b6({minValue:e,maxValue:t,symbol:zF(n)}):ICe(C(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange(`minValue`)}removeClassBreakInfo(e,t){let n=this.classBreakInfos.length;for(let r=0;r<n;r++){let n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&t?.arcade==null&&E.getLogger(this).warn(``),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let n=t;this.valueExpression&&t?.arcade==null&&(n={...n,arcade:await bk()});let r=this.getBreakIndex(e,n);return r===-1?null:this.classBreakInfos[r]}getSymbol(e,t){if(this.valueExpression&&t?.arcade==null)return void E.getLogger(this).error(`#getSymbol()`,`Please use getSymbolAsync if valueExpression is used`);let n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&t?.arcade==null){let e=await bk(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),n={...n,arcade:e}}let r=this.getBreakIndex(e,n);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){let e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),``)??``}getMeshHash(){let e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((e,t)=>e+t.getMeshHash(),``)}.${n}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new x6({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:C(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:C(this.visualVariables),legendOptions:C(this.legendOptions),authoringInfo:C(this.authoringInfo)})}async collectRequiredFields(e,t){let n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){let n=[...this.symbols.map(n=>n.collectRequiredFields(e,t)),kk(e,t,null,this.valueExpression)];Ok(e,t,this.field),Ok(e,t,this.normalizationField),await Promise.all(n)}_getBreakIndexForExpression(e,t){let{viewingMode:n,scale:r,spatialReference:i,arcade:a,timeZone:o}=t??{},{valueExpression:s}=this,c=this._compiledValueExpression.valueExpression===s?this._compiledValueExpression.compiledFunction:null,l=a.arcadeUtils;if(!c){let e=l.createSyntaxTree(s);c=l.createFunction(e),this._compiledValueExpression.compiledFunction=c}this._compiledValueExpression.valueExpression=s;let u=l.executeFunction(c,l.createExecContext(e,l.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){let t=this.field,n=e.attributes,r=this.normalizationType,i=parseFloat(n[t]);if(r){let e=this.normalizationTotal,t=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if(r===S6)i=Math.log(i)*Math.LOG10E;else if(r!==C6||e==null||isNaN(e)){if(r===w6&&!isNaN(t)){if(isNaN(i)||isNaN(t))return-1;i/=t}}else i=i/e*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){let t=this.isMaxInclusive;if(e!=null&&typeof e==`number`&&!isNaN(e))for(let n=0;n<this.classBreakInfos.length;n++){let r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}_areClassBreaksConsecutive(){let e=this.classBreakInfos,t=e.length;for(let n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}};e([N(d4)],E6.prototype,`backgroundFillSymbol`,void 0),e([N({type:[b6],json:{write:{isRequired:!0}}})],E6.prototype,`classBreakInfos`,void 0),e([j(`classBreakInfos`)],E6.prototype,`readClassBreakInfos`,null),e([M(`classBreakInfos`)],E6.prototype,`writeClassBreakInfos`,null),e([N({type:String,json:{write:!0}})],E6.prototype,`defaultLabel`,void 0),e([N(l4)],E6.prototype,`defaultSymbol`,void 0),e([N({type:String,json:{write:!0}})],E6.prototype,`field`,void 0),e([Tr(`field`)],E6.prototype,`castField`,null),e([N({type:Boolean})],E6.prototype,`isMaxInclusive`,void 0),e([N({type:w4,json:{write:!0}})],E6.prototype,`legendOptions`,void 0),e([N({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],E6.prototype,`minValue`,null),e([N({type:String,json:{write:!0}})],E6.prototype,`normalizationField`,void 0),e([N({type:Number,json:{write:!0}})],E6.prototype,`normalizationTotal`,void 0),e([N({type:T6.apiValues,value:null,json:{type:T6.jsonValues,read:T6.read,write:T6.write}})],E6.prototype,`normalizationType`,null),e([A({classBreaks:`class-breaks`})],E6.prototype,`type`,void 0),e([N({type:String,json:{write:!0}})],E6.prototype,`valueExpression`,void 0),e([N({type:String,json:{write:!0}})],E6.prototype,`valueExpressionTitle`,void 0),E6=x6=e([P(`esri.renderers.ClassBreaksRenderer`)],E6);var LCe=-3,RCe=!!c(`esri-tests-disable-gpu-memory-measurements`),D6=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._users=new Map,this._sizeLimits=new Map}destroy(){this.clearAll(),this._sizeLimits.clear(),this._users.clear(),this._db.clear()}register(e){this._users.set(e.id.slice(0,-1),e)}deregister(e){this.clear(e),this._sizeLimits.delete(e),this._users.delete(e.id.slice(0,-1))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){return this._db.get(e.id+t)?.size??0}put(e,t,n,r,i){t=e.id+t;let a=this._db.get(t);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(t),a.entry!==n&&this._notifyRemove(t,a.entry,a.size,0)),r>this._maxSize)return void this._notifyRemove(t,n,r,0);if(n===void 0)return void console.warn(`Refusing to cache undefined entry `);if(!r||r<0)return RCe||console.warn(`Refusing to cache entry with size ${r} for key ${t}`),void this._notifyRemove(t,n,0,0);let o=1+Math.max(i,-4)- -3;this._db.set(t,new zCe(n,r,o)),this._size+=r,e.size+=r,this._checkSize()}updateSize(e,t){t=e.id+t;let n=this._db.get(t);if(!n)return;this._size-=n.size,e.size-=n.size;let r=n.entry.usedMemory;for(;r>this._maxSize;){let e=this._notifyRemove(t,n.entry,r,1);if(!(e!=null&&e>0))return void this._db.delete(t);r=e}n.size=r,this._size+=r,e.size+=r,this._checkSize()}pop(e,t){t=e.id+t;let n=this._db.get(t);if(n)return this._size-=n.size,e.size-=n.size,this._db.delete(t),++this._hit,n.entry;++this._miss}get(e,t){t=e.id+t;let n=this._db.get(t);if(n!==void 0)return this._db.delete(t),n.lives=n.lifetime,this._db.set(t,n),++this._hit,n.entry;++this._miss}peek(e,t){let n=this._db.get(e.id+t);return n?++this._hit:++this._miss,n?.entry}get performanceInfo(){let e={Size:Math.round(this._size/1048576)+`/`+Math.round(this._maxSize/1048576)+`MB`,"Hit rate":Math.round(100*this._getHitRate())+`%`,Entries:this._db.size.toString()},t={},n=[];this._db.forEach((e,r)=>{let i=e.lifetime;n[i]=(n[i]||0)+e.size,this._users.forEach(n=>{let{id:i,name:a}=n;r.startsWith(i)&&(t[a]=(t[a]||0)+e.size)})});let r={};this._users.forEach(e=>{let n=e.name;`hitRate`in e&&typeof e.hitRate==`number`&&!isNaN(e.hitRate)&&e.hitRate>0?(t[n]=t[n]||0,r[n]=Math.round(100*e.hitRate)+`%`):r[n]=`0%`});let i=Object.keys(t);i.sort((e,n)=>t[n]-t[e]),i.forEach(n=>e[n]=Math.round(t[n]/2**20)+`MB / `+r[n]);for(let t=n.length-1;t>=0;--t){let r=n[t];r&&(e[`Priority `+(t+-3-1)]=Math.round(r/this._size*100)+`%`)}return e}resetStats(){this._hit=this._miss=0,this._users.forEach(e=>e.resetHitRate())}clear(e){let t=e.id;this._db.forEach((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemove(n,e.entry,e.size,0))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,0)),this._users.forEach(e=>e.size=0),this._size=0,this._db.clear()}*values(e){for(let[t,n]of this._db)t.startsWith(e.id)&&(yield n.entry)}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,n,r){let i=this._users.get(e.split(O6)[0])?.removeFunc,a=i?.(t,r,n);return typeof a==`number`?a:null}_checkSize(){this._sizeLimits.forEach((e,t)=>this._checkSizeLimits(e,t)),this._checkSizeLimits(this.maxSize)}setMaxSize(e,t){t==null||t<=0?this._sizeLimits.delete(e):this._sizeLimits.set(e,t)}_checkSizeLimits(e,t){let n=t??this;if(n.size<=e)return;let r=t?.id,i=!0;for(;i;){i=!1;for(let[a,o]of this._db)if(o.lifetime===0&&(!r||a.startsWith(r))){let r=t??this._users.get(a.split(O6)[0]);if(this._purgeItem(a,o,r),n.size<=.9*e)return;i||=this._db.has(a)}}for(let[i,a]of this._db)if(!r||i.startsWith(r)){let r=t??this._users.get(i.split(O6)[0]);if(this._purgeItem(i,a,r),n.size<=.9*e)return}}_purgeItem(e,t,n){if(this._db.delete(e),t.lives<=1){this._size-=t.size,n&&(n.size-=t.size);let r=this._notifyRemove(e,t.entry,t.size,1);r!=null&&r>0&&(this._size+=r,n&&(n.size+=r),t.lives=t.lifetime,t.size=r,this._db.set(e,t))}else --t.lives,this._db.set(e,t)}};new D6(0);var zCe=class{constructor(e,t,n){this.entry=e,this.size=t,this.lifetime=n,this.lives=n}},O6=`:`,k6=class{constructor(e,t){this.removeFunc=t,this._storage=new D6,this.id=``,this.name=``,this.size=0,this._storage.maxSize=e,this._storage.register(this)}destroy(){this._storage.deregister(this),this._storage.destroy(),this._storage=null}put(e,t,n=1){this._storage.put(this,e,t,n,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},A6=class e{static parse(t,n,r){let i=[],a=[],o=t.split(`;`);for(let e=0;e<o.length;e++){let t=o[e];if(t){if(t.includes(`po:`)){let e=t.slice(3).split(`|`);if(e.length===3){let[t,n,r]=e,i=VCe(t,n,r);i&&a.push(i)}continue}if(t.includes(`|`)){for(let e of t.split(`|`))if(n.has(e)){i.push(e);break}}else if(n.has(t))i.push(t);else if(e===0){i.length=0,i.push(HCe(r));break}}}return new e(i,a)}constructor(e,t){this.partNames=e,this.overrides=t}};function BCe(e,t){if(e===`DashTemplate`)return t.split(` `).map(e=>Number(e));if(e===`Color`){let e=new J(t).toRgba();return[e[0],e[1],e[2],255*e[3]]}return Number(t)}function VCe(e,t,n){return{primitiveName:e,propertyName:t,value:BCe(t,n),defaultValue:null}}function HCe(e){switch(e){case`esriGeometryPolyline`:return`Invalid_L`;case`esriGeometryPolygon`:return`Invalid_A`;default:return`Invalid_P`}}var j6=class{static{this.instance=new p_(`Etc/UTC`)}};function M6(e){return e instanceof i_?e===j6.instance:e?.toString().toLowerCase()===`unknown`}function UCe(e){return M6(e)?j6.instance:e}function WCe(e){return`timeZone`in e}function GCe(e){return`timeZone`in e}function KCe(e){return`dateFieldsTimeZone`in e}var qCe=new Map,N6=class e{static fromJSON(t){return new e(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new e(t.fields??[],L6(t))}static fromLayerJSON(t){return new e(t.fields??[],L6(t))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;let n=[];for(let e of this.fields){let t=e?.name,r=F6(t);if(t&&r){let i=P6(t);this._fieldsMap.set(t,e),this._fieldsMap.set(i,e),this._normalizedFieldsMap.set(r,e),n.push(`${i}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),Gk(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):Uk(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),Yk(e)||Xk(e)||(e.editable=e.editable==null||!!e.editable,e.nullable=e.nullable==null||!!e.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(let e of this.fields)Yk(e)||Xk(e)||e.nullable||Lk(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return this.get(e)!=null}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(P6(e))??this._normalizedFieldsMap.get(F6(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){let t=this.get(e&&typeof e!=`string`?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):t.type===`date`||t.type===`esriFieldTypeDate`?(E.getLogger(`esri.layers.support.FieldsIndex`).errorOnce(new D(`getTimeZone:no-timezone-information`,`no time zone information for field '${t.name}'`)),`UTC`):I6.has(t.type)?Og:null:null}getLuxonTimeZone(e){let t=this.getTimeZone(e);return t?t===`unknown`?j6.instance:t===`UTC`?B_.utcInstance:yt(qCe,t,()=>p_.create(t)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return Jk(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>Lo(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function P6(e){return e.trim().toLowerCase()}function F6(e){return xk(e)?.toLowerCase()??``}var I6=new Set([`time-only`,`date-only`,`timestamp-offset`,`esriFieldTypeDateOnly`,`esriFieldTypeTimeOnly`,`esriFieldTypeTimestampOffset`]);function L6(e){let t=new Map;if(!e.fields)return t;let n=!0===e.datesInUnknownTimezone,{timeInfo:r,editFieldsInfo:i}=e,a=(r?`startField`in r?r.startField:r.startTimeField:``)??``,o=(r?`endField`in r?r.endField:r.endTimeField:``)??``,s=KCe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?Tb(e.dateFieldsTimeReference):null,c=i?WCe(i)?i.timeZone??s:i.dateFieldsTimeReference?Tb(i.dateFieldsTimeReference):s??`UTC`:null,l=r?GCe(r)?r.timeZone??s:r.timeReference?Tb(r.timeReference):s:null,u=new Map([[P6(i?.creationDateField??``),c],[P6(i?.editDateField??``),c],[P6(a),l],[P6(o),l]]);for(let{name:r,type:i}of e.fields)if(I6.has(i))t.set(r,Og);else if(i!==`date`&&i!==`esriFieldTypeDate`)t.set(r,null);else if(n)t.set(r,Og);else{let e=u.get(P6(r??``))??s;t.set(r,e)}return t}var R6={TypeNotAllowedInFeature:`Feature attributes only support dates, numbers, strings, guids.`,LogicError:`Logic error - {reason}`,CannotCompareDateAndTime:`Cannot compare date or dateonly with timeonly types`,NeverReach:`Encountered unreachable logic`,AsyncNotEnabled:`Async Arcade must be enabled for this script`,ModuleAccessorMustBeString:`Module accessor must be a string`,ModuleExportNotFound:`Module has no export with provided identifier`,ModulesNotSupported:`Current profile does not support modules`,ArrayAccessMustBeNumber:`Array accessor must be a number`,FunctionNotFound:`Function not found`,FieldNotFound:`Key not found - {key}`,CircularModules:`Circular module dependencies are not allowed`,Cancelled:`Execution cancelled`,UnsupportedHashType:`Type not supported in hash function`,IllegalResult:`Value is not a supported return type`,PortalRequired:`Portal is required`,InvalidParameter:`Invalid parameter`,WrongNumberOfParameters:`Call with wrong number of parameters`,Unrecognized:`Unrecognized code structure`,UnrecognizedType:`Unrecognized type`,WrongSpatialReference:`Cannot work with geometry in this spatial reference. It is different to the execution spatial reference`,BooleanConditionRequired:`Conditions must use booleans`,NoFunctionInDictionary:`Dictionaries cannot contain functions.`,NoFunctionInArray:`Arrays cannot contain functions.`,NoFunctionInTemplateLiteral:`Template Literals do not expect functions by value.`,KeyAccessorMustBeString:`Accessor must be a string`,KeyMustBeString:`Object keys must be a string`,Immutable:`Object is immutable`,UnexpectedToken:`Unexpected token`,MemberOfNull:`Cannot access property of null object`,MaximumCallDepth:`Exceeded maximum function depth`,OutOfBounds:`Out of bounds`,InvalidIdentifier:`Identifier not recognized`,CallNonFunction:`Expression is not a function`,InvalidMemberAccessKey:`Cannot access value using a key of this type`,AssignModuleFunction:`Cannot assign function to module variable`,UnsupportUnaryOperator:`Unsupported unary operator`,UnsupportedOperator:`Unsupported operator`,LogicalExpressionOnlyBoolean:`Logical expressions must be boolean`,LogicExpressionOrAnd:`Logical expression can only be combined with || or &&`,CannotChangeTimeZoneTime:`Cannot change the timezone of a Time`,CannotChangeTimeZoneDateOnly:`Cannot change the timezone of a DateOnly`,FeatureSetDoesNotHaveSubtypes:`FeatureSet does not have subtypes`},JCe=class extends Error{constructor(...e){super(...e)}},z6=class e extends JCe{constructor(t,n){super(V6(n)+t.message,{cause:t}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,e),n?.loc&&(this.loc=n.loc)}},B6=class e extends Error{constructor(t,n,r,i){super(`Execution error - `+V6(r)+at(R6[n],i)),this.loc=null,this.declaredRootClass=`esri.arcade.arcadeexecutionerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e),r?.loc&&(this.loc=r.loc)}};function V6(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:``}var YCe=class e extends Error{constructor(t,n,r,i){super(`Compilation error - `+V6(r)+at(R6[n],i)),this.loc=null,this.declaredRootClass=`esri.arcade.arcadecompilationerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e),r?.loc&&(this.loc=r.loc)}},XCe=class e extends Error{constructor(){super(`Uncompilable code structures`),this.declaredRootClass=`esri.arcade.arcadeuncompilableerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function ZCe(e,t,n){return n.declaredRootClass===`esri.arcade.arcadeexecutionerror`||n.declaredRootClass===`esri.arcade.arcadecompilationerror`?n.loc===null&&t?.loc?new z6(n,{cause:n}):n:(n.declaredRootClass===`esri.arcade.featureset.support.featureseterror`||n.declaredRootClass===`esri.arcade.featureset.support.sqlerror`||n.declaredRootClass,t?.loc?new z6(n,{cause:n}):n)}var QCe={UnrecognizedUri:`Unrecognized uri - {uri}`,UnsupportedUriProtocol:`Unrecognized uri protocol`},$Ce=class e extends Error{constructor(t,n){super(at(QCe[t],n)),this.declaredRootClass=`esri.arcade.arcademoduleerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function H6(e){return e.toLowerCase().replaceAll(/[\s-]+/g,``)}var ewe=class{constructor(e,t){let n=new Map;for(let t of e){let e=H6(t);if(n.has(e))throw Error(`${t} already added as ${n.get(e)}`);n.set(e,t)}if(t!=null)for(let[e,r]of t){let t=H6(e);if(n.has(t))throw Error(`${e} already associated with ${n.get(t)}`);n.set(t,r)}this._enumMap=n}lookup(e){return this._enumMap.get(H6(e))}get(e){let t=this.lookup(e);if(t==null)throw new B6(null,`InvalidParameter`,null);return t}},twe={TimeZoneNotRecognized:`Timezone identifier has not been recognized.`},nwe=class e extends Error{constructor(t,n){super(at(twe[t],n)),this.declaredRootClass=`esri.arcade.arcadedate.dateerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function U6(e,t,n){return e<t?e-t:e>n?e-n:0}function W6(e,t,n){return e<t?t:e>n?n:e}var G6=class e{constructor(e){this._date=e,this.declaredRootClass=`esri.arcade.arcadedate`}static fromParts(t=0,n=1,r=1,i=0,a=0,o=0,s=0,c){if(isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a)||isNaN(o)||isNaN(s))return null;let l=Sb.local(t,n).daysInMonth,u=Sb.fromObject({day:W6(r,1,l),year:t,month:W6(n,1,12),hour:W6(i,0,23),minute:W6(a,0,59),second:W6(o,0,59),millisecond:W6(s,0,999)},{zone:K6(c)});return u=u.plus({months:U6(n,1,12),days:U6(r,1,l),hours:U6(i,0,23),minutes:U6(a,0,59),seconds:U6(o,0,59),milliseconds:U6(s,0,999)}),new e(u)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??`system`}static arcadeDateAndZoneToArcadeDate(t,n){let r=K6(n);return t.isUnknownTimeZone||r===j6.instance?e.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new e(t._date.setZone(r))}static dateJSToArcadeDate(t){return new e(Sb.fromJSDate(t,{zone:`system`}))}static dateJSAndZoneToArcadeDate(t,n=`system`){let r=K6(n);return new e(Sb.fromJSDate(t,{zone:r}))}static unknownEpochToArcadeDate(t){return new e(Sb.fromMillis(t,{zone:j6.instance}))}static unknownDateJSToArcadeDate(t){return new e(Sb.fromMillis(t.getTime(),{zone:j6.instance}))}static epochToArcadeDate(t,n=`system`){let r=K6(n);return new e(Sb.fromMillis(t,{zone:r}))}static dateTimeToArcadeDate(t){return new e(t)}clone(){return new e(this._date)}changeTimeZone(t){let n=K6(t);return e.dateTimeToArcadeDate(this._date.setZone(n))}static dateTimeAndZoneToArcadeDate(t,n){let r=K6(n);return t.zone===j6.instance||r===j6.instance?e.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new e(t.setZone(r))}static nowToArcadeDate(t){let n=K6(t);return new e(Sb.fromJSDate(new Date,{zone:n}))}static nowUTCToArcadeDate(){return new e(Sb.utc())}get isSystem(){return this.timeZone===`system`||this.timeZone===e.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===j6.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return`unknown`;if(this._date.zone.type===`system`)return`system`;let e=this.zone;return e.type===`fixed`?e.fixed===0?`UTC`:e.formatOffset(0,`short`):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new e(this._date.plus(t))}diff(e,t){return this._date.diff(e._date,t)[t]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,t){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:t&&!this.isUnknownTimeZone})}toFormat(e,t){return this.isUnknownTimeZone&&(e=e.replaceAll(`Z`,``)),this._date.toFormat(e,t)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat(`yyyy-LL-dd HH:mm:ss`)}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new e(this._date.toUTC())}toLocal(){return new e(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;let n=Sb.fromISO(t,{setZone:!0});return new e(n)}};function K6(e,t=!0){if(e instanceof i_)return e;switch(H6(e)){case`system`:return`system`;case`utc`:return`UTC`;case`unknown`:return j6.instance}if(/^[+-]?[0-9]{1,2}(:[0-9]{2})?$/.test(e)){let t=B_.parseSpecifier(`UTC`+(e.startsWith(`+`)||e.startsWith(`-`)?``:`+`)+e);if(t)return t}let n=p_.create(e);if(!n.isValid){if(t)throw new nwe(`TimeZoneNotRecognized`);return null}return n}function q6(e){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,`[$&]`);let t=``;for(let n of e.match(/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g)||[])switch(n){case`D`:t+=`d`;break;case`DD`:t+=`dd`;break;case`DDD`:t+=`o`;break;case`d`:t+=`c`;break;case`ddd`:t+=`ccc`;break;case`dddd`:t+=`cccc`;break;case`M`:t+=`L`;break;case`MM`:t+=`LL`;break;case`MMM`:t+=`LLL`;break;case`MMMM`:t+=`LLLL`;break;case`YY`:t+=`yy`;break;case`Y`:case`YYYY`:t+=`yyyy`;break;case`Q`:t+=`q`;break;case`X`:case`x`:t+=n;break;default:n.length>=2&&n.startsWith(`[`)&&n.endsWith(`]`)?t+=`'${n.slice(1,-1)}'`:t+=`'${n}'`}return t}var J6=`esri.core.sql.dateonly`,Y6=class e{constructor(e,t,n){this._year=e,this._month=t,this._day=n,this.declaredRootClass=J6}static isDateOnly(e){return typeof e==`object`&&!!e&&`declaredRootClass`in e&&e.declaredRootClass===J6}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime(`unknown`).isValid}equals(t){return e.isDateOnly(t)&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new e(this._year,this._month,this._day)}toDateTime(e){return Sb.fromObject({day:this.day,month:this.month,year:this.year},{zone:K6(e)})}toDateTimeLuxon(e){return Sb.fromObject({day:this.day,month:this.month,year:this.year},{zone:K6(e)})}toString(){return`${this.year.toString().padStart(4,`0`)}-${this.month.toString().padStart(2,`0`)}-${this.day.toString().padStart(2,`0`)}`}toFormat(e=null,t=!0){if(e===null||e===``)return this.toString();if(t&&(e=q6(e)),!e)return``;let n=this.toDateTime(`unknown`);return G6.dateTimeToArcadeDate(n).toFormat(e,{locale:vg(),numberingSystem:`latn`})}toArcadeDate(){let e=this.toDateTime(`unknown`);return G6.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime(`unknown`).toMillis()}toJSDate(){return this.toDateTime(`unknown`).toJSDate()}toStorageFormat(){return this.toFormat(`yyyy-LL-dd`,!1)}toSQLValue(){return this.toFormat(`yyyy-LL-dd`,!1)}toSQLWithKeyword(){return`date '`+this.toFormat(`yyyy-LL-dd`,!1)+`'`}plus(t,n){return e.fromDateTime(this.toUTCDateTime().plus({[t]:n}))}toUTCDateTime(){return Sb.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,t){switch(t.toLowerCase()){case`days`:case`day`:case`d`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`days`).days;case`months`:case`month`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`months`).months;case`minutes`:case`minute`:case`m`:return t===`M`?this.toUTCDateTime().diff(e.toUTCDateTime(),`months`).months:this.toUTCDateTime().diff(e.toUTCDateTime(),`minutes`).minutes;case`seconds`:case`second`:case`s`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`seconds`).seconds;case`milliseconds`:case`millisecond`:case`ms`:default:return this.toUTCDateTime().diff(e.toUTCDateTime(),`milliseconds`).milliseconds;case`hours`:case`hour`:case`h`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`hours`).hours;case`years`:case`year`:case`y`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`years`).years}}static fromMilliseconds(t){let n=Sb.fromMillis(t,{zone:B_.utcInstance});return n.isValid?e.fromParts(n.year,n.month,n.day):null}static fromSeconds(t){let n=Sb.fromSeconds(t,{zone:B_.utcInstance});return n.isValid?e.fromParts(n.year,n.month,n.day):null}static fromReader(t){if(!t)return null;let n=t.split(`-`);return n.length===3?new e(parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)):null}static fromParts(t,n,r){let i=new e(t,n,r);return!1===i.isValid?null:i}static fromDateJS(t){return e.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return e.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(t,n=null){if(t===``||t===null)return null;let r=[];if(n)(n=q6(n))&&r.push(n);else if(n===null||n===``){let n=Sb.fromISO(t,{setZone:!0});return n.isValid?e.fromParts(n.year,n.month,n.day):null}for(let i of r){let r=Sb.fromFormat(t,n??i);if(r.isValid)return new e(r.year,r.month,r.day)}return null}static fromNow(t=`system`){let n=Sb.fromJSDate(new Date).setZone(K6(t));return new e(n.year,n.month,n.day)}};function rwe(e){if(e==null)return null;switch(e.type){case`polygon`:case`multipoint`:case`polyline`:return e.extent;case`point`:return new Rd({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case`extent`:return e}return null}function iwe(e){if(e==null)return null;let t=e.clone();return e.cache._geVersion!==void 0&&(t.cache._geVersion=e.cache._geVersion),t}function X6(e){return typeof e==`number`&&isFinite(e)&&Math.floor(e)===e}function Z6(e){if(!e)return``;let t=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g,n=``;for(let r of e.match(t)||[])switch(r){case`SSS`:case`m`:case`mm`:case`h`:case`hh`:case`H`:case`HH`:case`s`:case`ss`:n+=r;break;case`A`:case`a`:n+=`a`;break;default:n+=`'${r}'`}return n}var Q6=`esri.core.sql.timeonly`,$6=class e{constructor(e,t,n,r){this._hour=e,this._minute=t,this._second=n,this._millisecond=r,this.declaredRootClass=Q6}static isTimeOnly(e){return typeof e==`object`&&!!e&&`declaredRootClass`in e&&e.declaredRootClass===Q6}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return e.isTimeOnly(t)&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new e(this.hour,this.minute,this.second,this.millisecond)}isValid(){return X6(this.hour)&&X6(this.minute)&&X6(this.second)&&X6(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,`0`)}:${this.minute.toString().padStart(2,`0`)}:${this.second.toString().padStart(2,`0`)}`+(this.millisecond>0?`.`+this.millisecond.toString().padStart(3,`0`):``)}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,`0`)}:${this.minute.toString().padStart(2,`0`)}:${this.second.toString().padStart(2,`0`)}${this.millisecond>0?`.`+this.millisecond.toString().padStart(3,`0`):``}'`}toStorageString(){return`${this.hour.toString().padStart(2,`0`)}:${this.minute.toString().padStart(2,`0`)}:${this.second.toString().padStart(2,`0`)}`}toFormat(e=null){return e===null||e===``?this.toString():(e=Z6(e))?Sb.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:vg(),numberingSystem:`latn`}):``}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,n,r,i){let a=new e(t,n,r,i);return a.isValid()?a:null}static fromReader(t){if(!t)return null;let n=t.split(`:`);return n.length===3?new e(parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10),0):null}static fromMilliseconds(t){if(t>864e5||t<0)return null;let n=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),i=Math.floor(t/36e5%24),a=Math.floor(t%1e3);return new e(i,r,n,a)}static fromDateJS(t){return new e(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new e(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(t,n=null){if(t===``||t===null)return null;let r=[];n?(n=Z6(n))&&r.push(n):n!==null&&n!==``||(r.push(`HH:mm:ss`),r.push(`HH:mm:ss.SSS`),r.push(`hh:mm:ss a`),r.push(`hh:mm:ss.SSS a`),r.push(`HH:mm`),r.push(`hh:mm a`),r.push(`H:mm`),r.push(`h:mm a`),r.push(`H:mm:ss`),r.push(`h:mm:ss a`),r.push(`H:mm:ss.SSS`),r.push(`h:mm:ss.SSS a`));for(let n of r){let r=Sb.fromFormat(t,n);if(r.isValid)return new e(r.hour,r.minute,r.second,r.millisecond)}return null}plus(t,n){switch(t){case`days`:case`years`:case`months`:return this.clone();case`hours`:case`minutes`:case`seconds`:case`milliseconds`:return e.fromDateTime(this.toUTCDateTime().plus({[t]:n}))}return null}toUTCDateTime(){return Sb.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,t){switch(t.toLowerCase()){case`days`:case`day`:case`d`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`days`).days;case`months`:case`month`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`months`).months;case`minutes`:case`minute`:case`m`:return t===`M`?this.toUTCDateTime().diff(e.toUTCDateTime(),`months`).months:this.toUTCDateTime().diff(e.toUTCDateTime(),`minutes`).minutes;case`seconds`:case`second`:case`s`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`seconds`).seconds;case`milliseconds`:case`millisecond`:case`ms`:default:return this.toUTCDateTime().diff(e.toUTCDateTime(),`milliseconds`).milliseconds;case`hours`:case`hour`:case`h`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`hours`).hours;case`years`:case`year`:case`y`:return this.toUTCDateTime().diff(e.toUTCDateTime(),`years`).years}}},awe=[`geometry`,`scale`,`timeProperties`];function owe(e,t){if(t!=null)for(let n of awe)t.hasArcadeDependency(n)&&e.add(n);return e}function swe(e,t){return e8.create(e,t,null,[`$feature`,`$view`])}function cwe(e,t,n){return e8.create(e,t,n,[`$feature`,`$view`,`$config`])}var e8=class e{static async create(t,n,r,i){let{arcade:a,Dictionary:o}=await bk(),s;try{s=a.parseScript(t)}catch(e){throw new D(`arcade-bad-expression`,`Failed to parse arcade script`,{script:t,error:e})}let c=a.scriptUsesGeometryEngine(s);c&&await a.enableGeometrySupport(),await a.loadDependentModules(new Set,s,null,!1,c);let l={vars:i.reduce((e,t)=>({...e,[t]:null}),{}),spatialReference:n,useAsync:!1},u=a.compileScript(s,l),d=null;r!=null&&(d=new o(r),d.immutable=!0);let f=new o;return f.immutable=!1,f.setField(`scale`,0),new e(t,a,s,u,n,f,d,o)}constructor(e,t,n,r,i,a,o,s){this.script=e,this._arcade=t,this._syntaxTree=n,this._compiled=r,this._spatialReference=i,this._viewDict=a,this._configDict=o,this._dictionaryCtor=s,this._dependencies=new Map,this._featureReader=new t8,this._dependencies.set(`geometry`,t.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set(`scale`,this._arcade.referencesMember(this._syntaxTree,`scale`)),this._dependencies.set(`timeProperties`,this._arcade.scriptUsesViewProperties(this._syntaxTree,[`timeProperties`]))}evaluate(e,t){let n=t.$view?.timeZone;if(t.$view){let e;if(this._viewDict.setField(`scale`,t.$view.scale),t.$view.timeProperties!=null){let{currentStart:r,currentEnd:i}=t.$view.timeProperties;e=new this._dictionaryCtor({currentStart:r==null?void 0:n==null?G6.unknownEpochToArcadeDate(r):G6.epochToArcadeDate(r,n),currentEnd:i==null?void 0:n==null?G6.unknownEpochToArcadeDate(i):G6.epochToArcadeDate(i,n),startIncluded:!0,endIncluded:!0})}this._viewDict.setField(`timeProperties`,e)}return this._compiled({vars:{$view:this._viewDict,$config:this._configDict,$feature:e},spatialReference:this._spatialReference,timeZone:n})}repurposeFeature(e,t){return this._featureReader.bind(e,t,this._spatialReference),this._featureReader}references(e){return this._dependencies.get(e)??!1}},t8=class{constructor(){this._boundTarget=null,this._boundSchema={fields:null,fieldsIndex:null,spatialReference:null,get geometryType(){return null},get objectIdField(){return null}},this.arcadeDeclaredClass=`esri.arcade.Feature`,this._contextTimeZone=null}bind(e,t,n){let r=t??new N6(n8(e.attributes));this._boundTarget=e,this._boundSchema.fields=r.fields,this._boundSchema.fieldsIndex=r,this._boundSchema.spatialReference=n}_getField(e){return this._boundSchema.fieldsIndex.get(e)}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this._boundSchema.fieldsIndex.has(e)}geometry(){if(`fromJSON`in this._boundTarget)return this._boundTarget.geometry;let e=gh(this._boundTarget.geometry);if(e){if(!this._boundSchema.spatialReference)throw Error(`InternalError: Expected spatial reference to be defined`);e.spatialReference=this._boundSchema.spatialReference}return e}_hasGeometry(){return this._boundTarget.geometry!=null}isUnknownDateTimeField(e){return this._boundSchema.fieldsIndex.getTimeZone(e)===Og}field(e,t=!0){let n=this._getField(e);if(n){let t=this._boundTarget.attributes[n.name];if(t==null)return null;switch(n.type){case`date-only`:case`esriFieldTypeDateOnly`:return Y6.fromReader(t);case`time-only`:case`esriFieldTypeTimeOnly`:return $6.fromReader(t);case`esriFieldTypeTimestampOffset`:case`timestamp-offset`:return G6.fromReaderAsTimeStampOffset(t);case`date`:case`esriFieldTypeDate`:return this.isUnknownDateTimeField(e)?G6.unknownEpochToArcadeDate(t):G6.epochToArcadeDate(t,this.contextTimeZone??`system`);default:return t}}if(t)throw Error(`Field ${e} does not exist`);return null}setField(e,t){throw Error(`Unable to update feature attribute values, feature is readonly`)}keys(){return this._boundSchema.fieldsIndex.fields.map(e=>e.name)}isEmpty(){return this._boundSchema.fields.length<=0&&!this._hasGeometry()}castToText(e=!1){return JSON.stringify(this._boundTarget)}gdbVersion(){return null}fullSchema(){return this._boundSchema}castAsJson(e=null){return{attributes:this._boundTarget.attributes,geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,t=null){return Promise.resolve(this.castAsJson(t))}};function n8(e){let t=[];for(let n in e)t.push({name:n,alias:n,type:typeof e[n]==`string`?`esriFieldTypeString`:`esriFieldTypeDouble`});return t}var r8=class e{static async from(t,n,r){let i=t.dictionary_version?RX.parse(t.dictionary_version):null,a=new Set(t.itemsNames),o={};if(n)for(let e in n)o[e]=n[e];if(t.authoringInfo.configuration)for(let e of t.authoringInfo.configuration)o.hasOwnProperty(e.name)||(o[e.name]=e.value);let s=new Set(t.authoringInfo.symbol);for(let e of Object.keys(r))s.delete(e);s.size&&E.getLogger(`esri.renderers.support.DictionaryScriptEvaluator`).warnOnce(`missing-fields: fieldMap entries for the following symbol fields are missing`,{symbolFields:s});let c=await cwe(t.expression,null,o);if(!c)throw new D(`dictionary-renderer:expression-error`,`Unable to create dictionary renderer expression`);let l=!i||!i.greaterEqual(4,0);l&&E.getLogger(`esri.renderers.support.DictionaryScriptEvaluator`).warnOnce(`Dictionary script does not support native field types. Applying fallback`,{version:i});let u=new lwe(r,l);return new e(l,a,c,u)}constructor(e,t,n,r){this._requiresFieldCoercionToString=e,this._itemNames=t,this._compiled=n,this._reader=r}get itemNames(){return this._itemNames}evaluate(e,t,n,r){try{return this._reader.bind(e,n,r),this._compiled.evaluate(this._reader,{$view:{scale:t}})}catch(e){E.getLogger(`esri.renderers.support.DictionaryScriptEvaluator`).warnOnce(`arcade: dictionary script evaluation failed`,{error:e})}return null}createDictionaryFieldsIndex(e){if(!this._requiresFieldCoercionToString)return new N6(e);let t=e.map(e=>({...e,type:`esriFieldTypeString`}));return new N6(t)}},lwe=class extends t8{constructor(e,t){super(),this._fieldMap=e,this._requiresFieldCoercionToString=t}_getField(e){let t=this._fieldMap[e]??e;return this._boundSchema.fieldsIndex.get(t)}field(e){if(!this._requiresFieldCoercionToString)return super.field(e,!1);let t=this._getField(e);return t==null||this._boundTarget.attributes[t.name]==null?``:``+this._boundTarget.attributes[t.name]}},i8={Relative:0,Absolute:1},uwe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},a8={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:`Relative`,offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:`Draft`,anchorpointunits:`Relative`,offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:`Left`,kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:`Normal`,textstring:``,underline:!1,verticalalignment:`Bottom`,enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:`Round`,joinstyle:`Round`,miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:`Draft`,capstyle:`Round`,joinstyle:`Round`,miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:`Round`,joinstyle:`Round`,miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:`AcrossLine`,gradientSize:75,gradientSizeUnits:i8.Relative,gradientType:`Discrete`,interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:`Draft`,enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:`Linear`,gradientSize:75,gradientSizeUnits:i8.Relative,gradientType:`Discrete`,interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:`OpenEnded`,width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:`NoConstraint`,offsetalongline:0},CIMGeometricEffectDonut:{method:`Mitered`,option:`Accurate`,width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:`FullGeometry`},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:`Square`,offset:1,option:`Fast`},CIMGeometricEffectRadial:{angle:0,length:5},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:`Sinus`},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:`WithHalfGap`,offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:`Both`,offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:`Fixed`,offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:`ClipAtBoundary`},CIMMarkerPlacementOnLine:{relativeto:`LineMiddle`,startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:`OnPolygon`,offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:`Loop`,repeatdelay:0,easing:`Linear`},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0},CIMSymbolAnimationMoveAlongLine:{speed:30,distanceAlong:100}};function dwe(e){return typeof e==`function`}function fwe(e,t,n,r){return dwe(e)?e(t,n,r):e}function pwe(e){return[e.r,e.g,e.b,e.a]}var mwe=` /-,
`;function o8(e){let t=e.length;for(;t--;)if(!mwe.includes(e.charAt(t)))return!1;return!0}function hwe(e,t){let n=[],r=0,i=-1;do if(i=e.indexOf(`[`,r),i>=r){if(i>r){let t=e.slice(r,i);n.push([t,null,o8(t)])}if(r=i+1,i=e.indexOf(`]`,r),i>=r){if(i>r){let a=t[e.slice(r,i)];a&&n.push([null,a,!1])}r=i+1}}while(i!==-1);if(r<e.length){let t=e.slice(r);n.push([t,null,o8(t)])}return n}function gwe(e,t,n){let r=``,i=null;for(let n of t){let[t,a,o]=n;if(t!=null&&t!==``)o?i=t:(i!=null&&(r+=i,i=null),r+=t);else{let t=e.readAttribute(a);t!=null&&t!==``&&(i!==null&&(r+=i,i=null),r+=t)}}return s8(r,n)}function _we(e,t,n,r){let i=``,a=null;for(let r of t){let[t,o,s]=r;if(t!=null&&t!==``)s?a=t:(a!=null&&(i+=a,a=null),i+=t);else{let t=o;n!=null&&(t=Uwe(o,n));let r=e.attributes[t];r!=null&&r!==``&&(a!=null&&(i+=a,a=null),i+=r)}}return s8(i,r)}function s8(e,t){switch(typeof e!=`string`&&(e=String(e)),t){case`LowerCase`:return e.toLowerCase();case`Allcaps`:return e.toUpperCase();default:return e}}function vwe(e,t,n,r,i,a,o=!0){let s=t/i,c=n/a,l=Math.ceil(s/2),u=Math.ceil(c/2);for(let n=0;n<a;n++)for(let d=0;d<i;d++){let f=4*(d+(o?a-n-1:n)*i),p=0,m=0,h=0,g=0,_=0,v=0,y=0,b=(n+.5)*c;for(let r=Math.floor(n*c);r<(n+1)*c;r++){let n=Math.abs(b-(r+.5))/u,i=(d+.5)*s,a=n*n;for(let n=Math.floor(d*s);n<(d+1)*s;n++){let o=Math.abs(i-(n+.5))/l,s=Math.sqrt(a+o*o);s>=-1&&s<=1&&(p=2*s*s*s-3*s*s+1,p>0&&(o=4*(n+r*t),y+=p*e[o+3],h+=p,e[o+3]<255&&(p=p*e[o+3]/250),g+=p*e[o],_+=p*e[o+1],v+=p*e[o+2],m+=p))}}r[f]=g/m,r[f+1]=_/m,r[f+2]=v/m,r[f+3]=y/h}}function c8(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function ywe(e){return e.data?.symbol??null}function bwe(e){return e.type===`CIMVectorMarker`||e.type===`CIMPictureMarker`||e.type===`CIMBarChartMarker`||e.type===`CIMCharacterMarker`||e.type===`CIMPieChartMarker`||e.type===`CIMStackedBarChartMarker`}function xwe(e){return e.type===`CIMGradientStroke`||e.type===`CIMPictureStroke`||e.type===`CIMSolidStroke`}function Swe(e){return e!=null&&(e.type===`CIMGradientFill`||e.type===`CIMHatchFill`||e.type===`CIMPictureFill`||e.type===`CIMSolidFill`||e.type===`CIMWaterFill`)}function l8(e){return e!=null&&(e.type===`CIMMarkerPlacementAlongLineRandomSize`||e.type===`CIMMarkerPlacementAlongLineSameSize`||e.type===`CIMMarkerPlacementAlongLineVariableSize`||e.type===`CIMMarkerPlacementAtExtremities`||e.type===`CIMMarkerPlacementAtMeasuredUnits`||e.type===`CIMMarkerPlacementAtRatioPositions`||e.type===`CIMMarkerPlacementOnLine`||e.type===`CIMMarkerPlacementOnVertices`)}var Cwe=(e,t=0)=>e==null||isNaN(e)?t:e,wwe=(e,t)=>e??t,Twe=(e,t)=>e??t,Ewe=e=>e.tintColor?c8(e.tintColor):[255,255,255,1],Dwe=class{constructor(e){this._import=e}getImportPromise(){return this._promise??=this._import().then(e=>this.module=e),this._promise}};function Owe(e){return new Dwe(e)}function kwe(e){if(!e)return`normal`;switch(e.toLowerCase()){case`italic`:return`italic`;case`oblique`:return`oblique`;default:return`normal`}}function Awe(e){if(!e)return`normal`;switch(e.toLowerCase()){case`bold`:return`bold`;case`bolder`:return`bolder`;case`lighter`:return`lighter`;default:return`normal`}}function jwe(e){let t=`normal`,n=`normal`;if(e){let r=e.toLowerCase();r.includes(`italic`)?t=`italic`:r.includes(`oblique`)&&(t=`oblique`),r.includes(`bold`)?n=`bold`:r.includes(`light`)&&(n=`lighter`)}return{style:t,weight:n}}function Mwe(e){return e.underline?`underline`:e.strikethrough?`line-through`:`none`}function u8(e){if(!e)return null;switch(e.type){case`CIMPolygonSymbol`:if(e.symbolLayers)for(let t of e.symbolLayers){let e=u8(t);if(e!=null)return e}break;case`CIMTextSymbol`:return u8(e.symbol);case`CIMSolidFill`:return e.color}return null}function d8(e){if(e)switch(e.type){case`CIMPolygonSymbol`:case`CIMLineSymbol`:{let t=e.symbolLayers;if(t)for(let e of t){let t=d8(e);if(t!=null)return t}break}case`CIMTextSymbol`:return d8(e.symbol);case`CIMSolidStroke`:return e.color}}function Nwe(e){for(let t of e)if(t.enable)switch(t.type){case`CIMSolidStroke`:case`CIMGradientStroke`:case`CIMPictureStroke`:return!0}return!1}function f8(e){if(e)switch(e.type){case`CIMPolygonSymbol`:case`CIMLineSymbol`:if(e.symbolLayers)for(let t of e.symbolLayers){let e=f8(t);if(e!==void 0)return e}break;case`CIMTextSymbol`:return f8(e.symbol);case`CIMSolidStroke`:case`CIMGradientStroke`:case`CIMPictureStroke`:return e.width}}function Pwe(e){switch(e){case`Left`:default:return`left`;case`Right`:return`right`;case`Center`:case`Justify`:return`center`}}function Fwe(e){switch(e){case`Top`:default:return`top`;case`Center`:return`middle`;case`Baseline`:return`baseline`;case`Bottom`:return`bottom`}}function Iwe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]==`string`?`esriFieldTypeString`:`esriFieldTypeDouble`}))}var Lwe=e=>e.includes(`data:image/svg+xml`);function Rwe(e){if(!e)return null;switch(e.type){case`CIMPointSymbol`:case`CIMTextSymbol`:return`esriGeometryPoint`;case`CIMLineSymbol`:return`esriGeometryPolyline`;case`CIMPolygonSymbol`:return`esriGeometryPolygon`;default:return null}}function p8(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function zwe(e,t,n,r,i,a,o=!0){let{infos:s}=a,c=1,l=0,u=0,d=0,f=1;for(let{absoluteAnchorPoint:e,offsetX:t,offsetY:n,rotation:r,size:i,frameHeight:a,rotateClockWise:p,scaleSymbolsProportionally:m}of s)f=e?1:c,u=y8(t,n,l,f,u),d=v8(t,n,l,f,d),a&&(m||o)&&(c*=i/a),l=b8(r,p,l);let p=y8(r,i,l,f,u),m=v8(r,i,l,f,d);return{size:e*c,rotation:b8(t,n,l),offsetX:p,offsetY:m}}function m8(e){if(e==null)return!1;if(Array.isArray(e))return e.every(e=>m8(e));switch(typeof e){case`string`:return!!e;case`number`:return!isNaN(e)}}function h8(e,t){if(t===`color`||t===`outlinecolor`||t===`backgroundcolor`||t===`borderlinecolor`||t===`tintcolor`)return[...uwe[t]];let n=a8[e];if(!n)throw Error(`InternalError: default value for type ${e}.`);return n[t]}function Bwe(e){return e.split(` `).map(e=>Number(e))}function g8(e){return typeof e==`string`?Bwe(e):e}function Vwe(e){return e?.dashTemplate&&(e.dashTemplate=g8(e.dashTemplate)),e}function _8(e){if(e==null)return`Normal`;switch(e.type){case`CIMTextSymbol`:return e.textCase??`Normal`;case`CIMPointSymbol`:case`CIMLineSymbol`:case`CIMPolygonSymbol`:{let t=e.symbolLayers;if(!t)return`Normal`;for(let e of t)if(e.type===`CIMVectorMarker`)return _8(e)}break;case`CIMVectorMarker`:{let t=e.markerGraphics;if(!t)return`Normal`;for(let e of t)if(e.symbol)return _8(e.symbol)}}return`Normal`}function Hwe(e){if(e)switch(e.type){case`CIMTextSymbol`:return e.height;case`CIMPointSymbol`:{let t=0;if(e.symbolLayers){for(let n of e.symbolLayers)if(n)switch(n.type){case`CIMCharacterMarker`:case`CIMPictureMarker`:case`CIMVectorMarker`:case`CIMObjectMarker3D`:case`CIMglTFMarker3D`:{let e=n.size??a8.CIMVectorMarker.size;e>t&&(t=e);break}}}return t}case`CIMLineSymbol`:case`CIMPolygonSymbol`:{let t=0;if(e.symbolLayers){for(let n of e.symbolLayers)if(n)switch(n.type){case`CIMSolidStroke`:case`CIMPictureStroke`:case`CIMGradientStroke`:{let e=n.width;e!=null&&e>t&&(t=e);break}case`CIMCharacterMarker`:case`CIMPictureMarker`:case`CIMVectorMarker`:case`CIMObjectMarker3D`:case`CIMglTFMarker3D`:if(n.markerPlacement&&l8(n.markerPlacement)){let e=n.size??a8.CIMVectorMarker.size;e>t&&(t=e)}break;case`CIMPictureFill`:{let e=n.height;e!=null&&e>t&&(t=e)}}}return t}}}function Uwe(e,t){if(t!==null){let n=t.get(e);return n?n.name:e}return e}function Wwe(e){return e.map(e=>({...e,propertyName:p8(e.propertyName)}))}function Gwe(e){let t={};for(let n in e){let r=e[n];t[p8(n)]=r}return t}function v8(e,t,n,r,i){let a=n*Math.PI/180;if(a){let n=Math.cos(a);return(Math.sin(a)*e+n*t)*r+i}return t*r+i}function y8(e,t,n,r,i){let a=n*Math.PI/180;return a?(Math.cos(a)*e-Math.sin(a)*t)*r+i:e*r+i}function b8(e,t,n){return t?n-e:n+e}function Kwe(e,t,n){let r=n===`Color`||n===`TintColor`||n===`ToColor`,i=n===`Rotation`||n===`Angle`||n===`ToRotation`,a=t[p8(n)];if(a!=null&&(r?a=[a[0]/255,a[1]/255,a[2]/255,a[3]/255]:i&&(a*=Math.PI/180)),a??(a=h8(t.type,n.toLowerCase()),a!=null&&(r?a=[a[0]/255,a[1]/255,a[2]/255,a[3]]:i&&(a*=Math.PI/180))),t.primitiveName!=null){let o=e[t.primitiveName];if(o!=null){let e=o[n];e==null||(typeof e==`string`||typeof e==`number`||Array.isArray(e)?(a=e,a!=null&&(r?a=[a[0]/255,a[1]/255,a[2]/255,a[3]/255]:i&&(a*=Math.PI/180))):(a={valueExpressionInfo:e,defaultValue:a},a!=null&&(r?a={type:`Process`,op:`ArcadeColor`,value:a}:i&&(a={type:`Process`,op:`Divide`,left:a,right:180/Math.PI}))))}}if(a==null)throw Error(`Failed to derive a value or an expression for "${n}".`);return a}function qwe(e,t,n){if(t[p8(n)]!=null)return!0;if(t.primitiveName!=null){let r=e[t.primitiveName];if(r!=null&&r[n]!=null)return!0}return!1}function Jwe(e,t){return Math.max(Math.min((e??t)/100,1),0)}var Ywe={type:`CIMSimpleLineCallout`,lineSymbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,width:.5,color:[0,0,0,255]}]}},x8=class{constructor(e,t,n,r){this.url=e,this.fieldMap=n,this.dictionaryInfo=r,this._symbolPartCache=new k6(100),this._evaluator=(async()=>r8.from(await r,t,n))()}async getSymbolAsync(e,t,n=!0){let r=await this._evaluator,i=t?.fields??n8(e.attributes),a=r.createDictionaryFieldsIndex(i),o=r.evaluate(e,t?.scale??0,a,t?.spatialReference);if(o==null)return null;let s=hh(e.geometry),c=A6.parse(o,r.itemNames,s),l=s===`esriGeometryPoint`&&!e.geometry?.hasZ;return await this._cimPartsToCIMSymbol(e,c.partNames,c.overrides,l,t,n,a)}async getSymbolForControlString(e,t,n){let r=await this._evaluator,i=A6.parse(e,r.itemNames,t),a=t===`esriGeometryPoint`&&!n,o=S8(await Promise.all(i.partNames.map(e=>this._getSymbolPart(e))),i.overrides,a);return new qM({data:o})}async _cimPartsToCIMSymbol(e,t,n,r,i,a,o){let s=t.map(e=>this._getSymbolPart(e,i)),c=await Promise.all(s);if(a&&this.fieldMap&&c.length>0){let{OverrideHelper:t}=await R(async()=>{let{OverrideHelper:e}=await import(`./OverrideHelper-BMUKsh_Y.js`);return{OverrideHelper:e}},__vite__mapDeps([433,191,14,286,287]));c=C(c);for(let n of c)t.applyDictionaryTextOverrides(n,e,this.fieldMap,o,_8(n))}let l=S8(c,n,r);return new qM({data:l})}async _fetchSymbolPart(e,t){let n=await this.dictionaryInfo,r=(this.url+`/`+n.cimRefTemplateUrl).replaceAll(/\{itemName\}/gi,e),{data:i}=await Qc(r,{responseType:`json`,query:{f:`json`},...t});return i}async _getSymbolPart(e,t){let n=this._symbolPartCache.get(e);return n||(n=this._fetchSymbolPart(e,t),this._symbolPartCache.put(e,n)),n}};function S8(e,t,n){if(!e||e.length===0)return null;let r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(let t of e){let e=t;if(e.effects!=null)for(let t of e.symbolLayers)t.effects==null?t.effects=e.effects:t.effects.unshift(...e.effects);r.symbolLayers.unshift(...e.symbolLayers)}}return n&&(r.callout=Ywe),{type:`CIMSymbolReference`,symbol:r,primitiveOverrides:t}}var C8,w8=C8=class extends J2(a2){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type=`dictionary`}get _loader(){let e=this.getDictionaryInfo();return new x8(this.url,this.config,this.fieldMap??{},e)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:`number`})}writeVisualVariables(e,t,n,r){r?.origin||super.writeVisualVariables(e,t,n,r)}clone(){return new C8({config:C(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:C(this.fieldMap),url:C(this.url),visualVariables:C(this.visualVariables)})}async getSymbolAsync(e,t,n=!0){return this._loader.getSymbolAsync(e,t,n)}async getSymbolForControlString(e,t,n){return this._loader.getSymbolForControlString(e,t,n)}getDictionaryInfo(){return this._dictionaryInfoPromise||=this._fetchDictionaryInfo(),this._dictionaryInfoPromise}async collectRequiredFields(e,t){for(let n in await this.collectVVRequiredFields(e,t),this.scaleExpression&&await kk(e,t,null,this.scaleExpression),this.fieldMap){let r=this.fieldMap[n];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),``)??``}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}async _fetchDictionaryInfo(){let{data:e}=await Qc(this.url+`/resources/styles/dictionary-info.json`,{responseType:`json`,query:{f:`json`}});return e}};e([N({type:x8})],w8.prototype,`_loader`,null),e([N({type:Object,json:{read:{source:`configuration`},write:{target:`configuration`}}})],w8.prototype,`config`,void 0),e([N({type:Object,json:{write:!0}})],w8.prototype,`fieldMap`,void 0),e([N({type:String,json:{read:{source:`scalingExpressionInfo.expression`},write:!0}})],w8.prototype,`scaleExpression`,void 0),e([M(`scaleExpression`)],w8.prototype,`writeData`,null),e([N({type:String,json:{read:{source:`scalingExpressionInfo.title`},write:{target:`scalingExpressionInfo.title`,overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],w8.prototype,`scaleExpressionTitle`,void 0),e([N({type:String,json:{write:!0}})],w8.prototype,`url`,void 0),e([M(`visualVariables`)],w8.prototype,`writeVisualVariables`,null),w8=C8=e([P(`esri.renderers.DictionaryRenderer`)],w8);var T8,E8=T8=class extends L{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e==`function`?(E.getLogger(this).error(`.field: field must be a string value`),null):Ct(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new T8({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e([N({type:J,json:{type:[Number],write:!0}})],E8.prototype,`color`,void 0),e([N({type:String,json:{write:!0}})],E8.prototype,`field`,void 0),e([Tr(`field`)],E8.prototype,`castField`,null),e([N({type:String,json:{write:!0}})],E8.prototype,`label`,void 0),e([N({type:String,json:{write:!0}})],E8.prototype,`valueExpression`,void 0),e([N({type:String,json:{write:!0}})],E8.prototype,`valueExpressionTitle`,void 0),E8=T8=e([P(`esri.renderers.support.AttributeColorInfo`)],E8);var D8=E8,O8,k8=O8=class extends L{constructor(){super(...arguments),this.unit=null}clone(){return new O8({unit:this.unit})}};e([N({type:String,json:{write:!0}})],k8.prototype,`unit`,void 0),k8=O8=e([P(`esri.renderers.support.DotDensityLegendOptions`)],k8);var Xwe=k8,A8,j8=A8=class extends J2(a2){constructor(e){super(e),this.attributes=null,this.backgroundColor=new J([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape=`square`,this.dotSize=1,this.legendOptions=null,this.outline=new lF,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type=`dot-density`}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;let t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new DF({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((e,t)=>e+t.getAttributeHash(),``)??``}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new A8({attributes:C(this.attributes),backgroundColor:C(this.backgroundColor),dotBlendingEnabled:C(this.dotBlendingEnabled),dotShape:C(this.dotShape),dotSize:C(this.dotSize),dotValue:C(this.dotValue),legendOptions:C(this.legendOptions),outline:C(this.outline),referenceScale:C(this.referenceScale),seed:C(this.seed),visualVariables:C(this.visualVariables),authoringInfo:C(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||``)}-${this.outline&&JSON.stringify(this.outline.toJSON())||``}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(let n of this.attributes??[])n.valueExpression&&await kk(e,t,null,n.valueExpression),n.field&&e.add(n.field)}};e([N({type:[D8],json:{write:!0}})],j8.prototype,`attributes`,void 0),e([N({type:J,json:{write:!0}})],j8.prototype,`backgroundColor`,void 0),e([N({type:Boolean,json:{write:!0}})],j8.prototype,`dotBlendingEnabled`,void 0),e([N({type:String,json:{write:!1}})],j8.prototype,`dotShape`,void 0),e([N({type:Number,json:{write:!0}})],j8.prototype,`dotSize`,void 0),e([N({type:Xwe,json:{write:!0}})],j8.prototype,`legendOptions`,void 0),e([N({type:lF,json:{default:null,write:!0}})],j8.prototype,`outline`,void 0),e([N({type:Number,json:{write:!0}})],j8.prototype,`dotValue`,void 0),e([N({type:Number,json:{write:!0}})],j8.prototype,`referenceScale`,void 0),e([N({type:Number,json:{write:!0}})],j8.prototype,`seed`,void 0),e([A({dotDensity:`dot-density`})],j8.prototype,`type`,void 0),j8=A8=e([P(`esri.renderers.DotDensityRenderer`)],j8);var M8,N8=M8=class extends L{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new M8({color:this.color&&this.color.clone(),ratio:this.ratio})}};e([N({type:J,json:{type:[Wt],default:null,write:{isRequired:!0}}})],N8.prototype,`color`,void 0),e([N({type:Number,json:{write:{isRequired:!0}}})],N8.prototype,`ratio`,void 0),N8=M8=e([P(`esri.renderers.support.HeatmapColorStop`)],N8);var P8=class extends I(L){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};e([N({type:String,json:{write:!0}})],P8.prototype,`minLabel`,void 0),e([N({type:String,json:{write:!0}})],P8.prototype,`maxLabel`,void 0),e([N({type:String,json:{write:!0}})],P8.prototype,`title`,void 0),P8=e([P(`esri.renderers.support.HeatmapLegendOptions`)],P8);function F8(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Zwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function I8(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function L8(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function R8(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function z8(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function B8(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Qwe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function $we(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function V8(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function H8(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function U8(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function W8(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function eTe(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function G8(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function K8(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function q8(e){let t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function J8(e){let t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function tTe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function nTe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Y8(e,t){let n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o),e}function X8(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Z8(e,t,n,r){let i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}function rTe(e,t=1){let n=rf,r,i,a,o,s,c;do r=2*n()-1,i=2*n()-1,s=r*r+i*i;while(s>=1);do a=2*n()-1,o=2*n()-1,c=a*a+o*o;while(c>=1);let l=Math.sqrt((1-s)/c);return e[0]=t*r,e[1]=t*i,e[2]=t*a*l,e[3]=t*o*l,e}function Q8(e,t,n){let r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function iTe(e,t,n){let r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2],l=n[3],u=l*r+s*a-c*i,d=l*i+c*r-o*a,f=l*a+o*i-s*r,p=-o*r-s*i-c*a;return e[0]=u*l+p*-o+d*-c-f*-s,e[1]=d*l+p*-s+f*-o-u*-c,e[2]=f*l+p*-c+u*-s-d*-o,e[3]=t[3],e}function aTe(e){return`vec4(`+e[0]+`, `+e[1]+`, `+e[2]+`, `+e[3]+`)`}function $8(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function e5(e,t){let n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],c=t[2],l=t[3],u=nf();return Math.abs(n-o)<=u*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=u*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-c)<=u*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-l)<=u*Math.max(1,Math.abs(a),Math.abs(l))}var oTe=R8,sTe=z8,cTe=B8,lTe=G8,uTe=K8,dTe=q8,fTe=J8;Object.freeze(Object.defineProperty({__proto__:null,add:L8,ceil:Qwe,copy:F8,copyVec3:Zwe,dist:lTe,distance:G8,div:cTe,divide:B8,dot:X8,equals:e5,exactEquals:$8,floor:$we,inverse:nTe,len:dTe,length:q8,lerp:Z8,max:H8,min:V8,mul:sTe,multiply:z8,negate:tTe,normalize:Y8,random:rTe,round:U8,scale:W8,scaleAndAdd:eTe,set:I8,sqrDist:uTe,sqrLen:fTe,squaredDistance:K8,squaredLength:J8,str:aTe,sub:oTe,subtract:R8,transformMat4:Q8,transformQuat:iTe},Symbol.toStringTag,{value:`Module`}));function t5(){return[0,0,0,0]}function n5(e){return[e[0],e[1],e[2],e[3]]}function r5(e,t,n,r){return[e,t,n,r]}function i5(e,t,n,r){return[e,t,n,r]}function a5(e,t=t5()){let n=Math.min(4,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function o5(){return t5()}function s5(){return r5(1,1,1,1)}function c5(){return r5(1,0,0,0)}function l5(){return r5(0,1,0,0)}function u5(){return r5(0,0,1,0)}function d5(){return r5(0,0,0,1)}var f5=o5(),p5=s5(),pTe=c5(),mTe=l5(),hTe=u5(),gTe=d5();Object.freeze(Object.defineProperty({__proto__:null,ONES:p5,UNIT_W:gTe,UNIT_X:pTe,UNIT_Y:mTe,UNIT_Z:hTe,ZEROS:f5,clone:n5,create:t5,freeze:i5,fromArray:a5,fromValues:r5,ones:s5,unitW:d5,unitX:c5,unitY:l5,unitZ:u5,zeros:o5},Symbol.toStringTag,{value:`Module`}));var m5=2.4;function _Te(e){return Yw(e*m5)}function vTe(e){return Jw(e)/m5}function yTe(e,t,n,r){let{color:i,ratio:a}=t,{color:o,ratio:s}=n;if(s===a){let e=1e-6;s===1?a-=e:s+=e}let c=Xa((r-a)/(s-a),0,1);Z8(e,i.toArray(),o.toArray(),c)}function bTe(e){let t=new Uint8ClampedArray(4*512);if(e=e.filter(({ratio:e})=>e>=0&&e<=1).sort((e,t)=>e.ratio-t.ratio).map(({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)})),e.length<1)return t;let n=e[0],r=e[0],i=1,a=t5();for(let o=0;o<512;o++){let s=(o+.5)/512;for(;s>r.ratio&&i<e.length;)n=r,r=e[i++];yTe(a,n,r,s),t.set(a,4*o)}return t}function xTe(e,t,n){let r=Math.sqrt(e**2+t**2)/n;return r>1?0:3/(Math.PI*n**2)*(1-r**2)**2}function STe(e){return typeof e==`function`?e:e?t=>+t[e]:()=>1}var h5;function g5(e){if(e!=null){let{maxDensity:t,minDensity:n,radius:r}=e;if(t!=null||n!=null||r!=null){let{blurRadius:t,maxPixelIntensity:n,minPixelIntensity:r,...i}=e;return i}}return e}var _5=h5=class extends a2{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new N8({ratio:0,color:new J(`rgba(255, 140, 0, 0)`)}),new N8({ratio:.75,color:new J(`rgba(255, 140, 0, 1)`)}),new N8({ratio:.9,color:new J(`rgba(255, 0,   0, 1)`)})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.referenceScale=0,this.type=`heatmap`,this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return g5(e)}get blurRadius(){return vTe(this.radius)}set blurRadius(e){let t=this.maxPixelIntensity,n=this.minPixelIntensity;this._set(`radius`,_Te(e)),this._set(`maxDensity`,t*this._pixelIntensityToDensity),this._set(`minDensity`,n*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set(`maxDensity`,e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set(`minDensity`,e*this._pixelIntensityToDensity)}get radius(){return this._get(`radius`)??18}set radius(e){this._set(`radius`,e)}get _pixelIntensityToDensity(){return 24/(m5**2*this.blurRadius**4)}read(e,t){e=g5(e),super.read(e,t)}getSymbol(){return new AF}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){let n=this.field,r=this.valueExpression;n&&typeof n==`string`&&Ok(e,t,n),r&&typeof r==`string`&&await kk(e,t,null,r)}getAttributeHash(){return``}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new h5({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:C(this.colorStops),field:this.field,legendOptions:C(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e([N({type:r2,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],_5.prototype,`authoringInfo`,void 0),e([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_5.prototype,`blurRadius`,null),e([N({type:[N8],json:{write:{isRequired:!0}}})],_5.prototype,`colorStops`,void 0),e([N({type:String,json:{write:!0}})],_5.prototype,`field`,void 0),e([N({type:P8,json:{write:!0}})],_5.prototype,`legendOptions`,void 0),e([N({type:Number,json:{write:!0}})],_5.prototype,`maxDensity`,void 0),e([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_5.prototype,`maxPixelIntensity`,null),e([N({type:Number,json:{write:!0}})],_5.prototype,`minDensity`,void 0),e([N({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_5.prototype,`minPixelIntensity`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],_5.prototype,`radius`,null),e([N({type:Number,range:{min:0},json:{default:0,write:!0}})],_5.prototype,`referenceScale`,void 0),e([A({heatmap:`heatmap`})],_5.prototype,`type`,void 0),e([N({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],_5.prototype,`valueExpression`,void 0),e([N({type:String})],_5.prototype,`valueExpressionTitle`,void 0),e([N({readOnly:!0})],_5.prototype,`_pixelIntensityToDensity`,null),_5=h5=e([P(`esri.renderers.HeatmapRenderer`)],_5);var v5=class extends I(L){constructor(){super(...arguments),this.color=new J([0,0,0,0]),this.label=null,this.threshold=0}};e([N({type:J,json:{write:!0}})],v5.prototype,`color`,void 0),e([N({type:String,json:{write:!0}})],v5.prototype,`label`,void 0),e([N({type:Number,range:{min:0,max:1},json:{write:!0}})],v5.prototype,`threshold`,void 0),v5=e([P(`esri.renderers.support.OthersCategory`)],v5);var CTe={base:l2,key:`type`,typeMap:{size:K2,opacity:v2}},y5=class extends J2(I(a2)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new J([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new v5,this.legendOptions=null,this.outline=null,this.type=`pie-chart`,this.visualVariables=null}get size(){return this._get(`size`)??12}set size(e){this._set(`size`,e)}getSymbol(){return new AF({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ge)}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),``)??``}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),``)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(let n of this.attributes)n.valueExpression&&await kk(e,t,null,n.valueExpression),n.field&&e.add(n.field)}};e([N({type:[D8],json:{write:!0}})],y5.prototype,`attributes`,void 0),e([N(d4)],y5.prototype,`backgroundFillSymbol`,void 0),e([N({type:J,json:{write:!0}})],y5.prototype,`defaultColor`,void 0),e([N({type:String,json:{write:!0}})],y5.prototype,`defaultLabel`,void 0),e([N({type:Number,range:{min:0,max:1},json:{write:!0}})],y5.prototype,`holePercentage`,void 0),e([N({type:v5,json:{write:!0}})],y5.prototype,`othersCategory`,void 0),e([N({type:w4,json:{write:!0}})],y5.prototype,`legendOptions`,void 0),e([N({type:lF,json:{default:null,write:!0}})],y5.prototype,`outline`,void 0),e([N({type:Number,cast:Xw,json:{write:!0}})],y5.prototype,`size`,null),e([A({pieChart:`pie-chart`})],y5.prototype,`type`,void 0),e([N({types:[CTe]})],y5.prototype,`visualVariables`,void 0),y5=e([P(`esri.renderers.PieChartRenderer`)],y5);var b5={key:`type`,base:a2,typeMap:{heatmap:_5,simple:m4,"unique-value":B4,"class-breaks":E6,"dot-density":j8,dictionary:w8,"pie-chart":y5},errorContext:`renderer`},x5={key:`type`,base:a2,typeMap:{simple:m4,"unique-value":B4,"class-breaks":E6,heatmap:_5},errorContext:`renderer`,validate:wTe};function wTe(e){switch(e.type){case`simple`:return TTe(e);case`unique-value`:return ETe(e);case`class-breaks`:return DTe(e);case`heatmap`:return e}}function TTe(e){if(e.symbol)return e;E.getLogger(`esri.renderers.support.types`).error(`Removed invalid 'simple' renderer without a symbol from web scene.`)}function ETe(e){let t=e.uniqueValueInfos,n=t?.filter(({symbol:e,label:t},n)=>(e||E.getLogger(`esri.renderers.support.types`).error(`Removed invalid unique value info ([${n}] ${t}) without a symbol from web scene.`),!!e));return n?.length!==t?.length&&(e.uniqueValueInfos=n),e}function DTe(e){let t=e.classBreakInfos,n=t?.filter(({symbol:e,label:t},n)=>(e||E.getLogger(`esri.renderers.support.types`).error(`Removed invalid class break info ([${n}] ${t}) without a symbol from web scene.`),!!e));return n?.length!==t?.length&&(e.classBreakInfos=n),e}function OTe(e,t){return S5(e,null,t)}var kTe=Kn({types:b5});function S5(e,t,n){return e?e&&(e.styleName||e.styleUrl)&&e.type!==`uniqueValue`?(n?.messages&&n.messages.push(new zn(`renderer:unsupported`,`Only UniqueValueRenderer can be referenced from a web style, but found '`+e.type+`'`,{definition:e,context:n})),null):kTe(e,t,n):null}var C5,w5=C5=class extends t6{constructor(e){super(e),this.type=`binning`,this.binType=`geohash`,this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Xw(`12px`),this.fields=[],this.renderer=null}writeFields(e,t,n){let r=e.filter(e=>e.statisticType!==`avg_angle`).map(e=>e.toJSON());Xe(n,r,t)}readRenderer(e,t,n){let r=t.drawingInfo?.renderer;return r?S5(r,t,n)??void 0:x3(t,n)}clone(){return new C5({fields:C(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:C(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:C(this.popupTemplate),renderer:C(this.renderer),binType:C(this.binType),size:this.size})}};e([A({binning:`binning`})],w5.prototype,`type`,void 0),e([A({geohash:`geohash`,square:`square`}),N({type:[`geohash`,`square`]})],w5.prototype,`binType`,void 0),e([N({type:Number,json:{write:!0}})],w5.prototype,`fixedBinLevel`,void 0),e([N({type:[v6],json:{read:{source:`drawingInfo.labelingInfo`},write:{target:`drawingInfo.labelingInfo`}}})],w5.prototype,`labelingInfo`,void 0),e([N(g0)],w5.prototype,`labelsVisible`,void 0),e([N({type:Number,json:{default:0,name:`visibilityInfo.maxScale`}})],w5.prototype,`maxScale`,void 0),e([N(h0)],w5.prototype,`popupEnabled`,void 0),e([N({type:NM,json:{name:`popupInfo`,write:!0}})],w5.prototype,`popupTemplate`,void 0),e([N({cast:e=>e===`auto`?e:wt(Xw(e))})],w5.prototype,`size`,void 0),e([N({type:[e6],json:{write:!0}})],w5.prototype,`fields`,void 0),e([M(`fields`)],w5.prototype,`writeFields`,null),e([N({types:b5,json:{write:{target:`drawingInfo.renderer`}}})],w5.prototype,`renderer`,void 0),e([j(`renderer`,[`drawingInfo.renderer`])],w5.prototype,`readRenderer`,null),w5=C5=e([P(`esri.layers.support.FeatureReductionBinning`)],w5);var T5;function E5(e){return e.type===`simple`&&!e.visualVariables?.length}var D5=T5=class extends L{constructor(e){super(e),this.type=`cluster`,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}get clusterRadius(){return this._get(`clusterRadius`)??Xw(`80px`)}set clusterRadius(e){this._set(`clusterRadius`,e)}get clusterMinSize(){return this._get(`clusterMinSize`)??Xw(`12px`)}set clusterMinSize(e){this._set(`clusterMinSize`,e)}get clusterMaxSize(){return this._get(`clusterMaxSize`)??Xw(`50px`)}set clusterMaxSize(e){this._set(`clusterMaxSize`,e)}readRenderer(e,t,n){let r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?E5(r)?null:S5(r,t,n)??void 0:x3(t,n)}readSymbol(e,t,n){let r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&E5(r)?S5(r,t,n)?.symbol:null}writeSymbol(e,t,n,r){let i=this.renderer?.authoringInfo?.isAutoGenerated;(!this.renderer||i)&&(t.drawingInfo={renderer:new m4({symbol:e}).write({},r)})}writeFields(e,t,n){let r=e.filter(e=>e.statisticType!==`avg_angle`).map(e=>e.toJSON());Xe(n,r,t)}readFields(e,t,n){return e.filter(e=>!e.isAutoGenerated).map(e=>e6.fromJSON(e))}clone(){return new T5({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:C(this.labelingInfo),labelsVisible:this.labelsVisible,fields:C(this.fields),maxScale:this.maxScale,renderer:C(this.renderer),symbol:C(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:C(this.popupTemplate)})}};e([N({type:[`cluster`],readOnly:!0,json:{write:!0}})],D5.prototype,`type`,void 0),e([N({cast:e=>e===`auto`?e:wt(Xw(e)),json:{write:!0}})],D5.prototype,`clusterRadius`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],D5.prototype,`clusterMinSize`,null),e([N({type:Number,cast:Xw,json:{write:!0}})],D5.prototype,`clusterMaxSize`,null),e([N({type:Number,json:{default:0,name:`visibilityInfo.maxScale`}})],D5.prototype,`maxScale`,void 0),e([N(h0)],D5.prototype,`popupEnabled`,void 0),e([N({type:NM,json:{read:{source:`popupInfo`},write:{target:`popupInfo`}}})],D5.prototype,`popupTemplate`,void 0),e([N({types:b5,json:{write:{target:`drawingInfo.renderer`}}})],D5.prototype,`renderer`,void 0),e([j(`renderer`,[`drawingInfo.renderer`])],D5.prototype,`readRenderer`,null),e([N({types:Upe})],D5.prototype,`symbol`,void 0),e([j(`symbol`,[`drawingInfo.renderer`])],D5.prototype,`readSymbol`,null),e([M(`symbol`)],D5.prototype,`writeSymbol`,null),e([N({type:[v6],json:{read:{source:`drawingInfo.labelingInfo`},write:{target:`drawingInfo.labelingInfo`}}})],D5.prototype,`labelingInfo`,void 0),e([N(g0)],D5.prototype,`labelsVisible`,void 0),e([N({type:[e6],json:{write:!0}})],D5.prototype,`fields`,void 0),e([M(`fields`)],D5.prototype,`writeFields`,null),e([j(`fields`)],D5.prototype,`readFields`,null),D5=T5=e([P(`esri.layers.support.FeatureReductionCluster`)],D5);var O5,k5=O5=class extends t6{constructor(e){super(e),this.type=`selection`}clone(){return new O5}};e([N({type:[`selection`]})],k5.prototype,`type`,void 0),k5=O5=e([P(`esri.layers.support.FeatureReductionSelection`)],k5);var A5={key:`type`,base:t6,typeMap:{cluster:D5,binning:w5}},j5={types:{key:`type`,base:t6,typeMap:{selection:k5,cluster:D5,binning:w5}},json:{name:`layerDefinition.featureReduction`,write:{allowNull:!0},origins:{"web-map":{types:A5},"portal-item":{types:A5},"web-scene":{types:{key:`type`,base:t6,typeMap:{selection:k5}},name:`layerDefinition.featureReduction`,write:{allowNull:!0,layerContainerTypes:iQ}}}}},ATe=()=>E.getLogger(`esri.views.2d.layers.support.clusterUtils`);c.add(`esri-cluster-arcade-enabled`,!0);var jTe=c(`esri-cluster-arcade-enabled`),MTe=new Set([`simple-line`,`simple-fill`,`picture-fill`]);function M5(e,t){let n=t.clone();if(!NTe(n))return n;if(t.symbols.some(e=>MTe.has(e.type))&&(n=new m4({symbol:new AF})),n.authoringInfo||=new r2,n.authoringInfo.isAutoGenerated=!0,`visualVariables`in n){let t=(n.visualVariables||[]).filter(e=>e.valueExpression!==`$view.scale`);t.forEach(t=>{t.type===`rotation`?t.field?t.field=P5(e,t.field,`avg_angle`,`number`):t.valueExpression&&=(t.field=N5(e,t.valueExpression,`avg_angle`,`number`),null):t.normalizationField?(t.field=P5(e,t.field,`avg_norm`,`number`,t.normalizationField),t.normalizationField=null):t.field?t.field=P5(e,t.field,`avg`,`number`):t.valueExpression&&=(t.field=N5(e,t.valueExpression,`avg`,`number`),null)}),n.visualVariables=t}switch(n.type){case`simple`:break;case`pie-chart`:for(let t of n.attributes)t.field?t.field=P5(e,t.field,`sum`,`number`):t.valueExpression&&=(t.field=N5(e,t.valueExpression,`sum`,`number`),null);break;case`unique-value`:n.field?n.field=P5(e,n.field,`mode`,`string`):n.valueExpression&&=(n.field=N5(e,n.valueExpression,`mode`,`string`),null);break;case`class-breaks`:n.normalizationField?(n.field=P5(e,n.field,`avg_norm`,`number`,n.normalizationField),n.normalizationField=null):n.field?n.field=P5(e,n.field,`avg`,`number`):n.valueExpression&&=(n.field=N5(e,n.valueExpression,`avg`,`number`),null)}return n}var NTe=e=>{let t=t=>ATe().error(new D(`Unsupported-renderer`,t,{renderer:e}));if(!e)return!1;switch(e.type){case`unique-value`:if(e.field2||e.field3)return t(`FeatureReductionCluster does not support multi-field UniqueValueRenderers`),!1;break;case`class-breaks`:if(e.normalizationField){let n=e.normalizationType;if(n!==`field`)return t(`FeatureReductionCluster does not support a normalizationType of ${n}`),!1}break;case`simple`:case`pie-chart`:break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!jTe){if(`valueExpression`in e&&e.valueExpression)return t(`FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release`),!1;if((`visualVariables`in e&&e.visualVariables||[]).some(e=>!(!(`valueExpression`in e)||!e.valueExpression)))return t(`FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release`),!1}return!0};function PTe(e,t,n){switch(e){case`sum`:return`cluster_sum_${t}`;case`avg`:case`avg_angle`:return`cluster_avg_${t}`;case`mode`:return`cluster_type_${t}`;case`avg_norm`:{let e=n,r=t.toLowerCase()+`,norm:field,`+e.toLowerCase();return`cluster_avg_`+dD(r)}}}function N5(e,t,n,r){let i=dD(t),a=n===`mode`?`cluster_type_${i}`:n===`sum`?`cluster_sum_${i}`:`cluster_avg_${i}`;return e.some(e=>e.name===a)||e.push(new e6({name:a,isAutoGenerated:!0,onStatisticExpression:new Q3({expression:t,returnType:r}),statisticType:n})),a}function P5(e,t,n,r,i){if(t===`cluster_count`||e.some(e=>e.name===t))return t;let a=PTe(n,t,i);return e.some(e=>e.name===a)||(n===`avg_norm`?e.push(new e6({name:a,isAutoGenerated:!0,onStatisticExpression:new Q3({expression:`$feature.${t} / $feature.${i}`,returnType:r}),statisticType:`avg`})):e.push(new e6({name:a,isAutoGenerated:!0,onStatisticField:t,statisticType:n}))),a}var F5=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.aggregateGraphicOrigin=new xCe(this),this.addHandles(G(()=>this.renderer,()=>{if(this.featureReduction){let e=this._normalizeFeatureReduction(this.featureReduction);this._set(`featureReduction`,e)}},Kh))}set featureReduction(e){let t=this._normalizeFeatureReduction(e);this._set(`featureReduction`,t)}set renderer(e){}_withClusterVariable(e,t,n){let r=e.clone();return`visualVariables`in r&&(r.visualVariables||=[],r.visualVariables.some(e=>e.type===`size`)||r.visualVariables.push(new K2({field:`cluster_count`,stops:[new S2({value:1}),new S2({useMinValue:!0,size:t}),new S2({useMaxValue:!0,size:n})]}))),r}_normalizeFeatureReduction(e){if(e?.type!==`cluster`)return e;let t=e.clone(),n=[new e6({name:`cluster_count`,alias:`cluster_count`,isAutoGenerated:!0,statisticType:`count`})],r=(t.fields??[]).filter(e=>!e.isAutoGenerated),i=e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:a,clusterMaxSize:o}=t;if(i){t.fields=[...n,...r];let e=this._withClusterVariable(t.renderer,a,o);return t.effectiveFeatureRenderer=e,t.effectiveClusterRenderer=e,t}if(e.symbol){if(t.fields=[...n,...r],t.renderer=null,!this.renderer)return t.effectiveFeatureRenderer=null,t.effectiveClusterRenderer=null,t;let i=M5(n,this.renderer),s=this._withClusterVariable(i,a,o),c=`visualVariables`in s&&s.visualVariables?s.visualVariables:[],l=new m4({symbol:e.symbol,visualVariables:c});return t.fields=[...n,...r],t.effectiveFeatureRenderer=s,t.effectiveClusterRenderer=l,t}if(!this.renderer)return e;let s=M5(n,this.renderer);t.fields=[...n,...r],t.renderer=s;let c=this._withClusterVariable(s,a,o);return t.effectiveFeatureRenderer=c,t.effectiveClusterRenderer=c,t}};return e([N({readOnly:!0,clonable:!1})],r.prototype,`aggregateGraphicOrigin`,void 0),e([N(j5)],r.prototype,`featureReduction`,null),r=e([P(`esri.layers.mixins.FeatureReductionLayer`)],r),r},I5={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},L5={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},R5={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},FTe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":I5,"web-map/basemap-base-layers":L5,"web-map/tables":R5,"link-chart/operational-layers":{...I5,LinkChartLayer:!0},"link-chart/basemap-base-layers":L5,"link-chart/tables":R5,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},z5=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,n){return n?.portalItem?.type===`Group Layer`?void 0:e}writeListMode(e,t,n,r){(r&&r.layerContainerType===`ground`||e&&Ao(this,n,{},r))&&(t[n]=e)}writeOperationalLayerType(e,t,n){e&&(t[n]=e)}writeTitle(e,t){t.title=e??`Layer`}readVisibilityTimeExtent(e){return e?YT.fromArray(e):null}writeVisibilityTimeExtent(e,t,n,r){e&&r.layerContainerType!==`tables`&&(e.isEmpty?r?.messages&&r.messages.push(new D(`layer:invalid-visibilityTimeExtent`,`visibilityTimeExtent cannot be empty`)):t[n]=e.toArray())}read(e,t){t&&(t.layer=this),Oo(this,e,t=>super.read(e,t),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){let e=`${t.origin}/${t.layerContainerType||`operational-layers`}`,n=!!FTe[e]?.[this.operationalLayerType];if(this.operationalLayerType===`ArcGISTiledElevationServiceLayer`&&e===`web-scene/operational-layers`&&(n=!1),this.operationalLayerType===`ArcGISDimensionLayer`&&e===`web-map/operational-layers`&&(n=!1),!n)return t.messages?.push(new D(`layer:unsupported`,`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}let n=super.write(e,{...t,layer:this}),r=!!t&&!!t.messages&&!!t.messages.filter(e=>e instanceof D&&e.name===`web-document-write:property-required`).length;return bs(n?.url)?(t?.messages?.push(new D(`layer:invalid-url`,`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:n}beforeSave(){}};return e([N({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,`id`,void 0),e([j(`id`,[`id`])],r.prototype,`readId`,null),e([N(E0)],r.prototype,`listMode`,void 0),e([M(`listMode`)],r.prototype,`writeListMode`,null),e([N({type:String,readOnly:!0,json:{read:!1,write:{target:`layerType`,ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:`layerType`,read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:iQ,isRequired:!0}}}}})],r.prototype,`operationalLayerType`,void 0),e([M(`operationalLayerType`)],r.prototype,`writeOperationalLayerType`,null),e([N(x0)],r.prototype,`opacity`,void 0),e([N({type:Boolean,readOnly:!1})],r.prototype,`persistenceEnabled`,void 0),e([N({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:`Layer`})],r.prototype,`title`,void 0),e([M(`title`),M([`web-scene`],`title`)],r.prototype,`writeTitle`,null),e([N({type:YT,json:{origins:{"web-scene":{write:{layerContainerTypes:iQ}}}}})],r.prototype,`visibilityTimeExtent`,void 0),e([j(`visibilityTimeExtent`)],r.prototype,`readVisibilityTimeExtent`,null),e([M([`portal-item`,`web-map`,`web-scene`],`visibilityTimeExtent`,{visibilityTimeExtent:{type:[[Wt,Gt]]}})],r.prototype,`writeVisibilityTimeExtent`,null),e([N({type:Boolean,json:{name:`visibility`,write:{layerContainerTypes:iQ}}})],r.prototype,`visible`,void 0),r=e([P(`esri.layers.mixins.OperationalLayer`)],r),r},B5,V5=new xr({asc:`ascending`,desc:`descending`}),H5=class extends L{static{B5=this}constructor(e){super(e),this.field=null,this.valueExpression=null,this.order=`ascending`}clone(){return new B5({field:this.field,valueExpression:this.valueExpression,order:this.order})}};e([N({type:String,json:{write:!0}})],H5.prototype,`field`,void 0),e([N({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],H5.prototype,`valueExpression`,void 0),e([N({type:V5.apiValues,json:{type:V5.jsonValues,read:V5.read,write:V5.write}})],H5.prototype,`order`,void 0),H5=B5=e([P(`esri.layers.support.OrderByInfo`)],H5);function U5(e,t,n){if(!e)return null;let r=e.find(e=>!!e.field);if(!r)return null;let i=new H5;return i.read(r,n),[i]}function ITe(e,t,n,r){let i=e.find(e=>!!e.field);i&&Xe(n,[i.toJSON()],t)}var W5={type:[H5],json:{origins:{"web-scene":{write:!1,read:!1}},name:`layerDefinition.orderBy`,read:{reader:U5},write:{writer:ITe}}},G5=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.orderBy=null}};return e([N(W5)],r.prototype,`orderBy`,void 0),r=e([P(`esri.layers.mixins.OrderedLayer`)],r),r},K5=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=zr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}get portalItem(){return this._get(`portalItem`)}set portalItem(e){e!==this._get(`portalItem`)&&(this.removeOrigin(`portal-item`),this._set(`portalItem`,e))}readPortalItem(e,t,n){if(t.itemId)return new RT({id:t.itemId,portal:n?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{let{load:n}=await R(async()=>{let{load:e}=await import(`./layersLoader-B1CQOLOB.js`);return{load:e}},__vite__mapDeps([434,242,243,244]));return Ci(t),await n({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(e){throw ji(e)||E.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set(`userHasEditingPrivileges`,await this._fetchUserHasEditingPrivileges(e).catch(e=>(Ei(e),!0)))}async setUserPrivileges(e,t){if(!nt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{let{features:{edit:n,fullEdit:r},content:{updateItem:i}}=await this._fetchUserPrivileges(e,t);this._set(`userHasEditingPrivileges`,n),this._set(`userHasFullEditingPrivileges`,r),this._set(`userHasUpdateItemPrivileges`,i)}catch(e){Ei(e)}}async _fetchUserPrivileges(e,t){let n=this.portalItem;if(!e||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(t);let r=!rc?.findCredential(this.url),i=e===n.id;if(i&&n.portal.user)return this._getUserPrivileges(n,r);let a,o;if(i)a=n.portal.url;else try{a=await aE(this.url,t)}catch(e){Ei(e)}if(!a||!cs(a,n.portal.url))return this._fetchFallbackUserPrivileges(t);try{let e=t==null?null:t.signal;o=await rc?.getCredential(`${a}/sharing`,{prompt:!1,signal:e})}catch(e){Ei(e)}if(!o)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(i?await n.reload():(n=new RT({id:e,portal:{url:a}}),await n.load(t)),n.portal.user)return this._getUserPrivileges(n,r)}catch(e){Ei(e)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}_getUserPrivileges(e,t){let n=vye(e);return t&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){Ei(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){let t=this.url?rc?.findCredential(this.url):null;if(!t)return!0;let n=q5.credential===t?q5.user:await this._fetchEditingUser(e);return q5.credential=t,q5.user=n,n?.privileges==null||n.privileges.includes(`features:user:edit`)}async _fetchEditingUser(e){let t=this.portalItem?.portal?.user;if(t)return t;let n=rc?.findServerInfo(this.url??``);if(!n?.owningSystemUrl)return null;let r=`${n.owningSystemUrl}/sharing/rest`,i=q.getDefault();if(i&&i.loaded&&gs(i.restUrl)===gs(r))return i.user;let a=`${r}/community/self`,o=e==null?null:e.signal,s=await Rw(Qc(a,{authMode:`no-prompt`,query:{f:`json`},signal:o}));return s.ok?DT.fromJSON(s.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){let n=t?.portal,r=this.portalItem?.id&&(this.portalItem.portal||q.getDefault());return n&&r&&!ls(r.restUrl,n.restUrl)?(t.messages&&t.messages.push(new D(`layer:cross-portal`,`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return e([N({type:RT})],r.prototype,`portalItem`,null),e([j(`web-document`,`portalItem`,[`itemId`])],r.prototype,`readPortalItem`,null),e([M(`web-document`,`portalItem`,{itemId:{type:String}})],r.prototype,`writePortalItem`,null),e([N({clonable:!1})],r.prototype,`resourceReferences`,void 0),e([N({type:Boolean,readOnly:!0})],r.prototype,`userHasEditingPrivileges`,void 0),e([N({type:Boolean,readOnly:!0})],r.prototype,`userHasFullEditingPrivileges`,void 0),e([N({type:Boolean,readOnly:!0})],r.prototype,`userHasUpdateItemPrivileges`,void 0),r=e([P(`esri.layers.mixins.PortalLayer`)],r),r},q5={credential:null,user:null},J5=class extends F{constructor(e){super(e),this.updating=!1,this.status=`unknown`}};e([N()],J5.prototype,`updating`,void 0),e([N()],J5.prototype,`status`,void 0),J5=e([P(`esri.layers.support.PublishingInfo`)],J5);var LTe=Symbol(),RTe=t=>{var n;let r=t,i=class extends r{constructor(){super(...arguments),this[n]=!0}static{n=LTe}get publishingInfo(){if(this.destroyed)return null;let e=this._get(`publishingInfo`);if(e)return e;let t=new J5;return this._checkPublishingStatus(t),t}_checkPublishingStatus(e){let t=0,n=async i=>{let a;e.updating=!0;try{a=await this.fetchPublishingStatus()}catch{a=`unavailable`}a!==`published`&&a!==`unavailable`||(e.status===`publishing`&&this.refresh(),r.remove()),e.status=a,e.updating=!1,r.removed||(t=setTimeout(n,i,i+125))},r={removed:!1,remove(){this.removed=!0,clearTimeout(t)}};this.when().catch(()=>r.remove()),n(250),this.addHandles(r)}};return e([N({readOnly:!0,clonable:!1})],i.prototype,`publishingInfo`,null),i=e([P(`esri.layers.mixins.PublishableLayer`)],i),i},Y5=new W,X5=new WeakMap;function zTe(e){VTe(e)&&Y5.push(new WeakRef(e))}function BTe(e){let t=Y5.find(t=>t.deref()===e);t&&Y5.remove(t)}function VTe(e){return typeof e==`object`&&!!e&&`refreshInterval`in e&&`refresh`in e}function Z5(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Z5(t,e%t):0}var Q5=0,$5=0;function HTe(){let e=Date.now(),t=!1;for(let n of Y5){let r=n.deref();r?r.refreshInterval&&e-(X5.get(r)??0)+5>=6e4*r.refreshInterval&&(X5.set(r,e),r.refresh(e)):t=!0}if(t)for(let e=Y5.length-1;e>=0;e--)Y5.at(e).deref()||Y5.removeAt(e)}Sa(()=>{let e=Date.now(),t=0;for(let n of Y5){let r=n.deref();r&&(t=Z5(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?X5.get(r)||X5.set(r,e):X5.delete(r))}if(t!==$5){if($5=t,clearInterval(Q5),$5===0)return void(Q5=0);Q5=setInterval(HTe,$5)}},Kh);var e7=.1,t7=t=>{let n=t,r=class extends n{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=Ri(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||zTe(this)},()=>{})}destroy(){BTe(this)}castRefreshInterval(e){return e>=e7?e:e<=0?0:e7}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){Mi(this._debounceHasDataChanged()).then(t=>{t&&this._set(`refreshTimestamp`,e),this.emit(`refresh`,{dataChanged:t})},e=>{E.getLogger(this).error(e),this.emit(`refresh`,{dataChanged:!1,error:e})})}async hasDataChanged(){return!0}get test(){}};return e([N({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:iQ}}}}})],r.prototype,`refreshInterval`,void 0),e([Tr(`refreshInterval`)],r.prototype,`castRefreshInterval`,null),e([N({readOnly:!0})],r.prototype,`refreshTimestamp`,void 0),e([N({readOnly:!0})],r.prototype,`refreshParameters`,null),r=e([P(`esri.layers.mixins.RefreshableLayer`)],r),r},n7=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){let e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t?.effectiveScaleRange!==void 0&&UTe(e,t.effectiveScaleRange);let n=this._get(`effectiveScaleRange`);return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}};return e([N({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,`minScale`,void 0),e([N({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,`maxScale`,void 0),e([N({readOnly:!0})],r.prototype,`effectiveScaleRange`,null),r=e([P(`esri.layers.mixins.ScaleRangeLayer`)],r),r};function UTe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}function r7(e,t){return SZ.fromJSON({value:e,unit:t})}var i7=class extends I(L){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&t.timeExtent.length===2?YT.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){e?.start!=null&&e.end!=null?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?r7(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?r7(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};e([N({type:Boolean,json:{name:`exportOptions.timeDataCumulative`,write:!0}})],i7.prototype,`cumulative`,void 0),e([N({type:String,json:{name:`endTimeField`,write:{enabled:!0,allowNull:!0}}})],i7.prototype,`endField`,void 0),e([N({type:YT,json:{write:{enabled:!0,allowNull:!0}}})],i7.prototype,`fullTimeExtent`,void 0),e([j(`fullTimeExtent`,[`timeExtent`])],i7.prototype,`readFullTimeExtent`,null),e([M(`fullTimeExtent`)],i7.prototype,`writeFullTimeExtent`,null),e([N({type:Boolean,json:{write:!0}})],i7.prototype,`hasLiveData`,void 0),e([N({type:SZ,json:{write:{enabled:!0,allowNull:!0}}})],i7.prototype,`interval`,void 0),e([j(`interval`,[`timeInterval`,`timeIntervalUnits`,`defaultTimeInterval`,`defaultTimeIntervalUnits`])],i7.prototype,`readInterval`,null),e([M(`interval`)],i7.prototype,`writeInterval`,null),e([N({type:String,json:{name:`startTimeField`,write:{enabled:!0,allowNull:!0}}})],i7.prototype,`startField`,void 0),e([N(wb(`timeReference`,!0))],i7.prototype,`timeZone`,void 0),e([N({type:String,json:{write:{enabled:!0,allowNull:!0}}})],i7.prototype,`trackIdField`,void 0),e([N({type:Boolean,json:{name:`exportOptions.useTime`,write:!0}})],i7.prototype,`useTime`,void 0),e([N({type:[Date],json:{read:!1}})],i7.prototype,`stops`,void 0),i7=e([P(`esri.layers.support.TimeInfo`)],i7);var a7={type:Boolean,json:{read:{source:`timeAnimation`},write:{target:`timeAnimation`,layerContainerTypes:iQ}}},o7=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){let n=t.timeInfo.exportOptions;if(!n)return null;let r=n.timeOffset,i=xZ.fromJSON(n.timeOffsetUnits);return r&&i?new SZ({value:r,unit:i}):null}get timeInfo(){return this._get(`timeInfo`)}set timeInfo(e){wk(e,this.fieldsIndex),this._set(`timeInfo`,e)}};return e([N({type:YT,json:{write:!1}})],r.prototype,`timeExtent`,void 0),e([N({type:SZ})],r.prototype,`timeOffset`,void 0),e([j(`service`,`timeOffset`,[`timeInfo.exportOptions`])],r.prototype,`readOffset`,null),e([N({value:null,type:i7,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],r.prototype,`timeInfo`,null),e([N(a7)],r.prototype,`useViewTime`,void 0),r=e([P(`esri.layers.mixins.TemporalLayer`)],r),r},WTe=class extends A${constructor(e){super(),this.type=`track`,this.trackInfoProvider=e}get id(){return this.trackInfoProvider.id}get[LM](){return this.trackInfoProvider.trackInfo}},s7=class extends I(L){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};e([N({type:[v6],json:{write:!0}})],s7.prototype,`labelingInfo`,void 0),e([N(g0)],s7.prototype,`labelsVisible`,void 0),e([N({types:b5,json:{write:!0}})],s7.prototype,`renderer`,void 0),e([N({type:Boolean,json:{write:!0}})],s7.prototype,`visible`,void 0),s7=e([P(`esri.layers.support.TrackPartInfo`)],s7);var c7=class extends I(L){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new s7({renderer:new m4({symbol:$2.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new s7({renderer:new m4({symbol:$2.clone()})}),this.trackLines=new s7({renderer:new m4({symbol:e4.clone()})}),this.timeField=`startTimeField`}writeFields(e,t,n){let r=e.filter(e=>e.statisticType!==`avg_angle`).map(e=>e.toJSON());Xe(n,r,t)}};e([N({type:Boolean,json:{write:!0}})],c7.prototype,`enabled`,void 0),e([N({type:[e6],json:{write:!0}})],c7.prototype,`fields`,void 0),e([M(`fields`)],c7.prototype,`writeFields`,null),e([N({type:s7,json:{write:!0}})],c7.prototype,`latestObservations`,void 0),e([N({type:SZ,json:{write:!0}})],c7.prototype,`maxDisplayDuration`,void 0),e([N({type:Number,json:{write:!0}})],c7.prototype,`maxDisplayObservationsPerTrack`,void 0),e([N(h0)],c7.prototype,`popupEnabled`,void 0),e([N({type:NM,json:{name:`popupInfo`,write:!0}})],c7.prototype,`popupTemplate`,void 0),e([N({type:s7,json:{write:!0}})],c7.prototype,`previousObservations`,void 0),e([N({type:s7,json:{write:!0}})],c7.prototype,`trackLines`,void 0),e([N({type:[`timeReceived`,`startTimeField`,`endTimeField`],json:{read:!0,write:!0}})],c7.prototype,`timeField`,void 0),c7=e([P(`esri.layers.support.TrackInfo`)],c7);var l7=t=>{let n=t,r=class extends n{constructor(){super(...arguments),this.trackGraphicOrigin=new WTe(this),this.trackInfo=null}};return e([N({readOnly:!0,clonable:!1})],r.prototype,`trackGraphicOrigin`,void 0),e([N({type:c7})],r.prototype,`trackInfo`,void 0),r=e([P(`esri.layers.mixins.TrackableLayer`)],r),r},u7=new xr({esriFeatureEditToolAutoCompletePolygon:`auto-complete-polygon`,esriFeatureEditToolCircle:`circle`,esriFeatureEditToolEllipse:`ellipse`,esriFeatureEditToolFreehand:`freehand`,esriFeatureEditToolLine:`line`,esriFeatureEditToolNone:`none`,esriFeatureEditToolPoint:`point`,esriFeatureEditToolPolygon:`polygon`,esriFeatureEditToolRectangle:`rectangle`,esriFeatureEditToolArrow:`arrow`,esriFeatureEditToolTriangle:`triangle`,esriFeatureEditToolLeftArrow:`left-arrow`,esriFeatureEditToolRightArrow:`right-arrow`,esriFeatureEditToolUpArrow:`up-arrow`,esriFeatureEditToolDownArrow:`down-arrow`}),d7=class extends I(L){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};e([N({json:{write:!0}})],d7.prototype,`name`,void 0),e([N({json:{write:!0}})],d7.prototype,`description`,void 0),e([N({json:{read:u7.read,write:u7.write}})],d7.prototype,`drawingTool`,void 0),e([N({json:{write:!0}})],d7.prototype,`prototype`,void 0),e([N({json:{write:!0}})],d7.prototype,`thumbnail`,void 0),d7=e([P(`esri.layers.support.FeatureTemplate`)],d7);var f7=class extends I(L){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){let t={};for(let n of Object.keys(e))t[n]=iI(e[n]);return t}writeDomains(e,t){let n={};for(let t of Object.keys(e))e[t]&&(n[t]=e[t]?.toJSON());t.domains=n}};e([N({json:{write:!0}})],f7.prototype,`id`,void 0),e([N({json:{write:!0}})],f7.prototype,`name`,void 0),e([N({json:{write:!0}})],f7.prototype,`domains`,void 0),e([j(`domains`)],f7.prototype,`readDomains`,null),e([M(`domains`)],f7.prototype,`writeDomains`,null),e([N({type:[d7],json:{write:!0}})],f7.prototype,`templates`,void 0),f7=e([P(`esri.layers.support.FeatureType`)],f7);var p7=class extends I(L){constructor(e){super(e),this.alias=null,this.name=void 0,this.fieldFormat=null}};e([O({type:String,json:{write:!0}})],p7.prototype,`alias`,void 0),e([O({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],p7.prototype,`name`,void 0),e([O({types:jA,json:{write:!0}})],p7.prototype,`fieldFormat`,void 0),p7=e([hr(`esri.layers.support.FieldConfiguration`)],p7);function GTe(e){let{popupTemplate:t,fieldsIndex:n}=e,r=t?.fieldInfos;if(!r?.length||!n)return;let i=[];for(let e of r){let{fieldName:t,label:r}=e,a=n.get(t);if(!a)continue;let o=r&&r!==a.alias?r:null,s=MA(e,a);(o||s)&&i.push(new p7({name:a.name,alias:o,fieldFormat:s}))}return i.length?i:null}function KTe(e){let{fields:t}=e;if(!t?.length)return;let n=[];for(let e of t){let t=PA(e)?ej(e):null;t&&n.push(new p7({name:e.name,fieldFormat:t}))}return n.length?n:null}function qTe(e,t){let{popupTemplate:n,fieldsIndex:r}=e;if(!n||!r)return;let i=JTe(e,t,n.fieldInfos);if(!i)return;let a=n.clone();return a.fieldInfos=i,a}function JTe(e,t,n){t??=[],n=C(n)??[];let r=!1,i=new Map;for(let n of t){let t=e.fieldsIndex.get(n.name);t&&i.set(t.name,n)}for(let t of n){let n=e.fieldsIndex.get(t.fieldName);if(!n)continue;let a=i.get(n.name);t.label=a?.alias||n.alias,t.format=PA(n)&&a?.fieldFormat?GA(a.fieldFormat,n):null,r=!0,i.delete(n.name)}for(let t of i.values()){let i=YTe(e,t);i&&(n.push(i),r=!0)}return r?n:null}function YTe(e,t){let{name:n,alias:r,fieldFormat:i}=t,a=e.fieldsIndex.get(n);if(!a||!r&&!i)return;let o=r||a.alias,s=PA(a)&&i?GA(i,a):null;return new nj({fieldName:a.name,label:o,format:s,visible:!1,isEditable:Fk(a,e)})}function m7(){return{fields:{type:[sI],value:null,set:function(e){if(e&&c(`big-integer-warning-enabled`)){let t=e.filter(e=>e.type===`big-integer`||e.type===`oid`&&(e.length||0)>=8);if(t.length){let e=t.map(e=>`'${e.name}'`).join(`, `);E.getLogger(this).warn(`#fields`,`Layer (title: '${this.title??`no title`}', id: '${this.id??`no id`}') references big-integer field(s): ${e}, support for which is experimental. Only integers less than ${2**53-1} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set(`fields`,e)}},fieldsIndex:{readOnly:!0,get(){return N6.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange(`outFields`)},get:function(){let e=this._userOutFields;if(!e?.length)return null;if(e.includes(`*`))return[`*`];if(!this.fields)return e;for(let t of e)this.fieldsIndex?.has(t)||E.getLogger(`esri.layers.support.fieldProperties`).error(`field-attributes-layer:invalid-field`,`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return Ek(this.fieldsIndex,e)}}}}var h7=()=>E.getLogger(`esri.layers.support.labelingInfo`),XTe=/\[([^[\]]+)\]/gi;function g7(e,t,n){return e?e.map(e=>{let r=new v6;if(r.read(e,n),r.labelExpression){let e=t.fields||t.layerDefinition?.fields||this.fields;r.labelExpression=r.labelExpression.replaceAll(XTe,(t,n)=>`[${ZTe(n,e)}]`)}return r}):null}function ZTe(e,t){if(!t)return e;let n=e.toLowerCase();for(let e=0;e<t.length;e++){let r=t[e].name;if(r.toLowerCase()===n)return r}return e}var _7=[`above-right`,`above-center`,`above-left`,`center-center`,`center-left`,`center-right`,`below-center`,`below-left`,`below-right`],QTe={esriGeometryPoint:_7,esriGeometryMultiPatch:[`always-horizontal`],esriGeometryPolygon:[`always-horizontal`],esriGeometryPolyline:[`center-along`,`above-along`,`below-along`],esriGeometryMultipoint:_7,esriGeometryEnvelope:null};function $Te(e,t){let n=[];for(let r of e){let e=r.labelPlacement,i=QTe[t];if(!r.symbol)return h7().warn(`No ILabelClass symbol specified.`),[];if(!i)return h7().error(new D(`labeling:unsupported-geometry-type`,`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(i.includes(e))n.push(r);else{let a=i[0];e&&h7().warn(`Found invalid label placement type ${e} for ${t}. Defaulting to ${a}`);let o=r.clone();o.labelPlacement=a,n.push(o)}}return n}var eEe=`relationships/`,tEe=`expression/`,nEe=/<br\s*\/*>/gi,v7=class extends F{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get(`_arcadeTask`)||Bw(()=>bk()):null}get featureUtilsPromise(){return this._get(`featureUtilsPromise`)??R(()=>import(`./featureUtils-BtDE87C0.js`),__vite__mapDeps([435,20,229])).then(e=>this._featureUtils=e)}get calculatedExpressions(){let e=new W;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(let t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(let t of this.expressionsUsedInTitle)try{let n=this._arcadeTask.value.arcade.parseScript(t.expression,[`$layer`,`$map`,`$datastore`]);if(n.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:`any`}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??``;return typeof e==`string`?(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(t=>e.includes(`{expression/${t.name.toLowerCase()}}`))??[]):[]}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>!0===e.invalid)}get requiredFields(){let e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(let t of this.calculatedExpressions?.toArray()??[])try{let n=this._arcadeTask.value.arcade.extractFieldLiterals(t.syntax);for(let t of n){let n=t.split(`.`),r=this.fieldsIndex.get(n.at(-1)??``);r&&e.add(r.name)}}catch{}let t=this._extractFieldNames(this.workingTitle);for(let n of t){let t=this.fieldsIndex.get(n);t&&e.add(t.name)}return this.objectIdField!=null&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e=``;return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??``),e||=this.fieldsIndex.get(this.objectIdField)?.name??``,e?`{${e}}`:``}get workingTitle(){let e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:``;return e===``||e==null||this.hasBadExpressions||typeof e!=`string`?this.titleFromDisplayField:e}async getTitle(e,t,n){let r=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],n)).get(r)??``}async getTitles(e,t,n){let r=new Map,i=n?.timeZone??`system`;try{let[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);n?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));let{fieldInfoMap:o,workingTitle:s}=this,c=s&&o;t.forEach(t=>{let l=t.getObjectId()??t.attributes[e.objectIdField],u=c?a({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:o,globalAttributes:this._createFormattedAttributes(e,t,i).global,layer:e,text:s}):``;n?.removeHTML&&(u=sle.sanitize(u).replaceAll(nEe,` `)),r.set(l,u)})}catch{}return r}async _checkAndReQueryGraphics(e,t){let n=t.map(t=>t.getObjectId()??t.attributes[e.objectIdField]).filter(ge);if(n.length!==t.length)return t;if(t.some(e=>!eA(e,this.requiredFields))){let r=e.createQuery();r.where=`1=1`,r.outFields=[...this.requiredFields],r.objectIds=n;let i=await e.queryFeatures(r);if(i?.features.length===t.length)return i.features}return t}_createFieldInfoMap(e){let t=new Map;if(!e)return t;for(let n of e){if(!n.fieldName)continue;let e=this.fieldsIndex.get(n.fieldName),r=e?.name??n.fieldName;n.fieldName=r,t.set(r.toLowerCase(),n)}return t}_createFormattedAttributes(e,t,n=`system`){let r=this.effectivePopupTemplate?.fieldInfos??[],i={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){let n=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(let e of this.calculatedExpressions)try{i[`expression/${e.name}`]=e.func({vars:{$feature:n}})}catch{}}let a={...t.attributes,...i};return{global:this._featureUtils.formatAttributes({fieldInfos:r,attributes:a,graphic:t,timeZone:n,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return nA(e).filter(e=>!(e.startsWith(eEe)||e.startsWith(tEe)))}};e([N({readOnly:!0})],v7.prototype,`_arcadeTask`,null),e([N()],v7.prototype,`_featureUtils`,void 0),e([N({readOnly:!0})],v7.prototype,`featureUtilsPromise`,null),e([N({readOnly:!0})],v7.prototype,`calculatedExpressions`,null),e([N()],v7.prototype,`displayField`,void 0),e([N()],v7.prototype,`effectivePopupTemplate`,void 0),e([N()],v7.prototype,`expressionsUsedInTitle`,null),e([N()],v7.prototype,`fieldsIndex`,void 0),e([N()],v7.prototype,`fieldInfoMap`,null),e([N()],v7.prototype,`fields`,void 0),e([N()],v7.prototype,`objectIdField`,void 0),e([N()],v7.prototype,`requiredFields`,null),v7=e([P(`esri.layers.support.TitleCreator`)],v7);var y7=[];function b7(e,t){if(jc(e.url??``))return!0;let{wkid:n}=t;for(let t of y7){if((e.version??0)>=t[0])return!0;if(typeof t[1]==`function`&&(t[1]=t[1]()),t[1].has(n))return!1}return!0}y7.push([10.91,()=>{let e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),y7.push([10.9,()=>{let e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),y7.push([10.81,()=>{let e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),y7.push([10.8,()=>{let e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),y7.push([10.71,()=>{let e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function x7(e,t,n){let r=e&&e.getAtOrigin&&e.getAtOrigin(`renderer`,t.origin);if(r&&r.type===`unique-value`&&r.styleOrigin){let i=await Rw(r.populateFromStyle());if(Ci(n),!1===i.ok){let n=i.error;t?.messages&&t.messages.push(new zn(`renderer:style-reference`,`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear(`renderer`,t?.origin)}}}function S7({displayField:e,editFieldsInfo:t,fields:n,objectIdField:r,title:i},a){if(!n)return null;let o=oEe({editFieldsInfo:t,fields:n,objectIdField:r},a);if(!o.length)return null;let s=lEe({titleBase:i,fields:n,displayField:e}),c=cEe();return new NM({title:s,content:c,fieldInfos:o})}var rEe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):cfe(e,t);function iEe({fields:e,ignoreFieldTypes:t,sortDisabled:n}){let r=e;return t&&(e=e.filter(e=>!t.includes(e.type))),e===r&&(e=e.slice()),!0!==n&&e.sort(aEe),e}function aEe(e,t){return e.type===`oid`?-1:t.type===`oid`?1:C7(e)?-1:C7(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function oEe(e,t){let n=t?.visibleFieldNames;return iEe({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||uEe,sortDisabled:t?.sortDisabled}).map(t=>new nj({fieldName:t.name,isEditable:Fk(t,e),label:t.alias,format:sEe(t),visible:rEe(t,{...e,visibleFieldNames:n})}))}function sEe(e){switch(e.type){case`small-integer`:case`integer`:return new AA({digitSeparator:!0,places:0});case`single`:case`double`:return new AA({digitSeparator:!0,places:2});case`string`:return tA(e.name)?new AA({digitSeparator:!0,places:0}):void 0;default:return}}function cEe(){return[new aj,new lA]}function lEe(e){let t=Gde(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??``}function C7(e){return(e.name&&e.name.toLowerCase())===`name`?!0:e.alias?.toLowerCase()===`name`}var uEe=[`geometry`,`blob`,`raster`,`guid`,`xml`],w7=`FeatureLayer`;function T7(e,t){return new D(`layer:unsupported`,`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function E7(e){return e&&e instanceof W}var D7=m7();function O7(e,t,n){let r=!!n?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}var $=class extends Z3(F5(K1(RTe(N1(v1(c1(G5(o7(l7(n7(t7(U$(z5(K5(rZ(l1(H$(I(ZT))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.graphicOrigin=new Obe(this),this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType=`ArcGISFeatureLayer`,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=H.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set([`Feature Layer`,`Oriented Imagery Layer`,`Table`,`Catalog Layer`]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode=`item-title`,this.type=`feature`,this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=Ri(async(e,t,n)=>{let{save:r,saveAs:i}=await R(async()=>{let{save:e,saveAs:t}=await import(`./featureLayerUtils-Bj68dzMR.js`);return{save:e,saveAs:t}},__vite__mapDeps([436,428,437,430,244]));switch(e){case 0:return r(this,t);case 1:return i(this,n,t)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return typeof e==`string`?{url:e,...t}:e}load(e){let t=e==null?null:e.signal;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(e=>this.initLayerProperties(e))),Promise.resolve(this);let n=this.loadFromPortal({supportedTypes:[`Feature Service`,`Feature Collection`,`Scene Service`]},e).catch(Ei).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){let e=await this._fetchFirstValidLayerId(t);e!=null&&(this.layerId=e)}if(!this.url&&!this._hasMemorySource())throw new D(`feature-layer:missing-url-or-source`,`Feature layer must be created with either a url or a source`);return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>_3(this,`load`,e));return this.addResolvingPromise(n),Promise.resolve(this)}get _titleCreator(){let e=this._get(`_titleCreator`);return zr(e),new v7({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,Y3(t,this.url)}get createQueryVersion(){return this.commitProperty(`definitionExpression`),this.commitProperty(`dynamicDataSource`),this.commitProperty(`timeExtent`),this.commitProperty(`timeOffset`),this.commitProperty(`geometryType`),this.commitProperty(`gdbVersion`),this.commitProperty(`historicMoment`),this.commitProperty(`returnZ`),this.commitProperty(`capabilities`),this.commitProperty(`returnM`),(this._get(`createQueryVersion`)??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden(`editingEnabled`)?this._get(`editingEnabled`):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome(`editingEnabled`,e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,n){return this._readEditingEnabled(t,!0,n)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,n,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return y3(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}set fieldConfigurations(e){if(this._hasMemorySource()||(this._override(`fieldConfigurations`,e),!this.loaded))return;let t=qTe(this,e);t&&this._set(`popupTemplate`,t)}get fieldConfigurations(){if(!this._hasMemorySource())return this._isOverridden(`fieldConfigurations`)?this._get(`fieldConfigurations`):GTe(this)||null}readIsTable(e,t){return(t=t?.layerDefinition??t).type===`Table`||!t.geometryType}writeIsTable(e,t,n,r){r?.writeLayerSchema&&Xe(n,e?`Table`:`Feature Layer`,t)}readGlobalIdField(e,t){return l3(t.layerDefinition||t)}readObjectIdField(e,t){return u3(t.layerDefinition||t)}writePopupTemplate(e,t,n,r){e&&(t[n]=e.toJSON({...r,writeFieldFormat:!r?.writeLayerSchema}))}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){Sk(e,this.fieldsIndex),this._set(`renderer`,e)}readRenderer(e,t,n){t=t.layerDefinition||t;let r=t.drawingInfo?.renderer;if(r){let e=S5(r,t,n)??void 0;return e||E.getLogger(this).error(`Failed to create renderer`,{rendererDefinition:t.drawingInfo.renderer,layer:this,context:n}),e}return x3(t,n)}get source(){return this._get(`source`)}set source(e){e||=null;let t=this._get(`source`);t!==e&&((Array.isArray(e)||e instanceof W)&&(e=new V$({layer:this,items:e})),E7(t)&&this._resetMemorySource(t),E7(e)&&this._initMemorySource(e),this._set(`source`,e))}readSource(e,t){let n=B$.fromJSON(t.featureSet);return new V$({layer:this,items:n?.features??[]})}readTemplates(e,t){let n=t.editFieldsInfo,r=n?.creatorField,i=n?.editorField;return e=e?.map(e=>d7.fromJSON(e)),this._fixTemplates(e,r),this._fixTemplates(e,i),e}readTitle(e,t){let n=t.layerDefinition?.name??t.name,r=t.title||t.layerDefinition?.title;if(n){let e=this.portalItem?.title;if(this.sublayerTitleMode===`item-title`)return this.url?Ac(this.url,n):n;let t=n;if(!t&&this.url){let e=Dc(this.url);e!=null&&(t=e.title)}return t?(this.sublayerTitleMode===`item-title-and-service-name`&&e&&e!==t&&(t=e+` - `+t),kc(t)):void 0}if(this.sublayerTitleMode===`item-title`&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let n=(t=t.layerDefinition||t).typeIdField;if(n&&t.fields){n=n.toLowerCase();let e=t.fields.find(e=>e.name.toLowerCase()===n);e&&(n=e.name)}return n}readTypes(e,t){e=(t=t.layerDefinition||t).types;let n=t.editFieldsInfo,r=n?.creatorField,i=n?.editorField;return e?.map(e=>(e=f7.fromJSON(e),this._fixTemplates(e.templates,r),this._fixTemplates(e.templates,i),e))}readVisible(e,t){return t.layerDefinition?.defaultVisibility==null?t.visibility==null?void 0:!!t.visibility:!!t.layerDefinition.defaultVisibility}async addAttachment(e,t){let n=await Y4(this,e,t,w7);return this.lastEditsEventDate=new Date,n}async updateAttachment(e,t,n){let r=await Z4(this,e,t,n,w7);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return Q4(this,e,t)}async uploadAssets(e,t){return RSe(this,e,t)}createFieldConfigurations(){return KTe(this)}createPopupTemplate(e){return S7(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});let{default:t}=await Ai(R(()=>import(`./FeatureLayerSource-CrwdsV3W.js`),__vite__mapDeps([438,89,99,5,119,47,439,440,441,49,12,13,442,432,16,11,443,444,445,130,128,129,131,225,446,26])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){let e=c3(this);e.dynamicDataSource=this.dynamicDataSource;let t=this.subtypeCode==null?null:`${this.subtypeField} = ${this.subtypeCode}`;return e.where=lk(this.definitionExpression,t)||`1=1`,e}async deleteAttachments(e,t){let n=await $4(this,e,t,w7);return this.lastEditsEventDate=new Date,n}async fetchRecomputedExtents(e){return e3(this,e,w7)}async getFeatureTitle(e,t){return this._titleCreator.getTitle(this,e,t)}async getFeatureTitles(e,t){return this._titleCreator.getTitles(this,e,t)}getFeatureType(e){return C3(this.types,this.typeIdField,e)}getFieldAlias(e){let t=this.getField(e);if(t)return this.getFieldConfiguration(t.name)?.alias||t.alias}getFieldConfiguration(e){return e=e.toLowerCase(),this.fieldConfigurations?.find(t=>t.name.toLowerCase()===e)}getFieldDomain(e,t){return d3(this,e,t,this.getField(e)?.domain??null)}async queryAttachments(e,t){return t3(this,e,t,w7)}async queryFeatures(e,t){let n=await this.load(),r=await n.source.queryFeatures(Y.from(e)??n.createQuery(),t),i=this.graphicOrigin;if(r?.features)for(let e of r.features)e.layer=e.sourceLayer=n,e.origin=i;return r}async queryObjectIds(e,t){return await n3(this,e,t,w7)}async queryFeatureCount(e,t){return r3(this,e,t,w7)}async queryExtent(e,t){return i3(this,e,t,w7)}async queryRelatedFeatures(e,t){return a3(this,e,t,w7)}async queryRelatedFeaturesCount(e,t){return o3(this,e,t,w7)}async queryPivot(e,t){let{source:n,capabilities:r}=await this.load();if(!n.queryPivot||!r?.operations?.supportsQueryPivot)throw new D(w7,`Layer source does not support queryPivot capability`);let i=await R(()=>import(`./PivotQuery-0UMCIH8i.js`),__vite__mapDeps([447,448])),a=await n.queryPivot(i.default.from(e),t);if(a?.features)for(let e of a.features)e.layer=e.sourceLayer=this;return a}async queryTopFeatures(e,t){let{source:n,capabilities:r}=await this.load();if(!n.queryTopFeatures||!r?.query?.supportsTopFeaturesQuery)throw new D(w7,`Layer source does not support queryTopFeatures capability`);let i=await R(()=>import(`./TopFeaturesQuery-CZ8Xxp4K.js`),__vite__mapDeps([449,450])),a=await n.queryTopFeatures(i.default.from(e),t);if(a?.features)for(let e of a.features)e.layer=e.sourceLayer=this;return a}async queryAttributeBins(e,t){let{source:n,capabilities:r}=await this.load();if(!n.queryAttributeBins)throw new D(w7,`Layer source does not support queryAttributeBins capability`);T3(e,r,w7);let i=await R(()=>import(`./AttributeBinsQuery-0Lt4wRdt.js`),__vite__mapDeps([451,10,18,322])),a=await n.queryAttributeBins(i.default.from(e),t);if(a.features)for(let e of a.features)e.layer=e.sourceLayer=this;return a}async queryTopObjectIds(e,t){let{source:n,capabilities:r}=await this.load();if(!n.queryTopObjectIds||!r?.query.supportsTopFeaturesQuery)throw new D(w7,`Layer source does not support queryTopObjectIds capability`);let i=await R(()=>import(`./TopFeaturesQuery-CZ8Xxp4K.js`),__vite__mapDeps([449,450]));return(await n.queryTopObjectIds(i.default.from(e),t)).filter(rk)}async queryTopFeaturesExtent(e,t){let{source:n,capabilities:r}=await this.load();if(!n.queryTopExtents||!r?.query?.supportsTopFeaturesQuery)throw new D(w7,`Layer source does not support queryTopExtents capability`);let i=await R(()=>import(`./TopFeaturesQuery-CZ8Xxp4K.js`),__vite__mapDeps([449,450]));return n.queryTopExtents(i.default.from(e),t)}async queryTopFeatureCount(e,t){let{source:n,capabilities:r}=await this.load();if(!n.queryTopCount||!r?.query?.supportsTopFeaturesQuery)throw new D(w7,`Layer source does not support queryFeatureCount capability`);let i=await R(()=>import(`./TopFeaturesQuery-CZ8Xxp4K.js`),__vite__mapDeps([449,450]));return n.queryTopCount(i.default.from(e),t)}read(e,t){let n=e.featureCollection;if((n||e.type===`Feature Collection`)&&(this.resourceInfo=e),n){let{layers:e,showLegend:r}=n;e?.length===1&&(super.read(e[0],t),r!=null&&super.read({showLegend:r},t))}super.read(e,t),t?.origin===`service`&&(this.revert([`objectIdField`,`fields`,`timeInfo`,`dateFieldsTimeZone`],`service`),this.spatialReference||this.revert([`spatialReference`],`service`))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};let{origin:n,layerContainerType:r,messages:i}=t;if(this.dynamicDataSource)return i?.push(T7(this,`using a dynamic data source cannot be written to web scenes, web maps and feature service items`)),null;if(this.isTable){if((n===`web-map`||n===`web-scene`)&&r!==`tables`)return i?.push(T7(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return i?.push(T7(this,`using an in-memory table source cannot be written to web scenes and web maps`)),null}else if(this.loaded&&(n===`web-map`||n===`web-scene`)&&r===`tables`)return i?.push(T7(this,`using a non-table source cannot be written to tables in web maps or web scenes`)),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new D(w7,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type===`memory`||b7(this,e))}async save(e){return this._debouncedSaveOperations(0,e)}async saveAs(e,t){return this._debouncedSaveOperations(1,t,e)}_readEditingEnabled(e,t,n){let r=e.layerDefinition?.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&n?.origin===`web-map`&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(`,`).map(e=>e.trim()).includes(`editing`)}_writeEditingEnabled(e,t,n,r){if(!e){let e=this.capabilities?.operations?.supportsSync?`Query,Sync`:`Query`;Xe(`layerDefinition.capabilities`,e,t),n&&!r?.writeLayerSchema&&(t.capabilities=e)}}_fetchFirstValidLayerId(e){return Qc(this.url??``,{query:{f:`json`,...this.customParameters,token:this.apiKey},responseType:`json`,signal:e}).then(e=>{let t=e.data;if(t)return this.applyPreferredHost(t),this.findFirstValidLayerId(t)})}async initLayerProperties(e){return this._set(`source`,e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:`service`,portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Sk(this.renderer,this.fieldsIndex),wk(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType===`mesh`&&(this.capabilities.query.supportsReturnMesh=!0),x7(this,{origin:`service`})}async hasDataChanged(){return s3(this)}async fetchPublishingStatus(){let e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():`unavailable`}_verifyFields(){let e=this.parsedUrl?.path??`undefined`;this.objectIdField||console.log(`FeatureLayer: 'objectIdField' property is not defined (url: `+e+`)`),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(e=>e.type===`geometry`)||console.log(`FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: `+e+`)`)}_fixTemplates(e,t){e&&e.forEach(e=>{let n=e.prototype?.attributes;n&&t&&delete n[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new D(`feature-layer:mixed-source-and-url`,`FeatureLayer cannot be created with both an in-memory source and a url`)}else if(!this.url)throw new D(`feature-layer:source-or-url-required`,`FeatureLayer requires either a url, a valid portal item or a source`)}_initMemorySource(e){e.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([e.on(`after-add`,e=>{e.item.layer=this,e.item.sourceLayer=this}),e.on(`after-remove`,e=>{e.item.layer=null,e.item.sourceLayer=null})],`fl-source`)}_resetMemorySource(e){e.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles(`fl-source`)}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};e([N({clonable:!1,readOnly:!0})],$.prototype,`_titleCreator`,null),e([N(D0)],$.prototype,`attributeTableTemplate`,void 0),e([j(`service`,`capabilities`)],$.prototype,`readCapabilities`,null),e([N({json:{origins:{"web-scene":{write:!1}},write:!0}})],$.prototype,`charts`,void 0),e([N({readOnly:!0})],$.prototype,`createQueryVersion`,null),e([N({json:{read:{source:`layerDefinition.copyrightText`}}})],$.prototype,`copyright`,void 0),e([N({json:{read:{source:`layerDefinition.displayField`}}})],$.prototype,`displayField`,void 0),e([N({types:IF,readOnly:!0})],$.prototype,`defaultSymbol`,void 0),e([N({type:CI})],$.prototype,`dynamicDataSource`,void 0),e([N({type:Boolean})],$.prototype,`editingEnabled`,null),e([j([`portal-item`,`web-scene`],`editingEnabled`,[`layerDefinition.capabilities`])],$.prototype,`readEditingEnabled`,null),e([j(`web-map`,`editingEnabled`,[`capabilities`,`layerDefinition.capabilities`])],$.prototype,`readEditingEnabledFromWebMap`,null),e([M([`portal-item`,`web-scene`],`editingEnabled`,{"layerDefinition.capabilities":{type:String}})],$.prototype,`writeEditingEnabled`,null),e([M(`web-map`,`editingEnabled`,{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],$.prototype,`writeEditingEnabledToWebMap`,null),e([N({readOnly:!0})],$.prototype,`effectiveEditingEnabled`,null),e([N({clonable:!1,readOnly:!0})],$.prototype,`featureTitleFields`,null),e([N({type:[p7],json:{name:`layerDefinition.fieldConfigurations`,write:{overridePolicy(e,t,n){return{enabled:!n?.writeLayerSchema,ignoreOrigin:this.originIdOf(t)===1}}}}})],$.prototype,`fieldConfigurations`,null),e([N({...D7.fields,json:{read:{source:`layerDefinition.fields`},origins:{service:{name:`fields`},"web-map":{write:{target:`layerDefinition.fields`,overridePolicy:O7}}}}})],$.prototype,`fields`,void 0),e([N(D7.fieldsIndex)],$.prototype,`fieldsIndex`,void 0),e([N({type:T$,json:{name:`formInfo`,write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],$.prototype,`formTemplate`,void 0),e([N({json:{read:{source:`layerDefinition.extent`}}})],$.prototype,`fullExtent`,void 0),e([N({json:{origins:{"web-map":{write:{target:`layerDefinition.geometryType`,overridePolicy:O7,writer(e,t,n){let r=e?J4.toJSON(e):null;r&&Xe(n,r,t)}}}},read:{source:`layerDefinition.geometryType`,reader:J4.read}}})],$.prototype,`geometryType`,void 0),e([N({readOnly:!0,clonable:!1})],$.prototype,`graphicOrigin`,void 0),e([N({json:{read:{source:`layerDefinition.hasM`}}})],$.prototype,`hasM`,void 0),e([N({json:{read:{source:`layerDefinition.hasZ`}}})],$.prototype,`hasZ`,void 0),e([N(C0)],$.prototype,`id`,void 0),e([N({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],$.prototype,`infoFor3D`,void 0),e([N({json:{origins:{"web-map":{write:{target:`layerDefinition.type`}}}}})],$.prototype,`isTable`,void 0),e([j(`service`,`isTable`,[`type`,`geometryType`]),j(`isTable`,[`layerDefinition.type`,`layerDefinition.geometryType`])],$.prototype,`readIsTable`,null),e([M(`web-map`,`isTable`)],$.prototype,`writeIsTable`,null),e([N(g0)],$.prototype,`labelsVisible`,void 0),e([N({type:[v6],json:{origins:{service:{name:`drawingInfo.labelingInfo`,read:g7,write:!1}},name:`layerDefinition.drawingInfo.labelingInfo`,read:g7,write:{layerContainerTypes:iQ}}})],$.prototype,`labelingInfo`,void 0),e([N((()=>{let e=C(S0);return e.json.origins[`portal-item`]={write:{target:`layerDefinition.drawingInfo.transparency`,writer(e,t,n){Xe(n,RE(e),t)}}},e})())],$.prototype,`opacity`,void 0),e([N(v0)],$.prototype,`legendEnabled`,void 0),e([N({type:[`show`,`hide`],json:(()=>{let e=C(E0.json);return e.origins[`portal-item`]={read:!1,write:!1},e})()})],$.prototype,`listMode`,void 0),e([j(`globalIdField`,[`layerDefinition.globalIdField`,`layerDefinition.fields`])],$.prototype,`readGlobalIdField`,null),e([N({json:{origins:{"web-map":{write:{target:`layerDefinition.objectIdField`,overridePolicy:O7}}}}})],$.prototype,`objectIdField`,void 0),e([j(`objectIdField`,[`layerDefinition.objectIdField`,`layerDefinition.fields`])],$.prototype,`readObjectIdField`,null),e([N({type:[`ArcGISFeatureLayer`],json:{write:{target:`layerType`,ignoreOrigin:!0,layerContainerTypes:iQ}}})],$.prototype,`operationalLayerType`,void 0),e([N(D7.outFields)],$.prototype,`outFields`,void 0),e([N({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],$.prototype,`path`,void 0),e([N(h0)],$.prototype,`popupEnabled`,void 0),e([N({type:NM,json:{name:`popupInfo`,write:!0}})],$.prototype,`popupTemplate`,void 0),e([M(`popupTemplate`)],$.prototype,`writePopupTemplate`,null),e([N({readOnly:!0})],$.prototype,`defaultPopupTemplate`,null),e([N({types:b5,json:{origins:{service:{write:{target:`drawingInfo.renderer`,enabled:!1}},"web-scene":{types:x5,name:`layerDefinition.drawingInfo.renderer`,write:{layerContainerTypes:iQ,overridePolicy:(e,t,n)=>({ignoreOrigin:n?.writeLayerSchema,layerContainerTypes:iQ})}}},write:{target:`layerDefinition.drawingInfo.renderer`,overridePolicy:(e,t,n)=>({ignoreOrigin:n?.writeLayerSchema,layerContainerTypes:iQ})}}})],$.prototype,`renderer`,null),e([j(`service`,`renderer`,[`drawingInfo.renderer`,`defaultSymbol`]),j(`renderer`,[`layerDefinition.drawingInfo.renderer`,`layerDefinition.defaultSymbol`])],$.prototype,`readRenderer`,null),e([N()],$.prototype,`resourceInfo`,void 0),e([N((()=>{let e=C(m0);return e.json.origins[`portal-item`]={read:!1,write:!1},e})())],$.prototype,`screenSizePerspectiveEnabled`,void 0),e([N({clonable:!1})],$.prototype,`source`,null),e([j(`portal-item`,`source`,[`featureSet`]),j(`web-map`,`source`,[`featureSet`])],$.prototype,`readSource`,null),e([N({json:{read:{source:`layerDefinition.extent.spatialReference`}}})],$.prototype,`spatialReference`,void 0),e([N({type:Number})],$.prototype,`subtypeCode`,void 0),e([N({type:[d7]})],$.prototype,`templates`,void 0),e([j(`templates`,[`editFieldsInfo`,`creatorField`,`editorField`,`templates`])],$.prototype,`readTemplates`,null),e([N({type:i7})],$.prototype,`timeInfo`,void 0),e([N()],$.prototype,`title`,void 0),e([j(`service`,`title`,[`name`]),j(`portal-item`,`title`,[`layerDefinition.title`,`layerDefinition.name`,`title`])],$.prototype,`readTitle`,null),e([j(`web-map`,`title`,[`layerDefinition.name`,`title`])],$.prototype,`readTitleFromWebMap`,null),e([N({type:String})],$.prototype,`sublayerTitleMode`,void 0),e([N({json:{read:!1}})],$.prototype,`type`,void 0),e([N({type:String})],$.prototype,`typeIdField`,void 0),e([j(`service`,`typeIdField`),j(`typeIdField`,[`layerDefinition.typeIdField`])],$.prototype,`readTypeIdField`,null),e([N({type:[f7]})],$.prototype,`types`,void 0),e([j(`service`,`types`,[`types`]),j(`types`,[`layerDefinition.types`])],$.prototype,`readTypes`,null),e([N({type:Boolean,json:{origins:{"portal-item":{write:{target:`layerDefinition.defaultVisibility`,layerContainerTypes:iQ}}}}})],$.prototype,`visible`,void 0),e([j(`portal-item`,`visible`,[`visibility`,`layerDefinition.defaultVisibility`])],$.prototype,`readVisible`,null),$=e([P(`esri.layers.FeatureLayer`)],$);var k7=class extends L{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};e([N({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],k7.prototype,`moment`,void 0),e([N({type:Boolean,json:{write:!0}})],k7.prototype,`fullUpdate`,void 0),e([N({type:Boolean,json:{write:!0}})],k7.prototype,`validateErrorsCreated`,void 0),e([N({type:Boolean,json:{write:!0}})],k7.prototype,`exceededTransferLimit`,void 0),e([N({type:[Object],json:{write:!0}})],k7.prototype,`serviceEdits`,void 0),e([N({type:[Object],json:{write:!0}})],k7.prototype,`discoveredSubnetworks`,void 0),k7=e([P(`esri.rest.networks.support.ValidateNetworkTopologyResult`)],k7);var A7=k7,dEe=Cr()({Pending:`job-waiting`,InProgress:`job-executing`,Completed:`job-succeeded`}),j7=class extends A7{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){let t={...e,query:{f:`json`}},{data:n}=await Qc(this.statusUrl,t);return this.read(n),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(e={}){let{interval:t=1e3,statusCallback:n}=e;return new Promise((e,r)=>{this._clearTimer(),this._timer=setInterval(()=>{this._timer||r(Si()),this.checkJobStatus().then(t=>{let{status:r}=t;switch(this.status=r,r){case`job-succeeded`:this._clearTimer(),e(this);break;case`job-waiting`:case`job-executing`:n&&n(this)}},e=>{this._clearTimer(),r(e)})},t)})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};e([N()],j7.prototype,`editsResolver`,void 0),e([N({type:String,json:{write:!0}})],j7.prototype,`statusUrl`,void 0),e([A(dEe)],j7.prototype,`status`,void 0),e([N({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],j7.prototype,`submissionTime`,void 0),e([N({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],j7.prototype,`lastUpdatedTime`,void 0),j7=e([P(`esri.networks.support.TopologyValidationJobInfo`)],j7);var fEe=j7;function pEe(e,t,n=`from`){let{fromRuleElement:r,viaRuleElement:i,toRuleElement:a}=F7(e),o=[];switch(e.ruleType){case 2:case 3:n===`from`&&P7(t,r,!1)?o.push(a):n===`to`&&P7(t,a,!1)&&o.push(r);break;case 4:case 1:P7(t,r,!0)?o.push(a):P7(t,a,!0)&&o.push(r);break;case 5:i&&(P7(t,i,!0)?(o.push(r),o.push(a)):(P7(t,r,!0)||P7(t,a,!0))&&o.push(i));break;default:return[]}return o}function M7(e,t,n){let{fromRuleElement:r,viaRuleElement:i,toRuleElement:a}=F7(e);switch(e.ruleType){case 2:case 3:return N7(t,n,r,a,!1,!1);case 4:case 1:return N7(t,n,r,a,!0,!0);case 5:return N7(t,n,r,i,!0,!0)||N7(t,n,a,i,!0,!0);default:return!1}}function N7(e,t,n,r,i,a){if(!n||!r)return!1;let o=P7(e,n,a),s=P7(t,r,a);if(i){let i=P7(e,r,a),c=P7(t,n,a);return o&&s||i&&c}return o&&s}function mEe(e,t){let n=e.terminal?.terminalId,r=t.terminalId;return n==null&&r==null||(n===1?r==null||r===1:n===r)}function P7(e,t,n){let{assetGroupCode:r,assetTypeCode:i}=e;return(`layerId`in e?e.layerId===t.networkSource?.layerId:e.networkSourceId===t.networkSource?.sourceId)&&(r==null||r===t.assetGroup?.assetGroupCode)&&(i==null||i===t.assetType?.assetTypeCode)&&(!n||!(`terminalId`in e)||mEe(t,e))}function F7(e){return{fromRuleElement:{networkSource:e.fromNetworkSource,assetGroup:e.fromAssetGroup,assetType:e.fromAssetType,terminal:e.fromTerminal},viaRuleElement:e.viaNetworkSource?{networkSource:e.viaNetworkSource,assetGroup:e.viaAssetGroup,assetType:e.viaAssetType,terminal:e.viaTerminal}:void 0,toRuleElement:{networkSource:e.toNetworkSource,assetGroup:e.toAssetGroup,assetType:e.toAssetType,terminal:e.toTerminal}}}function I7(e){let t=null,n=null,r=null;if(ok(e))t=L7(e),[n,r]=hEe(e);else if(nE(e)){t=e.parent?.layerId??null;let[r]=R7(e);r===e.subtypeField&&(n=e.subtypeCode)}else t=e.layerId??null;return{layerId:t,assetGroupCode:n,assetTypeCode:r}}function L7(e){let{sourceLayer:t}=e,n;return eE(t)?n=t.layerId:nE(t)&&(n=t.parent?.layerId),n??null}function hEe(e){let[t,n]=R7(e.sourceLayer);return[t?e.attributes[t]:null,n?e.attributes[n]:null]}function R7(e){return!e||!(`fieldsIndex`in e)?[null,null]:[e.fieldsIndex.normalizeFieldName(`assetGroup`)??null,e.fieldsIndex.normalizeFieldName(`assetType`)??null]}async function z7(e,t){if(e===`Utility Network Layer`){let{default:e}=await R(async()=>{let{default:e}=await import(`./UtilityNetwork-D7Hi_VNb.js`);return{default:e}},[]);return new e({layerUrl:t})}return null}async function gEe(e){let t=`portalItem`in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof RT||(t={...t,portalItem:new RT(t.portalItem)});let n=t.portalItem;if(await n.load(),n.type!==`Feature Service`)throw new D(`portal:unknown-item-type`,"Unknown item type '${type}'",{type:n.type});let r=n.url,i=await Qc(r,{responseType:`json`,query:{f:`json`}}),a=`Network Layer`;if(i.data.type?.includes(a))return z7(i.data.type,r);if(i.data.layers){let e=i.data.layers.find(e=>e.type.includes(a));if(e){let t=`${r}/${e.id}`;return z7(e.type,t)}}return null}var B7=class extends rZ(pT){static fromPortalItem(e){return gEe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this._historicMoment=null,this._gdbVersion=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=e=>{let{serviceUrl:t,gdbVersion:n,result:r}=e,i=t===this.featureServiceUrl,a=M1(t,n,this.gdbVersion);i&&a&&r.then(e=>{T1(t,n)&&(this.historicMoment=e.historicMoment)})},this._updateMomentHandler=e=>{let{serviceUrl:t,gdbVersion:n,moment:r}=e,i=t===this.featureServiceUrl,a=M1(t,n,this.gdbVersion);i&&a&&(this.historicMoment=r)},this.when().then(()=>{this.addHandles([D1(this._applyEditsHandler),O1(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{ji(e)||E.getLogger(this).error(`#load()`,`Failed to load layer (title: '${this.title??`no title`}', id: '${this.id??`no id`}')`,{error:e})})}get loaded(){return super.loaded}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??null}get parsedUrl(){return Qo(this.layerUrl)}get featureServiceUrl(){return Dc(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,`/UtilityNetworkServer`)}get layerId(){return Dc(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}get gdbVersion(){return this._gdbVersion}set gdbVersion(e){this._gdbVersion=e}get historicMoment(){return this._historicMoment}set historicMoment(e){this._historicMoment=e}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await Promise.all([this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e),this._fetchLayerMetaData(this.layerUrl,e)])}getLayerIdBySourceId(e){if(!this.dataElement)return null;let t=this._layerIdBySourceId.get(e);if(t!=null)return t;let n=this.dataElement.domainNetworks,r=this._traverseNetworkSources(n,this._layerIdBySourceId,`sourceId`,`layerId`,e);return r>=0?r:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;let t=this._sourceIdByLayerId.get(e);if(t!=null)return t;let n=this.dataElement.domainNetworks,r=this._traverseNetworkSources(n,this._sourceIdByLayerId,`layerId`,`sourceId`,e);return r>=0?r:null}getObjectIdsFromElements(e){let t=[],n=new Map;for(let t of e){let e=this.getLayerIdBySourceId(t.networkSourceId);if(e==null)continue;let r=n.get(e);r===void 0&&(r=[]),r.push(t.objectId),n.set(e,r)}let r=this.featureServiceUrl;return n.forEach((e,n)=>t.push({layerUrl:`${r}/${n}`,objectIds:e})),t}async queryNamedTraceConfigurations(e,t){let[{queryNamedTraceConfigurations:n},{default:r}]=await Promise.all([R(()=>import(`./queryNamedTraceConfigurations-C3w4AU7I.js`),[]),R(()=>import(`./QueryNamedTraceConfigurationsParameters-BfEPQnYO.js`),[])]),i=this.networkServiceUrl,a=r.from(e);return(await n(i,a,{...t}))?.namedTraceConfigurations}async validateTopology(e,t){if(!e.validateArea)throw new D(`network:undefined-validateArea`,`the network must have validateArea defined in the validate network topology parameters.`);let[{validateNetworkTopology:n},{default:r}]=await Promise.all([R(()=>import(`./validateNetworkTopology-CQ3zVeQJ.js`),[]),R(()=>import(`./ValidateNetworkTopologyParameters-BYDyiBsQ.js`),[])]),i=r.from(e);T1(this.featureServiceUrl,this.gdbVersion||null)?(i.sessionID=x1,await w1(this.featureServiceUrl,this.gdbVersion,!0)):i.sessionID=null,i.gdbVersion=this.gdbVersion;let a=this.networkServiceUrl,o=this.featureServiceUrl,s=k1(o,null,this.gdbVersion,!0),c=await n(a,i,{...t});if(c?.serviceEdits){let e=[];for(let t of c.serviceEdits){let{editedFeatures:n}=t,r=n?.spatialReference?new H(n.spatialReference):null;e.push({layerId:t.layerId,editedFeatures:{adds:n?.adds?.map(e=>V7(e,r))||[],updates:n?.updates?.map(e=>({original:V7(e[0],r),current:V7(e[1],r)}))||[],deletes:n?.deletes?.map(e=>V7(e,r))||[],spatialReference:r}})}s.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:e,exceededTransferLimit:!1,historicMoment:c.moment})}return c}async submitTopologyValidationJob(e,t){let n=null;if(!e.validateArea)throw new D(`network:undefined-validateArea`,`the network must have validateArea defined in the validate network topology parameters.`);if(!this.gdbVersion){let e=this.layerUrl.replace(/\/FeatureServer/i,`/VersionManagementServer`).replace(/\/\d*$/,``);n=(await Qc(e,{responseType:`json`,query:{f:`json`}})).data.defaultVersionName}let[{submitValidateNetworkTopologyJob:r},{default:i}]=await Promise.all([R(()=>import(`./validateNetworkTopology-CQ3zVeQJ.js`),[]),R(()=>import(`./ValidateNetworkTopologyParameters-BYDyiBsQ.js`),[])]),a=i.from(e);T1(this.featureServiceUrl,this.gdbVersion||null)?(a.sessionID=x1,await w1(this.featureServiceUrl,this.gdbVersion,!0)):a.sessionID=null,a.gdbVersion=this.gdbVersion||n;let o=this.networkServiceUrl,s=this.featureServiceUrl?k1(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,c=await r(o,a,{...t});return new fEe({statusUrl:c,editsResolver:s})}getSourceTypeById(e){if(!this.dataElement)return null;for(let t of this.dataElement.domainNetworks)for(let n of[t.edgeSources??[],t.junctionSources??[]])for(let r of n)if(r.sourceId===e)return n===t.edgeSources?`edge`:`junction`;return null}_traverseNetworkSources(e,t,n,r,i){for(let a of e)for(let e of[a.edgeSources??[],a.junctionSources??[]])for(let a of e)if(a[n]===i)return t.set(i,a[r]),a[r];return-1}async _fetchLayerMetaData(e,t){let n=await Qc(e,{responseType:`json`,query:{f:`json`},...t});this.sourceJSON=n.data,this.read(n.data,{origin:`service`})}async _fetchDataElement(e,t,n){if(this.dataElement)return;let r=await Qc(`${e}/queryDataElements`,{responseType:`json`,query:{layers:JSON.stringify([t]),f:`json`},...n}).then(e=>e.data.layerDataElements?.[0]);r&&this.read(r,{origin:`service`})}};function V7(e,t){return new VF({attributes:e.attributes,geometry:gh({...e.geometry,spatialReference:t})})}e([N({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],B7.prototype,`id`,void 0),e([N({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:`name`}}},read:!1}})],B7.prototype,`title`,void 0),e([N({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:`url`},write:{target:`url`,isRequired:!0}}},read:!1}})],B7.prototype,`layerUrl`,void 0),e([N({type:Object,json:{origins:{service:{read:!0}},read:!1}})],B7.prototype,`dataElement`,void 0),e([N({type:Rd,json:{origins:{service:{read:{source:`extent`}}},read:!1}})],B7.prototype,`fullExtent`,void 0),e([N({type:H,json:{origins:{service:{read:{source:`extent.spatialReference`}}},read:!1}})],B7.prototype,`spatialReference`,void 0),e([N({type:[`utility`,`trace`],readOnly:!0,json:{read:!1,write:!1}})],B7.prototype,`type`,void 0),e([N({readOnly:!0})],B7.prototype,`datasetName`,null),e([N({readOnly:!0})],B7.prototype,`owner`,null),e([N({readOnly:!0})],B7.prototype,`schemaGeneration`,null),e([N({readOnly:!0})],B7.prototype,`parsedUrl`,null),e([N({readOnly:!0})],B7.prototype,`featureServiceUrl`,null),e([N({readOnly:!0})],B7.prototype,`networkServiceUrl`,null),e([N({readOnly:!0})],B7.prototype,`layerId`,null),e([N()],B7.prototype,`sourceJSON`,void 0),e([N({readOnly:!0})],B7.prototype,`networkSystemLayers`,null),e([N({type:String})],B7.prototype,`gdbVersion`,null),e([N({type:Date})],B7.prototype,`historicMoment`,null),e([N()],B7.prototype,`_historicMoment`,void 0),e([N()],B7.prototype,`_gdbVersion`,void 0),B7=e([P(`esri.networks.Network`)],B7);var _Ee=B7,H7=class extends Mo(pT){constructor(e){super(e),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=Qc}initialize(){}async load(e){let t=this.rulesLayer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(t),this}getFeaturesCanAssociateWithClause(e,t,n){let r=new Map,[i,a]=R7(e.sourceLayer);if(!i||!a)return``;let o=I7(e),s=I7(t);n.forEach(e=>{let{type:t,direction:n}=e;this._getRulesForAssociationType(t).forEach(e=>{pEe(e,o,n).filter(e=>e.networkSource?.layerId===s.layerId).forEach(e=>{let t=e.assetGroup?.assetGroupCode,n=e.assetType?.assetTypeCode;if(t!=null&&n!=null){let e=r.get(t)??new Set;e.add(n),r.set(t,e)}})})});let c=[];return this._mergeAssetCodes(r).forEach((e,t)=>{let n=`${i} IN (${t})`,r=dk(a,[...e]);n&&r&&c.push(lk(n,r))}),c.length>1&&(c=c.map(e=>`(${e})`)),c.join(` OR `)}getFeaturesCanAssociateWith(e,t,n){return L7(e)==null?[]:t.filter(t=>this.canAssociateFeatures(e,t,n))}canAssociateFeatures(e,t,n){if(!this._canSupportAssociations([e,t]))return!1;let r=I7(e),i=I7(t);return n.some(e=>{let{type:t,direction:n}=e;return this._getRulesForAssociationType(t).some(e=>n===`to`?M7(e,i,r):M7(e,r,i))})}getLayersCanAssociateWith(e,t,n){return L7(e)==null?[]:t.filter(t=>this.canAssociateFeatureToLayer(e,t,n))}canAssociateFeatureToLayer(e,t,n){if(!this._canSupportAssociations([e,t]))return!1;let r=I7(e),i=I7(t);return n.some(e=>{let{type:t,direction:n}=e;return this._getRulesForAssociationType(t).some(e=>n===`to`?M7(e,i,r):M7(e,r,i))})}getFeatureSQL(e,t){let n=e.layerId.toString(),r=e.fieldsIndex?.normalizeFieldName(`assetGroup`),i=e.fieldsIndex?.normalizeFieldName(`assetType`),a=r?t.attributes[r]:null,o=i?t.attributes[i]:null,s=this.rulesHash[n];if(s){let e=s.assetGroupHash[a];if(e)return e.assetTypeHash[o]||null}return null}_initializeRulesTable(){let e={},t=[{networkSourceId:`fromNetworkSource`,assetGroupId:`fromAssetGroup`,assetTypeId:`fromAssetType`},{networkSourceId:`toNetworkSource`,assetGroupId:`toAssetGroup`,assetTypeId:`toAssetType`},{networkSourceId:`viaNetworkSource`,assetGroupId:`viaAssetGroup`,assetTypeId:`viaAssetType`}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(let n of this.rules){if(n.ruleType===3){this.rulesCategorized.attachment.push(n);continue}if(n.ruleType===2){this.rulesCategorized.containment.push(n);continue}if(n.ruleType===1){this.rulesCategorized.connectivity.push(n);continue}this.rulesCategorized.connectivity.push(n);let r=[[0,1],[1,0]];n.ruleType===5&&(r=[[0,2],[2,0],[1,2],[2,1]]);for(let i of r){let r=i.shift(),a=i.shift(),o=!1;switch(n.ruleType){case 5:o=r===0||r===1;break;case 4:o=r===1}let s=t[r],c=n[s.networkSourceId]?.layerId.toString()??``,l=n[s.assetGroupId]?.assetGroupCode?.toString(),u=n[s.assetTypeId],d=u?.assetTypeCode?.toString(),f=t[a],p=n[f.networkSourceId]?.layerId.toString()??``,m=n[f.assetGroupId]?.assetGroupCode?.toString(),h=n[f.assetTypeId],g=h?.assetTypeCode?.toString(),_=e[c]??{assetGroupHash:{}};if(!(l&&d&&m&&g))continue;let v=_.assetGroupHash[l]??{assetTypeHash:{}},y=v.assetTypeHash[d]??{};if(y[p]=y[p]??{},o){y[c]=y[c]??{};let e=lk(`assetgroup = ${l}`,`assettype = ${d}`);h?.connectivityPolicy===`esriNECPEndVertex`?y[c].endVertex=y[c]?.endVertex?`${y[c].endVertex}`:`(${e})`:y[c].anyVertex=y[c].anyVertex?`${y[c].anyVertex}`:`(${e})`}let b=lk(`assetgroup = ${m}`,`assettype = ${g}`);h?.connectivityPolicy===`esriNECPEndVertex`?y[p].endVertex=y[p]?.endVertex?uk(y[p].endVertex,b):`(${b})`:y[p].anyVertex=y[p]?.anyVertex?uk(y[p].anyVertex,b):`(${b})`,v.assetTypeHash[d]=y,_.assetGroupHash[l]=v,e[c]=_}}this._set(`rulesHash`,e)}_getRulesForAssociationType(e){let{rulesCategorized:t}=this;switch(e){case`attachment`:return t.attachment;case`containment`:return t.containment;case`connectivity`:case`junction-junction-connectivity`:return t.connectivity.filter(e=>e.ruleType===1);case`junction-edge-from-connectivity`:case`junction-edge-midspan-connectivity`:case`junction-edge-to-connectivity`:return t.connectivity.filter(e=>e.ruleType===4||e.ruleType===5);default:return[]}}_areSetsEqual(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}_mergeAssetCodes(e){let t=new Map,n=new Set;for(let[r,i]of e){let a=new Set([r]);for(let[t,o]of e)r!==t&&!n.has(t)&&this._areSetsEqual(i,o)&&(a.add(t),n.add(t));let o=Array.from(a).sort().join(`,`);t.set(o,i)}return t}_canSupportAssociations(e){return e.every(e=>{let t=ok(e)?e.sourceLayer:e,[n,r]=R7(t);return n!=null&&r!=null})}};e([N({constructOnly:!0})],H7.prototype,`rulesLayer`,void 0),e([N({constructOnly:!0})],H7.prototype,`rules`,void 0),e([N({readOnly:!0})],H7.prototype,`rulesHash`,void 0),e([N()],H7.prototype,`rulesCategorized`,void 0),e([N({constructOnly:!0})],H7.prototype,`request`,void 0),H7=e([P(`esri.networks.RulesTable`)],H7);var U7=class extends L{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};e([N({type:[Object],json:{write:!0}})],U7.prototype,`conditionBarriers`,void 0),e([N({type:[Object],json:{write:!0}})],U7.prototype,`outputConditions`,void 0),e([N({type:[Object],json:{write:!0}})],U7.prototype,`functions`,void 0),e([N({type:[Object],json:{write:!0}})],U7.prototype,`functionBarriers`,void 0),e([N({type:[`junctions`,`edges`,`junctionsAndEdges`],json:{write:!0}})],U7.prototype,`traversabilityScope`,void 0),e([N({type:String,json:{write:!0}})],U7.prototype,`shortestPathNetworkAttributeName`,void 0),e([N({type:Boolean,json:{write:!0}})],U7.prototype,`includeBarriers`,void 0),e([N({type:Boolean,json:{write:!0}})],U7.prototype,`validateConsistency`,void 0),e([N({type:Boolean,json:{write:!0}})],U7.prototype,`ignoreBarriersAtStartingPoints`,void 0),U7=e([P(`esri.networks.support.TraceConfiguration`)],U7);var W7=U7,G7=new xr({Clean:`clean`,Dirty:`dirty`}),K7=new xr({Physical:`physical`,Virtual:`virtual`}),q7=new xr({"Start and end":`start-and-end`,Start:`start`,Midspan:`midspan`,End:`end`}),J7=new xr({startingPoint:`starting-point`,barrier:`barrier`,stoppingPoint:`stopping-point`}),Y7=new xr({connected:`connected`,upstream:`upstream`,downstream:`downstream`,shortestPath:`shortest-path`,subnetwork:`subnetwork`,subnetworkController:`subnetwork-controller`,loops:`loops`,isolation:`isolation`,path:`path`,circuit:`circuit`}),vEe=`{00000000-0000-0000-0000-000000000000}`,X7=new xr({junctionJunctionConnectivity:`junction-junction-connectivity`,connectivity:`connectivity`,attachment:`attachment`,containment:`containment`,junctionEdgeFromConnectivity:`junction-edge-from-connectivity`,junctionEdgeMidspanConnectivity:`junction-edge-midspan-connectivity`,junctionEdgeToConnectivity:`junction-edge-to-connectivity`}),yEe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},bEe=new xr({normal:`normal`,rebuild:`rebuild`,forceRebuild:`force-rebuild`}),Z7=class extends I(W7){constructor(e){super(e),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.circuitName=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.inferConnectivity=null,this.maxHops=null,this.nearestNeighbor=null,this.numPaths=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};e([N({type:[Object],json:{write:!0}})],Z7.prototype,`filterBarriers`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`arcadeExpressionBarrier`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`circuitName`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`domainNetworkName`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`filterBitsetNetworkAttributeName`,void 0),e([N({type:[Object],json:{write:!0}})],Z7.prototype,`filterFunctionBarriers`,void 0),e([N({type:[`junctions`,`edges`,`junctionsAndEdges`],json:{write:!0}})],Z7.prototype,`filterScope`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`includeContainers`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`includeContent`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`includeIsolated`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`includeStructures`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`allowIndeterminateFlow`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`includeUpToFirstSpatialContainer`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`inferConnectivity`,void 0),e([N({type:Number,json:{write:!0}})],Z7.prototype,`maxHops`,void 0),e([N({type:Object,json:{write:!0}})],Z7.prototype,`nearestNeighbor`,void 0),e([N({type:Number,json:{write:!0}})],Z7.prototype,`numPaths`,void 0),e([N({type:[Object],json:{write:!0}})],Z7.prototype,`outputFilterCategories`,void 0),e([N({type:[Object],json:{write:!0}})],Z7.prototype,`outputFilters`,void 0),e([N({type:[Object],json:{write:!0}})],Z7.prototype,`propagators`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`subnetworkName`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`targetTierName`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`diagramTemplateName`,void 0),e([N({type:String,json:{write:!0}})],Z7.prototype,`tierName`,void 0),e([N({type:Boolean,json:{write:!0}})],Z7.prototype,`validateLocatability`,void 0),Z7=e([P(`esri.networks.support.UNTraceConfiguration`)],Z7);var Q7=Z7,$7=class extends iZ{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return e.tierName===void 0?W7.fromJSON(e):Q7.fromJSON(e)}};e([N({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:`id`},write:{target:`id`,isRequired:!0}},service:{read:{source:`globalId`},write:{target:`globalId`,isRequired:!0}}},read:!1}})],$7.prototype,`globalId`,void 0),e([N({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:`title`},write:{target:`title`,isRequired:!0}},service:{read:{source:`name`},write:{target:`name`,isRequired:!0}}},read:!1}})],$7.prototype,`title`,void 0),e([N({type:W7,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$7.prototype,`traceConfiguration`,void 0),e([j(`service`,`traceConfiguration`)],$7.prototype,`readTraceConfiguration`,null),e([N({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$7.prototype,`creationDate`,void 0),e([N({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$7.prototype,`creator`,void 0),e([N({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],$7.prototype,`description`,void 0),e([N({type:[`none`,`one`,`many`],json:{origins:{service:{read:{source:`minNumStartingPoints`},write:{target:`minNumStartingPoints`}}},read:!1}})],$7.prototype,`minStartingPoints`,void 0),e([N({json:{origins:{service:{read:!0,write:!0}},read:!1}})],$7.prototype,`resultTypes`,void 0),e([N({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],$7.prototype,`tags`,void 0),e([N({type:Y7.apiValues,json:{type:Y7.jsonValues,origins:{service:{read:Y7.read,write:Y7.write}},read:!1}})],$7.prototype,`traceType`,void 0),$7=e([P(`esri.networks.support.NamedTraceConfiguration`)],$7);var e9=$7;function xEe(e){let t=e?.fieldsIndex,n=`fromnetworksourceid`,r=`fromglobalid`,i=`fromterminalid`,a=`fromfirstunit`,o=`fromnumunits`,s=`tonetworksourceid`,c=`toglobalid`,l=`toterminalid`,u=`tofirstunit`,d=`tonumunits`,f=`status`,p=`associationtype`,m=`iscontentvisible`,h=`percentalong`,g=`globalid`;return{fromNetworkSourceId:t?.get(n)?.name??n,fromGlobalId:t?.get(r)?.name??r,fromTerminalId:t?.get(i)?.name??i,fromFirstUnit:t?.get(a)?.name??a,fromNumUnits:t?.get(o)?.name??o,toNetworkSourceId:t?.get(s)?.name??s,toGlobalId:t?.get(c)?.name??c,toTerminalId:t?.get(l)?.name??l,toFirstUnit:t?.get(u)?.name??u,toNumUnits:t?.get(d)?.name??d,status:t?.get(f)?.name??f,associationType:t?.get(p)?.name??p,isContentVisible:t?.get(m)?.name??m,percentAlong:t?.get(h)?.name??h,globalId:t?.get(e?.globalIdField??g)?.name??g}}function SEe(e,t){if(t.type!==`feature`&&t.type!==`subtype-group`||!t.url)return[];let n=`utilityNetworks`in e.map?e.map.utilityNetworks??[]:[];for(let e of n)if(e.isUtilityLayer(t)){let e=t.fieldsIndex.get(`assetgroup`),n=t.fieldsIndex.get(`assettype`);return[e?.name,n?.name].filter(e=>e!=null)}return[]}var t9=class extends F{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTable=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){this.associationsTable?.destroy()}async loadAssociationsTable(e){if(!this.associationsTable){let{associationsTableUrl:e}=this;if(!e)throw new D(`utility-network-system-layers:missing-associations-table-url`,"Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new $({url:e})}return await this.associationsTable.load(e),this.associationsTable}async loadSubnetworksTable(e){if(!this.subnetworksTable){let{subnetworksTableUrl:e}=this;if(!e)throw new D(`utility-network-system-layers:missing-subnetworks-table-url`,"Unable to load the subnetworks table, as the `subnetworksTableUrl` is not set.");this.subnetworksTable=new $({url:e})}return await this.subnetworksTable.load(e),this.subnetworksTable}};e([N({constructOnly:!0})],t9.prototype,`rulesTableId`,void 0),e([N({constructOnly:!0})],t9.prototype,`rulesTableUrl`,void 0),e([N()],t9.prototype,`subnetworksTable`,void 0),e([N({constructOnly:!0})],t9.prototype,`subnetworksTableId`,void 0),e([N({constructOnly:!0})],t9.prototype,`subnetworksTableUrl`,void 0),e([N({constructOnly:!0})],t9.prototype,`dirtyAreasLayerId`,void 0),e([N({constructOnly:!0})],t9.prototype,`dirtyAreasLayerUrl`,void 0),e([N()],t9.prototype,`associationsTable`,void 0),e([N({constructOnly:!0})],t9.prototype,`associationsTableId`,void 0),e([N({constructOnly:!0})],t9.prototype,`associationsTableUrl`,void 0),t9=e([P(`esri.networks.support.NetworkSystemLayers`)],t9);var n9=class extends L{constructor(e){super(e),this.id=null,this.name=null}};e([N({type:Number,json:{read:{source:`terminalId`},write:{target:`terminalId`}}})],n9.prototype,`id`,void 0),e([N({type:String,json:{read:{source:`terminalName`},write:{target:`terminalName`}}})],n9.prototype,`name`,void 0),e([N({type:Boolean,json:{write:!0}})],n9.prototype,`isUpstreamTerminal`,void 0),n9=e([P(`esri.networks.support.Terminal`)],n9);var CEe=n9,r9=new xr({esriUNTMBidirectional:`bidirectional`,esriUNTMDirectional:`directional`}),i9=class extends L{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};e([N({type:String,json:{write:!0}})],i9.prototype,`defaultConfiguration`,void 0),e([N({type:Number,json:{read:{source:`terminalConfigurationId`},write:{target:`terminalConfigurationId`}}})],i9.prototype,`id`,void 0),e([N({type:String,json:{read:{source:`terminalConfigurationName`},write:{target:`terminalConfigurationName`}}})],i9.prototype,`name`,void 0),e([N({type:[CEe],json:{write:!0}})],i9.prototype,`terminals`,void 0),e([N({type:r9.apiValues,json:{type:r9.jsonValues,read:r9.read,write:r9.write}})],i9.prototype,`traversabilityModel`,void 0),i9=e([P(`esri.networks.support.TerminalConfiguration`)],i9);var a9=class extends L{constructor(e){super(e),this.type=`networkElement`,this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};e([N({json:{write:!1}})],a9.prototype,`type`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`assetGroupCode`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`assetTypeCode`,void 0),e([N({type:String,json:{write:!0}})],a9.prototype,`globalId`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`networkSourceId`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`objectId`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`positionFrom`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`positionTo`,void 0),e([N({type:Number,json:{write:!0}})],a9.prototype,`terminalId`,void 0),a9=e([P(`esri.rest.networks.support.NetworkElement`)],a9);var o9=class extends a9{constructor(e){super(e),this.type=`telecomNetworkElement`,this.firstUnit=null,this.numUnits=null}};e([N({json:{write:!1}})],o9.prototype,`type`,void 0),e([N({json:{write:!0}})],o9.prototype,`firstUnit`,void 0),e([N({json:{write:!0}})],o9.prototype,`numUnits`,void 0),o9=e([P(`esri.rest.networks.support.TelecomNetworkElement`)],o9);var s9=class extends L{constructor(e){super(e),this.edgeElement=null,this.junctionElement=null}readEdgeElement(e,t){return new o9({networkSourceId:t.edgeNetworkSourceId,globalId:t.edgeGlobalId,objectId:t.edgeObjectId,positionFrom:t.edgePositionFrom,positionTo:t.edgePositionTo,firstUnit:t.edgeFirstUnit,numUnits:t.edgeNumUnits})}writeEdgeElement(e,t){t.edgeNetworkSourceId=e.networkSourceId,t.edgeGlobalId=e.globalId,t.edgeObjectId=e.objectId,t.edgePositionFrom=e.positionFrom,t.edgePositionTo=e.positionTo,t.edgeFirstUnit=e.firstUnit,t.edgeNumUnits=e.numUnits}readJunctionElement(e,t){return new o9({networkSourceId:t.junctionNetworkSourceId,globalId:t.junctionGlobalId,objectId:t.junctionObjectId,terminalId:t.junctionTerminalId,firstUnit:t.junctionFirstUnit,numUnits:t.junctionNumUnits})}writeJunctionElement(e,t){t.junctionNetworkSourceId=e.networkSourceId,t.junctionGlobalId=e.globalId,t.junctionObjectId=e.objectId,t.junctionTerminalId=e.terminalId,t.junctionFirstUnit=e.firstUnit,t.junctionNumUnits=e.numUnits}};e([N({type:o9,json:{read:{source:[`edgeNetworkSourceId`,`edgeGlobalId`,`edgeObjectId`,`edgePositionFrom`,`edgePositionTo`,`edgeFirstUnit`,`edgeNumUnits`]},write:!0}})],s9.prototype,`edgeElement`,void 0),e([j(`edgeElement`)],s9.prototype,`readEdgeElement`,null),e([M(`edgeElement`)],s9.prototype,`writeEdgeElement`,null),e([N({type:o9,json:{read:{source:[`junctionNetworkSourceId`,`junctionGlobalId`,`junctionObjectId`,`junctionTerminalId`,`junctionFirstUnit`,`junctionNumUnits`]},write:!0}})],s9.prototype,`junctionElement`,void 0),e([j(`junctionElement`)],s9.prototype,`readJunctionElement`,null),e([M(`junctionElement`)],s9.prototype,`writeJunctionElement`,null),s9=e([P(`esri.networks.support.CircuitPathConnectivityElement`)],s9);var wEe=s9,c9=class extends I(L){constructor(e){super(e),this.globalId=null,this.isFilterBarrier=!1,this.percentAlong=null,this.terminalId=null,this.type=null,this.firstUnit=null,this.numUnits=null,this.networkSourceId=null}};e([N({type:String,json:{write:!0}})],c9.prototype,`globalId`,void 0),e([N({type:Boolean,json:{write:!0}})],c9.prototype,`isFilterBarrier`,void 0),e([N({type:Number,json:{write:!0}})],c9.prototype,`percentAlong`,void 0),e([N({type:Number,json:{write:!0}})],c9.prototype,`terminalId`,void 0),e([N({type:J7.apiValues,json:{type:J7.jsonValues,read:{reader:J7.read,source:`traceLocationType`},write:{writer:J7.write,target:`traceLocationType`}}})],c9.prototype,`type`,void 0),e([N({type:Number,json:{write:!0}})],c9.prototype,`firstUnit`,void 0),e([N({type:Number,json:{write:!0}})],c9.prototype,`numUnits`,void 0),e([N({type:Number})],c9.prototype,`networkSourceId`,void 0),c9=e([P(`esri.rest.networks.support.TraceLocation`)],c9);var l9=c9,u9=class extends L{constructor(e){super(e),this.pathId=null,this.order=null,this.startingPoint=null,this.stoppingPoint=null,this.pathConnectivity=[],this.geometry=null}};e([N({type:Number,json:{write:!0}})],u9.prototype,`pathId`,void 0),e([N({type:Number,json:{write:!0}})],u9.prototype,`order`,void 0),e([N({type:l9,json:{write:!0}})],u9.prototype,`startingPoint`,void 0),e([N({type:l9,json:{write:!0}})],u9.prototype,`stoppingPoint`,void 0),e([N({type:[wEe],json:{write:!0}})],u9.prototype,`pathConnectivity`,void 0),e([N({type:lh,json:{write:!0}})],u9.prototype,`geometry`,void 0),u9=e([P(`esri.networks.support.CircuitPath`)],u9);var d9=u9,f9=class extends L{constructor(e){super(e),this.sourceId=null,this.globalId=null,this.terminalId=1,this.firstUnit=1,this.numUnits=1}};e([N({type:Number,json:{write:!0}})],f9.prototype,`sourceId`,void 0),e([N({type:String,json:{write:!0}})],f9.prototype,`globalId`,void 0),e([N({type:Number,json:{write:!0}})],f9.prototype,`terminalId`,void 0),e([N({type:Number,json:{write:!0}})],f9.prototype,`firstUnit`,void 0),e([N({type:Number,json:{write:!0}})],f9.prototype,`numUnits`,void 0),f9=e([P(`esri.networks.support.CircuitLocation`)],f9);var p9=f9,m9=class extends L{constructor(e){super(e),this.name=null,this.globalId=null,this.providerId=null,this.consumerId=null,this.isReserved=!1,this.attributes=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){this.attributes?this.attributes[e]=t:this.attributes={[e]:t}}};e([N({type:String,json:{write:!0}})],m9.prototype,`name`,void 0),e([N({type:String,json:{write:!0}})],m9.prototype,`globalId`,void 0),e([N({type:String})],m9.prototype,`providerId`,void 0),e([N({type:String})],m9.prototype,`consumerId`,void 0),e([N({type:Boolean,json:{write:!0}})],m9.prototype,`isReserved`,void 0),e([N({json:{write:{allowNull:!0,writer:(e,t)=>t.attributes=e??{}}}})],m9.prototype,`attributes`,void 0),m9=e([P(`esri.networks.support.Subcircuit`)],m9);var h9=m9,g9=class extends L{constructor(e){super(e),this.sectionId=null,this.role=`start-and-end`,this.sectionType=`physical`,this.startLocation=null,this.stopLocation=null,this.subcircuit=null,this.path=null}normalizeCtorArgs(e){if(e===void 0)return e;let{sectionId:t,startLocation:n,stopLocation:r,subcircuit:i}=e;return(n||r)&&i?(delete e.startLocation,delete e.stopLocation,E.getLogger(this).warn(`Cannot instantiate CircuitSection with both start/stop locations and subcircuit.`,`CircuitSection with ID '${t}' was defaulted to having a subcircuit only.`)):(n&&!r||!n&&r)&&!i&&E.getLogger(this).warn(`CircuitSection with ID '${t}' must have both start and stop locations.`,`Create/alter operations involving this section will fail unless both are populated.`),e}setStartStopLocations(e,t){this.startLocation=e,this.stopLocation=t,this.subcircuit=null}setSubcircuit(e){this.subcircuit=e,this.startLocation=null,this.stopLocation=null}};e([N({type:Number,json:{write:!0}})],g9.prototype,`sectionId`,void 0),e([N({type:q7.apiValues,json:{type:q7.jsonValues,read:q7.read},readOnly:!0})],g9.prototype,`role`,void 0),e([N({type:K7.apiValues,json:{type:K7.jsonValues,read:K7.read,write:K7.write}})],g9.prototype,`sectionType`,void 0),e([N({type:p9,json:{write:!0}})],g9.prototype,`startLocation`,void 0),e([N({type:p9,json:{write:!0}})],g9.prototype,`stopLocation`,void 0),e([N({type:h9,json:{write:!0}})],g9.prototype,`subcircuit`,void 0),e([N({type:d9,readOnly:!0})],g9.prototype,`path`,void 0),g9=e([P(`esri.networks.support.CircuitSection`)],g9);var _9=class extends L{constructor(e){super(e),this._sectionIdLookup=new Map,this.attributes=null,this.circuitManager=null,this.circuitType=`physical`,this.globalId=null,this.isDeleted=!1,this.lastExportedTime=null,this.lastVerifiedTime=null,this.name=null,this.sections=null,this.startLocation=null,this.status=`dirty`,this.stopLocation=null,this.subcircuits=[]}initialize(){this.addHandles([G(()=>this.sections,e=>{this._sectionIdLookup.clear(),e!=null&&Array.from(e.keys()).forEach(e=>this._sectionIdLookup.set(e.sectionId,e))},qh)])}normalizeCtorArgs(e){if(e===void 0)return e;let{name:t,startLocation:n,stopLocation:r,sections:i}=e;return(n||r)&&i?(delete e.startLocation,delete e.stopLocation,E.getLogger(this).warn(`Cannot instantiate Circuit with both start/stop locations and sections.`,`Circuit '${t}' was defaulted to having sections only.`)):(n&&!r||!n&&r)&&!i&&E.getLogger(this).warn(`Non-sectioned circuit '${t}' must have both start and stop locations.`,`Create/alter operations involving this circuit will fail unless both are populated.`),e}get isSectioned(){return this.startLocation==null&&this.stopLocation==null&&this.sections!=null}readSections(e,t){let{sectionOrder:n,sections:r}=t,i=new Map;if(r==null)return null;if(this._sectionIdLookup.clear(),r.forEach(e=>this._sectionIdLookup.set(e.sectionId,g9.fromJSON(e))),n==null)return Array.from(this._sectionIdLookup.values()).forEach(e=>i.set(e,[])),i;for(let[e,t]of Object.entries(n)){let n=Number(e),r=this._sectionIdLookup.get(n);if(r==null)continue;let a=t.map(e=>this._sectionIdLookup.get(e)).filter(ge);i.set(r,a)}return i}writeSections(e,t){let n={},r=[];e?.forEach((e,t)=>{let i=t.sectionId.toString();n[i]=e.map(e=>e.sectionId),r.push(t.toJSON())}),t.sectionOrder=n,t.sections=r}getSectionById(e){return this._sectionIdLookup.get(e)??null}setStartStopLocations(e,t){this.startLocation=e,this.stopLocation=t,this.sections=null}setSections(e){this.sections=e,this.startLocation=null,this.stopLocation=null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){this.attributes?this.attributes[e]=t:this.attributes={[e]:t}}};e([N({json:{write:{allowNull:!0,writer:(e,t)=>t.attributes=e??{}}}})],_9.prototype,`attributes`,void 0),e([N()],_9.prototype,`circuitManager`,void 0),e([N({type:K7.apiValues,json:{type:K7.jsonValues,read:K7.read,write:K7.write}})],_9.prototype,`circuitType`,void 0),e([N({type:String,json:{write:!0}})],_9.prototype,`globalId`,void 0),e([N({type:Boolean,readOnly:!0})],_9.prototype,`isDeleted`,void 0),e([N({type:Boolean,json:{write:!0},readOnly:!0})],_9.prototype,`isSectioned`,null),e([N({type:Date,json:{read:{reader:e=>typeof e==`number`?new Date(e):null}},readOnly:!0})],_9.prototype,`lastExportedTime`,void 0),e([N({type:Date,json:{read:{reader:e=>typeof e==`number`?new Date(e):null}},readOnly:!0})],_9.prototype,`lastVerifiedTime`,void 0),e([N({type:String,json:{write:!0}})],_9.prototype,`name`,void 0),e([N({json:{read:{source:[`sectionOrder`,`sections`]},write:!0}})],_9.prototype,`sections`,void 0),e([j(`sections`)],_9.prototype,`readSections`,null),e([M(`sections`)],_9.prototype,`writeSections`,null),e([N({type:p9,json:{write:!0}})],_9.prototype,`startLocation`,void 0),e([N({type:G7.apiValues,json:{type:G7.jsonValues,read:G7.read}})],_9.prototype,`status`,void 0),e([N({type:p9,json:{write:!0}})],_9.prototype,`stopLocation`,void 0),e([N({type:[h9],json:{write:!0}})],_9.prototype,`subcircuits`,void 0),_9=e([P(`esri.networks.support.Circuit`)],_9);var v9=class extends L{constructor(e){super(e),this.circuit=null,this.geometry=null,this.path=null}readCircuit(e,t){return _9.fromJSON(t)}};e([N({type:_9,json:{write:!0,read:{source:[`name`,`globalId`,`isSectioned`,`sectionOrder`,`startLocation`,`stopLocation`,`sections`,`subcircuits`,`lastVerifiedTime`,`lastExportedTime`,`circuitType`,`status`]}}})],v9.prototype,`circuit`,void 0),e([j(`circuit`)],v9.prototype,`readCircuit`,null),e([N({type:lh,json:{write:!0}})],v9.prototype,`geometry`,void 0),e([N({type:d9,json:{write:!0}})],v9.prototype,`path`,void 0),v9=e([P(`esri.rest.networks.circuits.support.CircuitTraceResult`)],v9);var TEe=v9,y9=class extends L{constructor(e){super(e),this.line=null,this.multipoint=null,this.polygon=null}};e([N({type:lh,json:{write:!0},readOnly:!0})],y9.prototype,`line`,void 0),e([N({type:Um,json:{read:{source:`point`},write:{target:`point`}},readOnly:!0})],y9.prototype,`multipoint`,void 0),e([N({type:sh,json:{write:!0},readOnly:!0})],y9.prototype,`polygon`,void 0),y9=e([P(`esri.rest.networks.support.AggregatedGeometry`)],y9);var EEe=y9,b9=class extends L{constructor(e){super(e),this.functionType=null,this.networkAttributeName=null,this.result=null}};e([N({type:[`add`,`subtract`,`average`,`count`,`min`,`max`],json:{write:!0},readOnly:!0})],b9.prototype,`functionType`,void 0),e([N({type:String,json:{write:!0},readOnly:!0})],b9.prototype,`networkAttributeName`,void 0),e([N({type:Number,json:{write:!0},readOnly:!0})],b9.prototype,`result`,void 0),b9=e([P(`esri.rest.networks.support.FunctionResult`)],b9);var DEe=b9,x9=class extends L{constructor(e){super(e),this.aggregatedGeometry=null,this.circuits=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.paths=null,this.startingPointsIgnored=!1,this.warnings=null}readNetworkElements(e,t){return t.elements!=null&&Array.isArray(t.elements)?t.elements.map(e=>`firstUnit`in e&&`numUnits`in e?new o9({...e}):new a9({...e})):[]}writeNetworkElements(e,t){t.elements=e.map(e=>e.toJSON())}};e([N({type:EEe,json:{write:!0},readOnly:!0})],x9.prototype,`aggregatedGeometry`,void 0),e([N({type:[TEe],json:{write:!0},readOnly:!0})],x9.prototype,`circuits`,void 0),e([N({type:[a9],json:{write:!0},readOnly:!0})],x9.prototype,`elements`,void 0),e([j(`elements`)],x9.prototype,`readNetworkElements`,null),e([M(`elements`)],x9.prototype,`writeNetworkElements`,null),e([N({type:[DEe],json:{write:!0},readOnly:!0})],x9.prototype,`globalFunctionResults`,void 0),e([N({type:Boolean,json:{write:!0},readOnly:!0})],x9.prototype,`kFeaturesForKNNFound`,void 0),e([N({type:[d9],json:{write:!0},readOnly:!0})],x9.prototype,`paths`,void 0),e([N({type:Boolean,json:{write:!0},readOnly:!0})],x9.prototype,`startingPointsIgnored`,void 0),e([N({type:[String],json:{write:!0},readOnly:!0})],x9.prototype,`warnings`,void 0),x9=e([P(`esri.rest.networks.support.TraceResult`)],x9);var OEe=Cr()({Pending:`job-waiting`,InProgress:`job-executing`,Completed:`job-succeeded`}),S9=class extends x9{constructor(e){super(e),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){let t={...e,query:{f:`json`}},{data:n}=await Qc(this.statusUrl,t),r=n.traceResults?{...n.traceResults,...n}:n;return this.read(r),this}async waitForJobCompletion(e={}){let{interval:t=1e3,statusCallback:n}=e;return new Promise((e,r)=>{this._clearTimer(),this._timer=setInterval(()=>{this._timer||r(Si()),this.checkJobStatus().then(t=>{let{status:r}=t;switch(this.status=r,r){case`job-succeeded`:this._clearTimer(),e(this);break;case`job-waiting`:case`job-executing`:n&&n(this)}},e=>{this._clearTimer(),r(e)})},t)})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};e([N({type:String,json:{write:!0}})],S9.prototype,`statusUrl`,void 0),e([A(OEe)],S9.prototype,`status`,void 0),e([N({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],S9.prototype,`submissionTime`,void 0),e([N({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],S9.prototype,`lastUpdatedTime`,void 0),S9=e([P(`esri.networks.support.TraceJobInfo`)],S9);var C9=class extends _Ee{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type=`utility`,this._circuitManagerMap=new Map,this._terminalById=new Map,this._unitIdentifierManager=null}initialize(){this.addHandles(G(()=>[this.gdbVersion,this.historicMoment],()=>{this.networkSystemLayers.associationsTable&&(this.networkSystemLayers.associationsTable.gdbVersion!==this.gdbVersion&&(this.networkSystemLayers.associationsTable.gdbVersion=this.gdbVersion),this.networkSystemLayers.associationsTable.historicMoment!==this.historicMoment&&(this.networkSystemLayers.associationsTable.historicMoment=this.historicMoment))}))}get _rulesLayer(){let{gdbVersion:e,historicMoment:t}=this,n=this.networkSystemLayers.rulesTableUrl;return new $({url:n,gdbVersion:e,historicMoment:t})}get _utilityLayerList(){let e=new Set;return this.dataElement?.domainNetworks?.map(t=>{t?.edgeSources?.map(({layerId:t,sourceId:n})=>{this._layerIdBySourceId.set(n,t),this._sourceIdByLayerId.set(t,n),e.add(t)}),t?.junctionSources?.map(({layerId:t,sourceId:n})=>{this._layerIdBySourceId.set(n,t),this._sourceIdByLayerId.set(t,n),e.add(t)})}),e}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new t9({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(e=>i9.fromJSON(e))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(e=>e.domainNetworkName)||[]}get hasTelecomNetwork(){return this.dataElement?.domainNetworks.some(e=>e.isTelecomNetwork)??!1}get associationsTable(){return this.networkSystemLayers.associationsTable}async load(e){return this.addResolvingPromise(this._load(e)),this}async _load(e){await super._load(e),await Promise.all([this._loadNamedTraceConfigurationsFromNetwork(e),this.networkSystemLayers.loadAssociationsTable(e)])}getTerminalConfiguration(e){let t=null,n=null,r=e.sourceLayer,i=null;if(r?.type===`feature`){if(i=r.layerId,i===null)return null}else if(r?.type!==`subtype-sublayer`||(i=r?.parent?.layerId??null,i===null))return null;let a=e.attributes;if(a==null)return null;for(let r of Object.keys(a))r.toUpperCase()===`ASSETGROUP`&&(t=e.getAttribute(r)),r.toUpperCase()===`ASSETTYPE`&&(n=e.getAttribute(r));if(!this.dataElement)return null;let o=null,s=this.dataElement.domainNetworks;for(let e of s){let r=e.junctionSources?.find(e=>e.layerId===i);if(r){let e=r.assetGroups?.find(e=>e.assetGroupCode===t);if(e){let t=e.assetTypes?.find(e=>e.assetTypeCode===n);if(t?.isTerminalConfigurationSupported){o=t.terminalConfigurationId;break}}}}if(o!=null){let e=this.dataElement.terminalConfigurations,t=e?.find(e=>e.terminalConfigurationId===o);return t?i9.fromJSON(t):null}return null}getTierNames(e){return(this.dataElement?.domainNetworks.find(t=>t.domainNetworkName===e))?.tiers?.map(e=>e.name)||[]}async getRulesTable(){let e=this._rulesLayer;e.loaded||await e.load();let t=this.dataElement?.domainNetworks;if(!t)return null;let n=t.flatMap(e=>[...e.edgeSources||[],...e.junctionSources||[]]),r=(await this._queryRulesTable(e)).map(t=>this._hydrateRuleInfo(e,n,t));return new H7({rulesLayer:e,rules:r})}async getCircuitManager(e){if(!this.hasTelecomNetwork)return null;let t=this.dataElement?.domainNetworks.find(t=>t.domainNetworkName===e&&t.isTelecomNetwork);if(!t)return null;let{default:n}=await R(async()=>{let{default:e}=await import(`./CircuitManager-CshqCm0b.js`);return{default:e}},[]);return yt(this._circuitManagerMap,e,()=>new n({utilityNetwork:this,telecomDomainNetwork:t}))}async getUnitIdentifierManager(){if(!this.hasTelecomNetwork)return null;if(this._unitIdentifierManager)return this._unitIdentifierManager;let{default:e}=await R(async()=>{let{default:e}=await import(`./UnitIdentifierManager-sL8YCO78.js`);return{default:e}},[]);return this._unitIdentifierManager=new e({utilityNetwork:this}),this._unitIdentifierManager}getTerminalById(e){return!this.dataElement||e==null?null:this._terminalById.get(e)??(this.terminalConfigurations.forEach(e=>{e.terminals.forEach(e=>{this._terminalById.set(e.id,e)})}),this._terminalById.get(e))}isUtilityLayer(e){return`layerId`in e?e.layerId!=null&&this._utilityLayerList.has(e.layerId)&&(e.url?.startsWith(this.featureServiceUrl)??!1):!(e.type!==`subtype-sublayer`||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(e.parent.url?.startsWith(this.featureServiceUrl)??!1)}async queryAssociations(e,t){let[{queryAssociations:n},{default:r}]=await Promise.all([R(()=>import(`./queryAssociations-CznPysD-.js`),__vite__mapDeps([452,453,454])),R(()=>import(`./QueryAssociationsParameters-DrNdaUEb.js`),__vite__mapDeps([455,456]))]),i=r.from(e);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,(await n(this.networkServiceUrl,i,t)).associations}async synthesizeAssociationGeometries(e){let[{synthesizeAssociationGeometries:t},{default:n}]=await Promise.all([R(()=>import(`./synthesizeAssociationGeometries-DMSKPyma.js`),__vite__mapDeps([457,454])),R(()=>import(`./SynthesizeAssociationGeometriesParameters-DCzVDEZm.js`),[])]),r=n.from(e);return r.gdbVersion=this.gdbVersion,r.moment=this.historicMoment,t(this.networkServiceUrl,r)}async trace(e){let[{trace:t},{default:n}]=await Promise.all([R(()=>import(`./trace-Bh83D8cD.js`),[]),R(()=>import(`./TraceParameters-u3-RfEhx.js`),[])]),r=n.from(e);return r.gdbVersion=this.gdbVersion,r.moment=this.historicMoment,t(this.networkServiceUrl,r)}async submitTraceJob(e){let[{submitTraceJob:t},{default:n}]=await Promise.all([R(()=>import(`./trace-Bh83D8cD.js`),[]),R(()=>import(`./TraceParameters-u3-RfEhx.js`),[])]),r=n.from(e);r.gdbVersion=this.gdbVersion,r.moment=this.historicMoment;let i=await t(this.networkServiceUrl,r);return new S9({statusUrl:i})}async canAddAssociation(e){let t=await this.getRulesTable();if(!t)return!1;let{fromNetworkElement:n,toNetworkElement:r}=e;if(!n||!r)return!1;await t.load();let i=null;switch(e.associationType){case`containment`:i=t.rulesCategorized.containment;break;case`attachment`:i=t.rulesCategorized.attachment;break;default:i=t.rulesCategorized.connectivity}return i.some(e=>M7(e,n,r))}generateAddAssociations(e){let{associationsTable:t}=this.networkSystemLayers,{fromNetworkSourceId:n,fromGlobalId:r,fromTerminalId:i,fromFirstUnit:a,fromNumUnits:o,toNetworkSourceId:s,toGlobalId:c,toTerminalId:l,toFirstUnit:u,toNumUnits:d,associationType:f,isContentVisible:p,percentAlong:m,globalId:h}=xEe(t);return{addFeatures:e.map(e=>{let t=new VF({attributes:{[n]:e.fromNetworkElement?.networkSourceId,[r]:e.fromNetworkElement?.globalId,[i]:e.fromNetworkElement?.terminalId,[s]:e.toNetworkElement?.networkSourceId,[c]:e.toNetworkElement?.globalId,[l]:e.toNetworkElement?.terminalId,[f]:yEe[e.associationType],[p]:e.isContentVisible==null?void 0:e.isContentVisible?1:0,[m]:e.percentAlong,[h]:e.globalId}});return e.fromNetworkElement instanceof o9&&(t.attributes[a]=e.fromNetworkElement?.firstUnit,t.attributes[o]=e.fromNetworkElement?.numUnits),e.toNetworkElement instanceof o9&&(t.attributes[u]=e.toNetworkElement?.firstUnit,t.attributes[d]=e.toNetworkElement?.numUnits),t}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:t?.globalIdField??`globalid`,objectIdField:t?.objectIdField??`objectid`}}}generateDeleteAssociations(e){let{associationsTable:t,associationsTableId:n}=this.networkSystemLayers,r={id:n,identifierFields:{globalIdField:t?.globalIdField??`globalid`,objectIdField:t?.objectIdField??`objectid`}};if(this.dataElement?.schemaGeneration===-8){let t=this._generateDeleteTelecomAssociationPayload(e);return{...r,deleteAssociations:t}}let i=e.map(e=>({globalId:e.globalId}));return{...r,deleteFeatures:i}}generateCombineNetworkElements(e){return{id:this._ensureSingleSourceIdAsValidLayerId(e),combineGroupedObjects:[{globalIds:e.map(e=>e.globalId)}]}}generateDivideNetworkElements(e,t){return{id:this._ensureSingleSourceIdAsValidLayerId([e]),divideGroupedObjects:[{globalId:e.globalId,numUnits:t}]}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async loadSubnetworksTable(){return this.networkSystemLayers.loadSubnetworksTable()}async _loadNamedTraceConfigurationsFromNetwork(e){if(this.sharedNamedTraceConfigurations?.length===0)return;let t=this.sharedNamedTraceConfigurations.map(e=>e.globalId),n=await this.queryNamedTraceConfigurations({globalIds:t},e);for(let e of this.sharedNamedTraceConfigurations){let t=n?.find(t=>t.globalId===e.globalId);if(t){let n=t.write({},{origin:`service`});e.read(n,{origin:`service`})}}}_hydrateRuleInfo(e,t,n){let r=e.fieldsIndex,i=r.get(`RULETYPE`),a=r.get(`CREATIONDATE`),o=r.get(`FROMNETWORKSOURCEID`),s=r.get(`FROMASSETGROUP`),c=r.get(`FROMASSETTYPE`),l=r.get(`FROMTERMINALID`),u=r.get(`TONETWORKSOURCEID`),d=r.get(`TOASSETGROUP`),f=r.get(`TOASSETTYPE`),p=r.get(`TOTERMINALID`),m=r.get(`VIANETWORKSOURCEID`),h=r.get(`VIAASSETGROUP`),g=r.get(`VIAASSETTYPE`),_=r.get(`VIATERMINALID`),v=n.attributes[i.name],y=new Date(n.attributes[a.name]),b=[{networkSourceId:n.attributes[o.name],assetGroupId:n.attributes[s.name],assetTypeId:n.attributes[c.name],terminalId:n.attributes[l.name]},{networkSourceId:n.attributes[u.name],assetGroupId:n.attributes[d.name],assetTypeId:n.attributes[f.name],terminalId:n.attributes[p.name]},{networkSourceId:n.attributes[m.name],assetGroupId:n.attributes[h.name],assetTypeId:n.attributes[g.name],terminalId:n.attributes[_.name]}],x={ruleType:v,creationDate:y};for(let e of[0,1,2]){if(v!==5&&e===2)continue;let n=b[e],r=t.find(e=>e.sourceId===n.networkSourceId),i=r?.assetGroups.find(e=>e.assetGroupCode===n.assetGroupId),a=i?.assetTypes.find(e=>e.assetTypeCode===n.assetTypeId),o=this._getTerminal(a,n),s=``;switch(e){case 0:s=`from`;break;case 1:s=`to`;break;case 2:s=`via`}x[`${s}NetworkSource`]=r,x[`${s}AssetGroup`]=i,x[`${s}AssetType`]=a,x[`${s}Terminal`]=o?.toJSON()}return x}_getTerminal(e,t){let n=e?.terminalConfigurationId;return(this.terminalConfigurations?.find(e=>e.id===n))?.terminals?.find(e=>e.id===t.terminalId)??null}async _queryRulesTable(e){let{gdbVersion:t,historicMoment:n}=this,r=new Y({where:`1=1`,outFields:[`*`],gdbVersion:t,historicMoment:n});return(await A0(e,r)).features}_generateDeleteTelecomAssociationPayload(e){return e.map(e=>({globalId:e.globalId??`{00000000-0000-0000-0000-000000000000}`,associationType:X7.toJSON(e.associationType),fromSourceId:e.fromNetworkElement.networkSourceId,fromGlobalId:e.fromNetworkElement.globalId,fromTerminalId:e.fromNetworkElement.terminalId,toSourceId:e.toNetworkElement.networkSourceId,toGlobalId:e.toNetworkElement.globalId,toTerminalId:e.toNetworkElement.terminalId}))}_ensureSingleSourceIdAsValidLayerId(e){let t=b(e.map(e=>e.networkSourceId));if(t.length>1)throw new D(`utility-network:invalid-source-id`,`'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.`);let n=t[0],r=this.getLayerIdBySourceId(n);if(r==null)throw new D(`utility-network:invalid-source-id`,`'networkSourceId' is not valid. Ensure that all network elements have the same 'networkSourceId' and that it corresponds to a valid layer in the utility network.`);return r}};e([N({readOnly:!0})],C9.prototype,`_rulesLayer`,null),e([N({type:[e9],json:{origins:{"web-map":{read:{source:`traceConfigurations`},write:{target:`traceConfigurations`}},service:{read:{source:`traceConfigurations`}}},read:!1}})],C9.prototype,`sharedNamedTraceConfigurations`,void 0),e([N({type:[`utility`],readOnly:!0,json:{read:!1,write:!1}})],C9.prototype,`type`,void 0),e([N({readOnly:!0})],C9.prototype,`serviceTerritoryFeatureLayerId`,null),e([N({readOnly:!0})],C9.prototype,`networkSystemLayers`,null),e([N({readOnly:!0})],C9.prototype,`terminalConfigurations`,null),e([N({readOnly:!0})],C9.prototype,`domainNetworkNames`,null),e([N({readOnly:!0})],C9.prototype,`hasTelecomNetwork`,null),e([N({readOnly:!0,json:{read:!1}})],C9.prototype,`associationsTable`,null),C9=e([P(`esri.networks.UtilityNetwork`)],C9);var w9=C9,T9=class extends I(L){constructor(e){super(e),this.expression=null,this.returnType=`string`,this.title=null}};e([N({type:String,json:{write:{isRequired:!0}}})],T9.prototype,`expression`,void 0),e([N({type:[`number`,`string`],json:{write:!0}})],T9.prototype,`returnType`,void 0),e([N({type:String,json:{write:!0}})],T9.prototype,`title`,void 0),T9=e([P(`esri.webdoc.geotriggersInfo.ExpressionInfo`)],T9);var E9=T9,D9=new xr({deviceLocation:`device-location`}),O9=class extends I(L){constructor(e){super(e),this.filterExpression=null,this.type=`device-location`}};e([N({type:E9,json:{write:!0}})],O9.prototype,`filterExpression`,void 0),e([N({type:D9.apiValues,readOnly:!0,json:{type:D9.jsonValues,read:D9.read,write:D9.write}})],O9.prototype,`type`,void 0),O9=e([P(`esri.webdoc.geotriggersInfo.DeviceLocationFeed`)],O9);var kEe=O9,k9=class extends I(L){constructor(e){super(e),this.geometry=null,this.where=null}};e([N({types:yh,json:{read:gh,write:!0}})],k9.prototype,`geometry`,void 0),e([N({type:String,json:{write:!0}})],k9.prototype,`where`,void 0),k9=e([P(`esri.webdoc.geotriggersInfo.FeatureFilter`)],k9);var AEe=k9,A9=class extends I(L){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type=`feature-layer`}};e([N({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],A9.prototype,`layerId`,void 0),e([N({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],A9.prototype,`layerUrl`,void 0),e([A({featureLayer:`feature-layer`},{readOnly:!0})],A9.prototype,`type`,void 0),A9=e([P(`esri.webdoc.geotriggersInfo.FeatureLayerSource`)],A9);var jEe=A9,j9=class extends I(L){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type=`features`}};e([N({type:jEe,json:{write:{isRequired:!0}}})],j9.prototype,`fenceSource`,void 0),e([N({type:AEe,json:{write:!0}})],j9.prototype,`filter`,void 0),e([N({type:Number,json:{write:!0}})],j9.prototype,`bufferDistance`,void 0),e([A({features:`features`},{readOnly:!0})],j9.prototype,`type`,void 0),j9=e([P(`esri.webdoc.geotriggersInfo.FeatureFenceParameters`)],j9);var MEe=j9,M9=class extends I(L){constructor(e){super(e),this.type=`fence`}};e([A({fence:`fence`},{readOnly:!0})],M9.prototype,`type`,void 0),M9=e([P(`esri.webdoc.geotriggersInfo.Geotrigger`)],M9);var N9=M9,P9=class extends I(L){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};e([N({type:E9,json:{write:!0}})],P9.prototype,`expressionInfo`,void 0),e([N({type:[String],json:{write:!0}})],P9.prototype,`requestedActions`,void 0),P9=e([P(`esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions`)],P9);var NEe=P9,PEe=new xr({enterContainsAndExitDoesNotContain:`enter-contains-and-exit-does-not-contain`,enterContainsAndExitDoesNotIntersect:`enter-contains-and-exit-does-not-intersect`,enterIntersectsAndExitDoesNotIntersect:`enter-intersects-and-exit-does-not-intersect`}),FEe=new xr({useGeometry:`use-geometry`,useGeometryWithAccuracy:`use-geometry-with-accuracy`}),F9=new xr({enter:`enter`,enterOrExit:`enter-or-exit`,exit:`exit`}),I9=class extends N9{constructor(e){super(e),this.enterExitRule=`enter-contains-and-exit-does-not-intersect`,this.feed=null,this.feedAccuracyMode=`use-geometry`,this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type=`fence`}};e([A(PEe)],I9.prototype,`enterExitRule`,void 0),e([N({type:kEe,json:{write:{isRequired:!0}}})],I9.prototype,`feed`,void 0),e([A(FEe)],I9.prototype,`feedAccuracyMode`,void 0),e([N({type:F9.apiValues,json:{type:F9.jsonValues,read:F9.read,write:{writer:F9.write,isRequired:!0}}})],I9.prototype,`fenceNotificationRule`,void 0),e([N({type:MEe,json:{write:{isRequired:!0}}})],I9.prototype,`fenceParameters`,void 0),e([N({type:String,json:{write:!0}})],I9.prototype,`name`,void 0),e([N({type:NEe,json:{write:!0}})],I9.prototype,`notificationOptions`,void 0),e([A({fence:`fence`},{readOnly:!0})],I9.prototype,`type`,void 0),I9=e([P(`esri.webdoc.geotriggersInfo.FenceGeotrigger`)],I9);var IEe={base:N9,key:`type`,typeMap:{fence:I9}},L9=class extends I(L){constructor(e){super(e),this.geotriggers=null}};e([N({types:[IEe],json:{write:{isRequired:!0}}})],L9.prototype,`geotriggers`,void 0),L9=e([P(`esri.webdoc.GeotriggersInfo`)],L9);var LEe=L9,R9=class extends I(L){constructor(e){super(e),this.enabled=!0}};e([N({type:Boolean,nonNullable:!0,json:{write:!0}})],R9.prototype,`enabled`,void 0),R9=e([P(`esri.webdoc.ips.AppleIPSProperties`)],R9);var REe=R9,z9=class extends I(L){constructor(e){super(e),this.enabled=!0}};e([N({type:Boolean,nonNullable:!0,json:{write:!0}})],z9.prototype,`enabled`,void 0),z9=e([P(`esri.webdoc.ips.GNSSProperties`)],z9);var zEe=z9,B9=class extends I(L){constructor(e){super(e),this.enabled=!0,this.distance=5,this.units=`meter`}};e([N({type:Boolean,nonNullable:!0,json:{write:!0}})],B9.prototype,`enabled`,void 0),e([N({type:Number,nonNullable:!0,json:{write:!0}})],B9.prototype,`distance`,void 0),e([N({type:[`feet`,`meter`],nonNullable:!0,json:{write:!0}})],B9.prototype,`units`,void 0),B9=e([P(`esri.webdoc.ips.PathSnappingProperties`)],B9);var BEe=B9,V9=class extends I(L){constructor(e){super(e),this.enabled=!0}};e([N({type:Boolean,nonNullable:!0,json:{write:!0}})],V9.prototype,`enabled`,void 0),V9=e([P(`esri.webdoc.ips.SmoothingProperties`)],V9);var VEe=V9,H9=class extends I(L){constructor(e){super(e),this.appleIPS=null,this.gnss=null,this.smoothing=null,this.pathSnapping=null}};e([N({type:REe,json:{name:`AppleIPS`,write:!0}})],H9.prototype,`appleIPS`,void 0),e([N({type:zEe,json:{name:`GNSS`,write:!0}})],H9.prototype,`gnss`,void 0),e([N({type:VEe,json:{write:!0}})],H9.prototype,`smoothing`,void 0),e([N({type:BEe,json:{write:!0}})],H9.prototype,`pathSnapping`,void 0),H9=e([P(`esri.webdoc.ips.Configuration`)],H9);var HEe=H9,U9=class extends I(L){constructor(e){super(e),this.portalItem=null}readPortalItem(e,t,n){let{itemId:r}=t;if(r)return new RT({id:r,portal:n?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}};e([N({type:RT,json:{write:{isRequired:!0}}})],U9.prototype,`portalItem`,void 0),e([j(`portalItem`,[`itemId`])],U9.prototype,`readPortalItem`,null),e([M(`portalItem`,{itemId:{type:String}})],U9.prototype,`writePortalItem`,null),U9=e([P(`esri.webdoc.ips.PositioningService`)],U9);var UEe=U9,W9=class extends I(L){constructor(e){super(e),this.positioningService=null,this.configuration=null}};e([N({type:UEe,json:{write:{isRequired:!0}}})],W9.prototype,`positioningService`,void 0),e([N({type:HEe,json:{write:!0}})],W9.prototype,`configuration`,void 0),W9=e([P(`esri.webdoc.IPSInfo`)],W9);var WEe=W9,GEe={currentVersion:VX,createInitialViewProperties:()=>new tQ,parseVersion:zX.parse,itemType:`Web Map`,name:`webmap`,origin:`web-map`},KEe=W.ofType(w9),G9=class extends Yye{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){let e=this.utilityNetworks.removeAll();for(let t of e)t.destroy();this.utilityNetworks.destroy()}}get context(){return GEe}loadAll(){return hT(this,e=>{e(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new D(`webmap:empty-resource`,`Expected a JSON resource but got nothing`)}static{this.VERSION=VX}};e([N({type:LEe,json:{write:!0}})],G9.prototype,`geotriggersInfo`,void 0),e([N({type:WEe,json:{write:!0,name:`mapIPSInfo`}})],G9.prototype,`ipsInfo`,void 0),e([N({json:{write:!0}})],G9.prototype,`presentation`,void 0),e([N({type:KEe,json:{read:!0,write:!0}})],G9.prototype,`utilityNetworks`,void 0),G9=e([P(`esri.WebMap`)],G9);var qEe=G9,K9=()=>E.getLogger(`esri.widgets.support.geolocationUtils`);function JEe(){let e=!!c(`esri-geolocation`);return e||K9().warn(`geolocation-unsupported`,`Geolocation unsupported.`),e}function YEe(){let e=window.isSecureContext;return e||K9().warnOnce(`insecure-context`,`Geolocation requires a secure origin.`),e}function XEe(){return JEe()&&YEe()}var q9;function ZEe(e,t){if(q9)return q9(e,t);let{position:n,view:r}=e,i=QEe(n),a=i?.coords;if(!a)throw new D(`geometry-service:no-coords`,`Geolocation has no coordinates`);return eDe($Ee(a),r,t)}function QEe(e){let t=e&&e.coords||{},n={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed,toJSON:()=>({})};return e&&{coords:n,timestamp:e.timestamp,toJSON:()=>({})}}function $Ee({longitude:e,latitude:t,altitude:n}){return new U({longitude:e,latitude:t,z:n||void 0,spatialReference:{wkid:4326}})}function eDe(e,t,n){if(!t)return Promise.resolve(e);let r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(id(e)):tDe(n).then(t=>{if(!t)throw new D(`geometry-service:missing-url`,`Geometry service URL is missing`);let i=new AZ({geometries:[e],outSpatialReference:r});return jZ(t,i,n).then(e=>e[0])})}function tDe(e){if(nt.geometryServiceUrl)return Promise.resolve(nt.geometryServiceUrl);let t=q.getDefault();return t.load(e).catch(()=>{}).then(()=>t.helperServices?.geometry?.url)}var nDe=2500,J9={type:`CIMPictureMarker`,primitiveName:`headingOverride`,enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:`Relative`,dominantSizeAxis3D:`Y`,size:36,billboardMode3D:`FaceNearPlane`,invertBackfaceTexture:!0,scaleX:1,textureFilter:`Picture`,url:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg==`},rDe=new qM({data:{type:`CIMSymbolReference`,symbol:{type:`CIMPointSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:`Relative`,dominantSizeAxis3D:`Y`,size:14,billboardMode3D:`FaceNearPlane`,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Round`,joinStyle:`Round`,lineStyle3D:`Strip`,miterLimit:10,width:2,color:[255,255,255,255]},{type:`CIMSolidFill`,enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:`Relative`,dominantSizeAxis3D:`Y`,size:16,billboardMode3D:`FaceNearPlane`,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Round`,joinStyle:`Round`,lineStyle3D:`Strip`,miterLimit:10,width:0,color:[255,255,255,255]},{type:`CIMSolidFill`,enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},J9],angleAlignment:`Map`},primitiveOverrides:[{type:`CIMPrimitiveOverride`,primitiveName:`headingOverride`,propertyName:`Rotation`,valueExpressionInfo:{type:`CIMExpressionInfo`,title:`Rotation override`,expression:`360 - $feature.heading`,returnType:`Default`}},{type:`CIMPrimitiveOverride`,primitiveName:`headingOverride`,propertyName:`TintColor`,valueExpressionInfo:{type:`CIMExpressionInfo`,title:`TintColor override`,expression:`IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 255])`,returnType:`Default`}}]}}),Y9=class extends gX(Dh){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new VF({symbol:rDe}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){XEe()||(this._geolocationUsable=!1),this.addHandles([G(()=>this.view?.type,()=>this._handleViewTypeChange(),qh)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){let{view:e,graphic:t}=this;e&&t&&e.graphics.remove(t)}_addGraphic(){let{view:e,graphic:t}=this;e?.graphics&&t&&!e.graphics.includes(t)&&e.graphics.push(t)}_handleViewTypeChange(){J9.enable=this.view?.type===`2d`}_getScaleWithinConstraints(e,t){if(!t)return e;if(t.type===`2d`){let{effectiveMaxScale:n,effectiveMinScale:r}=t.constraints;return Math.min(r,Math.max(n,e))}return e}_getScale(e){let{scale:t}=this,n=typeof t==`number`?t:nDe;return this._getScaleWithinConstraints(n,e)}_getHeading(e,t){let n=t?.spatialReference,r=n?.isWebMercator||n?.isGeographic,i=e.coords?.heading;return!r||typeof i!=`number`||isNaN(i)||i<0||i>360?null:i}_addHeading(e){let{heading:t,target:n,view:r}=e;r&&t!==null&&(r.type===`3d`?n.heading=t:r.type===`2d`&&(n.rotation=360-t))}async _animatePoint(e,t,n,r){let{view:i}=this;if(!this.goToLocationEnabled||!i)return;let a={target:e,scale:t};this.rotationEnabled&&this._addHeading({heading:n,target:a,view:i});let o={signal:r.signal};Ci(o),await this.callGoTo({target:a,options:o})}async updatePosition(e,t){try{let n=this.view,r=await ZEe({position:e,view:n},{signal:t.signal}),{graphic:i}=this,{timestamp:a,coords:o}=e,{accuracy:s,altitude:c,altitudeAccuracy:l,latitude:u,longitude:d,speed:f}=o,p=this._getHeading(e,n),m={timestamp:a,accuracy:s,altitude:c,altitudeAccuracy:l,heading:p,latitude:u,longitude:d,speed:f};i&&(i.geometry=r,i.attributes=m);let h=this._getScale(n);await this._animatePoint(r,h,p,t)}catch(e){if(!ji(e))throw new D(`geolocation-positioning:invalid-point`,`Cannot position invalid point`,{error:e})}return e}};e([N()],Y9.prototype,`_geolocationUsable`,void 0),e([N()],Y9.prototype,`geolocationOptions`,void 0),e([N()],Y9.prototype,`goToLocationEnabled`,void 0),e([N({type:VF,nonNullable:!0})],Y9.prototype,`graphic`,void 0),e([N()],Y9.prototype,`scale`,void 0),e([N()],Y9.prototype,`rotationEnabled`,void 0),e([N()],Y9.prototype,`view`,void 0),Y9=e([P(`esri.widgets.support.GeolocationPositioning`)],Y9);var iDe=Y9,aDe=15e3,X9=class extends iDe{constructor(e){super(e),this._watchId=void 0,this._trackStartingTimeoutId=void 0,this._settingPosition=null,this._trackController=null,this.error=void 0,this.positionFilterFunction=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?`disabled`:this._settingPosition||this._trackStartingTimeoutId!==void 0?`waiting`:this.tracking?`tracking`:this.error==null?`ready`:`error`:`feature-unsupported`}get tracking(){return this._watchId!==void 0}start(){this.state!==`disabled`&&this.state!==`feature-unsupported`&&this._startTracking()}stop(){this.state!==`disabled`&&this.state!==`feature-unsupported`&&this._stopTracking()}_stopWatchingPosition(){this._watchId!==void 0&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=void 0)}_stopTracking(){this._abortTrack(),this._clearWaitingTimer(),this._stopWatchingPosition(),this._clearGraphic()}_startTracking(){this._stopTracking();let e=Ri(async e=>{this._abortTrack();let t=new AbortController;this._trackController=t;let{timestamp:n,coords:r}=e,i={timestamp:n,coords:r.toJSON()};this.error=void 0;try{if(typeof this.positionFilterFunction==`function`&&!this.positionFilterFunction.call(null,{position:i})||(await this.updatePosition(e,t),this._trackController!==t))return;this._clearWaitingTimer(),this._addGraphic(),this.emit(`track`,{position:e}),this._trackController=null}catch(e){if(ji(e))return;throw this._trackController=null,this._emitError(e),this._clearWaitingTimer(),e}},0);this._watchId=navigator.geolocation.watchPosition(t=>{this._settingPosition=e(t).catch(Mi)},this._handleWatchPositionError.bind(this),this.geolocationOptions??void 0),this._trackStartingTimeoutId=setTimeout(()=>{this._trackStartingTimeoutId=void 0},aDe)}_handleWatchPositionError(e){e.code===e.PERMISSION_DENIED&&this._stopTracking(),this._emitError(e)}_abortTrack(){this._trackController?.abort(),this._trackController=null}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=void 0,this._settingPosition=null}_emitError(e){this.error=e,this.emit(`track-error`,{error:e})}};e([N()],X9.prototype,`_watchId`,void 0),e([N()],X9.prototype,`_trackStartingTimeoutId`,void 0),e([N()],X9.prototype,`_settingPosition`,void 0),e([N()],X9.prototype,`error`,void 0),e([N()],X9.prototype,`positionFilterFunction`,void 0),e([N({readOnly:!0})],X9.prototype,`state`,null),e([N({readOnly:!0})],X9.prototype,`tracking`,null),e([N()],X9.prototype,`start`,null),e([N()],X9.prototype,`stop`,null),X9=e([P(`esri.widgets.Track.TrackViewModel`)],X9);var Z9=X9,oDe={base:`esri-track`},Q9=class extends cX{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Z9,this._toggleTracking=()=>{let e=this.viewModel;e&&e.state!==`feature-unsupported`&&e.state!==`disabled`&&(e.state!==`tracking`&&e.state!==`waiting`?this.viewModel.start():this.viewModel.stop())},Dr(E.getLogger(this),`Track`,`arcgis-track`,{version:`4.32`})}loadDependencies(){return nX({button:()=>R(()=>import(`./calcite-button-CrXR0T3m.js`),__vite__mapDeps([412,413,414,415,416,417,418,419,420,421,422,423,424,425])),tooltip:()=>R(()=>import(`./calcite-tooltip-B2oKFO03.js`),__vite__mapDeps([458,459,460,415,461,462,417,463]))})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(e){this.viewModel.geolocationOptions=e}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(e){this.viewModel.goToLocationEnabled=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get icon(){return`compass-north-circle`}set icon(e){this._overrideIfSome(`icon`,e)}get label(){return this.messages?.widgetLabel??``}set label(e){this._overrideIfSome(`label`,e)}get rotationEnabled(){return this.viewModel.rotationEnabled}set rotationEnabled(e){this.viewModel.rotationEnabled=e}get scale(){return this.viewModel.scale}set scale(e){this.viewModel.scale=e}get tracking(){return this.viewModel.tracking}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){let{viewModel:e,messages:t,icon:n}=this,r=e?.state,i=r===`tracking`,a=this._localizeError(this.viewModel?.error),o=(i?t?.stopTracking:t?.startTracking)??``,s=r===`feature-unsupported`,c=(r===`tracking`?`pause`:void 0)??n;return uJ(`div`,{class:this.classes(oDe.base,XC.widget)},!s&&uJ(`calcite-button`,{class:XC.widgetButton,disabled:r===`disabled`,iconStart:c,kind:`neutral`,label:o,loading:r===`waiting`,onclick:this._toggleTracking,title:o}),a?uJ(`calcite-tooltip`,{open:!0,overlayPositioning:`fixed`,referenceElement:this.container},a):null)}_localizeError(e){return e instanceof GeolocationPositionError?e.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:e.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable:e instanceof Error?e.message:void 0}};e([N()],Q9.prototype,`geolocationOptions`,null),e([N()],Q9.prototype,`goToLocationEnabled`,null),e([N()],Q9.prototype,`goToOverride`,null),e([N({type:VF})],Q9.prototype,`graphic`,null),e([N()],Q9.prototype,`icon`,null),e([N()],Q9.prototype,`label`,null),e([N(),sJ(`esri/widgets/Track/t9n/Track`)],Q9.prototype,`messages`,void 0),e([N()],Q9.prototype,`rotationEnabled`,null),e([N()],Q9.prototype,`scale`,null),e([N({readOnly:!0})],Q9.prototype,`tracking`,null),e([N()],Q9.prototype,`view`,null),e([N({type:Z9}),cJ([`track`,`track-error`])],Q9.prototype,`viewModel`,void 0),Q9=e([P(`esri.widgets.Track`)],Q9);var sDe=Q9,cDe=new qEe({portalItem:{id:`aa1d3f80270146208328cf66d022e09c`}}),$9=new dye({container:`viewDiv`,map:cDe}),lDe=new sDe({view:$9});$9.ui.add(lDe,`top-left`),$9.when(()=>{console.log(`ready`)});export{p5 as $,ho as $C,te as $E,pc as $S,wt as $T,Bh as $_,Vve as $a,Nre as $b,tW as $c,BN as $d,TM as $f,Rse as $g,zle as $h,x1 as $i,az as $l,KE as $m,F3 as $n,Tq as $o,Sde as $p,e4 as $r,NG as $s,pwe as $t,Tme as $u,_ie as $v,Ai as $w,wu as $x,ip as $y,n7 as A,Is as AC,Le as AE,Cl as AS,M as AT,ise as A_,jZ as Aa,Tf as Ab,DG as Ac,vF as Ad,Wfe as Af,BS as Ag,due as Ah,h0 as Ai,FB as Al,YD as Am,k6 as An,EJ as Ao,Lk as Ap,H4 as Ar,iK as As,d8 as At,aR as Au,ih as Av,oa as Aw,vu as Ax,Op as Ay,k5 as B,Bo as BC,xe as BE,R as BS,D as BT,vae as B_,oZ as Ba,Lre as Bb,JW as Bc,NP as Bd,kN as Bf,uce as Bg,fT as Bh,yxe as Bi,Wz as Bl,cO as Bm,Y3 as Bn,iJ as Bo,Ok as Bp,ESe as Br,JG as Bs,qwe as Bt,Xme as Bu,Cie as Bv,ite as Bw,Ou as Bx,Sp as By,m7 as C,$o as CC,Ge as CE,Xl as CS,kr as CT,use as C_,S$ as Ca,lf as Cb,mG as Cc,zpe as Cd,Bfe as Cf,ece as Cg,eE as Ch,A0 as Ci,PB as Cl,yO as Cm,$Ce as Cn,U_e as Co,$de as Cp,S3 as Cr,aK as Cs,m8 as Ct,pR as Cu,mh as Cv,la as Cw,Wu as Cx,Zre as Cy,a7 as D,$te as DC,Pe as DE,V as DS,N as DT,ese as D_,o$ as Da,uf as Db,vG as Dc,AF as Dd,NN as Df,jS as Dg,ZT as Dh,v0 as Di,kB as Dl,nO as Dm,M6 as Dn,DJ as Do,Ek as Dp,$4 as Dr,eK as Ds,Cwe as Dt,sR as Du,hh as Dv,fa as Dw,ore as Dx,$p as Dy,l7 as E,ms as EC,Ie as EE,Hl as ES,Or as ET,tse as E_,l$ as Ea,cf as Eb,_G as Ec,MF as Ed,zN as Ef,RS as Eg,yue as Eh,Dxe as Ei,AB as El,_O as Em,N6 as En,T_e as Eo,lfe as Ep,x3 as Er,Z as Es,_8 as Et,fR as Eu,fh as Ev,da as Ew,hu as Ex,Zp as Ey,U5 as F,Ps as FC,Ae as FE,cl as FS,hr as FT,Eb as F_,cZ as Fa,af as Fb,wG as Fc,Npe as Fd,Lfe as Ff,FS as Fg,RT as Fh,T0 as Fi,eV as Fl,mO as Fm,f6 as Fn,oJ as Fo,ufe as Fp,N4 as Fr,mK as Fs,u8 as Ft,XL as Fu,Aie as Fv,Ui as Fw,dre as Fx,Dp as Fy,bTe as G,L as GC,de as GE,kc as GS,en as GT,mg as G_,RX as Ga,Wd as Gb,LW as Gc,Cpe as Gd,qM as Gf,SS as Gg,oT as Gh,U1 as Gi,kz as Gl,BD as Gm,R3 as Gn,Rq as Go,uk as Gp,r4 as Gr,HG as Gs,Jwe as Gt,Kme as Gu,xie as Gv,Fi as Gw,mre as Gx,Lp as Gy,OTe as H,Lo as HC,je as HE,mne as HS,an as HT,Cg as H_,rZ as Ha,zre as Hb,SG as Hc,CP as Hd,fN as Hf,dce as Hg,lT as Hh,X1 as Hi,Uz as Hl,KD as Hm,z3 as Hn,n_e as Ho,Sk as Hp,m4 as Hr,KG as Hs,wwe as Ht,Qme as Hu,wie as Hv,Ri as Hw,Pu as Hx,xp as Hy,H5 as I,xs as IC,ye as IE,_l as IS,Kn as IT,Sb as I_,hye as Ia,Ire as Ib,TG as Ic,Mpe as Id,Ife as If,LS as Ig,q as Ih,x0 as Ii,zB as Il,rO as Im,s6 as In,sJ as Io,tA as Ip,MSe as Ir,ZG as Is,Hwe as It,iR as Iu,nh as Iv,ate as Iw,sre as Ix,Rp as Iy,f5 as J,xo as JC,ge as JE,Ac as JS,Xt as JT,Zh as J_,hX as Ja,jre as Jb,_W as Jc,vpe as Jd,LM as Jf,lS as Jg,tT as Jh,k1 as Ji,uz as Jl,pD as Jm,QSe as Jn,Mq as Jo,lk as Jp,dSe as Jr,XW as Js,l8 as Jt,mL as Ju,Eie as Jv,Ei as Jw,Eu as Jx,gp as Jy,xTe as K,Ao as KC,he as KE,Oc as KS,nn as KT,pg as K_,LX as Ka,Hd as Kb,IW as Kc,iP as Kd,GM as Kf,Xx as Kg,iT as Kh,R1 as Ki,gz as Kl,PD as Km,rCe as Kn,Dq as Ko,dk as Kp,i4 as Kr,UG as Ks,vwe as Kt,vL as Ku,qm as Kv,Ti as Kw,Hu as Kx,vp as Ky,z5 as L,nne as LC,Se as LE,rl as LS,zn as LT,B_ as L_,sZ as La,Qd as Lb,qW as Lc,UP as Ld,zfe as Lf,IS as Lg,gT as Lh,_0 as Li,BB as Ll,iO as Lm,t6 as Ln,uJ as Lo,yfe as Lp,k4 as Lr,dK as Ls,Fwe as Lt,YL as Lu,Qm as Lv,zi as Lw,Su as Lx,Mp as Ly,K5 as M,Ds as MC,Oe as ME,bl as MS,A as MT,nse as M_,OZ as Ma,sf as Mb,CG as Mc,rF as Md,Xfe as Mf,VS as Mg,UT as Mh,g0 as Mi,bB as Ml,lO as Mm,E6 as Mn,f_e as Mo,Wde as Mp,NSe as Mr,QG as Ms,Owe as Mt,nR as Mu,eh as Mv,aa as Mw,bu as Mx,Tp as My,W5 as N,Ss as NC,De as NE,sl as NS,Cr as NT,wb as N_,kye as Na,nf as Nb,KW as Nc,ZP as Nd,AN as Nf,MS as Ng,HT as Nh,m0 as Ni,SB as Nl,XD as Nm,b6 as Nn,p_e as No,Xde as Np,j4 as Nr,tK as Ns,Kwe as Nt,JL as Nu,th as Nv,Vi as Nw,_u as Nx,Ap as Ny,o7 as O,Ts as OC,Ee as OE,Vne as OS,P as OT,Ub as O_,EQ as Oa,Cf as Ob,yG as Oc,DF as Od,cpe as Of,zS as Og,YT as Oh,Oxe as Oi,xB as Ol,$D as Om,UCe as On,E_e as Oo,Kk as Op,q4 as Or,rK as Os,jwe as Ot,uR as Ou,lh as Ov,Qi as Ow,lre as Ox,em as Oy,G5 as P,Cs as PC,Ne as PE,al as PS,xr as PT,qoe as P_,SZ as Pa,rf as Pb,kG as Pc,JP as Pd,Rfe as Pf,cce as Pg,cue as Ph,C0 as Pi,LB as Pl,eO as Pm,v6 as Pn,cJ as Po,eA as Pp,jSe as Pr,lK as Ps,h8 as Pt,ZL as Pu,kie as Pv,Hi as Pw,are as Px,kp as Py,r5 as Q,po as QC,b as QE,mc as QS,iee as QT,Hh as Q_,Pve as Qa,Yd as Qb,rW as Qc,ope as Qd,NM as Qf,Lse as Qg,Fle as Qh,_xe as Qi,sz as Ql,YE as Qm,XSe as Qn,xq as Qo,rk as Qp,t4 as Qr,QW as Qs,fwe as Qt,Cme as Qu,zm as Qv,Di as Qw,ku as Qx,dp as Qy,F5 as R,qo as RC,Fe as RE,Qc as RS,k as RT,i_ as R_,aZ as Ra,Zd as Rb,WW as Rc,VP as Rd,EN as Rf,ace as Rg,hT as Rh,p0 as Ri,sB as Rl,GD as Rm,Z3 as Rn,lJ as Ro,Dk as Rp,w4 as Rr,fK as Rs,Wwe as Rt,ehe as Ru,$m as Rv,Pi as Rw,xu as Rx,Np as Ry,g7 as S,_s as SC,C as SE,Kl as SS,Vee as ST,tx as S_,T$ as Sa,vf as Sb,pG as Sc,Hpe as Sd,Gfe as Sf,rce as Sg,nE as Sh,X0 as Si,OB as Sl,hO as Sm,ZCe as Sn,G_e as So,tfe as Sp,T3 as Sr,oK as Ss,p8 as St,vR as Su,uh as Sv,ma as Sw,Gu as Sx,om as Sy,d7 as T,bs as TC,Me as TE,ql as TS,Ar as TT,Yb as T_,f$ as Ta,bf as Tb,gG as Tc,PF as Td,Yfe as Tf,NS as Tg,hue as Th,S0 as Ti,RB as Tl,bO as Tm,YCe as Tn,A_e as To,rfe as Tp,Q4 as Tr,sK as Ts,Lwe as Tt,lR as Tu,Wie as Tv,ua as Tw,Cu as Tx,im as Ty,b5 as U,Po as UC,fe as UE,Mc as US,cee as UT,vg as U_,iZ as Ua,ef as Ub,YW as Uc,kpe as Ud,cN as Uf,GS as Ug,cT as Uh,K1 as Ui,jz as Ul,JD as Um,L3 as Un,Wq as Uo,bk as Up,a4 as Ur,XG as Us,_we as Ut,qme as Uu,Zm as Uv,Bi as Uw,fre as Ux,wp as Uy,S5 as V,Ro as VC,Ce as VE,pne as VS,mn as VT,Og as V_,gye as Va,Rre as Vb,OG as Vc,OP as Vd,DN as Vf,oce as Vg,pT as Vh,bxe as Vi,Iz as Vl,oO as Vm,$Se as Vn,t_e as Vo,Jk as Vp,b4 as Vr,YG as Vs,hwe as Vt,Jme as Vu,Ym as Vv,nte as Vw,lu as Vx,Ip as Vy,x5 as W,Mo as WC,me as WE,lne as WS,Yt as WT,yg as W_,BX as Wa,Xd as Wb,AG as Wc,gP as Wd,$M as Wf,CS as Wg,sT as Wh,G1 as Wi,Az as Wl,aO as Wm,V3 as Wn,Hq as Wo,Nde as Wp,CSe as Wr,WG as Ws,Twe as Wt,Yme as Wu,Tie as Wv,tte as Ww,hre as Wx,Cp as Wy,s5 as X,kte as XC,ee as XE,hc as XS,Qt as XT,rae as X_,nX as Xa,Gd as Xb,pW as Xc,hpe as Xd,BM as Xf,Yx as Xg,Qw as Xh,T1 as Xi,cz as Xl,XE as Xm,ZSe as Xn,Pq as Xo,ik as Xp,pSe as Xr,ZW as Xs,Ewe as Xt,nL as Xu,bie as Xv,Ni as Xw,Mu as Xx,sp as Xy,i5 as Y,Ote as YC,se as YE,jc as YS,Zt as YT,Xh as Y_,cX as Ya,kre as Yb,gW as Yc,JN as Yd,RM as Yf,tS as Yg,Rle as Yh,vxe as Yi,dz as Yl,fD as Ym,JSe as Yn,Oq as Yo,Cde as Yp,fSe as Yr,jG as Ys,g8 as Yt,Ime as Yu,Wm as Yv,ki as Yw,au as Yx,fp as Yy,t5 as Z,$a as ZC,oe as ZE,gc as ZS,$t as ZT,Kh as Z_,Nve as Za,Ud as Zb,oW as Zc,dpe as Zd,PM as Zf,Bse as Zg,Yw as Zh,w1 as Zi,lz as Zl,dD as Zm,YSe as Zn,Dge as Zo,ok as Zp,$2 as Zr,MG as Zs,bwe as Zt,tL as Zu,Um as Zv,wi as Zw,Bu as Zx,cp as Zy,S7 as _,gs as _C,a as _D,nt as _E,Pl as _S,Wee as _T,Sse as __,I$ as _a,df as _b,cG as _c,HF as _d,Vfe as _f,JC as _g,uE as _h,f2 as _i,mV as _l,gO as _m,K6 as _n,rve as _o,Jde as _p,c3 as _r,PK as _s,Q8 as _t,TR as _u,_h as _v,F as _w,ad as _x,sm as _y,l9 as a,rc as aC,ne as aD,yt as aE,eu as aS,bi as aT,Px as a_,sxe as aa,Lf as ab,IG as ac,kI as ad,Ufe as af,Ile as ag,zue as ah,K2 as ai,YB as al,GO as am,Nwe as an,Ave as ao,iM as ap,s3 as ar,oq as as,Z8 as at,iz as au,Oh as av,Tte as aw,Rd as ax,hm as ay,v7 as b,cs as bC,et as bE,Fl as bS,Hee as bT,lx as b_,A$ as ba,Ff as bb,dG as bc,Bpe as bd,MN as bf,QS as bg,fE as bh,Z0 as bi,jB as bl,fO as bm,H6 as bn,dY as bo,bfe as bp,HSe as br,gK as bs,Vwe as bt,xR as bu,dh as bv,pa as bw,id as bx,$re as by,SEe as c,es as cC,ie as cD,_t as cE,tu as cS,oi as cT,Ox as c_,l1 as ca,Af as cb,LG as cc,CI as cd,tpe as cf,Rw as cg,yE as ch,$xe as ci,oV as cl,IO as cm,a8 as cn,jve as co,nj as cp,r3 as cr,YK as cs,X8 as ct,GR as cu,wh as cv,Cte as cw,bd as cx,iie as cy,X7 as d,ls as dC,f as dD,dt as dE,Wl as dS,Ur as dT,Bx as d_,a1 as da,Df as db,aG as dc,aI as dd,npe as df,Bw as dg,sE as dh,z2 as di,HB as dl,dde as dm,swe as dn,Cve as do,sA as dp,VSe as dr,nq as ds,L8 as dt,MR as du,Yie as dv,Xa as dw,md as dx,fm as dy,vc as eC,m as eD,Dt as eE,Vu as eS,Ci as eT,Kx as e_,y1 as ea,op as eb,$W as ec,wme as ed,spe as ef,Zw as eg,qE as eh,mSe as ei,YU as el,bde as em,Swe as en,Ive as eo,SM as ep,P3 as er,bq as es,n5 as et,WR as eu,qh as ev,_o as ew,Ore as ex,lie as ey,Y7 as f,Xs as fC,u as fD,ft as fE,Il as fS,Vr as fT,kx as f_,G$ as fa,Of as fb,zG as fc,nI as fd,qfe as ff,Tw as fg,Tue as fh,F2 as fi,ZB as fl,FO as fm,owe as fn,gve as fo,Zde as fp,n3 as fr,JK as fs,J8 as ft,zhe as fu,Zie as fv,Qa as fw,vd as fx,tie as fy,$ as g,Qo as gC,e as gD,st as gE,Rl as gS,Uee as gT,ux as g_,L$ as ga,_f as gb,VG as gc,KF as gd,rpe as gf,fle as gg,xue as gh,b2 as gi,pV as gl,CO as gm,Y6 as gn,jY as go,Gk as gp,f3 as gr,LK as gs,Y8 as gt,CR as gu,yh as gv,I as gw,rd as gx,um as gy,A7 as h,ss as hC,n as hD,at as hE,Ul as hS,Hr as hT,yse as h_,B$ as ha,yf as hb,sG as hc,YF as hd,Jfe as hf,YC as hg,iE as hh,L2 as hi,fV as hl,SO as hm,iwe as hn,BY as ho,Wk as hp,Z4 as hr,QK as hs,K8 as ht,wR as hu,vh as hv,Ka as hw,ed as hx,eie as hy,p9 as i,ac as iC,g as iD,Wt as iE,$l as iS,xi as iT,Rx as i_,fxe as ia,Gf as ib,tG as ic,MI as id,upe as if,Jw as ig,Lue as ih,J2 as ii,tV as il,YO as im,Awe as in,Eve as io,nM as ip,t3 as ir,aq as is,V8 as it,ege as iu,W as iv,Dte as iw,Fre as ix,km as iy,t7 as j,Ws as jC,Te as jE,pl as jS,j as jT,Hb as j_,AZ as ja,kf as jb,UW as jc,lF as jd,Kfe as jf,nce as jg,WT as jh,y0 as ji,yB as jl,tO as jm,LCe as jn,m_e as jo,Uk as jp,B4 as jr,uK as js,Rwe as jt,rR as ju,Pie as jv,$i as jw,cre as jx,jp as jy,i7 as k,Jte as kC,we as kE,ol as kS,Tr as kT,rse as k_,iQ as ka,Sf as kb,bG as kc,xF as kd,ape as kf,sce as kg,fue as kh,w0 as ki,IB as kl,sO as km,j6 as kn,CJ as ko,xk as kp,LSe as kr,nK as ks,c8 as kt,cR as ku,sh as kv,sa as kw,yu as kx,Yp as ky,e9 as l,qs as lC,p as lD,vt as lE,Ll as lS,Jr as lT,Nx as l_,s1 as la,jf as lb,iG as lc,lI as ld,VN as lf,zw as lg,hE as lh,I2 as li,sV as ll,ude as lm,i8 as ln,Mve as lo,MA as lp,Y4 as lr,eq as ls,U8 as lt,Bhe as lu,Th as lv,Za as lw,Dd as lx,sie as ly,vEe as m,hs as mC,r as mD,ct as mE,Yl as mS,Rr as mT,Tx as m_,H$ as ma,Ef as mb,BG as mc,XF as md,Zfe as mf,XC as mg,lE as mh,P2 as mi,dV as ml,vO as mm,rwe as mn,zY as mo,wk as mp,e3 as mr,qK as ms,I8 as mt,Ahe as mu,Xie as mv,bo as mw,sd as mx,cm as my,x9 as n,fc as nC,y as nD,Tt as nE,Yne as nS,Oi as nT,Hx as n_,b1 as na,Wf as nb,eG as nc,Dme as nd,RN as nf,Xw as ng,Vue as nh,X2 as ni,_H as nl,ak as nm,gwe as nn,Lve as no,uM as np,j3 as nr,dq as ns,$8 as nt,rge as nu,G as nv,eo as nw,Pre as nx,die as ny,o9 as o,oc as oC,h as oD,gt as oE,ru as oS,hi as oT,jx as o_,axe as oa,Nf as ob,nG as oc,OI as od,FN as of,Lle as og,ME as oh,Zxe as oi,aV as ol,UO as om,ywe as on,Ove as oo,Kj as op,o3 as or,iq as os,F8 as ot,ZR as ou,Eh as ov,to as ow,Nd as ox,oie as oy,bEe as p,fs as pC,c as pD,ut as pE,zl as pS,Br as pT,Mx as p_,U$ as pa,Pf as pb,oG as pc,QF as pd,HN as pf,ew as pg,Cue as ph,M2 as pi,cV as pl,PO as pm,$6 as pn,UY as po,Zk as pp,d3 as pr,tq as ps,q8 as pt,kR as pu,Jie as pv,wte as pw,U as px,dm as py,STe as q,wo as qC,re as qE,Dc as qS,rn as qT,dae as q_,gX as qa,Kd as qb,xW as qc,eP as qd,VM as qf,Zx as qg,rT as qh,N1 as qi,_z as ql,bD as qm,B3 as qn,Nq as qo,ck as qp,xSe as qr,xG as qs,kwe as qt,hL as qu,Oie as qv,ji as qw,pre as qx,hp as qy,_9 as r,nc as rC,ve as rD,Lt as rE,nu as rS,Mi as rT,zx as r_,pxe as ra,Uf as rb,FG as rc,Y as rd,lpe as rf,eT as rg,J as rh,Z2 as ri,VB as rl,ek as rm,f8 as rn,Fve as ro,tM as rp,k3 as rr,lq as rs,e5 as rt,qR as ru,Jh as rv,Ete as rw,Are as rx,uie as ry,a9 as s,Os as sC,x as sD,bt as sE,Ql as sS,ui as sT,Vx as s_,oxe as sa,Bf as sb,rG as sc,DI as sd,epe as sf,Ole as sg,Bue as sh,Qxe as si,GB as sl,zO as sm,Iwe as sn,kve as so,uj as sp,i3 as sr,sq as ss,H8 as st,QR as su,Dh as sv,no as sw,Pd as sx,pm as sy,w9 as t,bc as tC,S as tD,Nt as tE,ure as tS,Si as tT,Wx as t_,v1 as ta,Jf as tb,PG as tc,Eme as td,LN as tf,$w as tg,zE as th,Q2 as ti,UU as tl,xde as tm,zwe as tn,Hve as to,yM as tp,A3 as tr,fq as ts,a5 as tt,tz as tu,Uh as tv,vo as tw,Vd as tx,Om as ty,Q7 as u,Fs as uC,l as uD,E as uE,Gne as uS,Yr as uT,Ax as u_,c1 as ua,hf as ub,RG as uc,sI as ud,$fe as uf,Nw as ug,cE as uh,N2 as ui,XB as ul,fde as um,r8 as un,xve as uo,mA as up,_3 as ur,$K as us,W8 as ut,NR as uu,Sh as uv,yo as uw,xre as ux,rie as uy,x7 as v,Xte as vC,t as vD,Xe as vE,Gl as vS,zr as vT,vse as v_,P$ as va,mf as vb,lG as vc,VF as vd,IN as vf,WC as vg,dE as vh,a2 as vi,UB as vl,wO as vm,G6 as vn,AY as vo,Qde as vp,a3 as vr,yK as vs,N8 as vt,bR as vu,gh as vv,Sa as vw,nd as vx,Qre as vy,f7 as w,ys as wC,Re as wE,Vl as wS,zee as wT,nx as w_,m$ as wa,xf as wb,hG as wc,IF as wd,PN as wf,PS as wg,vue as wh,D0 as wi,TB as wl,uO as wm,B6 as wn,M_e as wo,Dfe as wp,C3 as wr,cK as ws,Pwe as wt,oR as wu,Hie as wv,pte as ww,H as wx,rm as wy,$Te as x,Js as xC,Ye as xE,Bl as xS,Mr as xT,rx as x_,k$ as xa,gf as xb,fG as xc,FF as xd,ipe as xf,ZS as xg,tE as xh,Q0 as xi,wB as xl,pO as xm,XCe as xn,W_e as xo,Ude as xp,y3 as xr,_K as xs,xwe as xt,_R as xu,Uie as xv,mte as xw,td as xx,am as xy,b7 as y,Ns as yC,Ze as yE,Jl as yS,Pr as yT,wse as y_,M$ as ya,wf as yb,uG as yc,Vpe as yd,Hfe as yf,tC as yg,bue as yh,r2 as yi,CB as yl,TO as ym,ewe as yn,X_e as yo,Ak as yp,p3 as yr,vK as ys,Mwe as yt,yR as yu,ph as yv,ha as yw,_re as yx,lm as yy,j5 as z,zo as zC,ke as zE,One as zS,O as zT,Dg as z_,_ye as za,Mre as zb,EG as zc,FP as zd,ON as zf,lce as zg,mT as zh,$1 as zi,Gz as zl,qD as zm,bCe as zn,rJ as zo,qk as zp,x4 as zr,pK as zs,Gwe as zt,RL as zu,Jm as zv,Ii as zw,Iu as zx,yp as zy};