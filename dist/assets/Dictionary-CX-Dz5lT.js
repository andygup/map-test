import{$p as e,Cx as t,I_ as n,Ov as r,Qp as i,U_ as a,Vv as o,Xp as s,Yp as c,Zp as l,Zv as u,_E as ee,_n as te,ax as d,em as ne,gn as re,kv as f,pn as ie,px as p,rC as ae,tm as m,vn as h,vv as oe,wn as g,wx as se,zw as ce}from"./index-ByaFsVj4.js";import{t as _}from"./ImmutableArray-C3KNQCVd.js";import{p as le,t as ue}from"./shared-C6TPacPS.js";import{n as de,r as fe}from"./number-CDIvbS1W.js";var v=class{},y=class{constructor(){}};function b(e,t,n){if(e instanceof y&&!(e instanceof x)){let r=new x;return r.fn=e,r.parameterEvaluator=n,r.context=t,r}return e}var pe=class extends y{constructor(e){super(),this.fn=e}createFunction(e){return(...t)=>this.fn(e,{preparsed:!0,arguments:t})}call(e,t){return this.fn(e,t)}marshalledCall(e,t,n,r){return r(e,t,(t,i,a)=>{a=a.map(t=>t instanceof y&&!(t instanceof x)?b(t,e,r):t);let o=this.call(n,{args:a});return ce(o)?o.then(e=>b(e,n,r)):o})}},x=class extends y{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(e){return this.fn.createFunction(this.context)}call(e,t){return this.fn.marshalledCall(e,t,this.context,this.parameterEvaluator)}marshalledCall(e,t,n){return this.fn.marshalledCall(e,t,this.context,this.parameterEvaluator)}},S=class e extends _{constructor(e,t,n,r,i,a){super(e),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=t,this._hasZ=n,this._hasM=r,this._cacheId=i,this._partId=a}get(e){if(this._lazyPt[e]===void 0){let t=this._elements[e];if(t===void 0)return;let n=new p(t[0],t[1],this._spRef);this._hasZ&&(n.z=t[2]),this._hasM&&(n.m=this._hasZ?t[3]:t[2]),n.cache._arcadeCacheId=this._cacheId.toString()+`-`+this._partId.toString()+`-`+e.toString(),this._lazyPt[e]=n}return this._lazyPt[e]}equalityTest(t){return t===this||t!==null&&t instanceof e!=0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+`-`+this._partId.toString()}},me=class e extends _{constructor(e,t,n,r,i){super(e),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=n,this._hasM=r,this._spRef=t,this._cacheId=i}get(e){if(this._lazyPath[e]===void 0){let t=this._elements[e];if(t===void 0)return;this._lazyPath[e]=new S(t,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]}equalityTest(t){return t===this||t!==null&&t instanceof e!=0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}},he=class{constructor(e){this.value=e}},ge=class{constructor(e){this.value=e}},C={type:`VOID`},_e=Symbol(`BREAK`),ve=Symbol(`CONTINUE`);function w(e,t,n){return t===``||t==null||t===n||t===n?e:e=e.split(t).join(n)}function T(e){return e instanceof y}function ye(e){return e instanceof v}function E(e){return!!s(e)||!!i(e)||!!L(e)||!!R(e)||!!z(e)||!!m(e)||e===null||e===C}function be(e,t){return e===void 0?t:e}function xe(t){return t==null?``:e(t)||I(t)?`Array`:L(t)?`Date`:z(t)?`Time`:R(t)?`DateOnly`:s(t)?`String`:m(t)?`Boolean`:i(t)?`Number`:t?.declaredClass===`esri.arcade.Attachment`?`Attachment`:t?.declaredClass===`esri.arcade.Portal`?`Portal`:t?.declaredClass===`esri.arcade.Dictionary`?`Dictionary`:F(t)?`KnowledgeGraph`:t instanceof v?`Module`:k(t)?`Feature`:t instanceof p?`Point`:t instanceof f?`Polygon`:t instanceof r?`Polyline`:t instanceof u?`Multipoint`:t instanceof d?`Extent`:T(t)?`Function`:M(t)?`FeatureSet`:P(t)?`FeatureSetCollection`:A(t)?`Voxel`:j(t)?`Pixel`:t===C?``:typeof t==`number`&&isNaN(t)?`Number`:`Unrecognized Type`}function D(e){return e===C}function O(e){return e instanceof t}function k(e){return e?.arcadeDeclaredClass===`esri.arcade.Feature`}function A(e){return e?.arcadeDeclaredClass===`esri.arcade.Voxel`}function j(e){return e?.arcadeDeclaredClass===`esri.arcade.Pixel`}function M(e){return e?.declaredRootClass===`esri.arcade.featureset.support.FeatureSet`}function N(e){return e?.declaredClass===`esri.arcade.Dictionary`}function Se(e){return N(e)||k(e)||A(e)||j(e)}function P(e){return e?.declaredRootClass===`esri.arcade.featureSetCollection`}function F(e){return e?.declaredClass===`esri.rest.knowledgeGraph.KnowledgeGraph`}function I(e){return e instanceof _}function L(e){return e instanceof h}function R(e){return e instanceof re}function z(e){return e instanceof ie}function B(e){return typeof e==`object`&&!!e}function Ce(e,t,n,r,i){if(e.length<t||e.length>n)throw new g(r,`WrongNumberOfParameters`,i)}function we(e){return e==null||D(e)||e===``}function Te(e){return e<0?-Math.round(-e):Math.round(e)}function V(e,t){return isNaN(e)||t==null||t===``?e.toString():(t=w(t,`‰`,``),t=w(t,`¤`,``),de(e,{pattern:t}))}function H(e,t){return t==null||t===``?e.toISOString(!0):e.toFormat(Ee(t),{locale:a(),numberingSystem:`latn`})}function Ee(e,t=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,`[$&]`);let n=``;for(let r of e.match(/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g)||[])switch(r){case`D`:n+=`d`;break;case`DD`:n+=`dd`;break;case`DDD`:n+=`o`;break;case`d`:n+=`c`;break;case`ddd`:n+=`ccc`;break;case`dddd`:n+=`cccc`;break;case`M`:n+=`L`;break;case`MM`:n+=`LL`;break;case`MMM`:n+=`LLL`;break;case`MMMM`:n+=`LLLL`;break;case`YY`:n+=`yy`;break;case`Y`:case`YYYY`:n+=`yyyy`;break;case`Q`:n+=`q`;break;case`Z`:n+=`Z`;break;case`ZZ`:n+=`ZZ`;break;case`ZZZ`:n+=`ZZZ`;break;case`ZZZZ`:n+=t?`[ZZZZ]`:`ZZZZ`;break;case`ZZZZZ`:n+=t?`[ZZZZZ]`:`ZZZZZ`;break;case`S`:n+=`'S'`;break;case`SS`:n+=`'SS'`;break;case`SSS`:n+=`u`;break;case`A`:case`a`:n+=`a`;break;case`m`:case`mm`:case`h`:case`hh`:case`H`:case`HH`:case`s`:case`ss`:case`X`:case`x`:n+=r;break;default:r.length>=2&&r.startsWith(`[`)&&r.endsWith(`]`)?n+=`'${r.slice(1,-1)}'`:n+=`'${r}'`}return n}function U(e,t,n){switch(n){case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}return!1}function De(e,t,n){if(e===null){if(t===null||t===C)return U(null,null,n);if(i(t))return U(0,t,n);if(s(t)||m(t))return U(0,q(t),n);if(L(t))return U(0,t.toNumber(),n);if(z(t)||R(t))return U(e,t.toNumber(),n)}if(e===C){if(t===null||t===C)return U(null,null,n);if(i(t))return U(0,t,n);if(s(t)||m(t))return U(0,q(t),n);if(L(t))return U(0,t.toNumber(),n);if(z(t)||R(t))return U(e,t.toNumber(),n)}else if(i(e)){if(i(t))return U(e,t,n);if(m(t))return U(e,q(t),n);if(t===null||t===C)return U(e,0,n);if(s(t))return U(e,q(t),n);if(L(t)||z(t)||R(t))return U(e,t.toNumber(),n)}else if(s(e)){if(s(t))return U(W(e),W(t),n);if(L(t)||z(t)||R(t))return U(q(e),t.toNumber(),n);if(i(t))return U(q(e),t,n);if(t===null||t===C)return U(q(e),0,n);if(m(t))return U(q(e),q(t),n)}else if(L(e)){if(L(t))return e.timeZone!==t.timeZone&&(e.isUnknownTimeZone?e=h.arcadeDateAndZoneToArcadeDate(e,t.timeZone):t.isUnknownTimeZone&&(t=h.arcadeDateAndZoneToArcadeDate(t,e.timeZone))),U(e.toNumber(),t.toNumber(),n);if(t===null||t===C)return U(e.toNumber(),0,n);if(i(t))return U(e.toNumber(),t,n);if(m(t)||s(t))return U(e.toNumber(),q(t),n);if(z(t))throw new g(null,`CannotCompareDateAndTime`,null);if(R(t))return U(e.toNumber(),t.toNumber(),n)}else if(m(e)){if(m(t))return U(e,t,n);if(i(t))return U(q(e),q(t),n);if(L(t)||z(t)||R(t))return U(q(e),t.toNumber(),n);if(t===null||t===C)return U(q(e),0,n);if(s(t))return U(q(e),q(t),n)}else if(R(e)){if(L(t))return U(e.toNumber(),t.toNumber(),n);if(t===null||t===C)return U(e.toNumber(),0,n);if(i(t))return U(e.toNumber(),t,n);if(m(t)||s(t))return U(e.toNumber(),q(t),n);if(z(t))throw new g(null,`CannotCompareDateAndTime`,null);if(R(t))return U(e.toNumber(),t.toNumber(),n)}else if(z(e)){if(L(t))throw new g(null,`CannotCompareDateAndTime`,null);if(t===null||t===C)return U(e.toNumber(),0,n);if(i(t))return U(e.toNumber(),t,n);if(m(t)||s(t))return U(e.toNumber(),q(t),n);if(z(t))return U(e.toNumber(),t.toNumber(),n);if(R(t))throw new g(null,`CannotCompareDateAndTime`,null)}return!!Oe(e,t)&&(n===`<=`||n===`>=`)}function Oe(e,t){if(e===t||e===null&&t===C||t===null&&e===C)return!0;if(L(e)&&L(t)||z(e)&&z(t)||R(e)&&R(t))return e.equals(t);if(e instanceof me||e instanceof S)return e.equalityTest(t);if(e instanceof p&&t instanceof p){let n=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(n!=null)return n===r}return!!(B(e)&&B(t)&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function ke(e,{useNumbersForDates:t}){let n=``;for(let r in e){n!==``&&(n+=`,`);let a=e[r];a==null?n+=JSON.stringify(r)+`:null`:m(a)||i(a)||s(a)?n+=JSON.stringify(r)+`:`+JSON.stringify(a):O(a)?n+=JSON.stringify(r)+`:`+G(a):z(a)||R(a)?n+=`${JSON.stringify(r)}:${JSON.stringify(a.toString())}`:I(a)||Array.isArray(a)?n+=JSON.stringify(r)+`:`+G(a,null,t):L(a)?n+=t?JSON.stringify(r)+`:`+JSON.stringify(a.getTime()):JSON.stringify(r)+`:`+a.stringify():typeof a==`object`&&a&&`castToText`in a&&(n+=JSON.stringify(r)+`:`+a.castToText(t))}return`{`+n+`}`}function W(n,r){if(s(n))return n;if(n===null)return``;if(i(n))return V(n,r);if(m(n))return n.toString();if(L(n))return H(n,r);if(z(n)||R(n))return n.toFormat(r);if(n instanceof t)return JSON.stringify(n.toJSON());if(e(n)){let e=[];for(let t=0;t<n.length;t++)e[t]=K(n[t]);return`[`+e.join(`,`)+`]`}if(n instanceof _){let e=[];for(let t=0;t<n.length();t++)e[t]=K(n.get(t));return`[`+e.join(`,`)+`]`}return typeof n==`object`&&n&&`castToText`in n?n.castToText():T(n)?`object, Function`:n===C?``:ye(n)?`object, Module`:``}function Ae(t){let n=[];if(t instanceof _){for(let e=0;e<t.length();e++)n[e]=q(t.get(e));return n}if(!e(t))return null;for(let e=0;e<t.length;e++)n[e]=q(t[e]);return n}function G(n,r,a=!1){if(s(n))return n;if(n===null)return``;if(i(n))return V(n,r);if(m(n))return n.toString();if(L(n))return H(n,r);if(z(n)||R(n))return n.toFormat(r);if(n instanceof t)return n instanceof d?`{"xmin":`+n.xmin.toString()+`,"ymin":`+n.ymin.toString()+`,`+(n.hasZ?`"zmin":`+n.zmin.toString()+`,`:``)+(n.hasM?`"mmin":`+n.mmin.toString()+`,`:``)+`"xmax":`+n.xmax.toString()+`,"ymax":`+n.ymax.toString()+`,`+(n.hasZ?`"zmax":`+n.zmax.toString()+`,`:``)+(n.hasM?`"mmax":`+n.mmax.toString()+`,`:``)+`"spatialReference":`+Be(n.spatialReference)+`}`:Be(n.toJSON(),(e,t)=>e.key===t.key?0:e.key===`spatialReference`?1:t.key===`spatialReference`||e.key<t.key?-1:e.key>t.key?1:0);if(e(n)){let e=[];for(let t=0;t<n.length;t++)e[t]=K(n[t],a);return`[`+e.join(`,`)+`]`}if(n instanceof _){let e=[];for(let t=0;t<n.length();t++)e[t]=K(n.get(t),a);return`[`+e.join(`,`)+`]`}return typeof n==`object`&&n&&`castToText`in n?n.castToText(a):T(n)?`object, Function`:n===C?``:ye(n)?`object, Module`:``}function K(e,n=!1){if(e===null)return`null`;if(m(e)||s(e))return JSON.stringify(e);if(i(e))return e.toString();if(e instanceof t||e instanceof _||Array.isArray(e))return G(e,null,n);if(L(e))return n?JSON.stringify(e.getTime()):JSON.stringify(H(e,``));if(z(e)||R(e))return JSON.stringify(e.toString());if(typeof e==`object`&&e){if(`castToText`in e)return e.castToText(n)}else if(e===C)return`null`;return`null`}function q(t,n){return i(t)?t:t===null||t===``?0:L(t)||R(t)||z(t)?NaN:m(t)?t?1:0:e(t)||t===``||t===void 0?NaN:n!==void 0&&s(t)?(n=w(n,`‰`,``),n=w(n,`¤`,``),fe(t,{pattern:n})):t===C?0:Number(t)}function je(e,t){if(L(e))return e;if(s(e)){let n=Me(e,t);if(n)return h.dateTimeToArcadeDate(n)}return null}function Me(e,t){let r=/ (\d\d)/,i=te(t),a=n.fromISO(e,{zone:i});return a.isValid||r.test(e)&&(e=e.replace(r,`T$1`),a=n.fromISO(e,{zone:t}),a.isValid)?a:null}function Ne(e){return m(e)?e:s(e)?(e=e.toLowerCase())===`true`:!!i(e)&&e!==0&&!isNaN(e)}function Pe(e,t){let n=JSON.parse(e);return n&&!n.spatialReference&&(n.spatialReference=t),oe(n)}function Fe(e,t){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Ie(e){if(e===null)return null;if(e instanceof p)return e.x===`NaN`||e.x===null||isNaN(e.x)?null:e;if(e instanceof f){if((e.curveRings??e.rings).length===0)return null;for(let t of e.curveRings??e.rings)if(t.length>0)return e;return null}if(e instanceof r){if((e.curvePaths??e.paths).length===0)return null;for(let t of e.curvePaths??e.paths)if(t.length>0)return e;return null}return e instanceof u?e.points.length===0?null:e:e instanceof d?e.xmin===`NaN`||e.xmin===null||isNaN(e.xmin)?null:e:null}function Le(e,t){if(!e||!e.domain)return t;let n=null,r=null;if(L(t))n=t.toNumber();else if(R(t))n=t.toString();else if(z(t))n=t.toStorageString();else if(e.field.type===`string`||e.field.type===`esriFieldTypeString`)n=W(t);else{if(t==null)return null;if(t===``)return t;n=q(t)}for(let t=0;t<e.domain.codedValues.length;t++){let i=e.domain.codedValues[t];i.code===n&&(r=i)}return r===null?W(t):r.name}function Re(e,t){if(!e||!e.domain)return t;let n=null,r=W(t);for(let t=0;t<e.domain.codedValues.length;t++){let i=e.domain.codedValues[t];i.name===r&&(n=i)}return n===null?t:n.code}function J(e,t,n=null,r=null){if(!t||!t.fields)return null;let i,a,o=null;for(let n=0;n<t.fields.length;n++){let r=t.fields[n];r.name.toLowerCase()===e.toString().toLowerCase()&&(o=r)}if(o===null)throw new g(null,`FieldNotFound`,null,{key:e});let s=t.typeIdField,c=`id`,l=t.types;if(t.subtypeField&&(s=t.subtypeField,c=`code`,l=t.subtypes??[]),r===null&&n&&s)r=n.hasField(s)?n.field(s):null;else if(s&&r!==null){let e=!1;for(let t of l||[])if(r===t[c]){e=!0;break}if(!e){for(let t of l||[])if(r===t.name){r=t[c],e=!0;break}}e||(r=null,n&&s&&(r=n.hasField(s)?n.field(s):null))}return r!=null&&l.some(e=>e[c]===r&&(i=e.domains?.[o.name],i&&i.type===`inherited`&&(i=ze(o.name,t),a=!0),!0)),a||i||(i=ze(e,t)),{field:o,domain:i}}function ze(e,t){let n;return t.fields.some(t=>(t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n)),n}function Be(e,t){t||={},typeof t==`function`&&(t={cmp:t});let n=typeof t.cycles==`boolean`&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){let r={key:t,value:e[t]},a={key:n,value:e[n]};return i(r,a)}});var i;let a=[];return function e(t){if(t?.toJSON&&typeof t.toJSON==`function`&&(t=t.toJSON()),t===void 0)return;if(typeof t==`number`)return isFinite(t)?``+t:`null`;if(typeof t!=`object`)return JSON.stringify(t);let i,o;if(Array.isArray(t)){for(o=`[`,i=0;i<t.length;i++)i&&(o+=`,`),o+=e(t[i])||`null`;return o+`]`}if(t===null)return`null`;if(a.includes(t)){if(n)return JSON.stringify(`__cycle__`);throw TypeError(`Converting circular structure to JSON`)}let s=a.push(t)-1,c=Object.keys(t).sort(r?.(t));for(o=``,i=0;i<c.length;i++){let n=c[i],r=e(t[n]);r&&(o&&(o+=`,`),o+=JSON.stringify(n)+`:`+r)}return a.splice(s,1),`{`+o+`}`}(e)}function Ve(e){if(e===null)return null;let t=[];for(let n of e)k(n)?t.push(n.geometry()):t.push(n);return t}function Y(e,t){if(!(t instanceof p))throw new g(null,`InvalidParameter`,null);e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function He(t,n){if(e(t)||I(t)){let r=!1,i=!1,a=[],s=n;if(e(t)){for(let e of t)Y(a,e);a.length>0&&(s=t[0].spatialReference,r=t[0].hasZ,i=t[0].hasM)}else if(t instanceof S)a=t._elements,a.length>0&&(r=t._hasZ,i=t._hasM,s=t.get(0).spatialReference);else{if(!I(t))throw new g(null,`InvalidParameter`,null);for(let e of t.toArray())Y(a,e);a.length>0&&(s=t.get(0).spatialReference,r=!0===t.get(0).hasZ,i=!0===t.get(0).hasM)}return a.length===0?null:(o(a)||(a=a.slice().reverse()),new f({rings:[a],spatialReference:s,hasZ:r,hasM:i}))}return t}function Ue(t,n){if(e(t)||I(t)){let i=!1,a=!1,o=[],s=n;if(e(t)){for(let e of t)Y(o,e);o.length>0&&(s=t[0].spatialReference,i=!0===t[0].hasZ,a=!0===t[0].hasM)}else if(t instanceof S)o=t._elements,o.length>0&&(i=t._hasZ,a=t._hasM,s=t.get(0).spatialReference);else if(I(t)){for(let e of t.toArray())Y(o,e);o.length>0&&(s=t.get(0).spatialReference,i=!0===t.get(0).hasZ,a=!0===t.get(0).hasM)}return o.length===0?null:new r({paths:[o],spatialReference:s,hasZ:i,hasM:a})}return t}function We(t,n){if(e(t)||I(t)){let r=!1,i=!1,a=[],o=n;if(e(t)){for(let e of t)Y(a,e);a.length>0&&(o=t[0].spatialReference,r=!0===t[0].hasZ,i=!0===t[0].hasM)}else if(t instanceof S)a=t._elements,a.length>0&&(r=t._hasZ,i=t._hasM,o=t.get(0).spatialReference);else if(I(t)){for(let e of t.toArray())Y(a,e);a.length>0&&(o=t.get(0).spatialReference,r=!0===t.get(0).hasZ,i=!0===t.get(0).hasM)}return a.length===0?null:new u({points:a,spatialReference:o,hasZ:r,hasM:i})}return t}function Ge(t,n=!0){if(t==null)return[];if(e(t)){let e=[];for(let r of t){let t=W(r);(n||t!==``)&&e.push(t)}return e}if(I(t)){let e=[];for(let r=0;r<t.length();r++){let i=W(t.get(r));(n||i!==``)&&e.push(i)}return e}if(E(t)){let e=W(t);if(n||e!==``)return[e]}return[]}var Ke=0;function qe(){return Ke++,Ke%100==0?(Ke=0,new Promise(e=>{setTimeout(()=>{e()},0)})):Promise.resolve()}function Je(e,t,n){switch(n){case`&`:return e&t;case`|`:return e|t;case`^`:return e^t;case`<<`:return e<<t;case`>>`:return e>>t;case`>>>`:return e>>>t}}function X(e,n=null){return e==null?null:m(e)||i(e)||s(e)?e:e instanceof t?!0===n?.keepGeometryType?e:e.toJSON():e instanceof _?e.toArray().map(e=>X(e,n)):Array.isArray(e)?e.map(e=>X(e,n)):c(e)?e:L(e)?e.toJSDate():z(e)?e.toString():R(e)?e.toJSDate():typeof e==`object`&&e&&e.castAsJson!==void 0?e.castAsJson(n):null}async function Ye(e,t,n,r,i){i[r]=await Xe(e,t,n)}async function Xe(e,n=null,r=null){if(e instanceof _&&(e=e.toArray()),e==null)return null;if(E(e)||e instanceof t||c(e)||L(e))return X(e,r);if(Array.isArray(e)){let i=[],a=[];for(let o of e)o===null||E(o)||o instanceof t||c(o)||L(o)?a.push(X(o,r)):(a.push(null),i.push(Ye(o,n,r,a.length-1,a)));return i.length>0&&await Promise.all(i),a}return typeof e==`object`&&e&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(n,r):null}function Z(e){return Ze(e)?e.parent:e}function Ze(e){return e&&`declaredClass`in e&&e.declaredClass===`esri.layers.support.SubtypeSublayer`}function Qe(e){return e&&`declaredClass`in e&&e.declaredClass===`esri.layers.SubtypeGroupLayer`}function $e(e,t,n){let r=Z(e.fullSchema());return r===null||!r.fields?null:J(t,r,e,n)}function et(e){let t=Z(e.fullSchema());return t===null?null:t.fields?t.subtypeField?{subtypeField:t.subtypeField,subtypes:t.subtypes?t.subtypes.map(e=>({name:e.name,code:e.code})):[]}:t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(e=>({name:e.name,code:e.id})):[]}:null:null}function tt(e,t,n,r){let i=Z(e.fullSchema());if(i===null||!i.fields)return null;let a=J(t,i,e,r);if(n===void 0)try{n=e.field(t)}catch{return null}return Le(a,n)}function nt(e,t,n,r){let i=Z(e.fullSchema());if(i===null||!i.fields)return null;if(n===void 0){try{n=e.field(t)}catch{return null}return n}return Re(J(t,i,e,r),n)}function rt(e){return e?.timeZone??`system`}function it(e){let t=Z(e.fullSchema());if(t===null||!t.fields)return null;let n=[];for(let e of t.fields)n.push(le(e));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField??``,geometryType:ue[t.geometryType]===void 0?``:ue[t.geometryType],fields:n}}function at(e,t){let n=h.systemTimeZoneCanonicalName;return e===`system`&&(e=n),{version:ot,engineVersion:`5.0`,timeZone:e,userTimeZone:n,spatialReference:t instanceof se?t.toJSON():t,application:ee.applicationName??``,engine:`web`,locale:a()}}var ot=`1.34`,st=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:ge,ReturnResult:he,absRound:Te,arcadeVersion:ot,autoCastArrayOfPointsToMultiPoint:We,autoCastArrayOfPointsToPolygon:He,autoCastArrayOfPointsToPolyline:Ue,autoCastFeatureToGeometry:Ve,binaryOperator:Je,breakResult:_e,castAsJson:X,castAsJsonAsync:Xe,castRecordToText:ke,continueResult:ve,defaultExecutingContext:at,defaultTimeZone:rt,defaultUndefined:be,equalityTest:Oe,featureDomainCodeLookup:nt,featureDomainValueLookup:tt,featureFullDomain:$e,featureSchema:it,featureSubtypes:et,fixNullGeometry:Ie,fixSpatialReference:Fe,formatDate:H,formatNumber:V,getDomain:J,getDomainCode:Re,getDomainValue:Le,getType:xe,greaterThanLessThan:De,isArray:e,isBoolean:m,isDate:L,isDateOnly:R,isDictionary:N,isDictionaryLike:Se,isEmpty:we,isFeature:k,isFeatureSet:M,isFeatureSetCollection:P,isFunctionParameter:T,isGeometry:O,isGraphic:l,isImmutableArray:I,isInteger:ne,isJsDate:c,isKnowledgeGraph:F,isModule:ye,isNumber:i,isObject:B,isPixel:j,isSimpleType:E,isString:s,isSubtypeGrouplayer:Qe,isSubtypeSublayer:Ze,isTime:z,isVoid:D,isVoxel:A,multiReplace:w,parseGeometryFromJson:Pe,pcCheck:Ce,stableStringify:Be,standardiseDateFormat:Ee,tick:qe,toBoolean:Ne,toDate:je,toNumber:q,toNumberArray:Ae,toString:W,toStringArray:Ge,toStringExplicit:G,voidOperation:C},Symbol.toStringTag,{value:`Module`}));function ct(e){lt=e}var lt;function Q(t){return t===null?null:L(t)?t.clone():E(t)?t:O(t)?t.clone():I(t)?t.toArray().map(e=>Q(e)):e(t)?t.map(e=>Q(e)):k(t)?lt.createFromArcadeFeature(t):P(t)||M(t)?t:N(t)||t?.declaredClass===`esri.arcade.Attachment`?t.deepClone():(t?.declaredClass===`esri.arcade.Portal`||F(t)||t instanceof v||T(t),t)}function $(t,n,r=!1,a=!1){if(t==null)return null;if(i(t)||m(t)||s(t)||L(t)||R(t)||z(t))return t;if(e(t)){let e=[];for(let i of t)e.push($(i,n,r,a));return e}if(a&&O(t))return t;let o=new ut;o.immutable=!1;for(let[e,i]of Object.entries(t))i!==void 0&&o.setField(e,$(i,n,r,a));return o.immutable=r,o}var ut=class e{constructor(t){this.declaredClass=`esri.arcade.Dictionary`,this.plain=!1,this.immutable=!0,t instanceof e?this.attributes=t.attributes:t==null?this.attributes=Object.create(null):Object.getPrototypeOf(t)==null?this.attributes=t:this.attributes={__proto__:null,...t}}static containerEntry(t,n){return new e({__proto__:null,key:t,value:n})}static textFormatting(){let t=new e({__proto__:null,newline:`
`,tab:`	`,singlequote:`'`,doublequote:`"`,forwardslash:`/`,backwardslash:`\\`});return t.immutable=!1,t}field(e){let t=e.toLowerCase(),n=this.attributes[e];if(n!==void 0)return n;for(let e in this.attributes)if(e.toLowerCase()===t)return this.attributes[e];throw new g(null,`FieldNotFound`,null,{key:e})}setField(e,t){if(this.immutable)throw new g(null,`Immutable`,null);if(T(t))throw new g(null,`NoFunctionInDictionary`,null);let n=e.toLowerCase();if(t instanceof Date&&(t=h.dateJSToArcadeDate(t)),this.attributes[e]===void 0){for(let e in this.attributes)if(e.toLowerCase()===n)return void(this.attributes[e]=t);this.attributes[e]=t}else this.attributes[e]=t}eraseField(e){if(this.immutable)throw new g(null,`Immutable`,null);if(e in this.attributes)return void delete this.attributes[e];let t=e.toLowerCase();for(let e in this.attributes)if(e.toLowerCase()===t)return void delete this.attributes[e]}hasField(e){let t=e.toLowerCase();if(this.attributes[e]!==void 0)return!0;for(let e in this.attributes)if(e.toLowerCase()===t)return!0;return!1}keys(){let e=[];for(let t in this.attributes)e.push(t);return e=e.sort(),e}values(){return this.keys().map(e=>this.attributes[e])}entryCount(){return Object.keys(this.attributes).length}isEmpty(){return this.entryCount()<=0}castToText(e=!1){return ke(this.attributes,{useNumbersForDates:e})}static convertObjectToArcadeDictionary(t,n,r=!0,i=!1){let a=new e;for(let e in a.immutable=!1,t){let o=t[e];o!==void 0&&a.setField(e.toString(),$(o,n,r,i))}return a.immutable=r,a}static convertJsonToArcade(e,t,n=!1,r=!1){return $(e,t,n,r)}castAsJson(e=null){let t=Object.create(null);for(let n in this.attributes){let r=this.attributes[n];r!==void 0&&(e?.keyTranslate&&(n=e.keyTranslate(n)),t[n]=X(r,e))}return t}async castDictionaryValueAsJsonAsync(e,t,n,r=null,i){let a=await Xe(n,r,i);return e[t]=a,a}async castAsJsonAsync(e=null,n=null){let r=Object.create(null),i=[];for(let a in this.attributes){let o=this.attributes[a];n?.keyTranslate&&(a=n.keyTranslate(a)),o!==void 0&&(E(o)||o instanceof t||o instanceof h?r[a]=X(o,n):i.push(this.castDictionaryValueAsJsonAsync(r,a,o,e,n)))}return i.length>0&&await Promise.all(i),r}deepClone(){let t=new e;t.immutable=!1;for(let e of this.keys())t.setField(e,Q(this.field(e)));return t}};export{R as $,E as A,G as B,We as C,He as D,he as E,w as F,Ae as G,De as H,qe as I,L as J,z as K,je as L,et as M,P as N,q as O,at as P,Ze as Q,_e as R,C as S,it as T,F as U,Ee as V,W,ke as X,Ce as Y,D as Z,N as _,tt as a,Ue as at,Je as b,nt as c,be as ct,xe as d,pe as dt,Te as et,X as f,b as ft,Ve as g,ve as h,v as ht,j as i,ge as it,A as j,O as k,J as l,me as lt,$e as m,x as mt,Q as n,st as nt,Ne as o,Le as ot,k as p,y as pt,Ie as q,ct as r,we as rt,M as s,Oe as st,ut as t,I as tt,Fe as u,S as ut,rt as v,Se as w,Re as x,T as y,Ge as z};