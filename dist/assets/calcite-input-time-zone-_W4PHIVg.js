const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/time-zones-q4jr4KKg.js","assets/index-p4VH55K1-DQcefKQv.js","assets/index2-D1wzs14Z.js","assets/index3-D1GwRMaH.js","assets/region-CjAs6wru.js","assets/index4-uPoaVQB2.js"])))=>i.map(i=>d[i]);
import{h as z,H as R,k as T,l as u,q as V,_ as g}from"./index-C5AN6gIb.js";import{c as $,d as U}from"./label-CAIjuis8.js";import{u as A,I as H}from"./interactive-CmWnkkOC.js";import{c as W,d as G,b as q}from"./locale-BqOq_HI1.js";import{u as j,c as K,d as N,s as J}from"./t9n-CNLrLhpx.js";import{c as Q,a as X,s as Y}from"./loadable-CIDEs4qX.js";import{c as ee,d as te,a as oe,H as se}from"./form-BnXW4FPo.js";import{d as ie}from"./chip-CHzcrSIZ.js";import{d as ne}from"./combobox-DRq3yAaW.js";import{d as ae}from"./combobox-item-BkNbAdY1.js";import{d as le}from"./combobox-item-group-B4v_NxdQ.js";import{d as re}from"./icon-C-hoQ7C9.js";import{d as ce}from"./input-message-IeZ9YW4t.js";import"./dom-C5N_1hiZ.js";import"./component-CeOigQot.js";import"./key-BSF9a80T.js";import"./observers-DkXuzKPz.js";import"./filter-Ig933xs6.js";import"./debounce-DUf35w49.js";import"./floating-ui-C_rWs4-h.js";import"./openCloseComponent-BZMSNP3t.js";import"./Validation-B5FDPjXY.js";import"./utils2-DADnorAU.js";import"./conditionalSlot-DYlEyccB.js";const me={offset:"offset"},de=60;function L(o){return o.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace("âˆ’","-")}function fe(o,e){const t=O(o,"en-US",e).replace("GMT","");return t===""?0:Number(L(t))*de}function he(){return new Date().getTimezoneOffset()*-1}function ue(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}async function pe(o){if(o==="offset")return t=>t;const{normalize:e}=await g(async()=>{const{normalize:t}=await import("./time-zones-q4jr4KKg.js");return{normalize:t}},__vite__mapDeps([0,1]));return e}async function be(o,e,t,s,r){if(t==="name"){const{groupByName:n}=await g(async()=>{const{groupByName:i}=await import("./index2-D1wzs14Z.js");return{groupByName:i}},__vite__mapDeps([2,0,1]));return(await n()).map(({label:i})=>({label:x(i),value:i,metadata:{filterValue:i}})).filter(i=>!!i).sort()}const a=r==="user"?o:r==="utc"?"fr":"en-GB",h=s.getTime();if(t==="region"){const[{groupByRegion:n},{getCountry:c,global:i}]=await Promise.all([g(()=>import("./index3-D1GwRMaH.js"),__vite__mapDeps([3,0,1,4])),g(()=>import("./region-CjAs6wru.js"),__vite__mapDeps([4,1]))]);return(await n()).map(({label:m,tzs:p})=>(p.sort((d,f)=>{const v=C(d,e),y=C(f,e),b="Etc/GMT";if(d.startsWith(b)&&f.startsWith(b)){const I=d.substring(b.length),w=f.substring(b.length),B=I===""?0:parseInt(I);return(w===""?0:parseInt(w))-B}return v.localeCompare(y)}),{label:E(e,m),items:p.map(d=>{const f=L(O(d,a,h)),v=C(d,e),y=m===i?`${C(i,e)} Etc`:x(d),b=c(d),I=E(e,b);return{label:v,value:d,metadata:{country:I===v?void 0:I,filterValue:y,offset:f}}})})).sort((m,p)=>m.label===i?-1:p.label===i?1:m.label.localeCompare(p.label))}const[{groupByOffset:Z},{DateEngine:M}]=await Promise.all([g(()=>import("./index4-uPoaVQB2.js"),__vite__mapDeps([5,0,1,4])),g(()=>import("./index5-Bppi0Z5G.js"),[])]),_=await Z({dateEngine:new M,groupDateRange:1,startDate:new Date(h).toISOString()}),k=new Intl.ListFormat(o,{style:"long",type:"conjunction"}),D=["Factory","Etc/UTC"];return _.forEach(n=>{const c=[];let i=0;n.tzs.forEach((l,m)=>{D.includes(l)&&i++,c[m]=i}),n.tzs=n.tzs.filter(l=>!D.includes(l)),n.labelTzIdx=n.labelTzIdx.map(l=>l-c[l]).filter(l=>l>=0&&l<n.tzs.length)}),_.map(({labelTzIdx:n,tzs:c})=>{const i=c[0],l=L(O(i,a,h)),m=fe(i,h),p=n.map(f=>C(c[f],e));return{label:Te(e,l,k.format(p)),value:m,metadata:{filterValue:c.map(f=>x(f))}}}).filter(n=>!!n).sort((n,c)=>n.value-c.value)}function C(o,e){return e[o]||Ie(o)}function ge(o,e,t){return t.timeZoneRegionLabel.replace("{city}",o).replace("{country}",E(t,e))}function E(o,e){return o[e]||e}function Ie(o){return o.split("/").pop()}function x(o){return o.replace(/_/g," ")}function Te(o,e,t){return o.timeZoneLabel.replace("{offset}",e).replace("{cities}",t)}function O(o,e,t=Date.now()){return q(e,{timeZone:o,timeZoneName:"shortOffset"}).formatToParts(t).find(({type:a})=>a==="timeZoneName").value}function Ce(o){return o.items!==void 0}function ve(o){return Ce(o[0])?o.flatMap(e=>e.items):o}function P(o,e,t){return t==null?null:ve(o).find(s=>s[e]==t)}const Ze=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}.offset{white-space:nowrap}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",ye=Ze,S=z(class extends R{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInputTimeZoneBeforeClose=T(this,"calciteInputTimeZoneBeforeClose",6),this.calciteInputTimeZoneBeforeOpen=T(this,"calciteInputTimeZoneBeforeOpen",6),this.calciteInputTimeZoneChange=T(this,"calciteInputTimeZoneChange",6),this.calciteInputTimeZoneClose=T(this,"calciteInputTimeZoneClose",6),this.calciteInputTimeZoneOpen=T(this,"calciteInputTimeZoneOpen",6),this.setComboboxRef=e=>{this.comboboxEl=e},this.onComboboxBeforeClose=e=>{e.stopPropagation(),this.overrideSelectedLabelForRegion(!1),this.calciteInputTimeZoneBeforeClose.emit()},this.onComboboxBeforeOpen=e=>{e.stopPropagation(),this.overrideSelectedLabelForRegion(!0),this.calciteInputTimeZoneBeforeOpen.emit()},this.onComboboxChange=e=>{e.stopPropagation();const s=e.target.selectedItems[0];if(!s){this.value=null,this.selectedTimeZoneItem=null,this.calciteInputTimeZoneChange.emit();return}const r=this.findTimeZoneItemByLabel(s.getAttribute("data-label")),a=`${r.value}`;this.value===a&&r.label===this.selectedTimeZoneItem.label||(this.value=a,this.selectedTimeZoneItem=r,this.calciteInputTimeZoneChange.emit())},this.onComboboxClose=e=>{e.stopPropagation(),this.open=!1,this.calciteInputTimeZoneClose.emit()},this.onComboboxOpen=e=>{this.open=!0,e.stopPropagation(),this.calciteInputTimeZoneOpen.emit()},this.clearable=!1,this.disabled=!1,this.form=void 0,this.maxItems=0,this.messages=void 0,this.messageOverrides=void 0,this.mode="offset",this.offsetStyle="user",this.validationMessage=void 0,this.validationIcon=void 0,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.name=void 0,this.open=!1,this.overlayPositioning="absolute",this.referenceDate=void 0,this.required=!1,this.scale="m",this.status="idle",this.value=void 0,this.readOnly=!1,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}handleTimeZoneItemPropsChange(){this.timeZoneItems&&(this.updateTimeZoneItems(),this.updateTimeZoneSelection())}openChanged(){this.comboboxEl.open=this.open}handleValueChange(e,t){if(e=this.normalizeValue(e),!e){if(this.clearable){this.value=e,this.selectedTimeZoneItem=null;return}this.value=t,this.selectedTimeZoneItem=this.findTimeZoneItem(t);return}const s=this.findTimeZoneItem(e);if(!s){this.value=t;return}this.selectedTimeZoneItem=s}async setFocus(){await Q(this),await this.comboboxEl.setFocus()}effectiveLocaleWatcher(){j(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}overrideSelectedLabelForRegion(e){if(this.mode!=="region"||!this.selectedTimeZoneItem)return;const{label:t,metadata:s}=this.selectedTimeZoneItem;this.comboboxEl.selectedItems[0].textLabel=!s.country||e?t:ge(t,s.country,this.messages)}findTimeZoneItem(e){return P(this.timeZoneItems,"value",e)}findTimeZoneItemByLabel(e){return P(this.timeZoneItems,"label",e)}async updateTimeZoneItems(){this.timeZoneItems=await this.createTimeZoneItems()}async updateTimeZoneSelection(){if(this.value===""&&this.clearable){this.selectedTimeZoneItem=null;return}const e=this.mode==="offset"?he():ue(),t=this.value??e;this.selectedTimeZoneItem=this.findTimeZoneItem(t)||this.findTimeZoneItem(e)}async createTimeZoneItems(){return!this.effectiveLocale||!this.messages?[]:be(this.effectiveLocale,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()),this.offsetStyle)}connectedCallback(){ee(this),$(this),W(this),K(this)}disconnectedCallback(){te(this),U(this),G(this),N(this)}normalizeValue(e){return e=e===null?"":e,e&&this.normalizer(e)}async componentWillLoad(){X(this);const[,e]=await Promise.all([J(this),pe(this.mode)]);this.normalizer=e,await this.updateTimeZoneItems(),this.value=this.normalizeValue(this.value),await this.updateTimeZoneSelection();const t=this.selectedTimeZoneItem?`${this.selectedTimeZoneItem.value}`:null;oe(this,t),this.value=t}componentDidLoad(){Y(this),this.openChanged()}componentDidRender(){A(this),this.overrideSelectedLabelForRegion(this.open)}render(){return u(V,{key:"b94fb2d93cdcaf0c44bbd2a0c7deaf59701078bf"},u(H,{key:"45246bbab441e9daf0e372832e74d7660039c770",disabled:this.disabled},u("calcite-combobox",{key:"294e44d8ab01079651c417f7808348e584f135b7",clearDisabled:!this.clearable,disabled:this.disabled,label:this.messages.chooseTimeZone,lang:this.effectiveLocale,maxItems:this.maxItems,onCalciteComboboxBeforeClose:this.onComboboxBeforeClose,onCalciteComboboxBeforeOpen:this.onComboboxBeforeOpen,onCalciteComboboxChange:this.onComboboxChange,onCalciteComboboxClose:this.onComboboxClose,onCalciteComboboxOpen:this.onComboboxOpen,overlayPositioning:this.overlayPositioning,placeholder:this.mode==="name"?this.messages.namePlaceholder:this.mode==="offset"?this.messages.offsetPlaceholder:this.messages.regionPlaceholder,placeholderIcon:"search",readOnly:this.readOnly,ref:this.setComboboxRef,scale:this.scale,selectionMode:this.clearable?"single":"single-persist",status:this.status,"validation-icon":this.validationIcon,"validation-message":this.validationMessage},this.renderItems()),u(se,{key:"0b7a0694166f1d5b36b780d3436dad15d466bc3c",component:this})))}renderItems(){return this.mode==="region"?this.renderRegionItems():this.timeZoneItems.map(e=>{const t=this.selectedTimeZoneItem===e,{label:s,metadata:r,value:a}=e;return u("calcite-combobox-item",{"data-label":s,key:s,metadata:r,selected:t,textLabel:s,value:a})})}renderRegionItems(){return this.timeZoneItems.flatMap(({label:e,items:t})=>u("calcite-combobox-item-group",{key:e,label:e},t.map(s=>{const r=this.selectedTimeZoneItem===s,{label:a,metadata:h,value:Z}=s;return u("calcite-combobox-item",{"data-label":a,description:h.country,key:a,metadata:h,selected:r,textLabel:a,value:Z},u("span",{class:me.offset,slot:"content-end"},h.offset))})))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],open:["openChanged"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}}static get style(){return ye}},[17,"calcite-input-time-zone",{clearable:[516],disabled:[516],form:[513],maxItems:[514,"max-items"],messages:[1040],messageOverrides:[1040],mode:[513],offsetStyle:[513,"offset-style"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],validity:[1040],name:[513],open:[1540],overlayPositioning:[513,"overlay-positioning"],referenceDate:[1,"reference-date"],required:[516],scale:[513],status:[513],value:[1025],readOnly:[516,"read-only"],defaultMessages:[32],effectiveLocale:[32],setFocus:[64]},void 0,{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],open:["openChanged"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}]);function F(){if(typeof customElements>"u")return;["calcite-input-time-zone","calcite-chip","calcite-combobox","calcite-combobox-item","calcite-combobox-item-group","calcite-icon","calcite-input-message"].forEach(e=>{switch(e){case"calcite-input-time-zone":customElements.get(e)||customElements.define(e,S);break;case"calcite-chip":customElements.get(e)||ie();break;case"calcite-combobox":customElements.get(e)||ne();break;case"calcite-combobox-item":customElements.get(e)||ae();break;case"calcite-combobox-item-group":customElements.get(e)||le();break;case"calcite-icon":customElements.get(e)||re();break;case"calcite-input-message":customElements.get(e)||ce();break}})}F();const Je=S,Qe=F;export{Je as CalciteInputTimeZone,Qe as defineCustomElement};
