const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/intersectsOperator-WNQh2QqL.js","assets/SpatialReference-CfUjvF_j.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css","assets/Envelope2D-B7gkUj4e.js","assets/Point2D-DJueHbCy.js","assets/OperatorDefinitions-C5Pat-Jx.js","assets/SimpleGeometryCursor-BILtMaQf.js","assets/Transformation2D-D07KwcEj.js","assets/OperatorIntersects-Dm7uf9Bf.js","assets/memoryEstimations-D_IbKyOk.js","assets/FlatGeometry-BsPiiSVP.js","assets/OptimizedGeometry-BQJ7w5VU.js","assets/jsonConverter-CoA5-zxu.js","assets/containsOperator-CUwSYQHp.js","assets/crossesOperator-J2PR-akj.js","assets/OperatorCrosses-DxKL2s7D.js","assets/disjointOperator-Du9G4J12.js","assets/overlapsOperator-Zm8CqjY2.js","assets/OperatorOverlaps-DBLJ0Onm.js","assets/touchesOperator-BRB2ptV5.js","assets/OperatorTouches-BNfNI6hg.js","assets/withinOperator-gnSo3sG5.js","assets/OperatorWithin-D4VL40Kk.js"])))=>i.map(i=>d[i]);
import{$S as e,$T as t,Cx as n,MS as r,Nv as i,Pv as a,Rv as o,bx as s,wD as c,wx as l,xx as u}from"./index-BN8X5Ryz.js";import{S as d,s as f,t as p,v as m,y as h}from"./featureConversionUtils-o9-cJXzl.js";import{c as g}from"./queryUtils-DGU5ISbw.js";function _(e,t,n,r=e.hasZ,i=e.hasM){if(t==null)return null;let a=e.hasZ&&r,o=e.hasM&&i;if(n){let e=h(t,`esriGeometryPoint`,n,r,i);return d(e,a,o)}return d(t,a,o)}function v(e,t,n,r,i,a){if(t==null)return null;let o=`coords`in t?t:t.geometry;if(o==null)return null;let{hasZ:s,hasM:c}=o,l=s&&(i??=s),u=c&&(a??=c);if(n){let t=m(o,e,n,i,a);return r&&(t=h(t,e,r)),f(t,e,l,u)}if(r){let t=h(o,e,r,i,a);return f(t,e,l,u)}return f(o,e,l,u)}function y(e){return e&&b in e?JSON.parse(JSON.stringify(e,x)):e}var b=`_geVersion`,x=(e,t)=>e===b?void 0:t;function S(e){return e===`mesh`?u:s(e)}function C(e,t){return T(e,t.coords[0],t.coords[1])}function w(e,t){let{coords:n,lengths:r,stride:i}=t;if(!r)return!1;for(let t=0,a=0;t<r.length;t++,a+=i)if(!T(e,n[a],n[a+1]))return!1;return!0}function T(e,t,n){if(!e)return!1;let{coords:r,lengths:i,stride:a}=e,o=!1,s=0;for(let e of i)o=E(o,r,a,s,e,t,n),s+=e*a;return o}function E(e,t,n,r,i,a,o){let s=e,c=r;for(let e=r,l=r+i*n;e<l;e+=n){c=e+n,c===l&&(c=r);let i=t[e],u=t[e+1],d=t[c],f=t[c+1];(u<o&&f>=o||f<o&&u>=o)&&i+(o-u)/(f-u)*(d-i)<a&&(s=!s)}return s}var D=`unsupported-query`,O={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!1,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function k(e){return e!=null&&!0===O.spatialRelationship[e]}function A(e){return e!=null&&!0===O.queryGeometry[o(e)]}function j(e){return e!=null&&!0===O.layerGeometry[e]}var M={esriSpatialRelIntersects:()=>e(()=>import(`./intersectsOperator-WNQh2QqL.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),esriSpatialRelContains:()=>e(()=>import(`./containsOperator-CUwSYQHp.js`),__vite__mapDeps([14,1,2,3,4,5,6,7,8,10,11,12,13])),esriSpatialRelCrosses:()=>e(()=>import(`./crossesOperator-J2PR-akj.js`),__vite__mapDeps([15,1,2,3,4,5,6,7,8,16,10,11,12,13])),esriSpatialRelDisjoint:()=>e(()=>import(`./disjointOperator-Du9G4J12.js`),__vite__mapDeps([17,1,2,3,4,5,6,7,8,10,11,12,13])),esriSpatialRelEnvelopeIntersects:null,esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:()=>e(()=>import(`./overlapsOperator-Zm8CqjY2.js`),__vite__mapDeps([18,1,2,3,4,5,6,7,8,19,10,11,12,13])),esriSpatialRelTouches:()=>e(()=>import(`./touchesOperator-BRB2ptV5.js`),__vite__mapDeps([20,1,2,3,4,5,6,7,8,21,10,11,12,13])),esriSpatialRelWithin:()=>e(()=>import(`./withinOperator-gnSo3sG5.js`),__vite__mapDeps([22,1,2,3,4,5,6,7,8,23,10,11,12,13])),esriSpatialRelRelation:null};function N(e){let t=M[e];if(t==null)throw Error(`Cannot load unsupported spatial operator: ${e}`);return t()}async function P(e,t,r){if(a(t)){if(r===`esriGeometryPoint`&&(e===`esriSpatialRelIntersects`||e===`esriSpatialRelContains`)){let e=p(t,!1,!1);return t=>C(e,t)}if(r===`esriGeometryMultipoint`){let n=p(t,!1,!1);if(e===`esriSpatialRelContains`)return e=>w(n,e)}}if(i(t)){if(r===`esriGeometryPoint`&&(e===`esriSpatialRelIntersects`||e===`esriSpatialRelContains`))return e=>l(t,v(r,e));if(r===`esriGeometryMultipoint`&&e===`esriSpatialRelContains`)return e=>n(t,v(r,e));if(e===`esriSpatialRelIntersects`){let e=S(r);return n=>e(t,v(r,n))}}e===`esriSpatialRelEnvelopeIntersects`&&(e=`esriSpatialRelIntersects`);let o=await N(e);return e=>o.execute(t,v(r,e))}async function F(e,n,i){let{spatialRel:a,geometry:o}=e;if(o){if(!k(a))throw new t(D,`Unsupported query spatial relationship`,{query:e});if(r(o.spatialReference)&&r(i)){if(!A(o))throw new t(D,`Unsupported query geometry type`,{query:e});if(!j(n))throw new t(D,`Unsupported layer geometry type`,{query:e});if(e.outSR)return g(e.geometry?.spatialReference,e.outSR)}}}function I(e){if(i(e))return!0;if(a(e)){for(let t of e.rings)if(t.length!==5||t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1;return!0}return!1}async function L(e,t){if(!e)return null;let n=t.featureAdapter,{startTimeField:r,endTimeField:i}=e,a=1/0,o=-1/0;if(r&&i)await t.forEach(e=>{let t=n.getAttribute(c(e),r),s=n.getAttribute(c(e),i);t==null||isNaN(t)||(a=Math.min(a,t)),s==null||isNaN(s)||(o=Math.max(o,s))});else{let e=r||i;await t.forEach(t=>{let r=n.getAttribute(c(t),e);r==null||isNaN(r)||(a=Math.min(a,r),o=Math.max(o,r))})}return{start:a,end:o}}function R(e,t,n){if(!t||!e)return null;let{startTimeField:r,endTimeField:i}=e;if(!r&&!i)return null;let{start:a,end:o}=t;if(a===null&&o===null)return null;if(a===void 0&&o===void 0)return V();let s=n.getAttributeAsTimestamp?.bind(n)??n.getAttribute.bind(n);return r&&i?z(s,r,i,a,o):B(s,r||i,a,o)}function z(e,t,n,r,i){return r!=null&&i!=null?a=>{let o=e(a,t),s=e(a,n);return(o==null||o<=i)&&(s==null||s>=r)}:r==null?i==null?void 0:n=>{let r=e(n,t);return r==null||r<=i}:t=>{let i=e(t,n);return i==null||i>=r}}function B(e,t,n,r){return n!=null&&r!=null&&n===r?r=>e(r,t)===n:n!=null&&r!=null?i=>{let a=e(i,t);return a!=null&&a>=n&&a<=r}:n==null?r==null?void 0:n=>{let i=e(n,t);return i!=null&&i<=r}:r=>{let i=e(r,t);return i!=null&&i>=n}}function V(){return()=>!1}export{I as a,y as c,P as i,L as n,v as o,F as r,_ as s,R as t};