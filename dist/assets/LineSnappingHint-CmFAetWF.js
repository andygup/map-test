import{Ib as e,Lb as t,Nb as n,Ob as r,Uu as i,gl as a,jb as o,kb as s,x_ as c,zb as l,zl as u}from"./index-BN8X5Ryz.js";import{n as d,t as f}from"./dehydratedPoint-CWZQBefp.js";import{c as p,i as m,m as h,r as g}from"./elevationInfoUtils-uoMH3ofe.js";function _(e,t,n){return v(e,t,n)}function v(e=0,t=0,n=0){return c(e,t,n)}function y(e){return e}function b(e){return e}function x(e,t,n){return y(c(e,t,n))}function S(e){let[t,n,r]=e;return e.length>3?[t,n,r,e[3]]:[t,n,r]}function C(e){return e[3]=1|((e.length>3?e[3]:void 0)??0),e}function w(e){return!!(1&((e.length>3?e[3]:void 0)??0))}function T(e,t,{coordinateHelper:n,elevationInfo:r},i){return e?E(n.vectorToDehydratedPoint(e,A),t,r,i):null}function E(e,t,n,r=v()){return r[0]=e.x,r[1]=e.y,r[2]=e.z??0,t==null||(t.type===`2d`?r[2]=0:r[2]=g(t,e,n,h)??0),r}function D(e,t,n){return n?(f(n,e[0],e[1],e[2],t),n):d(e[0],e[1],e[2],t)}function O(e,t,{z:n,m:r},i,a){let{spatialReference:o,elevationInfo:s}=i,c;c=n==null&&r==null?void 0:t==null||t.type===`2d`?n??void 0:p(t,e,o,h,s)??0;let[l,u]=e;return a?f(a,l,u,c,o):a=d(l,u,c,o),r!=null&&(a.m=r,a.hasM=!0),a}function k(e,t,n,r,i=v()){let[a,o]=e;return i[0]=a,i[1]=o,e.length>3&&(i[3]=e[3]??0),n?.type===`3d`?(i[2]=m(n,a,o,t.value,r,t.elevationInfo,h)??0,i):(i[2]=t.value,i)}var A=d(0,0,0,null);function j(e,t){return e[0]*t[1]-e[1]*t[0]}function M(t,r,i){let a=o(i,r)/e(i);return n(t,i,a)}function N(e,t,n,r,i=n){return s(R,r,n),s(B,t,i),M(V,B,R),l(e,i,V)}function P(e,n,i,a){s(R,n,i);let o=a/t(R);return r(e,i,R,o)}function F(e,t){let n=e.start,i=e.end,a=t.start,o=t.end,c=s(R,i,n),l=s(z,o,a),u=j(c,l);if(Math.abs(u)<=L)return[];let d=s(B,n,a),f=j(l,d)/u,p=j(c,d)/u;if(f>=0){if(p>=0||t.type===1)return[r(V,n,c,f)]}else if(e.type===1&&(p>=0||t.type===1))return[r(V,n,c,f)];return[]}function I(t,n,i){let a=[],c=s(R,t.end,t.start),l=s(z,t.start,n),u=e(c),d=2*o(c,l),f=d*d-4*u*(e(l)-i*i);if(f===0){let e=-d/(2*u);(t.type===1||e>=0)&&a.push(r(V,t.start,c,e))}else if(f>0){let e=Math.sqrt(f),n=(-d+e)/(2*u);(t.type===1||n>=0)&&a.push(r(V,t.start,c,n));let i=(-d-e)/(2*u);(t.type===1||i>=0)&&a.push(r(B,t.start,c,i))}return a}var L=1e-6,R=i(),z=i(),B=i(),V=i(),H=class{constructor(e,t){this.isDraped=e,this.domain=t}},U=class e extends H{constructor(e,t,n,r,i=3,a=!0,o=!0){super(r,i),this.type=e,this.lineStart=t,this.lineEnd=n,this.fadeLeft=a,this.fadeRight=o}equals(t){return t instanceof e&&this.type===t.type&&a(this.lineStart,t.lineStart)&&a(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return u(this.lineStart,this.lineEnd)}};export{b as _,I as a,x as c,v as d,O as f,C as g,T as h,P as i,y as l,_ as m,H as n,N as o,E as p,F as r,k as s,U as t,S as u,w as v,D as y};