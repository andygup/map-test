import{H as e,Hr as t,OT as n,Qf as r,ba as i,ev as a,gD as o,ha as s,iv as c,nv as l,xa as u}from"./index-CzMixifc.js";import"./memoryEstimations-C3WUBUZI.js";import"./OptimizedGeometry-5fDazGe-.js";import"./OptimizedFeatureSet-D4F9ObY_.js";import"./featureConversionUtils-VvJ2pauf.js";import"./streamLayerUtils-82UmlW-3.js";import"./QueueProcessor-CbN5H2eO.js";import"./earcut-CsNwSYFA.js";import"./layerViewUtils-Cbrog-dU.js";import"./colorUtils-Btp0B-0Y.js";import"./timeSupport-CjNpK2fD.js";import"./queryUtils-fxq7u50x.js";import"./quantizationUtils-CzrQVcZ1.js";import"./normalizeUtilsSync-DZGX2pCO.js";import"./GeometryUtils-C6BJBMi9.js";import"./VertexAttributeLocations-DOYYzMyn.js";import"./VertexElementDescriptor-C9CNG143.js";import"./labelPoint-D95l1mBc.js";import"./callExpressionWithCursor-NwM51lOx.js";import"./FeatureMetadata-DVsh91f_.js";import"./CIMSymbolHelper-CIzDgFQE.js";import"./rasterizingUtils-L-rXtdWe.js";import"./Rect-BMNJQxpm.js";import"./BoundingBox-CW0_Ka-z.js";import"./BidiEngine-CpIovbIK.js";import"./callExpressionWithFeature-jAwzgzDm.js";import"./OverrideHelper-Catw08-A.js";import"./FeatureCommandQueue-Ccv3I5Xd.js";import"./config-BY05DP3l.js";import"./dehydratedFeatureComparison-DeSHk9xR.js";import"./WGLContainer-v9ak9x06.js";import"./utils-CPFnbOXo.js";import"./ProgramTemplate-DXigF9DQ.js";import"./VertexArrayObject-BCHCoUBc.js";import"./BufferObject-DizvMSTk.js";import"./VertexBuffer-Dhf7DMaS.js";import"./vec3f32-BWuLbfSR.js";import"./Container-s63aPbsG.js";import"./GraphShaderModule-KXpa7jQA.js";import"./FramebufferObject-E0PFfPHi.js";import"./ShaderBuilder-Dbc4jYz7.js";import{t as d}from"./LayerView2D-BLVA9W76.js";import{t as f}from"./LayerView-BKgBHcbR.js";import"./UpdateTracking2D-BQFl9U6T.js";import"./TechniqueInstance-B2WffE-f.js";import"./TileContainer-CdHqIsYl.js";import"./constants-TfCITEY_.js";import"./utils-Cp6QQbUU.js";import"./AGraphicContainer-DjhIZWU6.js";import{t as p}from"./GraphicContainer-C207Aol3.js";import"./ComputedAttributeStorage-D3juJH-7.js";import{t as m}from"./GraphicsView2D-y5Ereu1j.js";import"./dehydratedFeatures-Db6Q9NQd.js";var h=Symbol(`isGeoRSSGraphicOrigin`),g,_=class extends i{get[(g=h,u)](){return this.layer}constructor(e){super(),this[g]=!0,this.type=`geo-rss`,this.layer=e}get id(){return this.layer.id}},v=class extends d(f){constructor(){super(...arguments),this._graphicsViewMap={},this.graphicsViews=[]}async hitTest(e,t){if(!this.graphicsViews.length)return null;let n=this.layer;return this.graphicsViews.reverse().flatMap(t=>t.hitTest(e)).map(t=>({type:`graphic`,graphic:t,layer:n,mapPoint:e}))}update(e){if(this.graphicsViews)for(let t of this.graphicsViews)t.processUpdate(e)}attach(){this.addAttachHandles([l(()=>this.layer?.featureCollections,t=>{this._clear();let{layer:n}=this,i=new _(this.layer);for(let{popupInfo:a,featureSet:o,layerDefinition:l}of t){let t=s.fromJSON(o),u=new c(t.features),d=a?r.fromJSON(a):null;u.forEach(e=>{e.layer=n,e.sourceLayer=n,e.popupTemplate=d,e.origin=i});let f=l.drawingInfo,h=e(f.renderer),g=new m({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:u,renderer:h,container:new p(this.view.featuresTilingScheme)});this._graphicsViewMap[t.geometryType]=g,t.geometryType!==`polygon`||this.layer.polygonSymbol?t.geometryType!==`polyline`||this.layer.lineSymbol?t.geometryType!==`point`||this.layer.pointSymbol||(this.layer.pointSymbol=h.symbol):this.layer.lineSymbol=h.symbol:this.layer.polygonSymbol=h.symbol,this.graphicsViews.push(g),this.container.addChild(g.container)}},a),l(()=>this.layer?.polygonSymbol,e=>{this._graphicsViewMap.polygon.renderer=new t({symbol:e})},a),l(()=>this.layer?.lineSymbol,e=>{this._graphicsViewMap.polyline.renderer=new t({symbol:e})},a),l(()=>this.layer?.pointSymbol,e=>{this._graphicsViewMap.point.renderer=new t({symbol:e})},a)])}detach(){this._clear()}moveEnd(){}viewChange(){for(let e of this.graphicsViews)e.viewChange()}_clear(){this.container.removeAllChildren();for(let e of this.graphicsViews)e.destroy();this._graphicsViewMap={},this.graphicsViews.length=0}};v=o([n(`esri.views.2d.layers.GeoRSSLayerView2D`)],v);var y=v;export{y as default};