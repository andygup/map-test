const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/calcite-button-CF-wLuVl.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css","assets/controllers-Cmbr8Uab.js","assets/useSetFocus-BrI7c0jD.js","assets/dom-Bpg08XkK.js","assets/form-lIz1QVng.js","assets/guid-DXI_j_tE.js","assets/interactive-DmKyCklX.js","assets/label-CqUqf6rY.js","assets/logger-1v_TMxSk.js","assets/observers-CUqeLQzx.js","assets/useT9n-DZyTN8nl.js","assets/calcite-icon-D_31OgfB.js","assets/calcite-loader-woZHFNIn.js","assets/static-Cg6ZlIUu.js","assets/calcite-icon-ZCv5ZmNZ.js","assets/calcite-input-DCgS-mn_.js","assets/calcite-input-CnRnt-tx.js","assets/key-B8qHARd6.js","assets/keyed-kzgDmr9j.js","assets/calcite-input-message-DWA0a61n.js","assets/calcite-input-message-CjMAsxW7.js","assets/calcite-dropdown-CwMhZUiP.js","assets/dynamicClasses-rPflUtDl.js","assets/floating-ui-BsOg9dhd.js","assets/debounce-lAdGmXcC.js","assets/openCloseComponent-D7k9ypaE.js","assets/calcite-dropdown-D8cqVK7j.js","assets/calcite-dropdown-item-fYZFrXXD.js","assets/resources7-DDltrXrR.js","assets/calcite-dropdown-item-CFMjCXhP.js","assets/calcite-dropdown-group-DtuPwwtt.js","assets/calcite-dropdown-group-B9uHF3Ku.js"])))=>i.map(i=>d[i]);
import{$S as e,$T as t,Aw as n,BT as r,Bo as i,C_ as a,Eg as o,Ex as s,GS as c,HS as l,Hw as u,Io as d,JS as f,Jl as ee,Kl as p,LS as m,Lo as h,Lx as g,M_ as _,Nl as te,No as v,P_ as y,Ro as b,Sg as ne,Uw as re,Ux as ie,VT as x,WS as ae,Wx as oe,Xa as S,Yx as se,Za as ce,bb as C,cv as le,dT as ue,dg as de,dv as fe,dw as w,iS as pe,iT as me,jT as he,jx as ge,kD as T,lE as _e,ld as E,m_ as ve,mv as ye,pT as be,p_ as xe,pv as D,qS as Se,rE as Ce,sg as we,sw as Te,uv as Ee,vT as O,vl as De,vv as Oe,wg as ke,xy as Ae,y_ as je,zy as Me}from"./index-BN8X5Ryz.js";import{t as Ne}from"./MeshTransform-BaPjlQwH.js";import{a as Pe}from"./meshVertexSpaceUtils-s2jLb8qI.js";import{t as Fe}from"./memoize-Dl61_jt0.js";import{t as Ie}from"./getDefaultUnitForView-DyZIV1hK.js";import{d as Le,o as k,r as Re,u as ze}from"./quantity-Co6flzuS.js";import{l as Be}from"./unitFormatUtils-DIX5VDC2.js";import{a as Ve,i as A,n as He,o as Ue,r as We,t as Ge}from"./quantityFormatUtils-DorrZj0i.js";import{i as Ke,r as j}from"./angularMeasurementUtils-DQYnovl-.js";function M(){return Se()}function qe(){return l()}function N(e,t){let n=Xe(t),r=e.replaceAll(/[\u00B0\u00BA]/g,`^`).replaceAll(`′`,`'`).replaceAll(`″`,`"`),i=[];return c.dmsToGeog(n,1,[r],i)?new s(i[0][0],i[0][1],t||g.WGS84):null}function Je(e){return e&&M()?y(e)??N(`0° 0' 0" N | ${e}`)?.longitude??N(`0 N | ${e}`)?.longitude??null:null}function Ye(e){return e&&M()?y(e)??N(`${e} | 0° 0' 0" E`)?.latitude??N(`${e} | 0 E`)?.latitude??null:null}function Xe(e){if(e??=g.WGS84,e.wkid){let n=ae.geogcs(e.wkid);if(!n)throw new t(`coordinate-formatter:invalid-spatial-reference`,`wkid is not valid`);return n}let n=e.wkt2??e.wkt;if(n){let e=ae.fromString(f.PE_TYPE_GEOGCS,n);if(!e)throw new t(`coordinate-formatter:invalid-spatial-reference`,`wkt is not valid`);return e}throw new t(`coordinate-formatter:invalid-spatial-reference`,`wkid and wkt are missing`)}var P=`esri-tooltip`,Ze=`${P}-content`,Qe=`${P}-content--input`,$e=`${P}-content__header`,et=`${P}-content__header__spacer`,tt=`${P}-content__header__actions`,nt=`${P}-draw-header-actions`,rt=`${P}-table`,it=`${P}-help-message`,at=`${P}-help-message__text`,ot=`${P}-help-message__icon`,F=`${P}-field`,I={base:F,inputMode:`${F}--input`,title:`${F}__title`,value:`${F}__value`},L=class extends S{constructor(){super(...arguments),this.hidden=!1,this.mode=`feedback`}render(){return b(`div`,{class:this.classes({[I.base]:!0,[I.inputMode]:this.mode===`input`})},b(`div`,{class:I.title,key:`title`},this.title),b(`div`,{class:I.value,key:`value`},this.value))}};T([r()],L.prototype,`hidden`,void 0),T([r()],L.prototype,`mode`,void 0),T([r()],L.prototype,`title`,void 0),T([r()],L.prototype,`value`,void 0),L=T([x(`esri.views.interactive.tooltip.components.TooltipField`)],L);var st={base:`${P}-value-by-value`},R=class extends S{constructor(){super(...arguments),this.divider=`×`}render(){return b(`div`,{class:st.base},b(`span`,null,this.left),b(`span`,null,this.divider),b(`span`,null,this.right))}};T([r()],R.prototype,`left`,void 0),T([r()],R.prototype,`divider`,void 0),T([r()],R.prototype,`right`,void 0),R=T([x(`esri.views.interactive.tooltip.components.ValueByValue`)],R);var z=1,ct=6;function lt(e,t){return{angleRelative:ut,direction:dt,directionRelative:ft,directionRelativeBilateral:pt,latitudeDecimalDegrees:ht,longitudeDecimalDegrees:mt,area:(n,r)=>We(e,n,r??t.area),length:(n,r,i)=>Ve(e,n,r??t.length,i),lengthRelative:(n,r)=>Ue(e,n,r??t.length),totalLength:(n,r)=>Ve(e,n,r??t.length),verticalLength:(n,r)=>Ge(e,n,r??t.verticalLength),verticalLengthRelative:(n,r)=>He(e,n,r??t.verticalLength),percentage:bt,scalar:St,scale:xt}}function ut(e){return _(e,{signDisplay:`exceptZero`,...B(z)})}function dt(e){return A(e,e.rotationType,z)}function ft(e){let t=j(e);return _(t,{style:`unit`,unitDisplay:`narrow`,unit:`degree`,signDisplay:t>0?`never`:`exceptZero`,...B(z)})}function pt(e){return A(e,e.rotationType,z)}function mt(e){return vt(e,Nt)}function ht(e){return vt(e,Pt)}function gt(e){return yt(e,Nt)}function _t(e){return yt(e,Pt)}function vt(e,t){return A(ze(e,`degrees`),`geographic`,ct,t,!1)}function yt(e,t){let n=t.normalize(ze(e,`degrees`).value,void 0,!1);return St(k(n),ct)}function bt(e){return _(e.value,{style:`percent`})}function xt(e){return _(e,{style:`percent`,maximumFractionDigits:0})}function St(e,t){return _(e.value,B(t))}function B(e){return{minimumFractionDigits:e,maximumFractionDigits:e}}function Ct({createQuantity:e,sanitize:t}){return(n,r)=>{if(n==null)return null;t&&(n=t(n));let i=y(n);return i==null?null:e(i,r)}}function wt(e){return e.replaceAll(/[*^~°º]/g,``)}var Tt=e=>{let t=`[-+]?[0-9${e.thousands}]+`;return e.decimal!==``&&(t+=`${e.decimal}[0-9]+`),RegExp(`^(${t}\\s*)${e.separator}(\\s*${t})$`,`i`)},Et=` `,Dt=[];for(let e of[`,`,`\\|`,`\\s+`])for(let t of[`\\.`,`,`,``])for(let n of[``,`,`,`\\.`,Et,`\\s+`])e!==t&&e!==n&&t!==n&&Dt.push({separator:e,decimal:t,thousands:n,pattern:Tt({decimal:t,thousands:n,separator:e})});function Ot(e){for(let{decimal:t,thousands:n,pattern:r}of Dt){r.lastIndex=0;let i=e.match(r);if(!i)continue;let a=y(kt(i[1],t,n)),o=y(kt(i[2],t,n));if(a!=null&&o!=null)return{x:k(a),y:k(o)}}return null}function kt(e,t,n){let r=e.replaceAll(/[\s+]/g,``);return n!==``&&(r=r.replaceAll(n,``)),t!==``&&(r=r.replaceAll(t,`.`)),r}function At(e){if(!e||y(e)!=null||!M())return null;let t=N(e),n=V(t?.latitude),r=V(t?.longitude);return r!=null&&n!=null?{latitude:n,longitude:r}:null}function jt(e){return V(Je(e))}function Mt(e){return V(Ye(e))}function V(e){return e==null?null:Re(e,`degrees`,`geographic`)}var Nt=new Te(-180,180),Pt=new Te(-90,90),Ft=Symbol(`dragHandles`),H=class extends S{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode=`feedback`,this._getFormatters=Fe(lt),this._onHeaderPointerDown=e=>{let t=e.target;t instanceof HTMLElement&&t?.tagName?.toLowerCase()!==`calcite-button`&&(this.removeHandles(Ft),e.preventDefault(),e.stopPropagation(),t.setPointerCapture(e.pointerId),this.tooltip.onDragStart(e.clientX,e.clientY),this.addHandles([O(t,`pointermove`,({clientX:e,clientY:t})=>{this.tooltip.onDrag(e,t)}),O(t,[`pointerup`,`pointercancel`],n=>{this.removeHandles(Ft),t.releasePointerCapture(e.pointerId),this.tooltip.onDragEnd()}),O(t,`touchstart`,e=>e.preventDefault())],Ft))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit(`discard`),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(e,t)=>{if(this.destroyed)return;if(this.tooltip.emit(`commit`,{type:t}),t===`commit-and-exit`)return void this.exitInputMode();if(t===`commit-on-blur`)return;let n=this._getFocusableElements(),r=n.length,i=n.indexOf(e);if(i===-1)return void this.exitInputMode();let a=((i+(t===`commit-and-next`?1:-1))%r+r)%r;U(n.at(a))},this._onKeyDown=e=>{switch(e.code){case E.next:return this._onNextKey(e);case E.discard:return e.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){let{displayUnits:e}=this.info.sketchOptions.values,t=Ie(this.tooltip.view);return{length:e.length??t,verticalLength:e.verticalLength??t,area:e.area??t}}get _inputUnitInfos(){let e=this._messagesUnits,t=t=>({unit:t,abbreviation:Be(e,t,`abbr`)}),{inputUnits:n}=this.info.sketchOptions.values,r=Ie(this.tooltip.view),i=n.length??r,a=n.verticalLength??r,o=n.area??r;return{length:t(ie(i)),verticalLength:t(se(a)),area:t(oe(o)),angle:t(`degrees`)}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){let{visibleElements:e}=this.info.sketchOptions.tooltips,t=this._renderedContent,n=this._renderedActions,r=this._renderedHelpMessage,i=t.length>0,a=i||!!r,o=this.mode===`input`;return b(`div`,{class:d(Ze,o&&Qe),onkeydown:this._onKeyDown,tabIndex:-1},o&&a&&e.header?b(`div`,{class:$e,"data-testid":`tooltip-header`,key:`header`,onpointerdown:this._onHeaderPointerDown},b(`calcite-button`,{appearance:`transparent`,"data-testid":`tooltip-back-button`,iconFlipRtl:`both`,iconStart:`chevron-left`,key:`discard-button`,kind:`neutral`,onclick:this._onDiscard,scale:`s`,tabIndex:-1}),n.length>0?b(v,null,b(`div`,{class:et,key:`spacer`}),b(`div`,{class:tt,key:`actions`},n)):null):null,i?b(`div`,{class:rt,key:`content`},...t):null,r)}destroy(){this._focusAbortController.abort(),this._transitionInfo?.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return ce({button:()=>e(()=>import(`./calcite-button-CF-wLuVl.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),icon:()=>e(()=>import(`./calcite-icon-ZCv5ZmNZ.js`),__vite__mapDeps([16,5,7,10,1,2,11,13])),input:()=>e(()=>import(`./calcite-input-DCgS-mn_.js`),__vite__mapDeps([17,3,1,2,18,4,5,6,8,19,9,12,20,15,7,10,11,13,21]))})}async enterInputMode(e,t){try{await this._transitionTo(`input`,t),await this._focusField(e)}catch(e){ue(e)}}async exitInputMode({focusOnView:e=!0}={}){try{let{container:t,info:n}=this;n.clearInputValues();let r=e?t?.closest(`.esri-view`)?.querySelector(`.esri-view-surface`):null;await this._transitionTo(`feedback`),r instanceof HTMLElement&&r.focus()}catch(e){ue(e)}}_onNextKey(e){let t=this._getFocusableElements(),n=t.at(0),r=t.at(-1);n&&r&&(e.shiftKey?document.activeElement===n&&(e.preventDefault(),e.stopPropagation(),U(r)):document.activeElement===r&&(e.preventDefault(),e.stopPropagation(),U(n)))}get _renderedContent(){return It(this._renderContent())}get _renderedActions(){return It(this._renderActions())}get _renderedHelpMessage(){let{sketchOptions:e,visibleElements:t}=this.info;if(!t.helpMessage)return null;let n=e.tooltips.helpMessage??this._defaultHelpMessage;if(!n)return null;let r=e.tooltips.helpMessageIcon??`information`;return b(`div`,{class:it,key:`help-message`},r?b(`calcite-icon`,{class:ot,icon:r,scale:`s`}):null,b(`div`,{class:at},n))}get _defaultHelpMessage(){let{helpMessage:e,viewType:t}=this.info;if(e==null)return null;let n=t===`3d`?`helpMessages3d`:`helpMessages2d`;return this._messagesTooltip?.sketch?.[n]?.[e]}async _focusField(e){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;let{signal:t}=this._focusAbortController;await this._waitForInputs(),be(t);let n=this._getFocusableInputs(),r=e?n.find(t=>t.getAttribute(`data-field-name`)===e):n.at(0);await U(r)}async _transitionTo(e,t){if(this._mode===e&&!this._transitionInfo)return;if(this._transitionInfo?.mode===e)return this._transitionInfo.transition.finished;this._transitionInfo?.transition.skipTransition();let n=async()=>{this.destroyed||(this._mode=e,await re(),this.destroyed||(this.renderNow(),await re(),this.destroyed||t?.()))};if(!this.domNode?.firstChild||!document.startViewTransition||ee())return void await n();this.autoRenderingEnabled=!1;let r=this._transitionInfo={transition:document.startViewTransition(async()=>{this.destroyed||r!==this._transitionInfo||(this.autoRenderingEnabled=!0,await n())}),mode:e};try{await r.transition.finished}finally{r===this._transitionInfo&&(this._transitionInfo=null)}}async _waitForInputs(){let e=()=>Array.from(this.domNode?.querySelectorAll(`calcite-input`)??[]);for(;e().length===0;)await me(Lt);await u()}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll(`calcite-input:not([read-only]):not([disabled])`)??[])}_getFocusableElements(){let e=this.domNode?.querySelector(`.${nt}`);return[...Array.from(e?.querySelectorAll(`.${tt} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};async function U(e){await e?.setFocus()}function It(e){return(Array.isArray(e)?e:[e]).flat(10).filter(e=>!!e)}T([h(`esri/core/t9n/Units`),r()],H.prototype,`_messagesUnits`,void 0),T([h(`esri/views/interactive/tooltip/t9n/Tooltip`),r()],H.prototype,`_messagesTooltip`,void 0),T([r()],H.prototype,`info`,void 0),T([r()],H.prototype,`tooltip`,void 0),T([r()],H.prototype,`_mode`,void 0),T([r()],H.prototype,`mode`,null),T([r()],H.prototype,`_displayUnits`,null),T([r()],H.prototype,`_inputUnitInfos`,null),T([r()],H.prototype,`_formatters`,null),T([r()],H.prototype,`fieldContext`,null),T([r()],H.prototype,`_renderedContent`,null),T([r()],H.prototype,`_renderedActions`,null),T([r()],H.prototype,`_renderedHelpMessage`,null),T([r()],H.prototype,`_defaultHelpMessage`,null),H=T([x(`esri.views.interactive.tooltip.content.TooltipContent`)],H);var Lt=20,Rt=class extends H{_renderContent(){let{area:e,radius:t,xSize:n,ySize:r,visibleElements:i}=this.info,a=this._messagesTooltip.sketch,o=this._formatters;return b(v,null,i.radius&&t!=null?b(L,{title:a.radius,value:o.length(t)}):null,i.size&&n!=null&&r!=null?b(L,{title:a.size,value:b(R,{left:o.length(n),right:o.length(r)})}):null,i.area?b(L,{title:a.area,value:o.area(e)}):null)}};Rt=T([x(`esri.views.interactive.tooltip.content.TooltipContentDrawCircle`)],Rt);var W=`${P}-editable-field`,G={base:W,inputMode:`${W}--input`,feedbackMode:`${W}--feedback`,readOnly:`${W}--read-only`,locked:`${W}--locked`,title:`${W}__title`,value:`${W}__value`,valueContent:`${W}__value__content`,valueContentReadOnly:`${W}__value__content--read-only`,lockIcon:`${W}__lock-icon`,input:`${W}__input`,inputWrapper:`${W}__input-wrapper`,inputMessage:`${W}__input-message`,inputSuffix:`${W}__input-suffix`,button:`${W}__button`},zt={lock:`lock`,unlock:`unlock`},K=class extends S{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=e=>{this._lock=e},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=e=>{e.key===E.discard&&this.mode===`input`&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=e=>{let t=this._input;if(t)switch(e.key){case E.commit:return this.field.onCommit(`commit-and-exit`,t,this.context);case E.next:{e.preventDefault(),e.stopPropagation();let n=e.shiftKey?`commit-and-previous`:`commit-and-next`;return this.field.onCommit(n,t,this.context)}}},this._onInput=e=>{this.field.onInput(e.currentTarget.value)},this._onInputBlur=e=>{let t=this._input;t&&e.relatedTarget!==this._lock&&this.field.onCommit(`commit-on-blur`,t,this.context)},this._selectText=()=>{let e=()=>{this._input===document.activeElement&&this._input?.selectText()};e(),u().then(e)},this._onAfterCreate=e=>{this._input=e,e.addEventListener(`paste`,this._onPaste),e.addEventListener(`beforeinput`,this._onBeforeInput)},this._onAfterRemoved=e=>{e.removeEventListener(`paste`,this._onPaste),e.removeEventListener(`beforeinput`,this._onBeforeInput)},this._onPaste=e=>{let t=e.clipboardData?.getData(`text`);t&&this.field.parse(t,this.context)!=null&&(e.stopPropagation(),this.field.onInput(t))},this._onBeforeInput=e=>{(e.inputType===`historyUndo`||e.inputType===`historyRedo`)&&!this.field.dirty&&e.preventDefault()}}initialize(){this.addHandles(D(()=>this._rawDisplayValue,()=>{let{committed:e,inputValue:t}=this.field;e||t||this._input!==document.activeElement||this._selectText()}))}loadDependencies(){return ce({button:()=>e(()=>import(`./calcite-button-CF-wLuVl.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),icon:()=>e(()=>import(`./calcite-icon-ZCv5ZmNZ.js`),__vite__mapDeps([16,5,7,10,1,2,11,13])),input:()=>e(()=>import(`./calcite-input-DCgS-mn_.js`),__vite__mapDeps([17,3,1,2,18,4,5,6,8,19,9,12,20,15,7,10,11,13,21])),"input-message":()=>e(()=>import(`./calcite-input-message-CjMAsxW7.js`),__vite__mapDeps([22,5,7,10,1,2,11,13,21]))})}render(){let{field:e,mode:t}=this,n=t===`input`,{locked:r,readOnly:i}=e;return b(`div`,{class:this.classes({[G.base]:!0,[G.feedbackMode]:t===`feedback`,[G.inputMode]:t===`input`,[G.locked]:r,[G.readOnly]:i})},b(`div`,{class:G.title,key:`title`},this._title),b(`div`,{class:G.value,key:`value`,onkeydown:this._onKeyDown},n?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||Bt}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){let{title:e}=this.field;return typeof e==`string`?e:e(this.context)}get _messages(){return this.context?.messages.sketch??{}}_renderValueFeedbackMode(){return b(v,null,b(`div`,{class:G.valueContent,key:`value-feedback`},this._formattedValue),this.field.locked&&this.mode!==`input`?b(`calcite-icon`,{class:G.lockIcon,icon:zt.lock,key:`icon`,scale:`s`}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return b(`div`,{class:this.classes(G.valueContent,G.valueContentReadOnly),key:`value-read-only`},this._formattedValue)}_renderValueWritable(){let{field:e}=this,t=this._messages,{name:n,invalid:r}=e;return b(v,null,b(`div`,{class:G.inputWrapper,key:`value-input`},b(`calcite-input`,{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:G.input,"data-field-name":n,"data-testid":`tooltip-field-${n}`,key:`input`,onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:`s`,status:r?`invalid`:`idle`,type:`text`,value:this._rawDisplayValue??Bt,onCalciteInputInput:this._onInput}),r?b(`calcite-input-message`,{class:G.inputMessage,scale:`s`,status:`invalid`},t.invalidValue):null),b(`div`,{class:G.inputSuffix,key:`suffix`},this._suffix),this._renderedLockButton)}get _renderedLockButton(){let{disabled:e,locked:t,lockable:n,name:r}=this.field;if(!n)return b(`div`,{key:`no-lock-button`});let i=this._messages,a=t?i.unlockConstraint:i.lockConstraint;return b(`calcite-button`,{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:`center`,appearance:`transparent`,class:G.button,"data-testid":`tooltip-field-${r}-lock`,disabled:e,iconStart:t?zt.lock:zt.unlock,key:`lock-button`,kind:`neutral`,label:a,onclick:this._onLockClick,scale:`s`,tabIndex:-1,title:a})}};T([r()],K.prototype,`field`,void 0),T([r()],K.prototype,`context`,void 0),T([r()],K.prototype,`mode`,void 0),T([r()],K.prototype,`_input`,void 0),T([r()],K.prototype,`_lock`,void 0),T([r()],K.prototype,`_formattedValue`,null),T([r()],K.prototype,`_rawDisplayValue`,null),T([r()],K.prototype,`_suffix`,null),T([r()],K.prototype,`_title`,null),T([r()],K.prototype,`_messages`,null),T([r()],K.prototype,`_renderedLockButton`,null),K=T([x(`esri.views.interactive.tooltip.components.TooltipEditableField`)],K);var Bt=`—`;function q(e){let t=e.fields.filter(e=>!0===e?.visible);return t.length===0?null:b(v,null,t.map(t=>b(K,{context:e.context,field:t,key:t.id,mode:e.mode})))}var Vt=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0,r.elevation?t.elevation:void 0,r.orientation?t.orientation:void 0,r.scale?t.scale:void 0],mode:n})}};Vt=T([x(`esri.views.interactive.tooltip.content.TooltipContentDrawMesh`)],Vt);var Ht=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{elevation:r,visibleElements:i}=t;return b(q,{context:e,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?r:void 0],mode:n})}};Ht=T([x(`esri.views.interactive.tooltip.content.TooltipContentDrawPoint`)],Ht);var Ut={absolute:`absolute-direction`,relative:`relative-direction`},J=class extends S{constructor(e){super(e),this.visibleElements={}}render(){return b(`div`,{class:nt},this._isElementVisible(`direction`)?b(Wt,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return ce({button:()=>e(()=>import(`./calcite-button-CF-wLuVl.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),dropdown:()=>e(()=>import(`./calcite-dropdown-CwMhZUiP.js`),__vite__mapDeps([23,3,1,2,4,5,24,25,26,7,8,19,10,11,27,28])),"dropdown-item":()=>e(()=>import(`./calcite-dropdown-item-fYZFrXXD.js`),__vite__mapDeps([29,3,1,2,4,5,7,8,10,11,30,31,13])),"dropdown-group":()=>e(()=>import(`./calcite-dropdown-group-DtuPwwtt.js`),__vite__mapDeps([32,11,1,2,30,33]))})}_isElementVisible(e){return this.visibleElements?.[e]??this.sketchOptions.tooltips.visibleElements[e]}};function Wt(e){let{directionMode:t}=e.sketchOptions.values,n=e.messages?.sketch,r=n?.directionModeSelect?.title,i=`absolute`,a=`relative`;return b(`calcite-dropdown`,{key:`direction-mode`,placement:`bottom-end`,scale:`s`,widthScale:`s`,onCalciteDropdownSelect:t=>{let n=t.currentTarget.selectedItems?.[0]?.getAttribute(`data-mode`);e.sketchOptions.values.directionMode=n??`absolute`}},b(`calcite-button`,{alignment:`end`,appearance:`transparent`,iconStart:Ut[t],kind:`neutral`,label:r,scale:`s`,slot:`trigger`,title:r}),b(`calcite-dropdown-group`,{selectionMode:`single`},b(`calcite-dropdown-item`,{"data-mode":a,"data-testid":`tooltip-direction-mode-relative`,iconStart:Ut.relative,key:`relative`,selected:t===a},n?.directionModeSelect?.relative),b(`calcite-dropdown-item`,{"data-mode":i,"data-testid":`tooltip-direction-mode-absolute`,iconStart:Ut.absolute,key:`absolute`,selected:t===i},n?.directionModeSelect?.absolute)))}T([h(`esri/views/interactive/tooltip/t9n/Tooltip`),r()],J.prototype,`messages`,void 0),T([r()],J.prototype,`sketchOptions`,void 0),T([r()],J.prototype,`visibleElements`,void 0),J=T([x(`esri.views.interactive.tooltip.components.DrawHeaderActions`)],J);var Gt=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{xyMode:r,visibleElements:i}=t;return b(q,{context:e,fields:[...r===`direction-distance`?[i.direction?t.direction:void 0,i.distance?t.distance:void 0]:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0],i.elevation?t.elevation:void 0,i.area?t.area:void 0],mode:n})}_renderActions(){let{xyMode:e,sketchOptions:t}=this.info;return b(J,{sketchOptions:t,visibleElements:{direction:e===`direction-distance`}})}};Gt=T([x(`esri.views.interactive.tooltip.content.TooltipContentDrawPolygon`)],Gt);var Kt=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{xyMode:r,visibleElements:i}=t;return b(q,{context:e,fields:[...r===`direction-distance`?[i.direction?t.direction:void 0,i.distance?t.distance:void 0]:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0],i.elevation?t.elevation:void 0,i.totalLength?t.totalLength:void 0],mode:n})}_renderActions(){let{xyMode:e,sketchOptions:t}=this.info;return b(J,{sketchOptions:t,visibleElements:{direction:e===`direction-distance`}})}};Kt=T([x(`esri.views.interactive.tooltip.content.TooltipContentDrawPolyline`)],Kt);var qt=class extends H{_renderContent(){let{area:e,xSize:t,ySize:n,visibleElements:r}=this.info,i=this._messagesTooltip.sketch,a=this._formatters;return b(v,null,r.size&&t!=null&&n!=null?b(L,{title:i.size,value:b(R,{left:a.length(t),right:a.length(n)})}):null,r.area?b(L,{title:i.area,value:a.area(e)}):null)}};qt=T([x(`esri.views.interactive.tooltip.content.TooltipContentDrawRectangle`)],qt);var Jt=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this;return b(q,{context:e,fields:t.allFields,mode:n})}_renderActions(){let{xyMode:e,sketchOptions:t}=this.info,n=this.info.allFields.some(e=>e.name===`direction`);return b(J,{sketchOptions:t,visibleElements:{direction:e===`direction-distance`&&n}})}};Jt=T([x(`esri.views.interactive.tooltip.content.TooltipContentDynamic`)],Jt);var Yt=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.elevation?t.elevation:void 0],mode:n})}};Yt=T([x(`esri.views.interactive.tooltip.content.TooltipContentElevation`)],Yt);var Xt=class extends H{_renderContent(){let{angle:e,visibleElements:t}=this.info,n=this._messagesTooltip.sketch;return b(v,null,t.rotation?b(L,{title:n.rotation,value:this._formatters.angleRelative(e)}):null)}};Xt=T([x(`esri.views.interactive.tooltip.content.TooltipContentExtentRotate`)],Xt);var Zt=class extends H{_renderContent(){let e=this.info,{visibleElements:t}=e,n=this._messagesTooltip.sketch,r=this._formatters;return b(v,null,t.size?b(L,{title:n.size,value:b(R,{left:r.length(e.xSize),right:r.length(e.ySize)})}):null,t.scale?b(L,{title:n.scale,value:b(R,{left:r.scale(e.xScale),right:r.scale(e.yScale)})}):null)}};Zt=T([x(`esri.views.interactive.tooltip.content.TooltipContentExtentScale`)],Zt);var Qt=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0,r.elevation?t.elevation:void 0],mode:n})}};Qt=T([x(`esri.views.interactive.tooltip.content.TooltipContentMovePoint`)],Qt);var $t=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.distance?t.distance:void 0,r.area?t.area:void 0,r.totalLength?t.totalLength:void 0],mode:n})}};$t=T([x(`esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset`)],$t);var en=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0,r.elevation?t.elevation:void 0,r.area&&t.geometryType===`polygon`?t.area:null,r.totalLength&&t.geometryType===`polyline`?t.totalLength:null],mode:n})}};en=T([x(`esri.views.interactive.tooltip.content.TooltipContentSelectedVertex`)],en);var tn=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0,r.elevation?t.elevation:void 0,r.orientation?t.orientation:void 0,r.scale?t.scale:void 0],mode:n})}};tn=T([x(`esri.views.interactive.tooltip.content.TooltipContentTransformMesh`)],tn);var nn=class extends H{_renderContent(){let{fieldContext:e,info:t,mode:n}=this,{visibleElements:r}=t;return b(q,{context:e,fields:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0,r.elevation?t.elevation:void 0,r.orientation?t.orientation:void 0,r.size?t.size:void 0],mode:n})}};nn=T([x(`esri.views.interactive.tooltip.content.TooltipContentTransformPoint`)],nn);var rn=class extends H{_renderContent(){let{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch,r=this._formatters;return b(v,null,t.distance?b(L,{title:n.distance,value:r.length(e.distance)}):null)}};rn=T([x(`esri.views.interactive.tooltip.content.TooltipContentTranslate`)],rn);var an=class extends H{_renderContent(){let{distance:e,elevation:t,area:n,totalLength:r,visibleElements:i}=this.info,a=this._messagesTooltip.sketch,o=this._formatters;return b(v,null,i.distance?b(L,{title:a.distance,value:o.length(e)}):null,i.elevation&&t?.actual!=null?b(L,{title:a.elevation,value:o.verticalLength(t.actual)}):null,i.area&&n!=null?b(L,{title:a.area,value:o.area(n)}):null,i.totalLength&&r!=null?b(L,{title:a.totalLength,value:o.length(r)}):null)}};an=T([x(`esri.views.interactive.tooltip.content.TooltipContentTranslateVertex`)],an);var on=class extends H{_renderContent(){let{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch,r=this._formatters;return b(v,null,t.distance?b(L,{title:n.distance,value:r.length(e.distance)}):null)}};on=T([x(`esri.views.interactive.tooltip.content.TooltipContentTranslateXY`)],on);var sn=class extends H{_renderContent(){let{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch;return b(v,null,t.distance?b(L,{title:n.distance,value:this._formatters.verticalLengthRelative(e.distance)}):null)}};sn=T([x(`esri.views.interactive.tooltip.content.TooltipContentTranslateZ`)],sn);function cn(e,t){if(t==null)return null;let n=document.createElement(`div`);switch(t.type){case`dynamic`:return new Jt({tooltip:e,info:t,container:n});case`draw-point`:case`draw-multipoint`:return new Ht({tooltip:e,info:t,container:n});case`draw-polygon`:return new Gt({tooltip:e,info:t,container:n});case`draw-polyline`:return new Kt({tooltip:e,info:t,container:n});case`draw-mesh`:return new Vt({tooltip:e,info:t,container:n});case`draw-rectangle`:return new qt({tooltip:e,info:t,container:n});case`draw-circle`:return new Rt({tooltip:e,info:t,container:n});case`elevation`:return new Yt({tooltip:e,info:t,container:n});case`extent-rotate`:return new Xt({tooltip:e,info:t,container:n});case`extent-scale`:return new Zt({tooltip:e,info:t,container:n});case`move-point`:return new Qt({tooltip:e,info:t,container:n});case`selected-vertex`:return new en({tooltip:e,info:t,container:n});case`transform-point`:return new nn({tooltip:e,info:t,container:n});case`transform-mesh`:return new tn({tooltip:e,info:t,container:n});case`translate`:return new rn({tooltip:e,info:t,container:n});case`translate-vertex`:return new an({tooltip:e,info:t,container:n});case`translate-z`:return new sn({tooltip:e,info:t,container:n});case`translate-xy`:return new on({tooltip:e,info:t,container:n});case`reshape-edge-offset`:return new $t({tooltip:e,info:t,container:n})}}var Y={base:`${P}`,ltr:`${P}--ltr`,rtl:`${P}--rtl`,debug:`${P}--debug`},ln=20,un=16,dn=`bottom-end`,X=class extends Oe{constructor(e){super(e),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement(`div`),this.debug=!1,this._updatingHandles=new ke,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){let{outerContainer:e}=this;this.addHandles([D(()=>this.view.overlay?.surface,t=>{e.remove(),t?.appendChild(e),this._rtl=i(t)},ye),D(()=>this.info,(t,n)=>{if(this.content!=null&&t!=null&&n!=null&&t.type===n.type)this.content.info=t;else{he(this.content);let n=cn(this,t);n?(this.content=n,n.container&&e.appendChild(n.container),this.exitInputMode()):this.content=null}},ye),D(()=>({container:this.outerContainer,style:this._outerContainerStyle}),({container:e,style:t})=>{Object.assign(e.style,t)},fe),D(()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug}),({outerContainer:e,placement:t,effectiveOffset:n,rtl:r,debug:i})=>{let{classList:a}=e;a.add(Y.base),a.toggle(Y.rtl,r),a.toggle(Y.ltr,!r),a.toggle(Y.debug,i),this.outerContainer.style.setProperty(`--offset`,`${n}px`),o(e),mn(e,t)},fe),Ee(()=>this.mode===`feedback`,()=>{this.position=null,this._clearOverride(`effectivePlacement`)},le),O(this.outerContainer,`paste`,e=>{this.emit(`paste`,e)}),O(this.outerContainer,[`focusin`,`focusout`],()=>{this._focused=this.content?.container?.contains(document.activeElement)??!1})])}destroy(){this.info=null,this.content=he(this.content),this.outerContainer.remove(),this._updatingHandles.destroy()}get mode(){return this.content?.mode??`feedback`}get focused(){return this._focused}get visible(){return this._outerContainerStyle.display!==`none`}get contentContainer(){return this.content?.container}get effectivePlacement(){let e=this.options?.placement;return e===`auto`?`bottom-end`:e??dn}get updating(){return this._updatingHandles.updating}get _screenPoint(){let{inputManager:e}=this.view;return e?.multiTouchActive?null:e?.latestPointerInfo?.location}get _effectiveOffset(){return this.options?.offset??ln}get _outerContainerStyle(){let e=this.position??this._screenPoint;return this._lastPosition=we(e),e!=null&&this.content!=null?{display:`block`,transform:`translate(${Math.round(e.x)}px, ${Math.round(e.y)}px)`}:{display:`none`,transform:`none`}}clear(){this.info=null}async enterInputMode(e){let t=this.position??this._lastPosition??this._screenPoint,n=this.position=we(t),{effectivePlacement:r}=this;this._override(`effectivePlacement`,r),await this._updatingHandles.addPromise(this.content?.enterInputMode(e,()=>{n&&(this.position=fn(this.contentContainer,n,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))}))}async exitInputMode(e){await this._updatingHandles.addPromise(this.content?.exitInputMode(e))}onDragStart(e,t){this._prevXY=[e,t]}onDrag(e,t){let n=e-this._prevXY[0],r=t-this._prevXY[1];this._prevXY=[e,t];let{position:i}=this;if(i){let{view:a}=this,o=e-a.position[0],s=t-a.position[1];if(o<0||o>a.width||s<0||s>a.height-un)return;this.position=de(i.x+n,i.y+r)}}onDragEnd(){this._prevXY=[0,0]}};function fn(e,t,n,r){if(!e||!r.container)return t;let i=e.getBoundingClientRect(),{left:a,top:o}=r.container.getBoundingClientRect(),{x:s,y:c}=t,l=i.left-a-n;l<0&&(s-=l);let u=i.right-a+n-r.width;u>0&&(s-=u);let d=i.top-o-n;d<0&&(c-=d);let f=i.bottom-o+n-r.height;return f>0&&(c-=f),de(s,c)}T([r({nonNullable:!0})],X.prototype,`view`,void 0),T([r()],X.prototype,`info`,void 0),T([r()],X.prototype,`options`,void 0),T([r()],X.prototype,`position`,void 0),T([r()],X.prototype,`content`,void 0),T([r({readOnly:!0})],X.prototype,`mode`,null),T([r()],X.prototype,`_focused`,void 0),T([r({readOnly:!0})],X.prototype,`focused`,null),T([r({readOnly:!0})],X.prototype,`outerContainer`,void 0),T([r({readOnly:!0})],X.prototype,`contentContainer`,null),T([r({readOnly:!0})],X.prototype,`effectivePlacement`,null),T([r()],X.prototype,`debug`,void 0),T([r()],X.prototype,`updating`,null),T([r()],X.prototype,`_lastPosition`,void 0),T([r()],X.prototype,`_screenPoint`,null),T([r()],X.prototype,`_rtl`,void 0),T([r()],X.prototype,`_effectiveOffset`,null),T([r()],X.prototype,`_outerContainerStyle`,null),X=T([x(`esri.views.interactive.Tooltip`)],X);var pn=[`top`,`bottom`,`leading`,`trailing`].flatMap(e=>[Z(`${e}-start`),Z(e),Z(`${e}-end`)]);function Z(e){return`${Y.base}--${e}`}function mn({classList:e},t){pn.forEach(t=>e.remove(t)),e.add(Z(t))}var hn=X;function gn(e){let t=new hn(e());return t.addHandles(D(()=>e(),({view:e,options:n,info:r})=>{t.view=e,n!==void 0&&(t.options=n),r!==void 0&&(t.info=r)})),t}function _n(e,t){let n=Pe(t.vertexSpace),{scale:r,orientation:i}=e,{transform:a}=t,o=Cn(a);n&&o!=null?(i.actual=Re(o,`degrees`,`arithmetic`),i.visible=!0):(i.actual=null,i.visible=!1),n?(r.actual=k(En(a)),r.visible=!0):(r.actual=null,r.visible=!1)}function vn(e,t,n){if(!t||!Pe(t.vertexSpace))return;let r=t.transform??=new Ne;yn(e,r,n),bn(e,r,n)}function yn(e,t,n){let r=Ke(e.orientation.actual),i=wn(t.rotationAxis);if(r==null||i==null)return;let a=r-90,o=t.rotationAngle,s=a*i,c=s-o;w(o,s)||(n?.onRotateStart(0),t.rotationAngle=s,n?.onRotate(c),n?.onRotateStop(c))}function bn(e,t,n){let r=e.scale.actual?.value,i=En(t);if(r==null||r===i)return;let{scale:o}=t,s;if(i===0)s=a(ve);else{let e=r/i;s=te(je(),o,e)}n?.onScaleStart(o[0],o[1],o[2]),t.scale=s,n?.onScale(s[0],s[1],s[2]),n?.onScaleStop(s[0],s[1],s[2])}function xn(e,t){let{x:n,y:r,z:i}=t,{x:a,y:o,z:s}=Sn(e,t.spatialReference);return{dx:a==null||w(a,n)?0:a-n,dy:o==null||w(o,r)?0:o-r,dz:s==null||i==null||w(s,i)?0:s-i}}function Sn(e,t){let n,r;e.geographic?(n=j(e.longitude.actual),r=j(e.latitude.actual),m(t)&&(n!=null&&r!=null?[n,r]=ge(n,r,Q):n==null?r!=null&&(r=ge(0,r,Q)[1]):n=ge(n,0,Q)[0])):(n=e.x.actual?.value,r=e.y.actual?.value);let i=e.elevation.actual,a=pe(t);return{x:n,y:r,z:a!=null&&i!=null?Le(i,a):void 0}}var Q=[0,0];function Cn(e){if(!e)return 90;let t=wn(e.rotationAxis)??1;return t==null?null:90+t*e.rotationAngle}function wn(e){return De(e,xe)?1:De(e,Tn)?-1:null}var Tn=p(je(),xe);function En(e){return e?Math.max(...e.scale):1}function Dn(e,t){return!(e.type!==`key-down`||e.key!==E.enterInputMode||!t||!On(t.info))&&(t.enterInputMode(),e.preventDefault(),e.stopPropagation(),!0)}function On(e){let t=e?.sketchOptions;if(!t)return!1;let{inputEnabled:n,visibleElements:r}=t.tooltips;return n&&!0===e.editableFields.some(({name:e})=>e===`x`||e===`y`?r.coordinates:r[e])}function kn(e,t){let n=null;return _e([e.on(`paste`,r=>{n?.abort(),n=ne(async()=>{M()||await qe(),An(r,e.info,t)})}),ne(()=>qe()),Ce(()=>n?.abort())])}function An(e,t,n){if(!t||!(`geographic`in t))return;let r=e.clipboardData?.getData(`text`);if(!r)return;let i=t=>{e.stopPropagation(),e.preventDefault(),n?.onBeforePaste(),t(),n?.onAfterPaste()};if(t.geographic){let e=At(r);e&&i(()=>{t.longitude.applyValue(e.longitude),t.latitude.applyValue(e.latitude)})}else{let e=Ot(r);e&&i(()=>{t.x.applyValue(e.x),t.y.applyValue(e.y)})}}var $=class extends n{constructor(e){super(e),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter(e=>e.visible&&!e.readOnly)}clearInputValues(){this.allFields.forEach(e=>e.clearInputValue())}};T([r()],$.prototype,`sketchOptions`,void 0),T([r()],$.prototype,`visibleElements`,null),T([r()],$.prototype,`helpMessage`,void 0),T([r()],$.prototype,`viewType`,void 0),T([r()],$.prototype,`allFields`,null),T([r()],$.prototype,`editableFields`,null),$=T([x(`esri.views.interactive.tooltip.infos.SketchTooltipInfo`)],$);function jn(e,t,n,r){let[i,a,o,s,c,l,u]=t.a,d=c??0,f=l??Math.hypot(i[0]-a[0],i[1]-a[1]),ee=u??1,p=Math.cos(r),m=Math.sin(r),[h,g]=n,_=Me(p,m,0,-m,p,0,h-p*h+m*g,g-m*h-p*g,1);return Ae(e,{a:[i,a,o,s,d,f,ee]},_)}function Mn(e,t,n){let[r,i,a]=e.b,o=[...r],s=[...i],c=[...a];return C(o,o,t,n),C(s,s,t,n),C(c,c,t,n),{b:[o,s,c]}}function Nn(e,t,n){let[r,i]=e.c,a=[...r],o=[...i];return C(a,a,t,n),C(o,o,t,n),{c:[a,o]}}export{V as _,kn as a,An as c,vn as d,_t as f,Mt as g,jt as h,$ as i,gn as l,wt as m,Mn as n,xn as o,Ct as p,Nn as r,Dn as s,jn as t,_n as u,gt as v,qe as y};