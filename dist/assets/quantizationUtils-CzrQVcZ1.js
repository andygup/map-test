function e(e){return e?{originPosition:e.originPosition===`upper-left`?`upperLeft`:e.originPosition===`lower-left`?`lowerLeft`:e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent==null?[0,0,0,0]:[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]}:null}function t(e){return e.originPosition===`lowerLeft`&&e.scale.length===4&&e.translate.length===4}function n(e){if(t(e))return e;let{originPosition:n,scale:r,translate:i}=e,a=r[0]??1,o=r[1]??1;return{originPosition:`lowerLeft`,scale:[a,n===`lowerLeft`?o:-o,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function r({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function i({scale:e,translate:t},n){return Math.round((n-t[1])/e[1])}function a({scale:e,translate:t},n){return Math.round(((n??0)-t[2])/e[2])}function o({scale:e,translate:t},n){return n?Math.round((n-t[3])/e[3]):0}function s({scale:e,translate:t},n){return n*e[0]+t[0]}function c({scale:e,translate:t},n){return n*e[1]+t[1]}function l({scale:e,translate:t},n){return(n??0)*e[2]+t[2]}function u({scale:e,translate:t},n){return n?n*e[3]+t[3]:0}function d(e,t){return e&&t?h:e&&!t?p:!e&&t?m:f}var f=(e,t)=>{let n=Array(t.length);if(!t.length)return n;let r=t[0],i=s(e,r[0]),a=c(e,r[1]);n[0]=[i,a];let{scale:o,originPosition:l}=e,u=o[0],d=l===`lowerLeft`?o[1]:-o[1];for(let e=1;e<t.length;e++){let[r,o]=t[e];i+=u*r,a+=d*o,n[e]=[i,a]}return n},p=(e,t)=>{let n=Array(t.length);if(!t.length)return n;let r=t[0],i=s(e,r[0]),a=c(e,r[1]);n[0]=[i,a,l(e,r[2])];let{scale:o,originPosition:u}=e,d=o[0],f=u===`lowerLeft`?o[1]:-o[1];for(let r=1;r<t.length;r++){let[o,s,c]=t[r];i+=d*o,a+=f*s,n[r]=[i,a,l(e,c)]}return n},m=(e,t)=>{let n=Array(t.length);if(!t.length)return n;let r=t[0],i=s(e,r[0]),a=c(e,r[1]);n[0]=[i,a,u(e,r[2])];let{scale:o,originPosition:l}=e,d=o[0],f=l===`lowerLeft`?o[1]:-o[1];for(let r=1;r<t.length;r++){let[o,s,c]=t[r];i+=d*o,a+=f*s,n[r]=[i,a,u(e,c)]}return n},h=(e,t)=>{let n=Array(t.length);if(!t.length)return n;let r=t[0],i=s(e,r[0]),a=c(e,r[1]);n[0]=[i,a,l(e,r[2]),u(e,r[3])];let{scale:o,originPosition:d}=e,f=o[0],p=d===`lowerLeft`?o[1]:-o[1];for(let r=1;r<t.length;r++){let[o,s,c,d]=t[r];i+=f*o,a+=p*s,n[r]=[i,a,l(e,c),u(e,d)]}return n};function g(e,t,n){let r=Array(n.length);for(let i=0;i<n.length;i++)r[i]=t(e,n[i]);return r}function _(e,t,s){let c=n(e);return t.x=r(c,s.x),t.y=i(c,s.y),s.z!=null&&(t.z=a(c,s.z)),s.m!=null&&(t.m=o(c,s.m)),t}function v(e,t,r,i=r?.hasZ??!1,a=r?.hasM??!1){if(r!=null){let o=n(e);t.points=d(i,a)(o,r.points),t.hasZ=i,t.hasM=a}return t}function y(e,t,r,i=r?.z!=null,a=r?.m!=null){if(r==null)return t;let o=n(e);return t.x=s(o,r.x),t.y=c(o,r.y),i&&(t.z=l(o,r.z)),a&&(t.m=u(o,r.m)),t}function b(e,t,r,i=r?.hasZ??!1,a=r?.hasM??!1){if(r!=null){let o=n(e);t.rings=g(o,d(i,a),r.rings),t.hasZ=i,t.hasM=a}return t}function x(e,t,r,i=r?.hasZ??!1,a=r?.hasM??!1){if(r!=null){let o=n(e);t.paths=g(o,d(i,a),r.paths),t.hasZ=i,t.hasM=a}return t}export{i as a,e as c,x as i,n as l,y as n,r as o,b as r,_ as s,v as t};