import{Fa as e,La as t,Ra as n,Va as r,za as i}from"./index-CzMixifc.js";import"./originUtils-CL6wvYk_.js";import"./saveUtils-BKglk9b-.js";import{n as a,t as o}from"./utils-WUTqSxls.js";var s=`Map Service`,c=`map-image-layer-save`,l=`map-image-layer-save-as`;function u(e){return{isValid:e.type===`map-image`&&!e.sourceJSON?.tileInfo,errorMessage:`Layer.type should be 'map-image' and reference a dynamic (non-cached) map service`}}function d(e){let t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}function f(e,t){return m(e,t),Promise.resolve()}async function p(n,r){let{parsedUrl:a,title:o,fullExtent:s}=n;r.url=a.path,r.title||=o,r.extent=s?await i(s):null,t(r,e.METADATA),m(n,r)}function m(t,i){n(i,e.DYNAMIC);let a=t.sublayers?.length??0;r(i,e.MULTI_LAYER,a>1),r(i,e.SINGLE_LAYER,a===1)}async function h(e,t){return a({layer:e,itemType:s,validateLayer:u,createItemData:d,errorNamePrefix:c,setItemProperties:f},t)}async function g(e,t,n){return o({layer:e,itemType:s,validateLayer:u,createItemData:d,errorNamePrefix:l,newItem:t,setItemProperties:p},n)}export{h as save,g as saveAs};