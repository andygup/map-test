import{A as e,Ad as t,DT as n,Dd as r,Dh as i,Di as a,FC as o,Ha as s,Jw as c,Kf as l,L as u,Li as d,M as f,OT as p,Od as m,Pi as h,RS as g,_E as _,ax as v,gD as y,j as b,jT as x,jd as S,pS as C,ua as w}from"./index-CZ4oMP1N.js";var T=[`atom`,`xml`],E={base:l,key:`type`,typeMap:{"simple-line":S},errorContext:`symbol`},D={base:l,key:`type`,typeMap:{"picture-marker":t,"simple-marker":r},errorContext:`symbol`},O={base:l,key:`type`,typeMap:{"simple-fill":m},errorContext:`symbol`},k=class extends w(b(u(f(e(s(i)))))){constructor(...e){super(...e),this.description=null,this.fullExtent=null,this.legendEnabled=!0,this.lineSymbol=null,this.pointSymbol=null,this.polygonSymbol=null,this.operationalLayerType=`GeoRSS`,this.url=null,this.type=`geo-rss`}normalizeCtorArgs(e,t){return typeof e==`string`?{url:e,...t}:e}readFeatureCollections(e,t){return t.featureCollection.layers.forEach(e=>{let t=e.layerDefinition.drawingInfo.renderer.symbol;t&&t.type===`esriSFS`&&t.outline?.style.includes(`esriSFS`)&&(t.outline.style=`esriSLSSolid`)}),t.featureCollection.layers}get hasPoints(){return this._hasGeometry(`esriGeometryPoint`)}get hasPolylines(){return this._hasGeometry(`esriGeometryPolyline`)}get hasPolygons(){return this._hasGeometry(`esriGeometryPolygon`)}get title(){let e=this._get(`title`);return e&&this.originOf(`title`)!==`defaults`?e:this.url?o(this.url,T)||`GeoRSS`:e}set title(e){this._set(`title`,e)}load(e){let t=e==null?null:e.signal;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[`Map Service`,`Feature Service`,`Feature Collection`,`Scene Service`]},e).catch(c).then(()=>this._fetchService(t)).then(e=>{this.read(e,{origin:`service`})})),Promise.resolve(this)}async hasDataChanged(){let e=await this._fetchService();return this.read(e,{origin:`service`,ignoreDefaults:!0}),!0}async _fetchService(e){let t=this.spatialReference,{data:n}=await g(_.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:C(t)?void 0:t.wkid??JSON.stringify(t)},signal:e});return n}_hasGeometry(e){return this.featureCollections?.some(t=>t.featureSet?.geometryType===e&&t.featureSet.features?.length>0)??!1}};y([n()],k.prototype,`description`,void 0),y([n()],k.prototype,`featureCollections`,void 0),y([x(`service`,`featureCollections`,[`featureCollection.layers`])],k.prototype,`readFeatureCollections`,null),y([n({type:v,json:{name:`lookAtExtent`}})],k.prototype,`fullExtent`,void 0),y([n(h)],k.prototype,`id`,void 0),y([n(a)],k.prototype,`legendEnabled`,void 0),y([n({types:E,json:{write:!0}})],k.prototype,`lineSymbol`,void 0),y([n({type:[`show`,`hide`]})],k.prototype,`listMode`,void 0),y([n({types:D,json:{write:!0}})],k.prototype,`pointSymbol`,void 0),y([n({types:O,json:{write:!0}})],k.prototype,`polygonSymbol`,void 0),y([n({type:[`GeoRSS`]})],k.prototype,`operationalLayerType`,void 0),y([n(d)],k.prototype,`url`,void 0),y([n({json:{origins:{service:{read:{source:`name`,reader:e=>e||void 0}}}}})],k.prototype,`title`,null),y([n({readOnly:!0,json:{read:!1},value:`geo-rss`})],k.prototype,`type`,void 0),k=y([p(`esri.layers.GeoRSSLayer`)],k);var A=k;export{A as default};