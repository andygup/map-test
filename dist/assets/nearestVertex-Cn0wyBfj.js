import{Wn as e}from"./SpatialReference-Cd_hfGxp.js";import{t}from"./OperatorProximity-QWolzWDl.js";import{f as n,h as r,r as i,t as a}from"./apiConverter-BjBJsb1W.js";function o(e,t,n){let r=(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y);return r>0?`left`:r<0?`right`:`straddle`}function s(e,t,n){if(e.getPointCount()<=0)return`left`;let r=e.querySegmentIteratorAtVertex(n),i=r.hasPreviousSegment()?r.previousSegment():r.nextSegment();return o(i.getStartXY(),i.getEndXY(),t)}var c=new t;function l(t,o){let l=i(t),u=n(o).getXY(),d=c.getNearestVertex(l,u);if(d.isEmpty())return null;switch(t.type){case`point`:return{coordinate:t,distance:d.m_distance,sideOfLine:d.m_distance===0?`straddle`:`left`};case`multipoint`:{let n=new e;return l.getPointByVal(d.m_vertexIndex,n),{coordinate:r(n,a(t)),distance:d.m_distance,sideOfLine:d.m_distance===0?`straddle`:`left`}}case`polyline`:case`polygon`:{let n=new e;return l.getPointByVal(d.m_vertexIndex,n),{coordinate:r(n,a(t)),distance:d.m_distance,sideOfLine:s(l,u,d.m_vertexIndex)}}default:throw Error(`Unsupported geometry type: ${t.type}`)}}export{l as t};