import{$T as e,A as t,BT as n,CE as r,L as i,Li as a,Lx as o,M as s,Rh as c,Ua as l,VT as u,ZS as d,ca as f,ji as p,kD as m,ma as h,pa as g,sT as _,vx as v}from"./index-BN8X5Ryz.js";import"./memoize-Dl61_jt0.js";import{o as y,p as b,y as x}from"./elevationInfoUtils-uoMH3ofe.js";import{n as S,t as C}from"./tiles3DUtils-BFwR0uHY.js";var w=class extends g(i(s(t(l(f(h(c))))))){constructor(e){super(e),this.operationalLayerType=`GaussianSplatLayer`,this.type=`gaussian-splat`,this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new v(-180,-90,180,90,this.spatialReference),this.spatialReference=new o({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){e!=null&&e.mode!==`absolute-height`||this._set(`elevationInfo`,e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(t){let n=t==null?null:t.signal;try{await this.loadFromPortal({supportedTypes:[`3DTiles Service`],validateItem:t=>{if(t.typeKeywords?.includes(`GaussianSplat`))return!0;throw new e(`portal:invalid-layer-item-type`,"Invalid layer item, expected '${expectedType}' ",{expectedType:`3DTiles Service`})}},t)}catch(e){_(e)}this.url&&await d(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:`json`,signal:n}).then(e=>{this.rootTilesetJSON=e.data;let t=S(this.rootTilesetJSON);this.fullExtent=C(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,t&&(this.esriCrsFullExtent=C(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},e=>{_(e)})}_validateElevationInfo(e){let t=`Gaussian Splat layers`;b(r.getLogger(this),x(t,`absolute-height`,e)),b(r.getLogger(this),y(t,e))}};m([n({type:[`GaussianSplatLayer`]})],w.prototype,`operationalLayerType`,void 0),m([n({readOnly:!0})],w.prototype,`type`,void 0),m([n({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],w.prototype,`opacity`,void 0),m([n({type:Number,json:{name:`layerDefinition.minScale`,write:!0,origins:{service:{read:!1,write:!1}}}})],w.prototype,`minScale`,void 0),m([n({type:Number,json:{name:`layerDefinition.maxScale`,write:!0,origins:{service:{read:!1,write:!1}}}})],w.prototype,`maxScale`,void 0),m([n(a)],w.prototype,`url`,void 0),m([n({type:v})],w.prototype,`fullExtent`,void 0),m([n({type:o})],w.prototype,`spatialReference`,void 0),m([n({readOnly:!0})],w.prototype,`supportedSpatialReferences`,null),m([n({type:[v]})],w.prototype,`fullExtents`,null),m([n({type:[`show`,`hide`]})],w.prototype,`listMode`,void 0),m([n(p)],w.prototype,`elevationInfo`,null),w=m([u(`esri.layers.GaussianSplatLayer`)],w);var T=w;export{T as default};