import{AT as e,DT as t,GC as n,LT as r,OT as i,Og as a,RS as o,SE as s,Ug as c,WC as l,gC as u,gD as d,iv as f,kv as p,qm as m}from"./index-ByaFsVj4.js";var h,g=h=class extends n{constructor(e){super(e),this.geometry=null,this.type=`clip`}writeGeometry(e,t,n,i){if(i.layer?.spatialReference&&!i.layer.spatialReference.equals(this.geometry.spatialReference)){if(!a(e.spatialReference,i.layer.spatialReference))return void(i?.messages&&i.messages.push(new r(`scenemodification:unsupported`,`Scene modifications with incompatible spatial references are not supported`,{modification:this,spatialReference:i.layer.spatialReference,context:i})));let o=new p;c(e,o,i.layer.spatialReference),t[n]=o.toJSON(i)}else t[n]=e.toJSON(i)}clone(){return new h({geometry:s(this.geometry),type:this.type})}};d([t({type:p}),m()],g.prototype,`geometry`,void 0),d([e([`web-scene`,`portal-item`],`geometry`)],g.prototype,`writeGeometry`,null),d([t({type:[`clip`,`mask`,`replace`],nonNullable:!0}),m()],g.prototype,`type`,void 0),g=h=d([i(`esri.layers.support.SceneModification`)],g);var _,v=_=class extends l(f.ofType(g)){constructor(e){super(e),this.url=null}clone(){return new _({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}static fromJSON(e,t){let n=new _;for(let r of e)n.add(g.fromJSON(r,t));return n}static async fromUrl(e,t,n){let r={url:u(e),origin:`service`},i=await o(e,{responseType:`json`,signal:n?.signal}),a=t.toJSON(),s=[];for(let e of i.data)s.push(g.fromJSON({...e,geometry:{spatialReference:a,...e.geometry}},r));return new _({url:e,items:s})}};d([t({type:String})],v.prototype,`url`,void 0),v=_=d([i(`esri.layers.support.SceneModifications`)],v);export{v as t};