import{Ba as e,Fa as t,Ha as n,La as r,za as i}from"./index-BN8X5Ryz.js";import"./originUtils-CJnuu7mB.js";import"./saveUtils-CEfw3trS.js";import{n as a,t as o}from"./utils-BnryXVma.js";var s=`Map Service`,c=`map-image-layer-save`,l=`map-image-layer-save-as`;function u(e){return{isValid:e.type===`map-image`&&!e.sourceJSON?.tileInfo,errorMessage:`Layer.type should be 'map-image' and reference a dynamic (non-cached) map service`}}function d(e){let t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}function f(e,t){return m(e,t),Promise.resolve()}async function p(n,i){let{parsedUrl:a,title:o,fullExtent:s}=n;i.url=a.path,i.title||=o,i.extent=s?await e(s):null,r(i,t.METADATA),m(n,i)}function m(e,r){i(r,t.DYNAMIC);let a=e.sublayers?.length??0;n(r,t.MULTI_LAYER,a>1),n(r,t.SINGLE_LAYER,a===1)}async function h(e,t){return a({layer:e,itemType:s,validateLayer:u,createItemData:d,errorNamePrefix:c,setItemProperties:f},t)}async function g(e,t,n){return o({layer:e,itemType:s,validateLayer:u,createItemData:d,errorNamePrefix:l,newItem:t,setItemProperties:p},n)}export{h as save,g as saveAs};