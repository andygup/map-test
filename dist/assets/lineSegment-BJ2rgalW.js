import{Cl as e,Ml as t,Nl as n,Pl as r,Tl as i,c_ as a,dl as o,dw as s,f_ as c,yl as l}from"./index-CZ4oMP1N.js";import{t as u}from"./vectorStacks-FfDNcZoS.js";import{t as d}from"./ObjectStack-CBI5g-Qc.js";function f(e){return e?{origin:c(e.origin),vector:c(e.vector)}:{origin:a(),vector:a()}}function p(e,t){let n=T.get();return n.origin=e,n.vector=t,n}function m(e,t=f()){return h(e.origin,e.vector,t)}function h(e,n,r=f()){return t(r.origin,e),t(r.vector,n),r}function g(e,n,r=f()){return t(r.origin,e),l(r.vector,n,e),r}function _(t,n){let r=l(u.get(),n,t.origin),i=o(t.vector,r),a=o(t.vector,t.vector),c=s(i/a,0,1),d=l(u.get(),e(u.get(),t.vector,c),r);return o(d,d)}function v(e,t,n){return b(e,t,0,1,n)}function y(t,r,i){return n(i,t.origin,e(i,t.vector,r))}function b(t,r,a,c,d){let{vector:f,origin:p}=t,m=l(u.get(),r,p),h=o(f,m)/i(f);return e(d,f,s(h,a,c)),n(d,d,t.origin)}function x(e,t){if(C(e,p(t.origin,t.direction),!1,w)){let{tA:t,pB:i,distance2:a}=w;if(t>=0&&t<=1)return a;if(t<0)return r(e.origin,i);if(t>1)return r(n(u.get(),e.origin,e.vector),i)}return null}function S(e,n,r){return!!C(e,n,!0,w)&&(t(r,w.pA),!0)}function C(e,t,i,a){let o=1e-6,c=e.origin,l=n(u.get(),c,e.vector),d=t.origin,f=n(u.get(),d,t.vector),p=u.get(),m=u.get();if(p[0]=c[0]-d[0],p[1]=c[1]-d[1],p[2]=c[2]-d[2],m[0]=f[0]-d[0],m[1]=f[1]-d[1],m[2]=f[2]-d[2],Math.abs(m[0])<o&&Math.abs(m[1])<o&&Math.abs(m[2])<o)return!1;let h=u.get();if(h[0]=l[0]-c[0],h[1]=l[1]-c[1],h[2]=l[2]-c[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;let g=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],_=m[0]*h[0]+m[1]*h[1]+m[2]*h[2],v=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],y=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],b=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*y-_*_;if(Math.abs(b)<o)return!1;let x=(g*_-v*y)/b,S=(g+_*x)/y;i&&(x=s(x,0,1),S=s(S,0,1));let C=u.get(),w=u.get();return C[0]=c[0]+x*h[0],C[1]=c[1]+x*h[1],C[2]=c[2]+x*h[2],w[0]=d[0]+S*m[0],w[1]=d[1]+S*m[1],w[2]=d[2]+S*m[2],a.tA=x,a.tB=S,a.pA=C,a.pB=w,a.distance2=r(C,w),!0}var w={tA:0,tB:0,pA:a(),pB:a(),distance2:0},T=new d(()=>f());export{x as a,y as c,f as d,h as i,p as l,S as n,g as o,v as r,_ as s,b as t,m as u};