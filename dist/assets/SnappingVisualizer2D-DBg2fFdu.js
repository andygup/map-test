import{Ex as e,Hb as t,Ld as n,Lx as r,Od as i,Uu as a,Vd as o,cg as s,kb as c,mE as l,rE as u,tp as d,y_ as f,zv as p}from"./index-BN8X5Ryz.js";import{_ as m}from"./LineSnappingHint-CmFAetWF.js";import{n as h}from"./ParallelSnappingHint-CVYaPm-q.js";import{b as g}from"./SnappingContext-CJ1Obe6m.js";var _=class extends g{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(t,n){return this._visualizeSnappingIndicator(new e({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:n.spatialReference}),this._getOrCreateSymbol(`intersectionPoint`,n.view.effectiveTheme.accentColor))}visualizePoint(t,n){return this._visualizeSnappingIndicator(new e({x:t.point[0],y:t.point[1],spatialReference:n.spatialReference}),this._getOrCreateSymbol(`point`,n.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new p({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:l(r,t.spatialReference)}),this._getOrCreateSymbol(`line`,t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new p({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:l(r,t.spatialReference)}),this._getOrCreateSymbol(`parallelSign`,t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,n){let i=a(),o=a(),s=f();c(i,m(e.centerVertex),m(e.previousVertex)),c(o,m(e.nextVertex),m(e.previousVertex)),t(s,i,o);let u=`rightAngleQuad${s[2]<0?45:225}`;return this._visualizeSnappingIndicator(new p({paths:[[[...e.previousVertex],[...e.centerVertex],[...e.nextVertex]]],spatialReference:l(r,n.spatialReference)}),this._getOrCreateSymbol(u,n.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(e,t){let n=new i({geometry:e,symbol:t});return this._graphicsLayer.add(n),u(()=>{this._graphicsLayer.remove(n)})}_getOrCreateSymbol(e,t){let n=this._symbolPairingsByType;return n.get(e)?.color!==t&&n.set(e,{color:t,symbol:v(e,t)}),n.get(e).symbol}};function v(e,t){let r=[...t.toRgb(),255*t.a];switch(e){case`point`:return new n({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case`intersectionPoint`:return new n({outline:new o({width:1.5,color:t}),size:15,color:[0,0,0,0]});case`line`:return new d({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Butt`,joinStyle:`Round`,miterLimit:10,width:s(h.lineHintWidthTarget),color:r}]}}});case`parallelSign`:return new d({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:`Relative`,size:5,markerPlacement:{type:`CIMMarkerPlacementOnLine`,placePerPart:!0,angleToLine:!0,relativeTo:`LineMiddle`},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidFill`,enable:!0,color:r}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:`Relative`,size:5,markerPlacement:{type:`CIMMarkerPlacementOnLine`,placePerPart:!0,angleToLine:!0,relativeTo:`LineMiddle`},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidFill`,enable:!0,color:r}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case`rightAngleQuad45`:case`rightAngleQuad225`:{let n=e===`rightAngleQuad45`?45:225;return new d({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:`Relative`,size:s(h.rightAngleHintSize),rotation:n,markerPlacement:{type:`CIMMarkerPlacementOnVertices`,placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Butt`,joinStyle:`Round`,miterLimit:10,width:s(h.rightAngleHintOutlineSize),color:r},{type:`CIMSolidFill`,enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}export{_ as t};