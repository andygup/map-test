import{DT as e,OT as t,_w as n,gD as r}from"./index-CZ4oMP1N.js";var i={visible:`visibleSublayers`},a=class extends n{constructor(e){super(e),this.scale=0}set layer(e){this._get(`layer`)!==e&&(this._set(`layer`,e),this.removeHandles(`layer`),e&&this.addHandles([e.sublayers.on(`change`,()=>this.notifyChange(`visibleSublayers`)),e.on(`wms-sublayer-update`,e=>this.notifyChange(i[e.propertyName]))],`layer`))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty(`layers`);let e=this.layer;return e&&e.commitProperty(`imageTransparency`),(this._get(`version`)||0)+1}get visibleSublayers(){let{layer:e,scale:t}=this,n=e?.sublayers,r=[],i=e=>{let{minScale:n,maxScale:a,sublayers:o,visible:s}=e;s&&(t===0||(n===0||t<=n)&&(a===0||t>=a))&&(o?o.forEach(i):r.push(e))};return n?.forEach(i),r}toJSON(){let{layer:e,layers:t}=this,{imageFormat:n,imageTransparency:r,version:i}=e;return{format:n,request:`GetMap`,service:`WMS`,styles:``,transparent:r?`TRUE`:`FALSE`,version:i,layers:t}}};r([e()],a.prototype,`layer`,null),r([e({readOnly:!0})],a.prototype,`layers`,null),r([e({type:Number})],a.prototype,`scale`,void 0),r([e({readOnly:!0})],a.prototype,`version`,null),r([e({readOnly:!0})],a.prototype,`visibleSublayers`,null),a=r([t(`esri.layers.support.ExportWMSImageParameters`)],a);export{a as t};