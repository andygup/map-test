import{DT as e,Hh as t,JE as n,JT as r,Lw as i,OT as a,WT as o,eT as s,gD as c,nT as l,qh as u,sv as d,tT as f}from"./index-CzMixifc.js";var p=class extends t(d){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){return(this.parent?.visible&&!this.parent.suspended)??!0}set visible(e){this._overrideIfSome(`visible`,e)}forceInteractive(){return this._interactiveViewModelCount++,o(()=>this._interactiveViewModelCount--)}};c([e({constructOnly:!0})],p.prototype,`parent`,void 0),c([e({constructOnly:!0})],p.prototype,`view`,void 0),c([e({type:Boolean})],p.prototype,`interactive`,null),c([e()],p.prototype,`_userInteractive`,void 0),c([e({readOnly:!0})],p.prototype,`updating`,null),c([e()],p.prototype,`visible`,null),c([e()],p.prototype,`_interactiveViewModelCount`,void 0),p=c([a(`esri.views.analysis.AnalysisView`)],p);var m=class extends p{};m=c([a(`esri.views.2d.analysis.AnalysisView2D`)],m);var h=class{constructor(){this._currentOperationSignal=u(null)}get currentOperationType(){return this._currentOperationSignal.value?.type??null}destroy(){this.stop()}async start(e,t,a){let o=this._currentOperationSignal.value;o?.stop();let c=new AbortController,u=a?.signal,d=AbortSignal.any([c.signal,u].filter(n)),p=i(),m=!1,h=()=>{m||(m=!0,p.reject(f()))},g={type:e,resolve:e=>{m||(m=!0,p.resolve(e))},reject:h,promise:p.promise,stop:()=>c.abort(),handles:[]};this._currentOperationSignal.value=g,g.handles.push(l(u,()=>{c.abort()}),l(d,()=>{r(g.handles),m||h()}));try{return o&&(await o.promise.catch(()=>{}),s(d)),await t(g,d),await p.promise}finally{r(g.handles),this._currentOperationSignal.value===g&&(this._currentOperationSignal.value=null)}}stop(){this._currentOperationSignal.value?.stop()}};export{m as n,h as t};