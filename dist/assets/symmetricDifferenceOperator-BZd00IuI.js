import{JE as e}from"./index-CZ4oMP1N.js";import{cn as t,kt as n,ln as r,mn as i,st as a}from"./Point2D-7VmvyXN4.js";import{t as o}from"./Envelope2D-Cwxt0azx.js";import{M as s,Mn as c,Un as l,_n as u}from"./SpatialReference-HLIf1Z5k.js";import{n as d,t as f}from"./SimpleGeometryCursor-5wFw2ZZo.js";import{n as p,p as m,r as h,t as g}from"./apiConverter-BH2GqpH4.js";var _=class{getOperatorType(){return 10003}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,n,r){return new x(e,t,n,r)}execute(e,t,n,i){let a=new f([e]),o=new f([t]),s=this.executeMany(a,o,n,i).next();return s||r(`null output`),s}};function v(e,n,r,i){let a=e.getDimension(),c=n.getDimension();if(a!==c)return a>c?e:n;if(e.isEmpty())return n;if(n.isEmpty())return e;let u=new o,d=new o,f=new o;e.queryEnvelope(u),n.queryEnvelope(d),f.setCoords({env2D:u}),f.mergeEnvelope2D(d);let p=l(r,f,!0),m=e.getGeometryType(),h=n.getGeometryType();return m===t.enumPoint&&h===t.enumPoint?y(e,n,p):m===t.enumPoint&&h===t.enumMultiPoint?b(n,e,p):m===t.enumMultiPoint&&h===t.enumPoint?b(e,n,p):s(e,n,r,i)}function y(e,t,r,i){let a=c(r),o=a*a,s=e.getXY(),l=t.getXY(),d=new u({vd:e.getDescription()});return n.sqrDistance(s,l)>o&&(d.add(e),d.add(t)),d}function b(e,t,n,r){let i=e.getImpl().getAttributeStreamRef(0),s=e.getPointCount(),l=t.getXY(),u=e.createInstance(),d=c(n),f=new o;if(e.queryEnvelope(f),f.inflateCoords(d,d),f.contains(l)){let n=d*d,r=!1,o=a(s,!1);for(let e=0;e<s;e++){let t=i.read(2*e),a=i.read(2*e+1),s=t-l.x,c=a-l.y;s*s+c*c<=n&&(r=!0,o[e]=!0)}if(r)for(let t=0;t<s;t++)o[t]||u.addPoints(e,t,t+1);else u.addPoints(e,0,s),u.add(t)}else u.addPoints(e,0,s),u.add(t);return u}var x=class extends d{constructor(e,t,n,r){super(),this.m_progressTracker=r,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=n,this.m_rightGeom=t.next(),this.m_bEmpty=!this.m_rightGeom,i(this.m_rightGeom)}tock(){return!0}getRank(){return 1}next(){if(this.m_bEmpty)return null;let e=this.m_inputGeoms.next();return e?(i(e),this.m_index=this.m_inputGeoms.getGeometryID(),v(e,this.m_rightGeom,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}},S=new _;function C(e,t,n){return S.execute(e,t,n,null)}function w(e,t,n){let r=S.executeMany(new f(e),new f([t]),n,null);return Array.from(r)}function T(){return S.supportsCurves()}function E(e,t){let n=g(e);return p(C(h(e),h(t),m(n)),n)}function D(t,n){let r=t.map(h),i=g(t);return w(r,h(n),m(i)).map(e=>p(e,i)).filter(e)}var O=T(),k=Object.freeze(Object.defineProperty({__proto__:null,execute:E,executeMany:D,supportsCurves:O},Symbol.toStringTag,{value:`Module`}));export{E as i,k as n,O as r,D as t};