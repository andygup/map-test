import{AT as e,DT as t,GC as n,OT as r,Ov as i,gD as a,gw as o,jT as s,kv as c,px as l}from"./index-CzMixifc.js";import{r as u}from"./cimSymbolUtils-Dwr_LmxD.js";import{n as d}from"./utils-BroCumRv.js";var f=class extends o(n){constructor(e){super(e),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};a([t({type:l})],f.prototype,`frameCenter`,void 0),a([t({type:c})],f.prototype,`frameOutline`,void 0),a([t({type:i})],f.prototype,`lineOfSight`,void 0),a([t({type:l})],f.prototype,`sensorLocation`,void 0),a([t({type:i})],f.prototype,`sensorTrail`,void 0),f=a([r(`esri.layers.support.TelemetryData`)],f);var p={type:Boolean,json:{write:!0}},m=class extends o(n){constructor(e){super(e),this.frame=!1,this.frameCenter=!1,this.frameOutline=!0,this.lineOfSight=!0,this.sensorLocation=!0,this.sensorTrail=!0}};a([t(p)],m.prototype,`frame`,void 0),a([t(p)],m.prototype,`frameCenter`,void 0),a([t(p)],m.prototype,`frameOutline`,void 0),a([t(p)],m.prototype,`lineOfSight`,void 0),a([t(p)],m.prototype,`sensorLocation`,void 0),a([t(p)],m.prototype,`sensorTrail`,void 0),m=a([r(`esri.layers.support.TelemetryDisplay`)],m);var h=class extends o(n){constructor(e){super(e),this.duration=null,this.end=null,this.start=null,this.timezone=`UTC`}readEnd(e,t){return t.end==null?null:new Date(t.end)}writeEnd(e,t){t.end=e?e.getTime():null}readStart(e,t){return t.start==null?null:new Date(t.start)}writeStart(e,t){t.start=e?e.getTime():null}};a([t({type:Number,json:{write:{allowNull:!0}}})],h.prototype,`duration`,void 0),a([t({type:Date,json:{write:{allowNull:!0}}})],h.prototype,`end`,void 0),a([s(`end`)],h.prototype,`readEnd`,null),a([e(`end`)],h.prototype,`writeEnd`,null),a([t({type:Date,json:{write:{allowNull:!0}}})],h.prototype,`start`,void 0),a([s(`start`)],h.prototype,`readStart`,null),a([e(`start`)],h.prototype,`writeStart`,null),a([t({type:String})],h.prototype,`timezone`,void 0),h=a([r(`esri.layers.support.VideoTimeExtent`)],h);var g=h,_=`application/x-mpegURL`,v=`video/mp4`,y=`video/webm`,b={UASDatalinkLocalSet:1e4,PrecisionTimeStamp:10002,MissionId:10003,PlatformTailNumber:10004,PlatformHeadingAngle:10005,PlatformPitchAngle:10006,PlatformRollAngle:10007,PlatformTrueAirspeed:10008,PlatformIndicatedAirspeed:10009,PlatformDesignation:10010,ImageSourceSensor:10011,ImageCoordinateSystem:10012,SensorLatitude:10013,SensorLongitude:10014,SensorTrueAltitude:10015,SensorHorizontalFOV:10016,SensorVerticalFOV:10017,SensorAzimuthAngle:10018,SensorElevationAngle:10019,SensorRollAngle:10020,PlatformSlantRange:10021,TargetWidth:10022,FrameCenterLatitude:10023,FrameCenterLongitude:10024,FrameCenterElevation:10025,OffsetCorner1Latitude:10026,OffsetCorner1Longitude:10027,OffsetCorner2Latitude:10028,OffsetCorner2Longitude:10029,OffsetCorner3Latitude:10030,OffsetCorner3Longitude:10031,OffsetCorner4Latitude:10032,OffsetCorner4Longitude:10033,TargetLocationLatitude:10040,TargetLocationLongitude:10041,TargetLocationElevation:10042,TargetTrackGateWidth:10043,TargetTrackGateHeight:10044,TargetErrorEstimateHorizontal:10045,TargetErrorEstimateLateral:10046,GenericFlagData:10047,PlatformGroundSpeed:10056,PlatformGroundRange:10057,PlatformRemainingFuel:10058,PlatformCallSign:10059,SensorFOVName:10063,PlatformMagneticHeading:10064,LDSVersionNumber:10065,AlternatePlatformName:10070,EventStartTimeUTC:10072,VMTIDataSet:10074,SensorEllipsoidHeight:10075,OperationalMode:10077,FrameCenterAboveEllipsoid:10078,CornerLatitudePoint1:10082,CornerLongitudePoint1:10083,CornerLatitudePoint2:10084,CornerLongitudePoint2:10085,CornerLatitudePoint3:10086,CornerLongitudePoint3:10087,CornerLatitudePoint4:10088,CornerLongitudePoint4:10089,SARMotionImageryMetadata:10095,SecurityClassification:20001,SecurityClassifyingAuthority:20002,SecurityClassifyingCountry:20003,SecuritySCI:20004,SecurityCaveats:20005,SecurityReleaseInstructions:20006,SecurityLDSVersion:20022,EsriVideoWidth:90001,EsriVideoHeight:90002,EsriFrameCenterLatitude:90050,EsriFrameCenterLongitude:90051,EsriCornerLatitudePt1:90052,EsriCornerLongitudePt1:90053,EsriCornerLatitudePt2:90054,EsriCornerLongitudePt2:90055,EsriCornerLatitudePt3:90056,EsriCornerLongitudePt3:90057,EsriCornerLatitudePt4:90058,EsriCornerLongitudePt4:90059,EsriFrameOutline:90060,EsriSensorPosition:90061,EsriHorizonPixelPack:90063,EsriGroundControlPoints:90064};function x(e,t=1e4){if(!e||!e.length)return[];let n=[],r=[];for(let t=0;t<e.length;t++){let r=e[t],i=r?.text?JSON.parse(r.text):null;i?.source===`EsriVideoServer`&&(n=[...i.data])}let i=n.find(e=>e.tagId===t);return Array.isArray(i?.value)&&(r=[...i.value]),r}function S(e){let{duration:t,end:n,start:r,timezone:i=`UTC`}=e||{};return typeof t==`number`?new g({duration:t||null,end:typeof n==`number`?new Date(n):null,start:typeof r==`number`?new Date(r):null,timezone:i}):null}function C(e,t){let n=[...t],r=n.findIndex(t=>t.equals(e));return r>-1&&n.splice(r),n.push(e),n}function w(e){if(!e?.size)return new f;let t=R(e),n=D(e),r=P(e),i=L(t,n);return new f({frameCenter:n,frameOutline:r,lineOfSight:i,sensorLocation:t})}function T(e){return e?.size?e.get(b.EsriGroundControlPoints)?.value??null??null:null}function E(e){return e?.size?e.get(b.EsriHorizonPixelPack)?.value??null:null}function D(e){return M(e)??N(e)}function O(e){if(!e)return _;let t=e.match(/\.(\w{3,4})(?:$|\?)/i);if(!t)return _;switch(t[1].toLowerCase()){case`mp4`:return v;case`webm`:return y;default:return _}}function k(e){let t=e?.layers;return t?.length?t.map(e=>({layerId:e.id,posterUrl:e.poster,sourceType:e.serviceType,title:e.name,type:e.type||`Video Layer`})):[]}function A(e,t,n){if(!e)return null;let r=e.clone();switch(r.type){case`simple-fill`:d(r,n),r.outline.color=t;break;case`simple-line`:d(r,t);break;case`simple-marker`:d(r,t),r?.outline?.color&&(r.outline.color=t);break;case`cim`:u(r,t)}return r}function j(e){let{cameraAzimuth:t,platformHeading:n,source:r=null,symbolOffset:i=0}=e||{},a=0;if(!r)return a;a=r===`platformHeading`?n+i:n+t+i;let o=a>360?a-360:a;return Math.round(Math.abs(o))}function M(e){return e&&e.has(b.EsriFrameCenterLatitude)&&e.has(b.EsriFrameCenterLongitude)?new l({x:e.get(b.EsriFrameCenterLongitude).value,y:e.get(b.EsriFrameCenterLatitude).value,z:e.get(b.FrameCenterAboveEllipsoid)?.value??e.get(b.FrameCenterElevation)?.value}):null}function N(e){return e&&e.has(b.FrameCenterLatitude)&&e.has(b.FrameCenterLongitude)?new l({x:e.get(b.FrameCenterLongitude)?.value,y:e.get(b.FrameCenterLatitude)?.value,z:e.get(b.FrameCenterElevation)?.value}):null}function P(e){if(!e)return null;let t=e.get(b.EsriFrameOutline)?.value;return t?c.fromJSON(t.geometry):F(e)??I(e)}function F(e){if(!(e.has(b.EsriCornerLatitudePt1)&&e.has(b.EsriCornerLongitudePt1)&&e.has(b.EsriCornerLatitudePt2)&&e.has(b.EsriCornerLongitudePt2)&&e.has(b.EsriCornerLatitudePt3)&&e.has(b.EsriCornerLongitudePt3)&&e.has(b.EsriCornerLatitudePt4)&&e.has(b.EsriCornerLongitudePt4)))return null;let t=[e.get(b.EsriCornerLongitudePt1)?.value,e.get(b.EsriCornerLatitudePt1)?.value],n=[e.get(b.EsriCornerLongitudePt2)?.value,e.get(b.EsriCornerLatitudePt2)?.value],r=[e.get(b.EsriCornerLongitudePt3)?.value,e.get(b.EsriCornerLatitudePt3)?.value],i=[e.get(b.EsriCornerLongitudePt4)?.value,e.get(b.EsriCornerLatitudePt4)?.value];return new c({rings:[[t,n,r,i]]})}function I(e){if(!(e.has(b.OffsetCorner1Latitude)&&e.has(b.OffsetCorner1Longitude)&&e.has(b.OffsetCorner2Latitude)&&e.has(b.OffsetCorner2Longitude)&&e.has(b.OffsetCorner3Latitude)&&e.has(b.OffsetCorner3Longitude)&&e.has(b.OffsetCorner4Latitude)&&e.has(b.OffsetCorner4Longitude)&&e.has(b.FrameCenterLatitude)&&e.has(b.FrameCenterLongitude)))return null;let t=e.get(b.FrameCenterLatitude)?.value,n=e.get(b.FrameCenterLongitude)?.value,r=t+e.get(b.OffsetCorner1Latitude)?.value,i=n+e.get(b.OffsetCorner1Longitude)?.value,a=t+e.get(b.OffsetCorner2Latitude)?.value,o=n+e.get(b.OffsetCorner2Longitude)?.value,s=t+e.get(b.OffsetCorner3Latitude)?.value,l=n+e.get(b.OffsetCorner3Longitude)?.value,u=t+e.get(b.OffsetCorner4Latitude)?.value,d=n+e.get(b.OffsetCorner4Longitude)?.value;return new c({rings:[[[i,r],[o,a],[l,s],[d,u]]]})}function L(e,t){if(!e||!t)return null;let n=[e.x,e.y,e.z??0],r=[t.x,t.y,t.z??0];return new i({paths:[[n,r]]})}function R(e){if(!e?.size)return null;if(e.has(b.EsriSensorPosition)){let t=e.get(b.EsriSensorPosition)?.value;if(t)return l.fromJSON(t.geometry)}return e.has(b.SensorLongitude)&&e.has(b.SensorLatitude)?new l({x:e.get(b.SensorLongitude)?.value,y:e.get(b.SensorLatitude)?.value,z:e.get(b.SensorTrueAltitude)?.value}):null}export{b as a,j as c,A as d,g as f,E as i,C as l,f as m,O as n,x as o,m as p,T as r,S as s,w as t,k as u};