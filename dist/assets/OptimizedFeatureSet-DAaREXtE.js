import{n as e}from"./memoryEstimations-C5pKF3kD.js";import{t}from"./OptimizedGeometry-DX91by73.js";function n(e,t){return e?t?4:3:t?3:2}function r(e){if(e==null||!e?.lengths.length)return null;let{lengths:n,coords:r,stride:o,hasZ:s,hasM:c}=e,l=new t([],[],s,!1),u=l.coords,d=[],f=s?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0],p=0;for(let e of n){let t=i(f,r,p,e,s,c);t&&d.push(t),p+=e*o}if(d.sort((e,t)=>{let n=e[2]-t[2];return n===0&&s&&(n=e[4]-t[4]),n}),d.length){let e=6*d[0][2];u[0]=d[0][0]/e,u[1]=d[0][1]/e,s&&(e=6*d[0][4],u[2]=e===0?0:d[0][3]/e),(u[0]<f[0]||u[0]>f[1]||u[1]<f[2]||u[1]>f[3]||s&&(u[2]<f[4]||u[2]>f[5]))&&(u.length=0)}if(!u.length){let t=e.lengths[0]?a(r,0,n[0],s,c):null;if(!t)return null;u[0]=t[0],u[1]=t[1],s&&(u[2]=t[2]??0)}return l}function i(e,t,r,i,a,o){let s=n(a,o),c=r,l=r+s,u=0,d=0,f=0,p=0,m=0;for(let n=0,r=i-1;n<r;n++,c+=s,l+=s){let n=t[c],r=t[c+1],i=t[c+2],o=t[l],s=t[l+1],h=t[l+2],g=n*s-o*r;p+=g,u+=(n+o)*g,d+=(r+s)*g,a&&(g=n*h-o*i,f+=(i+h)*g,m+=g),n<e[0]&&(e[0]=n),n>e[1]&&(e[1]=n),r<e[2]&&(e[2]=r),r>e[3]&&(e[3]=r),a&&(i<e[4]&&(e[4]=i),i>e[5]&&(e[5]=i))}if(p>0&&(p*=-1),m>0&&(m*=-1),!p)return null;let h=[u,d,.5*p];return a&&(h[3]=f,h[4]=.5*m),h}function a(e,t,r,i,a){let u=n(i,a),d=t,f=t+u,p=0,m=0,h=0,g=0;for(let t=0,n=r-1;t<n;t++,d+=u,f+=u){let t=e[d],n=e[d+1],r=e[d+2],a=e[f],u=e[f+1],_=e[f+2],v=i?s(t,n,r,a,u,_):o(t,n,a,u);if(v)if(p+=v,i){let e=l(t,n,r,a,u,_);m+=v*e[0],h+=v*e[1],g+=v*e[2]}else{let e=c(t,n,a,u);m+=v*e[0],h+=v*e[1]}}return p>0?i?[m/p,h/p,g/p]:[m/p,h/p]:r>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function o(e,t,n,r){let i=n-e,a=r-t;return Math.sqrt(i*i+a*a)}function s(e,t,n,r,i,a){let o=r-e,s=i-t,c=a-n;return Math.sqrt(o*o+s*s+c*c)}function c(e,t,n,r){return[e+.5*(n-e),t+.5*(r-t)]}function l(e,t,n,r,i,a){return[e+.5*(r-e),t+.5*(i-t),n+.5*(a-n)]}var u=class n{constructor(e=null,t={},n,r,i=0){this.geometry=e,this.attributes=t,this.centroid=n,this.objectId=r,this.displayId=i}static fromJSON(e){let r=e.geometry?t.fromJSON(e.geometry):null,i=e.centroid?t.fromJSON(e.centroid):null,a=e.objectId;return new n(r,e.attributes,i,a)}weakClone(){let e=new n(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){let e=this.geometry?.clone(),t=new n(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t}ensureCentroid(e){return this.centroid??=r(this.geometry),this.centroid}get usedMemory(){return 128+e(this.attributes)+(this.geometry?.usedMemory??0)}};function d(e){return!!e.geometry?.coords?.length}var f=class e{constructor(){this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let t=new e;return t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};export{r as i,u as n,d as r,f as t};