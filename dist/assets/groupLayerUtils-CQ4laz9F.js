import{Ba as e,Fa as t,La as n,Na as r,Ra as i}from"./index-ByaFsVj4.js";import"./originUtils-BJaUzj5W.js";import"./resourceUtils-C04-w-fM.js";import{n as a}from"./resourceUtils-DYI0vrsK.js";import"./saveUtils-BB0-rUbr.js";import{n as o,t as s}from"./utils-rHaxpeMj.js";var c=`Group Layer`,l=`group-layer-save`,u=`group-layer-save-as`,d=t.GROUP_LAYER_MAP;function f(e){return{isValid:e.type===`group`,errorMessage:`Layer.type should be 'group'`}}function p(t){return{isValid:e(t,d),errorMessage:`Layer.portalItem.typeKeywords should have '${d}'`}}function m(e,t){return{...r(e,`web-map`,!0),initiator:t}}function h(e){let t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function g(e,r){r.title||=e.title,n(r,t.METADATA),i(r,d)}async function _(e,t){return o({layer:e,itemType:c,validateLayer:f,validateItem:p,createJSONContext:t=>m(t,e),createItemData:h,errorNamePrefix:l,saveResources:async(t,n)=>(e.sourceIsPortalItem||await t.removeAllResources().catch(()=>{}),a(e.resourceReferences,n))},t)}async function v(e,t,n){return s({layer:e,itemType:c,validateLayer:f,createJSONContext:t=>m(t,e),createItemData:h,errorNamePrefix:u,newItem:t,setItemProperties:g,saveResources:(t,n)=>a(e.resourceReferences,n)},n)}export{_ as save,v as saveAs};