const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HUDMaterial.glsl-BBSbsyX2.js","assets/HUDMaterial.glsl-BqTlEc9K.js","assets/index-CZ4oMP1N.js","assets/index-CDgdHpAj.css","assets/Slice.glsl-B4UNza77.js","assets/Float3DrawUniform-CdNiRdHS.js","assets/Uniform-D2x0fAcR.js","assets/glsl-CQsgM67j.js","assets/VisualVariables.glsl-DPoFF9eG.js","assets/FloatsPassUniform-yzynPlDB.js","assets/NoParameters-D8vOu4I5.js","assets/AlphaCutoff-BxDXdpVQ.js","assets/HighlightReadBitmap.glsl-cy3SD0WQ.js","assets/Texture2DBindUniform-DU-6Ejb6.js","assets/Float3PassUniform-tY0I44AO.js","assets/Float4PassUniform-BlgtXzb0.js","assets/ObjectAndLayerIdColor.glsl-xqs4IH1X.js","assets/HUDVisibility.glsl-e56UpBL8.js","assets/VerticalOffset.glsl-CD0ss13J.js","assets/ScreenSizePerspective.glsl-D8mo4yes.js","assets/View.glsl-DCHnRtrH.js","assets/Float3BindUniform-CTBiVhme.js","assets/FloatBindUniform-DmTbQwNg.js","assets/Matrix4BindUniform-DS27O9oA.js","assets/BooleanBindUniform-_2Zs0Oiv.js","assets/Float4BindUniform-DsRDgU9t.js","assets/FloatPassUniform-DkGcNskm.js","assets/TerrainDepthTest.glsl-DLAwRTt4.js","assets/ReadDepth.glsl-CSPikWKN.js","assets/Float2BindUniform-C046qJa3.js","assets/Float2PassUniform-DUjW63UW.js","assets/Texture2DPassUniform-DbQ0ICoe.js","assets/ShaderBuilder-D3cV1oap.js"])))=>i.map(i=>d[i]);
import{$ as e,Al as t,BS as n,Bx as r,Cb as i,Cl as a,Ey as o,Fu as s,HE as c,Hv as l,Im as u,Is as d,Iv as f,Lm as p,Ml as m,Nf as h,Nl as g,Nm as _,Nu as v,OT as y,Ol as b,Pg as x,Rf as S,Wm as C,Wv as w,Y as T,Yg as E,Z as D,al as O,c_ as k,cb as ee,dl as te,dw as ne,et as A,f_ as re,fw as ie,gD as j,jl as M,kl as ae,mt as oe,nf as se,p_ as ce,pl as le,rS as ue,r_ as de,rl as N,sb as fe,tf as pe,tt as me,tx as he,u_ as ge,ul as _e,ut as ve,vf as ye,vl as P,yl as F,zy as be}from"./index-CZ4oMP1N.js";import{o as xe}from"./meshVertexSpaceUtils-CsTvVRUI.js";import{a as Se,n as Ce}from"./Indices-BME9aaDP.js";import{a as we,m as Te,y as Ee}from"./plane-Bg1a5O73.js";import{G as De,H as Oe}from"./BufferView-D7rgY_ku.js";import{a as ke}from"./Util-BF0TzZHY.js";import{n as Ae}from"./dehydratedPoint-rdg1UAtQ.js";import{i as I}from"./orientedBoundingBox-CzNbshh-.js";import{l as je,n as Me,r as Ne,u as Pe}from"./Emissions.glsl-D75sJPX5.js";import{r as Fe}from"./ray-CWXoVP-g.js";import{a as Ie,r as Le}from"./hydratedFeatures-B670wkRA.js";import{n as L,r as Re,t as R}from"./vec3f32-B2H3-fiA.js";import{a as ze,i as Be,n as Ve}from"./renderState-Be6uDhGv.js";import{A as He,C as Ue,E as We,O as Ge,P as z,R as Ke,T as qe,V as Je,b as Ye,g as Xe,h as Ze,k as B,v as Qe,x as $e,y as et}from"./DefaultBufferWriter-BXwy9hB-.js";import{i as tt,t as nt}from"./MaterialUtil-QJlc_rwl.js";import{a as rt,s as it}from"./SceneLighting-DFVSfk4c.js";import{a as at,r as V,s as ot,t as st}from"./FloatArray-DqATud34.js";import{d as ct,f as lt,u as ut}from"./FloatsPassUniform-yzynPlDB.js";import{t as dt}from"./AlphaCutoff-BxDXdpVQ.js";import{i as ft}from"./HUDVisibility.glsl-e56UpBL8.js";import{i as pt,n as mt,t as ht}from"./HUDMaterial.glsl-BqTlEc9K.js";function gt(e,t=!1){return e<=1024?t?Array(e).fill(0):Array(e):De(e)}function _t(e,t,n=null){let r=[],i=t.mapPositions,a=vt(t,r),o=a.data,s=a.indices.length,c=Ce(s);return yt(t,r,c),St(t,r,c),bt(t,r,c),xt(t,r,a.indices,c),Ct(t,r,a.indices,c),wt(t,r),Tt(t,r,a.indices,c),Et(t,r,o),new B(e,r,i,2,n)}function vt(e,t){let{attributeData:{position:n},removeDuplicateStartEnd:r}=e,i=Dt(n)&&r,a=n.length/3-(i?1:0),o=Array(2*(a-1)),s=i?n.slice(0,-3):n,c=0;for(let e=0;e<a-1;e++)o[c++]=e,o[c++]=e+1;let l=new I(s,o,3,i);return t.push([`position`,l]),l}function yt(t,n,r){if(t.attributeData.colorFeature!=null)return;let i=t.attributeData.color;n.push([`color`,new I(i??e,r,4)])}function bt(e,t,n){e.attributeData.normal&&t.push([`normal`,new I(e.attributeData.normal,n,3)])}function xt(e,t,n,r){let i=e.attributeData.colorFeature;i!=null&&(typeof i==`number`?t.push([`colorFeatureAttribute`,new I([i],r,1,!0)]):t.push([`colorFeatureAttribute`,new I(i,n,1,!0)]))}function St(e,t,n){e.attributeData.sizeFeature??t.push([`size`,new I([e.attributeData.size??1],n,1,!0)])}function Ct(e,t,n,r){let i=e.attributeData.sizeFeature;i!=null&&(typeof i==`number`?t.push([`sizeFeatureAttribute`,new I([i],r,1,!0)]):t.push([`sizeFeatureAttribute`,new I(i,n,1,!0)]))}function wt(e,t){let{attributeData:{position:n,timeStamps:r}}=e;if(!r)return;let i=n.length/3,a=Array(2*(i-1)),o=0;for(let e=0;e<i-1;e++)a[o++]=e,a[o++]=e+1;t.push([`timeStamps`,new I(r,a,4,!0)])}function Tt(e,t,n,r){let i=e.attributeData.opacityFeature;i!=null&&(typeof i==`number`?t.push([`opacityFeatureAttribute`,new I([i],r,1,!0)]):t.push([`opacityFeatureAttribute`,new I(i,n,1,!0)]))}function Et(e,t,n){if(e.overlayInfo==null||e.overlayInfo.renderCoordsHelper.viewingMode!==1||!e.overlayInfo.spatialReference.isGeographic)return;let r=h(n.length),a=ue(e.overlayInfo.spatialReference);for(let e=0;e<r.length;e+=3)E(n,e,r,e,a);let o=n.length/3,s=V(o+1),c=Ot,l=kt,u=0,d=0;i(c,r[d++],r[d++]),d++,s[0]=0;for(let e=1;e<o+1;++e)e===o&&(d=0),i(l,r[d++],r[d++]),d++,u+=fe(c,l),s[e]=u,[c,l]=[l,c];t.push([`distanceToStart`,new I(s,t[0][1].indices,1,!0)])}function Dt(e){let t=e.length;return e[0]===e[t-3]&&e[1]===e[t-2]&&e[2]===e[t-1]}var Ot=v(),kt=v();function At(e,t){let n=gt(e.length*4),r=e[0],i=e[e.length-1];for(let a=0;a<e.length;a++)n[a*4]=e[a],n[a*4+1]=r,n[a*4+2]=i,n[a*4+3]=t+.5;return n}function jt(e,t){let n=e[t],r=e[t+1],i=e[t+2];return Math.sqrt(n*n+r*r+i*i)}function Mt(e,t){let n=e[t],r=e[t+1],i=e[t+2],a=1/Math.sqrt(n*n+r*r+i*i);e[t]*=a,e[t+1]*=a,e[t+2]*=a}function Nt(e,t,n){e[t]*=n,e[t+1]*=n,e[t+2]*=n}function Pt(e,t,n,r,i,a=t){(i||=e)[a]=e[t]+n[r],i[a+1]=e[t+1]+n[r+1],i[a+2]=e[t+2]+n[r+2]}function Ft(){return Lt??=It(),Lt}function It(){let e=new I([0,0,0,255,255,0,255,255],[0,1,2,3],2,!0);return new He([[`uv0`,e]])}var Lt=null,Rt=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],zt=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],Bt=[0,0,1,0,1,1,0,1],Vt=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Ht=Array(36);for(let e=0;e<6;e++)for(let t=0;t<6;t++)Ht[6*e+t]=e;var H=Array(36);for(let e=0;e<6;e++)H[6*e]=0,H[6*e+1]=1,H[6*e+2]=2,H[6*e+3]=2,H[6*e+4]=3,H[6*e+5]=0;function Ut(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(24);for(let e=0;e<8;e++)n[3*e]=Rt[e][0]*t[0],n[3*e+1]=Rt[e][1]*t[1],n[3*e+2]=Rt[e][2]*t[2];return new B(e,[[`position`,new I(n,Vt,3,!0)],[`normal`,new I(zt,Ht,3)],[`uv0`,new I(Bt,H,2)]])}var Wt=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],Gt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],Kt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],qt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function Jt(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(18);for(let e=0;e<6;e++)n[3*e]=Wt[e][0]*t[0],n[3*e+1]=Wt[e][1]*t[1],n[3*e+2]=Wt[e][2]*t[2];return new B(e,[[`position`,new I(n,Kt,3,!0)],[`normal`,new I(Gt,qt,3)]])}var Yt=L(-.5,0,-.5),Xt=L(.5,0,-.5),Zt=L(0,0,.5),Qt=L(0,.5,0),U=R(),W=R(),G=R(),K=R(),$t=R();F(U,Yt,Qt),F(W,Yt,Xt),P(G,U,W),N(G,G),F(U,Xt,Qt),F(W,Xt,Zt),P(K,U,W),N(K,K),F(U,Zt,Qt),F(W,Zt,Yt),P($t,U,W),N($t,$t);var en=[Yt,Xt,Zt,Qt],tn=[0,-1,0,G[0],G[1],G[2],K[0],K[1],K[2],$t[0],$t[1],$t[2]],nn=[0,1,2,3,1,0,3,2,1,3,0,2],rn=[0,0,0,1,1,1,2,2,2,3,3,3];function an(e,t){Array.isArray(t)||(t=[t,t,t]);let n=Array(12);for(let e=0;e<4;e++)n[3*e]=en[e][0]*t[0],n[3*e+1]=en[e][1]*t[1],n[3*e+2]=en[e][2]*t[2];return new B(e,[[`position`,new I(n,nn,3,!0)],[`normal`,new I(tn,rn,3)]])}function on(e,t,n,r,i={uv:!0}){let a=-Math.PI,o=2*Math.PI,s=-Math.PI/2,c=Math.PI,l=Math.max(3,Math.floor(n)),u=Math.max(2,Math.floor(r)),d=(l+1)*(u+1),f=V(3*d),p=V(3*d),m=V(2*d),h=[],g=0;for(let e=0;e<=u;e++){let n=[],r=e/u,i=s+r*c,d=Math.cos(i);for(let e=0;e<=l;e++){let s=e/l,c=a+s*o,u=Math.cos(c)*d,h=Math.sin(i),_=-Math.sin(c)*d;f[3*g]=u*t,f[3*g+1]=h*t,f[3*g+2]=_*t,p[3*g]=u,p[3*g+1]=h,p[3*g+2]=_,m[2*g]=s,m[2*g+1]=r,n.push(g),++g}h.push(n)}let _=[];for(let e=0;e<u;e++)for(let t=0;t<l;t++){let n=h[e][t],r=h[e][t+1],i=h[e+1][t+1],a=h[e+1][t];e===0?(_.push(n),_.push(i),_.push(a)):e===u-1?(_.push(n),_.push(r),_.push(i)):(_.push(n),_.push(r),_.push(i),_.push(i),_.push(a),_.push(n))}let v=[[`position`,new I(f,_,3,!0)],[`normal`,new I(p,_,3,!0)]];return i.uv&&v.push([`uv0`,new I(m,_,2,!0)]),i.offset&&(v[0][0]=`offset`,v.push([`position`,new I(Float64Array.from(i.offset),Ce(_.length),3,!0)])),new B(e,v)}function sn(e,t,n,r){let i=cn(t,n,r);return new B(e,i)}function cn(e,t,n){let r=e,i,a;if(n)i=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],a=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{let e=r*(1+Math.sqrt(5))/2;i=[-r,e,0,r,e,0,-r,-e,0,r,-e,0,0,-r,e,0,r,e,0,-r,-e,0,r,-e,e,0,-r,e,0,r,-e,0,-r,-e,0,r],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let t=0;t<i.length;t+=3)Nt(i,t,e/jt(i,t));let o={};function s(t,n){t>n&&([t,n]=[n,t]);let r=t.toString()+`.`+n.toString();if(o[r])return o[r];let a=i.length;return i.length+=3,Pt(i,3*t,i,3*n,i,a),Nt(i,a,e/jt(i,a)),a/=3,o[r]=a,a}for(let e=0;e<t;e++){let e=a.length,t=Array(4*e);for(let n=0;n<e;n+=3){let e=a[n],r=a[n+1],i=a[n+2],o=s(e,r),c=s(r,i),l=s(i,e),u=4*n;t[u]=e,t[u+1]=o,t[u+2]=l,t[u+3]=r,t[u+4]=c,t[u+5]=o,t[u+6]=i,t[u+7]=l,t[u+8]=c,t[u+9]=o,t[u+10]=c,t[u+11]=l}a=t,o={}}let c=st(i);for(let e=0;e<c.length;e+=3)Mt(c,e);return[[`position`,new I(st(i),a,3,!0)],[`normal`,new I(c,a,3,!0)]]}function ln(e,{normal:t,position:n,color:r,rotation:i,size:a,centerOffsetAndDistance:o,uvi:s,featureAttribute:c,olidColor:l=null}={}){let u=n?re(n):k(),d=t?re(t):ge(0,0,1),f=r?[r[0],r[1],r[2],r.length>3?r[3]:255]:[255,255,255,255],p=a!=null&&a.length===2?a:[1,1],m=i==null?[0]:[i],h=Ce(1),g=[[`position`,new I(u,h,3,!0)],[`normal`,new I(d,h,3,!0)],[`color`,new I(f,h,4,!0)],[`size`,new I(p,h,2)],[`rotation`,new I(m,h,1,!0)]];if(s&&g.push([`uvi`,new I(s,h,s.length)]),o!=null){let e=[o[0],o[1],o[2],o[3]];g.push([`centerOffsetAndDistance`,new I(e,h,4)])}if(c){let e=[c[0],c[1],c[2],c[3]];g.push([`featureAttribute`,new I(e,h,4)])}return new B(e,g,null,1,l,void 0,Ft())}function un(e,t,n,r,i=!0,a=!0){let o=0,s=t,c=e,l=L(0,o,0),u=L(0,o+c,0),d=L(0,-1,0),f=L(0,1,0);r&&(o=c,u=L(0,0,0),l=L(0,o,0),d=L(0,1,0),f=L(0,-1,0));let p=[u,l],m=[d,f],h=n+2,g=Math.sqrt(c*c+s*s);if(r)for(let e=n-1;e>=0;e--){let t=e*(2*Math.PI/n),r=L(Math.cos(t)*s,o,Math.sin(t)*s);p.push(r);let i=L(c*Math.cos(t)/g,-s/g,c*Math.sin(t)/g);m.push(i)}else for(let e=0;e<n;e++){let t=e*(2*Math.PI/n),r=L(Math.cos(t)*s,o,Math.sin(t)*s);p.push(r);let i=L(c*Math.cos(t)/g,s/g,c*Math.sin(t)/g);m.push(i)}let _=[],v=[];if(i){for(let e=3;e<p.length;e++)_.push(1),_.push(e-1),_.push(e),v.push(0),v.push(0),v.push(0);_.push(p.length-1),_.push(2),_.push(1),v.push(0),v.push(0),v.push(0)}if(a){for(let e=3;e<p.length;e++)_.push(e),_.push(e-1),_.push(0),v.push(e),v.push(e-1),v.push(1);_.push(0),_.push(2),_.push(p.length-1),v.push(1),v.push(2),v.push(m.length-1)}let y=V(3*h);for(let e=0;e<h;e++)y[3*e]=p[e][0],y[3*e+1]=p[e][1],y[3*e+2]=p[e][2];let b=V(3*h);for(let e=0;e<h;e++)b[3*e]=m[e][0],b[3*e+1]=m[e][1],b[3*e+2]=m[e][2];return[[`position`,new I(y,_,3,!0)],[`normal`,new I(b,v,3,!0)]]}function dn(e,t,n,r,i,a=!0,o=!0){return new B(e,un(t,n,r,i,a,o))}function fn(e,t,n,r,i,o,s){let c=i?Re(i):L(1,0,0),l=o?Re(o):L(0,0,0);s??=!0;let u=R();N(u,c);let d=R();a(d,u,Math.abs(t));let f=R();a(f,d,-.5),g(f,f,l);let p=L(0,1,0);Math.abs(1-te(u,p))<.2&&b(p,0,0,1);let m=R();P(m,u,p),N(m,m),P(p,m,u);let h=2*r+(s?2:0),_=r+(s?2:0),v=V(3*h),y=V(3*_),x=V(2*h),S=Array(3*r*(s?4:2)),C=Array(3*r*(s?4:2));s&&(v[3*(h-2)]=f[0],v[3*(h-2)+1]=f[1],v[3*(h-2)+2]=f[2],x[2*(h-2)]=0,x[2*(h-2)+1]=0,v[3*(h-1)]=v[3*(h-2)]+d[0],v[3*(h-1)+1]=v[3*(h-2)+1]+d[1],v[3*(h-1)+2]=v[3*(h-2)+2]+d[2],x[2*(h-1)]=1,x[2*(h-1)+1]=1,y[3*(_-2)]=-u[0],y[3*(_-2)+1]=-u[1],y[3*(_-2)+2]=-u[2],y[3*(_-1)]=u[0],y[3*(_-1)+1]=u[1],y[3*(_-1)+2]=u[2]);let w=(e,t,n)=>{S[e]=t,C[e]=n},T=0,E=R(),D=R();for(let e=0;e<r;e++){let t=e*(2*Math.PI/r);a(E,p,Math.sin(t)),a(D,m,Math.cos(t)),g(E,E,D),y[3*e]=E[0],y[3*e+1]=E[1],y[3*e+2]=E[2],a(E,E,n),g(E,E,f),v[3*e]=E[0],v[3*e+1]=E[1],v[3*e+2]=E[2],x[2*e]=e/r,x[2*e+1]=0,v[3*(e+r)]=v[3*e]+d[0],v[3*(e+r)+1]=v[3*e+1]+d[1],v[3*(e+r)+2]=v[3*e+2]+d[2],x[2*(e+r)]=e/r,x[2*e+1]=1;let i=(e+1)%r;w(T++,e,e),w(T++,e+r,e),w(T++,i,i),w(T++,i,i),w(T++,e+r,e),w(T++,i+r,i)}if(s){for(let e=0;e<r;e++){let t=(e+1)%r;w(T++,h-2,_-2),w(T++,e,_-2),w(T++,t,_-2)}for(let e=0;e<r;e++){let t=(e+1)%r;w(T++,e+r,_-1),w(T++,h-1,_-1),w(T++,t+r,_-1)}}let O=[[`position`,new I(v,S,3,!0)],[`normal`,new I(y,C,3,!0)],[`uv0`,new I(x,S,2,!0)]];return new B(e,O)}function pn(e,t,n,r,i,a){r||=10,i=i==null||i,ke(t.length>1);let o=[[0,0,0]],s=[],c=[];for(let e=0;e<r;e++){s.push([0,-e-1,-(e+1)%r-1]);let t=e/r*2*Math.PI;c.push([Math.cos(t)*n,Math.sin(t)*n])}return mn(e,c,t,o,s,i,a)}function mn(e,t,n,r,i,o,s=L(0,0,0)){let c=t.length,l=V(n.length*c*3+(6*r.length||0)),u=V(n.length*c*3+(r?6:0)),d=[],f=[],p=0,h=0,_=k(),v=k(),y=k(),x=k(),S=k(),C=k(),w=k(),T=k(),E=k(),D=k(),O=k(),ee=k(),te=k(),ne=Ee();b(E,0,1,0),F(v,n[1],n[0]),N(v,v),o?(g(T,n[0],s),N(y,T)):b(y,0,0,1),bn(v,y,E,E,S,y,xn),m(x,y),m(ee,S);for(let e=0;e<r.length;e++)a(C,S,r[e][0]),a(T,y,r[e][2]),g(C,C,T),g(C,C,n[0]),l[p++]=C[0],l[p++]=C[1],l[p++]=C[2];u[h++]=-v[0],u[h++]=-v[1],u[h++]=-v[2];for(let e=0;e<i.length;e++)d.push(i[e][0]>0?i[e][0]:-i[e][0]-1+r.length),d.push(i[e][1]>0?i[e][1]:-i[e][1]-1+r.length),d.push(i[e][2]>0?i[e][2]:-i[e][2]-1+r.length),f.push(0),f.push(0),f.push(0);let A=r.length,re=r.length-1;for(let e=0;e<n.length;e++){let r=!1;e>0&&(m(_,v),e<n.length-1?(F(v,n[e+1],n[e]),N(v,v)):r=!0,g(D,_,v),N(D,D),g(O,n[e-1],x),Te(n[e],D,ne),we(ne,Fe(O,_),T)?(F(T,T,n[e]),N(y,T),P(S,D,y),N(S,S)):bn(D,x,ee,E,S,y,xn),m(x,y),m(ee,S)),o&&(g(T,n[e],s),N(te,T));for(let i=0;i<c;i++)if(a(C,S,t[i][0]),a(T,y,t[i][1]),g(C,C,T),N(w,C),u[h++]=w[0],u[h++]=w[1],u[h++]=w[2],g(C,C,n[e]),l[p++]=C[0],l[p++]=C[1],l[p++]=C[2],!r){let e=(i+1)%c;d.push(A+i),d.push(A+c+i),d.push(A+e),d.push(A+e),d.push(A+c+i),d.push(A+c+e);for(let e=0;e<6;e++){let t=d.length-6;f.push(d[t+e]-re)}}A+=c}let ie=n[n.length-1];for(let e=0;e<r.length;e++)a(C,S,r[e][0]),a(T,y,r[e][1]),g(C,C,T),g(C,C,ie),l[p++]=C[0],l[p++]=C[1],l[p++]=C[2];let j=h/3;u[h++]=v[0],u[h++]=v[1],u[h++]=v[2];let M=A-c;for(let e=0;e<i.length;e++)d.push(i[e][0]>=0?A+i[e][0]:-i[e][0]-1+M),d.push(i[e][2]>=0?A+i[e][2]:-i[e][2]-1+M),d.push(i[e][1]>=0?A+i[e][1]:-i[e][1]-1+M),f.push(j),f.push(j),f.push(j);let ae=[[`position`,new I(l,d,3,!0)],[`normal`,new I(u,f,3,!0)]];return new B(e,ae)}function hn(e,t,n,r,i){let a=h(3*t.length),o=Array(2*(t.length-1)),s=0,c=0;for(let e=0;e<t.length;e++){for(let n=0;n<3;n++)a[s++]=t[e][n];e>0&&(o[c++]=e-1,o[c++]=e)}let l=[[`position`,new I(a,o,3,!0)]];if(n&&n.length===t.length&&n[0].length===3){let e=V(3*n.length),r=0;for(let i=0;i<t.length;i++)for(let t=0;t<3;t++)e[r++]=n[i][t];l.push([`normal`,new I(e,o,3,!0)])}if(r&&l.push([`color`,new I(r,Se(r.length/4),4)]),i&&i.length===t.length){let e=At(i,1);l.push([`timeStamps`,new I(e,o,4,!0)])}return new B(e,l,null,2)}function gn(e,t,n,r,i,a=0){let o=Array(18),s=[[-n,a,i/2],[r,a,i/2],[0,t+a,i/2],[-n,a,-i/2],[r,a,-i/2],[0,t+a,-i/2]],c=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let e=0;e<6;e++)o[3*e]=s[e][0],o[3*e+1]=s[e][1],o[3*e+2]=s[e][2];return new B(e,[[`position`,new I(o,c,3,!0)]])}function _n(e,t){let n=e.getMutableAttribute(`position`).data;for(let e=0;e<n.length;e+=3){let r=n[e],i=n[e+1],a=n[e+2];b(Sn,r,i,a),O(Sn,Sn,t),n[e]=Sn[0],n[e+1]=Sn[1],n[e+2]=Sn[2]}}function vn(e,t=e){let n=e.attributes,r=n.get(`position`).data,i=n.get(`normal`).data;if(i){let e=t.getMutableAttribute(`normal`).data;for(let t=0;t<i.length;t+=3){let n=i[t+1];e[t+1]=-i[t+2],e[t+2]=n}}if(r){let e=t.getMutableAttribute(`position`).data;for(let t=0;t<r.length;t+=3){let n=r[t+1];e[t+1]=-r[t+2],e[t+2]=n}}}function yn(e,t,n,r,i){return!(Math.abs(te(t,e))>i)&&(P(n,e,t),N(n,n),P(r,n,e),N(r,r),!0)}function bn(e,t,n,r,i,a,o){return yn(e,t,i,a,o)||yn(e,n,i,a,o)||yn(e,r,i,a,o)}var xn=.99619469809,Sn=k();function Cn(e){return e.type===`point`}var wn=class extends rt{constructor(e,t){super(e,t,ot(En).concat(ot(kn()))),this.shader=new it(mt,()=>n(()=>import(`./HUDMaterial.glsl-BBSbsyX2.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]))),this.primitiveType=t.occlusionPass?d.POINTS:d.TRIANGLE_STRIP}initializePipeline(e){let{oitPass:t,hasEmission:n,hasPolygonOffset:r,draped:i,output:a,depthTestEnabled:o,occlusionPass:s}=e,c=o&&!i&&t!==1&&!s&&a!==8;return Ve({blending:je(a)?Ke(t,!0):null,depthTest:o&&!i?{func:515}:null,depthWrite:c?Be:null,drawBuffers:Je(t,n),colorWrite:ze,polygonOffset:r?Tn:null})}};wn=j([y(`esri.views.3d.webgl-engine.shaders.HUDMaterialTechnique`)],wn);var Tn={factor:0,units:-4},En=at().vec2u8(`uv0`,{glNormalized:!0}),Dn=at().vec3f(`position`).vec3f(`normal`).vec4i16(`uvi`).vec4u8(`color`).vec2f(`size`).f32(`rotation`).vec4f(`centerOffsetAndDistance`).vec4f(`featureAttribute`),On=Dn.clone().vec4u8(`olidColor`);function kn(){return ct()?On:Dn}var q=class extends Ge{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.visibilityPixelEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.hasVVSize=!1,this.hasVVColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!0,this.isFocused=!0,this.olidColorInstanced=!1,this.textureCoordinateType=0,this.emissionSource=0,this.discardInvisibleFragments=!0,this.hasVVInstancing=!1,this.snowCover=!1}};j([z()],q.prototype,`screenCenterOffsetUnitsEnabled`,void 0),j([z()],q.prototype,`visibilityPixelEnabled`,void 0),j([z()],q.prototype,`signedDistanceFieldEnabled`,void 0),j([z()],q.prototype,`sampleSignedDistanceFieldTexelCenter`,void 0),j([z()],q.prototype,`hasVVSize`,void 0),j([z()],q.prototype,`hasVVColor`,void 0),j([z()],q.prototype,`hasVerticalOffset`,void 0),j([z()],q.prototype,`hasScreenSizePerspective`,void 0),j([z()],q.prototype,`hasRotation`,void 0),j([z()],q.prototype,`debugDrawLabelBorder`,void 0),j([z()],q.prototype,`hasPolygonOffset`,void 0),j([z()],q.prototype,`depthTestEnabled`,void 0),j([z()],q.prototype,`pixelSnappingEnabled`,void 0),j([z()],q.prototype,`draped`,void 0),j([z()],q.prototype,`terrainDepthTest`,void 0),j([z()],q.prototype,`cullAboveTerrain`,void 0),j([z()],q.prototype,`occlusionPass`,void 0),j([z()],q.prototype,`occludedFragmentFade`,void 0),j([z()],q.prototype,`horizonCullingEnabled`,void 0),j([z()],q.prototype,`isFocused`,void 0);var An=class extends We{constructor(e,t){super(e,Yn),this.produces=new Map([[14,e=>Pe(e)&&!this.parameters.drawAsLabel],[15,e=>Pe(e)&&this.parameters.drawAsLabel],[13,()=>this.parameters.useVisibilityPixel],[19,e=>this.parameters.draped&&Pe(e)]]),this._visible=!0,this._configuration=new q(t)}getConfiguration(e,t){let n=this.parameters.draped;return super.getConfiguration(e,t,this._configuration),this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled=this.parameters.centerOffsetUnits===`screen`,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=n,this._configuration.visibilityPixelEnabled=this.parameters.useVisibilityPixel,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.hasVVSize=!!this.parameters.vvSize,this._configuration.hasVVColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===13,this._configuration.occludedFragmentFade=!n&&this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.isFocused=this.parameters.isFocused,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===13,je(e)&&(this._configuration.debugDrawLabelBorder=!!lt.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,n,r,i,o,s){let{options:{selectionMode:c,hud:l,excludeLabels:u},point:d,camera:f}=r,{parameters:p}=this;if(!c||!l||u&&p.isLabel||!e.visible||!d||!f)return;let h=e.attributes.get(`featureAttribute`),g=h==null?null:me(h.data,Wn),{scaleX:v,scaleY:y}=Zn(g,p,f.pixelRatio),x=e.attributes.get(`position`),S=e.attributes.get(`size`),C=e.attributes.get(`normal`),w=e.attributes.get(`rotation`),T=e.attributes.get(`centerOffsetAndDistance`);ke(x.size>=3);let E=ht(p),D=this.parameters.centerOffsetUnits===`screen`;for(let e=0;e<x.data.length/x.size;e++){let i=e*x.size;b(J,x.data[i],x.data[i+1],x.data[i+2]),O(J,J,n),O(J,J,f.viewMatrix);let o=e*T.size;if(b(Z,T.data[o],T.data[o+1],T.data[o+2]),!D&&(J[0]+=Z[0],J[1]+=Z[1],Z[2]!==0)){let e=Z[2];N(Z,J),F(J,J,a(Z,Z,e))}let c=e*C.size;b(Y,C.data[c],C.data[c+1],C.data[c+2]),_e(Y,Y,be(Bn,n));let{normal:l,cosAngle:u}=Nn(Y,f,Gn),h=$n(this.parameters,J,u,f,Fn);if(t(J,J,l,h),f.applyProjection(J,X),X[0]>-1){D&&(Z[0]||Z[1])&&(X[0]+=Z[0]*f.pixelRatio,Z[1]!==0&&(X[1]+=Fn.alignmentEvaluator.apply(Z[1])*f.pixelRatio),f.unapplyProjection(X,J)),X[0]+=this.parameters.screenOffset[0]*f.pixelRatio,X[1]+=this.parameters.screenOffset[1]*f.pixelRatio,X[0]=Math.floor(X[0]),X[1]=Math.floor(X[1]);let t=e*S.size;Q[0]=S.data[t],Q[1]=S.data[t+1],Fn.evaluator.applyVec2(Q,Q);let n=Kn*f.pixelRatio,i=0;p.textureIsSignedDistanceField&&(i=Math.min(p.outlineSize,.5*Q[0])*f.pixelRatio/2),Q[0]*=v,Q[1]*=y;let o=e*w.size,c=p.rotation+w.data[o];if(Pn(d,X[0],X[1],Q,n,i,c,p,E)){let e=r.ray;if(O(Ln,J,_(Vn,f.viewMatrix)),X[0]=d[0],X[1]=d[1],f.unprojectFromRenderScreen(X,J)){let t=k();m(t,e.direction);let n=1/M(t);a(t,t,n),s(ae(e.origin,J)*n,t,-1,Ln)}}}}}intersectDraped(e,t,n,r,i){let a=e.attributes.get(`position`),o=e.attributes.get(`size`),s=e.attributes.get(`rotation`),c=this.parameters,l=ht(c),u=e.attributes.get(`featureAttribute`),d=u==null?null:me(u.data,Wn),{scaleX:f,scaleY:p}=Zn(d,c,e.screenToWorldRatio),m=qn*e.screenToWorldRatio;for(let t=0;t<a.data.length/a.size;t++){let u=t*a.size,d=a.data[u],h=a.data[u+1],g=t*o.size;Q[0]=o.data[g],Q[1]=o.data[g+1];let _=0;c.textureIsSignedDistanceField&&(_=Math.min(c.outlineSize,.5*Q[0])*e.screenToWorldRatio/2),Q[0]*=f,Q[1]*=p;let v=t*s.size,y=c.rotation+s.data[v];Pn(n,d,h,Q,m,_,y,c,l)&&r(i.distance,i.normal,-1)}}createBufferWriter(){return new Xn}applyShaderOffsets(e,n,r,i,a,o,s){_e(In,r,be(Bn,i));let c=Nn(In,o,Gn),l=Qn(M(n),o),u=$n(this.parameters,n,c.cosAngle,o,s);t(n,n,c.normal,u+l),t(e,e,In,u+l);let d=a[3]+u;this._applyPolygonOffsetView(n,c,d,o,n),this._applyCenterOffsetView(n,a,n)}applyShaderOffsetsNDC(e,t,n,r,i){return this._applyCenterOffsetNDC(e,t,n,r),i!=null&&m(i,r),this._applyPolygonOffsetNDC(r,t,n,r),r}_applyPolygonOffsetView(e,t,n,r,i){let o=r.aboveGround?1:-1,s=Math.sign(n);s===0&&(s=o);let c=o*s;if(this.parameters.shaderPolygonOffset<=0)return m(i,e);let l=ne(Math.abs(t.cosAngle),.01,1),u=1-Math.sqrt(1-l*l)/l/r.viewport[2];return a(i,e,c>0?u:1/u),i}_applyCenterOffsetView(e,t,n){let r=this.parameters.centerOffsetUnits!==`screen`;return n!==e&&m(n,e),r&&(n[0]+=t[0],n[1]+=t[1],t[2]&&(N(Y,n),le(n,n,a(Y,Y,t[2])))),n}_applyCenterOffsetNDC(e,t,n,r){let i=this.parameters.centerOffsetUnits!==`screen`;return r!==e&&m(r,e),i||(r[0]+=t[0]/n.fullWidth*2,r[1]+=t[1]/n.fullHeight*2),r}_applyPolygonOffsetNDC(e,t,n,r){let i=this.parameters.shaderPolygonOffset;if(e!==r&&m(r,e),i){let e=n.aboveGround?1:-1,a=e*Math.sign(t[3]);r[2]-=(a||e)*i}return r}set visible(e){this._visible=e}get visible(){let{color:e,outlineSize:t,outlineColor:n}=this.parameters,r=e[3]>=.003913894324853229||t>=.003913894324853229&&n[3]>=.003913894324853229;return this._visible&&r}createGLMaterial(e){return new jn(e)}calculateRelativeScreenBounds(e,t,n=he()){return Mn(this.parameters,e,t,n),n[2]=n[0]+e[0],n[3]=n[1]+e[1],n}},jn=class extends Ne{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(wn,e)}};function Mn(e,t,n,r){r[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*n,r[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*n}function Nn(e,t,n){return O(n.normal,e,t.viewInverseTransposeMatrix),n.cosAngle=te(n.normal,Jn),n}function Pn(e,t,n,r,a,o,s,c,l){let u=t-a-r[0]*l[0],d=u+r[0]+2*a,f=n-a-r[1]*l[1],p=f+r[1]+2*a,m=c.distanceFieldBoundingBox;return c.textureIsSignedDistanceField&&m!=null&&(u+=r[0]*m[0],f+=r[1]*m[1],d-=r[0]*(1-m[2]),p-=r[1]*(1-m[3]),u-=o,d+=o,f-=o,p+=o),i(zn,t,n),ee(Rn,e,zn,ie(s)),Rn[0]>u&&Rn[0]<d&&Rn[1]>f&&Rn[1]<p}var Fn=new tt,J=k(),Y=k(),X=D(),In=k(),Ln=k(),Rn=v(),zn=v(),Bn=o(),Vn=S(),Hn=D(),Z=k(),Un=k(),Wn=D(),Gn={normal:k(),cosAngle:0},Kn=1,qn=2,Q=s(0,0),Jn=ge(0,0,1),Yn=class extends Me{constructor(){super(...arguments),this.renderOccluded=1,this.isDecoration=!1,this.color=T(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=s(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=T(1,1,1,1),this.outlineSize=0,this.distanceFieldBoundingBox=D(),this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.useVisibilityPixel=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.occludedVisibilityMode=`hidden`,this.centerOffsetUnits=`world`,this.drawAsLabel=!1,this.depthEnabled=!0,this.isFocused=!0,this.focusStyle=`bright`,this.draped=!1,this.isLabel=!1}get hasVVSize(){return!!this.vvSize}get hasVVColor(){return!!this.vvColor}get hasVVOpacity(){return!!this.vvOpacity}},Xn=class{constructor(){this.layout=kn(),this.baseInstanceLayout=En}elementCount(e){return e.get(`position`).indices.length}elementCountBaseInstance(e){return e.get(`uv0`).indices.length}write(e,t,n,r,i,a){let{position:o,normal:s,color:c,size:l,rotation:u,centerOffsetAndDistance:d,featureAttribute:f,uvi:p}=i;qe(n.get(`position`),e,o,a),et(n.get(`normal`),t,s,a);let m=n.get(`position`).indices.length,h=0,g=0,_=pt,v=pt,y=n.get(`uvi`)?.data;y&&y.length>=4&&(h=y[0],g=y[1],_=y[2],v=y[3]);for(let e=0;e<m;++e){let t=a+e;p.setValues(t,h,g,_,v)}if(Qe(n.get(`color`),4,c,a),Ue(n.get(`size`),l,a),Ye(n.get(`rotation`),u,a),n.get(`centerOffsetAndDistance`)?$e(n.get(`centerOffsetAndDistance`),d,a):Xe(d,a,m),n.get(`featureAttribute`)?$e(n.get(`featureAttribute`),f,a):Xe(f,a,m),r!=null){let e=n.get(`position`)?.indices;if(e){let t=e.length,n=i.getField(`olidColor`,Oe);Ze(r,n,t,a)}}return{numVerticesPerItem:1,numItems:m}}writeBaseInstance(e,t){let{uv0:n}=t;Ue(e.get(`uv0`),n,0)}intersect(e,n,r,i,o,s,c){let{options:{selectionMode:l,hud:u,excludeLabels:d},point:f,camera:p}=i;if(!l||!u||d&&n.isLabel||!f)return;let h=this.layout.createView(e),{position:v,normal:y,rotation:x,size:S,featureAttribute:C,centerOffsetAndDistance:w}=h,T=n.centerOffsetUnits===`screen`,E=ht(n);if(v==null||y==null||x==null||S==null||w==null||p==null)return;let D=C==null?null:C.getVec(0,Wn),{scaleX:ee,scaleY:te}=Zn(D,n,p.pixelRatio),ne=v.count;for(let e=0;e<ne;e++){if(v.getVec(e,J),r!=null&&g(J,J,r),O(J,J,p.viewMatrix),w.getVec(e,Hn),b(Z,Hn[0],Hn[1],Hn[2]),!T&&(J[0]+=Z[0],J[1]+=Z[1],Z[2]!==0)){let e=Z[2];N(Z,J),F(J,J,a(Z,Z,e))}y.getVec(e,Y),Nn(Y,p,Gn);let o=$n(n,J,Gn.cosAngle,p,Fn);if(t(J,J,Gn.normal,o),p.applyProjection(J,X),X[0]>-1){T&&(Z[0]||Z[1])&&(X[0]+=Z[0]*p.pixelRatio,Z[1]!==0&&(X[1]+=Fn.alignmentEvaluator.apply(Z[1])*p.pixelRatio),p.unapplyProjection(X,J)),X[0]+=n.screenOffset[0]*p.pixelRatio,X[1]+=n.screenOffset[1]*p.pixelRatio,X[0]=Math.floor(X[0]),X[1]=Math.floor(X[1]),S.getVec(e,Q),Fn.evaluator.applyVec2(Q,Q);let t=Kn*p.pixelRatio,r=0;n.textureIsSignedDistanceField&&(r=Math.min(n.outlineSize,.5*Q[0])*p.pixelRatio/2),Q[0]*=ee,Q[1]*=te;let o=x.get(e),s=n.rotation+o;if(Pn(f,X[0],X[1],Q,t,r,s,n,E)){let t=i.ray;if(O(Ln,J,_(Vn,p.viewMatrix)),X[0]=f[0],X[1]=f[1],p.unprojectFromRenderScreen(X,J)){let n=k();m(n,t.direction);let r=1/M(n);a(n,n,r),c(ae(t.origin,J)*r,n,e,Ln)}}}}}};function Zn(e,t,n){return e==null||t.vvSize==null?{scaleX:n,scaleY:n}:(ut(Un,t,e),{scaleX:Un[0]*n,scaleY:Un[1]*n})}function Qn(e,t){let n=t.computeRenderPixelSizeAtDist(e)*ft;return(t.aboveGround?1:-1)*n}function $n(e,t,n,r,i){if(!e.verticalOffset?.screenLength){let r=M(t);return i.update(n,r,e.screenSizePerspective,e.screenSizePerspectiveMinPixelReferenceSize,e.screenSizePerspectiveAlignment,null),0}let a=M(t),o=e.screenSizePerspectiveAlignment??e.screenSizePerspective,s=nt(r,a,e.verticalOffset,n,o,e.screenSizePerspectiveMinPixelReferenceSize);return i.update(n,a,e.screenSizePerspective,e.screenSizePerspectiveMinPixelReferenceSize,e.screenSizePerspectiveAlignment,null),s}function er(e,t){if(e.type===`point`)return $(e,t,!1);if(Le(e))switch(e.type){case`extent`:return $(e.center,t,!1);case`polygon`:return $(rr(e),t,!1);case`polyline`:return $(tr(e),t,!0);case`mesh`:return $(xe(e.vertexSpace,e.spatialReference)??e.extent.center,t,!1);case`multipoint`:return}else switch(e.type){case`extent`:return $(nr(e),t,!0);case`polygon`:return $(rr(e),t,!0);case`polyline`:return $(tr(e),t,!0);case`multipoint`:return}}function tr(e){let t=e.paths[0];if(!t||t.length===0)return null;let n=w(t,l(t)/2);return Ae(n[0],n[1],n[2],e.spatialReference)}function nr(e){return Ae(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),e.zmin!=null&&e.zmax!=null&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function rr(e){let t=e.rings[0];if(!t||t.length===0)return null;let n=f(e.rings,!!e.hasZ);return Ae(n[0],n[1],n[2],e.spatialReference)}function $(e,t,n){let r=n?e:Ie(e);return t&&e?x(e,r,t)?r:null:r}function ir(e,t,n,r=0){if(e){t||=he();let i=e,a=.5*i.width*(n-1),o=.5*i.height*(n-1);return i.width<1e-7*i.height?a+=o/20:i.height<1e-7*i.width&&(o+=a/20),oe(t,i.xmin-a-r,i.ymin-o-r,i.xmax+a+r,i.ymax+o+r),t}return null}function ar(t,n,r=null){let i=A(e);return t!=null&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],t.length>3&&(i[3]=t[3])),n!=null&&(i[3]=n),r&&ve(i,i,r),i}function or(e=de,t,n,r=1){let i=[,,,];if(t==null||n==null)i[0]=1,i[1]=1,i[2]=1;else{let r,a=0;for(let o=2;o>=0;o--){let s=e[o],c=s!=null,l=o===0&&!r&&!c,u=n[o],d;s===`symbol-value`||l?d=u===0?1:t[o]/u:c&&s!==`proportional`&&isFinite(s)&&(d=u===0?1:s/u),d!=null&&(i[o]=d,r=d,a=Math.max(a,Math.abs(d)))}for(let e=2;e>=0;e--)i[e]==null?i[e]=r:i[e]===0&&(i[e]=.001*a)}for(let e=2;e>=0;e--)i[e]/=r;return ce(i)}function sr(e){return e.isPrimitive!=null}function cr(e){return lr(sr(e)?[e.width,e.depth,e.height]:e)?null:`Symbol sizes may not be negative values`}function lr(e){let t=e=>e==null||e>=0;return Array.isArray(e)?e.every(t):t(e)}function ur(e,t,n,r=S()){return e&&C(r,r,-e/180*Math.PI),t&&u(r,r,t/180*Math.PI),n&&p(r,r,n/180*Math.PI),r}function dr(e,t,n){if(n.minDemResolution!=null)return n.minDemResolution;let i=r(t),a=ye(e)*i,o=pe(e)*i,s=se(e)*(t.isGeographic?1:i);return a===0&&o===0&&s===0?n.minDemResolutionForPoints:.01*Math.max(a,o,s)}export{un as C,_n as D,fn as E,_t as O,mn as S,cn as T,bn as _,or as a,sn as b,er as c,gn as d,Ut as f,vn as g,ln as h,dr as i,gt as k,An as l,Jt as m,ar as n,cr as o,hn as p,ur as r,lr as s,ir as t,Cn as u,dn as v,an as w,on as x,pn as y};