const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/meshFeatureSet-DsI3p-3E.js","assets/index-CzMixifc.js","assets/index-CDgdHpAj.css","assets/earcut-CsNwSYFA.js","assets/vec3-D13Z1xO0.js","assets/vec4-CJBDH7oG.js","assets/vectorStacks-BQiry9fn.js","assets/quatf64-eO7UAs9K.js","assets/quat-XKFzqP_i.js","assets/Mesh-C4QPhA-0.js","assets/computeTranslationToOriginAndRotation-DwwRDWAD.js","assets/projectPointToVector-D72S8Uh5.js","assets/spatialReferenceEllipsoidUtils-b6wDfyu0.js","assets/MeshComponent-B_wmH396.js","assets/MeshMaterialMetallicRoughness-dLgvoHFj.js","assets/meshCloneUtils-5rtyOBgA.js","assets/meshProperties-DwrhStLW.js","assets/MeshLocalVertexSpace-Dfv_NBsU.js","assets/MeshTransform-BGwY5MT4.js","assets/axisAngleDegrees-GaSk0_KM.js","assets/MeshVertexAttributes-Dvo9ht5s.js","assets/External-BGzO9MR2.js","assets/vertexSpaceConversion-WXuyjrGI.js","assets/BufferView-BPABY7if.js","assets/Util-YNFIi00s.js","assets/meshVertexSpaceUtils-CrM2H6JB.js","assets/triangulationUtils-DZOlYzLu.js","assets/Indices-DELx3He_.js","assets/deduplicate-C8bQBzHi.js","assets/plane--nqwMDYx.js","assets/meshFeatureAttributes-BiaxiIdJ.js","assets/RelationshipQuery-Dxt9LBB9.js","assets/executeRelationshipQuery-CeC3Judk.js","assets/urlUtils-7tPnOsRB.js","assets/queryRelatedRecords-tkpAEmVF.js","assets/queryAttachments-CaBVGjF4.js","assets/AttachmentInfo-COZ0ISIZ.js","assets/executeAttributeBinsQuery-D73lqAA6.js","assets/AttributeBinsFeatureSet-CLvBH7iE.js","assets/queryUtils-fxq7u50x.js","assets/FixedIntervalBinParameters-5fcY6iRA.js","assets/AttributeBinsQuery-BqDFZU-T.js","assets/executePivotQuery-Bc0FTiTa.js","assets/queryUtils-ByyjBzze.js","assets/PivotQuery-oj9Nn1TH.js","assets/executeTopFeaturesQuery-JoyKtIRg.js","assets/queryTopFeatures-DwlpF06W.js","assets/TopFeaturesQuery-B8XxYHUC.js","assets/executeForTopIds-QyqOykks.js","assets/executeForTopExtents-CeEHMzgf.js","assets/executeForTopCount-BmSMew94.js"])))=>i.map(i=>d[i]);
import{$w as e,BS as t,BT as n,DT as r,OT as i,Wn as a,_S as o,_w as s,cd as c,gC as l,gD as u,ha as d,hu as f,pD as p,rd as m}from"./index-CzMixifc.js";import{n as h,r as g,t as _}from"./executeForIds-D5xadeH1.js";import{t as v}from"./executeQueryJSON-BmDY9cVm.js";import{t as y}from"./executeQueryPBF-Brhxo-EH.js";var b=class extends s{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return l(this.url)}async execute(e,t){let n=await this.executeJSON(e,t);return this.featureSetFromJSON(e,n,t)}async executeJSON(e,t){let n=this._normalizeQuery(e),r=e.outStatistics?.[0]!=null,i=p(`featurelayer-pbf-statistics`),a=(!r||i)&&!0!==e.returnTrueCurves,o;if(this.pbfSupported&&a)try{o=await y(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})}catch(e){if(e.name!==`query:parsing-pbf`)throw e;this.pbfSupported=!1}return this.pbfSupported&&a||(o=await v(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(o.fields),o}async featureSetFromJSON(n,r,i){if(!this._queryGet3DObjectFormat(n)||this.infoFor3D==null||!r.features)return d.fromJSON(r);let{meshFeatureSetFromJSON:a}=await e(t(()=>import(`./meshFeatureSet-DsI3p-3E.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])),i);return a(n,this.infoFor3D,r)}executeForCount(e,t){return g(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,t){return h(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return _(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(n,r){let[{default:i},{executeRelationshipQuery:a}]=await e(Promise.all([t(()=>import(`./RelationshipQuery-Dxt9LBB9.js`),__vite__mapDeps([31,1,2])),t(()=>import(`./executeRelationshipQuery-CeC3Judk.js`),__vite__mapDeps([32,1,2,33,34]))]),r),o=i.from(n);return(this.gdbVersion||this.dynamicDataSource)&&(o=o.clone(),o.gdbVersion=o.gdbVersion||this.gdbVersion,o.dynamicDataSource=o.dynamicDataSource||this.dynamicDataSource),a(this.url,o,r)}async executeRelationshipQueryForCount(n,r){let[{default:i},{executeRelationshipQueryForCount:a}]=await e(Promise.all([t(()=>import(`./RelationshipQuery-Dxt9LBB9.js`),__vite__mapDeps([31,1,2])),t(()=>import(`./executeRelationshipQuery-CeC3Judk.js`),__vite__mapDeps([32,1,2,33,34]))]),r),o=i.from(n);return(this.gdbVersion||this.dynamicDataSource)&&(o=o.clone(),o.gdbVersion=o.gdbVersion||this.gdbVersion,o.dynamicDataSource=o.dynamicDataSource||this.dynamicDataSource),a(this.url,o,r)}async executeAttachmentQuery(n,r){let{executeAttachmentQuery:i,fetchAttachments:a,processAttachmentQueryResult:o}=await e(t(()=>import(`./queryAttachments-CaBVGjF4.js`),__vite__mapDeps([35,1,2,36,33])),r),s=f(this.url);return o(s,await(this.queryAttachmentsSupported?i(s,n,r):a(s,n,r)))}async executeAttributeBinsQuery(n,r){let{executeAttributeBinsQuery:i}=await e(t(()=>import(`./executeAttributeBinsQuery-D73lqAA6.js`),__vite__mapDeps([37,1,2,38,39,33,40,41])),r);return i(this.parsedUrl,n,r)}async executePivotQuery(n,r){let{executePivotQuery:i}=await e(t(()=>import(`./executePivotQuery-Bc0FTiTa.js`),__vite__mapDeps([42,1,2,33,43,44])),r);return i(this.parsedUrl,n,r)}async executeTopFeaturesQuery(n,r){let{executeTopFeaturesQuery:i}=await e(t(()=>import(`./executeTopFeaturesQuery-JoyKtIRg.js`),__vite__mapDeps([45,1,2,33,46,47])),r);return i(this.parsedUrl,n,this.sourceSpatialReference,r)}async executeForTopIds(n,r){let{executeForTopIds:i}=await e(t(()=>import(`./executeForTopIds-QyqOykks.js`),__vite__mapDeps([48,1,2,33,46,47])),r);return i(this.parsedUrl,n,r)}async executeForTopExtents(n,r){let{executeForTopExtents:i}=await e(t(()=>import(`./executeForTopExtents-CeEHMzgf.js`),__vite__mapDeps([49,1,2,33,46,47])),r);return i(this.parsedUrl,n,r)}async executeForTopCount(n,r){let{executeForTopCount:i}=await e(t(()=>import(`./executeForTopCount-BmSMew94.js`),__vite__mapDeps([50,1,2,33,46,47])),r);return i(this.parsedUrl,n,r)}_normalizeQuery(e){let t=m.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?c.from(e.dynamicDataSource):this.dynamicDataSource);let{infoFor3D:r}=this,i=this._queryGet3DObjectFormat(e);if(r!=null&&i){if(t=t===e?t.clone():t,t.formatOf3DObjects=i,t.outSpatialReference&&!o(t.outSpatialReference,this.sourceSpatialReference))throw new n(`query:unsupported-out-spatial-reference`,`3D object feature services do not support projection of geometries`);if(t.outFields==null||!t.outFields.includes(`*`)){t=t===e?t.clone():t,t.outFields??=[];let{originX:n,originY:i,originZ:a,translationX:o,translationY:s,translationZ:c,scaleX:l,scaleY:u,scaleZ:d,rotationX:f,rotationY:p,rotationZ:m,rotationDeg:h}=r.transformFieldRoles;t.outFields.push(n,i,a,o,s,c,l,u,d,f,p,m,h)}}return t}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(let t of e){let e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryGet3DObjectFormat({returnGeometry:e,multipatchOption:t,outStatistics:n}){return!0!==e||t===`xyFootprint`||n?null:a(this.infoFor3D)}};u([r({type:c})],b.prototype,`dynamicDataSource`,void 0),u([r()],b.prototype,`fieldsIndex`,void 0),u([r()],b.prototype,`gdbVersion`,void 0),u([r()],b.prototype,`infoFor3D`,void 0),u([r({readOnly:!0})],b.prototype,`parsedUrl`,null),u([r()],b.prototype,`pbfSupported`,void 0),u([r()],b.prototype,`queryAttachmentsSupported`,void 0),u([r()],b.prototype,`sourceSpatialReference`,void 0),u([r()],b.prototype,`uniqueIdFields`,void 0),u([r({type:String})],b.prototype,`url`,void 0),b=u([i(`esri.layers.graphics.sources.support.QueryTask`)],b);export{b as t};