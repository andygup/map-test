import{$_ as e,DT as t,JE as n,OT as r,WT as i,gD as a,iv as o,vT as s,vd as c}from"./index-CzMixifc.js";import"./memoryEstimations-C3WUBUZI.js";import"./OptimizedGeometry-5fDazGe-.js";import"./OptimizedFeatureSet-D4F9ObY_.js";import"./featureConversionUtils-VvJ2pauf.js";import"./streamLayerUtils-82UmlW-3.js";import"./QueueProcessor-CbN5H2eO.js";import"./earcut-CsNwSYFA.js";import"./layerViewUtils-Cbrog-dU.js";import"./colorUtils-Btp0B-0Y.js";import"./timeSupport-CjNpK2fD.js";import"./queryUtils-fxq7u50x.js";import"./quantizationUtils-CzrQVcZ1.js";import"./normalizeUtilsSync-DZGX2pCO.js";import"./GeometryUtils-C6BJBMi9.js";import"./VertexAttributeLocations-DOYYzMyn.js";import"./VertexElementDescriptor-C9CNG143.js";import"./labelPoint-D95l1mBc.js";import"./callExpressionWithCursor-NwM51lOx.js";import"./FeatureMetadata-DVsh91f_.js";import"./CIMSymbolHelper-CIzDgFQE.js";import"./rasterizingUtils-L-rXtdWe.js";import"./Rect-BMNJQxpm.js";import"./BoundingBox-CW0_Ka-z.js";import"./BidiEngine-CpIovbIK.js";import"./callExpressionWithFeature-jAwzgzDm.js";import"./OverrideHelper-Catw08-A.js";import"./FeatureCommandQueue-Ccv3I5Xd.js";import"./config-BY05DP3l.js";import"./dehydratedFeatureComparison-DeSHk9xR.js";import"./WGLContainer-v9ak9x06.js";import"./utils-CPFnbOXo.js";import"./ProgramTemplate-DXigF9DQ.js";import"./VertexArrayObject-BCHCoUBc.js";import"./BufferObject-DizvMSTk.js";import"./VertexBuffer-Dhf7DMaS.js";import"./vec3f32-BWuLbfSR.js";import"./Container-s63aPbsG.js";import"./GraphShaderModule-KXpa7jQA.js";import"./FramebufferObject-E0PFfPHi.js";import"./ShaderBuilder-Dbc4jYz7.js";import{t as l}from"./LayerView2D-BLVA9W76.js";import{t as u}from"./LayerView-BKgBHcbR.js";import"./UpdateTracking2D-BQFl9U6T.js";import"./TechniqueInstance-B2WffE-f.js";import"./TileContainer-CdHqIsYl.js";import"./constants-TfCITEY_.js";import"./utils-Cp6QQbUU.js";import{t as d}from"./highlightOptionsUtils-C-mZET-I.js";import"./AGraphicContainer-DjhIZWU6.js";import{t as f}from"./GraphicContainer-C207Aol3.js";import"./ComputedAttributeStorage-D3juJH-7.js";import{t as p}from"./GraphicsView2D-y5Ereu1j.js";import"./dehydratedFeatures-Db6Q9NQd.js";var m=class extends l(u){attach(){this.graphicsView=new p({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new f(this.view.featuresTilingScheme),layerId:this.layer.id}),this.container.addChild(this.graphicsView.container),this.addAttachHandles([this.layer.on(`graphic-update`,this.graphicsView.graphicUpdateHandler),e(()=>this.layer?.visible,()=>{this.graphicsView.update({state:this.view.state}),this.graphicsView.pushUpdate()})]),this._processHighlight()}detach(){this.container.removeAllChildren(),this.graphicsView=s(this.graphicsView)}async hitTest(e){return this.graphicsView?this.graphicsView.hitTest(e).map(t=>({type:`graphic`,graphic:t,mapPoint:e,layer:this.layer})):null}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(e){this.graphicsView.processUpdate(e)}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(e,t){let r;typeof e==`number`?r=[e]:e instanceof c?r=[e.uid]:Array.isArray(e)&&e.length>0?r=typeof e[0]==`number`?e:e.map(e=>e&&e.uid):o.isCollection(e)&&e.length>0&&(r=e.map(e=>e&&e.uid).toArray());let a=r?.filter(n);if(!a?.length)return i();let s=d(t);return this._addHighlights(a,s),i(()=>!this.destroyed&&this._removeHighlights(a,s))}_processHighlight(){let e=this._getHighlights();this.graphicsView?.setHighlight(e)}};a([t()],m.prototype,`graphicsView`,void 0),m=a([r(`esri.views.2d.layers.GraphicsLayerView2D`)],m);var h=m;export{h as default};