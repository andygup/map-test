const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodeticDistanceOperator-Cmd25T7U.js","assets/index-ByaFsVj4.js","assets/index-DiFef-Um.css","assets/geodeticCurveType-B3tSXlNQ.js"])))=>i.map(i=>d[i]);
import{$m as e,$p as t,BS as n,Cx as r,I_ as i,Ih as a,Ov as o,Qp as s,Sw as c,Tn as l,U_ as u,Vv as d,Xp as f,Zv as ee,_n as te,ax as ne,bn as re,dC as ie,em as p,gn as m,kv as ae,mT as oe,mw as se,pn as h,px as g,tm as _,uE as ce,vn as v,vv as y,wn as b,ww as le,wx as ue,yn as x,zw as de}from"./index-ByaFsVj4.js";import{t as S}from"./arcadeEnvironment-_F8igoCf.js";import{t as fe}from"./ImmutableArray-C3KNQCVd.js";import{$ as C,A as pe,B as me,F as he,J as w,K as T,L as E,M as ge,N as _e,O as D,P as ve,S as O,T as ye,V as be,W as k,Y as A,_ as j,a as xe,c as Se,ct as M,d as Ce,et as we,g as Te,i as Ee,j as De,k as Oe,m as ke,n as Ae,o as je,p as N,q as P,rt as Me,s as Ne,st as Pe,t as F,tt as I,u as L,ut as Fe,v as R,w as Ie,y as Le}from"./Dictionary-CX-Dz5lT.js";import{s as Re}from"./shared-C6TPacPS.js";import{r as ze}from"./number-CDIvbS1W.js";import{i as z,n as B}from"./Feature-CnXUN_FQ.js";import{i as Be,r as Ve,t as He}from"./containerUtils-dAaF5kJi.js";import{i as Ue,t as We}from"./WhereClause-BExEDKCy.js";import{r as Ge}from"./streamLayerUtils-82UmlW-3.js";import{d as Ke,f as qe,l as Je,u as Ye}from"./functions-DLuym3DT.js";import{t as Xe}from"./fieldStats-TAFUm-qx.js";import{t as Ze}from"./ArcadePortal-CRblETBT.js";import{t as Qe}from"./Attachment-BzQ2xp7x.js";var $e=class{constructor(e,t){this._moduleSingletons=e,this._syntaxModules=t}loadLibrary(e){if(this._syntaxModules==null)return null;let t=this._syntaxModules[e];return t?{syntax:t.script,uri:t.uri}:null}},et=()=>ce.getLogger(`esri.arcade.compilerUtils`);function V(e,t,n){switch(e.type){case`VariableDeclaration`:for(let n of e.declarations)t.add(S(n.id));return;case`BlockStatement`:for(let r of e.body)V(r,t,n);return;case`ExportNamedDeclaration`:{let r=new Set;V(e.declaration,r,n);for(let e of r)t.add(e),n.add(e);return}case`ForInStatement`:case`ForOfStatement`:e.left.type===`VariableDeclaration`&&V(e.left,t,n),V(e.body,t,n);return;case`ForStatement`:e.init?.type===`VariableDeclaration`&&V(e.init,t,n),V(e.body,t,n);return;case`FunctionDeclaration`:t.add(S(e.id));return;case`IfStatement`:V(e.consequent,t,n),e.alternate&&V(e.alternate,t,n);return;case`ImportDeclaration`:for(let n of e.specifiers)t.add(S(n.local));return;case`WhileStatement`:V(e.body,t,n);return;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`ExpressionStatement`:case`ReturnStatement`:return}}function tt(e){let t=new Set,n=new Set;for(let r of e.body)V(r,t,n);if(!le(n,t))throw et().error(`Internal error: exported undeclared symbols {${Array.from(c(n,t)).join(`, `)}}`),new l(null,`NeverReach`,null);return{globals:t,exports:n}}function nt(e){let t=new Set,n=new Set;if(V(e.body,t,n),n.size>0)throw et().error(`Internal error: cannot export locals {${Array.from(n.values()).join(`, `)}}`),new l(null,`NeverReach`,null);return t}var rt={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},it={functionDefinitions:new Map,constantDefinitions:new Map},at={functionDefinitions:new Map,constantDefinitions:new Map};for(let e of[`pi`,`infinity`])at.constantDefinitions.set(e,{type:`constant`}),it.constantDefinitions.set(e,{type:`constant`});for(let e in at.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`newline`,type:`constant`}]}),it.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`newline`,type:`constant`}]}),rt){let t=rt[e];at.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]}),it.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]})}var ot=new Set([`attachments`,`featureset`,`featuresetbyassociation`,`featuresetbyid`,`featuresetbyname`,`featuresetbyportalitem`,`featuresetbyrelationshipname`,`featuresetbyurl`,`filterbysubtypecode`,`getfeatureset`,`getfeaturesetinfo`,`getuser`,`knowledgegraphbyportalitem`,`querygraph`]),st=new Set([`translatetext`]),ct=new Set(`area.areageodetic.buffer.buffergeodetic.centroid.clip.contains.convexhull.crosses.cut.densify.densifygeodetic.difference.disjoint.distance.distancegeodetic.distancetocoordinate.equals.generalize.intersection.intersects.isselfintersecting.issimple.length.length3d.lengthgeodetic.measuretocoordinate.multiparttosinglepart.nearestcoordinate.nearestvertex.offset.overlaps.pointtocoordinate.relate.rotate.simplify.symmetricdifference.touches.union.within`.split(`.`));function lt(e,t){let n=t===`sync`?it:at;n.functionDefinitions.has(e.name.toLowerCase())?n.functionDefinitions.get(e.name.toLowerCase())?.overloads.push({type:`function`,parametersInfo:{min:e.min,max:e.max}}):n.functionDefinitions.set(e.name.toLowerCase(),{overloads:[{type:`function`,parametersInfo:{min:e.min,max:e.max}}]})}function H(e,t){if(e)for(let n of e)U(n,t)}function U(e,t){if(e&&!1!==t(e))switch(e.type){case`ImportDeclaration`:H(e.specifiers,t),U(e.source,t);break;case`ExportNamedDeclaration`:U(e.declaration,t);break;case`ArrayExpression`:H(e.elements,t);break;case`AssignmentExpression`:case`BinaryExpression`:case`LogicalExpression`:U(e.left,t),U(e.right,t);break;case`BlockStatement`:case`Program`:H(e.body,t);break;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`Identifier`:case`Literal`:break;case`CallExpression`:U(e.callee,t),H(e.arguments,t);break;case`ExpressionStatement`:U(e.expression,t);break;case`ForInStatement`:case`ForOfStatement`:U(e.left,t),U(e.right,t),U(e.body,t);break;case`ForStatement`:U(e.init,t),U(e.test,t),U(e.update,t),U(e.body,t);break;case`WhileStatement`:U(e.test,t),U(e.body,t);break;case`FunctionDeclaration`:U(e.id,t),H(e.params,t),U(e.body,t);break;case`IfStatement`:U(e.test,t),U(e.consequent,t),U(e.alternate,t);break;case`MemberExpression`:U(e.object,t),U(e.property,t);break;case`ObjectExpression`:H(e.properties,t);break;case`Property`:U(e.key,t),U(e.value,t);break;case`ReturnStatement`:case`UnaryExpression`:case`UpdateExpression`:U(e.argument,t);break;case`VariableDeclaration`:H(e.declarations,t);break;case`VariableDeclarator`:U(e.id,t),U(e.init,t);break;case`TemplateLiteral`:H(e.expressions,t),H(e.quasis,t)}}function ut(e){return e?.type===`Literal`&&typeof e.value==`string`}function dt(e,t){let n=!1,r=t.toLowerCase();return U(e,e=>!n&&(e.type===`Identifier`&&e.name&&e.name.toLowerCase()===r&&(n=!0),!0)),n}function ft(e){let t=[];return U(e,e=>(e.type===`ImportDeclaration`&&e.source&&e.source.value&&t.push({libname:S(e.specifiers[0].local),source:e.source.value}),!0)),t}function pt(e,t){let n=!1,r=t.toLowerCase();return U(e,e=>!n&&(e.type!==`CallExpression`||e.callee.type!==`Identifier`||!e.callee.name||e.callee.name.toLowerCase()!==r||(n=!0,!1))),n}function mt(e){let t=[];return U(e,e=>e.type!==`MemberExpression`||e.object.type!==`Identifier`||((e.property.type===`Identifier`||e.property.type===`Literal`&&typeof e.property.value==`string`)&&t.push({varId:S(e.object),memberId:S(e.property)}),!1)),t}function ht(e){let t=[];return U(e,e=>{if(e.type===`CallExpression`&&e.callee.type===`Identifier`)switch(S(e.callee)){case`expects`:if(e.arguments.length>1){let[n,...r]=e.arguments;if(n?.type===`Identifier`){let e=S(n);for(let n of r)ut(n)&&t.push({varId:e,memberNamePattern:n.value})}}return!1;case`domainname`:case`domaincode`:case`domain`:case`haskey`:case`hasvalue`:if(e.arguments.length>=2){let[n,r]=e.arguments;n?.type===`Identifier`&&ut(r)&&t.push({varId:S(n),memberNamePattern:r.value})}return!0;case`defaultvalue`:if(e.arguments.length>2){let[n,r]=e.arguments;n?.type===`Identifier`&&ut(r)&&t.push({varId:S(n),memberNamePattern:r.value})}return!0;default:return!0}return e.type!==`MemberExpression`||e.object.type!==`Identifier`||(e.computed?!!ut(e.property)&&(t.push({varId:S(e.object),memberNamePattern:e.property.value}),!1):(t.push({varId:S(e.object),memberNamePattern:e.property.name}),!1))}),t}function gt(e){let t=[];return U(e,e=>(e.type===`CallExpression`&&e.callee.type===`Identifier`&&t.push(S(e.callee)),!0)),t}function _t(e,t=[]){let n=null;if(e.usesFeatureSet===void 0){n===null&&(n=gt(e)),e.usesFeatureSet=!1;for(let t=0;t<n.length;t++)ot.has(n[t])&&(e.usesFeatureSet=!0,e.isAsync=!0);if(!1===e.usesFeatureSet&&t&&t.length>0){for(let n of t)if(dt(e,n)){e.usesFeatureSet=!0,e.isAsync=!0;break}}}if(e.isAsync===void 0&&(n===null&&(n=gt(e)),n.some(e=>st.has(e))&&(e.isAsync=!0)),e.usesModules===void 0&&(e.usesModules=!1,ft(e).length>0&&(e.usesModules=!0)),e.usesGeometry===void 0){e.usesGeometry=!1,n===null&&(n=gt(e));for(let t=0;t<n.length;t++)ct.has(n[t])&&(e.usesGeometry=!0)}}function vt(e){function n(e,n,r){if(e instanceof fe)return e.toArray();if(t(e))return e;throw new b(n,`InvalidParameter`,r)}function r(e,t){let n=e.length,a=Math.floor(n/2);return n===0?[]:n===1?[e[0]]:i(r(e.slice(0,a),t),r(e.slice(a,n),t),t)}function i(e,t,n){let r=[];for(;e.length>0||t.length>0;)if(e.length>0&&t.length>0){let i=n(e[0],t[0]);isNaN(i)&&(i=0),i<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}async function a(e,t){let n=e.length,r=Math.floor(n/2);if(n===0)return[];if(n===1)return[e[0]];let i=[await a(e.slice(0,r),t),await a(e.slice(r,n),t)];return o(i[0],i[1],t,[])}async function o(e,t,n,r){let i=r;if(e.length>0||t.length>0){if(e.length>0&&t.length>0){let a=await n(e[0],t[0]);return isNaN(a)&&(a=1),a<=0?(i.push(e[0]),e=e.slice(1)):(i.push(t[0]),t=t.slice(1)),o(e,t,n,r)}return e.length>0?(i.push(e[0]),o(e=e.slice(1),t,n,r)):(i.push(t[0]),o(e,t=t.slice(1),n,r))}return r}function s(e,n,i,o){A(i,1,2,e,n);let s=i[0];if(I(s)&&(s=s.toArray()),!1===t(s))throw new b(e,`InvalidParameter`,n);if(i.length>1){if(!1===Le(i[1]))throw new b(e,`InvalidParameter`,n);let t=s,c=i[1].createFunction(e);return o?a(t,c):(t=r(t,(e,t)=>c(e,t)),t)}let c=s;if(c.length===0)return[];let l={};for(let e=0;e<c.length;e++){let t=Ce(c[e]);t!==``&&(l[t]=!0)}if(!0===l.Array||!0===l.Dictionary||!0===l.Feature||!0===l.Voxel||!0===l.Pixel||!0===l.Point||!0===l.Polygon||!0===l.Polyline||!0===l.Multipoint||!0===l.Extent||!0===l.Function)return c.slice();let u=0,d=``;for(let e in l)u++,d=e;return c=u>1||d===`String`?r(c,(e,t)=>{if(e==null||e===O)return t==null||t===O?0:1;if(t==null||t===O)return-1;let n=k(e),r=k(t);return n<r?-1:n===r?0:1}):d===`Number`?r(c,(e,t)=>e-t):d===`Boolean`?r(c,(e,t)=>e===t?0:t?-1:1):d===`Date`?r(c,(e,t)=>e.toNumber()-t.toNumber()):c.slice(),c}e.functions.array=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,0,2,n,r),a.length===0||a.length===1&&a[0]===null)return[];if(t(a[0])){if(a.length===2&&!1===_(a[1]))throw new b(n,`InvalidParameter`,r);return!0===M(a[1],!1)?Ae(a[0]):a[0].slice()}if(I(a[0])){if(a.length===2&&!1===_(a[1]))throw new b(n,`InvalidParameter`,r);return!0===M(a[1],!1)?Ae(a[0]):a[0].toArray().slice()}let o=D(a[0]);if(isNaN(o)||!1===p(o))throw new b(n,`InvalidParameter`,r);let s=M(a[1],null),c=Array(o);return c.fill(s),c})},e.functions.front=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,1,1,n,r),I(a[0])){if(a[0].length()<=0)throw new b(n,`OutOfBounds`,r);return a[0].get(0)}if(t(a[0])){if(a[0].length<=0)throw new b(n,`OutOfBounds`,r);return a[0][0]}throw new b(n,`InvalidParameter`,r)})},e.functions.back=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,1,1,n,r),I(a[0])){if(a[0].length()<=0)throw new b(n,`OutOfBounds`,r);return a[0].get(a[0].length()-1)}if(t(a[0])){if(a[0].length<=0)throw new b(n,`OutOfBounds`,r);return a[0][a[0].length-1]}throw new b(n,`InvalidParameter`,r)})},e.functions.push=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,1,2,n,r),t(a[0]))return a[0][a[0].length]=a[1],a[0].length;throw new b(n,`InvalidParameter`,r)})},e.functions.pop=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,1,1,n,r),t(a[0])){if(a[0].length<=0)throw new b(n,`OutOfBounds`,r);let e=a[0][a[0].length-1];return a[0].length=a[0].length-1,e}throw new b(n,`InvalidParameter`,r)})},e.functions.erase=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,2,2,n,r),t(a[0])){let e=D(a[1]);if(isNaN(e)||!1===p(e))throw new b(n,`InvalidParameter`,r);let t=a[0];if(t.length<=0||(e<0&&(e=t.length+e),e<0)||e>=t.length)throw new b(n,`OutOfBounds`,r);return t.splice(e,1),O}if(j(a[0]))return a[0].eraseField(k(a[1])),O;throw new b(n,`InvalidParameter`,r)})},e.functions.insert=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,3,3,n,r),t(a[0])){let e=D(a[1]);if(isNaN(e)||!1===p(e))throw new b(n,`InvalidParameter`,r);let t=a[2],i=a[0];if(e>i.length||e<0&&e<-1*i.length)throw new b(n,`OutOfBounds`,r);return e===i.length?(i[e]=t,O):(i.splice(e,0,t),O)}if(j(a[0]))return a[0].setField(k(a[1]),a[2]),O;throw new b(n,`InvalidParameter`,r)})},e.functions.getkeys=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(A(n,1,1,e,t),n[0]==null)return[];if(j(n[0]))return n[0].keys();throw new b(e,`InvalidParameter`,t)})},e.functions.getvalues=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(A(n,1,1,e,t),n[0]==null)return[];if(j(n[0]))return n[0].values();throw new b(e,`InvalidParameter`,t)})},e.functions.resize=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,2,3,n,r),t(a[0])){let e=D(a[1]);if(isNaN(e)||!1===p(e)||e<0)throw new b(n,`InvalidParameter`,r);let t=M(a[2],null),i=a[0];if(i.length>=e)return i.length=e,O;let o=i.length;i.length=e;for(let e=o;e<i.length;e++)i[e]=t;return O}throw new b(n,`InvalidParameter`,r)})},e.functions.includes=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,2,2,n,r),t(a[0])){let e=a[1];return!!a[0].some(t=>Pe(t,e))}if(I(a[0])){let e=a[1];return!!a[0].toArray().some(t=>Pe(t,e))}throw new b(n,`InvalidParameter`,r)})},e.functions.slice=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,1,3,n,r),t(a[0])){let e=D(M(a[1],0)),t=D(M(a[2],a[0].length));if(isNaN(e)||!1===p(e)||isNaN(t)||!1===p(t))throw new b(n,`InvalidParameter`,r);return a[0].slice(e,t)}if(I(a[0])){let e=a[0],t=D(M(a[1],0)),i=D(M(a[2],e.length()));if(isNaN(t)||!1===p(t)||isNaN(i)||!1===p(i))throw new b(n,`InvalidParameter`,r);return e.toArray().slice(t,i)}throw new b(n,`InvalidParameter`,r)})},e.functions.splice=function(n,r){return e.standardFunction(n,r,(e,n,r)=>{let i=[];for(let e=0;e<r.length;e++)t(r[e])?i.push(...r[e]):I(r[e])?i.push(...r[e].toArray()):i.push(r[e]);return i})},e.functions.top=function(n,r){return e.standardFunction(n,r,(e,i,a)=>{if(A(a,2,2,n,r),t(a[0]))return D(a[1])>=a[0].length?a[0].slice():a[0].slice(0,D(a[1]));if(I(a[0]))return D(a[1])>=a[0].length()?a[0].slice():a[0].slice(0,D(a[1]));throw new b(n,`InvalidParameter`,r)})},e.functions.first=function(n,r){return e.standardFunction(n,r,(e,i,a)=>(A(a,1,1,n,r),t(a[0])?a[0].length===0?null:a[0][0]:I(a[0])?a[0].length()===0?null:a[0].get(0):null))},e.mode===`sync`&&(e.functions.sort=function(t,n){return e.standardFunction(t,n,(e,n,r)=>s(t,n,r,!1))},e.functions.any=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=a(e);if(_(t)&&!0===t)return!0}return!1})},e.functions.all=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o)if(!0!==a(e))return!1;return!0})},e.functions.none=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o)if(!0===a(e))return!1;return!0})},e.functions.reduce=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{A(i,2,3,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);return i.length===2?o.length===0?null:o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==O?n:null}):o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==O?n:null},i[2])})},e.functions.map=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o){let t=a(e);t!==void 0&&t!==O?s.push(t):s.push(null)}return s})},e.functions.filter=function(t,r){return e.standardFunction(t,r,(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o)!0===a(e)&&s.push(e);return s})}),e.mode===`async`&&(e.functions.sort=function(t,n){return e.standardFunctionAsync(t,n,async(e,n,r)=>s(t,n,r,!0))},e.functions.any=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=await a(e),n=null;if(n=de(n)?await t:t,_(n)&&!0===n)return!0}return!1})},e.functions.all=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=await a(e),n=null;if(n=de(n)?await t:t,!0!==n)return!1}return!0})},e.functions.none=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r);for(let e of o){let t=await a(e),n=null;if(n=de(n)?await t:t,!0===n)return!1}return!0})},e.functions.filter=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o){let t=await a(e),n=null;n=de(n)?await t:t,!0===n&&s.push(e)}return s})},e.functions.reduce=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{A(i,2,3,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s;if(i.length>2){let e=M(i[2],null);s=o.reduce(async(e,t)=>{let n=await e;return n!==void 0&&n!==O||(n=null),a(n,t)},Promise.resolve(e))}else{if(o.length===0)return null;s=o.reduce(async(e,t,n)=>{if(n<=1)return a(e,t);let r=await e;return r!==void 0&&r!==O||(r=null),a(r,t)})}return s.then(e=>e!==void 0&&e!==O?e:null)})},e.functions.map=function(t,r){return e.standardFunctionAsync(t,r,async(e,r,i)=>{A(i,2,2,t,r);let a=i[1].createFunction(t),o=n(i[0],t,r),s=[];for(let e of o){let t=await a(e),n=null;n=de(n)?await t:t,n!==void 0&&n!==O?s.push(n):s.push(null)}return s})})}var yt=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:vt},Symbol.toStringTag,{value:`Module`}));function bt(e,t,n){return e+(xt(n)?Ct:St)[t]}function xt(e){return e%4==0&&(e%100!=0||e%400==0)}var St=[0,31,59,90,120,151,181,212,243,273,304,334],Ct=[0,31,60,91,121,152,182,213,244,274,305,335];function W(e){return e===null?e:!1===e.isValid?null:e}function wt(e,t){switch(re(e)){case``:case`default`:return R(t);case`z`:return`UTC`;default:return e}}function G(e,t){return C(e)?e.toArcadeDate():E(e,R(t))}var Tt=new x([`days`,`months`,`minutes`,`seconds`,`hours`,`years`,`milliseconds`],[[`day`,`days`],[`d`,`days`],[`month`,`months`],[`minute`,`minutes`],[`m`,`minutes`],[`second`,`seconds`],[`s`,`seconds`],[`hour`,`hours`],[`h`,`hours`],[`year`,`years`],[`y`,`years`],[`millisecond`,`milliseconds`],[`ms`,`milliseconds`]]);function Et(e){return e===`M`?`months`:Tt.lookup(k(e))??`milliseconds`}function Dt(e,t){e.today=function(e,n){return t(e,n,(t,r,i)=>{A(i,0,0,e,n);let a=new Date;return a.setHours(0,0,0,0),v.dateJSAndZoneToArcadeDate(a,R(e))})},e.time=function(e,n){return t(e,n,(t,r,i)=>{switch(A(i,0,4,e,n),i.length){case 0:{let t=v.nowToArcadeDate(R(e));return new h(t.hour,t.minute,t.second,t.millisecond)}case 1:{if(T(i[0]))return i[0].clone();if(w(i[0]))return new h(i[0].hour,i[0].minute,i[0].second,i[0].millisecond);if(C(i[0]))return new h(0,0,0,0);if(f(i[0]))return h.fromString(i[0]);let e=D(i[0]);return!1===isNaN(e)?h.fromMilliseconds(e):null}case 2:return f(i[0])&&f(i[1])?h.fromString(i[0],i[1]):h.fromParts(D(i[0]),D(i[1]),0,0);case 3:return h.fromParts(D(i[0]),D(i[1]),D(i[2]),0);case 4:return h.fromParts(D(i[0]),D(i[1]),D(i[2]),D(i[3]))}throw new b(e,`InvalidParameter`,n)})},e.dateonly=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,0,3,e,n),i.length===3)return m.fromParts(D(i[0]),D(i[1])+1,D(i[2]));if(i.length===2){let e=k(i[1]);return e===``?null:e===`X`?m.fromSeconds(D(i[0])):e===`x`?m.fromMilliseconds(D(i[0])):m.fromString(k(i[0]),e)}if(i.length===1){if(f(i[0])){if(i[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(i[0]))return m.fromString(i[0]+`-01-01`)}if(C(i[0]))return i[0].clone();if(w(i[0]))return m.fromParts(i[0].year,i[0].monthJS+1,i[0].day);let e=D(i[0]);return!1===isNaN(e)?m.fromMilliseconds(e):f(i[0])?m.fromString(i[0]):null}if(i.length===0){let t=v.nowToArcadeDate(R(e));return!1===t.isValid?null:m.fromParts(t.year,t.monthJS+1,t.day)}return null})},e.changetimezone=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,2,2,e,n),i[0]===null)return null;if(C(i[0]))throw new b(e,`CannotChangeTimeZoneDateOnly`,n);if(C(i[0]))throw new b(e,`CannotChangeTimeZoneTime`,n);let a=E(i[0],R(e));if(a===null)throw new b(e,`InvalidParameter`,n);let o=te(wt(k(i[1]),e),!1);if(o===null)return null;let s=v.arcadeDateAndZoneToArcadeDate(a,o);return!1===s.isValid?null:s})},e.timezone=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,2,e,n),T(i[0])||C(i[0]))return`Unknown`;let a=E(i[0],R(e));if(a===null)return null;let o=a.timeZone;return o===`system`?v.systemTimeZoneCanonicalName:o.toLowerCase()===`utc`?`UTC`:o.toLowerCase()===`unknown`?`Unknown`:o})},e.timezoneoffset=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=E(i[0],R(e));return a===null?null:60*a.timeZoneOffset*1e3})},e.now=function(e,n){return t(e,n,(t,r,i)=>{A(i,0,0,e,n);let a=v.nowToArcadeDate(R(e));return!1===a.isValid?null:a})},e.timestamp=function(e,n){return t(e,n,(t,r,i)=>{A(i,0,0,e,n);let a=v.nowUTCToArcadeDate();return!1===a.isValid?null:a})},e.toutc=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=E(i[0],R(e));return a===null?null:a.toUTC()})},e.tolocal=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=E(i[0],R(e));return a===null?null:a.toLocal()})},e.day=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.day})},e.month=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.monthJS})},e.year=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.year})},e.hour=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),T(i[0]))return i[0].hour;let a=E(i[0],R(e));return a===null?NaN:a.hour})},e.second=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),T(i[0]))return i[0].second;let a=E(i[0],R(e));return a===null?NaN:a.second})},e.millisecond=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),T(i[0]))return i[0].millisecond;let a=E(i[0],R(e));return a===null?NaN:a.millisecond})},e.minute=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),T(i[0]))return i[0].minute;let a=E(i[0],R(e));return a===null?NaN:a.minute})},e.week=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,2,e,n);let a=G(i[0],R(e));if(a===null)return NaN;let o=D(M(i[1],0));if(o<0||o>6)throw new b(e,`InvalidParameter`,n);let s=a.day,c=a.monthJS,l=a.year,u=a.dayOfWeekJS,d=bt(s,c,l)-1,f=Math.floor(d/7);return u-o+(u-o<0?7:0)<d-7*f?f+1:f})},e.weekday=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.dayOfWeekJS})},e.isoweekday=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.dayOfWeekISO})},e.isomonth=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.monthISO})},e.isoweek=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.weekISO})},e.isoyear=function(e,n){return t(e,n,(t,r,i)=>{A(i,1,1,e,n);let a=G(i[0],R(e));return a===null?NaN:a.yearISO})},e.date=function(e,n){return t(e,n,(t,r,a)=>{if(A(a,0,8,e,n),a.length===3){if(C(a[0])&&T(a[1])&&f(a[2])){let t=te(wt(k(a[2])??`unknown`,e),!1);return t===null?null:W(v.fromParts(a[0].year,a[0].month,a[0].day,a[1].hour,a[1].minute,a[1].second,a[1].millisecond,t))}return W(v.fromParts(D(a[0]),D(a[1])+1,D(a[2]),0,0,0,0,R(e)))}if(a.length===4)return W(v.fromParts(D(a[0]),D(a[1])+1,D(a[2]),D(a[3]),0,0,0,R(e)));if(a.length===5)return W(v.fromParts(D(a[0]),D(a[1])+1,D(a[2]),D(a[3]),D(a[4]),0,0,R(e)));if(a.length===6)return W(v.fromParts(D(a[0]),D(a[1])+1,D(a[2]),D(a[3]),D(a[4]),D(a[5]),0,R(e)));if(a.length===7)return W(v.fromParts(D(a[0]),D(a[1])+1,D(a[2]),D(a[3]),D(a[4]),D(a[5]),D(a[6]),R(e)));if(a.length===8){let t=te(wt(k(a[7])??`unknown`,e),!1);return t===null?null:W(v.fromParts(D(a[0]),D(a[1])+1,D(a[2]),D(a[3]),D(a[4]),D(a[5]),D(a[6]),t))}if(a.length===2){if(C(a[0])&&f(a[1])){let t=te(wt(k(a[1])??`unknown`,e),!1);return t===null?null:W(v.fromParts(a[0].year,a[0].month,a[0].day,0,0,0,0,t))}if(C(a[0])&&T(a[1]))return W(v.fromParts(a[0].year,a[0].month,a[0].day,a[1].hour,a[1].minute,a[1].second,a[1].millisecond,`unknown`));let t,n=k(a[1]);return n===``?null:(n=be(n,!0),t=n===`X`?i.fromSeconds(D(a[0])):n===`x`?i.fromMillis(D(a[0])):i.fromFormat(k(a[0]),n,{locale:u(),numberingSystem:`latn`}),t.isValid?v.dateTimeToArcadeDate(t):null)}if(a.length===1){if(C(a[0]))return W(v.fromParts(a[0].year,a[0].month,a[0].day,0,0,0,0,`unknown`));if(f(a[0])){if(a[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(a[0]))return E(a[0]+`-01-01`,R(e))}let t=D(a[0]);if(!1===isNaN(t)){let n=i.fromMillis(t);return n.isValid?v.dateTimeAndZoneToArcadeDate(n,R(e)):null}return E(a[0],R(e))}return a.length===0?v.nowToArcadeDate(R(e)):null})},e.datediff=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,2,4,e,n),T(i[0]))return T(i[1])?i[0].difference(i[1],k(i[2])):NaN;if(T(i[1]))return NaN;if(C(i[0]))return C(i[1])?i[0].difference(i[1],k(i[2])):NaN;if(C(i[1]))return NaN;let a=E(i[0],R(e)),o=E(i[1],R(e));if(a===null||o===null)return NaN;let s=M(i[3],``);return s!==``&&s!==null?(s=wt(k(s),e),a=v.arcadeDateAndZoneToArcadeDate(a,s),o=v.arcadeDateAndZoneToArcadeDate(o,s)):a.timeZone!==o.timeZone&&(a.isUnknownTimeZone?a=v.arcadeDateAndZoneToArcadeDate(a,o.timeZone):o=(o.isUnknownTimeZone,v.arcadeDateAndZoneToArcadeDate(o,a.timeZone))),a.diff(o,Et(i[2]))})},e.dateadd=function(e,n){return t(e,n,(t,r,i)=>{A(i,2,3,e,n);let a=D(i[1]);if(isNaN(a)||a===1/0||a===-1/0)return T(i[0])||C(i[0])?i[0].clone():E(i[0],R(e));let o=Et(i[2]);if(o!==`days`&&o!==`months`||(a=C(i[0])?a:we(a)),T(i[0])||C(i[0]))return i[0].plus(o,a);let s=E(i[0],R(e));return s===null?null:s.plus({[o]:a})})}}function Ot(e){let t=e?.fullSchema();return t?.datesInUnknownTimezone?`unknown`:t?.dateFieldsTimeZone||`UTC`}function kt(e){let t=e.fullSchema()?.fieldsIndex;return t==null&&e instanceof B?e.fieldsIndex:t}var At={getAttributeSQL(e,t){let n=e.field(t);if(n==null)return n;if(w(n)){let r=n.toDateTime(),i=kt(e)?.get(t)?.type;return i===`esriFieldTypeTimestampOffset`||i===`timestamp-offset`?Ue.fromDateTime(r):r}return n}};function jt(e,t,n){e.domain=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,2,3,e,n),N(i[0])){let t=ke(i[0],k(i[1]),i[2]===void 0?void 0:i[2]);return t&&t.domain?t.domain.type===`coded-value`||t.domain.type===`codedValue`?F.convertObjectToArcadeDictionary({type:`codedValue`,name:t.domain.name,dataType:Re[t.field.type],codedValues:t.domain.codedValues.map(e=>({name:e.name,code:e.code}))},R(e)):F.convertObjectToArcadeDictionary({type:`range`,name:t.domain.name,dataType:Re[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},R(e)):null}throw new b(e,`InvalidParameter`,n)})},e.domaincode=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,2,4,e,n),N(i[0]))return Se(i[0],k(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new b(e,`InvalidParameter`,n)})},e.domainname=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,2,4,e,n),N(i[0]))return xe(i[0],k(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new b(e,`InvalidParameter`,n)})},e.expects=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new b(e,`WrongNumberOfParameters`,n);return O})},e.featureinfilter=function(e,r){return t(e,r,(e,t,r)=>{A(r,2,2,e,t);let[i,a]=r;if(i==null)return!1;if(a===``||a==null)return!0;if(!N(i)||!f(a))throw new b(e,`InvalidParameter`,t);let o=We.create(a,{fieldsIndex:kt(i),timeZone:Ot(i)}),s=o.getVariables();for(let t of s)o.parameters[t]=n(e,{name:t});return o.testFeature(i,At)})},e.gdbversion=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),N(i[0]))return i[0].gdbVersion();throw new b(e,`InvalidParameter`,n)})},e.schema=function(e,n){return t(e,n,(t,r,i)=>{if(N(i[0])){let t=ye(i[0]);return t?F.convertObjectToArcadeDictionary(t,R(e)):null}throw new b(e,`InvalidParameter`,n)})},e.subtypecode=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),N(i[0])){let e=ge(i[0]);if(!e)return null;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.code;return null}return null}throw new b(e,`InvalidParameter`,n)})},e.subtypename=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),N(i[0])){let e=ge(i[0]);if(!e)return``;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.name;return``}return``}throw new b(e,`InvalidParameter`,n)})},e.subtypes=function(e,n){return t(e,n,(t,r,i)=>{if(A(i,1,1,e,n),N(i[0])){let t=ge(i[0]);return t?F.convertObjectToArcadeDictionary(t,R(e)):null}throw new b(e,`InvalidParameter`,n)})},e[S(`TimeReceived`)]=function(e,n){return t(e,n,(e,t,n)=>{if(A(n,1,1,e,t),N(n[0])){if(n[0].hasField(`__esri_time_received__`)){let t=n[0].field(Ge);return s(t)?v.epochToArcadeDate(t,e.timeZone??`system`):w(t)?t:null}return null}throw new b(e,`InvalidParameter`,t)})}}function Mt(e,n){e.ringisclockwise=function(e,r){return n(e,r,(n,i,a)=>{A(a,1,1,e,r);let o=[];if(a[0]===null)return!1;if(t(a[0]))for(let t of a[0]){if(!(t instanceof g))throw new b(e,`InvalidParameter`,r);o.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}else if(a[0]instanceof Fe)o=a[0]._elements;else{if(!I(a[0]))throw new b(e,`InvalidParameter`,r);for(let t of a[0].toArray()){if(!(t instanceof g))throw new b(e,`InvalidParameter`,r);o.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}}return!(o.length<3)&&d(o)})},e.polygon=function(e,t){return n(e,t,(n,r,i)=>{let a;if(A(i,1,1,e,t),i[0]instanceof F){let t=L(z(i[0],e.spatialReference,`polygon`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof ae)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=L(new ae(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return P(a)})},e.polyline=function(e,t){return n(e,t,(n,r,i)=>{let a;if(A(i,1,1,e,t),i[0]instanceof F){let t=L(z(i[0],e.spatialReference,`polyline`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof o)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=L(new o(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return P(a)})},e.point=function(e,t){return n(e,t,(n,r,i)=>{let a;if(A(i,1,1,e,t),i[0]instanceof F){let t=L(z(i[0],e.spatialReference,`point`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof g)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=L(new g(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return P(a)})},e.multipoint=function(e,t){return n(e,t,(n,r,i)=>{let a;if(A(i,1,1,e,t),i[0]instanceof F){let t=L(z(i[0],e.spatialReference,`multipoint`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof ee)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=L(new ee(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return P(a)})},e.extent=function(e,t){return n(e,t,(n,r,i)=>{i=Te(i),A(i,1,1,e,t);let a=null;if(i[0]instanceof F)a=L(z(i[0],e.spatialReference),e.spatialReference);else if(i[0]instanceof g){let e={xmin:i[0].x,ymin:i[0].y,xmax:i[0].x,ymax:i[0].y,spatialReference:i[0].spatialReference.toJSON()},t=i[0];t.hasZ&&(e.zmin=t.z,e.zmax=t.z),t.hasM&&(e.mmin=t.m,e.mmax=t.m),a=y(e)}else if(i[0]instanceof ae)a=y(i[0].extent?.toJSON());else if(i[0]instanceof o)a=y(i[0].extent?.toJSON());else if(i[0]instanceof ee)a=y(i[0].extent?.toJSON());else if(i[0]instanceof ne)a=y(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=L(new ne(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return P(a)})},e.geometry=function(e,t){return n(e,t,(n,r,i)=>{A(i,1,1,e,t);let a=null;if(i[0]===null)return null;if(N(i[0]))a=L(i[0].geometry(),e.spatialReference);else if(i[0]instanceof F)a=L(z(i[0],e.spatialReference),e.spatialReference);else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=L(y(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new b(e,`WrongSpatialReference`,t);return P(a)})},e.setgeometry=function(e,t){return n(e,t,(n,i,a)=>{if(A(a,2,2,e,t),!N(a[0]))throw new b(e,`InvalidParameter`,t);if(!0===a[0].immutable)throw new b(e,`Immutable`,t);if(!(a[1]instanceof r||a[1]===null))throw new b(e,`InvalidParameter`,t);return a[0]._geometry=a[1],O})},e.feature=function(e,t){return n(e,t,(n,i,a)=>{if(a.length===0)throw new b(e,`WrongNumberOfParameters`,t);let o;if(a.length===1)if(f(a[0]))o=B.fromJson(JSON.parse(a[0]),e.timeZone);else if(N(a[0]))o=B.createFromArcadeFeature(a[0]);else if(a[0]instanceof r)o=B.createFromGraphicLikeObject(a[0],null,null,e.timeZone);else{if(!(a[0]instanceof F))throw new b(e,`InvalidParameter`,t);{let n=a[0].hasField(`geometry`)?a[0].field(`geometry`):null,r=a[0].hasField(`attributes`)?a[0].field(`attributes`):null,i,s;if(j(n))i=z(n,e.spatialReference);else{if(n!=null&&!Oe(n))throw new b(e,`InvalidParameter`,t);i=n}if(j(r))s=B.parseAttributesFromDictionary(r);else{if(r!=null)throw new b(e,`InvalidParameter`,t);s=null}o=B.createFromGraphicLikeObject(i,s,null,e.timeZone)}}else if(a.length===2){let n=null,i=null;if(a[0]!==null)if(a[0]instanceof r)n=a[0];else{if(!(a[0]instanceof F))throw new b(e,`InvalidParameter`,t);n=z(a[0],e.spatialReference)}if(a[1]!==null){if(!(a[1]instanceof F))throw new b(e,`InvalidParameter`,t);i=B.parseAttributesFromDictionary(a[1])}o=B.createFromGraphicLikeObject(n,i,null,e.timeZone)}else{let n=null,i={};if(a[0]!==null)if(a[0]instanceof r)n=a[0];else{if(!(a[0]instanceof F))throw new b(e,`InvalidParameter`,t);n=z(a[0],e.spatialReference)}for(let n=1;n<a.length;n+=2){let r=k(a[n]),o=a[n+1];if(!(o==null||f(o)||isNaN(o)||w(o)||s(o)||T(o)||C(o)||_(o))||Le(o)||!1===pe(o))throw new b(e,`InvalidParameter`,t);i[r]=o===O?null:o}o=B.createFromGraphicLikeObject(n,i,null,e.timeZone)}return o._geometry=L(o.geometry(),e.spatialReference),o.immutable=!1,o})},e.dictionary=function(e,i){return n(e,i,(n,a,o)=>{if(o.length===0||o.length===1&&o[0]===null){let e=new F;return e.immutable=!1,e}if(o.length===1&&f(o[0]))try{let t=JSON.parse(o[0]),n=F.convertObjectToArcadeDictionary(t,R(e),!1);return n.immutable=!1,n}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===1&&o[0]instanceof r)try{let t=o[0].toJSON();t.hasZ=!0===o[0].hasZ,t.hasM=!0===o[0].hasM;let n=F.convertObjectToArcadeDictionary(t,R(e),!1);return n.immutable=!1,n}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===1&&N(o[0]))try{let e=new F;e.immutable=!1,e.setField(`geometry`,o[0].geometry());let t=new F;t.immutable=!1,e.setField(`attributes`,t);for(let e of o[0].keys())t.setField(e,o[0].field(e));return e}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===1&&(j(o[0])||De(o[0])||Ee(o[0])))try{let e=new F;e.immutable=!1;for(let t of o[0].keys())e.setField(t,o[0].field(t));return e}catch{throw new b(e,`InvalidParameter`,i)}if(o.length===2&&o[0]instanceof F&&_(o[1]))try{if(!0!==o[1]){let e=new F;e.immutable=!1;for(let t of o[0].keys())e.setField(t,o[0].field(t));return e}return o[0].deepClone()}catch{throw new b(e,`InvalidParameter`,i)}if(o.length%2!=0)throw new b(e,`WrongNumberOfParameters`,i);let c=Object.create(null);for(let n=0;n<o.length;n+=2){let r=k(o[n]),a=o[n+1];if(!(a==null||f(a)||isNaN(a)||w(a)||s(a)||_(a)||C(a)||T(a)||t(a)||I(a))||Le(a))throw new b(e,`InvalidParameter`,i);c[r]=a===O?null:a}let l=new F(c);return l.immutable=!1,l})},e.haskey=function(e,t){return n(e,t,(n,i,a)=>{A(a,2,2,e,t);let o=k(a[1]);if(Ie(a[0])||a[0]instanceof F)return a[0].hasField(o);if(a[0]instanceof r){let e=He(a[0],o,null,null,2);return!e||e.keystate!==`notfound`}throw new b(e,`InvalidParameter`,t)})},e.hasvalue=function(e,t){return n(e,t,(n,r,i)=>(A(i,2,2,e,t),Be(i[0],i[1])!=null))},e.indexof=function(e,r){return n(e,r,(n,i,a)=>{A(a,2,2,e,r);let o=a[1];if(t(a[0])){for(let e=0;e<a[0].length;e++)if(Pe(o,a[0][e]))return e;return-1}if(I(a[0])){let e=a[0].length();for(let t=0;t<e;t++)if(Pe(o,a[0].get(t)))return t;return-1}throw new b(e,`InvalidParameter`,r)})},e.angle=function(e,t){return n(e,t,(n,r,i)=>{if(i=Te(i),A(i,2,3,e,t),!(i[0]instanceof g)||!(i[1]instanceof g)||i.length>2&&!(i[2]instanceof g))throw new b(e,`InvalidParameter`,t);return i.length===2?qe(i[0],i[1]):Je(i[0],i[1],i[2])})},e.bearing=function(e,t){return n(e,t,(n,r,i)=>{if(i=Te(i),A(i,2,3,e,t),!(i[0]instanceof g)||!(i[1]instanceof g)||i.length>2&&!(i[2]instanceof g))throw new b(e,`InvalidParameter`,t);return i.length===2?Ke(i[0],i[1]):Ye(i[0],i[1],i[2])})}}function Nt(e,n){function r(e,t,n){let r=D(e);return isNaN(r)?r:isNaN(t)||isNaN(n)||t>n?NaN:r<t?t:r>n?n:r}e.number=function(e,r){return n(e,r,(n,i,a)=>{A(a,1,2,e,r);let o=a[0];if(s(o))return o;if(o===null)return 0;if(w(o)||T(o)||C(o))return o.toNumber();if(_(o))return Number(o);if(t(o))return NaN;if(o===``||o===void 0)return Number(o);if(f(o)){if(a[1]!==void 0){let e=he(a[1],`‰`,``);return e=he(e,`¤`,``),ze(o,{pattern:e})}return Number(o.trim())}return Number(o)})},e.abs=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.abs(D(i[0]))))},e.acos=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.acos(D(i[0]))))},e.asin=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.asin(D(i[0]))))},e.atan=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.atan(D(i[0]))))},e.atan2=function(e,t){return n(e,t,(n,r,i)=>(A(i,2,2,e,t),Math.atan2(D(i[0]),D(i[1]))))},e.ceil=function(e,t){return n(e,t,(n,r,i)=>{if(A(i,1,2,e,t),i.length===2){let e=D(i[1]);return isNaN(e)&&(e=0),se(`ceil`,D(i[0]),-1*e)}return Math.ceil(D(i[0]))})},e.round=function(e,t){return n(e,t,(n,r,i)=>{if(A(i,1,2,e,t),i.length===2){let e=D(i[1]);return isNaN(e)&&(e=0),se(`round`,D(i[0]),-1*e)}return Math.round(D(i[0]))})},e.floor=function(e,t){return n(e,t,(n,r,i)=>{if(A(i,1,2,e,t),i.length===2){let e=D(i[1]);return isNaN(e)&&(e=0),se(`floor`,D(i[0]),-1*e)}return Math.floor(D(i[0]))})},e.cos=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.cos(D(i[0]))))},e.isnan=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),typeof i[0]==`number`&&isNaN(i[0])))},e.exp=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.exp(D(i[0]))))},e.log=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.log(D(i[0]))))},e.pow=function(e,t){return n(e,t,(n,r,i)=>(A(i,2,2,e,t),D(i[0])**D(i[1])))},e.random=function(e,t){return n(e,t,(n,r,i)=>(A(i,0,0,e,t),Math.random()))},e.sin=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.sin(D(i[0]))))},e.sqrt=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.sqrt(D(i[0]))))},e.tan=function(e,t){return n(e,t,(n,r,i)=>(A(i,1,1,e,t),Math.tan(D(i[0]))))},e.isempty=function(e,t){return n(e,t,(e,t,n)=>{if(A(n,1,2,e,t),n.length>=2&&!_(n[1]))throw new b(e,`InvalidParameter`,t);return M(n[1],!1)?Ve(n[0]):Me(n[0])})},e.boolean=function(e,t){return n(e,t,(n,r,i)=>{A(i,1,1,e,t);let a=i[0];return je(a)})},e.constrain=function(e,i){return n(e,i,(n,a,o)=>{A(o,3,3,e,i);let s=D(o[1]),c=D(o[2]);if(t(o[0])){let e=[];for(let t of o[0])e.push(r(t,s,c));return e}if(I(o[0])){let e=[];for(let t=0;t<o[0].length();t++)e.push(r(o[0].get(t),s,c));return e}return r(o[0],s,c)})}}function K(e,n){if(n.length===1){if(t(n[0]))return Xe(e,n[0],-1);if(I(n[0]))return Xe(e,n[0].toArray(),-1)}return Xe(e,n,-1)}function Pt(e,n){e.stdev=function(e,t){return n(e,t,(e,t,n)=>K(`stdev`,n))},e.variance=function(e,t){return n(e,t,(e,t,n)=>K(`variance`,n))},e.average=function(e,t){return n(e,t,(e,t,n)=>K(`mean`,n))},e.mean=function(e,t){return n(e,t,(e,t,n)=>K(`mean`,n))},e.sum=function(e,t){return n(e,t,(e,t,n)=>K(`sum`,n))},e.min=function(e,t){return n(e,t,(e,t,n)=>K(`min`,n))},e.max=function(e,t){return n(e,t,(e,t,n)=>K(`max`,n))},e.distinct=function(e,t){return n(e,t,(e,t,n)=>K(`distinct`,n))},e.count=function(e,r){return n(e,r,(n,i,a)=>{if(A(a,1,1,e,r),a[0]==null)return 0;if(t(a[0])||f(a[0]))return a[0].length;if(I(a[0]))return a[0].length();if(j(a[0]))return a[0].entryCount();throw new b(e,`InvalidParameter`,r)})}}var Ft=e=>(t,n,r=14)=>+e(t,n).toFixed(r),It=(e,t)=>e+t,Lt=(e,t)=>e*t,Rt=(e,t)=>e/t,zt=(e,t,n)=>Ft(It)(e,t,n),q=(e,t,n)=>Ft(Lt)(e,t,n),Bt=(e,t,n)=>Ft(Rt)(e,t,n),Vt=360,Ht=400,Ut=2*Math.PI,J=3600,Wt=3240,Gt=60,Y=60,Kt=180*J/Math.PI,qt=Vt*Gt*Y,Jt=90*J,Yt=180*J,Xt=270*J,Zt=`ᵍ`,Qt=`°`;function $t(e){if(!1===f(e))throw new b(null,`InvalidParameter`,null);return e}function en(e,t){let n=10**t;return Math.round(e*n)/n}function tn(e,t){return e%t}function nn(e){let t=parseFloat(e.toString().replace(Math.trunc(e).toString(),`0`))*Math.sign(e);return e<0?{fraction:t,integer:Math.ceil(e)}:{fraction:t,integer:Math.floor(e)}}function rn(e,t){switch(e){case 0:return t===`SHORT`?`N`:`North`;case 1:return t===`SHORT`?`E`:`East`;case 2:return t===`SHORT`?`S`:`South`;case 3:return t===`SHORT`?`W`:`West`}}function an(e,t){return e-Math.floor(e/t)*t}function on(e){switch(e){case 6:case 1:return Vt;case 4:return Ut;case 5:return Ht;case 2:return qt;case 7:return Gt;case 8:return Y;default:throw new b(null,`LogicError`,null,{reason:`unsupported evaluations`})}}var sn=new x([],[[`NORTH`,1],[`NORTH AZIMUTH`,1],[`POLAR`,2],[`QUADRANT`,3],[`SOUTH`,4],[`SOUTH AZIMUTH`,4]]);function cn(e){let t=sn.lookup(e);if(t==null)throw new b(null,`LogicError`,null,{reason:`unsupported directionType`});return t}var ln=new x([],[[`D`,1],[`DD`,1],[`DECIMAL DEGREE`,1],[`DEGREE`,1],[`DECIMAL DEGREES`,1],[`DEGREES`,1],[`DMS`,3],[`DEGREES MINUTES SECONDS`,3],[`R`,4],[`RAD`,4],[`RADS`,4],[`RADIAN`,4],[`RADIANS`,4],[`G`,5],[`GON`,5],[`GONS`,5],[`GRAD`,5],[`GRADS`,5],[`GRADIAN`,5],[`GRADIANS`,5]]);function un(e){let t=ln.lookup(e);if(t==null)throw new b(null,`LogicError`,null,{reason:`unsupported units`});return t}var dn=class e{constructor(e,t,n){this.m_degrees=e,this.m_minutes=t,this.m_seconds=n}getField(e){switch(e){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}}static secondsToDMS(t){let n=nn(t).fraction,r=nn(t).integer,i=Math.floor(r/J);r-=i*J;let a=Math.floor(r/Y);return r-=a*Y,new e(i,a,r+n)}static numberToDms(t){let n=nn(t).fraction,r=nn(t).integer,i=q(nn(100*n).fraction,100),a=nn(100*n).integer;return new e(r,a,i)}format(t,n){let r=en(this.m_seconds,n),i=this.m_minutes,a=this.m_degrees;if(t===2||t===8)Y<=r&&(r-=Y,++i),Gt<=i&&(i=0,++a),Vt<=a&&(a=0);else if(t===7)r=0,i=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,a=this.m_degrees,Gt<=i&&(i=0,++a),Vt<=a&&(a=0);else if(t===1||t===6){let e=Bt(this.m_seconds,J),t=Bt(this.m_minutes,Gt);a=Math.round(this.m_degrees+t+e),i=0,r=0}return new e(a,i,r)}static dmsToSeconds(e,t,n){return e*J+t*Y+n}},fn=class{constructor(e,t,n){this.meridian=e,this.angle=t,this.direction=n}fetchAzimuth(e){return e===0?this.meridian:this.direction}},X=class e{constructor(e){this._angle=e}static createFromAngleAndDirection(t,n){return new e(new Z(e._convertDirectionFormat(t.extractAngularUnits(2),n,1)))}getAngle(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:case 4:case 2:return new Z(e._convertDirectionFormat(n,1,t));case 3:{let t=e.secondsNorthAzimuthToQuadrant(n);return new Z(t.angle)}}}getMeridian(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return e.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return e.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(e){let t=e<=Jt||e>=Xt?0:2,n=t===0?Math.min(qt-e,e):Math.abs(e-Yt);return new fn(t,n,e>Yt?3:1)}static createFromAngleMeridianAndDirection(t,n,r){return new e(new Z(e.secondsQuadrantToNorthAzimuth(t.extractAngularUnits(2),n,r)))}static secondsQuadrantToNorthAzimuth(e,t,n){return t===0?n===1?e:qt-e:n===1?Yt-e:Yt+e}static _convertDirectionFormat(e,t,n){let r=0;switch(t){case 1:r=e;break;case 2:r=Jt-e;break;case 3:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:r=e+Yt}let i=0;switch(n){case 1:i=r;break;case 2:i=Jt-r;break;case 3:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:i=r-Yt}return i=tn(i,qt),i<0?qt+i:i}};function pn(e,t,n){let r=null;switch(t){case 1:r=q(e,J);break;case 2:r=e;break;case 5:r=q(e,Wt);break;case 4:r=q(e,Kt);break;default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}switch(n){case 1:return Bt(r,J);case 2:return r;case 5:return Bt(r,Wt);case 4:return r/Kt;default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}}var Z=class e{constructor(e){this._seconds=e}static createFromAngleAndUnits(t,n){return new e(pn(t,n,2))}extractAngularUnits(e){return pn(this._seconds,2,mn(e))}static createFromDegreesMinutesSeconds(t,n,r){return new e(zt(zt(q(t,J),q(n,Y)),r))}};function mn(e){switch(oe(e),e){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}var hn=class e{constructor(e,t,n,r){this.view=e,this.angle=t,this.merdian=n,this.direction=r,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(t,n,r){return new e(t,n.getAngle(r),n.getMeridian(r),n.getDirection(r))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let e=null,t=6,n=0;for(let r=0;r<this.view.length;r++){let i=this.view[r];switch(i){case`m`:e=Dn(this.view,r,i),t=t===6?7:t,r=e.newpos;continue;case`s`:e=Dn(this.view,r,i),t=8,n=n<e.rounding?e.rounding:n,r=e.newpos;continue;default:continue}}this._dms=dn.secondsToDMS(this.angle.extractAngularUnits(2)),this._formattedDms=dn.secondsToDMS(this.angle.extractAngularUnits(2)).format(t,n)}};function gn(e,t,n,r,i){let a=null;switch(t){case 1:case 4:case 5:return a=an(en(e.extractAngularUnits(t),r),on(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 6:case 7:return a=an(i.fetchFormattedDms().getField(t),on(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 8:return a=an(en(i.fetchDms().getField(t),r),on(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);default:throw new b(null,`LogicError`,null,{reason:`unexpected evaluation`})}}function _n(e,t,n){if(n===3)throw new b(null,`LogicError`,null,{reason:`conversion error`});if(t===3){let t=dn.numberToDms(e);return X.createFromAngleAndDirection(Z.createFromDegreesMinutesSeconds(t.m_degrees,t.m_minutes,t.m_seconds),n)}return X.createFromAngleAndDirection(Z.createFromAngleAndUnits(e,mn(t)),n)}function vn(e){switch(D(e)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function yn(e){switch(e.toUpperCase().trim()){case`N`:case`NORTH`:return 0;case`E`:case`EAST`:return 1;case`S`:case`SOUTH`:return 2;case`W`:case`WEST`:return 3}return null}function bn(e){let t=parseFloat(e);if(s(t)){if(isNaN(t))throw new b(null,`LogicError`,null,{reason:`invalid conversion`});return t}throw new b(null,`LogicError`,null,{reason:`invalid conversion`})}function xn(e,t,n){let r=n===3,i=null,a=null,o=0,s=0,c=0;if(r){if(e.length<2)throw new b(null,`LogicError`,null,{reason:`conversion error`});c=1;let t=vn(k(e[e.length-1]));if(t?(i=t.first,a=t.second):(o=1,i=yn(k(e[0])),a=yn(k(e[e.length-1]))),i===null||a===null)throw new b(null,`LogicError`,null,{reason:`invalid conversion`})}switch(t){case 1:case 4:case 5:if(e.length===0)throw new b(null,`LogicError`,null,{reason:`invalid conversion`});return r?X.createFromAngleMeridianAndDirection(Z.createFromAngleAndUnits(bn(e[o]),mn(t)),i,a):X.createFromAngleAndDirection(Z.createFromAngleAndUnits(bn(e[o]),mn(t)),n);case 3:if(s=e.length-c-o,s===3){let t=Z.createFromDegreesMinutesSeconds(bn(e[o]),bn(e[o+1]),bn(e[o+2]));return r?X.createFromAngleMeridianAndDirection(t,i,a):X.createFromAngleAndDirection(t,n)}if(s===1){let t=bn(e[o]),s=dn.numberToDms(t),c=Z.createFromDegreesMinutesSeconds(s.m_degrees,s.m_minutes,s.m_seconds);return r?X.createFromAngleMeridianAndDirection(c,i,a):X.createFromAngleAndDirection(c,n)}}throw new b(null,`LogicError`,null,{reason:`invalid conversion`})}function Sn(e){let t=new Set([` `,`-`,`/`,`'`,`"`,`\\`,`^`,Qt,Zt,`	`,`\r`,`
`,`*`]),n=``;for(let r=0;r<e.length;r++){let i=e.charAt(r);t.has(i)?n+=`RRSPLITRRSPLITRR`:n+=i}return n.split(`RRSPLITRRSPLITRR`).filter(e=>e!==``)}function Cn(e,n,r){if(s(e))return _n(D(e),n,r);if(f(e))return xn(Sn(e),n,r);if(t(e))return xn(e,n,r);if(I(e))return xn(e.toArray(),n,r);throw new b(null,`LogicError`,null,{reason:`conversion error`})}function wn(e,t,n){let r=mn(n);if(r&&n!==3)return e.getAngle(t).extractAngularUnits(r);throw new b(null,`LogicError`,null,{reason:`conversion error`})}function Tn(e,t,n){let r=e.getAngle(t);if(t===3&&n===3){let n=dn.secondsToDMS(r.extractAngularUnits(2));return[rn(e.getMeridian(t),`SHORT`),n.m_degrees,n.m_minutes,n.m_seconds,rn(e.getDirection(t),`SHORT`)]}if(n===3){let e=dn.secondsToDMS(r.extractAngularUnits(2));return[e.m_degrees,e.m_minutes,e.m_seconds]}return t===3?[rn(e.getMeridian(t),`SHORT`),r.extractAngularUnits(n),rn(e.getDirection(t),`SHORT`)]:[r.extractAngularUnits(n)]}function En(e,t){let n=``;switch(e){case 1:n=t===3?`DD.DD`+Qt:`DDD.DD`+Qt;break;case 3:n=t===3?`dd`+Qt+` mm' ss"`:`ddd`+Qt+` mm' ss.ss"`;break;case 4:n=`R.RR`;break;case 5:n=`GGG.GG`+Zt;break;default:throw new b(null,`LogicError`,null,{reason:`conversion error`})}return t===3&&(n=`p `+n+` b`),n}function Dn(e,t,n){let r={padding:0,rounding:0,newpos:t},i=!1;for(;t<e.length;){let a=e[t];if(a===n)i?r.rounding++:r.padding++,t++;else{if(a!==`.`)break;i=!0,t++}}return r.newpos=t-1,r}function On(e,t,n){let r={escaped:``,newpos:t};for(t++;t<e.length;){let n=e[t];if(t++,n===`]`)break;r.escaped+=n}return r.newpos=t-1,r}function kn(e,t,n){let r=``,i=null,a=null,o=hn.createFromStringAndBearing(t,e,n),s={D:1,d:6,m:7,s:8,R:4,G:5};for(let c=0;c<t.length;c++){let l=t[c];switch(l){case`[`:i=On(t,c),r+=i.escaped,c=i.newpos;continue;case`D`:case`d`:case`m`:case`s`:case`R`:case`G`:i=Dn(t,c,l),a=e.getAngle(n),r+=gn(a,s[l],i.padding,i.rounding,o),c=i.newpos;continue;case`P`:case`p`:r+=rn(o.fetchMeridian(),l===`p`?`SHORT`:`LONG`);continue;case`B`:case`b`:r+=rn(o.fetchDirection(),l===`b`?`SHORT`:`LONG`);continue;default:r+=l}}return r}var An=new x([`TEXT`,`VALUE`]);function jn(e,t,n){if(!(t instanceof F))throw new b(null,`InvalidParameter`,null);if(!1===t.hasField(`directionType`))throw new b(null,`LogicError`,null,{reason:`missing directionType`});if(!1===t.hasField(`angleType`))throw new b(null,`LogicError`,null,{reason:`missing angleType`});let r=cn($t(t.field(`directiontype`))),i=Cn(e,un($t(t.field(`angletype`))),r);if(!(n instanceof F))throw new b(null,`InvalidParameter`,null);if(!1===n.hasField(`directionType`))throw new b(null,`LogicError`,null,{reason:`missing directionType`});if(!1===n.hasField(`outputType`))throw new b(null,`LogicError`,null,{reason:`missing angleType`});let a=cn($t(n.field(`directiontype`))),o=n.hasField(`angleType`)?un($t(n.field(`angletype`))):null,s=An.get($t(n.field(`outputType`)));if(!a||!s)throw new b(null,`LogicError`,null,{reason:`conversion error`});if(!(o||s===`TEXT`&&n.hasField(`format`)))throw new b(null,`LogicError`,null,{reason:`invalid unit`});switch(s){case`VALUE`:return a===3||o===3?Tn(i,a,o):wn(i,a,o);case`TEXT`:{let e=``;return n.hasField(`format`)&&(e=k(n.field(`format`))),e!==null&&e!==``||(e=En(o,a)),kn(i,e,a)}default:throw new b(null,`InvalidParameter`,null)}}var Mn=2654435761,Nn=2246822519,Pn=3266489917,Fn=668265263,In=374761393;function Ln(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}var Rn=class{constructor(e){this._seed=e,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(e){let t=[];for(let n of e)isNaN(n)?t.push(`NaN`):n===1/0?t.push(`Infinity`):n===-1/0?t.push(`-Infinity`):n===0?t.push(`0`):t.push(n.toString(16));this.update(Ln(t.join(``)))}updateIntArray(e){let t=Int32Array.from(e);this.update(new Uint8Array(t.buffer))}updateUint8Array(e){this.update(Uint8Array.from(e))}updateWithString(e){return this.update(Ln(e))}update(e){return this._bufs.push(e),this._totallen+=e.length,this}digest(){let e=new Uint8Array(this._totallen),t=0;for(let n of this._bufs)e.set(n,t),t+=n.length;return this.init(),this._xxHash32(e,this._seed)}_xxHash32(e,t=0){let n=e,r=t+In&4294967295,i=0;if(n.length>=16){let n=[t+Mn+Nn&4294967295,t+Nn&4294967295,t+0&4294967295,t-Mn&4294967295],a=e,o=a.length-16,s=0;for(i=0;(4294967280&i)<=o;i+=4){let e=i,t=a[e]+(a[e+1]<<8),r=a[e+2]+(a[e+3]<<8),o=t*Nn+(r*Nn<<16),c=n[s]+o&4294967295;c=c<<13|c>>>19;let l=65535&c,u=c>>>16;n[s]=l*Mn+(u*Mn<<16)&4294967295,s=s+1&3}r=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}r=r+e.length&4294967295;let a=e.length-4;for(;i<=a;i+=4){let e=i,t=n[e]+(n[e+1]<<8),a=n[e+2]+(n[e+3]<<8);r=r+(t*Pn+(a*Pn<<16))&4294967295,r=r<<17|r>>>15,r=(65535&r)*Fn+((r>>>16)*Fn<<16)&4294967295}for(;i<n.length;++i)r+=n[i]*In,r=r<<11|r>>>21,r=(65535&r)*Mn+((r>>>16)*Mn<<16)&4294967295;return r^=r>>>15,r=((65535&r)*Nn&4294967295)+((r>>>16)*Nn<<16),r^=r>>>13,r=((65535&r)*Pn&4294967295)+((r>>>16)*Pn<<16),r^=r>>>16,r<0?r+4294967296:r}};function zn(e){return e.loadStatus===`loaded`&&e.user?.sourceJSON?e.user.sourceJSON:null}function Bn(e,t){return!!e&&ie(e,t?.restUrl||``)}function Vn(e,t){if(!e||!t)return e===t;if(e.x===t.x&&e.y===t.y){if(e.hasZ){if(e.z!==t.z)return!1}else if(t.hasZ)return!1;if(e.hasM){if(e.m!==t.m)return!1}else if(t.hasM)return!1;return!0}return!1}function Q(e,n,r){if(e!==null)if(t(e)){if(n.updateUint8Array([61]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e)Q(t,n,r);r.map.delete(e),r.currentLength--}n.updateUint8Array([199])}else if(I(e)){if(n.updateUint8Array([61]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e.toArray())Q(t,n,r);r.map.delete(e),r.currentLength--}n.updateUint8Array([199])}else{if(w(e))return n.updateIntArray([e.toNumber()]),void n.updateUint8Array([241]);if(C(e))return n.updateIntArray([e.toNumber()]),void n.updateIntArray([257]);if(T(e))return n.updateIntArray([e.toNumber()]),void n.updateIntArray([263]);if(f(e))return n.updateIntArray([e.length]),n.updateWithString(e),void n.updateUint8Array([41]);if(_(e))n.updateUint8Array([!0===e?1:0,113]);else{if(s(e))return n.updateFloatArray([e]),void n.updateUint8Array([173]);if(e instanceof Qe||e instanceof Ze)throw new b(r.context,`UnsupportedHashType`,r.node);if(!(e instanceof F)){if(N(e))throw new b(r.context,`UnsupportedHashType`,r.node);if(e instanceof g)return n.updateIntArray([3833836621]),n.updateIntArray([0]),n.updateFloatArray([e.x]),n.updateIntArray([1]),n.updateFloatArray([e.y]),e.hasZ&&(n.updateIntArray([2]),n.updateFloatArray([e.z])),e.hasM&&(n.updateIntArray([3]),n.updateFloatArray([e.m])),n.updateIntArray([3765347959]),void Q(e.spatialReference.wkid,n,r);if(e instanceof ae){n.updateIntArray([1266616829]);for(let t=0;t<e.rings.length;t++){let i=e.rings[t],a=[],o=null,s=null;for(let n=0;n<i.length;n++){let r=e.getPoint(t,n);if(n===0)o=r;else if(Vn(s,r))continue;s=r,n===i.length-1&&Vn(o,r)||a.push(r)}n.updateIntArray([1397116793,a.length]);for(let e=0;e<a.length;e++){let t=a[e];n.updateIntArray([3962308117,e]),Q(t,n,r),n.updateIntArray([2716288009])}n.updateIntArray([2278822459])}n.updateIntArray([3878477243]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof o){n.updateIntArray([4106883559]);for(let t=0;t<e.paths.length;t++){let i=e.paths[t];n.updateIntArray([1397116793,i.length]);for(let a=0;a<i.length;a++)n.updateIntArray([3962308117,a]),Q(e.getPoint(t,a),n,r),n.updateIntArray([2716288009]);n.updateIntArray([2278822459])}n.updateIntArray([2568784753]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof ee){n.updateIntArray([588535921,e.points.length]);for(let t=0;t<e.points.length;t++){let i=e.getPoint(t);n.updateIntArray([t]),Q(i,n,r)}n.updateIntArray([1700171621]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof ne)return n.updateIntArray([3483648373]),n.updateIntArray([0]),n.updateFloatArray([e.xmax]),n.updateIntArray([1]),n.updateFloatArray([e.xmin]),n.updateIntArray([2]),n.updateFloatArray([e.ymax]),n.updateIntArray([3]),n.updateFloatArray([e.ymin]),e.hasZ&&(n.updateIntArray([4]),n.updateFloatArray([e.zmax]),n.updateIntArray([5]),n.updateFloatArray([e.zmin])),e.hasM&&(n.updateIntArray([6]),n.updateFloatArray([e.mmax]),n.updateIntArray([7]),n.updateFloatArray([e.mmin])),n.updateIntArray([3622027469]),void Q(e.spatialReference.wkid,n,r);if(e instanceof ue)return n.updateIntArray([14]),e.wkid!==void 0&&e.wkid!==null&&n.updateIntArray([e.wkid]),e.wkt&&n.updateWithString(e.wkt),void(e.wkt2&&n.updateWithString(e.wkt2));throw Le(e)||Ne(e)||_e(e),new b(r.context,`UnsupportedHashType`,r.node)}if(n.updateUint8Array([223]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e.keys())n.updateIntArray([t.length]),n.updateWithString(t),n.updateUint8Array([251]),Q(e.field(t),n,r),n.updateUint8Array([239]);r.map.delete(e),r.currentLength--}n.updateUint8Array([73])}}else n.updateUint8Array([0,139])}function Hn(n,r){n.portal=function(e,t){return r(e,t,(n,r,i)=>(A(i,1,1,e,t),new Ze(k(i[0]))))},n.typeof=function(e,t){return r(e,t,(n,r,i)=>{A(i,1,1,e,t);let a=Ce(i[0]);if(a===`Unrecognized Type`)throw new b(e,`UnrecognizedType`,t);return a})},n.trim=function(e,t){return r(e,t,(n,r,i)=>(A(i,1,1,e,t),k(i[0]).trim()))},n.tohex=function(e,t){return r(e,t,(n,r,i)=>{A(i,1,1,e,t);let a=D(i[0]);return isNaN(a)?a:a.toString(16)})},n.upper=function(e,t){return r(e,t,(n,r,i)=>(A(i,1,1,e,t),k(i[0]).toUpperCase()))};let i=new x([`every-word`,`first-word`]);n.proper=function(e,t){return r(e,t,(n,r,a)=>{A(a,1,2,e,t);let o=(a.length>=2?i.lookup(k(a[1])):null)??`every-word`,s=/\s/,c=k(a[0]),l=``,u=!0;for(let e=0;e<c.length;e++){let t=c[e];s.test(t)?o===`every-word`&&(u=!0):t.toUpperCase()!==t.toLowerCase()&&(u?(t=t.toUpperCase(),u=!1):t=t.toLowerCase()),l+=t}return l})},n.lower=function(e,t){return r(e,t,(n,r,i)=>(A(i,1,1,e,t),k(i[0]).toLowerCase()))};let o=new x([`digits`,`digits-hyphen`,`digits-hyphen-braces`,`digits-hyphen-parentheses`]);n.guid=function(t,n){return r(t,n,(r,i,a)=>{switch(A(a,0,1,t,n),a.length>0?o.lookup(k(a[0])):null){case`digits`:return e().replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return e();case`digits-hyphen-parentheses`:return`(`+e()+`)`;default:return`{`+e()+`}`}})},n.standardizeguid=function(e,t){return r(e,t,(n,r,i)=>{A(i,2,2,e,t);let a=k(i[0]);if(a===``||a===null)return``;let s=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(a);if(!s)return``;let c=s.groups;switch(a=c.partA+`-`+c.partB+`-`+c.partC+`-`+c.partD+`-`+c.partE,o.lookup(k(i[1]))){case`digits`:return a.replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return a;case`digits-hyphen-parentheses`:return`(`+a+`)`;default:return`{`+a+`}`}})},n.console=function(e,t){return r(e,t,(t,n,r)=>(r.length===0||(r.length===1?e.console(k(r[0])):e.console(k(r))),O))},n.mid=function(e,t){return r(e,t,(n,r,i)=>{A(i,2,3,e,t);let a=D(i[1]);if(isNaN(a))return``;if(a=Math.max(0,a),i.length===2)return k(i[0]).slice(a);let o=D(i[2]);return isNaN(o)?``:(o<0&&(o=0),k(i[0]).slice(a,a+o))})},n.find=function(e,t){return r(e,t,(n,r,i)=>{A(i,2,3,e,t);let a=0;if(i.length>2){if(a=D(M(i[2],0)),isNaN(a))return-1;a<0&&(a=0)}return k(i[1]).indexOf(k(i[0]),a)})},n.left=function(e,t){return r(e,t,(n,r,i)=>{A(i,2,2,e,t);let a=D(i[1]);return isNaN(a)?``:(a<0&&(a=0),k(i[0]).slice(0,a))})},n.right=function(e,t){return r(e,t,(n,r,i)=>{A(i,2,2,e,t);let a=D(i[1]);return isNaN(a)||a<=0?``:k(i[0]).slice(-a)})},n.split=function(e,t){return r(e,t,(n,r,i)=>{let a;A(i,2,4,e,t);let o=D(M(i[2],-1)),s=je(M(i[3],!1));if(o===-1||o===null||!0===s?a=k(i[0]).split(k(i[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),a=k(i[0]).split(k(i[1]),o)),!1===s)return a;let c=[];for(let e=0;e<a.length&&!(o!==-1&&c.length>=o);e++)a[e]!==``&&a[e]!==void 0&&c.push(a[e]);return c})},n.text=function(e,t){return r(e,t,(n,r,i)=>(A(i,1,2,e,t),me(i[0],i[1])))},n.concatenate=function(e,n){return r(e,n,(e,n,r)=>{let i=[];if(r.length<1)return``;if(t(r[0])){let e=M(r[2],``);for(let t=0;t<r[0].length;t++)i[t]=me(r[0][t],e);return r.length>1?i.join(r[1]):i.join(``)}if(I(r[0])){let e=M(r[2],``);for(let t=0;t<r[0].length();t++)i[t]=me(r[0].get(t),e);return r.length>1?i.join(r[1]):i.join(``)}for(let e=0;e<r.length;e++)i[e]=me(r[e]);return i.join(``)})},n.reverse=function(e,n){return r(e,n,(r,i,a)=>{if(A(a,1,1,e,n),t(a[0])){let e=a[0].slice();return e.reverse(),e}if(I(a[0])){let e=a[0].toArray().slice();return e.reverse(),e}throw new b(e,`InvalidParameter`,n)})},n.replace=function(e,t){return r(e,t,(n,r,i)=>{A(i,3,4,e,t);let a=k(i[0]),o=k(i[1]),s=k(i[2]);return i.length!==4||je(i[3])?he(a,o,s):a.replace(o,s)})},n.urlencode=function(e,t){return r(e,t,(n,r,i)=>{if(A(i,1,1,e,t),i[0]===null)return``;if(i[0]instanceof F){let e=``;for(let t of i[0].keys()){let n=i[0].field(t);e!==``&&(e+=`&`),e+=n===null?encodeURIComponent(t)+`=`:encodeURIComponent(t)+`=`+encodeURIComponent(n)}return e}return encodeURIComponent(k(i[0]))})},n.hash=function(e,t){return r(e,t,(n,r,i)=>{A(i,1,1,e,t);let a=new Rn(0);return Q(i[0],a,{context:e,node:t,map:new Map,currentLength:0}),a.digest()})},n.convertdirection=function(e,t){return r(e,t,(n,r,i)=>(A(i,3,3,e,t),jn(i[0],i[1],i[2])))},n.fromjson=function(e,t){return r(e,t,(n,r,i)=>{if(A(i,1,1,e,t),!1===f(i[0]))throw new b(e,`InvalidParameter`,t);return F.convertJsonToArcade(JSON.parse(k(i[0])),R(e))})},n.tocharcode=function(e,t){return r(e,t,(n,r,i)=>{A(i,1,2,e,t);let a=D(M(i[1],0)),o=k(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new b(e,`OutOfBounds`,t);return o.charCodeAt(a)})},n.tocodepoint=function(e,t){return r(e,t,(n,r,i)=>{A(i,1,2,e,t);let a=D(M(i[1],0)),o=k(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new b(e,`OutOfBounds`,t);return o.codePointAt(a)})},n.fromcharcode=function(e,t){return r(e,t,(n,r,i)=>{if(i.length<1)throw new b(e,`WrongNumberOfParameters`,t);let a=i.map(e=>Math.trunc(D(e))).filter(e=>e>=0&&e<=65535);return a.length===0?null:String.fromCharCode.apply(null,a)})},n.fromcodepoint=function(e,t){return r(e,t,(n,r,i)=>{if(i.length<1)throw new b(e,`WrongNumberOfParameters`,t);let a;try{a=i.map(e=>Math.trunc(D(e))).filter(e=>e<=1114111&&e>>>0===e)}catch{return null}return a.length===0?null:String.fromCodePoint.apply(null,a)})},n.getuser=function(e,t){return r(e,t,(n,r,i)=>{A(i,0,2,e,t);let o=M(i[1],``);if(o=!0===o||!1===o?``:k(o),o!==null&&o!==``)return null;if(i.length===0||i[0]instanceof Ze){let t=null;if(t=e.services?.portal?e.services.portal:a.getDefault(),i.length>0&&!Bn(i[0].field(`url`),t)||!t)return null;if(o===``){let n=zn(t);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return F.convertObjectToArcadeDictionary(t,R(e))}}return null}throw new b(e,`InvalidParameter`,t)})},n.getenvironment=function(e,t){return r(e,t,(n,r,i)=>(A(i,0,0,e,t),F.convertObjectToArcadeDictionary(ve(R(e),e.spatialReference),R(e),!0)))},n.standardizefilename=function(e,t){return r(e,t,(e,t,n)=>{A(n,1,1,e,t);let[r]=n;if(r==null)return``;if(!f(r))throw new b(e,`InvalidParameter`,t);return r.replaceAll(/[<>"?*]/g,`_`).replaceAll(/[/\\|]/g,`-`).replaceAll(`:`,`, `)})}}var Un;async function Wn(){Un??(Un=await n(()=>import(`./geodeticDistanceOperator-Cmd25T7U.js`),__vite__mapDeps([0,1,2,3])),await Un.load())}function $(e){let t=e.track;if(t==null)throw new b(e,`InvalidParameter`,null);return t}function Gn(e,t,n,r){let i=Math.max(0,Kn(e,t)),a=Math.max(0,Kn(e,n));return e.observations.slice(i,a).map((e,t)=>r(e,t+i))}function Kn(e,t){return e.currentObservationIndex+t}function qn(e,t){let n=Kn(e,t);if(n<0||n>=e.observations.length)throw new b(null,`InvalidParameter`,null);return n}function Jn(e,t){let{stats:n}=e.observations[t];if(n.totalDistance!=null)return n.totalDistance;if(t===0)return n.totalDistance=0;let r,i=0;for(r=t-1;r>0;r--){let t=e.observations[r].stats;if(t.totalDistance!=null){i=t.totalDistance;break}}for(let n=r+1;n<=t;n++){let t=e.observations[n];i+=Yn(e,n),t.stats.totalDistance=i}return i}function Yn(e,t){let n=e.observations[t],r=n.stats;if(r.distance!=null)return r.distance;if(t===0)return r.distance=0;let i=e.observations[t-1];return r.distance=Un.execute(i.feature.geometry(),n.feature.geometry())}function Xn(e,t){let n=e.observations[t],r=n.stats;if(r.speed!=null)return r.speed;if(t===0)return r.speed=0;let i=e.observations[t-1],a=n.endTime-i.startTime;return a<=0?r.speed=0:r.speed=Yn(e,t)/(a/1e3)}function Zn(e,t){let n=e.observations[t],r=n.stats;if(r.acceleration!=null)return r.acceleration;if(t===0)return r.acceleration=0;let i=e.observations[t-1],a=n.endTime-i.startTime;if(a<=0)return r.acceleration=0;let o=Xn(e,t),s=Xn(e,t-1);return r.acceleration=(o-s)/(a/1e3)}function Qn(e,t){e[S(`TrackIndex`)]=function(e,n){return t(e,n,(e,t,n)=>(A(n,0,0,e,t),$(e).currentObservationIndex))},e[S(`TrackWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,2,2,e,t);let r=D(n[0]),i=D(n[1]);return Gn($(e),r,i,e=>e.feature)})},e[S(`TrackFieldWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,3,3,e,t);let r=k(n[0]),i=D(n[1]),a=D(n[2]);return Gn($(e),i,a,e=>e.feature.field(r))})},e[S(`TrackGeometryWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,2,2,e,t);let r=D(n[0]),i=D(n[1]);return Gn($(e),r,i,e=>e.feature.geometry())})},e[S(`TrackStartTime`)]=function(e,n){return t(e,n,(e,t,n)=>(A(n,0,0,e,t),v.epochToArcadeDate($(e).observations[0].startTime,e.timeZone??`system`)))},e[S(`TrackCurrentTime`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,0,0,e,t);let r=$(e);return v.epochToArcadeDate(r.observations[r.currentObservationIndex].startTime,e.timeZone??`system`)})},e[S(`TrackDuration`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,0,0,e,t);let r=$(e);return r.observations[r.currentObservationIndex].startTime-r.observations[0].startTime})},e[S(`TrackCurrentDistance`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,0,0,e,t);let r=$(e);return Jn(r,r.currentObservationIndex)})},e[S(`TrackDistanceAt`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,1,1,e,t);let r=D(n[0]),i=$(e);return Jn(i,qn(i,r))})},e[S(`TrackDistanceWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,2,2,e,t);let r=D(n[0]),i=D(n[1]),a=$(e);return Gn(a,r,i,(e,t)=>Jn(a,t))})},e[S(`TrackCurrentSpeed`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,0,0,e,t);let r=$(e);return Xn(r,r.currentObservationIndex)})},e[S(`TrackSpeedAt`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,1,1,e,t);let r=D(n[0]),i=$(e);return Xn(i,qn(i,r))})},e[S(`TrackSpeedWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,2,2,e,t);let r=D(n[0]),i=D(n[1]),a=$(e);return Gn(a,r,i,(e,t)=>Xn(a,t))})},e[S(`TrackCurrentAcceleration`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,0,0,e,t);let r=$(e);return Zn(r,r.currentObservationIndex)})},e[S(`TrackAccelerationAt`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,1,1,e,t);let r=D(n[0]),i=$(e);return Zn(i,qn(i,r))})},e[S(`TrackAccelerationWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{A(n,2,2,e,t);let r=D(n[0]),i=D(n[1]),a=$(e);return Gn(a,r,i,(e,t)=>Zn(a,t))})}}export{ft as _,Nt as a,$e as b,Dt as c,ht as d,mt as f,pt as g,lt as h,Pt as i,yt as l,dt as m,Wn as n,Mt as o,gt as p,Hn as r,jt as s,Qn as t,_t as u,tt as v,nt as y};