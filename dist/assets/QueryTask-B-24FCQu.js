const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/meshFeatureSet-DpHMWYwY.js","assets/index-CZ4oMP1N.js","assets/index-CDgdHpAj.css","assets/earcut-BF1-mB58.js","assets/vec3-DSOiDp9-.js","assets/vec4-utmnCg3f.js","assets/vectorStacks-FfDNcZoS.js","assets/quatf64-BJJPhW0N.js","assets/quat-BszBv_-H.js","assets/Mesh-DYiHRSOH.js","assets/computeTranslationToOriginAndRotation-Cm78hfIp.js","assets/projectPointToVector-HYpbaZqA.js","assets/spatialReferenceEllipsoidUtils-B0E4spY0.js","assets/MeshComponent-CbjVLVfh.js","assets/MeshMaterialMetallicRoughness-Q-7oSOPc.js","assets/meshCloneUtils-CCqUCHap.js","assets/meshProperties-DH9aY28x.js","assets/MeshLocalVertexSpace-OEvelzSD.js","assets/MeshTransform-mXzx59gA.js","assets/axisAngleDegrees-B_kvpSNV.js","assets/MeshVertexAttributes-DnUp4IwU.js","assets/External-2kZvgPV0.js","assets/vertexSpaceConversion-Ca0tjp55.js","assets/BufferView-D7rgY_ku.js","assets/Util-BF0TzZHY.js","assets/meshVertexSpaceUtils-CsTvVRUI.js","assets/triangulationUtils-BlqOiLV7.js","assets/Indices-BME9aaDP.js","assets/deduplicate-DAw_n_cX.js","assets/plane-Bg1a5O73.js","assets/meshFeatureAttributes-YR8sMkr_.js","assets/RelationshipQuery-8Dj56zmc.js","assets/executeRelationshipQuery-Dd4mXa_e.js","assets/urlUtils-BholpLvl.js","assets/queryRelatedRecords-DXCuysXB.js","assets/queryAttachments-TZgRg46f.js","assets/AttachmentInfo-CF5-3_Di.js","assets/executeAttributeBinsQuery-BKE_dkF3.js","assets/AttributeBinsFeatureSet-D0PNU62h.js","assets/queryUtils-DcyDFw5_.js","assets/FixedIntervalBinParameters-Dvwocz3j.js","assets/AttributeBinsQuery-BT2fajrO.js","assets/executePivotQuery-DSSH3FkP.js","assets/queryUtils-D1dUonfL.js","assets/PivotQuery-DIW1lqua.js","assets/executeTopFeaturesQuery-DfCYaUuH.js","assets/queryTopFeatures-CjXvoOmw.js","assets/TopFeaturesQuery-DyJ9g8fz.js","assets/executeForTopIds-DvV34VgK.js","assets/executeForTopExtents-BMSQO-J7.js","assets/executeForTopCount-IsPjPkXq.js"])))=>i.map(i=>d[i]);
import{$w as e,BS as t,BT as n,DT as r,OT as i,Wn as a,_S as o,_w as s,cd as c,gC as l,gD as u,ha as d,hu as f,pD as p,rd as m}from"./index-CZ4oMP1N.js";import{n as h,r as g,t as _}from"./executeForIds--WTxiX90.js";import{t as v}from"./executeQueryJSON-DqSFIBMl.js";import{t as y}from"./executeQueryPBF-BiLBbjFv.js";var b=class extends s{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.uniqueIdFields=null,this.url=null}get parsedUrl(){return l(this.url)}async execute(e,t){let n=await this.executeJSON(e,t);return this.featureSetFromJSON(e,n,t)}async executeJSON(e,t){let n=this._normalizeQuery(e),r=e.outStatistics?.[0]!=null,i=p(`featurelayer-pbf-statistics`),a=(!r||i)&&!0!==e.returnTrueCurves,o;if(this.pbfSupported&&a)try{o=await y(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})}catch(e){if(e.name!==`query:parsing-pbf`)throw e;this.pbfSupported=!1}return this.pbfSupported&&a||(o=await v(this.url,n,t,{uniqueIdFields:this.uniqueIdFields})),this._normalizeFields(o.fields),o}async featureSetFromJSON(n,r,i){if(!this._queryGet3DObjectFormat(n)||this.infoFor3D==null||!r.features)return d.fromJSON(r);let{meshFeatureSetFromJSON:a}=await e(t(()=>import(`./meshFeatureSet-DpHMWYwY.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])),i);return a(n,this.infoFor3D,r)}executeForCount(e,t){return g(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}executeForExtent(e,t){return h(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return _(this.url,this._normalizeQuery(e),t,{uniqueIdFields:this.uniqueIdFields})}async executeRelationshipQuery(n,r){let[{default:i},{executeRelationshipQuery:a}]=await e(Promise.all([t(()=>import(`./RelationshipQuery-8Dj56zmc.js`),__vite__mapDeps([31,1,2])),t(()=>import(`./executeRelationshipQuery-Dd4mXa_e.js`),__vite__mapDeps([32,1,2,33,34]))]),r),o=i.from(n);return(this.gdbVersion||this.dynamicDataSource)&&(o=o.clone(),o.gdbVersion=o.gdbVersion||this.gdbVersion,o.dynamicDataSource=o.dynamicDataSource||this.dynamicDataSource),a(this.url,o,r)}async executeRelationshipQueryForCount(n,r){let[{default:i},{executeRelationshipQueryForCount:a}]=await e(Promise.all([t(()=>import(`./RelationshipQuery-8Dj56zmc.js`),__vite__mapDeps([31,1,2])),t(()=>import(`./executeRelationshipQuery-Dd4mXa_e.js`),__vite__mapDeps([32,1,2,33,34]))]),r),o=i.from(n);return(this.gdbVersion||this.dynamicDataSource)&&(o=o.clone(),o.gdbVersion=o.gdbVersion||this.gdbVersion,o.dynamicDataSource=o.dynamicDataSource||this.dynamicDataSource),a(this.url,o,r)}async executeAttachmentQuery(n,r){let{executeAttachmentQuery:i,fetchAttachments:a,processAttachmentQueryResult:o}=await e(t(()=>import(`./queryAttachments-TZgRg46f.js`),__vite__mapDeps([35,1,2,36,33])),r),s=f(this.url);return o(s,await(this.queryAttachmentsSupported?i(s,n,r):a(s,n,r)))}async executeAttributeBinsQuery(n,r){let{executeAttributeBinsQuery:i}=await e(t(()=>import(`./executeAttributeBinsQuery-BKE_dkF3.js`),__vite__mapDeps([37,1,2,38,39,33,40,41])),r);return i(this.parsedUrl,n,r)}async executePivotQuery(n,r){let{executePivotQuery:i}=await e(t(()=>import(`./executePivotQuery-DSSH3FkP.js`),__vite__mapDeps([42,1,2,33,43,44])),r);return i(this.parsedUrl,n,r)}async executeTopFeaturesQuery(n,r){let{executeTopFeaturesQuery:i}=await e(t(()=>import(`./executeTopFeaturesQuery-DfCYaUuH.js`),__vite__mapDeps([45,1,2,33,46,47])),r);return i(this.parsedUrl,n,this.sourceSpatialReference,r)}async executeForTopIds(n,r){let{executeForTopIds:i}=await e(t(()=>import(`./executeForTopIds-DvV34VgK.js`),__vite__mapDeps([48,1,2,33,46,47])),r);return i(this.parsedUrl,n,r)}async executeForTopExtents(n,r){let{executeForTopExtents:i}=await e(t(()=>import(`./executeForTopExtents-BMSQO-J7.js`),__vite__mapDeps([49,1,2,33,46,47])),r);return i(this.parsedUrl,n,r)}async executeForTopCount(n,r){let{executeForTopCount:i}=await e(t(()=>import(`./executeForTopCount-IsPjPkXq.js`),__vite__mapDeps([50,1,2,33,46,47])),r);return i(this.parsedUrl,n,r)}_normalizeQuery(e){let t=m.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?c.from(e.dynamicDataSource):this.dynamicDataSource);let{infoFor3D:r}=this,i=this._queryGet3DObjectFormat(e);if(r!=null&&i){if(t=t===e?t.clone():t,t.formatOf3DObjects=i,t.outSpatialReference&&!o(t.outSpatialReference,this.sourceSpatialReference))throw new n(`query:unsupported-out-spatial-reference`,`3D object feature services do not support projection of geometries`);if(t.outFields==null||!t.outFields.includes(`*`)){t=t===e?t.clone():t,t.outFields??=[];let{originX:n,originY:i,originZ:a,translationX:o,translationY:s,translationZ:c,scaleX:l,scaleY:u,scaleZ:d,rotationX:f,rotationY:p,rotationZ:m,rotationDeg:h}=r.transformFieldRoles;t.outFields.push(n,i,a,o,s,c,l,u,d,f,p,m,h)}}return t}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(let t of e){let e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryGet3DObjectFormat({returnGeometry:e,multipatchOption:t,outStatistics:n}){return!0!==e||t===`xyFootprint`||n?null:a(this.infoFor3D)}};u([r({type:c})],b.prototype,`dynamicDataSource`,void 0),u([r()],b.prototype,`fieldsIndex`,void 0),u([r()],b.prototype,`gdbVersion`,void 0),u([r()],b.prototype,`infoFor3D`,void 0),u([r({readOnly:!0})],b.prototype,`parsedUrl`,null),u([r()],b.prototype,`pbfSupported`,void 0),u([r()],b.prototype,`queryAttachmentsSupported`,void 0),u([r()],b.prototype,`sourceSpatialReference`,void 0),u([r()],b.prototype,`uniqueIdFields`,void 0),u([r({type:String})],b.prototype,`url`,void 0),b=u([i(`esri.layers.graphics.sources.support.QueryTask`)],b);export{b as t};