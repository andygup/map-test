import{Gn as e,Un as t,ZS as n,mD as r,pT as i}from"./index-BN8X5Ryz.js";var a=class{constructor(e,t,n){this.assetName=e,this.assetMimeType=t,this.parts=n}equals(e){return this===e||this.assetName===e.assetName&&this.assetMimeType===e.assetMimeType&&r(this.parts,e.parts,(e,t)=>e.equals(t))}isOnService(e){return this.parts.every(t=>t.isOnService(e))}makeHash(){let e=``;for(let t of this.parts)e+=t.partHash;return e}async toBlob(e){let{parts:t}=this;if(t.length===1)return t[0].toBlob(e);let n=await Promise.all(t.map(t=>t.toBlob(e)));return i(e),new Blob(n)}},o=class{constructor(e,t){this.partUrl=e,this.partHash=t}equals(e){return this===e||this.partUrl===e.partUrl&&this.partHash===e.partHash}isOnService(e){return this.partUrl.startsWith(`${e.path}/assets/`)}async toBlob(e){let{data:t}=await n(this.partUrl,{responseType:`blob`});return i(e),t}};function s(e){return u(e?.source)}var c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function u(e){switch(e?.type){case`client`:return Array.isArray(e.files)?e.files.some(d):d(e.files);case`service`:return e.assets.some(d);case`loadable`:return!0;default:return!1}}function d(e){if(e instanceof File){let{type:t,name:n}=e;return c.test(t)||l.test(n)}return c.test(e.assetMimeType)||l.test(e.assetName)}function f(e,t){if(!e)return!1;let{source:n}=e;return m(n,t)}function p(e,t){if(e===t)return!0;let{source:n}=e,{source:r}=t;if(n===r)return!0;if(n.type===`service`&&r.type===`service`){if(n.assets.length!==r.assets.length)return!1;let e=(e,t)=>e.assetName<t.assetName?-1:e.assetName>t.assetName?1:0,t=[...n.assets].sort(e),i=[...r.assets].sort(e);for(let e=0;e<t.length;++e)if(!t[e].equals(i[e]))return!1;return!0}return!1}function m(e,t){return e.type===`service`&&e.assets.every(e=>e.isOnService(t))}function h(n,r){return n instanceof File?t(n,r):e(n.assetMimeType,n.assetName,r)}function g(e){switch(e.type){case`client`:return Array.isArray(e.files)?e.files:[e.files];case`service`:return e.assets;case`loadable`:return}}function _(e){return!!e.original}export{o as a,h as c,p as i,f as n,s as o,a as r,_ as s,g as t};