import{Dn as e,Dw as t,ED as n,J_ as r,OE as i,On as a,Y_ as o,am as s,cm as c,gn as l,kE as u,kn as d,om as f,pn as p,q_ as m}from"./index-BN8X5Ryz.js";function ee(e){return Number.isNaN(e)||e===0?e:Math.trunc(e)}var te=`esri.core.sql.SqlTimeStampOffset`,h=class e{constructor(e){this._timeStampOffset=e,this.declaredRootClass=te,this._date=null}static isTimestampOffset(e){return typeof e==`object`&&!!e&&`declaredRootClass`in e&&e.declaredRootClass===te}toDateTime(){return this._date??=m.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return ee(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return ee(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return e.fromDateTime(this.toDateTime().startOf(`day`))}static fromJSDate(t){return new e(m.fromJSDate(t).toISO({includeOffset:!0}))}static fromDateTime(t){return new e(t.toISO({includeOffset:!0}))}static fromParts(t,n,r=0,i=0,a=0,o=0,s=0,c=!1,l=0,u=0){let d=`${t.toString().padStart(4,`0`)}-${n.toString().padStart(2,`0`)}-${r.toString().padStart(2,`0`)}`,f=``;o<10&&(f=`0`);let p=`${i.toString().padStart(2,`0`)}:${a.toString().padStart(2,`0`)}:${f+o.toString()}`;s!==0&&(p+=`.`+s.toString().padStart(3,`0`));let m=`${c?`-`:`+`}${l.toString().padStart(2,`0`)}:${u.toString().padStart(2,`0`)}`;return new e(d+`T`+p+m)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&=e.replace(`.000`,``),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(t){let n=this.toDateTime().plus(t);return e.fromDateTime(n)}},ne={InvalidValueForAggregateFunction:`Invalid value used in aggregate function`,MissingStatisticParameters:`Statistic does not have 1 or 0 Parameters`,InvalidFunctionParameters:`Invalid parameters for call to {function}`,UnsupportedIsLhs:`Unsupported left hand expression in is statement`,UnsupportedIsRhs:`Unsupported right hand expression in is statement`,UnsupportedOperator:`Unsupported operator - {operator}`,UnsupportedSyntax:`Unsupported syntax - {node}`,UnsupportedSqlFunction:`Sql function not found = {function}`,InvalidDataType:`Invalid sql data type`,InvalidDate:`Invalid date encountered`,InvalidOperator:`Invalid operator encountered`,InvalidTime:`Invalid time encountered`,IllegalInterval:`Illegal interval`,FunctionNotRecognized:`Function not recognized`,InvalidTimeStamp:`Invalid timestamp encountered`,InvalidParameterCount:`Invalid parameter count for call to {name}`,PrimarySecondaryQualifiers:`Primary and Secondary SqlInterval qualifiers not supported`,YearMonthIntervals:`Year-Month Intervals not supported`,CannotCastValue:`Cannot cast value to the required data type`},g=class e extends Error{constructor(t,n){super(i(ne[t],n)),this.declaredRootClass=`esri.arcade.featureset.support.sqlerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function re(e,t){let n=ae[e.toLowerCase()];if(n==null)throw new g(`FunctionNotRecognized`);if(t.length<n.minParams||t.length>n.maxParams)throw new g(`InvalidParameterCount`,{name:e.toUpperCase()});return n.evaluate(t)}function ie(e,t){let n=ae[e.toLowerCase()];return n!=null&&t>=n.minParams&&t<=n.maxParams}var ae={min:{minParams:1,maxParams:1,evaluate:e=>ce(e[0],`min`)},max:{minParams:1,maxParams:1,evaluate:e=>ce(e[0],`max`)},avg:{minParams:1,maxParams:1,evaluate:e=>oe(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>_(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>le(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>ue(e[0])}};function oe(e){if(e===null)return null;let t=0,n=0;for(let r=0;r<e.length;r++){let i=e[r];if(i!==null){if(!se(i))throw new g(`InvalidValueForAggregateFunction`);n++,t+=i}}return n===0?null:t/e.length}function se(e){return typeof e==`number`}function ce(e,t){if(e===null)return null;let n=null,r=null;for(let i of e){let e=i;e=l.isDateOnly(i)||p.isTimeOnly(i)?i.toNumber():m.isDateTime(i)?i.toMillis():h.isTimestampOffset(i)?i.toMilliseconds():i,(n===null||t===`max`&&r!==null&&e!==null&&r<=e||t===`min`&&r!==null&&e!==null&&r>=e)&&(n=i,r=e)}return n}function _(e){if(e===null)return null;let t=0;for(let n=0;n<e.length;n++){let r=e[n];if(r!==null){if(!se(r))throw new g(`InvalidValueForAggregateFunction`);t+=r}}return t}function le(e){if(e===null)return null;let t=ue(e);return t===null?null:Math.sqrt(t)}function ue(e){if(e===null||(e=e.filter(e=>e!==null)).length===0)return null;let t=oe(e);if(t===null)return null;let n=0;for(let r of e){if(!se(r))throw new g(`InvalidValueForAggregateFunction`);n+=(t-r)**2}return n/(e.length-1)}function de(e){if(e.precision!==null||e.secondary!==null)throw new g(`PrimarySecondaryQualifiers`)}function fe(e,t){if(t.includes(`.`)){let n=t.split(`.`);e.second=parseFloat(n[0]),e.millis=parseInt(n[1],10)}else e.second=parseFloat(t)}var pe=`esri.core.sql.SqlInterval`,v=class e{constructor(){this.declaredRootClass=pe,this.op=`+`,this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(e){return typeof e==`object`&&!!e&&`declaredRootClass`in e&&e.declaredRootClass===pe}static createFromMilliseconds(t){let n=new e;return n.second=t/1e3,n}static createFromValueAndQualifier(t,n,r){let i=null,a=new e;if(a.op=r===`-`?`-`:`+`,n.type===`interval-period`){de(n);let e=RegExp(`^[0-9]{1,}$`);if(n.period===`year`||n.period===`month`)throw new g(`YearMonthIntervals`);if(n.period===`second`){if(!/^[0-9]{1,}(\.[0-9]{1,}){0,1}$/.test(t))throw new g(`IllegalInterval`);fe(a,t)}else{if(!e.test(t))throw new g(`IllegalInterval`);a[n.period]=parseFloat(t)}}else{if(de(n.start),de(n.end),n.start.period===`year`||n.start.period===`month`||n.end.period===`year`||n.end.period===`month`)throw new g(`YearMonthIntervals`);switch(n.start.period){case`day`:switch(n.end.period){case`hour`:if(i=RegExp(`^[0-9]{1,} [0-9]{1,}$`),!i.test(t))throw new g(`IllegalInterval`);a[n.start.period]=parseFloat(t.split(` `)[0]),a[n.end.period]=parseFloat(t.split(` `)[1]);break;case`minute`:if(i=RegExp(`^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$`),!i.test(t))throw new g(`IllegalInterval`);{a[n.start.period]=parseFloat(t.split(` `)[0]);let e=t.split(` `)[1].split(`:`);a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1])}break;case`second`:if(i=RegExp(`^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$`),!i.test(t))throw new g(`IllegalInterval`);{a[n.start.period]=parseFloat(t.split(` `)[0]);let e=t.split(` `)[1].split(`:`);a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1]),fe(a,e[2])}break;default:throw new g(`IllegalInterval`)}break;case`hour`:switch(n.end.period){case`minute`:if(i=RegExp(`^[0-9]{1,}:[0-9]{1,}$`),!i.test(t))throw new g(`IllegalInterval`);a.hour=parseFloat(t.split(`:`)[0]),a.minute=parseFloat(t.split(`:`)[1]);break;case`second`:if(i=RegExp(`^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$`),!i.test(t))throw new g(`IllegalInterval`);{let e=t.split(`:`);a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1]),fe(a,e[2])}break;default:throw new g(`IllegalInterval`)}break;case`minute`:if(n.end.period!==`second`||(i=RegExp(`^[0-9]{1,}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$`),!i.test(t)))throw new g(`IllegalInterval`);{let e=t.split(`:`);a.minute=parseFloat(e[0]),fe(a,e[1])}break;default:throw new g(`IllegalInterval`)}}return a}valueInMilliseconds(){return(this.op===`-`?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}},me=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,he=/^(\d{1,2}):(\d{1,2})$/,ge=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,_e=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,ve=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,ye=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,be=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,xe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function Se(e,t){if(t instanceof o)return t===d.instance?m.fromMillis(e.getTime(),{zone:d.instance}):m.fromJSDate(e,{zone:t});switch(t){case`system`:case`local`:case null:return m.fromJSDate(e);default:return t?.toLowerCase()===`unknown`?m.fromMillis(e.getTime(),{zone:d.instance}):m.fromJSDate(e,{zone:t})}}function y(e){return v.isInterval(e)}function b(e){return m.isDateTime(e)}function x(e){return l.isDateOnly(e)}function S(e){return p.isTimeOnly(e)}function C(e){return h.isTimestampOffset(e)}function w(e){let t=me.exec(e);if(t!==null){let[,e,n,r]=t,i=p.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),0);if(i!==null)return i;throw new g(`InvalidTime`)}if(t=he.exec(e),t!==null){let[,e,n]=t,r=p.fromParts(parseInt(e,10),parseInt(n,10),0,0);if(r!==null)return r;throw new g(`InvalidTime`)}if(t=ge.exec(e),t!==null){let[,e,n,r,i]=t,a=p.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),parseInt(i,10));if(a!==null)return a;throw new g(`InvalidTime`)}throw new g(`InvalidTime`)}function T(e,t,n=!1){let r=ve.exec(e);if(r!==null){let[,e,n,i,o,s,c,l]=r,u=m.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(i,10),hour:parseInt(o,10),minute:parseInt(s,10),second:parseInt(c,10),millisecond:l?parseInt(l.replace(`.`,``),10):0},{zone:a(t)});if(!1===u.isValid)throw new g(`InvalidTimeStamp`);return u}if(r=ye.exec(e),r!==null){let[,e,t,n,i,a,o,s,c,l,u]=r,d=h.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(i,10),parseInt(a,10),parseInt(o,10),s?parseInt(s.replace(`.`,``),10):0,c===`-`,parseInt(l,10),parseInt(u,10));if(!1===d.isValid)throw new g(`InvalidTimeStamp`);return d}if(r=be.exec(e),r!==null){let[,e,t,n,i,a,o,s,c]=r,l=h.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(i,10),parseInt(a,10),0,0,o===`-`,parseInt(s,10),parseInt(c,10));if(!1===l.isValid)throw new g(`InvalidTimeStamp`);return l}if(r=xe.exec(e),r!==null){let[,e,n,i,o,s]=r,c=m.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(i,10),hour:parseInt(o,10),minute:parseInt(s,10),second:0},{zone:a(t)});if(!1===c.isValid)throw new g(`InvalidTimeStamp`);return c}if(r=_e.exec(e),r!==null){let[,e,n,i]=r,o=m.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(i,10),hour:0,minute:0,second:0},{zone:a(t)});if(!1===o.isValid)throw new g(`InvalidTimeStamp`);return o}throw new g(`InvalidTimeStamp`)}function Ce(e,t){let n=_e.exec(e);if(n===null)try{return T(e,t)}catch{throw new g(`InvalidDate`)}let[,r,i,a]=n,o=l.fromParts(parseInt(r,10),parseInt(i,10),parseInt(a,10));if(o===null)throw new g(`InvalidDate`);return o}var we=321408e5,Te=26784e5,Ee=864e5,De=36e5,Oe=6e4;function ke(e){return!!b(e)||!!C(e)}function Ae(e){return!!b(e)||!!x(e)||!!C(e)||!!S(e)}function je(e){if(b(e))return e.toMillis();if(x(e))return e.toNumber();if(C(e))return e.toMilliseconds();throw new g(`InvalidDataType`)}function E(t,n,r){if(t==null||n==null)return null;if(c(t)){if(c(n))return D(t,n,r);if(f(n))return Me(t,n,r);if(Ae(n)||x(n))throw new g(`InvalidOperator`)}else if(f(t)){if(c(n))return Ne(t,n,r);if(f(n))return Pe(t,n,r);if(b(n)||x(n)||S(n)||C(n))throw new g(`InvalidOperator`)}else if(b(t)){if(ke(n)){if(e(t.zone)){if(m.isDateTime(n)&&!e(n.zone)||h.isTimestampOffset(n))return ze(t,n,r)}else if(m.isDateTime(n)&&e(n.zone)&&(!e(t.zone)||h.isTimestampOffset(t)))return ze(t,n,r);return D(je(t),je(n),r)}if(f(n))throw new g(`InvalidOperator`);if(x(n))return Fe(t,n,r);if(S(n)||c(n))throw new g(`InvalidOperator`)}else if(x(t)){if(C(n))return Re(t,n,r);if(b(n))return Le(t,n,r);if(f(n))throw new g(`InvalidOperator`);if(x(n))return D(t.toNumber(),n.toNumber(),r);if(S(n)||c(n))throw new g(`InvalidOperator`)}else if(S(t)){if(S(n))return D(t.toNumber(),n.toNumber(),r);if(f(n)||c(n)||x(n)||ke(n))throw new g(`InvalidOperator`)}else if(C(t)){if(ke(n))return m.isDateTime(n)&&e(n.zone)?ze(t,n,r):D(je(t),je(n),r);if(f(n))throw new g(`InvalidOperator`);if(x(n))return Ie(t,n,r);if(S(n)||c(n))throw new g(`InvalidOperator`)}switch(r){case`<>`:return t!==n;case`=`:return t===n;case`>`:return t>n;case`<`:return t<n;case`>=`:return t>=n;case`<=`:return t<=n}}function D(e,t,n){switch(n){case`<>`:return e!==t;case`=`:return e===t;case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}}function Me(e,t,n){let r=parseFloat(t);if(!isNaN(r))return D(e,r,n);let i=e.toString();switch(n){case`<>`:return i!==t;case`=`:return i===t;case`>`:return i>t;case`<`:return i<t;case`>=`:return i>=t;case`<=`:return i<=t}}function Ne(e,t,n){let r=parseFloat(e);if(!isNaN(r))return D(r,t,n);let i=t.toString();switch(n){case`<>`:return e!==i;case`=`:return e===i;case`>`:return e>i;case`<`:return e<i;case`>=`:return e>=i;case`<=`:return e<=i}}function Pe(e,t,n){switch(n){case`<>`:return e!==t;case`=`:return e===t;case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}}function Fe(e,t,n){let r=t.toDateTimeLuxon(e.zone);return D((e=e.startOf(`day`)).toMillis(),r.toMillis(),n)}function Ie(e,t,n){let r=t.toDateTimeLuxon(e.toDateTime().zone);return D((e=e.startOfDay()).toMilliseconds(),r.toMillis(),n)}function Le(e,t,n){let r=e.toDateTimeLuxon(t.zone);return t=t.startOf(`day`),D(r.toMillis(),t.toMillis(),n)}function Re(e,t,n){let r=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),D(r.toMillis(),t.toMilliseconds(),n)}function ze(e,t,n){h.isTimestampOffset(e)&&(e=e.toDateTime()),h.isTimestampOffset(t)&&(t=t.toDateTime());let r=Be(e),i=Be(t);switch(n){case`<>`:return r!==i;case`=`:return r===i;case`>`:return r>i;case`<`:return r<i;case`>=`:return r>=i;case`<=`:return r<=i}}function Be(e){return e.year*we+e.month*Te+e.day*Ee+e.hour*De+e.minute*Oe+1e3*e.second+e.millisecond}function Ve(e,t,n){let r=Je[e.toLowerCase()];if(r==null)throw new g(`FunctionNotRecognized`);if(t.length<r.minParams||t.length>r.maxParams)throw new g(`InvalidParameterCount`,{name:e.toUpperCase()});return r.evaluate(t,n)}function He(e,t){let n=Je[e.toLowerCase()];return n!=null&&t>=n.minParams&&t<=n.maxParams}function Ue(e){return!s(e)&&!x(e)&&!b(e)&&!S(e)&&!C(e)}function We(e){return x(e)||S(e)?e.toString():C(e)?e.toSQLValue():b(e)?e.millisecond===0?e.toFormat(`yyyy-LL-dd HH:mm:ss`):e.toSQL({includeOffset:!1}):s(e)?We(m.fromJSDate(e)):e.toString()}function Ge(e){if(s(e))return l.fromDateJS(e);if(b(e))return l.fromParts(e.year,e.month,e.day);if(x(e))return e;if(S(e)||C(e)&&l.fromParts(e.year,e.month,e.day)===null)throw new g(`CannotCastValue`);if(f(e)){let t=l.fromReader(e);if(t!==null&&t.isValid)return t}throw new g(`CannotCastValue`)}function Ke(e,t,n){if(s(e))return Se(e,t);if(b(e))return e;if(x(e))return e.toDateTimeLuxon(`unknown`);if(S(e))throw new g(`CannotCastValue`);if(C(e))return e;if(f(e))return T(e,`unknown`,n);throw new g(`CannotCastValue`)}function qe(e){if(s(e))return p.fromDateJS(e);if(b(e))return p.fromDateTime(e);if(x(e))throw new g(`CannotCastValue`);if(S(e))return e;if(C(e))return p.fromSqlTimeStampOffset(e);if(f(e))return w(e);throw new g(`CannotCastValue`)}var Je={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(t==null)return null;if(s(t))switch(e.toUpperCase()){case`SECOND`:return t.getSeconds();case`MINUTE`:return t.getMinutes();case`HOUR`:return t.getHours();case`DAY`:return t.getDate();case`MONTH`:return t.getMonth()+1;case`YEAR`:return t.getFullYear();case`TIMEZONE_HOUR`:case`TIMEZONE_MINUTE`:return 0;case`DOW`:return m.fromJSDate(t,{zone:`system`}).weekday;case`DOY`:return m.fromJSDate(t,{zone:`system`}).ordinal;case`WEEK`:return m.fromJSDate(t,{zone:`system`}).weekNumber}else if(b(t))switch(e.toUpperCase()){case`SECOND`:return t.second;case`MINUTE`:return t.minute;case`HOUR`:return t.hour;case`DAY`:return t.day;case`MONTH`:return t.month;case`YEAR`:return t.year;case`TIMEZONE_HOUR`:case`TIMEZONE_MINUTE`:throw new g(`InvalidFunctionParameters`,{function:`EXTRACT`});case`DOW`:return t.weekday;case`DOY`:return t.ordinal;case`WEEK`:return t.weekNumber}else if(x(t))switch(e.toUpperCase()){case`DAY`:return t.day;case`MONTH`:return t.month;case`YEAR`:return t.year;case`TIMEZONE_HOUR`:case`TIMEZONE_MINUTE`:throw new g(`InvalidFunctionParameters`,{function:`EXTRACT`});case`DOW`:return t.toDateTime(`unknown`).weekday;case`DOY`:return t.toDateTime(`unknown`).ordinal;case`WEEK`:return t.toDateTime(`unknown`).weekNumber}else if(S(t))switch(e.toUpperCase()){case`SECOND`:return t.second;case`MINUTE`:return t.minute;case`HOUR`:return t.hour}else if(C(t))switch(e.toUpperCase()){case`SECOND`:return t.second;case`MINUTE`:return t.minute;case`HOUR`:return t.hour;case`DAY`:return t.day;case`MONTH`:return t.month;case`YEAR`:return t.year;case`TIMEZONE_HOUR`:return t.timezoneOffsetHour;case`TIMEZONE_MINUTE`:return t.timezoneOffsetMinutes;case`DOW`:return t.toDateTime().weekday;case`DOY`:return t.toDateTime().ordinal;case`WEEK`:return t.toDateTime().weekNumber}throw new g(`InvalidFunctionParameters`,{function:`EXTRACT`})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(e.length===2){let[t,n]=e;return t==null||n==null?null:t.toString().substring(n-1)}if(e.length===3){let[t,n,r]=e;return t==null||n==null||r==null?null:r<=0?``:t.toString().substring(n-1,n+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>e==null||t==null?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{let t=e.length===3,n=t?e[1]:` `,r=t?e[2]:e[1];if(n==null||r==null)return null;let i=`(${u(n)})`;switch(e[0]){case`BOTH`:return r.replaceAll(RegExp(`^${i}*|${i}*$`,`g`),``);case`LEADING`:return r.replaceAll(RegExp(`^${i}*`,`g`),``);case`TRAILING`:return r.replaceAll(RegExp(`${i}*$`,`g`),``)}throw new g(`InvalidFunctionParameters`,{function:`TRIM`})}},abs:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0]>0?1:e[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{let t=e[0],n=e.length===2?10**e[1]:1;return t==null?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:e=>e[0]==null?null:e.length===1||e[1]===0?Math.trunc(e[0]):t(`trunc`,e[0],-Number(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>f(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t=``;for(let n=0;n<e.length;n++){if(e[n]==null)return null;t+=e[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(let t of e)if(t!==null)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:e=>E(e[0],e[1],`=`)?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,t)=>{let n=e[0],r=e[1];if(n===null)return null;switch(r.type){case`integer`:{if(!Ue(n))throw new g(`CannotCastValue`);let e=parseInt(n,10);if(isNaN(e))throw new g(`CannotCastValue`);return e}case`smallint`:{if(!Ue(n))throw new g(`CannotCastValue`);let e=parseInt(n,10);if(isNaN(e)||e>32767||e<-32767)throw new g(`CannotCastValue`);return e}case`float`:case`real`:{if(!Ue(n))throw new g(`CannotCastValue`);let e=parseFloat(n);if(isNaN(e))throw new g(`CannotCastValue`);return e}case`time`:return qe(n);case`date`:return Ge(n);case`timestamp`:return Ke(n,t,!0===r.withtimezone);case`varchar`:{let e=We(n);if(e.length>r.size)throw new g(`CannotCastValue`);return e}default:throw new g(`InvalidDataType`)}}}};function Ye(e,t,n,r){if(e===`||`)return Ve(`concat`,[t,n],r);if(t===null||n===null)return null;if(c(t)){if(c(n))return Xe(t,n,e);if(y(n))return it(t,n,e);if(S(n))return mt();if(x(n))return ht();if(C(n))return pt();if(b(n))return dt();if(f(n))return gt(t,n,e);throw new g(`InvalidOperator`)}if(x(t)){if(c(n))return lt(t,n,e);if(y(n))return at(t,n,e);if(S(n))return wt();if(x(n))return Ct(t,n,e);if(C(n))return St(t,n,e);if(b(n))return xt(t,n,e);if(f(n))return Lt();throw new g(`InvalidOperator`)}if(S(t)){if(c(n))return ut(t,n,e);if(y(n))return et(t,n,e);if(S(n))return Mt();if(x(n))return At();if(C(n))return jt();if(b(n))return kt();if(f(n))return Rt();throw new g(`InvalidOperator`)}if(y(t)){if(c(n))return rt(t,n,e);if(y(n))return nt(t,n,e);if(S(n))return Qe(t,n,e);if(x(n))return $e(t,n,e);if(C(n))return tt(t,n,e);if(b(n))return Ze(t,n,e);if(f(n))return yt();throw new g(`InvalidOperator`)}if(b(t)){if(c(n))return ct(t,n,e);if(y(n))return ot(t,n,e);if(S(n))return It();if(x(n))return Pt(t,n,e);if(C(n))return Ft(t,n,e);if(b(n))return Nt(t,n,e);if(f(n))return zt();throw new g(`InvalidOperator`)}if(C(t)){if(c(n))return ft(t,n,e);if(y(n))return st(t,n,e);if(S(n))return Tt();if(x(n))return Et(t,n,e);if(C(n))return Ot(t,n,e);if(b(n))return Dt(t,n,e);if(f(n))return Bt();throw new g(`InvalidOperator`)}if(f(t)){if(c(n))return _t(t,n,e);if(y(n))return bt();if(S(n))return Vt();if(x(n))return Ht();if(C(n))return Wt();if(b(n))return Ut();if(f(n))return vt(t,n,e);throw new g(`InvalidOperator`)}throw new g(`InvalidOperator`)}function Xe(e,t,n){switch(n){case`+`:return e+t;case`-`:return e-t;case`*`:return e*t;case`/`:return e/t}throw new g(`InvalidOperator`)}function Ze(e,t,n){switch(n){case`+`:return t.plus({milliseconds:e.valueInMilliseconds()});case`-`:return e.valueInMilliseconds()-t.toMillis()}throw new g(`InvalidOperator`)}function Qe(e,t,n){if(n===`+`)return t.plus(`milliseconds`,e.valueInMilliseconds());throw new g(`InvalidOperator`)}function $e(e,t,n){if(n===`+`)return t.plus(`milliseconds`,e.valueInMilliseconds());throw new g(`InvalidOperator`)}function et(e,t,n){switch(n){case`+`:return e.plus(`milliseconds`,t.valueInMilliseconds());case`-`:return e.plus(`milliseconds`,-1*t.valueInMilliseconds())}throw new g(`InvalidOperator`)}function tt(e,t,n){if(n===`+`)return t.addMilliseconds(e.valueInMilliseconds());throw new g(`InvalidOperator`)}function nt(e,t,n){switch(n){case`+`:return v.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case`-`:return v.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case`*`:return v.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case`/`:return v.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new g(`InvalidOperator`)}function rt(e,t,n){switch(n){case`+`:return v.createFromMilliseconds(e.valueInMilliseconds()+t);case`-`:return v.createFromMilliseconds(e.valueInMilliseconds()-t);case`*`:return v.createFromMilliseconds(e.valueInMilliseconds()*t);case`/`:return v.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new g(`InvalidOperator`)}function it(e,t,n){switch(n){case`+`:return v.createFromMilliseconds(e+t.valueInMilliseconds());case`-`:return v.createFromMilliseconds(e-t.valueInMilliseconds());case`*`:return v.createFromMilliseconds(e*t.valueInMilliseconds());case`/`:return v.createFromMilliseconds(e/t.valueInMilliseconds())}throw new g(`InvalidOperator`)}function at(e,t,n){switch(n){case`+`:return e.plus(`milliseconds`,t.valueInMilliseconds());case`-`:return e.plus(`milliseconds`,-1*t.valueInMilliseconds())}throw new g(`InvalidOperator`)}function ot(e,t,n){switch(n){case`+`:return e.plus({milliseconds:t.valueInMilliseconds()});case`-`:return e.minus({milliseconds:t.valueInMilliseconds()})}throw new g(`InvalidOperator`)}function st(e,t,n){switch(n){case`+`:return e.addMilliseconds(t.valueInMilliseconds());case`-`:return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new g(`InvalidOperator`)}function ct(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.plus({milliseconds:r});case`-`:return e.minus({milliseconds:r})}throw new g(`InvalidOperator`)}function lt(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.plus(`milliseconds`,r);case`-`:return e.plus(`milliseconds`,-1*r)}throw new g(`InvalidOperator`)}function ut(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.plus(`milliseconds`,r);case`-`:return e.plus(`milliseconds`,-1*r)}throw new g(`InvalidOperator`)}function dt(e,t,n){throw new g(`InvalidOperator`)}function ft(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.addMilliseconds(r);case`-`:return e.addMilliseconds(-1*r)}throw new g(`InvalidOperator`)}function pt(e,t,n){throw new g(`InvalidOperator`)}function mt(e,t,n){throw new g(`InvalidOperator`)}function ht(e,t,n){throw new g(`InvalidOperator`)}function gt(e,t,n){let r=parseFloat(t);if(isNaN(r))throw new g(`InvalidOperator`);return Xe(e,r,n)}function _t(e,t,n){let r=parseFloat(e);if(isNaN(r))throw new g(`InvalidOperator`);return Xe(r,t,n)}function vt(e,t,n){if(n===`+`)return e+t;throw new g(`InvalidOperator`)}function yt(e,t,n){throw new g(`InvalidOperator`)}function bt(e,t,n){throw new g(`InvalidOperator`)}function xt(e,t,n){if(n===`-`)return e.toDateTimeLuxon(t.zone).diff(t).as(`days`);throw new g(`InvalidOperator`)}function St(e,t,n){if(n===`-`)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as(`days`);throw new g(`InvalidOperator`)}function Ct(e,t,n){if(n===`-`)return e.toDateTimeLuxon(`UTC`).diff(t.toDateTimeLuxon(`UTC`)).as(`days`);throw new g(`InvalidOperator`)}function wt(e,t,n){throw new g(`InvalidOperator`)}function Tt(e,t,n){throw new g(`InvalidOperator`)}function Et(e,t,n){if(n===`-`)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as(`days`);throw new g(`InvalidOperator`)}function Dt(e,t,n){if(n===`-`)return e.toDateTime().diff(t).as(`days`);throw new g(`InvalidOperator`)}function Ot(e,t,n){if(n===`-`)return e.toDateTime().diff(t.toDateTime()).as(`days`);throw new g(`InvalidOperator`)}function kt(e,t,n){throw new g(`InvalidOperator`)}function At(e,t,n){throw new g(`InvalidOperator`)}function jt(e,t,n){throw new g(`InvalidOperator`)}function Mt(e,t,n){throw new g(`InvalidOperator`)}function Nt(e,t,n){if(n===`-`)return e.diff(t).as(`days`);throw new g(`InvalidOperator`)}function Pt(e,t,n){if(n===`-`)return e.diff(t.toDateTimeLuxon(e.zone)).as(`days`);throw new g(`InvalidOperator`)}function Ft(e,t,n){if(n===`-`)return e.diff(t.toDateTime()).as(`days`);throw new g(`InvalidOperator`)}function It(e,t,n){throw new g(`InvalidOperator`)}function Lt(e,t,n){throw new g(`InvalidOperator`)}function Rt(e,t,n){throw new g(`InvalidOperator`)}function zt(e,t,n){throw new g(`InvalidOperator`)}function Bt(e,t,n){throw new g(`InvalidOperator`)}function Vt(e,t,n){throw new g(`InvalidOperator`)}function Ht(e,t,n){throw new g(`InvalidOperator`)}function Ut(e,t,n){throw new g(`InvalidOperator`)}function Wt(e,t,n){throw new g(`InvalidOperator`)}var Gt=class extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name=`SyntaxError`}format(e){let t=`Error: `+this.message;if(this.location){let n=null,r=e.find(e=>e.source===this.location.source);r&&(n=r.text.split(/\r\n|\n|\r/g));let i=this.location.start,a=this.location.source&&typeof this.location.source.offset==`function`?this.location.source.offset(i):i,o=this.location.source+`:`+a.line+`:`+a.column;if(n){let e=this.location.end,r=``.padEnd(a.line.toString().length,` `),s=n[i.line-1],c=(i.line===e.line?e.column:s.length+1)-i.column||1;t+=`
 --> `+o+`
`+r+` |
`+a.line+` | `+s+`
`+r+` | `+``.padEnd(i.column-1,` `)+``.padEnd(c,`^`)}else t+=`
 at `+o}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}let r=Object.prototype.hasOwnProperty.call(RegExp.prototype,`unicode`)?RegExp(`[\\p{C}\\p{Mn}\\p{Mc}]`,`gu`):null;function i(e){return r?e.replace(r,e=>`\\u{`+n(e)+`}`):e}function a(e){return i(e.replace(/\\/g,`\\\\`).replace(/"/g,`\\"`).replace(/\0/g,`\\0`).replace(/\t/g,`\\t`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/[\x00-\x0F]/g,e=>`\\x0`+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>`\\x`+n(e)))}function o(e){return i(e.replace(/\\/g,`\\\\`).replace(/\]/g,`\\]`).replace(/\^/g,`\\^`).replace(/-/g,`\\-`).replace(/\0/g,`\\0`).replace(/\t/g,`\\t`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/[\x00-\x0F]/g,e=>`\\x0`+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>`\\x`+n(e)))}let s={literal:e=>`"`+a(e.text)+`"`,class(e){let t=e.parts.map(e=>Array.isArray(e)?o(e[0])+`-`+o(e[1]):o(e));return`[`+(e.inverted?`^`:``)+t.join(``)+`]`+(e.unicode?`u`:``)},any:()=>`any character`,end:()=>`end of input`,other:e=>e.description};function c(e){return s[e.type](e)}function l(e){let t=e.map(c);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+` or `+t[1];default:return t.slice(0,-1).join(`, `)+`, or `+t[t.length-1]}}function u(e){return e?`"`+a(e)+`"`:`end of input`}return`Expected `+l(e)+` but `+u(t)+` found.`}};function Kt(e,t){let n={},r=(t=t===void 0?{}:t).grammarSource,i={start:mi},a=mi,o=/^[<-=]/,s=/^[+\-]/,c=/^[*\/]/,l=/^[A-Za-z_\x80-\uFFFF]/,u=/^[A-Za-z0-9_]/,d=/^[A-Za-z0-9_.\x80-\uFFFF]/,f=/^["]/,p=/^[^']/,m=/^[0-9]/,ee=/^[eE]/,te=/^[ \t\n\r]/,h=/^[^`]/,ne=z(`!`,!1),g=z(`=`,!1),re=z(`>=`,!1),ie=z(`>`,!1),ae=z(`<=`,!1),oe=z(`<>`,!1),se=B([[`<`,`=`]],!1,!1,!1),ce=z(`!=`,!1),_=B([`+`,`-`],!1,!1,!1),le=z(`||`,!1),ue=B([`*`,`/`],!1,!1,!1),de=B([[`A`,`Z`],[`a`,`z`],`_`,[``,`￿`]],!1,!1,!1),fe=B([[`A`,`Z`],[`a`,`z`],[`0`,`9`],`_`],!1,!1,!1),pe=B([[`A`,`Z`],[`a`,`z`],[`0`,`9`],`_`,`.`,[``,`￿`]],!1,!1,!1),v=B([`"`],!1,!1,!1),me=z(`@`,!1),he=z(`'`,!1),ge=z(`N'`,!1),_e=z(`''`,!1),ve=B([`'`],!0,!1,!1),ye=z(`.`,!1),be=B([[`0`,`9`]],!1,!1,!1),xe=B([`e`,`E`],!1,!1,!1),Se=z(`NULL`,!0),y=z(`TRUE`,!0),b=z(`FALSE`,!0),x=z(`IN`,!0),S=z(`IS`,!0),C=z(`LIKE`,!0),w=z(`ESCAPE`,!0),T=z(`NOT`,!0),Ce=z(`AND`,!0),we=z(`OR`,!0),Te=z(`BETWEEN`,!0),Ee=z(`FROM`,!0),De=z(`FOR`,!0),Oe=z(`SUBSTRING`,!0),ke=z(`EXTRACT`,!0),Ae=z(`TRIM`,!0),je=z(`POSITION`,!0),E=z(`TIMESTAMP`,!0),D=z(`DATE`,!0),Me=z(`TIME`,!0),Ne=z(`LEADING`,!0),Pe=z(`TRAILING`,!0),Fe=z(`BOTH`,!0),Ie=z(`CAST`,!0),Le=z(`AS`,!0),Re=z(`INTEGER`,!0),ze=z(`INT`,!0),Be=z(`SMALLINT`,!0),Ve=z(`FLOAT`,!0),He=z(`REAL`,!0),Ue=z(`VARCHAR`,!0),We=z(`TO`,!0),Ge=z(`INTERVAL`,!0),Ke=z(`YEAR`,!0),qe=z(`TIMEZONE_HOUR`,!0),Je=z(`TIMEZONE_MINUTE`,!0),Ye=z(`MONTH`,!0),Xe=z(`DAY`,!0),Ze=z(`HOUR`,!0),Qe=z(`MINUTE`,!0),$e=z(`SECOND`,!0),et=z(`DOW`,!0),tt=z(`DOY`,!0),nt=z(`WEEK`,!0),rt=z(`CASE`,!0),it=z(`END`,!0),at=z(`WHEN`,!0),ot=z(`THEN`,!0),st=z(`ELSE`,!0),ct=z(`,`,!1),lt=z(`(`,!1),ut=z(`)`,!1),dt=B([` `,`	`,`
`,`\r`],!1,!1,!1),ft=z("`",!1),pt=B(["`"],!0,!1,!1);function mt(e){return e}function ht(e){return{type:`expression-list`,location:R(),value:e}}function gt(e,t,n){return{op:t,expr:n,location:R()}}function _t(e,t){return $(e,t)}function vt(e,t,n){return{op:t,expr:n,location:R()}}function yt(e,t){return $(e,t)}function bt(e){return To(`NOT`,e,R())}function xt(e,t){return t==``||t==null||t==null?e:t.type==`arithmetic`?$(e,t.tail):Eo(t.op,e,t.right,t.escape,R())}function St(e,t){return{op:e,expr:t,location:R()}}function Ct(e){return{type:`arithmetic`,tail:e}}function wt(e,t){return{op:e+`NOT`,right:t}}function Tt(e,t){return{op:e,right:t}}function Et(e,t,n){return Q(R(),t,n)}function Dt(e,t){return{op:`NOT`+e,right:t}}function Ot(e,t,n){return Q(R(),t,n)}function kt(e,t){return{op:e,right:t}}function At(e){return e[0]+` `+e[2]}function jt(e){return e[0]+` `+e[2]}function Mt(e,t,n){return{op:e,right:t,escape:n.value}}function Nt(e,t){return{op:e,right:t,escape:``}}function Pt(e,t){return{op:e,right:t}}function Ft(e,t){return{op:e,right:t}}function It(e,t,n){return{op:t,expr:n,location:R()}}function Lt(e,t){return $(e,t)}function Rt(e,t,n){return{op:t,expr:n,location:R()}}function zt(e,t){return $(e,t)}function Bt(e){return e.paren=!0,e}function Vt(e){return/^CURRENT_DATE$/i.test(e)?{type:`current-time`,location:R(),mode:`date`}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:`current-time`,location:R(),mode:`timestamp`}:/^CURRENT_TIME$/i.test(e)?{type:`current-time`,location:R(),mode:`time`}:/^CURRENT_USER$/i.test(e)?{type:`current-user`,location:R()}:{type:`column-reference`,location:R(),table:``,column:e}}function Ht(e){return{type:`column-reference`,location:R(),table:``,column:e,delimited:!0}}function Ut(e){return e}function Wt(e,t){return e+t.join(``)}function Kt(e,t){return e+t.join(``)}function qt(e){return e}function O(e){return e.join(``)}function Jt(){return`"`}function Yt(e){return{type:`parameter`,location:R(),value:e[1]}}function k(e,t){return Q(R(),e,t)}function A(e,t){return Q(R(),e,t)}function Xt(e){return{type:`function`,location:R(),name:`extract`,args:e}}function Zt(e,t,n){return Q(R(),e,t,...n?[n]:[])}function Qt(e,t,n){return Q(R(),e,t,n)}function $t(e){return{type:`function`,location:R(),name:`substring`,args:e}}function en(e,t){return Q(R(),e,t)}function tn(e,t){return Q(R(),e,t)}function nn(e){return{type:`function`,location:R(),name:`cast`,args:e}}function j(){return{type:`data-type`,location:R(),value:{type:`integer`}}}function rn(){return{type:`data-type`,location:R(),value:{type:`smallint`}}}function an(){return{type:`data-type`,location:R(),value:{type:`float`}}}function on(){return{type:`data-type`,location:R(),value:{type:`real`}}}function sn(){return{type:`data-type`,location:R(),value:{type:`date`}}}function cn(){return{type:`data-type`,location:R(),value:{type:`timestamp`}}}function ln(){return{type:`data-type`,location:R(),value:{type:`time`}}}function un(e){return{type:`data-type`,location:R(),value:{type:`varchar`,size:parseInt(e)}}}function dn(e,t,n){return Q(R(),e,t,n)}function fn(e,t){return Q(R(),e,t)}function pn(e){return{type:`function`,location:R(),name:`trim`,args:e}}function mn(e){return{type:`string`,location:R(),value:e??`BOTH`}}function hn(e,t){return Q(R(),e,t)}function gn(e,t){return Q(R(),e,t)}function _n(e){return{type:`function`,location:R(),name:`position`,args:e}}function vn(e,t){return{type:`function`,location:R(),name:e,args:t}}function yn(e){return{type:`string`,location:R(),value:e}}function bn(e){return e.type===`string`&&Do(e.value),{type:`timestamp`,location:R(),value:e.value}}function M(e){return e.type===`string`&&Oo(e.value),{type:`time`,location:R(),value:e.value}}function xn(e,t,n){return{type:`interval`,location:R(),value:t,qualifier:n,op:e}}function Sn(e,t){return{type:`interval`,location:R(),value:e,qualifier:t,op:``}}function Cn(e,t){return{type:`interval-qualifier`,location:R(),start:e,end:t}}function wn(e,t){return{type:`interval-period`,location:R(),period:e.value,precision:t,secondary:null}}function Tn(e){return{type:`interval-period`,location:R(),period:e.value,precision:null,secondary:null}}function En(e){return{type:`interval-period`,location:R(),period:e.value,precision:null,secondary:null}}function Dn(e,t){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:t}}function On(e){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:null}}function kn(){return{type:`interval-period`,location:R(),period:`second`,precision:null,secondary:null}}function An(e,t){return{type:`interval-period`,location:R(),period:e.value,precision:t,secondary:null}}function jn(e){return{type:`interval-period`,location:R(),period:e.value,precision:null,secondary:null}}function Mn(e,t){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:t}}function Nn(e){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:null}}function Pn(){return{type:`interval-period`,location:R(),period:`second`,precision:null,secondary:null}}function Fn(){return{type:`string`,location:R(),value:`day`}}function In(){return{type:`string`,location:R(),value:`hour`}}function Ln(){return{type:`string`,location:R(),value:`minute`}}function Rn(){return{type:`string`,location:R(),value:`month`}}function zn(){return{type:`string`,location:R(),value:`year`}}function Bn(e){return parseFloat(e)}function Vn(e){return parseFloat(e)}function Hn(e){return e.type===`string`&&ko(e.value),{type:`date`,location:R(),value:e.value}}function Un(){return{type:`null`,location:R(),value:null}}function Wn(){return{type:`boolean`,location:R(),value:!0}}function Gn(){return{type:`boolean`,location:R(),value:!1}}function Kn(){return`'`}function qn(e){return{type:`string`,location:R(),value:e.join(``)}}function Jn(e,t){return{type:`case-expression`,location:R(),format:`simple`,operand:e,clauses:t,else:null,elseLocation:null}}function Yn(e,t,n){return{type:`case-expression`,location:R(),format:`simple`,operand:e,clauses:t,else:n.value,elseLocation:n.location}}function Xn(e){return{type:`case-expression`,location:R(),format:`searched`,clauses:e,else:null,elseLocation:null}}function Zn(e,t){return{type:`case-expression`,location:R(),format:`searched`,clauses:e,else:t.value,elseLocation:t.location}}function Qn(e,t){return{type:`when-clause`,location:R(),operand:e,value:t}}function $n(e,t){return{type:`when-clause`,location:R(),operand:e,value:t}}function er(e){return{type:`else-clause`,location:R(),value:e}}function tr(e){return{type:`number`,location:R(),value:e}}function nr(e,t,n){return parseFloat(e+t+n)}function rr(e,t){return parseFloat(e+t)}function ir(e,t){return parseFloat(e+t)}function ar(e){return parseFloat(e)}function or(e,t){return e[0]+t}function sr(e){return`.`+(e??``)}function cr(e,t){return e+t}function lr(e){return e.join(``)}function ur(e,t){return`e`+(t===null?``:t)}function dr(){return`IN`}function fr(){return`IS`}function pr(){return`LIKE`}function mr(){return`ESCAPE`}function hr(){return`NOT`}function gr(){return`AND`}function _r(){return`OR`}function vr(){return`BETWEEN`}function yr(){return`FROM`}function br(){return`FOR`}function xr(){return`SUBSTRING`}function Sr(){return`EXTRACT`}function Cr(){return`TRIM`}function wr(){return`POSITION`}function Tr(){return`TIMESTAMP`}function Er(){return`DATE`}function Dr(){return`TIME`}function Or(){return`LEADING`}function kr(){return`TRAILING`}function Ar(){return`BOTH`}function jr(){return`CAST`}function Mr(){return`AS`}function Nr(){return`INTEGER`}function Pr(){return`INT`}function Fr(){return`SMALLINT`}function Ir(){return`FLOAT`}function Lr(){return`REAL`}function Rr(){return`VARCHAR`}function zr(){return`TO`}function Br(){return`INTERVAL`}function Vr(){return`YEAR`}function Hr(){return`TIMEZONE_HOUR`}function Ur(){return`TIMEZONE_MINUTE`}function Wr(){return`MONTH`}function Gr(){return`DAY`}function Kr(){return`HOUR`}function qr(){return`MINUTE`}function Jr(){return`SECOND`}function Yr(){return`DOW`}function Xr(){return`DOY`}function Zr(){return`WEEK`}function Qr(){return`CASE`}function $r(){return`END`}function ei(){return`WHEN`}function ti(){return`THEN`}function ni(){return`ELSE`}function ri(e){return e}function ii(e){return e.join(``)}let N=0|t.peg$currPos,P=N,F=[{line:1,column:1}],ai,I=N,oi=t.peg$maxFailExpected||[],L=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw Error(`Can't start parsing from rule "`+t.startRule+`".`);a=i[t.startRule]}function R(){return di(P,N)}function si(e,t){throw fi(e,t=t===void 0?di(P,N):t)}function ci(t=N){let n=e.codePointAt(t);return n===void 0?``:String.fromCodePoint(n)}function z(e,t){return{type:`literal`,text:e,ignoreCase:t}}function B(e,t,n,r){return{type:`class`,parts:e,inverted:t,ignoreCase:n,unicode:r}}function li(){return{type:`end`}}function ui(t){let n,r=F[t];if(r)return r;if(t>=F.length)n=F.length-1;else for(n=t;!F[--n];);for(r=F[n],r={line:r.line,column:r.column};n<t;)e.charCodeAt(n)===10?(r.line++,r.column=1):r.column++,n++;return F[t]=r,r}function di(e,t,n){let i=ui(e),a=ui(t);return{source:r,start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:a.line,column:a.column}}}function V(e){N<I||(N>I&&(I=N,oi=[]),oi.push(e))}function fi(e,t){return new Gt(e,null,null,t)}function pi(e,t,n){return new Gt(Gt.buildMessage(e,t),e,t,n)}function mi(){let e,t;return e=N,Z(),t=H(),t===n?(N=e,e=n):(Z(),P=e,e=mt(t)),e}function hi(){let e,t,r,i,a,o,s,c;if(e=N,t=Y(),t!==n){for(Z(),r=[],i=H();i!==n;)r.push(i),i=N,a=N,o=Z(),s=J(),s===n?(N=a,a=n):(c=Z(),o=[o,s,c],a=o),a===n?i=a:(a=H(),a===n?(N=i,i=n):i=a);i=Z(),a=X(),a===n?(N=e,e=n):(P=e,e=ht(r))}else N=e,e=n;return e}function H(){let e,t,r,i,a,o;if(e=N,t=gi(),t!==n){for(r=[],i=N,Z(),a=La(),a===n?(N=i,i=n):(Z(),o=gi(),o===n?(N=i,i=n):(P=i,i=gt(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=La(),a===n?(N=i,i=n):(Z(),o=gi(),o===n?(N=i,i=n):(P=i,i=gt(t,a,o)));P=e,e=_t(t,r)}else N=e,e=n;return e}function gi(){let e,t,r,i,a,o;if(e=N,t=_i(),t!==n){for(r=[],i=N,Z(),a=Ia(),a===n?(N=i,i=n):(Z(),o=_i(),o===n?(N=i,i=n):(P=i,i=vt(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=Ia(),a===n?(N=i,i=n):(Z(),o=_i(),o===n?(N=i,i=n):(P=i,i=vt(t,a,o)));P=e,e=yt(t,r)}else N=e,e=n;return e}function _i(){let t,r,i,a,o;return t=N,r=Fa(),r===n&&(r=N,e.charCodeAt(N)===33?(i=`!`,N++):(i=n,L===0&&V(ne)),i===n?(N=r,r=n):(a=N,L++,e.charCodeAt(N)===61?(o=`=`,N++):(o=n,L===0&&V(g)),L--,o===n?a=void 0:(N=a,a=n),a===n?(N=r,r=n):(i=[i,a],r=i))),r===n?(N=t,t=n):(i=Z(),a=_i(),a===n?(N=t,t=n):(P=t,t=bt(a))),t===n&&(t=vi()),t}function vi(){let e,t,r,i;return e=N,t=U(),t===n?(N=e,e=n):(r=N,Z(),i=yi(),i===n?(N=r,r=n):r=i,r===n&&(r=null),P=e,e=xt(t,r)),e}function yi(){let e;return e=bi(),e===n&&(e=Di(),e===n&&(e=Ci(),e===n&&(e=Si(),e===n&&(e=Ei())))),e}function bi(){let e,t,r,i,a;if(e=N,t=[],r=N,Z(),i=xi(),i===n?(N=r,r=n):(Z(),a=U(),a===n?(N=r,r=n):(P=r,r=St(i,a))),r!==n)for(;r!==n;)t.push(r),r=N,Z(),i=xi(),i===n?(N=r,r=n):(Z(),a=U(),a===n?(N=r,r=n):(P=r,r=St(i,a)));else t=n;return t!==n&&(P=e,t=Ct(t)),e=t,e}function xi(){let t;return e.substr(N,2)===`>=`?(t=`>=`,N+=2):(t=n,L===0&&V(re)),t===n&&(e.charCodeAt(N)===62?(t=`>`,N++):(t=n,L===0&&V(ie)),t===n&&(e.substr(N,2)===`<=`?(t=`<=`,N+=2):(t=n,L===0&&V(ae)),t===n&&(e.substr(N,2)===`<>`?(t=`<>`,N+=2):(t=n,L===0&&V(oe)),t===n&&(t=e.charAt(N),o.test(t)?N++:(t=n,L===0&&V(se)),t===n&&(e.substr(N,2)===`!=`?(t=`!=`,N+=2):(t=n,L===0&&V(ce))))))),t}function Si(){let e,t,r,i;return e=N,t=Ma(),t===n?(N=e,e=n):(Z(),r=Fa(),r===n?(N=e,e=n):(Z(),i=U(),i===n?(N=e,e=n):(P=e,e=wt(t,i)))),e===n&&(e=N,t=Ma(),t===n?(N=e,e=n):(Z(),r=U(),r===n?(N=e,e=n):(P=e,e=Tt(t,r)))),e}function Ci(){let e,t,r,i,a,o,s,c;return e=N,t=Fa(),t===n?(N=e,e=n):(Z(),r=Ra(),r===n?(N=e,e=n):(i=Z(),a=N,o=U(),o===n?(N=a,a=n):(Z(),s=Ia(),s===n?(N=a,a=n):(Z(),c=U(),c===n?(N=a,a=n):(P=a,a=Et(r,o,c)))),a===n?(N=e,e=n):(P=e,e=Dt(r,a)))),e===n&&(e=N,t=Ra(),t===n?(N=e,e=n):(Z(),r=N,i=U(),i===n?(N=r,r=n):(a=Z(),o=Ia(),o===n?(N=r,r=n):(Z(),s=U(),s===n?(N=r,r=n):(P=r,r=Ot(t,i,s)))),r===n?(N=e,e=n):(P=e,e=kt(t,r)))),e}function wi(){let e,t,r,i,a;return e=N,t=N,r=Fa(),r===n?(N=t,t=n):(i=Z(),a=Na(),a===n?(N=t,t=n):(r=[r,i,a],t=r)),t!==n&&(P=e,t=At(t)),e=t,e===n&&(e=Na()),e}function Ti(){let e,t,r,i,a;return e=N,t=N,r=Fa(),r===n?(N=t,t=n):(i=Z(),a=ja(),a===n?(N=t,t=n):(r=[r,i,a],t=r)),t!==n&&(P=e,t=jt(t)),e=t,e===n&&(e=ja()),e}function Ei(){let e,t,r,i,a;return e=N,t=wi(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(Z(),i=Pa(),i===n?(N=e,e=n):(Z(),a=ma(),a===n?(N=e,e=n):(P=e,e=Mt(t,r,a))))),e===n&&(e=N,t=wi(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=Nt(t,r)))),e}function Di(){let e,t,r;return e=N,t=Ti(),t===n?(N=e,e=n):(Z(),r=hi(),r===n?(N=e,e=n):(P=e,e=Pt(t,r))),e===n&&(e=N,t=Ti(),t===n?(N=e,e=n):(Z(),r=Wi(),r===n?(N=e,e=n):(P=e,e=Ft(t,r)))),e}function U(){let e,t,r,i,a,o;if(e=N,t=ki(),t!==n){for(r=[],i=N,Z(),a=Oi(),a===n?(N=i,i=n):(Z(),o=ki(),o===n?(N=i,i=n):(P=i,i=It(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=Oi(),a===n?(N=i,i=n):(Z(),o=ki(),o===n?(N=i,i=n):(P=i,i=It(t,a,o)));P=e,e=Lt(t,r)}else N=e,e=n;return e}function Oi(){let t;return t=e.charAt(N),s.test(t)?N++:(t=n,L===0&&V(_)),t===n&&(e.substr(N,2)===`||`?(t=`||`,N+=2):(t=n,L===0&&V(le))),t}function ki(){let e,t,r,i,a,o;if(e=N,t=ji(),t!==n){for(r=[],i=N,Z(),a=Ai(),a===n?(N=i,i=n):(Z(),o=ji(),o===n?(N=i,i=n):(P=i,i=Rt(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=Ai(),a===n?(N=i,i=n):(Z(),o=ji(),o===n?(N=i,i=n):(P=i,i=Rt(t,a,o)));P=e,e=zt(t,r)}else N=e,e=n;return e}function Ai(){let t;return t=e.charAt(N),c.test(t)?N++:(t=n,L===0&&V(ue)),t}function ji(){let e,t,r,i;return e=ea(),e===n&&(e=Gi(),e===n&&(e=Ki(),e===n&&(e=Yi(),e===n&&(e=Zi(),e===n&&(e=qi(),e===n&&(e=Qi(),e===n&&(e=ha(),e===n&&(e=Mi(),e===n&&(e=Wi(),e===n&&(e=N,t=Y(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(Z(),i=X(),i===n?(N=e,e=n):(P=e,e=Bt(r)))))))))))))),e}function Mi(){let e,t;return e=N,t=Ni(),t!==n&&(P=e,t=Vt(t)),e=t,e===n&&(e=N,t=Ri(),t!==n&&(P=e,t=Ht(t)),e=t),e}function Ni(){let e,t;return e=N,t=Pi(),t!==n&&(P=e,t=Ut(t)),e=t,e}function Pi(){let e,t,r,i;if(e=N,t=Ii(),t!==n){for(r=[],i=Li();i!==n;)r.push(i),i=Li();P=e,e=Wt(t,r)}else N=e,e=n;return e}function Fi(){let e,t,r,i;if(e=N,t=Ii(),t!==n){for(r=[],i=W();i!==n;)r.push(i),i=W();P=e,e=Kt(t,r)}else N=e,e=n;return e}function Ii(){let t;return t=e.charAt(N),l.test(t)?N++:(t=n,L===0&&V(de)),t}function W(){let t;return t=e.charAt(N),u.test(t)?N++:(t=n,L===0&&V(fe)),t}function Li(){let t;return t=e.charAt(N),d.test(t)?N++:(t=n,L===0&&V(pe)),t}function Ri(){let e,t,r,i;return e=N,t=Ui(),t===n?(N=e,e=n):(r=zi(),i=Ui(),i===n?(N=e,e=n):(P=e,e=qt(r))),e}function zi(){let e,t,r;for(e=N,t=[],r=Bi();r!==n;)t.push(r),r=Bi();return P=e,t=O(t),e=t,e}function Bi(){let e;return e=Hi(),e===n&&(e=Vi()),e}function Vi(){let e,t,r;return e=N,t=Ui(),t===n?(N=e,e=n):(r=Ui(),r===n?(N=e,e=n):(P=e,e=Jt())),e}function Hi(){let t;return t=e.charAt(N),d.test(t)?N++:(t=n,L===0&&V(pe)),t}function Ui(){let t;return t=e.charAt(N),f.test(t)?N++:(t=n,L===0&&V(v)),t}function Wi(){let t,r,i,a;return t=N,r=N,e.charCodeAt(N)===64?(i=`@`,N++):(i=n,L===0&&V(me)),i===n?(N=r,r=n):(a=Fi(),a===n?(N=r,r=n):(i=[i,a],r=i)),r!==n&&(P=t,r=Yt(r)),t=r,t}function Gi(){let e,t,r,i,a,o,s,c;return e=N,t=Ha(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=$i(),a===n?(N=r,r=n):(Z(),o=za(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=k(a,s)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=$i(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=A(a,s))))))),r===n?(N=e,e=n):(P=e,e=Xt(r))),e}function Ki(){let e,t,r,i,a,o,s,c,l,u,d;return e=N,t=Va(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=za(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=N,l=Ba(),l===n?(N=c,c=n):(u=Z(),d=H(),d===n?(N=c,c=n):(Z(),c=d)),c===n&&(c=null),l=X(),l===n?(N=r,r=n):(P=r,r=Zt(a,s,c)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=J(),c===n?(N=r,r=n):(l=Z(),u=H(),u===n?(N=r,r=n):(d=X(),d===n?(N=r,r=n):(P=r,r=Qt(a,s,u))))))))),r===n?(N=e,e=n):(P=e,e=$t(r))),e}function qi(){let e,t,r,i,a,o,s,c;return e=N,t=Za(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=Qa(),o===n?(N=r,r=n):(Z(),s=Ji(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=en(a,s)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=Ji(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=tn(a,s))))))),r===n?(N=e,e=n):(P=e,e=nn(r))),e}function Ji(){let e,t,r,i,a;return e=N,t=$a(),t===n&&(t=eo()),t!==n&&(P=e,t=j()),e=t,e===n&&(e=N,t=to(),t!==n&&(P=e,t=rn()),e=t,e===n&&(e=N,t=no(),t!==n&&(P=e,t=an()),e=t,e===n&&(e=N,t=ro(),t!==n&&(P=e,t=on()),e=t,e===n&&(e=N,t=Ka(),t!==n&&(P=e,t=sn()),e=t,e===n&&(e=N,t=Ga(),t!==n&&(P=e,t=cn()),e=t,e===n&&(e=N,t=qa(),t!==n&&(P=e,t=ln()),e=t,e===n&&(e=N,t=io(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=K(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=un(i)))))))))))),e}function Yi(){let e,t,r,i,a,o,s,c,l;return e=N,t=Ua(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=Xi(),Z(),o=H(),o===n?(N=r,r=n):(Z(),s=za(),s===n?(N=r,r=n):(Z(),c=H(),c===n?(N=r,r=n):(Z(),l=X(),l===n?(N=r,r=n):(P=r,r=dn(a,o,c)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=Xi(),Z(),o=H(),o===n?(N=r,r=n):(Z(),s=X(),s===n?(N=r,r=n):(P=r,r=fn(a,o))))),r===n?(N=e,e=n):(P=e,e=pn(r))),e}function Xi(){let e,t;return e=N,t=Ja(),t===n&&(t=Ya(),t===n&&(t=Xa())),t===n&&(t=null),P=e,t=mn(t),e=t,e}function Zi(){let e,t,r,i,a,o,s,c;return e=N,t=Wa(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=ja(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=hn(a,s)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=gn(a,s))))))),r===n?(N=e,e=n):(P=e,e=_n(r))),e}function Qi(){let e,t,r,i;return e=N,t=N,L++,r=Ha(),L--,r===n?t=void 0:(N=t,t=n),t===n?(N=e,e=n):(r=wo(),r===n?(N=e,e=n):(Z(),i=hi(),i===n?(N=e,e=n):(P=e,e=vn(r,i)))),e}function $i(){let e,t;return e=N,t=so(),t===n&&(t=uo(),t===n&&(t=fo(),t===n&&(t=po(),t===n&&(t=mo(),t===n&&(t=q(),t===n&&(t=co(),t===n&&(t=lo(),t===n&&(t=ho(),t===n&&(t=go(),t===n&&(t=_o())))))))))),t!==n&&(P=e,t=yn(t)),e=t,e}function ea(){let e;return e=ma(),e===n&&(e=xa(),e===n&&(e=pa(),e===n&&(e=fa(),e===n&&(e=da(),e===n&&(e=ta(),e===n&&(e=ra(),e===n&&(e=na()))))))),e}function ta(){let e,t,r;return e=N,t=Ga(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=bn(r))),e}function na(){let e,t,r;return e=N,t=qa(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=M(r))),e}function ra(){let t,r,i,a,o;return t=N,r=oo(),r===n?(N=t,t=n):(Z(),i=e.charAt(N),s.test(i)?N++:(i=n,L===0&&V(_)),i===n?(N=t,t=n):(Z(),a=G(),a===n?(N=t,t=n):(Z(),o=ia(),o===n?(N=t,t=n):(P=t,t=xn(i,a,o))))),t===n&&(t=N,r=oo(),r===n?(N=t,t=n):(Z(),i=G(),i===n?(N=t,t=n):(Z(),a=ia(),a===n?(N=t,t=n):(P=t,t=Sn(i,a))))),t}function ia(){let e,t,r,i;return e=N,t=aa(),t===n?(N=e,e=n):(Z(),r=ao(),r===n?(N=e,e=n):(Z(),i=oa(),i===n?(N=e,e=n):(P=e,e=Cn(t,i)))),e===n&&(e=sa()),e}function aa(){let e,t,r,i,a;return e=N,t=ca(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=wn(t,i))))),e===n&&(e=N,t=ca(),t!==n&&(P=e,t=Tn(t)),e=t),e}function oa(){let e,t,r,i,a,o,s;return e=N,t=ca(),t!==n&&(P=e,t=En(t)),e=t,e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=J(),a===n?(N=e,e=n):(Z(),o=la(),o===n?(N=e,e=n):(Z(),s=X(),s===n?(N=e,e=n):(P=e,e=Dn(i,o))))))),e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=On(i))))),e===n&&(e=N,t=q(),t!==n&&(P=e,t=kn()),e=t))),e}function sa(){let e,t,r,i,a,o,s;return e=N,t=ca(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=la(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=An(t,i))))),e===n&&(e=N,t=ca(),t!==n&&(P=e,t=jn(t)),e=t,e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=J(),a===n?(N=e,e=n):(Z(),o=la(),o===n?(N=e,e=n):(Z(),s=X(),s===n?(N=e,e=n):(P=e,e=Mn(i,o))))))),e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=la(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=Nn(i))))),e===n&&(e=N,t=q(),t!==n&&(P=e,t=Pn()),e=t)))),e}function ca(){let e,t;return e=N,t=fo(),t!==n&&(P=e,t=Fn()),e=t,e===n&&(e=N,t=po(),t!==n&&(P=e,t=In()),e=t,e===n&&(e=N,t=mo(),t!==n&&(P=e,t=Ln()),e=t,e===n&&(e=N,t=uo(),t!==n&&(P=e,t=Rn()),e=t,e===n&&(e=N,t=so(),t!==n&&(P=e,t=zn()),e=t)))),e}function la(){let e,t;return e=N,t=K(),t!==n&&(P=e,t=Bn(t)),e=t,e}function ua(){let e,t;return e=N,t=K(),t!==n&&(P=e,t=Vn(t)),e=t,e}function da(){let e,t,r;return e=N,t=Ka(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=Hn(r))),e}function fa(){let e,t;return e=N,t=Oa(),t!==n&&(P=e,t=Un()),e=t,e}function pa(){let e,t;return e=N,t=ka(),t!==n&&(P=e,t=Wn()),e=t,e===n&&(e=N,t=Aa(),t!==n&&(P=e,t=Gn()),e=t),e}function G(){let e;return e=ma(),e===n&&(e=Wi()),e}function ma(){let t,r,i,a,o;if(t=N,e.charCodeAt(N)===39?(r=`'`,N++):(r=n,L===0&&V(he)),r===n&&(e.substr(N,2)===`N'`?(r=`N'`,N+=2):(r=n,L===0&&V(ge))),r!==n){for(i=[],a=N,e.substr(N,2)===`''`?(o=`''`,N+=2):(o=n,L===0&&V(_e)),o!==n&&(P=a,o=Kn()),a=o,a===n&&(a=e.charAt(N),p.test(a)?N++:(a=n,L===0&&V(ve)));a!==n;)i.push(a),a=N,e.substr(N,2)===`''`?(o=`''`,N+=2):(o=n,L===0&&V(_e)),o!==n&&(P=a,o=Kn()),a=o,a===n&&(a=e.charAt(N),p.test(a)?N++:(a=n,L===0&&V(ve)));e.charCodeAt(N)===39?(a=`'`,N++):(a=n,L===0&&V(he)),a===n?(N=t,t=n):(P=t,t=qn(i))}else N=t,t=n;return t}function ha(){let e;return e=ga(),e===n&&(e=_a()),e}function ga(){let e,t,r,i,a,o,s;if(e=N,t=vo(),t!==n)if(Z(),r=H(),r!==n){for(Z(),i=[],a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a!==n;)i.push(a),a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a=yo(),a===n?(N=e,e=n):(P=e,e=Jn(r,i))}else N=e,e=n;else N=e,e=n;if(e===n)if(e=N,t=vo(),t!==n)if(Z(),r=H(),r!==n){for(Z(),i=[],a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a!==n;)i.push(a),a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a=ba(),a===n?(N=e,e=n):(o=Z(),s=yo(),s===n?(N=e,e=n):(P=e,e=Yn(r,i,a)))}else N=e,e=n;else N=e,e=n;return e}function _a(){let e,t,r,i,a,o;if(e=N,t=vo(),t!==n){for(Z(),r=[],i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i!==n;)r.push(i),i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i=yo(),i===n?(N=e,e=n):(P=e,e=Xn(r))}else N=e,e=n;if(e===n)if(e=N,t=vo(),t!==n){for(Z(),r=[],i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i!==n;)r.push(i),i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i=ba(),i===n?(N=e,e=n):(a=Z(),o=yo(),o===n?(N=e,e=n):(P=e,e=Zn(r,i)))}else N=e,e=n;return e}function va(){let e,t,r,i,a;return e=N,t=bo(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(Z(),i=xo(),i===n?(N=e,e=n):(Z(),a=H(),a===n?(N=e,e=n):(P=e,e=Qn(r,a))))),e}function ya(){let e,t,r,i,a;return e=N,t=bo(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(Z(),i=xo(),i===n?(N=e,e=n):(Z(),a=H(),a===n?(N=e,e=n):(P=e,e=$n(r,a))))),e}function ba(){let e,t,r;return e=N,t=So(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(P=e,e=er(r))),e}function xa(){let e,t,r,i;return e=N,t=Sa(),t===n?(N=e,e=n):(r=N,L++,i=Ii(),L--,i===n?r=void 0:(N=r,r=n),r===n?(N=e,e=n):(P=e,e=tr(t))),e}function Sa(){let e,t,r,i;return e=N,t=Ca(),t===n?(N=e,e=n):(r=wa(),r===n?(N=e,e=n):(i=Ta(),i===n?(N=e,e=n):(P=e,e=nr(t,r,i)))),e===n&&(e=N,t=Ca(),t===n?(N=e,e=n):(r=wa(),r===n?(N=e,e=n):(P=e,e=rr(t,r))),e===n&&(e=N,t=Ca(),t===n?(N=e,e=n):(r=Ta(),r===n?(N=e,e=n):(P=e,e=ir(t,r))),e===n&&(e=N,t=Ca(),t!==n&&(P=e,t=ar(t)),e=t))),e}function Ca(){let t,r,i;return t=K(),t===n&&(t=N,r=e.charAt(N),s.test(r)?N++:(r=n,L===0&&V(_)),r===n?(N=t,t=n):(i=K(),i===n?(N=t,t=n):(P=t,t=or(r,i)))),t}function wa(){let t,r,i;return t=N,e.charCodeAt(N)===46?(r=`.`,N++):(r=n,L===0&&V(ye)),r===n?(N=t,t=n):(i=K(),i===n&&(i=null),P=t,t=sr(i)),t}function Ta(){let e,t,r;return e=N,t=Da(),t===n?(N=e,e=n):(r=K(),r===n?(N=e,e=n):(P=e,e=cr(t,r))),e}function K(){let e,t,r;if(e=N,t=[],r=Ea(),r!==n)for(;r!==n;)t.push(r),r=Ea();else t=n;return t!==n&&(P=e,t=lr(t)),e=t,e}function Ea(){let t;return t=e.charAt(N),m.test(t)?N++:(t=n,L===0&&V(be)),t}function Da(){let t,r,i;return t=N,r=e.charAt(N),ee.test(r)?N++:(r=n,L===0&&V(xe)),r===n?(N=t,t=n):(i=e.charAt(N),s.test(i)?N++:(i=n,L===0&&V(_)),i===n&&(i=null),P=t,t=ur(r,i)),t}function Oa(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`null`?N+=4:(r=n,L===0&&V(Se)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(r=[r,i],t=r)),t}function ka(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`true`?N+=4:(r=n,L===0&&V(y)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(r=[r,i],t=r)),t}function Aa(){let t,r,i,a;return t=N,r=e.substr(N,5),r.toLowerCase()===`false`?N+=5:(r=n,L===0&&V(b)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(r=[r,i],t=r)),t}function ja(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`in`?N+=2:(r=n,L===0&&V(x)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=dr())),t}function Ma(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`is`?N+=2:(r=n,L===0&&V(S)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=fr())),t}function Na(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`like`?N+=4:(r=n,L===0&&V(C)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=pr())),t}function Pa(){let t,r,i,a;return t=N,r=e.substr(N,6),r.toLowerCase()===`escape`?N+=6:(r=n,L===0&&V(w)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=mr())),t}function Fa(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`not`?N+=3:(r=n,L===0&&V(T)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=hr())),t}function Ia(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`and`?N+=3:(r=n,L===0&&V(Ce)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=gr())),t}function La(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`or`?N+=2:(r=n,L===0&&V(we)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=_r())),t}function Ra(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`between`?N+=7:(r=n,L===0&&V(Te)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=vr())),t}function za(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`from`?N+=4:(r=n,L===0&&V(Ee)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=yr())),t}function Ba(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`for`?N+=3:(r=n,L===0&&V(De)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=br())),t}function Va(){let t,r,i,a;return t=N,r=e.substr(N,9),r.toLowerCase()===`substring`?N+=9:(r=n,L===0&&V(Oe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=xr())),t}function Ha(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`extract`?N+=7:(r=n,L===0&&V(ke)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Sr())),t}function Ua(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`trim`?N+=4:(r=n,L===0&&V(Ae)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Cr())),t}function Wa(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`position`?N+=8:(r=n,L===0&&V(je)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=wr())),t}function Ga(){let t,r,i,a;return t=N,r=e.substr(N,9),r.toLowerCase()===`timestamp`?N+=9:(r=n,L===0&&V(E)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Tr())),t}function Ka(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`date`?N+=4:(r=n,L===0&&V(D)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Er())),t}function qa(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`time`?N+=4:(r=n,L===0&&V(Me)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Dr())),t}function Ja(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`leading`?N+=7:(r=n,L===0&&V(Ne)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Or())),t}function Ya(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`trailing`?N+=8:(r=n,L===0&&V(Pe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=kr())),t}function Xa(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`both`?N+=4:(r=n,L===0&&V(Fe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Ar())),t}function Za(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`cast`?N+=4:(r=n,L===0&&V(Ie)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=jr())),t}function Qa(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`as`?N+=2:(r=n,L===0&&V(Le)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Mr())),t}function $a(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`integer`?N+=7:(r=n,L===0&&V(Re)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Nr())),t}function eo(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`int`?N+=3:(r=n,L===0&&V(ze)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Pr())),t}function to(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`smallint`?N+=8:(r=n,L===0&&V(Be)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Fr())),t}function no(){let t,r,i,a;return t=N,r=e.substr(N,5),r.toLowerCase()===`float`?N+=5:(r=n,L===0&&V(Ve)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Ir())),t}function ro(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`real`?N+=4:(r=n,L===0&&V(He)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Lr())),t}function io(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`varchar`?N+=7:(r=n,L===0&&V(Ue)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Rr())),t}function ao(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`to`?N+=2:(r=n,L===0&&V(We)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=zr())),t}function oo(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`interval`?N+=8:(r=n,L===0&&V(Ge)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Br())),t}function so(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`year`?N+=4:(r=n,L===0&&V(Ke)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Vr())),t}function co(){let t,r,i,a;return t=N,r=e.substr(N,13),r.toLowerCase()===`timezone_hour`?N+=13:(r=n,L===0&&V(qe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Hr())),t}function lo(){let t,r,i,a;return t=N,r=e.substr(N,15),r.toLowerCase()===`timezone_minute`?N+=15:(r=n,L===0&&V(Je)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Ur())),t}function uo(){let t,r,i,a;return t=N,r=e.substr(N,5),r.toLowerCase()===`month`?N+=5:(r=n,L===0&&V(Ye)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Wr())),t}function fo(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`day`?N+=3:(r=n,L===0&&V(Xe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Gr())),t}function po(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`hour`?N+=4:(r=n,L===0&&V(Ze)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Kr())),t}function mo(){let t,r,i,a;return t=N,r=e.substr(N,6),r.toLowerCase()===`minute`?N+=6:(r=n,L===0&&V(Qe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=qr())),t}function q(){let t,r,i,a;return t=N,r=e.substr(N,6),r.toLowerCase()===`second`?N+=6:(r=n,L===0&&V($e)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Jr())),t}function ho(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`dow`?N+=3:(r=n,L===0&&V(et)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Yr())),t}function go(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`doy`?N+=3:(r=n,L===0&&V(tt)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Xr())),t}function _o(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`week`?N+=4:(r=n,L===0&&V(nt)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Zr())),t}function vo(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`case`?N+=4:(r=n,L===0&&V(rt)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Qr())),t}function yo(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`end`?N+=3:(r=n,L===0&&V(it)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=$r())),t}function bo(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`when`?N+=4:(r=n,L===0&&V(at)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=ei())),t}function xo(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`then`?N+=4:(r=n,L===0&&V(ot)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=ti())),t}function So(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`else`?N+=4:(r=n,L===0&&V(st)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=ni())),t}function J(){let t;return e.charCodeAt(N)===44?(t=`,`,N++):(t=n,L===0&&V(ct)),t}function Y(){let t;return e.charCodeAt(N)===40?(t=`(`,N++):(t=n,L===0&&V(lt)),t}function X(){let t;return e.charCodeAt(N)===41?(t=`)`,N++):(t=n,L===0&&V(ut)),t}function Z(){let e,t;for(e=[],t=Co();t!==n;)e.push(t),t=Co();return e}function Co(){let t;return t=e.charAt(N),te.test(t)?N++:(t=n,L===0&&V(dt)),t}function wo(){let t,r,i,a;if(t=N,r=Fi(),r!==n&&(P=t,r=ri(r)),t=r,t===n)if(t=N,e.charCodeAt(N)===96?(r="`",N++):(r=n,L===0&&V(ft)),r!==n){if(i=[],a=e.charAt(N),h.test(a)?N++:(a=n,L===0&&V(pt)),a!==n)for(;a!==n;)i.push(a),a=e.charAt(N),h.test(a)?N++:(a=n,L===0&&V(pt));else i=n;i===n?(N=t,t=n):(e.charCodeAt(N)===96?(a="`",N++):(a=n,L===0&&V(ft)),a===n?(N=t,t=n):(P=t,t=ii(i)))}else N=t,t=n;return t}function To(e,t,n){return{type:`unary-expression`,location:n,operator:e,expr:t}}function Eo(e,t,n,r,i){let a={type:`binary-expression`,location:i,operator:e,left:t,right:n};return r!==void 0&&(a.escape=r),a}function Q(e,...t){return{type:`expression-list`,location:e,value:t}}function $(e,t){let n=e;for(let{op:e,expr:r,location:{end:i}}of t)n=Eo(e,n,r,void 0,{...n.location,end:i});return n}function Do(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&si(`Timestamp literal is invalid`)}function Oo(e){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)&&si(`Time literal is invalid`)}function ko(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&si(`Date literal is invalid`)}ai=a();let Ao=ai!==n&&N===e.length;function jo(){throw ai!==n&&N<e.length&&V(li()),pi(oi,I<e.length?ci(I):null,I<e.length?di(I,I+1):di(I,I))}return t.peg$library?{peg$result:ai,peg$currPos:N,peg$FAILED:n,peg$maxFailExpected:oi,peg$maxFailPos:I,peg$success:Ao,peg$throw:Ao?void 0:jo}:Ao?ai:void jo()}var qt=class{static parse(e){return Kt(e)}};function O(e,t){if(e!=null)switch(t(e),e.type){case`when-clause`:O(e.operand,t),O(e.value,t);break;case`case-expression`:for(let n of e.clauses)O(n,t);e.format===`simple`&&O(e.operand,t),e.else!==null&&O(e.else,t);break;case`expression-list`:for(let n of e.value)O(n,t);break;case`unary-expression`:O(e.expr,t);break;case`binary-expression`:O(e.left,t),O(e.right,t);break;case`function`:O(e.args,t);break;case`interval`:O(e.value,t),O(e.qualifier,t);break;case`interval-qualifier`:O(e.start,t),O(e.end,t)}}var Jt=new Set([`current_timestamp`,`current_date`,`current_time`]),Yt=class{constructor(e){this.staticData=e}makeBool(e){return sn(e)}featureValue(e,t,n,r){return bn(e,t,n,r)}equalsNull(e){return e===null}applyLike(e,t,n){return vn(e,t,n)}ensureArray(e){return cn(e)}applyIn(e,t){return fn(e,t)}currentTimestamp(e){return pn(e)}currentDate(e){return mn(e)}currentTime(e){return hn(e)}makeSqlInterval(e,t,n){return v.createFromValueAndQualifier(e,t,n)}convertInterval(e){return v.isInterval(e)?e.valueInMilliseconds():e}compare(e,t,n){return E(t,n,e)}calculate(e,t,n,r){return Ye(e,t,n,r)}evaluateTime(e){return w(e)}evaluateTimestamp(e,t,n){return T(e,t,n)}evaluateDate(e,t){return Ce(e,t)}evaluateFunction(e,t,n){return Ve(e,t,n)}lookup(e,t){let n=t[e];return n===void 0?null:n}between(e,t){return e==null||t[0]==null||t[1]==null?null:E(e,t[0],`>=`)&&E(e,t[1],`<=`)}notbetween(e,t){return e==null||t[0]==null||t[1]==null?null:E(e,t[0],`<`)||E(e,t[1],`>`)}ternaryNot(e){return ln(e)}ternaryAnd(e,t){return un(e,t)}ternaryOr(e,t){return dn(e,t)}};function k(e,...t){return`this.${e}(${t.join(`, `)})`}function A(e){return e===void 0?`void 0`:JSON.stringify(e)}function Xt({type:e,start:t,end:n}){return`{type: ${A(e)}, start: ${Zt(t)}, end: ${Zt(n)}}`}function Zt({type:e,period:t,precision:n,secondary:r}){return JSON.stringify({type:e,period:t,precision:n,secondary:r})}function Qt({type:e,size:t,withtimezone:n}){return JSON.stringify({type:e,size:t,withtimezone:n})}var $t=`feature`,en=`lookups`,tn=`attributeAdapter`,nn=`fieldsIndex`,j=`timeZone`,rn=`currentUser`,an=class{constructor(e){this._parseTree=e,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){let e=this._compileNode(this._parseTree),t=`\n      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(`, `)};`:``}\n      return this.convertInterval(${e});\n    `;return Function($t,en,tn,nn,j,rn,t).bind(new Yt(this._staticData))}_storeStaticData(e){let t=`static$`+ this._nextStaticDataId++;return this._staticData[t]=e,t}_compileRefStaticData(e){return`this.staticData[${A(e)}]`}_generateTempVar(){let e=`temp$`+ this._nextTempVarId++;return this._tempVars.add(e),e}_compileSimpleCase(e){let t=this._compileNode(e.operand),n=this._generateTempVar(),r=[];for(let t of e.clauses){let e=k(`compare`,A(`=`),n,this._compileNode(t.operand)),i=this._compileNode(t.value);r.push(`${e} ? (${i}) :`)}return e.else==null?r.push(A(null)):r.push(this._compileNode(e.else)),`(${n} = ${t}, ${r.join(` `)})`}_compileSearchedCase(e){let t=[];for(let n of e.clauses){let e=k(`makeBool`,this._compileNode(n.operand)),r=this._compileNode(n.value);t.push(`${e} ? (${r}) :`)}return e.else==null?t.push(A(null)):t.push(this._compileNode(e.else)),t.join(` `)}_compileInExpr(e,t){let n=new Set,r=[];for(let e of t.value)e.type===`number`||e.type===`string`?n.add(e.value):r.push(e);let i=this._compileNode(e),a=k(`ensureArray`,this._compileNode({type:`expression-list`,location:t.location,value:r}));if(n.size>0){let e=this._compileRefStaticData(this._storeStaticData(n)),t=this._generateTempVar();return r.length>0?`(${t} = ${i}, ${e}.has(${t}) || ${k(`applyIn`,t,a)})`:`(${t} = ${i}, ${t} == null ? null : ${e}.has(${t}))`}return k(`applyIn`,i,a)}_compileNode(e){switch(e.type){case`interval`:return k(`makeSqlInterval`,this._compileNode(e.value),e.qualifier.type===`interval-qualifier`?Xt(e.qualifier):Zt(e.qualifier),A(e.op));case`case-expression`:return e.format===`simple`?this._compileSimpleCase(e):this._compileSearchedCase(e);case`parameter`:return k(`lookup`,A(e.value.toLowerCase()),en);case`expression-list`:return`[${e.value.map(e=>this._compileNode(e)).join(`, `)}]`;case`unary-expression`:return k(`ternaryNot`,this._compileNode(e.expr));case`binary-expression`:switch(e.operator){case`AND`:return k(`ternaryAnd`,this._compileNode(e.left),this._compileNode(e.right));case`OR`:return k(`ternaryOr`,this._compileNode(e.left),this._compileNode(e.right));case`IS`:if(e.right.type!==`null`)throw new g(`UnsupportedIsRhs`);return k(`equalsNull`,this._compileNode(e.left));case`ISNOT`:if(e.right.type!==`null`)throw new g(`UnsupportedIsRhs`);return`!${k(`equalsNull`,this._compileNode(e.left))}`;case`IN`:return this._compileInExpr(e.left,e.right);case`NOT IN`:return k(`ternaryNot`,this._compileInExpr(e.left,e.right));case`BETWEEN`:return k(`between`,this._compileNode(e.left),this._compileNode(e.right));case`NOTBETWEEN`:return k(`notbetween`,this._compileNode(e.left),this._compileNode(e.right));case`LIKE`:return k(`applyLike`,this._compileNode(e.left),this._compileNode(e.right),A(e.escape));case`NOT LIKE`:return k(`ternaryNot`,k(`applyLike`,this._compileNode(e.left),this._compileNode(e.right),A(e.escape)));case`<>`:case`<`:case`>`:case`>=`:case`<=`:case`=`:return k(`compare`,A(e.operator),this._compileNode(e.left),this._compileNode(e.right));case`*`:case`-`:case`+`:case`/`:case`||`:return k(`calculate`,A(e.operator),this._compileNode(e.left),this._compileNode(e.right),j);default:throw new g(`UnsupportedOperator`,{operator:e.operator})}case`null`:case`boolean`:case`string`:case`number`:return A(e.value);case`time`:try{return this._compileRefStaticData(this._storeStaticData(w(e.value)))}catch{return k(`evaluateTime`,A(e.value))}case`date`:try{return this._compileRefStaticData(this._storeStaticData(Ce(e.value,`unknown`)))}catch{return k(`evaluateDate`,A(e.value),A(`unknown`))}case`timestamp`:try{return this._compileRefStaticData(this._storeStaticData(T(e.value,`unknown`)))}catch{return k(`evaluateTimestamp`,A(e.value),A(`unknown`))}case`current-time`:return e.mode===`date`?k(`currentDate`,j):e.mode===`time`?k(`currentTime`,j):k(`currentTimestamp`,j);case`current-user`:return rn;case`column-reference`:return k(`featureValue`,$t,A(e.column),nn,tn);case`data-type`:return Qt(e.value);case`function`:return k(`evaluateFunction`,A(e.name),this._compileNode(e.args),j)}throw new g(`UnsupportedSyntax`,{node:e.type})}},on=class e{static create(t,n={}){return new e(t,n.fieldsIndex,n.timeZone??void 0,n.currentUser)}constructor(e,t,n=`UTC`,r=null){this.fieldsIndex=t,this.timeZone=n,this.currentUser=r,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=qt.parse(e);let{isStandardized:i,isAggregate:a,currentUserRequired:o,referencedFieldNames:s}=this._extractExpressionInfo(t);this._referencedFieldNames=s,this.isStandardized=i,this.isAggregate=a,this.currentUserRequired=o}static convertValueToStorageFormat(e,t=null){if(t===null)return s(e)?e.getTime():b(e)?e.toMillis():C(e)?e.toStorageFormat():S(e)?e.toStorageString():x(e)?e.toStorageFormat():e;switch(t){case`date`:return s(e)?e.getTime():b(e)?e.toMillis():C(e)?e.toMilliseconds():x(e)?e.toNumber():e;case`date-only`:return s(e)?l.fromDateJS(e).toString():C(e)?l.fromSqlTimeStampOffset(e).toString():b(e)?l.fromDateTime(e).toString():e;case`time-only`:return s(e)?p.fromDateJS(e).toStorageString():b(e)?p.fromDateTime(e).toStorageString():C(e)?p.fromSqlTimeStampOffset(e).toStorageString():S(e)?e.toStorageString():e;case`timestamp-offset`:if(s(e))return h.fromJSDate(e).toStorageFormat();if(b(e))return h.fromDateTime(e).toStorageFormat();if(C(e))return e.toStorageFormat()}return e}get fieldNames(){return this._referencedFieldNames}testSet(e,t=M,n=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,n)}calculateValue(e,t=M,n=this.currentUser){let r=this._evaluateNode(this.parseTree,e,t,null,n);return v.isInterval(r)?r.valueInMilliseconds()/864e5:r}tryGetCompiledExecutor(){return this._compiledExecutor==null?n(`esri-csp-restrictions`)?null:(this._compiledExecutor=new an(this.parseTree).compile(),this._compiledExecutor):this._compiledExecutor}calculateValueCompiled(e,t=M,n=this.currentUser){let r=this.tryGetCompiledExecutor();return r==null?this.calculateValue(e,t):r(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null)}testFeature(e,t=M,n=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,n)}testFeatureCompiled(e,t=M,n=this.currentUser){let r=this.tryGetCompiledExecutor();return r==null?this.testFeature(e,t):!!r(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null)}get hasDateFunctions(){return this._hasDateFunctions??(this._hasDateFunctions=!1,O(this.parseTree,e=>{e.type===`current-time`?this._hasDateFunctions=!0:e.type===`function`&&(this._hasDateFunctions=this._hasDateFunctions||Jt.has(e.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){let e=new Set;return O(this.parseTree,t=>{t.type===`function`&&e.add(t.name.toLowerCase())}),Array.from(e)}getExpressions(){let e=new Map;return O(this.parseTree,t=>{if(t.type===`function`){let n=t.name.toLowerCase(),r=t.args.value[0];if(r.type===`column-reference`){let t=r.column,i=`${n}-${t}`;e.has(i)||e.set(i,{aggregateType:n,field:t})}}}),[...e.values()]}getVariables(){let e=new Set;return O(this.parseTree,t=>{t.type===`parameter`&&e.add(t.value.toLowerCase())}),Array.from(e)}_extractExpressionInfo(e){let t=[],n=new Set,r=!0,i=!1,a=!1;return O(this.parseTree,o=>{switch(o.type){case`column-reference`:{let r=e?.get(o.column),i,a;r?i=a=r.name??``:(a=o.column,i=a.toLowerCase()),n.has(i)||(n.add(i),t.push(a)),o.column=a;break}case`current-user`:a=!0;break;case`function`:{let{name:e,args:t}=o,n=t.value.length;r&&=He(e,n),!1===i&&(i=ie(e,n));break}}}),{referencedFieldNames:Array.from(t),isStandardized:r,isAggregate:i,currentUserRequired:a}}_evaluateNode(e,t,n,r,i){let a;switch(e.type){case`interval`:{let a=this._evaluateNode(e.value,t,n,r,i);return v.createFromValueAndQualifier(a,e.qualifier,e.op)}case`case-expression`:if(e.format===`simple`){let a=this._evaluateNode(e.operand,t,n,r,i);for(let o=0;o<e.clauses.length;o++)if(E(a,this._evaluateNode(e.clauses[o].operand,t,n,r,i),`=`))return this._evaluateNode(e.clauses[o].value,t,n,r,i);if(e.else!==null)return this._evaluateNode(e.else,t,n,r,i)}else{for(let a=0;a<e.clauses.length;a++)if(sn(this._evaluateNode(e.clauses[a].operand,t,n,r,i)))return this._evaluateNode(e.clauses[a].value,t,n,r,i);if(e.else!==null)return this._evaluateNode(e.else,t,n,r,i)}return null;case`parameter`:return a=this.parameters[e.value.toLowerCase()],s(a)?m.fromJSDate(a):typeof a==`object`&&a&&`toDateTime`in a?a.toDateTime():a;case`expression-list`:{let a=[];for(let o of e.value)a.push(this._evaluateNode(o,t,n,r,i));return a}case`unary-expression`:return ln(this._evaluateNode(e.expr,t,n,r,i));case`binary-expression`:switch(e.operator){case`AND`:return un(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i));case`OR`:return dn(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i));case`IS`:if(e.right.type!==`null`)throw new g(`UnsupportedIsRhs`);return this._evaluateNode(e.left,t,n,r,i)===null;case`ISNOT`:if(e.right.type!==`null`)throw new g(`UnsupportedIsRhs`);return this._evaluateNode(e.left,t,n,r,i)!==null;case`IN`:{let a=cn(this._evaluateNode(e.right,t,n,r,i));return fn(this._evaluateNode(e.left,t,n,r,i),a)}case`NOT IN`:{let a=cn(this._evaluateNode(e.right,t,n,r,i));return ln(fn(this._evaluateNode(e.left,t,n,r,i),a))}case`BETWEEN`:{let a=this._evaluateNode(e.left,t,n,r,i),o=this._evaluateNode(e.right,t,n,r,i);return a==null||o[0]==null||o[1]==null?null:E(a,o[0],`>=`)&&E(a,o[1],`<=`)}case`NOTBETWEEN`:{let a=this._evaluateNode(e.left,t,n,r,i),o=this._evaluateNode(e.right,t,n,r,i);return a==null||o[0]==null||o[1]==null?null:E(a,o[0],`<`)||E(a,o[1],`>`)}case`LIKE`:return vn(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),e.escape);case`NOT LIKE`:return ln(vn(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),e.escape));case`<>`:case`<`:case`>`:case`>=`:case`<=`:case`=`:return E(this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),e.operator);case`-`:case`+`:case`*`:case`/`:case`||`:return Ye(e.operator,this._evaluateNode(e.left,t,n,r,i),this._evaluateNode(e.right,t,n,r,i),this.timeZone)}case`null`:case`boolean`:case`string`:case`number`:return e.value;case`date`:return e.parsedValue??=Ce(e.value,`unknown`),e.parsedValue;case`timestamp`:return e.parsedValue??=T(e.value,`unknown`),e.parsedValue;case`time`:return w(e.value);case`current-time`:return e.mode===`date`?mn(this.timeZone):e.mode===`time`?hn(this.timeZone):pn(this.timeZone);case`current-user`:return i??null;case`column-reference`:return bn(t,e.column,this.fieldsIndex,n);case`data-type`:return e.value;case`function`:{if(this.isAggregate&&ie(e.name,e.args.value.length)){let t=[];for(let a of e.args?.value||[]){let e=[];for(let t of r||[])e.push(this._evaluateNode(a,t,n,null,i));t.push(e)}return re(e.name,t)}let a=this._evaluateNode(e.args,t,n,r,i);return Ve(e.name,a,this.timeZone)}}throw new g(`UnsupportedSyntax`,{node:e.type})}};function sn(e){return!0===e}function cn(e){return Array.isArray(e)?e:[e]}function ln(e){return e===null?null:!0!==e}function un(e,t){return e!=null&&t!=null?!0===e&&!0===t:!1!==e&&!1!==t&&null}function dn(e,t){return e!=null&&t!=null?!0===e||!0===t:!0===e||!0===t||null}function fn(e,t){if(e==null)return null;let n=!1;for(let r of t)if(r==null)n=null;else{if(e===r){n=!0;break}if(Ae(e)&&Ae(r)&&(n=E(e,r,`=`),n))break}return n}function pn(e){return Se(new Date,e)}function mn(e){return l.fromNow(e)}function hn(e){let t=Se(new Date,e);return p.fromDateTime(t)}var gn=`-[]/{}()*+?.\\^$|`;function _n(e,t){let n=t,r=``,i=0;for(let t=0;t<e.length;t++){let a=e.charAt(t);switch(i){case 0:a===n?i=1:gn.includes(a)?r+=`\\`+a:r+=a===`%`?`.*`:a===`_`?`.`:a;break;case 1:gn.includes(a)?r+=`\\`+a:r+=a,i=0}}return RegExp(`^`+r+`$`,`m`)}function vn(e,t,n){return e==null?null:_n(t,n).test(e)}function yn(e){return e&&typeof e.attributes==`object`}function bn(e,t,n,i){if(`getAttributeSQL`in i)return i.getAttributeSQL(e,t);let a=i.getAttribute(e,t);if(a==null)return a;let o=n?.get(t);switch(o?.type){case`esriFieldTypeDate`:case`date`:return Se(new Date(a),n?.getLuxonTimeZone(o.name)??r.utcInstance);case`esriFieldTypeDateOnly`:case`date-only`:return l.fromReader(a);case`esriFieldTypeTimeOnly`:case`time-only`:return p.fromReader(a);case`esriFieldTypeTimestampOffset`:case`timestamp-offset`:return new h(a)}return a}var M={getAttribute:(e,t)=>(yn(e)?e.attributes:e)[t]};export{h as i,re as n,g as r,on as t};