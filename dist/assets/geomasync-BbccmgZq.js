const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/unitConversion-9Vd37Lfn.js","assets/unitConversion-DPiGOms8.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css"])))=>i.map(i=>d[i]);
import{$S as e,Bv as t,Ex as n,Ix as r,ZS as i,cy as a,hn as o,kv as s,lm as c,mD as l,qh as u,vC as d,vx as f,wn as p,zv as m}from"./index-BN8X5Ryz.js";import{A as h,G as g,O as _,X as v,Y as y,_ as b,et as x,k as S,lt as C,nt as w,o as T,ot as E,q as D,s as O,t as k,u as A,w as j,y as M}from"./Dictionary-Db5-uVgu.js";import{a as N,c as P,i as F,n as I,o as L,r as R,s as z,t as B}from"./functions-CF8wh9R5.js";import{t as V}from"./ArcadePortal-CBZerHI1.js";import{t as H}from"./portalUtils-Bs81nDRc.js";import{t as U}from"./operatorsWorkerConnection-DOouwDAw.js";async function W(e,t,n){if(!d?.findCredential(e.restUrl))return null;if(e.loadStatus===`loaded`&&t===``&&e.user?.sourceJSON&&!1===n)return e.user.sourceJSON;let r={responseType:`json`,query:{f:`json`}};if(n&&(r.query.returnUserLicenseTypeExtensions=!0),t===``){let t=await i(e.restUrl+`/community/self`,r);if(t.data){let e=t.data;if(e?.username)return e}return null}let a=await i(e.restUrl+`/community/users/`+t,r);if(a.data){let e=a.data;return e.error?null:e}return null}function G(e){if(e==null)return e;switch(typeof e){case`string`:case`number`:return e;default:throw new p(null,`InvalidParameter`,null)}}function K(i){i.mode===`async`&&(i.functions.disjoint=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]===null||i[1]===null||U(`disjoint`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.intersects=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`intersects`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.touches=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`touches`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.crosses=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`crosses`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.within=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`within`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.contains=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`contains`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.overlaps=function(e,t){return i.standardFunctionAsync(e,t,(n,r,i)=>(i=b(i),F(i,e,t),i[0]!==null&&i[1]!==null&&U(`overlaps`,[i[0].toJSON(),i[1].toJSON()])))},i.functions.equals=function(e,t){return i.standardFunctionAsync(e,t,(n,i,a)=>(v(a,2,2,e,t),a[0]===a[1]||(a[0]instanceof r&&a[1]instanceof r?U(`equals`,[a[0].toJSON(),a[1].toJSON()]):(y(a[0])&&y(a[1])||!!(D(a[0])&&D(a[1])||x(a[0])&&x(a[1])))&&a[0].equals(a[1]))))},i.functions.relate=function(e,t){return i.standardFunctionAsync(e,t,(n,i,a)=>{if(a=b(a),v(a,3,3,e,t),a[0]instanceof r&&a[1]instanceof r)return U(`relate`,[a[0].toJSON(),a[1].toJSON(),g(a[2])]);if(a[0]instanceof r&&a[1]===null||a[1]instanceof r&&a[0]===null||a[0]===null&&a[1]===null)return!1;throw new p(e,`InvalidParameter`,t)})},i.functions.intersection=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>(i=b(i),F(i,e,t),i[0]===null||i[1]===null?null:s(await U(`intersection`,[i[0].toJSON(),i[1].toJSON()]))))},i.functions.union=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if((a=b(a)).length===0)throw new p(e,`WrongNumberOfParameters`,t);let l=[];if(a.length===1)if(c(a[0])){for(let n of b(a[0]))if(n!==null){if(!(n instanceof r))throw new p(e,`InvalidParameter`,t);l.push(n.toJSON())}}else{if(!w(a[0])){if(a[0]instanceof r)return A(o(a[0]),e.spatialReference);if(a[0]===null)return null;throw new p(e,`InvalidParameter`,t)}for(let n of b(a[0].toArray()))if(n!==null){if(!(n instanceof r))throw new p(e,`InvalidParameter`,t);l.push(n.toJSON())}}else for(let n of a)if(n!==null){if(!(n instanceof r))throw new p(e,`InvalidParameter`,t);l.push(n.toJSON())}return l.length===0?null:s(await U(`union`,[l]))})},i.functions.difference=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>(i=b(i),F(i,e,t),i[0]===null?null:i[1]===null?o(i[0]):s(await U(`difference`,[i[0].toJSON(),i[1].toJSON()]))))},i.functions.symmetricdifference=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>(i=b(i),F(i,e,t),i[0]===null&&i[1]===null?null:i[0]===null?o(i[1]):i[1]===null?o(i[0]):s(await U(`symmetricDifference`,[i[0].toJSON(),i[1].toJSON()]))))},i.functions.clip=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,2,2,e,t),!(a[1]instanceof f)&&a[1]!==null)throw new p(e,`InvalidParameter`,t);if(a[0]===null)return null;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);return a[1]===null?null:s(await U(`clip`,[a[0].toJSON(),a[1].toJSON()]))})},i.functions.cut=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,2,2,e,t),!(a[1]instanceof m)&&a[1]!==null)throw new p(e,`InvalidParameter`,t);if(a[0]===null)return[];if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);return a[1]===null?[o(a[0])]:(await U(`cut`,[a[0].toJSON(),a[1].toJSON()])).map(e=>s(e))})},i.functions.area=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(v(a,1,2,e,t),a=b(a),O(a[0])){let n=await a[0].sumArea(G(a[1]),null,e.abortSignal);if(e.abortSignal.aborted)throw new p(e,`Cancelled`,t);return n}let o=a[0];if((c(o)||w(o))&&(o=_(a[0],e.spatialReference)),o===null)return 0;if(!(o instanceof r))throw new p(e,`InvalidParameter`,t);return U(`area`,[o.toJSON(),G(a[1])])})},i.functions.areageodetic=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>{v(i,1,3,e,t);let a=(i=b(i))[0];(c(a)||w(a))&&(a=_(a,e.spatialReference));let o=G(i[1]),s=B(i[2]);if(O(a)){let n=await a.sumArea(o,s,e.abortSignal);if(e.abortSignal.aborted)throw new p(e,`Cancelled`,t);return n}if(a==null)return 0;if(!h(a))throw new p(e,`InvalidParameter`,t);return U(`geodeticArea`,[a.toJSON(),o,s])})},i.functions.length=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(v(a,1,2,e,t),a=b(a),O(a[0])){let n=await a[0].sumLength(G(a[1]),null,e.abortSignal);if(e.abortSignal.aborted)throw new p(e,`Cancelled`,t);return n}let o=a[0];if((c(a[0])||w(a[0]))&&(o=E(a[0],e.spatialReference)),o===null)return 0;if(!(o instanceof r))throw new p(e,`InvalidParameter`,t);return U(`length`,[o.toJSON(),G(a[1])])})},i.functions.length3d=function(t,n){return i.standardFunctionAsync(t,n,async(i,a,o)=>{if(v(o,1,2,t,n),(o=b(o))[0]===null)return 0;let s=o[0];if((c(o[0])||w(o[0]))&&(s=E(o[0],t.spatialReference)),s===null)return 0;if(!(s instanceof r))throw new p(t,`InvalidParameter`,n);if(!0===s.hasZ){let{convertFromSpatialReferenceUnit:t,toLengthUnit:n}=await e(async()=>{let{convertFromSpatialReferenceUnit:e,toLengthUnit:t}=await import(`./unitConversion-9Vd37Lfn.js`);return{convertFromSpatialReferenceUnit:e,toLengthUnit:t}},__vite__mapDeps([0,1,2,3])),r=z(s);return t(s.spatialReference,n(o[1]),r)}return U(`length`,[s.toJSON(),G(o[1])])})},i.functions.lengthgeodetic=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>{v(i,1,3,e,t);let a=(i=b(i))[0];(c(i[0])||w(i[0]))&&(a=E(i[0],e.spatialReference));let o=G(i[1]),s=B(i[2]);if(O(a)){let n=await a.sumLength(o,s,e.abortSignal);if(e.abortSignal.aborted)throw new p(e,`Cancelled`,t);return n}if(a===null)return 0;if(!h(a))throw new p(e,`InvalidParameter`,t);return U(`geodeticLength`,[a.toJSON(),o,s])})},i.functions.distance=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{a=b(a),v(a,2,3,e,t);let o=a[0];if((c(a[0])||w(a[0]))&&(o=j(a[0],e.spatialReference)),!(o instanceof r))throw new p(e,`InvalidParameter`,t);let s=a[1];if((c(a[1])||w(a[1]))&&(s=j(a[1],e.spatialReference)),!(s instanceof r))throw new p(e,`InvalidParameter`,t);return U(`distance`,[o.toJSON(),s.toJSON(),G(a[2])])})},i.functions.distancegeodetic=function(e,t){return i.standardFunctionAsync(e,t,async(r,i,a)=>{a=b(a),v(a,2,4,e,t);let o=a[0];if(!(o instanceof n))throw new p(e,`InvalidParameter`,t);let s=a[1];if(!(s instanceof n))throw new p(e,`InvalidParameter`,t);let c=new m({paths:[],spatialReference:o.spatialReference});return c.addPath([o,s]),U(`geodeticLength`,[c.toJSON(),G(a[2]),B(a[3])])})},i.functions.densify=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,2,3,e,t),a[0]===null)return null;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);let o=S(a[1]);if(isNaN(o)||o<=0)throw new p(e,`InvalidParameter`,t);switch(a[0].type){case`polygon`:case`polyline`:case`extent`:return s(await U(`densify`,[a[0].toJSON(),o,G(a[2])]));default:return a[0]}})},i.functions.densifygeodetic=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>{i=b(i),v(i,2,4,e,t);let a=i[0];if(a==null)return null;if(!h(a))throw new p(e,`InvalidParameter`,t);let o=S(i[1]);if(isNaN(o)||o<=0)throw new p(e,`InvalidParameter`,t);let c=G(i[2]),l=B(i[3]);switch(a.type){case`polygon`:case`polyline`:case`extent`:return s(await U(`geodeticDensify`,[a.toJSON(),o,c,l]));default:return a}})},i.functions.generalize=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,2,4,e,t),a[0]===null)return null;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);let o=S(a[1]);if(isNaN(o))throw new p(e,`InvalidParameter`,t);let c=T(C(a[2],!0));return s(await U(`generalize`,[a[0].toJSON(),o,G(a[3]),{removeDegenerateParts:c}]))})},i.functions.buffer=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,2,3,e,t),a[0]===null)return null;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);let c=S(a[1]);if(isNaN(c))throw new p(e,`InvalidParameter`,t);return c===0?o(a[0]):s(await U(`buffer`,[a[0].toJSON(),c,G(a[2])]))})},i.functions.buffergeodetic=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>{i=b(i),v(i,2,4,e,t);let a=i[0];if(a==null)return null;if(!h(a))throw new p(e,`InvalidParameter`,t);let c=S(i[1]);if(isNaN(c))throw new p(e,`InvalidParameter`,t);if(c===0)return o(a);let l=G(i[2]),u=B(i[3]);return s(await U(`geodesicBuffer`,[a.toJSON(),c,l,u]))})},i.functions.offset=function(e,n){return i.standardFunctionAsync(e,n,async(r,i,a)=>{a=b(a),v(a,2,6,e,n);let o=a[0];if(o===null)return null;if(!(o instanceof t||o instanceof m))throw new p(e,`InvalidParameter`,n);let c=S(a[1]);if(isNaN(c))throw new p(e,`InvalidParameter`,n);let l=a[2],u=P(a[3]),d=S(C(a[4],10));if(isNaN(d))throw new p(e,`InvalidParameter`,n);let f=S(C(a[5],0));if(isNaN(f))throw new p(e,`InvalidParameter`,n);return s(await U(`offset`,[o.toJSON(),c,G(l),u,d,f]))})},i.functions.rotate=function(e,a){return i.standardFunctionAsync(e,a,async(i,o,c)=>{if(c=b(c),v(c,2,3,e,a),c[0]===null)return null;if(!(c[0]instanceof r))throw new p(e,`InvalidParameter`,a);let l=c[0]instanceof f?t.fromExtent(c[0]):c[0],u=S(c[1]);if(isNaN(u))throw new p(e,`InvalidParameter`,a);let d=C(c[2],null);if(d===null){let e=l.type===`point`?l:l.extent?.center;return s(await U(`rotate`,[l.toJSON(),u,e?.x,e?.y]))}if(d instanceof n)return s(await U(`rotate`,[l.toJSON(),u,d.x,d.y]));throw new p(e,`InvalidParameter`,a)})},i.functions.centroid=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,1,2,e,t),a[0]===null)return null;let o=R(a[1]),l=a[0];if((c(a[0])||w(a[0]))&&(l=o===`geometric`?j(a[0],e.spatialReference):_(a[0],e.spatialReference),l===null))return null;if(!(l instanceof r))throw new p(e,`InvalidParameter`,t);return s(o===`geometric`?await U(`centroid`,[l.toJSON()]):await U(`labelPoint`,[l.toJSON()]))})},i.functions.measuretocoordinate=function(e,t){return i.standardFunctionAsync(e,t,I)},i.functions.pointtocoordinate=function(e,t){return i.standardFunctionAsync(e,t,N)},i.functions.distancetocoordinate=function(e,t){return i.standardFunctionAsync(e,t,L)},i.functions.multiparttosinglepart=function(e,c){return i.standardFunctionAsync(e,c,async(i,l,u)=>{if(u=b(u),v(u,1,1,e,c),u[0]===null)return null;if(!(u[0]instanceof r))throw new p(e,`InvalidParameter`,c);if(u[0]instanceof n||u[0]instanceof f)return[A(o(u[0]),e.spatialReference)];let d=s(await U(`simplify`,[u[0].toJSON()]));if(d instanceof t){let e=[],t=[];for(let n=0;n<d.rings.length;n++)if(d.isClockwise(d.rings[n])){let t=s({rings:[d.rings[n]],hasZ:!0===d.hasZ,hasM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});e.push(t)}else t.push({ring:d.rings[n],pt:d.getPoint(n,0)});for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)if(e[r].contains(t[n].pt)){e[r].addRing(t[n].ring);break}return e}if(d instanceof m){let e=[];for(let t=0;t<d.paths.length;t++){let n=s({paths:[d.paths[t]],hasZ:!0===d.hasZ,hasM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});e.push(n)}return e}if(u[0]instanceof a){let t=[],n=A(o(u[0]),e.spatialReference);for(let e=0;e<n.points.length;e++)t.push(n.getPoint(e));return t}return null})},i.functions.isselfintersecting=function(e,n){return i.standardFunctionAsync(e,n,async(e,n,r)=>{v(r,1,1,e,n);let i=(r=b(r))[0];if((c(r[0])||w(r[0]))&&(i=E(r[0],e.spatialReference)),i instanceof a){let e=i.points;for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(l(e[t],e[n]))return!0;return!1}return(i instanceof m||i instanceof t)&&await U(`isSelfIntersecting`,[i.toJSON()])})},i.functions.issimple=function(e,t){return i.standardFunctionAsync(e,t,(n,i,a)=>{if(a=b(a),v(a,1,1,e,t),a[0]===null)return!0;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);return U(`isSimple`,[a[0].toJSON()])})},i.functions.simplify=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,1,1,e,t),a[0]===null)return null;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);return s(await U(`simplify`,[a[0].toJSON()]))})},i.functions.convexhull=function(e,t){return i.standardFunctionAsync(e,t,async(n,i,a)=>{if(a=b(a),v(a,1,1,e,t),a[0]===null)return null;if(!(a[0]instanceof r))throw new p(e,`InvalidParameter`,t);return s(await U(`convexHull`,[a[0].toJSON()]))})},i.functions.getuser=function(e,t){return i.standardFunctionAsync(e,t,async(n,r,i)=>{v(i,0,2,e,t);let a=C(i[1],``),o=!0===a;if(a=!0===a||!1===a?``:g(a),i.length===0||i[0]instanceof V){let t;t=e.services?.portal?e.services.portal:u.getDefault(),i.length>0&&(t=H(i[0],t));let n=await W(t,a,o);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return k.convertObjectToArcadeDictionary(t,M(e))}return null}let s=null;if(O(i[0])&&(s=i[0]),s){if(o=!1,a)return null;await s.load();let t=await s.getOwningSystemUrl();if(!t){if(!a){let t=await s.getIdentityUser();return t?k.convertObjectToArcadeDictionary({username:t},M(e)):null}return null}let n;n=e.services?.portal?e.services.portal:u.getDefault(),n=H(new V(t),n);let r=await W(n,a,o);if(r){let t=JSON.parse(JSON.stringify(r));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return k.convertObjectToArcadeDictionary(t,M(e))}return null}throw new p(e,`InvalidParameter`,t)})},i.functions.nearestcoordinate=function(e,a){return i.standardFunctionAsync(e,a,async(i,o,c)=>{if(c=b(c),v(c,2,2,e,a),!(c[0]instanceof r||c[0]===null)||!(c[1]instanceof n||c[1]===null))throw new p(e,`InvalidParameter`,a);if(c[0]===null||c[1]===null)return null;let l=c[0]instanceof f?t.fromExtent(c[0]):c[0],u=await U(`getNearestCoordinate`,[l.toJSON(),c[1].toJSON(),{calculateLeftRightSide:!0}]);return u===null?null:k.convertObjectToArcadeDictionary({coordinate:s(u.coordinate),distance:u.distance,sideOfLine:u.distance===0?`straddle`:u.isRightSide?`right`:`left`},M(e),!1,!0)})},i.functions.nearestvertex=function(e,a){return i.standardFunctionAsync(e,a,async(i,o,c)=>{if(c=b(c),v(c,2,2,e,a),!(c[0]instanceof r||c[0]===null)||!(c[1]instanceof n||c[1]===null))throw new p(e,`InvalidParameter`,a);if(c[0]===null||c[1]===null)return null;let l=c[0]instanceof f?t.fromExtent(c[0]):c[0],u=await U(`getNearestVertex`,[l.toJSON(),c[1].toJSON()]);return u==null?null:k.convertObjectToArcadeDictionary({coordinate:s(u.coordinate),distance:u.distance,sideOfLine:u.sideOfLine},M(e),!1,!0)})})}export{K as t};