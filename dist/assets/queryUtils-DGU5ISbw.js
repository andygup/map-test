const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodesicBufferOperator-qds9PumE.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css","assets/SimpleGeometryCursor-BILtMaQf.js","assets/operatorGeodesicBuffer-CSjmuXWg.js","assets/geodeticCurveType-CcdKHJt5.js"])))=>i.map(i=>d[i]);
import{$S as e,$T as t,AS as n,Av as r,DS as i,Jg as a,LS as o,MS as s,Nv as c,Ox as l,Pv as u,SS as d,Vg as f,Xw as p,jx as m,kv as h,kx as g,lS as _,qT as v,sD as y,uy as b,xu as x,zg as S}from"./index-BN8X5Ryz.js";var C=[0,0];function w(e,t){if(!t)return null;if(`x`in t){let n={x:0,y:0};return[n.x,n.y]=e(t.x,t.y,C),t.z!=null&&(n.z=t.z),t.m!=null&&(n.m=t.m),n}if(`xmin`in t){let n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=e(t.xmin,t.ymin,C),[n.xmax,n.ymax]=e(t.xmax,t.ymax,C),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return`rings`in t?{rings:T(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:`paths`in t?{paths:T(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:`points`in t?{points:E(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function T(e,t){let n=[];for(let r of e)n.push(E(r,t));return n}function E(e,t){let n=[];for(let r of e){let e=t(r[0],r[1],[0,0]);n.push(e),r.length>2&&e.push(r[2]),r.length>3&&e.push(r[3])}return n}async function D(e,t){if(!e||!t)return;let n=Array.isArray(e)?e.map(e=>e.geometry==null?null:e.geometry.spatialReference).filter(y):[e];await f(n.map(e=>({source:e,dest:t})))}var O=w.bind(null,m),k=w.bind(null,g);function A(e,t,r,i){if(!e)return null;if(r||(r=t,t=e.spatialReference),!s(t)||!s(r)||n(t,r))return e;if(l(t,r)){let t=o(r)?O(e):k(e);return t.spatialReference=r,t}return a([e],t,r,i)[0]}var j=new class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,r,i){if(!e?.length||!t||!r||n(t,r))return e;let a={geometries:e,inSpatialReference:t,outSpatialReference:r,options:i,resolve:p()};return this._jobs.push(a),this._timer??=setTimeout(this._process,10),a.resolve.promise}_process(){this._timer=null;let e=(this._jobs.shift());if(!e)return;let{geometries:t,inSpatialReference:n,outSpatialReference:r,resolve:i,options:s}=e;l(n,r)&&s?.extendedParams==null?o(r)?i(t.map(O)):i(t.map(k)):i(a(t,n,r,s)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function M(e,t,n,r){return j.push(e,t,n,r)}var N=new v({esriSRUnit_Meter:`meters`,esriSRUnit_Kilometer:`kilometers`,esriSRUnit_Foot:`feet`,esriSRUnit_StatuteMile:`miles`,esriSRUnit_NauticalMile:`nautical-miles`,esriSRUnit_USNauticalMile:`us-nautical-miles`}),P=Object.freeze({}),F=`frequency`;async function I(e,t,n){let r=e.bin;return r.onField&&=r.onField.trim(),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),`normalizationField`in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),e.outStatistics?.length||(e.outStatistics=[{statisticType:`count`,onStatisticField:`1`,outStatisticFieldName:F}]),L(e,t,n)}async function L(e,t,n){let{outFields:r,orderByFields:i,groupByFieldsForStatistics:a,outStatistics:o}=e;if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(i)for(let e=0;e<i.length;e++)i[e]=i[e].trim();if(a)for(let e=0;e<a.length;e++)a[e]=a[e].trim();if(o)for(let e=0;e<o.length;e++)o[e].onStatisticField&&(o[e].onStatisticField=o[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),R(e,t,n)}async function R(e,t,n){if(!e)return null;let{where:r}=e;if(e.where=r=r?.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let i=await V(e);if(e.distance=0,e.units=null,e.spatialRel===`esriSpatialRelEnvelopeIntersects`){let{spatialReference:t}=e.geometry;i=b(i),i.spatialReference=t}if(i){await D(i.spatialReference,n),i=B(i,n);let t=(await x(h(i)))[0];if(t==null)throw P;let r=`quantizationParameters`in e&&e.quantizationParameters?.tolerance||`maxAllowableOffset`in e&&e.maxAllowableOffset||0,a=r&&z(i,n)?{extendedParams:{densificationStep:8*r}}:void 0,o=t.toJSON(),s=A(o,o.spatialReference,n,a);if(!s)throw P;s.spatialReference=n,e.geometry=s}return e}function z(e,t){if(!e)return!1;let i=e.spatialReference;return(c(e)||u(e)||r(e))&&!n(i,t)&&!S(i,t)}function B(e,t){let n=e.spatialReference;return z(e,t)&&c(e)?{spatialReference:n,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function V(n){let{distance:r,units:a}=n,s=n.geometry;if(r==null||`vertexAttributes`in s)return s;let c=s.spatialReference,l=a?N.fromJSON(a):_(c),f=c&&(d(c)||o(c))?s:await D(c,i).then(()=>A(s,i)),p=await e(()=>import(`./geodesicBufferOperator-qds9PumE.js`),__vite__mapDeps([0,1,2,3,4,5]));await p.load();let m=p.execute(f,r||1,{unit:l})??void 0;if(!m||!u(m)||m.rings.length===0)throw new t(`unsupported-query:invalid-parameters`,`Invalid parameters for query by distance`);return m}function H(e,t){return e==null?null:typeof e==`string`?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}export{R as a,D as c,L as i,A as l,N as n,I as o,H as r,M as s,P as t};