import{AE as e,Bv as t,Ex as n,Ix as r,Lx as i,Qv as a,Qw as o,_n as s,am as c,cm as l,cy as u,dm as d,ev as ee,gC as te,gn as ne,kv as re,lm as f,om as p,pn as ie,q_ as ae,sm as oe,um as se,vn as m,vx as ce,wn as h,zv as le}from"./index-BN8X5Ryz.js";import{t as g}from"./ImmutableArray-C3KNQCVd.js";import{f as ue,t as de}from"./shared-Bq4SQ-mm.js";import{n as fe,r as pe}from"./number-bRvGjlJj.js";var _=class{},v=class{constructor(){}};function y(e,t,n){if(e instanceof v&&!(e instanceof b)){let r=new b;return r.fn=e,r.parameterEvaluator=n,r.context=t,r}return e}var me=class extends v{constructor(e){super(),this.fn=e}createFunction(e){return(...t)=>this.fn(e,{preparsed:!0,arguments:t})}call(e,t){return this.fn(e,t)}marshalledCall(e,t,n,r){return r(e,t,(t,i,a)=>{a=a.map(t=>t instanceof v&&!(t instanceof b)?y(t,e,r):t);let s=this.call(n,{args:a});return o(s)?s.then(e=>y(e,n,r)):s})}},b=class extends v{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(e){return this.fn.createFunction(this.context)}call(e,t){return this.fn.marshalledCall(e,t,this.context,this.parameterEvaluator)}marshalledCall(e,t,n){return this.fn.marshalledCall(e,t,this.context,this.parameterEvaluator)}},x=class e extends g{constructor(e,t,n,r,i,a){super(e),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=t,this._hasZ=n,this._hasM=r,this._cacheId=i,this._partId=a}get(e){if(this._lazyPt[e]===void 0){let t=this._elements[e];if(t===void 0)return;let r=new n(t[0],t[1],this._spRef);this._hasZ&&(r.z=t[2]),this._hasM&&(r.m=this._hasZ?t[3]:t[2]),r.cache._arcadeCacheId=this._cacheId.toString()+`-`+this._partId.toString()+`-`+e.toString(),this._lazyPt[e]=r}return this._lazyPt[e]}equalityTest(t){return t===this||t!==null&&t instanceof e!=0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+`-`+this._partId.toString()}},he=class e extends g{constructor(e,t,n,r,i){super(e),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=n,this._hasM=r,this._spRef=t,this._cacheId=i}get(e){if(this._lazyPath[e]===void 0){let t=this._elements[e];if(t===void 0)return;this._lazyPath[e]=new x(t,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]}equalityTest(t){return t===this||t!==null&&t instanceof e!=0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}},ge=class{constructor(e){this.value=e}},_e=class{constructor(e){this.value=e}},S={type:`VOID`},ve=Symbol(`BREAK`),ye=Symbol(`CONTINUE`);function C(e,t,n){return t===``||t==null||t===n||t===n?e:e=e.split(t).join(n)}function w(e){return e instanceof v}function T(e){return e instanceof _}function E(e){return!!p(e)||!!l(e)||!!L(e)||!!R(e)||!!z(e)||!!d(e)||e===null||e===S}function be(e,t){return e===void 0?t:e}function xe(e){return e==null?``:f(e)||I(e)?`Array`:L(e)?`Date`:z(e)?`Time`:R(e)?`DateOnly`:p(e)?`String`:d(e)?`Boolean`:l(e)?`Number`:e?.declaredClass===`esri.arcade.Attachment`?`Attachment`:e?.declaredClass===`esri.arcade.Portal`?`Portal`:e?.declaredClass===`esri.arcade.Dictionary`?`Dictionary`:F(e)?`KnowledgeGraph`:e instanceof _?`Module`:k(e)?`Feature`:e instanceof n?`Point`:e instanceof t?`Polygon`:e instanceof le?`Polyline`:e instanceof u?`Multipoint`:e instanceof ce?`Extent`:w(e)?`Function`:M(e)?`FeatureSet`:P(e)?`FeatureSetCollection`:A(e)?`Voxel`:j(e)?`Pixel`:e===S?``:typeof e==`number`&&isNaN(e)?`Number`:`Unrecognized Type`}function D(e){return e===S}function O(e){return e instanceof r}function k(e){return e?.arcadeDeclaredClass===`esri.arcade.Feature`}function A(e){return e?.arcadeDeclaredClass===`esri.arcade.Voxel`}function j(e){return e?.arcadeDeclaredClass===`esri.arcade.Pixel`}function M(e){return e?.declaredRootClass===`esri.arcade.featureset.support.FeatureSet`}function N(e){return e?.declaredClass===`esri.arcade.Dictionary`}function Se(e){return N(e)||k(e)||A(e)||j(e)}function P(e){return e?.declaredRootClass===`esri.arcade.featureSetCollection`}function F(e){return e?.declaredClass===`esri.rest.knowledgeGraph.KnowledgeGraph`}function I(e){return e instanceof g}function L(e){return e instanceof m}function R(e){return e instanceof ne}function z(e){return e instanceof ie}function B(e){return typeof e==`object`&&!!e}function Ce(e,t,n,r,i){if(e.length<t||e.length>n)throw new h(r,`WrongNumberOfParameters`,i)}function we(e){return e==null||D(e)||e===``}function Te(e){return e<0?-Math.round(-e):Math.round(e)}function V(e,t){return isNaN(e)||t==null||t===``?e.toString():(t=C(t,`‰`,``),t=C(t,`¤`,``),fe(e,{pattern:t}))}function H(e,t){return t==null||t===``?e.toISOString(!0):e.toFormat(Ee(t),{locale:ee(),numberingSystem:`latn`})}function Ee(e,t=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,`[$&]`);let n=``;for(let r of e.match(/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g)||[])switch(r){case`D`:n+=`d`;break;case`DD`:n+=`dd`;break;case`DDD`:n+=`o`;break;case`d`:n+=`c`;break;case`ddd`:n+=`ccc`;break;case`dddd`:n+=`cccc`;break;case`M`:n+=`L`;break;case`MM`:n+=`LL`;break;case`MMM`:n+=`LLL`;break;case`MMMM`:n+=`LLLL`;break;case`YY`:n+=`yy`;break;case`Y`:case`YYYY`:n+=`yyyy`;break;case`Q`:n+=`q`;break;case`Z`:n+=`Z`;break;case`ZZ`:n+=`ZZ`;break;case`ZZZ`:n+=`ZZZ`;break;case`ZZZZ`:n+=t?`[ZZZZ]`:`ZZZZ`;break;case`ZZZZZ`:n+=t?`[ZZZZZ]`:`ZZZZZ`;break;case`S`:n+=`'S'`;break;case`SS`:n+=`'SS'`;break;case`SSS`:n+=`u`;break;case`A`:case`a`:n+=`a`;break;case`m`:case`mm`:case`h`:case`hh`:case`H`:case`HH`:case`s`:case`ss`:case`X`:case`x`:n+=r;break;default:r.length>=2&&r.startsWith(`[`)&&r.endsWith(`]`)?n+=`'${r.slice(1,-1)}'`:n+=`'${r}'`}return n}function U(e,t,n){switch(n){case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}return!1}function De(e,t,n){if(e===null){if(t===null||t===S)return U(null,null,n);if(l(t))return U(0,t,n);if(p(t)||d(t))return U(0,q(t),n);if(L(t))return U(0,t.toNumber(),n);if(z(t)||R(t))return U(e,t.toNumber(),n)}if(e===S){if(t===null||t===S)return U(null,null,n);if(l(t))return U(0,t,n);if(p(t)||d(t))return U(0,q(t),n);if(L(t))return U(0,t.toNumber(),n);if(z(t)||R(t))return U(e,t.toNumber(),n)}else if(l(e)){if(l(t))return U(e,t,n);if(d(t))return U(e,q(t),n);if(t===null||t===S)return U(e,0,n);if(p(t))return U(e,q(t),n);if(L(t)||z(t)||R(t))return U(e,t.toNumber(),n)}else if(p(e)){if(p(t))return U(W(e),W(t),n);if(L(t)||z(t)||R(t))return U(q(e),t.toNumber(),n);if(l(t))return U(q(e),t,n);if(t===null||t===S)return U(q(e),0,n);if(d(t))return U(q(e),q(t),n)}else if(L(e)){if(L(t))return e.timeZone!==t.timeZone&&(e.isUnknownTimeZone?e=m.arcadeDateAndZoneToArcadeDate(e,t.timeZone):t.isUnknownTimeZone&&(t=m.arcadeDateAndZoneToArcadeDate(t,e.timeZone))),U(e.toNumber(),t.toNumber(),n);if(t===null||t===S)return U(e.toNumber(),0,n);if(l(t))return U(e.toNumber(),t,n);if(d(t)||p(t))return U(e.toNumber(),q(t),n);if(z(t))throw new h(null,`CannotCompareDateAndTime`,null);if(R(t))return U(e.toNumber(),t.toNumber(),n)}else if(d(e)){if(d(t))return U(e,t,n);if(l(t))return U(q(e),q(t),n);if(L(t)||z(t)||R(t))return U(q(e),t.toNumber(),n);if(t===null||t===S)return U(q(e),0,n);if(p(t))return U(q(e),q(t),n)}else if(R(e)){if(L(t))return U(e.toNumber(),t.toNumber(),n);if(t===null||t===S)return U(e.toNumber(),0,n);if(l(t))return U(e.toNumber(),t,n);if(d(t)||p(t))return U(e.toNumber(),q(t),n);if(z(t))throw new h(null,`CannotCompareDateAndTime`,null);if(R(t))return U(e.toNumber(),t.toNumber(),n)}else if(z(e)){if(L(t))throw new h(null,`CannotCompareDateAndTime`,null);if(t===null||t===S)return U(e.toNumber(),0,n);if(l(t))return U(e.toNumber(),t,n);if(d(t)||p(t))return U(e.toNumber(),q(t),n);if(z(t))return U(e.toNumber(),t.toNumber(),n);if(R(t))throw new h(null,`CannotCompareDateAndTime`,null)}return!!Oe(e,t)&&(n===`<=`||n===`>=`)}function Oe(e,t){if(e===t||e===null&&t===S||t===null&&e===S)return!0;if(L(e)&&L(t)||z(e)&&z(t)||R(e)&&R(t))return e.equals(t);if(e instanceof he||e instanceof x)return e.equalityTest(t);if(e instanceof n&&t instanceof n){let n=e.cache._arcadeCacheId,r=t.cache._arcadeCacheId;if(n!=null)return n===r}return!!(B(e)&&B(t)&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function ke(e,{useNumbersForDates:t}){let n=``;for(let r in e){n!==``&&(n+=`,`);let i=e[r];i==null?n+=JSON.stringify(r)+`:null`:d(i)||l(i)||p(i)?n+=JSON.stringify(r)+`:`+JSON.stringify(i):O(i)?n+=JSON.stringify(r)+`:`+G(i):z(i)||R(i)?n+=`${JSON.stringify(r)}:${JSON.stringify(i.toString())}`:I(i)||Array.isArray(i)?n+=JSON.stringify(r)+`:`+G(i,null,t):L(i)?n+=t?JSON.stringify(r)+`:`+JSON.stringify(i.getTime()):JSON.stringify(r)+`:`+i.stringify():typeof i==`object`&&i&&`castToText`in i&&(n+=JSON.stringify(r)+`:`+i.castToText(t))}return`{`+n+`}`}function W(e,t){if(p(e))return e;if(e===null)return``;if(l(e))return V(e,t);if(d(e))return e.toString();if(L(e))return H(e,t);if(z(e)||R(e))return e.toFormat(t);if(e instanceof r)return JSON.stringify(e.toJSON());if(f(e)){let t=[];for(let n=0;n<e.length;n++)t[n]=K(e[n]);return`[`+t.join(`,`)+`]`}if(e instanceof g){let t=[];for(let n=0;n<e.length();n++)t[n]=K(e.get(n));return`[`+t.join(`,`)+`]`}return typeof e==`object`&&e&&`castToText`in e?e.castToText():w(e)?`object, Function`:e===S?``:T(e)?`object, Module`:``}function Ae(e){let t=[];if(e instanceof g){for(let n=0;n<e.length();n++)t[n]=q(e.get(n));return t}if(!f(e))return null;for(let n=0;n<e.length;n++)t[n]=q(e[n]);return t}function G(e,t,n=!1){if(p(e))return e;if(e===null)return``;if(l(e))return V(e,t);if(d(e))return e.toString();if(L(e))return H(e,t);if(z(e)||R(e))return e.toFormat(t);if(e instanceof r)return e instanceof ce?`{"xmin":`+e.xmin.toString()+`,"ymin":`+e.ymin.toString()+`,`+(e.hasZ?`"zmin":`+e.zmin.toString()+`,`:``)+(e.hasM?`"mmin":`+e.mmin.toString()+`,`:``)+`"xmax":`+e.xmax.toString()+`,"ymax":`+e.ymax.toString()+`,`+(e.hasZ?`"zmax":`+e.zmax.toString()+`,`:``)+(e.hasM?`"mmax":`+e.mmax.toString()+`,`:``)+`"spatialReference":`+Be(e.spatialReference)+`}`:Be(e.toJSON(),(e,t)=>e.key===t.key?0:e.key===`spatialReference`?1:t.key===`spatialReference`||e.key<t.key?-1:e.key>t.key?1:0);if(f(e)){let t=[];for(let r=0;r<e.length;r++)t[r]=K(e[r],n);return`[`+t.join(`,`)+`]`}if(e instanceof g){let t=[];for(let r=0;r<e.length();r++)t[r]=K(e.get(r),n);return`[`+t.join(`,`)+`]`}return typeof e==`object`&&e&&`castToText`in e?e.castToText(n):w(e)?`object, Function`:e===S?``:T(e)?`object, Module`:``}function K(e,t=!1){if(e===null)return`null`;if(d(e)||p(e))return JSON.stringify(e);if(l(e))return e.toString();if(e instanceof r||e instanceof g||Array.isArray(e))return G(e,null,t);if(L(e))return t?JSON.stringify(e.getTime()):JSON.stringify(H(e,``));if(z(e)||R(e))return JSON.stringify(e.toString());if(typeof e==`object`&&e){if(`castToText`in e)return e.castToText(t)}else if(e===S)return`null`;return`null`}function q(e,t){return l(e)?e:e===null||e===``?0:L(e)||R(e)||z(e)?NaN:d(e)?e?1:0:f(e)||e===``||e===void 0?NaN:t!==void 0&&p(e)?(t=C(t,`‰`,``),t=C(t,`¤`,``),pe(e,{pattern:t})):e===S?0:Number(e)}function je(e,t){if(L(e))return e;if(p(e)){let n=Me(e,t);if(n)return m.dateTimeToArcadeDate(n)}return null}function Me(e,t){let n=/ (\d\d)/,r=s(t),i=ae.fromISO(e,{zone:r});return i.isValid||n.test(e)&&(e=e.replace(n,`T$1`),i=ae.fromISO(e,{zone:t}),i.isValid)?i:null}function Ne(e){return d(e)?e:p(e)?(e=e.toLowerCase())===`true`:!!l(e)&&e!==0&&!isNaN(e)}function Pe(e,t){let n=JSON.parse(e);return n&&!n.spatialReference&&(n.spatialReference=t),re(n)}function Fe(e,t){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Ie(e){if(e===null)return null;if(e instanceof n)return e.x===`NaN`||e.x===null||isNaN(e.x)?null:e;if(e instanceof t){if((e.curveRings??e.rings).length===0)return null;for(let t of e.curveRings??e.rings)if(t.length>0)return e;return null}if(e instanceof le){if((e.curvePaths??e.paths).length===0)return null;for(let t of e.curvePaths??e.paths)if(t.length>0)return e;return null}return e instanceof u?e.points.length===0?null:e:e instanceof ce?e.xmin===`NaN`||e.xmin===null||isNaN(e.xmin)?null:e:null}function Le(e,t){if(!e||!e.domain)return t;let n=null,r=null;if(L(t))n=t.toNumber();else if(R(t))n=t.toString();else if(z(t))n=t.toStorageString();else if(e.field.type===`string`||e.field.type===`esriFieldTypeString`)n=W(t);else{if(t==null)return null;if(t===``)return t;n=q(t)}for(let t=0;t<e.domain.codedValues.length;t++){let i=e.domain.codedValues[t];i.code===n&&(r=i)}return r===null?W(t):r.name}function Re(e,t){if(!e||!e.domain)return t;let n=null,r=W(t);for(let t=0;t<e.domain.codedValues.length;t++){let i=e.domain.codedValues[t];i.name===r&&(n=i)}return n===null?t:n.code}function J(e,t,n=null,r=null){if(!t||!t.fields)return null;let i,a,o=null;for(let n=0;n<t.fields.length;n++){let r=t.fields[n];r.name.toLowerCase()===e.toString().toLowerCase()&&(o=r)}if(o===null)throw new h(null,`FieldNotFound`,null,{key:e});let s=t.typeIdField,c=`id`,l=t.types;if(t.subtypeField&&(s=t.subtypeField,c=`code`,l=t.subtypes??[]),r===null&&n&&s)r=n.hasField(s)?n.field(s):null;else if(s&&r!==null){let e=!1;for(let t of l||[])if(r===t[c]){e=!0;break}if(!e){for(let t of l||[])if(r===t.name){r=t[c],e=!0;break}}e||(r=null,n&&s&&(r=n.hasField(s)?n.field(s):null))}return r!=null&&l.some(e=>e[c]===r&&(i=e.domains?.[o.name],i&&i.type===`inherited`&&(i=ze(o.name,t),a=!0),!0)),a||i||(i=ze(e,t)),{field:o,domain:i}}function ze(e,t){let n;return t.fields.some(t=>(t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n)),n}function Be(e,t){t||={},typeof t==`function`&&(t={cmp:t});let n=typeof t.cycles==`boolean`&&t.cycles,r=t.cmp&&(i=t.cmp,function(e){return function(t,n){let r={key:t,value:e[t]},a={key:n,value:e[n]};return i(r,a)}});var i;let a=[];return function e(t){if(t?.toJSON&&typeof t.toJSON==`function`&&(t=t.toJSON()),t===void 0)return;if(typeof t==`number`)return isFinite(t)?``+t:`null`;if(typeof t!=`object`)return JSON.stringify(t);let i,o;if(Array.isArray(t)){for(o=`[`,i=0;i<t.length;i++)i&&(o+=`,`),o+=e(t[i])||`null`;return o+`]`}if(t===null)return`null`;if(a.includes(t)){if(n)return JSON.stringify(`__cycle__`);throw TypeError(`Converting circular structure to JSON`)}let s=a.push(t)-1,c=Object.keys(t).sort(r?.(t));for(o=``,i=0;i<c.length;i++){let n=c[i],r=e(t[n]);r&&(o&&(o+=`,`),o+=JSON.stringify(n)+`:`+r)}return a.splice(s,1),`{`+o+`}`}(e)}function Ve(e){if(e===null)return null;let t=[];for(let n of e)k(n)?t.push(n.geometry()):t.push(n);return t}function Y(e,t){if(!(t instanceof n))throw new h(null,`InvalidParameter`,null);e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function He(e,n){if(f(e)||I(e)){let r=!1,i=!1,o=[],s=n;if(f(e)){for(let t of e)Y(o,t);o.length>0&&(s=e[0].spatialReference,r=e[0].hasZ,i=e[0].hasM)}else if(e instanceof x)o=e._elements,o.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else{if(!I(e))throw new h(null,`InvalidParameter`,null);for(let t of e.toArray())Y(o,t);o.length>0&&(s=e.get(0).spatialReference,r=!0===e.get(0).hasZ,i=!0===e.get(0).hasM)}return o.length===0?null:(a(o)||(o=o.slice().reverse()),new t({rings:[o],spatialReference:s,hasZ:r,hasM:i}))}return e}function Ue(e,t){if(f(e)||I(e)){let n=!1,r=!1,i=[],a=t;if(f(e)){for(let t of e)Y(i,t);i.length>0&&(a=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof x)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,a=e.get(0).spatialReference);else if(I(e)){for(let t of e.toArray())Y(i,t);i.length>0&&(a=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return i.length===0?null:new le({paths:[i],spatialReference:a,hasZ:n,hasM:r})}return e}function We(e,t){if(f(e)||I(e)){let n=!1,r=!1,i=[],a=t;if(f(e)){for(let t of e)Y(i,t);i.length>0&&(a=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof x)i=e._elements,i.length>0&&(n=e._hasZ,r=e._hasM,a=e.get(0).spatialReference);else if(I(e)){for(let t of e.toArray())Y(i,t);i.length>0&&(a=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return i.length===0?null:new u({points:i,spatialReference:a,hasZ:n,hasM:r})}return e}function Ge(e,t=!0){if(e==null)return[];if(f(e)){let n=[];for(let r of e){let e=W(r);(t||e!==``)&&n.push(e)}return n}if(I(e)){let n=[];for(let r=0;r<e.length();r++){let i=W(e.get(r));(t||i!==``)&&n.push(i)}return n}if(E(e)){let n=W(e);if(t||n!==``)return[n]}return[]}var Ke=0;function qe(){return Ke++,Ke%100==0?(Ke=0,new Promise(e=>{setTimeout(()=>{e()},0)})):Promise.resolve()}function Je(e,t,n){switch(n){case`&`:return e&t;case`|`:return e|t;case`^`:return e^t;case`<<`:return e<<t;case`>>`:return e>>t;case`>>>`:return e>>>t}}function X(e,t=null){return e==null?null:d(e)||l(e)||p(e)?e:e instanceof r?!0===t?.keepGeometryType?e:e.toJSON():e instanceof g?e.toArray().map(e=>X(e,t)):Array.isArray(e)?e.map(e=>X(e,t)):c(e)?e:L(e)?e.toJSDate():z(e)?e.toString():R(e)?e.toJSDate():typeof e==`object`&&e&&e.castAsJson!==void 0?e.castAsJson(t):null}async function Ye(e,t,n,r,i){i[r]=await Xe(e,t,n)}async function Xe(e,t=null,n=null){if(e instanceof g&&(e=e.toArray()),e==null)return null;if(E(e)||e instanceof r||c(e)||L(e))return X(e,n);if(Array.isArray(e)){let i=[],a=[];for(let o of e)o===null||E(o)||o instanceof r||c(o)||L(o)?a.push(X(o,n)):(a.push(null),i.push(Ye(o,t,n,a.length-1,a)));return i.length>0&&await Promise.all(i),a}return typeof e==`object`&&e&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,n):null}function Z(e){return Ze(e)?e.parent:e}function Ze(e){return e&&`declaredClass`in e&&e.declaredClass===`esri.layers.support.SubtypeSublayer`}function Qe(e){return e&&`declaredClass`in e&&e.declaredClass===`esri.layers.SubtypeGroupLayer`}function $e(e,t,n){let r=Z(e.fullSchema());return r===null||!r.fields?null:J(t,r,e,n)}function et(e){let t=Z(e.fullSchema());return t===null?null:t.fields?t.subtypeField?{subtypeField:t.subtypeField,subtypes:t.subtypes?t.subtypes.map(e=>({name:e.name,code:e.code})):[]}:t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(e=>({name:e.name,code:e.id})):[]}:null:null}function tt(e,t,n,r){let i=Z(e.fullSchema());if(i===null||!i.fields)return null;let a=J(t,i,e,r);if(n===void 0)try{n=e.field(t)}catch{return null}return Le(a,n)}function nt(e,t,n,r){let i=Z(e.fullSchema());if(i===null||!i.fields)return null;if(n===void 0){try{n=e.field(t)}catch{return null}return n}return Re(J(t,i,e,r),n)}function rt(e){return e?.timeZone??`system`}function it(e){let t=Z(e.fullSchema());if(t===null||!t.fields)return null;let n=[];for(let e of t.fields)n.push(ue(e));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField??``,geometryType:de[t.geometryType]===void 0?``:de[t.geometryType],fields:n}}function at(t,n){let r=m.systemTimeZoneCanonicalName;return t===`system`&&(t=r),{version:ot,engineVersion:`5.0`,timeZone:t,userTimeZone:r,spatialReference:n instanceof i?n.toJSON():n,application:e.applicationName??``,engine:`web`,locale:ee()}}var ot=`1.34`,st=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:_e,ReturnResult:ge,absRound:Te,arcadeVersion:ot,autoCastArrayOfPointsToMultiPoint:We,autoCastArrayOfPointsToPolygon:He,autoCastArrayOfPointsToPolyline:Ue,autoCastFeatureToGeometry:Ve,binaryOperator:Je,breakResult:ve,castAsJson:X,castAsJsonAsync:Xe,castRecordToText:ke,continueResult:ye,defaultExecutingContext:at,defaultTimeZone:rt,defaultUndefined:be,equalityTest:Oe,featureDomainCodeLookup:nt,featureDomainValueLookup:tt,featureFullDomain:$e,featureSchema:it,featureSubtypes:et,fixNullGeometry:Ie,fixSpatialReference:Fe,formatDate:H,formatNumber:V,getDomain:J,getDomainCode:Re,getDomainValue:Le,getType:xe,greaterThanLessThan:De,isArray:f,isBoolean:d,isDate:L,isDateOnly:R,isDictionary:N,isDictionaryLike:Se,isEmpty:we,isFeature:k,isFeatureSet:M,isFeatureSetCollection:P,isFunctionParameter:w,isGeometry:O,isGraphic:oe,isImmutableArray:I,isInteger:se,isJsDate:c,isKnowledgeGraph:F,isModule:T,isNumber:l,isObject:B,isPixel:j,isSimpleType:E,isString:p,isSubtypeGrouplayer:Qe,isSubtypeSublayer:Ze,isTime:z,isVoid:D,isVoxel:A,multiReplace:C,parseGeometryFromJson:Pe,pcCheck:Ce,stableStringify:Be,standardiseDateFormat:Ee,tick:qe,toBoolean:Ne,toDate:je,toNumber:q,toNumberArray:Ae,toString:W,toStringArray:Ge,toStringExplicit:G,voidOperation:S},Symbol.toStringTag,{value:`Module`}));function ct(e){lt=e}var lt;function Q(e){return e===null?null:L(e)?e.clone():E(e)?e:O(e)?e.clone():I(e)?e.toArray().map(e=>Q(e)):f(e)?e.map(e=>Q(e)):k(e)?lt.createFromArcadeFeature(e):P(e)||M(e)?e:N(e)||e?.declaredClass===`esri.arcade.Attachment`?e.deepClone():(e?.declaredClass===`esri.arcade.Portal`||F(e)||e instanceof _||w(e),e)}function $(e,t,n=!1,r=!1){if(e==null)return null;if(l(e)||d(e)||p(e)||L(e)||R(e)||z(e))return e;if(f(e)){let i=[];for(let a of e)i.push($(a,t,n,r));return i}if(r&&O(e))return e;let i=new ut;i.immutable=!1;for(let[a,o]of Object.entries(e))o!==void 0&&i.setField(a,$(o,t,n,r));return i.immutable=n,i}var ut=class e{constructor(t){this.declaredClass=`esri.arcade.Dictionary`,this.plain=!1,this.immutable=!0,t instanceof e?this.attributes=t.attributes:t==null?this.attributes=Object.create(null):Object.getPrototypeOf(t)==null?this.attributes=t:this.attributes={__proto__:null,...t}}static containerEntry(t,n){return new e({__proto__:null,key:t,value:n})}static textFormatting(){let t=new e({__proto__:null,newline:`
`,tab:`	`,singlequote:`'`,doublequote:`"`,forwardslash:`/`,backwardslash:`\\`});return t.immutable=!1,t}field(e){let t=e.toLowerCase(),n=this.attributes[e];if(n!==void 0)return n;for(let e in this.attributes)if(e.toLowerCase()===t)return this.attributes[e];throw new h(null,`FieldNotFound`,null,{key:e})}setField(e,t){if(this.immutable)throw new h(null,`Immutable`,null);if(w(t))throw new h(null,`NoFunctionInDictionary`,null);let n=e.toLowerCase();if(t instanceof Date&&(t=m.dateJSToArcadeDate(t)),this.attributes[e]===void 0){for(let e in this.attributes)if(e.toLowerCase()===n)return void(this.attributes[e]=t);this.attributes[e]=t}else this.attributes[e]=t}eraseField(e){if(this.immutable)throw new h(null,`Immutable`,null);if(e in this.attributes)return void delete this.attributes[e];let t=e.toLowerCase();for(let e in this.attributes)if(e.toLowerCase()===t)return void delete this.attributes[e]}hasField(e){let t=e.toLowerCase();if(this.attributes[e]!==void 0)return!0;for(let e in this.attributes)if(e.toLowerCase()===t)return!0;return!1}keys(){let e=[];for(let t in this.attributes)e.push(t);return e=e.sort(),e}values(){return this.keys().map(e=>this.attributes[e])}entryCount(){return Object.keys(this.attributes).length}isEmpty(){return this.entryCount()<=0}castToText(e=!1){return ke(this.attributes,{useNumbersForDates:e})}static convertObjectToArcadeDictionary(t,n,r=!0,i=!1){let a=new e;for(let e in a.immutable=!1,t){let o=t[e];o!==void 0&&a.setField(e.toString(),$(o,n,r,i))}return a.immutable=r,a}static convertJsonToArcade(e,t,n=!1,r=!1){return $(e,t,n,r)}castAsJson(e=null){let t=Object.create(null);for(let n in this.attributes){let r=this.attributes[n];r!==void 0&&(e?.keyTranslate&&(n=e.keyTranslate(n)),t[n]=X(r,e))}return t}async castDictionaryValueAsJsonAsync(e,t,n,r=null,i){let a=await Xe(n,r,i);return e[t]=a,a}async castAsJsonAsync(e=null,t=null){let n=Object.create(null),i=[];for(let a in this.attributes){let o=this.attributes[a];t?.keyTranslate&&(a=t.keyTranslate(a)),o!==void 0&&(E(o)||o instanceof r||o instanceof m?n[a]=X(o,t):i.push(this.castDictionaryValueAsJsonAsync(n,a,o,e,t)))}return i.length>0&&await Promise.all(i),n}deepClone(){let t=new e;t.immutable=!1;for(let e of this.keys())t.setField(e,Q(this.field(e)));return t}};export{Ze as $,O as A,Ge as B,S as C,ge as D,it as E,at as F,W as G,Ee as H,C as I,Ie as J,Ae as K,qe as L,A as M,et as N,He as O,P,D as Q,je as R,Re as S,Se as T,De as U,G as V,F as W,Ce as X,L as Y,ke as Z,Ve as _,tt as a,_e as at,w as b,nt as c,Oe as ct,xe as d,x as dt,R as et,T as f,me as ft,ye as g,_ as gt,$e as h,b as ht,j as i,we as it,E as j,q as k,J as l,be as lt,k as m,v as mt,Q as n,I as nt,Ne as o,Ue as ot,X as p,y as pt,z as q,ct as r,st as rt,M as s,Le as st,ut as t,Te as tt,Fe as u,he as ut,N as v,We as w,Je as x,rt as y,ve as z};