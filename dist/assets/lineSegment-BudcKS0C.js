import{C_ as e,Fl as t,Hl as n,Nl as r,Ul as i,Wl as a,kl as o,ww as s,xl as c,y_ as l}from"./index-BN8X5Ryz.js";import{t as u}from"./vectorStacks-Cuo89CNO.js";import{t as d}from"./ObjectStack-l5kM7JZu.js";function f(t){return t?{origin:e(t.origin),vector:e(t.vector)}:{origin:l(),vector:l()}}function p(e,t){let n=T.get();return n.origin=e,n.vector=t,n}function m(e,t=f()){return h(e.origin,e.vector,t)}function h(e,t,r=f()){return n(r.origin,e),n(r.vector,t),r}function g(e,t,r=f()){return n(r.origin,e),o(r.vector,t,e),r}function _(e,t){let n=o(u.get(),t,e.origin),i=c(e.vector,n),a=c(e.vector,e.vector),l=s(i/a,0,1),d=o(u.get(),r(u.get(),e.vector,l),n);return c(d,d)}function v(e,t,n){return b(e,t,0,1,n)}function y(e,t,n){return i(n,e.origin,r(n,e.vector,t))}function b(e,n,a,l,d){let{vector:f,origin:p}=e,m=o(u.get(),n,p),h=c(f,m)/t(f);return r(d,f,s(h,a,l)),i(d,d,e.origin)}function x(e,t){if(C(e,p(t.origin,t.direction),!1,w)){let{tA:t,pB:n,distance2:r}=w;if(t>=0&&t<=1)return r;if(t<0)return a(e.origin,n);if(t>1)return a(i(u.get(),e.origin,e.vector),n)}return null}function S(e,t,r){return!!C(e,t,!0,w)&&(n(r,w.pA),!0)}function C(e,t,n,r){let o=1e-6,c=e.origin,l=i(u.get(),c,e.vector),d=t.origin,f=i(u.get(),d,t.vector),p=u.get(),m=u.get();if(p[0]=c[0]-d[0],p[1]=c[1]-d[1],p[2]=c[2]-d[2],m[0]=f[0]-d[0],m[1]=f[1]-d[1],m[2]=f[2]-d[2],Math.abs(m[0])<o&&Math.abs(m[1])<o&&Math.abs(m[2])<o)return!1;let h=u.get();if(h[0]=l[0]-c[0],h[1]=l[1]-c[1],h[2]=l[2]-c[2],Math.abs(h[0])<o&&Math.abs(h[1])<o&&Math.abs(h[2])<o)return!1;let g=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],_=m[0]*h[0]+m[1]*h[1]+m[2]*h[2],v=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],y=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],b=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*y-_*_;if(Math.abs(b)<o)return!1;let x=(g*_-v*y)/b,S=(g+_*x)/y;n&&(x=s(x,0,1),S=s(S,0,1));let C=u.get(),w=u.get();return C[0]=c[0]+x*h[0],C[1]=c[1]+x*h[1],C[2]=c[2]+x*h[2],w[0]=d[0]+S*m[0],w[1]=d[1]+S*m[1],w[2]=d[2]+S*m[2],r.tA=x,r.tB=S,r.pA=C,r.pB=w,r.distance2=a(C,w),!0}var w={tA:0,tB:0,pA:l(),pB:l(),distance2:0},T=new d(()=>f());export{x as a,y as c,f as d,h as i,p as l,S as n,g as o,v as r,_ as s,b as t,m as u};