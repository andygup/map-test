const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodeticDistanceOperator-DEdPXvs3.js","assets/index-BN8X5Ryz.js","assets/index-CWJhHB6-.css","assets/geodeticCurveType-CcdKHJt5.js"])))=>i.map(i=>d[i]);
import{$S as e,Bv as t,CE as n,DT as r,Dw as i,Ex as a,Fw as o,Ix as s,Lw as c,Lx as l,Qv as u,Qw as d,Tn as ee,_n as te,bn as ne,cm as f,cy as re,dm as p,ev as ie,gn as m,kv as h,lh as ae,lm as g,om as _,pn as v,q_ as oe,qh as se,um as y,vn as b,vx as ce,wC as le,wn as x,yn as ue,zv as de}from"./index-BN8X5Ryz.js";import{t as S}from"./arcadeEnvironment-DUP-IKH2.js";import{t as fe}from"./ImmutableArray-C3KNQCVd.js";import{A as pe,C,E as me,F as he,G as w,H as ge,I as _e,J as ve,M as ye,N as be,P as xe,R as T,T as Se,V as Ce,X as E,Y as D,_ as we,a as Te,b as Ee,c as De,ct as Oe,d as ke,dt as Ae,et as O,h as je,i as Me,it as Ne,j as Pe,k,lt as A,m as j,n as Fe,nt as M,o as Ie,q as N,s as Le,t as P,tt as Re,u as F,v as I,y as L}from"./Dictionary-Db5-uVgu.js";import{o as ze}from"./shared-Bq4SQ-mm.js";import{r as Be}from"./number-bRvGjlJj.js";import{i as R,n as z}from"./Feature-BbsZTluv.js";import{i as Ve,r as He,t as Ue}from"./containerUtils-BDF13TJN.js";import{i as We,t as Ge}from"./WhereClause-CATd9kVz.js";import{r as Ke}from"./streamLayerUtils-82UmlW-3.js";import{a as qe,i as Je,l as Ye,o as Xe}from"./measures-DjCw0e_k.js";import{t as Ze}from"./fieldStats-BspZIJTx.js";import{t as Qe}from"./ArcadePortal-CBZerHI1.js";import{t as $e}from"./Attachment-BDp8KxLR.js";var et=class{constructor(e,t){this._moduleSingletons=e,this._syntaxModules=t}loadLibrary(e){if(this._syntaxModules==null)return null;let t=this._syntaxModules[e];return t?{syntax:t.script,uri:t.uri}:null}},tt=()=>n.getLogger(`esri.arcade.compilerUtils`);function B(e,t,n){switch(e.type){case`VariableDeclaration`:for(let n of e.declarations)t.add(S(n.id));return;case`BlockStatement`:for(let r of e.body)B(r,t,n);return;case`ExportNamedDeclaration`:{let r=new Set;B(e.declaration,r,n);for(let e of r)t.add(e),n.add(e);return}case`ForInStatement`:case`ForOfStatement`:e.left.type===`VariableDeclaration`&&B(e.left,t,n),B(e.body,t,n);return;case`ForStatement`:e.init?.type===`VariableDeclaration`&&B(e.init,t,n),B(e.body,t,n);return;case`FunctionDeclaration`:t.add(S(e.id));return;case`IfStatement`:B(e.consequent,t,n),e.alternate&&B(e.alternate,t,n);return;case`ImportDeclaration`:for(let n of e.specifiers)t.add(S(n.local));return;case`WhileStatement`:B(e.body,t,n);return;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`ExpressionStatement`:case`ReturnStatement`:return}}function nt(e){let t=new Set,n=new Set;for(let r of e.body)B(r,t,n);if(!c(n,t))throw tt().error(`Internal error: exported undeclared symbols {${Array.from(o(n,t)).join(`, `)}}`),new ee(null,`NeverReach`,null);return{globals:t,exports:n}}function rt(e){let t=new Set,n=new Set;if(B(e.body,t,n),n.size>0)throw tt().error(`Internal error: cannot export locals {${Array.from(n.values()).join(`, `)}}`),new ee(null,`NeverReach`,null);return t}function it(e){let t=[],n=[],r=e.expression;for(;;)switch(r.type){case`MemberExpression`:n.push(r),r=r.object;break;case`CallExpression`:n.push(r),r=r.callee;break;case`SafeMemberExpression`:t.push({checked:r,unchecked:n.reverse()}),n=[],r=r.object;break;default:return{root:n.at(0)??r,sections:t.reverse()}}}var at={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},ot={functionDefinitions:new Map,constantDefinitions:new Map},st={functionDefinitions:new Map,constantDefinitions:new Map};for(let e of[`pi`,`infinity`])st.constantDefinitions.set(e,{type:`constant`}),ot.constantDefinitions.set(e,{type:`constant`});for(let e in st.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`newline`,type:`constant`}]}),ot.constantDefinitions.set(`textformatting`,{type:`namespace`,key:`textformatting`,members:[{key:`backwardslash`,type:`constant`},{key:`tab`,type:`constant`},{key:`singlequote`,type:`constant`},{key:`doublequote`,type:`constant`},{key:`forwardslash`,type:`constant`},{key:`newline`,type:`constant`}]}),at){let t=at[e];st.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]}),ot.functionDefinitions.set(e,{overloads:[{type:`function`,parametersInfo:{min:t.min,max:t.max}}]})}var ct=new Set([`attachments`,`featureset`,`featuresetbyassociation`,`featuresetbyid`,`featuresetbyname`,`featuresetbyportalitem`,`featuresetbyrelationshipname`,`featuresetbyurl`,`filterbysubtypecode`,`getfeatureset`,`getfeaturesetinfo`,`getuser`,`knowledgegraphbyportalitem`,`querygraph`]),lt=new Set([`translatetext`]),ut=new Set(`area.areageodetic.buffer.buffergeodetic.centroid.clip.contains.convexhull.crosses.cut.densify.densifygeodetic.difference.disjoint.distance.distancegeodetic.distancetocoordinate.equals.generalize.intersection.intersects.isselfintersecting.issimple.length.length3d.lengthgeodetic.measuretocoordinate.multiparttosinglepart.nearestcoordinate.nearestvertex.offset.overlaps.pointtocoordinate.relate.rotate.simplify.symmetricdifference.touches.union.within`.split(`.`));function dt(e,t){let n=t===`sync`?ot:st;n.functionDefinitions.has(e.name.toLowerCase())?n.functionDefinitions.get(e.name.toLowerCase())?.overloads.push({type:`function`,parametersInfo:{min:e.min,max:e.max}}):n.functionDefinitions.set(e.name.toLowerCase(),{overloads:[{type:`function`,parametersInfo:{min:e.min,max:e.max}}]})}function V(e,t){if(e)for(let n of e)H(n,t)}function H(e,t){if(e&&!1!==t(e))switch(e.type){case`ImportDeclaration`:V(e.specifiers,t),H(e.source,t);break;case`ExportNamedDeclaration`:H(e.declaration,t);break;case`ArrayExpression`:V(e.elements,t);break;case`AssignmentExpression`:case`BinaryExpression`:case`LogicalExpression`:H(e.left,t),H(e.right,t);break;case`BlockStatement`:case`Program`:V(e.body,t);break;case`BreakStatement`:case`ContinueStatement`:case`EmptyStatement`:case`Identifier`:case`Literal`:break;case`CallExpression`:H(e.callee,t),V(e.arguments,t);break;case`ExpressionStatement`:case`MemberAccessChainExpression`:H(e.expression,t);break;case`ForInStatement`:case`ForOfStatement`:H(e.left,t),H(e.right,t),H(e.body,t);break;case`ForStatement`:H(e.init,t),H(e.test,t),H(e.update,t),H(e.body,t);break;case`WhileStatement`:H(e.test,t),H(e.body,t);break;case`FunctionDeclaration`:H(e.id,t),V(e.params,t),H(e.body,t);break;case`IfStatement`:H(e.test,t),H(e.consequent,t),H(e.alternate,t);break;case`MemberExpression`:case`SafeMemberExpression`:H(e.object,t),H(e.property,t);break;case`ObjectExpression`:V(e.properties,t);break;case`Property`:H(e.key,t),H(e.value,t);break;case`ReturnStatement`:case`UnaryExpression`:case`UpdateExpression`:H(e.argument,t);break;case`VariableDeclaration`:V(e.declarations,t);break;case`VariableDeclarator`:H(e.id,t),H(e.init,t);break;case`TemplateLiteral`:V(e.expressions,t),V(e.quasis,t)}}function ft(e){return e?.type===`Literal`&&typeof e.value==`string`}function pt(e,t){let n=!1,r=t.toLowerCase();return H(e,e=>!n&&(e.type===`Identifier`&&e.name&&e.name.toLowerCase()===r&&(n=!0),!0)),n}function mt(e){let t=[];return H(e,e=>(e.type===`ImportDeclaration`&&e.source&&e.source.value&&t.push({libname:S(e.specifiers[0].local),source:e.source.value}),!0)),t}function ht(e,t){let n=!1,r=t.toLowerCase();return H(e,e=>!n&&(e.type!==`CallExpression`||e.callee.type!==`Identifier`||!e.callee.name||e.callee.name.toLowerCase()!==r||(n=!0,!1))),n}function gt(e){let t=[];return H(e,e=>e.type!==`MemberExpression`||e.object.type!==`Identifier`||((e.property.type===`Identifier`||e.property.type===`Literal`&&typeof e.property.value==`string`)&&t.push({varId:S(e.object),memberId:S(e.property)}),!1)),t}function _t(e){let t=[];return H(e,e=>{if(e.type===`CallExpression`&&e.callee.type===`Identifier`)switch(S(e.callee)){case`expects`:if(e.arguments.length>1){let[n,...r]=e.arguments;if(n?.type===`Identifier`){let e=S(n);for(let n of r)ft(n)&&t.push({varId:e,memberNamePattern:n.value})}}return!1;case`domainname`:case`domaincode`:case`domain`:case`haskey`:case`hasvalue`:if(e.arguments.length>=2){let[n,r]=e.arguments;n?.type===`Identifier`&&ft(r)&&t.push({varId:S(n),memberNamePattern:r.value})}return!0;case`defaultvalue`:if(e.arguments.length>2){let[n,r]=e.arguments;n?.type===`Identifier`&&ft(r)&&t.push({varId:S(n),memberNamePattern:r.value})}return!0;default:return!0}return e.type!==`MemberExpression`||e.object.type!==`Identifier`||(e.computed?!!ft(e.property)&&(t.push({varId:S(e.object),memberNamePattern:e.property.value}),!1):(t.push({varId:S(e.object),memberNamePattern:e.property.name}),!1))}),t}function vt(e){let t=[];return H(e,e=>(e.type===`CallExpression`&&e.callee.type===`Identifier`&&t.push(S(e.callee)),!0)),t}function yt(e,t=[]){let n=null;if(e.usesFeatureSet===void 0){n===null&&(n=vt(e)),e.usesFeatureSet=!1;for(let t=0;t<n.length;t++)ct.has(n[t])&&(e.usesFeatureSet=!0,e.isAsync=!0);if(!1===e.usesFeatureSet&&t&&t.length>0){for(let n of t)if(pt(e,n)){e.usesFeatureSet=!0,e.isAsync=!0;break}}}if(e.isAsync===void 0&&(n===null&&(n=vt(e)),n.some(e=>lt.has(e))&&(e.isAsync=!0)),e.usesModules===void 0&&(e.usesModules=!1,mt(e).length>0&&(e.usesModules=!0)),e.usesGeometry===void 0){e.usesGeometry=!1,n===null&&(n=vt(e));for(let t=0;t<n.length;t++)ut.has(n[t])&&(e.usesGeometry=!0)}}function bt(e){function t(e,t,n){if(e instanceof fe)return e.toArray();if(g(e))return e;throw new x(t,`InvalidParameter`,n)}function n(e,t){let i=e.length,a=Math.floor(i/2);return i===0?[]:i===1?[e[0]]:r(n(e.slice(0,a),t),n(e.slice(a,i),t),t)}function r(e,t,n){let r=[];for(;e.length>0||t.length>0;)if(e.length>0&&t.length>0){let i=n(e[0],t[0]);isNaN(i)&&(i=0),i<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}async function i(e,t){let n=e.length,r=Math.floor(n/2);if(n===0)return[];if(n===1)return[e[0]];let o=[await i(e.slice(0,r),t),await i(e.slice(r,n),t)];return a(o[0],o[1],t,[])}async function a(e,t,n,r){let i=r;if(e.length>0||t.length>0){if(e.length>0&&t.length>0){let o=await n(e[0],t[0]);return isNaN(o)&&(o=1),o<=0?(i.push(e[0]),e=e.slice(1)):(i.push(t[0]),t=t.slice(1)),a(e,t,n,r)}return e.length>0?(i.push(e[0]),a(e=e.slice(1),t,n,r)):(i.push(t[0]),a(e,t=t.slice(1),n,r))}return r}function o(e,t,r,a){E(r,1,2,e,t);let o=r[0];if(M(o)&&(o=o.toArray()),!1===g(o))throw new x(e,`InvalidParameter`,t);if(r.length>1){if(!1===Ee(r[1]))throw new x(e,`InvalidParameter`,t);let s=o,c=r[1].createFunction(e);return a?i(s,c):(s=n(s,(e,t)=>c(e,t)),s)}let s=o;if(s.length===0)return[];let c={};for(let e=0;e<s.length;e++){let t=ke(s[e]);t!==``&&(c[t]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Voxel||!0===c.Pixel||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return s.slice();let l=0,u=``;for(let e in c)l++,u=e;return s=l>1||u===`String`?n(s,(e,t)=>{if(e==null||e===C)return t==null||t===C?0:1;if(t==null||t===C)return-1;let n=w(e),r=w(t);return n<r?-1:n===r?0:1}):u===`Number`?n(s,(e,t)=>e-t):u===`Boolean`?n(s,(e,t)=>e===t?0:t?-1:1):u===`Date`?n(s,(e,t)=>e.toNumber()-t.toNumber()):s.slice(),s}e.functions.array=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,0,2,t,n),i.length===0||i.length===1&&i[0]===null)return[];if(g(i[0])){if(i.length===2&&!1===p(i[1]))throw new x(t,`InvalidParameter`,n);return!0===A(i[1],!1)?Fe(i[0]):i[0].slice()}if(M(i[0])){if(i.length===2&&!1===p(i[1]))throw new x(t,`InvalidParameter`,n);return!0===A(i[1],!1)?Fe(i[0]):i[0].toArray().slice()}let a=k(i[0]);if(isNaN(a)||!1===y(a))throw new x(t,`InvalidParameter`,n);let o=A(i[1],null),s=Array(a);return s.fill(o),s})},e.functions.front=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,1,1,t,n),M(i[0])){if(i[0].length()<=0)throw new x(t,`OutOfBounds`,n);return i[0].get(0)}if(g(i[0])){if(i[0].length<=0)throw new x(t,`OutOfBounds`,n);return i[0][0]}throw new x(t,`InvalidParameter`,n)})},e.functions.back=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,1,1,t,n),M(i[0])){if(i[0].length()<=0)throw new x(t,`OutOfBounds`,n);return i[0].get(i[0].length()-1)}if(g(i[0])){if(i[0].length<=0)throw new x(t,`OutOfBounds`,n);return i[0][i[0].length-1]}throw new x(t,`InvalidParameter`,n)})},e.functions.push=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,1,2,t,n),g(i[0]))return i[0][i[0].length]=i[1],i[0].length;throw new x(t,`InvalidParameter`,n)})},e.functions.pop=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,1,1,t,n),g(i[0])){if(i[0].length<=0)throw new x(t,`OutOfBounds`,n);let e=i[0][i[0].length-1];return i[0].length=i[0].length-1,e}throw new x(t,`InvalidParameter`,n)})},e.functions.erase=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,2,2,t,n),g(i[0])){let e=k(i[1]);if(isNaN(e)||!1===y(e))throw new x(t,`InvalidParameter`,n);let r=i[0];if(r.length<=0||(e<0&&(e=r.length+e),e<0)||e>=r.length)throw new x(t,`OutOfBounds`,n);return r.splice(e,1),C}if(I(i[0]))return i[0].eraseField(w(i[1])),C;throw new x(t,`InvalidParameter`,n)})},e.functions.insert=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,3,3,t,n),g(i[0])){let e=k(i[1]);if(isNaN(e)||!1===y(e))throw new x(t,`InvalidParameter`,n);let r=i[2],a=i[0];if(e>a.length||e<0&&e<-1*a.length)throw new x(t,`OutOfBounds`,n);return e===a.length?(a[e]=r,C):(a.splice(e,0,r),C)}if(I(i[0]))return i[0].setField(w(i[1]),i[2]),C;throw new x(t,`InvalidParameter`,n)})},e.functions.getkeys=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(E(n,1,1,e,t),n[0]==null)return[];if(I(n[0]))return n[0].keys();throw new x(e,`InvalidParameter`,t)})},e.functions.getvalues=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{if(E(n,1,1,e,t),n[0]==null)return[];if(I(n[0]))return n[0].values();throw new x(e,`InvalidParameter`,t)})},e.functions.resize=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,2,3,t,n),g(i[0])){let e=k(i[1]);if(isNaN(e)||!1===y(e)||e<0)throw new x(t,`InvalidParameter`,n);let r=A(i[2],null),a=i[0];if(a.length>=e)return a.length=e,C;let o=a.length;a.length=e;for(let e=o;e<a.length;e++)a[e]=r;return C}throw new x(t,`InvalidParameter`,n)})},e.functions.includes=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,2,2,t,n),g(i[0])){let e=i[1];return!!i[0].some(t=>Oe(t,e))}if(M(i[0])){let e=i[1];return!!i[0].toArray().some(t=>Oe(t,e))}throw new x(t,`InvalidParameter`,n)})},e.functions.slice=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,1,3,t,n),g(i[0])){let e=k(A(i[1],0)),r=k(A(i[2],i[0].length));if(isNaN(e)||!1===y(e)||isNaN(r)||!1===y(r))throw new x(t,`InvalidParameter`,n);return i[0].slice(e,r)}if(M(i[0])){let e=i[0],r=k(A(i[1],0)),a=k(A(i[2],e.length()));if(isNaN(r)||!1===y(r)||isNaN(a)||!1===y(a))throw new x(t,`InvalidParameter`,n);return e.toArray().slice(r,a)}throw new x(t,`InvalidParameter`,n)})},e.functions.splice=function(t,n){return e.standardFunction(t,n,(e,t,n)=>{let r=[];for(let e=0;e<n.length;e++)g(n[e])?r.push(...n[e]):M(n[e])?r.push(...n[e].toArray()):r.push(n[e]);return r})},e.functions.top=function(t,n){return e.standardFunction(t,n,(e,r,i)=>{if(E(i,2,2,t,n),g(i[0]))return k(i[1])>=i[0].length?i[0].slice():i[0].slice(0,k(i[1]));if(M(i[0]))return k(i[1])>=i[0].length()?i[0].slice():i[0].slice(0,k(i[1]));throw new x(t,`InvalidParameter`,n)})},e.functions.first=function(t,n){return e.standardFunction(t,n,(e,r,i)=>(E(i,1,1,t,n),g(i[0])?i[0].length===0?null:i[0][0]:M(i[0])?i[0].length()===0?null:i[0].get(0):null))},e.mode===`sync`&&(e.functions.sort=function(t,n){return e.standardFunction(t,n,(e,n,r)=>o(t,n,r,!1))},e.functions.any=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=a(e);if(p(t)&&!0===t)return!0}return!1})},e.functions.all=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o)if(!0!==a(e))return!1;return!0})},e.functions.none=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o)if(!0===a(e))return!1;return!0})},e.functions.reduce=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{E(i,2,3,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);return i.length===2?o.length===0?null:o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==C?n:null}):o.reduce((e,t)=>{let n=a(e,t);return e=n!==void 0&&n!==C?n:null},i[2])})},e.functions.map=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o){let t=a(e);t!==void 0&&t!==C?s.push(t):s.push(null)}return s})},e.functions.filter=function(n,r){return e.standardFunction(n,r,(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o)!0===a(e)&&s.push(e);return s})}),e.mode===`async`&&(e.functions.sort=function(t,n){return e.standardFunctionAsync(t,n,async(e,n,r)=>o(t,n,r,!0))},e.functions.any=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=await a(e),n=null;if(n=d(n)?await t:t,p(n)&&!0===n)return!0}return!1})},e.functions.all=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=await a(e),n=null;if(n=d(n)?await t:t,!0!==n)return!1}return!0})},e.functions.none=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r);for(let e of o){let t=await a(e),n=null;if(n=d(n)?await t:t,!0===n)return!1}return!0})},e.functions.filter=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o){let t=await a(e),n=null;n=d(n)?await t:t,!0===n&&s.push(e)}return s})},e.functions.reduce=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{E(i,2,3,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s;if(i.length>2){let e=A(i[2],null);s=o.reduce(async(e,t)=>{let n=await e;return n!==void 0&&n!==C||(n=null),a(n,t)},Promise.resolve(e))}else{if(o.length===0)return null;s=o.reduce(async(e,t,n)=>{if(n<=1)return a(e,t);let r=await e;return r!==void 0&&r!==C||(r=null),a(r,t)})}return s.then(e=>e!==void 0&&e!==C?e:null)})},e.functions.map=function(n,r){return e.standardFunctionAsync(n,r,async(e,r,i)=>{E(i,2,2,n,r);let a=i[1].createFunction(n),o=t(i[0],n,r),s=[];for(let e of o){let t=await a(e),n=null;n=d(n)?await t:t,n!==void 0&&n!==C?s.push(n):s.push(null)}return s})})}var xt=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:bt},Symbol.toStringTag,{value:`Module`}));function St(e,t,n){return e+(Ct(n)?Tt:wt)[t]}function Ct(e){return e%4==0&&(e%100!=0||e%400==0)}var wt=[0,31,59,90,120,151,181,212,243,273,304,334],Tt=[0,31,60,91,121,152,182,213,244,274,305,335];function U(e){return e===null?e:!1===e.isValid?null:e}function Et(e,t){switch(ne(e)){case``:case`default`:return L(t);case`z`:return`UTC`;default:return e}}function W(e,t){return O(e)?e.toArcadeDate():T(e,L(t))}var Dt=new ue([`days`,`months`,`minutes`,`seconds`,`hours`,`years`,`milliseconds`],[[`day`,`days`],[`d`,`days`],[`month`,`months`],[`minute`,`minutes`],[`m`,`minutes`],[`second`,`seconds`],[`s`,`seconds`],[`hour`,`hours`],[`h`,`hours`],[`year`,`years`],[`y`,`years`],[`millisecond`,`milliseconds`],[`ms`,`milliseconds`]]);function Ot(e){return e===`M`?`months`:Dt.lookup(w(e))??`milliseconds`}function kt(e,t){e.today=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,0,e,n);let a=new Date;return a.setHours(0,0,0,0),b.dateJSAndZoneToArcadeDate(a,L(e))})},e.time=function(e,n){return t(e,n,(t,r,i)=>{switch(E(i,0,4,e,n),i.length){case 0:{let t=b.nowToArcadeDate(L(e));return new v(t.hour,t.minute,t.second,t.millisecond)}case 1:{if(N(i[0]))return i[0].clone();if(D(i[0]))return new v(i[0].hour,i[0].minute,i[0].second,i[0].millisecond);if(O(i[0]))return new v(0,0,0,0);if(_(i[0]))return v.fromString(i[0]);let e=k(i[0]);return!1===isNaN(e)?v.fromMilliseconds(e):null}case 2:return _(i[0])&&_(i[1])?v.fromString(i[0],i[1]):v.fromParts(k(i[0]),k(i[1]),0,0);case 3:return v.fromParts(k(i[0]),k(i[1]),k(i[2]),0);case 4:return v.fromParts(k(i[0]),k(i[1]),k(i[2]),k(i[3]))}throw new x(e,`InvalidParameter`,n)})},e.dateonly=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,0,3,e,n),i.length===3)return m.fromParts(k(i[0]),k(i[1])+1,k(i[2]));if(i.length===2){let e=w(i[1]);return e===``?null:e===`X`?m.fromSeconds(k(i[0])):e===`x`?m.fromMilliseconds(k(i[0])):m.fromString(w(i[0]),e)}if(i.length===1){if(_(i[0])){if(i[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(i[0]))return m.fromString(i[0]+`-01-01`)}if(O(i[0]))return i[0].clone();if(D(i[0]))return m.fromParts(i[0].year,i[0].monthJS+1,i[0].day);let e=k(i[0]);return!1===isNaN(e)?m.fromMilliseconds(e):_(i[0])?m.fromString(i[0]):null}if(i.length===0){let t=b.nowToArcadeDate(L(e));return!1===t.isValid?null:m.fromParts(t.year,t.monthJS+1,t.day)}return null})},e.changetimezone=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,2,e,n),i[0]===null)return null;if(O(i[0]))throw new x(e,`CannotChangeTimeZoneDateOnly`,n);if(O(i[0]))throw new x(e,`CannotChangeTimeZoneTime`,n);let a=T(i[0],L(e));if(a===null)throw new x(e,`InvalidParameter`,n);let o=te(Et(w(i[1]),e),!1);if(o===null)return null;let s=b.arcadeDateAndZoneToArcadeDate(a,o);return!1===s.isValid?null:s})},e.timezone=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,2,e,n),N(i[0])||O(i[0]))return`Unknown`;let a=T(i[0],L(e));if(a===null)return null;let o=a.timeZone;return o===`system`?b.systemTimeZoneCanonicalName:o.toLowerCase()===`utc`?`UTC`:o.toLowerCase()===`unknown`?`Unknown`:o})},e.timezoneoffset=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=T(i[0],L(e));return a===null?null:60*a.timeZoneOffset*1e3})},e.now=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,0,e,n);let a=b.nowToArcadeDate(L(e));return!1===a.isValid?null:a})},e.timestamp=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,0,e,n);let a=b.nowUTCToArcadeDate();return!1===a.isValid?null:a})},e.toutc=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=T(i[0],L(e));return a===null?null:a.toUTC()})},e.tolocal=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=T(i[0],L(e));return a===null?null:a.toLocal()})},e.day=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.day})},e.month=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.monthJS})},e.year=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.year})},e.hour=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].hour;let a=T(i[0],L(e));return a===null?NaN:a.hour})},e.second=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].second;let a=T(i[0],L(e));return a===null?NaN:a.second})},e.millisecond=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].millisecond;let a=T(i[0],L(e));return a===null?NaN:a.millisecond})},e.minute=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),N(i[0]))return i[0].minute;let a=T(i[0],L(e));return a===null?NaN:a.minute})},e.week=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,2,e,n);let a=W(i[0],L(e));if(a===null)return NaN;let o=k(A(i[1],0));if(o<0||o>6)throw new x(e,`InvalidParameter`,n);let s=a.day,c=a.monthJS,l=a.year,u=a.dayOfWeekJS,d=St(s,c,l)-1,ee=Math.floor(d/7);return u-o+(u-o<0?7:0)<d-7*ee?ee+1:ee})},e.weekday=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.dayOfWeekJS})},e.isoweekday=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.dayOfWeekISO})},e.isomonth=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.monthISO})},e.isoweek=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.weekISO})},e.isoyear=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=W(i[0],L(e));return a===null?NaN:a.yearISO})},e.date=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,0,8,e,n),i.length===3){if(O(i[0])&&N(i[1])&&_(i[2])){let t=te(Et(w(i[2])??`unknown`,e),!1);return t===null?null:U(b.fromParts(i[0].year,i[0].month,i[0].day,i[1].hour,i[1].minute,i[1].second,i[1].millisecond,t))}return U(b.fromParts(k(i[0]),k(i[1])+1,k(i[2]),0,0,0,0,L(e)))}if(i.length===4)return U(b.fromParts(k(i[0]),k(i[1])+1,k(i[2]),k(i[3]),0,0,0,L(e)));if(i.length===5)return U(b.fromParts(k(i[0]),k(i[1])+1,k(i[2]),k(i[3]),k(i[4]),0,0,L(e)));if(i.length===6)return U(b.fromParts(k(i[0]),k(i[1])+1,k(i[2]),k(i[3]),k(i[4]),k(i[5]),0,L(e)));if(i.length===7)return U(b.fromParts(k(i[0]),k(i[1])+1,k(i[2]),k(i[3]),k(i[4]),k(i[5]),k(i[6]),L(e)));if(i.length===8){let t=te(Et(w(i[7])??`unknown`,e),!1);return t===null?null:U(b.fromParts(k(i[0]),k(i[1])+1,k(i[2]),k(i[3]),k(i[4]),k(i[5]),k(i[6]),t))}if(i.length===2){if(O(i[0])&&_(i[1])){let t=te(Et(w(i[1])??`unknown`,e),!1);return t===null?null:U(b.fromParts(i[0].year,i[0].month,i[0].day,0,0,0,0,t))}if(O(i[0])&&N(i[1]))return U(b.fromParts(i[0].year,i[0].month,i[0].day,i[1].hour,i[1].minute,i[1].second,i[1].millisecond,`unknown`));let t,n=w(i[1]);return n===``?null:(n=ge(n,!0),t=n===`X`?oe.fromSeconds(k(i[0])):n===`x`?oe.fromMillis(k(i[0])):oe.fromFormat(w(i[0]),n,{locale:ie(),numberingSystem:`latn`}),t.isValid?b.dateTimeToArcadeDate(t):null)}if(i.length===1){if(O(i[0]))return U(b.fromParts(i[0].year,i[0].month,i[0].day,0,0,0,0,`unknown`));if(_(i[0])){if(i[0].replaceAll(/^\s+|\s+$/g,``)===``)return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(i[0]))return T(i[0]+`-01-01`,L(e))}let t=k(i[0]);if(!1===isNaN(t)){let n=oe.fromMillis(t);return n.isValid?b.dateTimeAndZoneToArcadeDate(n,L(e)):null}return T(i[0],L(e))}return i.length===0?b.nowToArcadeDate(L(e)):null})},e.datediff=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,4,e,n),N(i[0]))return N(i[1])?i[0].difference(i[1],w(i[2])):NaN;if(N(i[1]))return NaN;if(O(i[0]))return O(i[1])?i[0].difference(i[1],w(i[2])):NaN;if(O(i[1]))return NaN;let a=T(i[0],L(e)),o=T(i[1],L(e));if(a===null||o===null)return NaN;let s=A(i[3],``);return s!==``&&s!==null?(s=Et(w(s),e),a=b.arcadeDateAndZoneToArcadeDate(a,s),o=b.arcadeDateAndZoneToArcadeDate(o,s)):a.timeZone!==o.timeZone&&(a.isUnknownTimeZone?a=b.arcadeDateAndZoneToArcadeDate(a,o.timeZone):o=(o.isUnknownTimeZone,b.arcadeDateAndZoneToArcadeDate(o,a.timeZone))),a.diff(o,Ot(i[2]))})},e.dateadd=function(e,n){return t(e,n,(t,r,i)=>{E(i,2,3,e,n);let a=k(i[1]);if(isNaN(a)||a===1/0||a===-1/0)return N(i[0])||O(i[0])?i[0].clone():T(i[0],L(e));let o=Ot(i[2]);if(o!==`days`&&o!==`months`||(a=O(i[0])?a:Re(a)),N(i[0])||O(i[0]))return i[0].plus(o,a);let s=T(i[0],L(e));return s===null?null:s.plus({[o]:a})})}}function At(e){let t=e?.fullSchema();return t?.datesInUnknownTimezone?`unknown`:t?.dateFieldsTimeZone||`UTC`}function jt(e){let t=e.fullSchema()?.fieldsIndex;return t==null&&e instanceof z?e.fieldsIndex:t}var Mt={getAttributeSQL(e,t){let n=e.field(t);if(n==null)return n;if(D(n)){let r=n.toDateTime(),i=jt(e)?.get(t)?.type;return i===`esriFieldTypeTimestampOffset`||i===`timestamp-offset`?We.fromDateTime(r):r}return n}};function Nt(e,t,n){e.domain=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,3,e,n),j(i[0])){let t=je(i[0],w(i[1]),i[2]===void 0?void 0:i[2]);return t&&t.domain?t.domain.type===`coded-value`||t.domain.type===`codedValue`?P.convertObjectToArcadeDictionary({type:`codedValue`,name:t.domain.name,dataType:ze[t.field.type],codedValues:t.domain.codedValues.map(e=>({name:e.name,code:e.code}))},L(e)):P.convertObjectToArcadeDictionary({type:`range`,name:t.domain.name,dataType:ze[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},L(e)):null}throw new x(e,`InvalidParameter`,n)})},e.domaincode=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,4,e,n),j(i[0]))return De(i[0],w(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new x(e,`InvalidParameter`,n)})},e.domainname=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,2,4,e,n),j(i[0]))return Te(i[0],w(i[1]),i[2],i[3]===void 0?void 0:i[3]);throw new x(e,`InvalidParameter`,n)})},e.expects=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new x(e,`WrongNumberOfParameters`,n);return C})},e.featureinfilter=function(e,r){return t(e,r,(e,t,r)=>{E(r,2,2,e,t);let[i,a]=r;if(i==null)return!1;if(a===``||a==null)return!0;if(!j(i)||!_(a))throw new x(e,`InvalidParameter`,t);let o=Ge.create(a,{fieldsIndex:jt(i),timeZone:At(i)}),s=o.getVariables();for(let t of s)o.parameters[t]=n(e,{name:t});return o.testFeature(i,Mt)})},e.gdbversion=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0]))return i[0].gdbVersion();throw new x(e,`InvalidParameter`,n)})},e.schema=function(e,n){return t(e,n,(t,r,i)=>{if(j(i[0])){let t=me(i[0]);return t?P.convertObjectToArcadeDictionary(t,L(e)):null}throw new x(e,`InvalidParameter`,n)})},e.subtypecode=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0])){let e=be(i[0]);if(!e)return null;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.code;return null}return null}throw new x(e,`InvalidParameter`,n)})},e.subtypename=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0])){let e=be(i[0]);if(!e)return``;if(e.subtypeField&&i[0].hasField(e.subtypeField)){let t=i[0].field(e.subtypeField);for(let n of e.subtypes)if(n.code===t)return n.name;return``}return``}throw new x(e,`InvalidParameter`,n)})},e.subtypes=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),j(i[0])){let t=be(i[0]);return t?P.convertObjectToArcadeDictionary(t,L(e)):null}throw new x(e,`InvalidParameter`,n)})},e[S(`TimeReceived`)]=function(e,n){return t(e,n,(e,t,n)=>{if(E(n,1,1,e,t),j(n[0])){if(n[0].hasField(`__esri_time_received__`)){let t=n[0].field(Ke);return f(t)?b.epochToArcadeDate(t,e.timeZone??`system`):D(t)?t:null}return null}throw new x(e,`InvalidParameter`,t)})}}function Pt(e,n){e.ringisclockwise=function(e,t){return n(e,t,(n,r,i)=>{E(i,1,1,e,t);let o=[];if(i[0]===null)return!1;if(g(i[0]))for(let n of i[0]){if(!(n instanceof a))throw new x(e,`InvalidParameter`,t);o.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y])}else if(i[0]instanceof Ae)o=i[0]._elements;else{if(!M(i[0]))throw new x(e,`InvalidParameter`,t);for(let n of i[0].toArray()){if(!(n instanceof a))throw new x(e,`InvalidParameter`,t);o.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y])}}return!(o.length<3)&&u(o)})},e.polygon=function(e,r){return n(e,r,(n,i,a)=>{let o;if(E(a,1,1,e,r),a[0]instanceof P){let t=F(R(a[0],e.spatialReference,`polygon`),e.spatialReference);if(t==null)return null;o=t}else if(a[0]instanceof t)o=h(a[0].toJSON());else{let n=JSON.parse(a[0]);n&&!n.spatialReference&&(n.spatialReference=e.spatialReference),o=F(new t(n),e.spatialReference)}if(o!==null&&!1===o.spatialReference.equals(e.spatialReference))throw new x(e,`WrongSpatialReference`,r);return ve(o)})},e.polyline=function(e,t){return n(e,t,(n,r,i)=>{let a;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`polyline`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof de)a=h(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new de(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new x(e,`WrongSpatialReference`,t);return ve(a)})},e.point=function(e,t){return n(e,t,(n,r,i)=>{let o;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`point`),e.spatialReference);if(t==null)return null;o=t}else if(i[0]instanceof a)o=h(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),o=F(new a(t),e.spatialReference)}if(o!==null&&!1===o.spatialReference.equals(e.spatialReference))throw new x(e,`WrongSpatialReference`,t);return ve(o)})},e.multipoint=function(e,t){return n(e,t,(n,r,i)=>{let a;if(E(i,1,1,e,t),i[0]instanceof P){let t=F(R(i[0],e.spatialReference,`multipoint`),e.spatialReference);if(t==null)return null;a=t}else if(i[0]instanceof re)a=h(i[0].toJSON());else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(new re(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new x(e,`WrongSpatialReference`,t);return ve(a)})},e.extent=function(e,r){return n(e,r,(n,i,o)=>{o=we(o),E(o,1,1,e,r);let s=null;if(o[0]instanceof P)s=F(R(o[0],e.spatialReference),e.spatialReference);else if(o[0]instanceof a){let e={xmin:o[0].x,ymin:o[0].y,xmax:o[0].x,ymax:o[0].y,spatialReference:o[0].spatialReference.toJSON()},t=o[0];t.hasZ&&(e.zmin=t.z,e.zmax=t.z),t.hasM&&(e.mmin=t.m,e.mmax=t.m),s=h(e)}else if(o[0]instanceof t)s=h(o[0].extent?.toJSON());else if(o[0]instanceof de)s=h(o[0].extent?.toJSON());else if(o[0]instanceof re)s=h(o[0].extent?.toJSON());else if(o[0]instanceof ce)s=h(o[0].toJSON());else{let t=JSON.parse(o[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),s=F(new ce(t),e.spatialReference)}if(s!==null&&!1===s.spatialReference.equals(e.spatialReference))throw new x(e,`WrongSpatialReference`,r);return ve(s)})},e.geometry=function(e,t){return n(e,t,(n,r,i)=>{E(i,1,1,e,t);let a=null;if(i[0]===null)return null;if(j(i[0]))a=F(i[0].geometry(),e.spatialReference);else if(i[0]instanceof P)a=F(R(i[0],e.spatialReference),e.spatialReference);else{let t=JSON.parse(i[0]);t&&!t.spatialReference&&(t.spatialReference=e.spatialReference),a=F(h(t),e.spatialReference)}if(a!==null&&!1===a.spatialReference.equals(e.spatialReference))throw new x(e,`WrongSpatialReference`,t);return ve(a)})},e.setgeometry=function(e,t){return n(e,t,(n,r,i)=>{if(E(i,2,2,e,t),!j(i[0]))throw new x(e,`InvalidParameter`,t);if(!0===i[0].immutable)throw new x(e,`Immutable`,t);if(!(i[1]instanceof s||i[1]===null))throw new x(e,`InvalidParameter`,t);return i[0]._geometry=i[1],C})},e.feature=function(e,t){return n(e,t,(n,r,i)=>{if(i.length===0)throw new x(e,`WrongNumberOfParameters`,t);let a;if(i.length===1)if(_(i[0]))a=z.fromJson(JSON.parse(i[0]),e.timeZone);else if(j(i[0]))a=z.createFromArcadeFeature(i[0]);else if(i[0]instanceof s)a=z.createFromGraphicLikeObject(i[0],null,null,e.timeZone);else{if(!(i[0]instanceof P))throw new x(e,`InvalidParameter`,t);{let n=i[0].hasField(`geometry`)?i[0].field(`geometry`):null,r=i[0].hasField(`attributes`)?i[0].field(`attributes`):null,o,s;if(I(n))o=R(n,e.spatialReference);else{if(n!=null&&!pe(n))throw new x(e,`InvalidParameter`,t);o=n}if(I(r))s=z.parseAttributesFromDictionary(r);else{if(r!=null)throw new x(e,`InvalidParameter`,t);s=null}a=z.createFromGraphicLikeObject(o,s,null,e.timeZone)}}else if(i.length===2){let n=null,r=null;if(i[0]!==null)if(i[0]instanceof s)n=i[0];else{if(!(i[0]instanceof P))throw new x(e,`InvalidParameter`,t);n=R(i[0],e.spatialReference)}if(i[1]!==null){if(!(i[1]instanceof P))throw new x(e,`InvalidParameter`,t);r=z.parseAttributesFromDictionary(i[1])}a=z.createFromGraphicLikeObject(n,r,null,e.timeZone)}else{let n=null,r={};if(i[0]!==null)if(i[0]instanceof s)n=i[0];else{if(!(i[0]instanceof P))throw new x(e,`InvalidParameter`,t);n=R(i[0],e.spatialReference)}for(let n=1;n<i.length;n+=2){let a=w(i[n]),o=i[n+1];if(!(o==null||_(o)||isNaN(o)||D(o)||f(o)||N(o)||O(o)||p(o))||Ee(o)||!1===Pe(o))throw new x(e,`InvalidParameter`,t);r[a]=o===C?null:o}a=z.createFromGraphicLikeObject(n,r,null,e.timeZone)}return a._geometry=F(a.geometry(),e.spatialReference),a.immutable=!1,a})},e.dictionary=function(e,t){return n(e,t,(n,r,i)=>{if(i.length===0||i.length===1&&i[0]===null){let e=new P;return e.immutable=!1,e}if(i.length===1&&_(i[0]))try{let t=JSON.parse(i[0]),n=P.convertObjectToArcadeDictionary(t,L(e),!1);return n.immutable=!1,n}catch{throw new x(e,`InvalidParameter`,t)}if(i.length===1&&i[0]instanceof s)try{let t=i[0].toJSON();t.hasZ=!0===i[0].hasZ,t.hasM=!0===i[0].hasM;let n=P.convertObjectToArcadeDictionary(t,L(e),!1);return n.immutable=!1,n}catch{throw new x(e,`InvalidParameter`,t)}if(i.length===1&&j(i[0]))try{let e=new P;e.immutable=!1,e.setField(`geometry`,i[0].geometry());let t=new P;t.immutable=!1,e.setField(`attributes`,t);for(let e of i[0].keys())t.setField(e,i[0].field(e));return e}catch{throw new x(e,`InvalidParameter`,t)}if(i.length===1&&(I(i[0])||ye(i[0])||Me(i[0])))try{let e=new P;e.immutable=!1;for(let t of i[0].keys())e.setField(t,i[0].field(t));return e}catch{throw new x(e,`InvalidParameter`,t)}if(i.length===2&&i[0]instanceof P&&p(i[1]))try{if(!0!==i[1]){let e=new P;e.immutable=!1;for(let t of i[0].keys())e.setField(t,i[0].field(t));return e}return i[0].deepClone()}catch{throw new x(e,`InvalidParameter`,t)}if(i.length%2!=0)throw new x(e,`WrongNumberOfParameters`,t);let a=Object.create(null);for(let n=0;n<i.length;n+=2){let r=w(i[n]),o=i[n+1];if(!(o==null||_(o)||isNaN(o)||D(o)||f(o)||p(o)||O(o)||N(o)||g(o)||M(o))||Ee(o))throw new x(e,`InvalidParameter`,t);a[r]=o===C?null:o}let o=new P(a);return o.immutable=!1,o})},e.haskey=function(e,t){return n(e,t,(n,r,i)=>{E(i,2,2,e,t);let a=w(i[1]);if(Se(i[0])||i[0]instanceof P)return i[0].hasField(a);if(i[0]instanceof s){let e=a.toLowerCase();for(let t of Ve(i[0]))if(t.toLowerCase()===e)return!0;return!1}throw new x(e,`InvalidParameter`,t)})},e.hasvalue=function(e,t){return n(e,t,(n,r,i)=>(E(i,2,2,e,t),He(i[0],i[1])!=null))},e.indexof=function(e,t){return n(e,t,(n,r,i)=>{E(i,2,2,e,t);let a=i[1];if(g(i[0])){for(let e=0;e<i[0].length;e++)if(Oe(a,i[0][e]))return e;return-1}if(M(i[0])){let e=i[0].length();for(let t=0;t<e;t++)if(Oe(a,i[0].get(t)))return t;return-1}throw new x(e,`InvalidParameter`,t)})},e.angle=function(e,t){return n(e,t,(n,r,i)=>{if(i=we(i),E(i,2,3,e,t),!(i[0]instanceof a)||!(i[1]instanceof a)||i.length>2&&!(i[2]instanceof a))throw new x(e,`InvalidParameter`,t);return i.length===2?Ye(i[0],i[1]):Je(i[0],i[1],i[2])})},e.bearing=function(e,t){return n(e,t,(n,r,i)=>{if(i=we(i),E(i,2,3,e,t),!(i[0]instanceof a)||!(i[1]instanceof a)||i.length>2&&!(i[2]instanceof a))throw new x(e,`InvalidParameter`,t);return i.length===2?Xe(i[0],i[1]):qe(i[0],i[1],i[2])})}}function Ft(e,t){function n(e,t,n){let r=k(e);return isNaN(r)?r:isNaN(t)||isNaN(n)||t>n?NaN:r<t?t:r>n?n:r}e.number=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,2,e,n);let a=i[0];if(f(a))return a;if(a===null)return 0;if(D(a)||N(a)||O(a))return a.toNumber();if(p(a))return Number(a);if(g(a))return NaN;if(a===``||a===void 0)return Number(a);if(_(a)){if(i[1]!==void 0){let e=_e(i[1],`‰`,``);return e=_e(e,`¤`,``),Be(a,{pattern:e})}return Number(a.trim())}return Number(a)})},e.abs=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.abs(k(i[0]))))},e.acos=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.acos(k(i[0]))))},e.asin=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.asin(k(i[0]))))},e.atan=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.atan(k(i[0]))))},e.atan2=function(e,n){return t(e,n,(t,r,i)=>(E(i,2,2,e,n),Math.atan2(k(i[0]),k(i[1]))))},e.ceil=function(e,n){return t(e,n,(t,r,a)=>{if(E(a,1,2,e,n),a.length===2){let e=k(a[1]);return isNaN(e)&&(e=0),i(`ceil`,k(a[0]),-1*e)}return Math.ceil(k(a[0]))})},e.round=function(e,n){return t(e,n,(t,r,a)=>{if(E(a,1,2,e,n),a.length===2){let e=k(a[1]);return isNaN(e)&&(e=0),i(`round`,k(a[0]),-1*e)}return Math.round(k(a[0]))})},e.floor=function(e,n){return t(e,n,(t,r,a)=>{if(E(a,1,2,e,n),a.length===2){let e=k(a[1]);return isNaN(e)&&(e=0),i(`floor`,k(a[0]),-1*e)}return Math.floor(k(a[0]))})},e.cos=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.cos(k(i[0]))))},e.isnan=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),typeof i[0]==`number`&&isNaN(i[0])))},e.exp=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.exp(k(i[0]))))},e.log=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.log(k(i[0]))))},e.pow=function(e,n){return t(e,n,(t,r,i)=>(E(i,2,2,e,n),k(i[0])**k(i[1])))},e.random=function(e,n){return t(e,n,(t,r,i)=>(E(i,0,0,e,n),Math.random()))},e.sin=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.sin(k(i[0]))))},e.sqrt=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.sqrt(k(i[0]))))},e.tan=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),Math.tan(k(i[0]))))},e.isempty=function(e,n){return t(e,n,(e,t,n)=>{if(E(n,1,2,e,t),n.length>=2&&!p(n[1]))throw new x(e,`InvalidParameter`,t);return A(n[1],!1)?Ue(n[0]):Ne(n[0])})},e.boolean=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=i[0];return Ie(a)})},e.constrain=function(e,r){return t(e,r,(t,i,a)=>{E(a,3,3,e,r);let o=k(a[1]),s=k(a[2]);if(g(a[0])){let e=[];for(let t of a[0])e.push(n(t,o,s));return e}if(M(a[0])){let e=[];for(let t=0;t<a[0].length();t++)e.push(n(a[0].get(t),o,s));return e}return n(a[0],o,s)})}}function G(e,t){if(t.length===1){if(g(t[0]))return Ze(e,t[0],-1);if(M(t[0]))return Ze(e,t[0].toArray(),-1)}return Ze(e,t,-1)}function It(e,t){e.stdev=function(e,n){return t(e,n,(e,t,n)=>G(`stdev`,n))},e.variance=function(e,n){return t(e,n,(e,t,n)=>G(`variance`,n))},e.average=function(e,n){return t(e,n,(e,t,n)=>G(`mean`,n))},e.mean=function(e,n){return t(e,n,(e,t,n)=>G(`mean`,n))},e.sum=function(e,n){return t(e,n,(e,t,n)=>G(`sum`,n))},e.min=function(e,n){return t(e,n,(e,t,n)=>G(`min`,n))},e.max=function(e,n){return t(e,n,(e,t,n)=>G(`max`,n))},e.distinct=function(e,n){return t(e,n,(e,t,n)=>G(`distinct`,n))},e.count=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),i[0]==null)return 0;if(g(i[0])||_(i[0]))return i[0].length;if(M(i[0]))return i[0].length();if(I(i[0]))return i[0].entryCount();throw new x(e,`InvalidParameter`,n)})}}var Lt=e=>(t,n,r=14)=>+e(t,n).toFixed(r),Rt=(e,t)=>e+t,zt=(e,t)=>e*t,Bt=(e,t)=>e/t,Vt=(e,t,n)=>Lt(Rt)(e,t,n),Ht=(e,t,n)=>Lt(zt)(e,t,n),Ut=(e,t,n)=>Lt(Bt)(e,t,n),Wt=360,Gt=400,Kt=2*Math.PI,K=3600,qt=3240,Jt=60,q=60,Yt=180*K/Math.PI,Xt=Wt*Jt*q,Zt=90*K,J=180*K,Qt=270*K,$t=`ᵍ`,en=`°`;function tn(e){if(!1===_(e))throw new x(null,`InvalidParameter`,null);return e}function nn(e,t){let n=10**t;return Math.round(e*n)/n}function rn(e,t){return e%t}function an(e){let t=parseFloat(e.toString().replace(Math.trunc(e).toString(),`0`))*Math.sign(e);return e<0?{fraction:t,integer:Math.ceil(e)}:{fraction:t,integer:Math.floor(e)}}function on(e,t){switch(e){case 0:return t===`SHORT`?`N`:`North`;case 1:return t===`SHORT`?`E`:`East`;case 2:return t===`SHORT`?`S`:`South`;case 3:return t===`SHORT`?`W`:`West`}}function sn(e,t){return e-Math.floor(e/t)*t}function cn(e){switch(e){case 6:case 1:return Wt;case 4:return Kt;case 5:return Gt;case 2:return Xt;case 7:return Jt;case 8:return q;default:throw new x(null,`LogicError`,null,{reason:`unsupported evaluations`})}}var ln=new ue([],[[`NORTH`,1],[`NORTH AZIMUTH`,1],[`POLAR`,2],[`QUADRANT`,3],[`SOUTH`,4],[`SOUTH AZIMUTH`,4]]);function un(e){let t=ln.lookup(e);if(t==null)throw new x(null,`LogicError`,null,{reason:`unsupported directionType`});return t}var dn=new ue([],[[`D`,1],[`DD`,1],[`DECIMAL DEGREE`,1],[`DEGREE`,1],[`DECIMAL DEGREES`,1],[`DEGREES`,1],[`DMS`,3],[`DEGREES MINUTES SECONDS`,3],[`R`,4],[`RAD`,4],[`RADS`,4],[`RADIAN`,4],[`RADIANS`,4],[`G`,5],[`GON`,5],[`GONS`,5],[`GRAD`,5],[`GRADS`,5],[`GRADIAN`,5],[`GRADIANS`,5]]);function fn(e){let t=dn.lookup(e);if(t==null)throw new x(null,`LogicError`,null,{reason:`unsupported units`});return t}var pn=class e{constructor(e,t,n){this.m_degrees=e,this.m_minutes=t,this.m_seconds=n}getField(e){switch(e){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new x(null,`LogicError`,null,{reason:`unexpected evaluation`})}}static secondsToDMS(t){let n=an(t).fraction,r=an(t).integer,i=Math.floor(r/K);r-=i*K;let a=Math.floor(r/q);return r-=a*q,new e(i,a,r+n)}static numberToDms(t){let n=an(t).fraction,r=an(t).integer,i=Ht(an(100*n).fraction,100),a=an(100*n).integer;return new e(r,a,i)}format(t,n){let r=nn(this.m_seconds,n),i=this.m_minutes,a=this.m_degrees;if(t===2||t===8)q<=r&&(r-=q,++i),Jt<=i&&(i=0,++a),Wt<=a&&(a=0);else if(t===7)r=0,i=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,a=this.m_degrees,Jt<=i&&(i=0,++a),Wt<=a&&(a=0);else if(t===1||t===6){let e=Ut(this.m_seconds,K),t=Ut(this.m_minutes,Jt);a=Math.round(this.m_degrees+t+e),i=0,r=0}return new e(a,i,r)}static dmsToSeconds(e,t,n){return e*K+t*q+n}},mn=class{constructor(e,t,n){this.meridian=e,this.angle=t,this.direction=n}fetchAzimuth(e){return e===0?this.meridian:this.direction}},Y=class e{constructor(e){this._angle=e}static createFromAngleAndDirection(t,n){return new e(new X(e._convertDirectionFormat(t.extractAngularUnits(2),n,1)))}getAngle(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:case 4:case 2:return new X(e._convertDirectionFormat(n,1,t));case 3:{let t=e.secondsNorthAzimuthToQuadrant(n);return new X(t.angle)}}}getMeridian(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return e.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(t){let n=this._angle.extractAngularUnits(2);switch(t){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return e.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(e){let t=e<=Zt||e>=Qt?0:2,n=t===0?Math.min(Xt-e,e):Math.abs(e-J);return new mn(t,n,e>J?3:1)}static createFromAngleMeridianAndDirection(t,n,r){return new e(new X(e.secondsQuadrantToNorthAzimuth(t.extractAngularUnits(2),n,r)))}static secondsQuadrantToNorthAzimuth(e,t,n){return t===0?n===1?e:Xt-e:n===1?J-e:J+e}static _convertDirectionFormat(e,t,n){let r=0;switch(t){case 1:r=e;break;case 2:r=Zt-e;break;case 3:throw new x(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:r=e+J}let i=0;switch(n){case 1:i=r;break;case 2:i=Zt-r;break;case 3:throw new x(null,`LogicError`,null,{reason:`unexpected evaluation`});case 4:i=r-J}return i=rn(i,Xt),i<0?Xt+i:i}};function hn(e,t,n){let r=null;switch(t){case 1:r=Ht(e,K);break;case 2:r=e;break;case 5:r=Ht(e,qt);break;case 4:r=Ht(e,Yt);break;default:throw new x(null,`LogicError`,null,{reason:`unexpected evaluation`})}switch(n){case 1:return Ut(r,K);case 2:return r;case 5:return Ut(r,qt);case 4:return r/Yt;default:throw new x(null,`LogicError`,null,{reason:`unexpected evaluation`})}}var X=class e{constructor(e){this._seconds=e}static createFromAngleAndUnits(t,n){return new e(hn(t,n,2))}extractAngularUnits(e){return hn(this._seconds,2,gn(e))}static createFromDegreesMinutesSeconds(t,n,r){return new e(Vt(Vt(Ht(t,K),Ht(n,q)),r))}};function gn(e){switch(r(e),e){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}var _n=class e{constructor(e,t,n,r){this.view=e,this.angle=t,this.merdian=n,this.direction=r,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(t,n,r){return new e(t,n.getAngle(r),n.getMeridian(r),n.getDirection(r))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let e=null,t=6,n=0;for(let r=0;r<this.view.length;r++){let i=this.view[r];switch(i){case`m`:e=kn(this.view,r,i),t=t===6?7:t,r=e.newpos;continue;case`s`:e=kn(this.view,r,i),t=8,n=n<e.rounding?e.rounding:n,r=e.newpos;continue;default:continue}}this._dms=pn.secondsToDMS(this.angle.extractAngularUnits(2)),this._formattedDms=pn.secondsToDMS(this.angle.extractAngularUnits(2)).format(t,n)}};function vn(e,t,n,r,i){let a=null;switch(t){case 1:case 4:case 5:return a=sn(nn(e.extractAngularUnits(t),r),cn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 6:case 7:return a=sn(i.fetchFormattedDms().getField(t),cn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);case 8:return a=sn(nn(i.fetchDms().getField(t),r),cn(t)),a.toFixed(r).padStart(n+r+(r>0?1:0),`0`);default:throw new x(null,`LogicError`,null,{reason:`unexpected evaluation`})}}function yn(e,t,n){if(n===3)throw new x(null,`LogicError`,null,{reason:`conversion error`});if(t===3){let t=pn.numberToDms(e);return Y.createFromAngleAndDirection(X.createFromDegreesMinutesSeconds(t.m_degrees,t.m_minutes,t.m_seconds),n)}return Y.createFromAngleAndDirection(X.createFromAngleAndUnits(e,gn(t)),n)}function bn(e){switch(k(e)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function xn(e){switch(e.toUpperCase().trim()){case`N`:case`NORTH`:return 0;case`E`:case`EAST`:return 1;case`S`:case`SOUTH`:return 2;case`W`:case`WEST`:return 3}return null}function Sn(e){let t=parseFloat(e);if(f(t)){if(isNaN(t))throw new x(null,`LogicError`,null,{reason:`invalid conversion`});return t}throw new x(null,`LogicError`,null,{reason:`invalid conversion`})}function Cn(e,t,n){let r=n===3,i=null,a=null,o=0,s=0,c=0;if(r){if(e.length<2)throw new x(null,`LogicError`,null,{reason:`conversion error`});c=1;let t=bn(w(e[e.length-1]));if(t?(i=t.first,a=t.second):(o=1,i=xn(w(e[0])),a=xn(w(e[e.length-1]))),i===null||a===null)throw new x(null,`LogicError`,null,{reason:`invalid conversion`})}switch(t){case 1:case 4:case 5:if(e.length===0)throw new x(null,`LogicError`,null,{reason:`invalid conversion`});return r?Y.createFromAngleMeridianAndDirection(X.createFromAngleAndUnits(Sn(e[o]),gn(t)),i,a):Y.createFromAngleAndDirection(X.createFromAngleAndUnits(Sn(e[o]),gn(t)),n);case 3:if(s=e.length-c-o,s===3){let t=X.createFromDegreesMinutesSeconds(Sn(e[o]),Sn(e[o+1]),Sn(e[o+2]));return r?Y.createFromAngleMeridianAndDirection(t,i,a):Y.createFromAngleAndDirection(t,n)}if(s===1){let t=Sn(e[o]),s=pn.numberToDms(t),c=X.createFromDegreesMinutesSeconds(s.m_degrees,s.m_minutes,s.m_seconds);return r?Y.createFromAngleMeridianAndDirection(c,i,a):Y.createFromAngleAndDirection(c,n)}}throw new x(null,`LogicError`,null,{reason:`invalid conversion`})}function wn(e){let t=new Set([` `,`-`,`/`,`'`,`"`,`\\`,`^`,en,$t,`	`,`\r`,`
`,`*`]),n=``;for(let r=0;r<e.length;r++){let i=e.charAt(r);t.has(i)?n+=`RRSPLITRRSPLITRR`:n+=i}return n.split(`RRSPLITRRSPLITRR`).filter(e=>e!==``)}function Tn(e,t,n){if(f(e))return yn(k(e),t,n);if(_(e))return Cn(wn(e),t,n);if(g(e))return Cn(e,t,n);if(M(e))return Cn(e.toArray(),t,n);throw new x(null,`LogicError`,null,{reason:`conversion error`})}function En(e,t,n){let r=gn(n);if(r&&n!==3)return e.getAngle(t).extractAngularUnits(r);throw new x(null,`LogicError`,null,{reason:`conversion error`})}function Dn(e,t,n){let r=e.getAngle(t);if(t===3&&n===3){let n=pn.secondsToDMS(r.extractAngularUnits(2));return[on(e.getMeridian(t),`SHORT`),n.m_degrees,n.m_minutes,n.m_seconds,on(e.getDirection(t),`SHORT`)]}if(n===3){let e=pn.secondsToDMS(r.extractAngularUnits(2));return[e.m_degrees,e.m_minutes,e.m_seconds]}return t===3?[on(e.getMeridian(t),`SHORT`),r.extractAngularUnits(n),on(e.getDirection(t),`SHORT`)]:[r.extractAngularUnits(n)]}function On(e,t){let n=``;switch(e){case 1:n=t===3?`DD.DD`+en:`DDD.DD`+en;break;case 3:n=t===3?`dd`+en+` mm' ss"`:`ddd`+en+` mm' ss.ss"`;break;case 4:n=`R.RR`;break;case 5:n=`GGG.GG`+$t;break;default:throw new x(null,`LogicError`,null,{reason:`conversion error`})}return t===3&&(n=`p `+n+` b`),n}function kn(e,t,n){let r={padding:0,rounding:0,newpos:t},i=!1;for(;t<e.length;){let a=e[t];if(a===n)i?r.rounding++:r.padding++,t++;else{if(a!==`.`)break;i=!0,t++}}return r.newpos=t-1,r}function An(e,t,n){let r={escaped:``,newpos:t};for(t++;t<e.length;){let n=e[t];if(t++,n===`]`)break;r.escaped+=n}return r.newpos=t-1,r}function jn(e,t,n){let r=``,i=null,a=null,o=_n.createFromStringAndBearing(t,e,n),s={D:1,d:6,m:7,s:8,R:4,G:5};for(let c=0;c<t.length;c++){let l=t[c];switch(l){case`[`:i=An(t,c),r+=i.escaped,c=i.newpos;continue;case`D`:case`d`:case`m`:case`s`:case`R`:case`G`:i=kn(t,c,l),a=e.getAngle(n),r+=vn(a,s[l],i.padding,i.rounding,o),c=i.newpos;continue;case`P`:case`p`:r+=on(o.fetchMeridian(),l===`p`?`SHORT`:`LONG`);continue;case`B`:case`b`:r+=on(o.fetchDirection(),l===`b`?`SHORT`:`LONG`);continue;default:r+=l}}return r}var Mn=new ue([`TEXT`,`VALUE`]);function Nn(e,t,n){if(!(t instanceof P))throw new x(null,`InvalidParameter`,null);if(!1===t.hasField(`directionType`))throw new x(null,`LogicError`,null,{reason:`missing directionType`});if(!1===t.hasField(`angleType`))throw new x(null,`LogicError`,null,{reason:`missing angleType`});let r=un(tn(t.field(`directiontype`))),i=Tn(e,fn(tn(t.field(`angletype`))),r);if(!(n instanceof P))throw new x(null,`InvalidParameter`,null);if(!1===n.hasField(`directionType`))throw new x(null,`LogicError`,null,{reason:`missing directionType`});if(!1===n.hasField(`outputType`))throw new x(null,`LogicError`,null,{reason:`missing angleType`});let a=un(tn(n.field(`directiontype`))),o=n.hasField(`angleType`)?fn(tn(n.field(`angletype`))):null,s=Mn.get(tn(n.field(`outputType`)));if(!a||!s)throw new x(null,`LogicError`,null,{reason:`conversion error`});if(!(o||s===`TEXT`&&n.hasField(`format`)))throw new x(null,`LogicError`,null,{reason:`invalid unit`});switch(s){case`VALUE`:return a===3||o===3?Dn(i,a,o):En(i,a,o);case`TEXT`:{let e=``;return n.hasField(`format`)&&(e=w(n.field(`format`))),e!==null&&e!==``||(e=On(o,a)),jn(i,e,a)}default:throw new x(null,`InvalidParameter`,null)}}var Z=2654435761,Pn=2246822519,Fn=3266489917,In=668265263,Ln=374761393;function Rn(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}var zn=class{constructor(e){this._seed=e,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(e){let t=[];for(let n of e)isNaN(n)?t.push(`NaN`):n===1/0?t.push(`Infinity`):n===-1/0?t.push(`-Infinity`):n===0?t.push(`0`):t.push(n.toString(16));this.update(Rn(t.join(``)))}updateIntArray(e){let t=Int32Array.from(e);this.update(new Uint8Array(t.buffer))}updateUint8Array(e){this.update(Uint8Array.from(e))}updateWithString(e){return this.update(Rn(e))}update(e){return this._bufs.push(e),this._totallen+=e.length,this}digest(){let e=new Uint8Array(this._totallen),t=0;for(let n of this._bufs)e.set(n,t),t+=n.length;return this.init(),this._xxHash32(e,this._seed)}_xxHash32(e,t=0){let n=e,r=t+Ln&4294967295,i=0;if(n.length>=16){let n=[t+Z+Pn&4294967295,t+Pn&4294967295,t+0&4294967295,t-Z&4294967295],a=e,o=a.length-16,s=0;for(i=0;(4294967280&i)<=o;i+=4){let e=i,t=a[e]+(a[e+1]<<8),r=a[e+2]+(a[e+3]<<8),o=t*Pn+(r*Pn<<16),c=n[s]+o&4294967295;c=c<<13|c>>>19;let l=65535&c,u=c>>>16;n[s]=l*Z+(u*Z<<16)&4294967295,s=s+1&3}r=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}r=r+e.length&4294967295;let a=e.length-4;for(;i<=a;i+=4){let e=i,t=n[e]+(n[e+1]<<8),a=n[e+2]+(n[e+3]<<8);r=r+(t*Fn+(a*Fn<<16))&4294967295,r=r<<17|r>>>15,r=(65535&r)*In+((r>>>16)*In<<16)&4294967295}for(;i<n.length;++i)r+=n[i]*Ln,r=r<<11|r>>>21,r=(65535&r)*Z+((r>>>16)*Z<<16)&4294967295;return r^=r>>>15,r=((65535&r)*Pn&4294967295)+((r>>>16)*Pn<<16),r^=r>>>13,r=((65535&r)*Fn&4294967295)+((r>>>16)*Fn<<16),r^=r>>>16,r<0?r+4294967296:r}};function Bn(e){return e.loadStatus===`loaded`&&e.user?.sourceJSON?e.user.sourceJSON:null}function Vn(e,t){return!!e&&le(e,t?.restUrl||``)}function Hn(e,t){if(!e||!t)return e===t;if(e.x===t.x&&e.y===t.y){if(e.hasZ){if(e.z!==t.z)return!1}else if(t.hasZ)return!1;if(e.hasM){if(e.m!==t.m)return!1}else if(t.hasM)return!1;return!0}return!1}function Q(e,n,r){if(e!==null)if(g(e)){if(n.updateUint8Array([61]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e)Q(t,n,r);r.map.delete(e),r.currentLength--}n.updateUint8Array([199])}else if(M(e)){if(n.updateUint8Array([61]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e.toArray())Q(t,n,r);r.map.delete(e),r.currentLength--}n.updateUint8Array([199])}else{if(D(e))return n.updateIntArray([e.toNumber()]),void n.updateUint8Array([241]);if(O(e))return n.updateIntArray([e.toNumber()]),void n.updateIntArray([257]);if(N(e))return n.updateIntArray([e.toNumber()]),void n.updateIntArray([263]);if(_(e))return n.updateIntArray([e.length]),n.updateWithString(e),void n.updateUint8Array([41]);if(p(e))n.updateUint8Array([!0===e?1:0,113]);else{if(f(e))return n.updateFloatArray([e]),void n.updateUint8Array([173]);if(e instanceof $e||e instanceof Qe)throw new x(r.context,`UnsupportedHashType`,r.node);if(!(e instanceof P)){if(j(e))throw new x(r.context,`UnsupportedHashType`,r.node);if(e instanceof a)return n.updateIntArray([3833836621]),n.updateIntArray([0]),n.updateFloatArray([e.x]),n.updateIntArray([1]),n.updateFloatArray([e.y]),e.hasZ&&(n.updateIntArray([2]),n.updateFloatArray([e.z])),e.hasM&&(n.updateIntArray([3]),n.updateFloatArray([e.m])),n.updateIntArray([3765347959]),void Q(e.spatialReference.wkid,n,r);if(e instanceof t){n.updateIntArray([1266616829]);for(let t=0;t<e.rings.length;t++){let i=e.rings[t],a=[],o=null,s=null;for(let n=0;n<i.length;n++){let r=e.getPoint(t,n);if(n===0)o=r;else if(Hn(s,r))continue;s=r,n===i.length-1&&Hn(o,r)||a.push(r)}n.updateIntArray([1397116793,a.length]);for(let e=0;e<a.length;e++){let t=a[e];n.updateIntArray([3962308117,e]),Q(t,n,r),n.updateIntArray([2716288009])}n.updateIntArray([2278822459])}n.updateIntArray([3878477243]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof de){n.updateIntArray([4106883559]);for(let t=0;t<e.paths.length;t++){let i=e.paths[t];n.updateIntArray([1397116793,i.length]);for(let a=0;a<i.length;a++)n.updateIntArray([3962308117,a]),Q(e.getPoint(t,a),n,r),n.updateIntArray([2716288009]);n.updateIntArray([2278822459])}n.updateIntArray([2568784753]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof re){n.updateIntArray([588535921,e.points.length]);for(let t=0;t<e.points.length;t++){let i=e.getPoint(t);n.updateIntArray([t]),Q(i,n,r)}n.updateIntArray([1700171621]),Q(e.spatialReference.wkid,n,r);return}if(e instanceof ce)return n.updateIntArray([3483648373]),n.updateIntArray([0]),n.updateFloatArray([e.xmax]),n.updateIntArray([1]),n.updateFloatArray([e.xmin]),n.updateIntArray([2]),n.updateFloatArray([e.ymax]),n.updateIntArray([3]),n.updateFloatArray([e.ymin]),e.hasZ&&(n.updateIntArray([4]),n.updateFloatArray([e.zmax]),n.updateIntArray([5]),n.updateFloatArray([e.zmin])),e.hasM&&(n.updateIntArray([6]),n.updateFloatArray([e.mmax]),n.updateIntArray([7]),n.updateFloatArray([e.mmin])),n.updateIntArray([3622027469]),void Q(e.spatialReference.wkid,n,r);if(e instanceof l)return n.updateIntArray([14]),e.wkid!==void 0&&e.wkid!==null&&n.updateIntArray([e.wkid]),e.wkt&&n.updateWithString(e.wkt),void(e.wkt2&&n.updateWithString(e.wkt2));throw Ee(e)||Le(e)||xe(e),new x(r.context,`UnsupportedHashType`,r.node)}if(n.updateUint8Array([223]),r.map.has(e)){let t=r.map.get(e);n.updateIntArray([61237541^t])}else{r.map.set(e,r.currentLength++);for(let t of e.keys())n.updateIntArray([t.length]),n.updateWithString(t),n.updateUint8Array([251]),Q(e.field(t),n,r),n.updateUint8Array([239]);r.map.delete(e),r.currentLength--}n.updateUint8Array([73])}}else n.updateUint8Array([0,139])}function Un(e,t){e.portal=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),new Qe(w(i[0]))))},e.typeof=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=ke(i[0]);if(a===`Unrecognized Type`)throw new x(e,`UnrecognizedType`,n);return a})},e.trim=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),w(i[0]).trim()))},e.tohex=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=k(i[0]);return isNaN(a)?a:a.toString(16)})},e.upper=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),w(i[0]).toUpperCase()))};let n=new ue([`every-word`,`first-word`]);e.proper=function(e,r){return t(e,r,(t,i,a)=>{E(a,1,2,e,r);let o=(a.length>=2?n.lookup(w(a[1])):null)??`every-word`,s=/\s/,c=w(a[0]),l=``,u=!0;for(let e=0;e<c.length;e++){let t=c[e];s.test(t)?o===`every-word`&&(u=!0):t.toUpperCase()!==t.toLowerCase()&&(u?(t=t.toUpperCase(),u=!1):t=t.toLowerCase()),l+=t}return l})},e.lower=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,1,e,n),w(i[0]).toLowerCase()))};let r=new ue([`digits`,`digits-hyphen`,`digits-hyphen-braces`,`digits-hyphen-parentheses`]);e.guid=function(e,n){return t(e,n,(t,i,a)=>{switch(E(a,0,1,e,n),a.length>0?r.lookup(w(a[0])):null){case`digits`:return ae().replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return ae();case`digits-hyphen-parentheses`:return`(`+ae()+`)`;default:return`{`+ae()+`}`}})},e.standardizeguid=function(e,n){return t(e,n,(t,i,a)=>{E(a,2,2,e,n);let o=w(a[0]);if(o===``||o===null)return``;let s=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(o);if(!s)return``;let c=s.groups;switch(o=c.partA+`-`+c.partB+`-`+c.partC+`-`+c.partD+`-`+c.partE,r.lookup(w(a[1]))){case`digits`:return o.replace(`-`,``).replace(`-`,``).replace(`-`,``).replace(`-`,``);case`digits-hyphen`:return o;case`digits-hyphen-parentheses`:return`(`+o+`)`;default:return`{`+o+`}`}})},e.console=function(e,n){return t(e,n,(t,n,r)=>(r.length===0||(r.length===1?e.console(w(r[0])):e.console(w(r))),C))},e.mid=function(e,n){return t(e,n,(t,r,i)=>{E(i,2,3,e,n);let a=k(i[1]);if(isNaN(a))return``;if(a=Math.max(0,a),i.length===2)return w(i[0]).slice(a);let o=k(i[2]);return isNaN(o)?``:(o<0&&(o=0),w(i[0]).slice(a,a+o))})},e.find=function(e,n){return t(e,n,(t,r,i)=>{E(i,2,3,e,n);let a=0;if(i.length>2){if(a=k(A(i[2],0)),isNaN(a))return-1;a<0&&(a=0)}return w(i[1]).indexOf(w(i[0]),a)})},e.left=function(e,n){return t(e,n,(t,r,i)=>{E(i,2,2,e,n);let a=k(i[1]);return isNaN(a)?``:(a<0&&(a=0),w(i[0]).slice(0,a))})},e.right=function(e,n){return t(e,n,(t,r,i)=>{E(i,2,2,e,n);let a=k(i[1]);return isNaN(a)||a<=0?``:w(i[0]).slice(-a)})},e.split=function(e,n){return t(e,n,(t,r,i)=>{let a;E(i,2,4,e,n);let o=k(A(i[2],-1)),s=Ie(A(i[3],!1));if(o===-1||o===null||!0===s?a=w(i[0]).split(w(i[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),a=w(i[0]).split(w(i[1]),o)),!1===s)return a;let c=[];for(let e=0;e<a.length&&!(o!==-1&&c.length>=o);e++)a[e]!==``&&a[e]!==void 0&&c.push(a[e]);return c})},e.text=function(e,n){return t(e,n,(t,r,i)=>(E(i,1,2,e,n),Ce(i[0],i[1])))},e.concatenate=function(e,n){return t(e,n,(e,t,n)=>{let r=[];if(n.length<1)return``;if(g(n[0])){let e=A(n[2],``);for(let t=0;t<n[0].length;t++)r[t]=Ce(n[0][t],e);return n.length>1?r.join(n[1]):r.join(``)}if(M(n[0])){let e=A(n[2],``);for(let t=0;t<n[0].length();t++)r[t]=Ce(n[0].get(t),e);return n.length>1?r.join(n[1]):r.join(``)}for(let e=0;e<n.length;e++)r[e]=Ce(n[e]);return r.join(``)})},e.reverse=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),g(i[0])){let e=i[0].slice();return e.reverse(),e}if(M(i[0])){let e=i[0].toArray().slice();return e.reverse(),e}throw new x(e,`InvalidParameter`,n)})},e.replace=function(e,n){return t(e,n,(t,r,i)=>{E(i,3,4,e,n);let a=w(i[0]),o=w(i[1]),s=w(i[2]);return i.length!==4||Ie(i[3])?_e(a,o,s):a.replace(o,s)})},e.urlencode=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),i[0]===null)return``;if(i[0]instanceof P){let e=``;for(let t of i[0].keys()){let n=i[0].field(t);e!==``&&(e+=`&`),e+=n===null?encodeURIComponent(t)+`=`:encodeURIComponent(t)+`=`+encodeURIComponent(n)}return e}return encodeURIComponent(w(i[0]))})},e.hash=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,1,e,n);let a=new zn(0);return Q(i[0],a,{context:e,node:n,map:new Map,currentLength:0}),a.digest()})},e.convertdirection=function(e,n){return t(e,n,(t,r,i)=>(E(i,3,3,e,n),Nn(i[0],i[1],i[2])))},e.fromjson=function(e,n){return t(e,n,(t,r,i)=>{if(E(i,1,1,e,n),!1===_(i[0]))throw new x(e,`InvalidParameter`,n);return P.convertJsonToArcade(JSON.parse(w(i[0])),L(e))})},e.tocharcode=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,2,e,n);let a=k(A(i[1],0)),o=w(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new x(e,`OutOfBounds`,n);return o.charCodeAt(a)})},e.tocodepoint=function(e,n){return t(e,n,(t,r,i)=>{E(i,1,2,e,n);let a=k(A(i[1],0)),o=w(i[0]);if(o.length===0&&i.length===1)return null;if(o.length<=a||a<0)throw new x(e,`OutOfBounds`,n);return o.codePointAt(a)})},e.fromcharcode=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new x(e,`WrongNumberOfParameters`,n);let a=i.map(e=>Math.trunc(k(e))).filter(e=>e>=0&&e<=65535);return a.length===0?null:String.fromCharCode.apply(null,a)})},e.fromcodepoint=function(e,n){return t(e,n,(t,r,i)=>{if(i.length<1)throw new x(e,`WrongNumberOfParameters`,n);let a;try{a=i.map(e=>Math.trunc(k(e))).filter(e=>e<=1114111&&e>>>0===e)}catch{return null}return a.length===0?null:String.fromCodePoint.apply(null,a)})},e.getuser=function(e,n){return t(e,n,(t,r,i)=>{E(i,0,2,e,n);let a=A(i[1],``);if(a=!0===a||!1===a?``:w(a),a!==null&&a!==``)return null;if(i.length===0||i[0]instanceof Qe){let t=null;if(t=e.services?.portal?e.services.portal:se.getDefault(),i.length>0&&!Vn(i[0].field(`url`),t)||!t)return null;if(a===``){let n=Bn(t);if(n){let t=JSON.parse(JSON.stringify(n));for(let e of[`lastLogin`,`created`,`modified`])t[e]!==void 0&&t[e]!==null&&(t[e]=new Date(t[e]));return P.convertObjectToArcadeDictionary(t,L(e))}}return null}throw new x(e,`InvalidParameter`,n)})},e.getenvironment=function(e,n){return t(e,n,(t,r,i)=>(E(i,0,0,e,n),P.convertObjectToArcadeDictionary(he(L(e),e.spatialReference),L(e),!0)))},e.standardizefilename=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let[r]=n;if(r==null)return``;if(!_(r))throw new x(e,`InvalidParameter`,t);return r.replaceAll(/[<>"?*]/g,`_`).replaceAll(/[/\\|]/g,`-`).replaceAll(`:`,`, `)})}}var Wn;async function Gn(){Wn??(Wn=await e(()=>import(`./geodeticDistanceOperator-DEdPXvs3.js`),__vite__mapDeps([0,1,2,3])),await Wn.load())}function $(e){let t=e.track;if(t==null)throw new x(e,`InvalidParameter`,null);return t}function Kn(e,t,n,r){let i=Math.max(0,qn(e,t)),a=Math.max(0,qn(e,n));return e.observations.slice(i,a).map((e,t)=>r(e,t+i))}function qn(e,t){return e.currentObservationIndex+t}function Jn(e,t){let n=qn(e,t);if(n<0||n>=e.observations.length)throw new x(null,`InvalidParameter`,null);return n}function Yn(e,t){let{stats:n}=e.observations[t];if(n.totalDistance!=null)return n.totalDistance;if(t===0)return n.totalDistance=0;let r,i=0;for(r=t-1;r>0;r--){let t=e.observations[r].stats;if(t.totalDistance!=null){i=t.totalDistance;break}}for(let n=r+1;n<=t;n++){let t=e.observations[n];i+=Xn(e,n),t.stats.totalDistance=i}return i}function Xn(e,t){let n=e.observations[t],r=n.stats;if(r.distance!=null)return r.distance;if(t===0)return r.distance=0;let i=e.observations[t-1];return r.distance=Wn.execute(i.feature.geometry(),n.feature.geometry())}function Zn(e,t){let n=e.observations[t],r=n.stats;if(r.speed!=null)return r.speed;if(t===0)return r.speed=0;let i=e.observations[t-1],a=n.endTime-i.startTime;return a<=0?r.speed=0:r.speed=Xn(e,t)/(a/1e3)}function Qn(e,t){let n=e.observations[t],r=n.stats;if(r.acceleration!=null)return r.acceleration;if(t===0)return r.acceleration=0;let i=e.observations[t-1],a=n.endTime-i.startTime;if(a<=0)return r.acceleration=0;let o=Zn(e,t),s=Zn(e,t-1);return r.acceleration=(o-s)/(a/1e3)}function $n(e,t){e[S(`TrackIndex`)]=function(e,n){return t(e,n,(e,t,n)=>(E(n,0,0,e,t),$(e).currentObservationIndex))},e[S(`TrackWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]);return Kn($(e),r,i,e=>e.feature)})},e[S(`TrackFieldWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,3,3,e,t);let r=w(n[0]),i=k(n[1]),a=k(n[2]);return Kn($(e),i,a,e=>e.feature.field(r))})},e[S(`TrackGeometryWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]);return Kn($(e),r,i,e=>e.feature.geometry())})},e[S(`TrackStartTime`)]=function(e,n){return t(e,n,(e,t,n)=>(E(n,0,0,e,t),b.epochToArcadeDate($(e).observations[0].startTime,e.timeZone??`system`)))},e[S(`TrackCurrentTime`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return b.epochToArcadeDate(r.observations[r.currentObservationIndex].startTime,e.timeZone??`system`)})},e[S(`TrackDuration`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return r.observations[r.currentObservationIndex].startTime-r.observations[0].startTime})},e[S(`TrackCurrentDistance`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return Yn(r,r.currentObservationIndex)})},e[S(`TrackDistanceAt`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let r=k(n[0]),i=$(e);return Yn(i,Jn(i,r))})},e[S(`TrackDistanceWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]),a=$(e);return Kn(a,r,i,(e,t)=>Yn(a,t))})},e[S(`TrackCurrentSpeed`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return Zn(r,r.currentObservationIndex)})},e[S(`TrackSpeedAt`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let r=k(n[0]),i=$(e);return Zn(i,Jn(i,r))})},e[S(`TrackSpeedWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]),a=$(e);return Kn(a,r,i,(e,t)=>Zn(a,t))})},e[S(`TrackCurrentAcceleration`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,0,0,e,t);let r=$(e);return Qn(r,r.currentObservationIndex)})},e[S(`TrackAccelerationAt`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,1,1,e,t);let r=k(n[0]),i=$(e);return Qn(i,Jn(i,r))})},e[S(`TrackAccelerationWindow`)]=function(e,n){return t(e,n,(e,t,n)=>{E(n,2,2,e,t);let r=k(n[0]),i=k(n[1]),a=$(e);return Kn(a,r,i,(e,t)=>Qn(a,t))})}}export{ht as _,Ft as a,nt as b,kt as c,_t as d,gt as f,mt as g,dt as h,It as i,xt as l,pt as m,Gn as n,Pt as o,yt as p,Un as r,Nt as s,$n as t,vt as u,rt as v,et as x,it as y};