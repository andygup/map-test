import{BT as e,Od as t,VT as n,hv as r,jT as i,kD as a,rE as o,sD as s,uv as c}from"./index-BN8X5Ryz.js";import"./memoryEstimations-D_IbKyOk.js";import"./OptimizedGeometry-BQJ7w5VU.js";import"./OptimizedFeatureSet-CLjmRHYn.js";import"./featureConversionUtils-o9-cJXzl.js";import"./streamLayerUtils-82UmlW-3.js";import"./QueueProcessor-D6ozkjY6.js";import"./earcut-CEMcWA4Z.js";import"./layerViewUtils-CJcMVuwG.js";import"./colorUtils-CzajW9E7.js";import"./timeSupport-vK4lVcYW.js";import"./queryUtils-DGU5ISbw.js";import"./normalizeUtilsSync-TXjrdJAe.js";import"./GeometryUtils-B-8QW9FG.js";import"./VertexAttributeLocations-BScEla0R.js";import"./VertexElementDescriptor-Cl_nC_ty.js";import"./labelPoint-1O-zXr9b.js";import"./callExpressionWithCursor-CKz4lb1p.js";import"./FeatureMetadata-rc_NIaUe.js";import"./CIMSymbolHelper-B2DBxDPE.js";import"./rasterizingUtils-BsmZb-O9.js";import"./Rect-LbcnjDUG.js";import"./BoundingBox-Dtf81F-g.js";import"./BidiEngine-DvXbVJau.js";import"./callExpressionWithFeature-UlbvTUQ4.js";import"./OverrideHelper-BahbnLvz.js";import"./FeatureCommandQueue-2UJWGVaq.js";import"./config-Dk3C6lVr.js";import"./dehydratedFeatureComparison-BCFMkftR.js";import"./WGLContainer-jm6ZclzQ.js";import"./utils-B0heZPZY.js";import"./ProgramTemplate-B9k_04Md.js";import"./VertexArrayObject-ChtD6bwg.js";import"./BufferObject-B3_aJU6V.js";import"./VertexBuffer-Ra4pb4dR.js";import"./vec3f32-DDMWoxUL.js";import"./Container-uEjPEzbR.js";import"./GraphShaderModule-AgkKIWM0.js";import"./FramebufferObject-BoYk_2uK.js";import"./ShaderBuilder-BLOqjpgt.js";import{t as l}from"./LayerView2D-Bgb1zyoa.js";import{t as u}from"./LayerView-DQaVI2FN.js";import"./UpdateTracking2D-BMTZzgpI.js";import"./TechniqueInstance-fDAaVtEH.js";import"./TileContainer-BL1bFhTv.js";import"./constants-BOI_CTg-.js";import"./utils-DmZFjYOb.js";import{t as d}from"./highlightOptionsUtils-DmkXKeuF.js";import"./AGraphicContainer-DHUNjrd-.js";import{t as f}from"./GraphicContainer-fLr16fKu.js";import"./ComputedAttributeStorage-BgTqXVQM.js";import{t as p}from"./GraphicsView2D-CUXbaTHc.js";import"./dehydratedFeatures-D5ZOMtMh.js";var m=class extends l(u){attach(){this.graphicsView=new p({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new f(this.view.featuresTilingScheme),layerId:this.layer.id}),this.container.addChild(this.graphicsView.container),this.addAttachHandles([this.layer.on(`graphic-update`,this.graphicsView.graphicUpdateHandler),c(()=>this.layer?.visible,()=>{this.graphicsView.update({state:this.view.state}),this.graphicsView.pushUpdate()})]),this._processHighlight()}detach(){this.container.removeAllChildren(),this.graphicsView=i(this.graphicsView)}async hitTest(e){return this.graphicsView?this.graphicsView.hitTest(e).map(t=>({type:`graphic`,graphic:t,mapPoint:e,layer:this.layer})):null}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(e){this.graphicsView.processUpdate(e)}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(e,n){let i;typeof e==`number`?i=[e]:e instanceof t?i=[e.uid]:Array.isArray(e)&&e.length>0?i=typeof e[0]==`number`?e:e.map(e=>e&&e.uid):r.isCollection(e)&&e.length>0&&(i=e.map(e=>e&&e.uid).toArray());let a=i?.filter(s);if(!a?.length)return o();let c=d(n);return this._addHighlights(a,c),o(()=>!this.destroyed&&this._removeHighlights(a,c))}_processHighlight(){let e=this._getHighlights();this.graphicsView?.setHighlight(e)}};a([e()],m.prototype,`graphicsView`,void 0),m=a([n(`esri.views.2d.layers.GraphicsLayerView2D`)],m);var h=m;export{h as default};