import{$h as e,BT as t,VT as n,Xw as r,hT as i,ig as a,kD as o,mT as s,pT as c,rE as l,sD as u,sE as d,vv as f}from"./index-BN8X5Ryz.js";var p=class extends e(f){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){return(this.parent?.visible&&!this.parent.suspended)??!0}set visible(e){this._overrideIfSome(`visible`,e)}forceInteractive(){return this._interactiveViewModelCount++,l(()=>this._interactiveViewModelCount--)}};o([t({constructOnly:!0})],p.prototype,`parent`,void 0),o([t({constructOnly:!0})],p.prototype,`view`,void 0),o([t({type:Boolean})],p.prototype,`interactive`,null),o([t()],p.prototype,`_userInteractive`,void 0),o([t({readOnly:!0})],p.prototype,`updating`,null),o([t()],p.prototype,`visible`,null),o([t()],p.prototype,`_interactiveViewModelCount`,void 0),p=o([n(`esri.views.analysis.AnalysisView`)],p);var m=class extends p{};m=o([n(`esri.views.2d.analysis.AnalysisView2D`)],m);var h=class{constructor(){this._currentOperationSignal=a(null)}get currentOperationType(){return this._currentOperationSignal.value?.type??null}destroy(){this.stop()}async start(e,t,n){let a=this._currentOperationSignal.value;a?.stop();let o=new AbortController,l=n?.signal,f=AbortSignal.any([o.signal,l].filter(u)),p=r(),m=!1,h=()=>{m||(m=!0,p.reject(s()))},g={type:e,resolve:e=>{m||(m=!0,p.resolve(e))},reject:h,promise:p.promise,stop:()=>o.abort(),handles:[]};this._currentOperationSignal.value=g,g.handles.push(i(l,()=>{o.abort()}),i(f,()=>{d(g.handles),m||h()}));try{return a&&(await a.promise.catch(()=>{}),c(f)),await t(g,f),await p.promise}finally{d(g.handles),this._currentOperationSignal.value===g&&(this._currentOperationSignal.value=null)}}stop(){this._currentOperationSignal.value?.stop()}};export{m as n,h as t};