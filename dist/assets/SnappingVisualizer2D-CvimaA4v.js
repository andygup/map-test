import{Ab as e,Dd as t,Gf as n,Nu as r,Ov as i,WT as a,Zh as o,_b as s,c_ as c,jd as l,px as u,tE as d,vd as f,wx as p}from"./index-CZ4oMP1N.js";import{_ as m}from"./LineSnappingHint-BOeMI0cS.js";import{n as h}from"./ParallelSnappingHint-C_mSlwpq.js";import{b as g}from"./SnappingContext-BtkpPzK4.js";var _=class extends g{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new u({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(`intersectionPoint`,t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new u({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(`point`,t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new i({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:d(p,t.spatialReference)}),this._getOrCreateSymbol(`line`,t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new i({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:d(p,t.spatialReference)}),this._getOrCreateSymbol(`parallelSign`,t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(t,n){let a=r(),o=r(),l=c();s(a,m(t.centerVertex),m(t.previousVertex)),s(o,m(t.nextVertex),m(t.previousVertex)),e(l,a,o);let u=`rightAngleQuad${l[2]<0?45:225}`;return this._visualizeSnappingIndicator(new i({paths:[[[...t.previousVertex],[...t.centerVertex],[...t.nextVertex]]],spatialReference:d(p,n.spatialReference)}),this._getOrCreateSymbol(u,n.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(e,t){let n=new f({geometry:e,symbol:t});return this._graphicsLayer.add(n),a(()=>{this._graphicsLayer.remove(n)})}_getOrCreateSymbol(e,t){let n=this._symbolPairingsByType;return n.get(e)?.color!==t&&n.set(e,{color:t,symbol:v(e,t)}),n.get(e).symbol}};function v(e,r){let i=[...r.toRgb(),255*r.a];switch(e){case`point`:return new t({outline:{width:.5,color:[0,0,0,1]},size:10,color:r});case`intersectionPoint`:return new t({outline:new l({width:1.5,color:r}),size:15,color:[0,0,0,0]});case`line`:return new n({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Butt`,joinStyle:`Round`,miterLimit:10,width:o(h.lineHintWidthTarget),color:i}]}}});case`parallelSign`:return new n({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:`Relative`,size:5,markerPlacement:{type:`CIMMarkerPlacementOnLine`,placePerPart:!0,angleToLine:!0,relativeTo:`LineMiddle`},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidFill`,enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:`Relative`,size:5,markerPlacement:{type:`CIMMarkerPlacementOnLine`,placePerPart:!0,angleToLine:!0,relativeTo:`LineMiddle`},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:`CIMPolygonSymbol`,symbolLayers:[{type:`CIMSolidFill`,enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case`rightAngleQuad45`:case`rightAngleQuad225`:{let t=e===`rightAngleQuad45`?45:225;return new n({data:{type:`CIMSymbolReference`,symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMVectorMarker`,enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:`Relative`,size:o(h.rightAngleHintSize),rotation:t,markerPlacement:{type:`CIMMarkerPlacementOnVertices`,placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:`CIMMarkerGraphic`,geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:`CIMLineSymbol`,symbolLayers:[{type:`CIMSolidStroke`,enable:!0,capStyle:`Butt`,joinStyle:`Round`,miterLimit:10,width:o(h.rightAngleHintOutlineSize),color:i},{type:`CIMSolidFill`,enable:!0,color:[...r.toRgb(),255*r.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}export{_ as t};