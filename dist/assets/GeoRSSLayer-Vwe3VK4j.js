import{A as e,AE as t,BT as n,Bd as r,Di as i,ES as a,JC as o,L as s,Ld as c,Li as l,M as u,Pi as d,Rd as f,Rh as p,Ua as m,VT as h,Vd as g,WT as _,ZS as v,j as y,kD as b,np as x,sT as S,ua as C,vx as w}from"./index-BN8X5Ryz.js";var T=[`atom`,`xml`],E={base:x,key:`type`,typeMap:{"simple-line":g},errorContext:`symbol`},D={base:x,key:`type`,typeMap:{"picture-marker":r,"simple-marker":c},errorContext:`symbol`},O={base:x,key:`type`,typeMap:{"simple-fill":f},errorContext:`symbol`},k=class extends C(y(s(u(e(m(p)))))){constructor(...e){super(...e),this.description=null,this.fullExtent=null,this.legendEnabled=!0,this.lineSymbol=null,this.pointSymbol=null,this.polygonSymbol=null,this.operationalLayerType=`GeoRSS`,this.url=null,this.type=`geo-rss`}normalizeCtorArgs(e,t){return typeof e==`string`?{url:e,...t}:e}readFeatureCollections(e,t){return t.featureCollection.layers.forEach(e=>{let t=e.layerDefinition.drawingInfo.renderer.symbol;t&&t.type===`esriSFS`&&t.outline?.style.includes(`esriSFS`)&&(t.outline.style=`esriSLSSolid`)}),t.featureCollection.layers}get hasPoints(){return this._hasGeometry(`esriGeometryPoint`)}get hasPolylines(){return this._hasGeometry(`esriGeometryPolyline`)}get hasPolygons(){return this._hasGeometry(`esriGeometryPolygon`)}get title(){let e=this._get(`title`);return e&&this.originOf(`title`)!==`defaults`?e:this.url?o(this.url,T)||`GeoRSS`:e}set title(e){this._set(`title`,e)}load(e){let t=e==null?null:e.signal;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[`Map Service`,`Feature Service`,`Feature Collection`,`Scene Service`]},e).catch(S).then(()=>this._fetchService(t)).then(e=>{this.read(e,{origin:`service`})})),Promise.resolve(this)}async hasDataChanged(){let e=await this._fetchService();return this.read(e,{origin:`service`,ignoreDefaults:!0}),!0}async _fetchService(e){let n=this.spatialReference,{data:r}=await v(t.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:a(n)?void 0:n.wkid??JSON.stringify(n)},signal:e});return r}_hasGeometry(e){return this.featureCollections?.some(t=>t.featureSet?.geometryType===e&&t.featureSet.features?.length>0)??!1}};b([n()],k.prototype,`description`,void 0),b([n()],k.prototype,`featureCollections`,void 0),b([_(`service`,`featureCollections`,[`featureCollection.layers`])],k.prototype,`readFeatureCollections`,null),b([n({type:w,json:{name:`lookAtExtent`}})],k.prototype,`fullExtent`,void 0),b([n(d)],k.prototype,`id`,void 0),b([n(i)],k.prototype,`legendEnabled`,void 0),b([n({types:E,json:{write:!0}})],k.prototype,`lineSymbol`,void 0),b([n({type:[`show`,`hide`]})],k.prototype,`listMode`,void 0),b([n({types:D,json:{write:!0}})],k.prototype,`pointSymbol`,void 0),b([n({types:O,json:{write:!0}})],k.prototype,`polygonSymbol`,void 0),b([n({type:[`GeoRSS`]})],k.prototype,`operationalLayerType`,void 0),b([n(l)],k.prototype,`url`,void 0),b([n({json:{origins:{service:{read:{source:`name`,reader:e=>e||void 0}}}}})],k.prototype,`title`,null),b([n({readOnly:!0,json:{read:!1},value:`geo-rss`})],k.prototype,`type`,void 0),k=b([h(`esri.layers.GeoRSSLayer`)],k);var A=k;export{A as default};