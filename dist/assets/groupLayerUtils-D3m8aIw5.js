import{Fa as e,La as t,Na as n,Va as r,za as i}from"./index-BN8X5Ryz.js";import"./originUtils-CJnuu7mB.js";import"./resourceUtils-Bt8ctqoA.js";import{n as a}from"./resourceUtils-t_8WR2aj.js";import"./saveUtils-CEfw3trS.js";import{n as o,t as s}from"./utils-BnryXVma.js";var c=`Group Layer`,l=`group-layer-save`,u=`group-layer-save-as`,d=e.GROUP_LAYER_MAP;function f(e){return{isValid:e.type===`group`,errorMessage:`Layer.type should be 'group'`}}function p(e){return{isValid:r(e,d),errorMessage:`Layer.portalItem.typeKeywords should have '${d}'`}}function m(e,t){return{...n(e,`web-map`,!0),initiator:t}}function h(e){let t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function g(n,r){r.title||=n.title,t(r,e.METADATA),i(r,d)}async function _(e,t){return o({layer:e,itemType:c,validateLayer:f,validateItem:p,createJSONContext:t=>m(t,e),createItemData:h,errorNamePrefix:l,saveResources:async(t,n)=>(e.sourceIsPortalItem||await t.removeAllResources().catch(()=>{}),a(e.resourceReferences,n))},t)}async function v(e,t,n){return s({layer:e,itemType:c,validateLayer:f,createJSONContext:t=>m(t,e),createItemData:h,errorNamePrefix:u,newItem:t,setItemProperties:g,saveResources:(t,n)=>a(e.resourceReferences,n)},n)}export{_ as save,v as saveAs};