import{AT as e,Ad as t,BT as n,Cx as r,DT as i,Dd as a,Dv as o,GC as s,LT as c,Lr as l,MT as u,Mn as d,NT as f,Nn as p,OT as m,Od as ee,Oh as te,PT as h,Rr as ne,SE as g,Si as re,Zv as ie,ai as ae,ax as oe,bi as se,ci as ce,du as le,fi as ue,gD as _,gi as de,gv as fe,iE as v,ii as pe,jT as y,jd as me,jr as he,kT as ge,kv as _e,ng as ve,px as b,rh as x,ud as ye,vd as be,vv as xe,xi as Se,ya as Ce,yi as we}from"./index-CZ4oMP1N.js";import{p as Te}from"./multidimensionalUtils-DD5iyU0q.js";import{A as Ee,C as De,D as Oe,O as S,S as ke,V as Ae,b as je,k as Me,w as Ne,x as Pe,y as Fe,z as Ie}from"./RasterSymbolizer-DiWFkfms.js";import{t as C}from"./PixelBlock-HBARrhko.js";import{a as Le,c as Re,i as ze,l as w}from"./vectorFieldUtils-DMJyxx0j.js";import{r as Be}from"./datasetUtils-CRhdcyUt.js";import{i as Ve,r as He}from"./utils-Cuuurg5i.js";import{t as Ue}from"./dataUtils-BTiGb5TR.js";var T=class extends s{constructor(){super(...arguments),this.pixelType=`unknown`}};_([i({type:String,json:{write:{isRequired:!0}}})],T.prototype,`name`,void 0),_([i({type:String,json:{write:!0}})],T.prototype,`description`,void 0),_([i({type:v,json:{type:v,write:!0,name:`_object_id`}})],T.prototype,`id`,void 0),_([i({type:String,json:{type:Ae.jsonValues,read:Ae.read,write:{writer:Ae.write,isRequired:!0}}})],T.prototype,`pixelType`,void 0),_([i({type:String,json:{write:{isRequired:!0}}})],T.prototype,`type`,void 0),T=_([m(`esri.layers.support.RasterFunctionInfo`)],T);var We=T,E=class extends s{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type=`RasterFunctionVariable`}};_([i({type:String,json:{write:!0}})],E.prototype,`name`,void 0),_([i({type:Number,json:{type:v,write:!0,name:`_object_id`}})],E.prototype,`id`,void 0),_([i({type:Boolean,json:{write:!0}})],E.prototype,`isDataset`,void 0),_([i({type:Boolean,json:{write:!0}})],E.prototype,`isPublic`,void 0),_([i({json:{write:!0}})],E.prototype,`value`,void 0),_([i({type:String,json:{write:!0}})],E.prototype,`type`,void 0),E=_([m(`esri.layers.support.RasterFunctionVariable`)],E);var D={key:`type`,base:null,typeMap:{RasterFunctionVariable:E}},O=class extends s{};_([i({types:D,json:{types:D,name:`MatchVariable`}})],O.prototype,`matchVariable`,void 0),_([i({types:D,json:{types:D,name:`UnionDimension`}})],O.prototype,`unionDimension`,void 0),_([i({type:Number,json:{type:v,write:!0,name:`_object_id`}})],O.prototype,`id`,void 0),_([i({type:String,json:{write:!0}})],O.prototype,`type`,void 0),O=_([m(`esri.layers.support.RasterFunctionProperties`)],O);var Ge=O,Ke=new h({0:`mosaic`,1:`item`,2:`item-group`},{useNumericKeys:!0}),k=class extends s{constructor(){super(...arguments),this.description=``,this.functionType=`mosaic`,this.type=`RasterFunctionTemplate`}};_([i({type:[String],json:{write:!0}})],k.prototype,`aliases`,void 0),_([i({type:Object,json:{write:{isRequired:!0}}})],k.prototype,`arguments`,void 0),_([i({type:String,json:{write:{isRequired:!0}}})],k.prototype,`description`,void 0),_([i({type:We,json:{write:{isRequired:!0},name:`function`}})],k.prototype,`functionInfo`,void 0),_([i({type:Ke.apiValues,json:{type:[0,1,2],read:Ke.read,write:{writer:Ke.write,isRequired:!0}}})],k.prototype,`functionType`,void 0),_([i({type:String,json:{write:!0}})],k.prototype,`group`,void 0),_([i({type:String,json:{write:!0}})],k.prototype,`help`,void 0),_([i({type:Number,json:{type:v,write:!0,name:`_object_id`}})],k.prototype,`id`,void 0),_([i({type:String,json:{write:{isRequired:!0}}})],k.prototype,`name`,void 0),_([i({type:String,json:{write:!0,name:`definition`}})],k.prototype,`queryDefinition`,void 0),_([i({type:String,json:{write:!0}})],k.prototype,`tag`,void 0),_([i({type:Ge,json:{write:!0}})],k.prototype,`properties`,void 0),_([i({type:String,json:{write:!0}})],k.prototype,`thumbnail`,void 0),_([i({type:String,json:{write:!0}})],k.prototype,`thumbnailEx`,void 0),_([i({json:{type:[`RasterFunctionTemplate`],write:!0}})],k.prototype,`type`,void 0),k=_([m(`esri.layers.support.RasterFunctionTemplate`)],k);var qe,A=new Set([`raster`,`raster2`,`dem`,`fillraster`]),j=new Set([`rasters`]),Je=e=>e?.rasterFunction?M.fromJSON(e):e,Ye=e=>e&&e instanceof M?e.toJSON():e,Xe=e=>e?.functionName&&!e.declaredClass,Ze=e=>Xe(e)?new M(e):e,Qe=e=>{if(e==null)return null;e=g(e);let t={};for(let n of Object.keys(e))A.has(n.toLowerCase())?t[n]=Je(e[n]):j.has(n.toLowerCase())&&Array.isArray(e[n])?t[n]=e[n].map(Je):t[n]=e[n];return t},$e=e=>e?k.fromJSON({type:`RasterFunctionTemplate`,...e}):void 0,et={types:{key:`type`,base:null,typeMap:{RasterFunctionTemplate:k}},json:{write:!0,name:`rasterFunctionDefinition`,read:$e}},M=qe=class extends s{constructor(e){super(e),this.functionName=null,this.outputPixelType=`unknown`,this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){let t=Object.keys(e);if(t.some(t=>A.has(t.toLowerCase())&&Xe(e[t]))||t.some(t=>j.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some(e=>Xe(e)))){e=g(e);for(let n of t)A.has(n.toLowerCase())?e[n]=Ze(e[n]):j.has(n.toLowerCase())&&Array.isArray(e[n])&&(e[n]=e[n].map(e=>Ze(e)))}}this._set(`functionArguments`,e)}readFunctionArguments(e){return Qe(e)}writeFunctionArguments(e,t,n){let r={};for(let t of Object.keys(e))A.has(t.toLowerCase())?r[t]=Ye(e[t]):j.has(t.toLowerCase())&&Array.isArray(e[t])?r[t]=e[t].map(Ye):r[t]=Ye(e[t]);t[n]=r}readFunctionName(e,t){let n=t.rasterFunctionInfos;return t.name||(n?.length&&n[0].name!==`None`?n[0].name:t.rasterFunction||t.rasterFunctionDefinition?.name)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=$e(e)}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes(`"type":"ClipFunction"`):JSON.stringify(this).includes(`"rasterFunction":"Clip"`)}clone(){return new qe({functionName:this.functionName,functionArguments:g(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:g(this.rasterFunctionDefinition)})}};_([i({json:{type:Object,name:`rasterFunctionArguments`}})],M.prototype,`functionArguments`,null),_([y(`functionArguments`)],M.prototype,`readFunctionArguments`,null),_([e(`functionArguments`)],M.prototype,`writeFunctionArguments`,null),_([i({json:{type:String,write:{target:`rasterFunction`}}})],M.prototype,`functionName`,void 0),_([y(`functionName`,[`rasterFunction`,`rasterFunctionInfos`,`rasterFunctionDefinition`])],M.prototype,`readFunctionName`,null),_([u({C128:`c128`,C64:`c64`,F32:`f32`,F64:`f64`,S16:`s16`,S32:`s32`,S8:`s8`,U1:`u1`,U16:`u16`,U2:`u2`,U32:`u32`,U4:`u4`,U8:`u8`,UNKNOWN:`unknown`},{ignoreUnknown:!1,default:`unknown`})],M.prototype,`outputPixelType`,void 0),_([i({type:String,json:{read:!0,write:!0}})],M.prototype,`variableName`,void 0),_([i()],M.prototype,`rasterFunctionDefinition`,null),_([i(et)],M.prototype,`functionDefinition`,void 0),_([i()],M.prototype,`hasClipFunction`,null),M=qe=_([m(`esri.layers.support.RasterFunction`)],M);var tt,N=f()({MT_FIRST:`first`,MT_LAST:`last`,MT_MIN:`min`,MT_MAX:`max`,MT_MEAN:`mean`,MT_BLEND:`blend`,MT_SUM:`sum`}),P=f()({esriMosaicNone:`none`,esriMosaicCenter:`center`,esriMosaicNadir:`nadir`,esriMosaicViewpoint:`viewpoint`,esriMosaicAttribute:`attribute`,esriMosaicLockRaster:`lock-raster`,esriMosaicNorthwest:`northwest`,esriMosaicSeamline:`seamline`});function nt(e){let t;switch(e?e.toLowerCase().replace(`esrimosaic`,``):``){case`byattribute`:case`attribute`:t=`esriMosaicAttribute`;break;case`lockraster`:t=`esriMosaicLockRaster`;break;case`center`:t=`esriMosaicCenter`;break;case`northwest`:t=`esriMosaicNorthwest`;break;case`nadir`:t=`esriMosaicNadir`;break;case`viewpoint`:t=`esriMosaicViewpoint`;break;case`seamline`:t=`esriMosaicSeamline`;break;default:t=`esriMosaicNone`}return P.fromJSON(t)}var F=tt=class extends s{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=`none`,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=`first`,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending==null?t.sortAscending==null||t.sortAscending:t.ascending}readMethod(e,t){return nt(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,n){e!=null&&(e=e.filter(({variableName:e,dimensionName:t})=>e&&e!==`*`||t)).length&&(t[n]=e.map(e=>e.toJSON()))}readOperation(e,t){let n=t.mosaicOperation,r=t.mosaicOperator?.toLowerCase(),i=n||(r?N.toJSON(r):null);return N.fromJSON(i)||`first`}castSortValue(e){return e==null||typeof e==`string`||typeof e==`number`?e:`${e}`}clone(){return new tt({ascending:this.ascending,itemRasterFunction:g(this.itemRasterFunction),lockRasterIds:g(this.lockRasterIds),method:this.method,multidimensionalDefinition:g(this.multidimensionalDefinition),objectIds:g(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:g(this.viewpoint),where:this.where})}};_([i({type:Boolean,json:{write:!0}})],F.prototype,`ascending`,void 0),_([y(`ascending`,[`ascending`,`sortAscending`])],F.prototype,`readAscending`,null),_([i({type:M,json:{name:`itemRenderingRule`,write:!0}})],F.prototype,`itemRasterFunction`,void 0),_([i({type:[v],json:{write:{overridePolicy(){return{enabled:this.method===`lock-raster`}}}}})],F.prototype,`lockRasterIds`,void 0),_([i({type:P.apiValues,json:{type:P.jsonValues,write:{target:`mosaicMethod`,writer:P.write,isRequired:!0}}})],F.prototype,`method`,void 0),_([y(`method`,[`mosaicMethod`,`defaultMosaicMethod`])],F.prototype,`readMethod`,null),_([i({type:[Te],json:{write:!0}})],F.prototype,`multidimensionalDefinition`,void 0),_([e(`multidimensionalDefinition`)],F.prototype,`writeMultidimensionalDefinition`,null),_([i({type:[v],json:{name:`fids`,write:!0}})],F.prototype,`objectIds`,void 0),_([i({type:N.apiValues,json:{type:N.jsonValues,read:{reader:N.read},write:{target:`mosaicOperation`,writer:N.write}}})],F.prototype,`operation`,void 0),_([y(`operation`,[`mosaicOperation`,`mosaicOperator`])],F.prototype,`readOperation`,null),_([i({type:String,json:{write:{overridePolicy(){return{enabled:this.method===`attribute`}}}}})],F.prototype,`sortField`,void 0),_([i({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method===`attribute`,allowNull:!0}}}}})],F.prototype,`sortValue`,void 0),_([ge(`sortValue`)],F.prototype,`castSortValue`,null),_([i({type:b,json:{write:!0}})],F.prototype,`viewpoint`,void 0),_([i({type:String,json:{write:!0}})],F.prototype,`where`,void 0),F=tt=_([m(`esri.layers.support.MosaicRule`)],F);var rt,it={base:r,key:`type`,typeMap:{extent:oe,polygon:_e}},I=rt=class extends s{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){let{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];let t=new Map;e.forEach(e=>{if(!e.dimensionName)return;let n,r;if(Array.isArray(e.values[0])){let t=e.values;n=t[0][0],r=t[e.values.length-1][1]}else{let t=e.values;n=t[0],r=t[e.values.length-1]}if(t.has(e.dimensionName)){let i=t.get(e.dimensionName);i[0]=Math.min(n,i[0]),i[1]=Math.max(r,i[1])}else t.set(e.dimensionName,[n,r])});let n=[];for(let e of t)n.push({name:e[0],extent:e[1]});return n}get variables(){let{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];let t=new Set;return e.forEach(e=>{e.variableName&&t.add(e.variableName)}),[...t]}clone(){let e=this.subsetDefinitions?.map(e=>e.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new rt({areaOfInterest:t,subsetDefinitions:e})}};_([i({types:it,json:{read:xe,write:!0}})],I.prototype,`areaOfInterest`,void 0),_([i({readOnly:!0})],I.prototype,`dimensions`,null),_([i({readOnly:!0})],I.prototype,`variables`,null),_([i({type:[Te],json:{write:!0}})],I.prototype,`subsetDefinitions`,void 0),I=rt=_([m(`esri.layers.support.MultidimensionalSubset`)],I);var at,L=new h({flow_from:`flow-from`,flow_to:`flow-to`}),R=at=class extends pe(s){constructor(e){super(e),this.density=.8,this.color=new x([255,255,255,1]),this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation=`flow-from`,this.type=`flow`,this.authoringInfo=null,this.legendOptions=null,this.trailCap=`butt`,this.background=`none`}get maxPathLength(){return this._get(`maxPathLength`)??200}set maxPathLength(e){this._set(`maxPathLength`,e)}get trailWidth(){return this._get(`trailWidth`)??1.5}set trailWidth(e){this._set(`trailWidth`,e)}get visualVariables(){return super.visualVariables}set visualVariables(e){super.visualVariables=e}clone(){let{density:e,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,smoothing:a,flowRepresentation:o,trailCap:s,background:c}=this,l=this.color.clone(),u=(this.visualVariables||[]).map(e=>e.clone()),d=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new at({density:e,color:l,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,trailCap:s,background:c,smoothing:a,flowRepresentation:o,visualVariables:u,authoringInfo:d,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};_([i({type:Number,json:{write:!0}})],R.prototype,`density`,void 0),_([i({type:x,json:{type:[v],write:{allowNull:!0}}})],R.prototype,`color`,void 0),_([i({type:Number,cast:ve,json:{write:!0}})],R.prototype,`maxPathLength`,null),_([i({type:Number,cast:ve,json:{write:!0}})],R.prototype,`trailWidth`,null),_([i({type:Number,json:{write:!0}})],R.prototype,`flowSpeed`,void 0),_([i({type:Number,json:{write:!0}})],R.prototype,`trailLength`,void 0),_([i({type:Number,cast:ve,json:{write:!1}})],R.prototype,`smoothing`,void 0),_([i({type:L.apiValues,json:{type:L.jsonValues,read:{reader:L.read},write:{writer:L.write}}})],R.prototype,`flowRepresentation`,void 0),_([u({flowRenderer:`flow`}),i({json:{write:{isRequired:!0}}})],R.prototype,`type`,void 0),_([i({type:we,json:{write:!0}})],R.prototype,`authoringInfo`,void 0),_([i({type:ne,json:{write:!0}})],R.prototype,`legendOptions`,void 0),_([i({type:[`butt`,`round`],json:{write:!0}})],R.prototype,`trailCap`,void 0),_([i({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],R.prototype,`background`,void 0),R=at=_([m(`esri.renderers.FlowRenderer`)],R);var z=class extends s{constructor(e){super(e),this.value=null,this.label=null,this.color=null}};_([i({type:Number,json:{write:{isRequired:!0}}})],z.prototype,`value`,void 0),_([i({type:String,json:{write:!0}})],z.prototype,`label`,void 0),_([i({type:x,json:{type:[v],write:{isRequired:!0}}})],z.prototype,`color`,void 0),z=_([m(`esri.renderers.support.ColormapInfo`)],z);var B,V=B=class extends s{constructor(e){super(e),this.colormapInfos=null,this.type=`raster-colormap`}static createFromColormap(e,t){if(!e)return null;let n=e[0].length===5,r=[...e].sort((e,t)=>e[0]-t[0]).map(e=>z.fromJSON({value:e[0],color:n?e.slice(1,5):e.slice(1,4).concat([255]),label:t?t[e[0]]??``:e[0]}));return new B({colormapInfos:r})}static createFromColorramp(e){let t=Me(e);return B.createFromColormap(t)}clone(){return new B({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};_([i({type:[z],json:{write:{isRequired:!0}}})],V.prototype,`colormapInfos`,void 0),_([u({rasterColormap:`raster-colormap`}),i({json:{write:{isRequired:!0}}})],V.prototype,`type`,void 0),V=B=_([m(`esri.renderers.RasterColormapRenderer`)],V);var ot,H=ot=class extends s{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType=`traditional`,this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType=`none`,this.type=`raster-shaded-relief`,this.zFactor=1}readColorRamp(e){return Se(e)}clone(){return new ot({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:g(this.colorRamp)})}};_([i({type:Number,json:{write:{isRequired:!0}}})],H.prototype,`altitude`,void 0),_([i({type:Number,json:{write:{isRequired:!0}}})],H.prototype,`azimuth`,void 0),_([i({types:se,json:{write:!0}})],H.prototype,`colorRamp`,void 0),_([y(`colorRamp`)],H.prototype,`readColorRamp`,null),_([i({type:[`traditional`,`multi-directional`],json:{write:{isRequired:!0}}})],H.prototype,`hillshadeType`,void 0),_([i({type:Number,json:{write:!0}})],H.prototype,`pixelSizePower`,void 0),_([i({type:Number,json:{write:!0}})],H.prototype,`pixelSizeFactor`,void 0),_([i({type:[`none`,`adjusted`],json:{write:{isRequired:!0}}})],H.prototype,`scalingType`,void 0),_([u({rasterShadedRelief:`raster-shaded-relief`}),i({json:{write:{isRequired:!0}}})],H.prototype,`type`,void 0),_([i({type:Number,json:{write:{isRequired:!0}}})],H.prototype,`zFactor`,void 0),H=ot=_([m(`esri.renderers.RasterShadedReliefRenderer`)],H);var st,U=st=class extends s{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.histograms=null,this.customStatistics=null,this.useGamma=!1,this.stretchType=`none`,this.type=`raster-stretch`}readColorRamp(e){if(e)return Se(e)}readCustomStatistics(e){return e?.map(e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]}))}writeCustomStatistics(e,t,n){e?.length&&(t[n]=e.map(e=>[e.min,e.max,e.avg??0,e.stddev??1]))}readStretchType(e,t){let n=t.stretchType;return typeof n==`number`&&(n=Oe[n]),S.read(n)}clone(){return new st({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,customStatistics:g(this.customStatistics),gamma:g(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:g(this.colorRamp),histograms:g(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};_([i({types:se,json:{write:!0}})],U.prototype,`colorRamp`,void 0),_([y(`colorRamp`)],U.prototype,`readColorRamp`,null),_([i({type:Boolean,json:{write:!0}})],U.prototype,`computeGamma`,void 0),_([i({type:Boolean,json:{write:{target:`dra`},read:{source:`dra`}}})],U.prototype,`dynamicRangeAdjustment`,void 0),_([i({type:[Number],json:{write:!0}})],U.prototype,`gamma`,void 0),_([i({type:Number,json:{write:!0}})],U.prototype,`maxPercent`,void 0),_([i({type:Number,json:{write:!0}})],U.prototype,`minPercent`,void 0),_([i({type:Number,json:{write:!0}})],U.prototype,`numberOfStandardDeviations`,void 0),_([i({type:Number,json:{read:{source:`max`},write:{target:`max`}}})],U.prototype,`outputMax`,void 0),_([i({type:Number,json:{read:{source:`min`},write:{target:`min`}}})],U.prototype,`outputMin`,void 0),_([i({type:Number,json:{write:!0}})],U.prototype,`sigmoidStrengthLevel`,void 0),_([i()],U.prototype,`histograms`,void 0),_([i({json:{type:[[Number]],name:`statistics`,write:!0}})],U.prototype,`customStatistics`,void 0),_([y(`customStatistics`)],U.prototype,`readCustomStatistics`,null),_([e(`customStatistics`)],U.prototype,`writeCustomStatistics`,null),_([i({type:Boolean,json:{write:!0}})],U.prototype,`useGamma`,void 0),_([i({type:S.apiValues,json:{type:S.jsonValues,write:S.write}})],U.prototype,`stretchType`,void 0),_([y(`stretchType`,[`stretchType`])],U.prototype,`readStretchType`,null),_([u({rasterStretch:`raster-stretch`})],U.prototype,`type`,void 0),U=st=_([m(`esri.renderers.RasterStretchRenderer`)],U);var ct,lt=new Set([`esriMetersPerSecond`,`esriKilometersPerHour`,`esriKnots`,`esriFeetPerSecond`,`esriMilesPerHour`]),W=new h({beaufort_ft:`beaufort-ft`,beaufort_km:`beaufort-km`,beaufort_kn:`beaufort-kn`,beaufort_m:`beaufort-m`,beaufort_mi:`beaufort-mi`,classified_arrow:`classified-arrow`,ocean_current_kn:`ocean-current-kn`,ocean_current_m:`ocean-current-m`,simple_scalar:`simple-scalar`,single_arrow:`single-arrow`,wind_speed:`wind-barb`}),G=new h({flow_from:`flow-from`,flow_to:`flow-to`}),K=ct=class extends pe(s){constructor(e){super(e),this.attributeField=`Magnitude`,this.flowRepresentation=`flow-from`,this.rotationType=`arithmetic`,this.style=`single-arrow`,this.symbolTileSize=50,this.type=`vector-field`}readInputUnit(e,t){return lt.has(e)?w.fromJSON(e):null}readOutputUnit(e,t){return lt.has(e)?w.fromJSON(e):null}get styleRenderer(){let e=this.style,t=this.attributeField,n=this._createStyleRenderer(e);return n.field=t,n}get visualVariables(){return super.visualVariables}set visualVariables(e){super.visualVariables=e}get sizeVariables(){let e=[];if(this.visualVariables)for(let t of this.visualVariables)t.type===`size`&&e.push(t);if(e.length===0){let t=new ae({field:`Magnitude`,minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set(`visualVariables`,[t]),e.push(t)}return e}get rotationVariables(){let e=[];if(this.visualVariables)for(let t of this.visualVariables)t.type===`rotation`&&e.push(t);if(e.length===0){let t=new de({field:`Direction`,rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set(`visualVariables`,[t]),e.push(t)}return e}clone(){return new ct({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:g(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,n=[]){let r=[],i=ze(this.inputUnit,this.outputUnit),a=this.rotationVariables[0]?.rotationType||this.rotationType,o=t?Le(e.pixelBlock,`vector-uv`,a,i):Re(e.pixelBlock,`vector-magdir`,i);if(o==null)return r;let s=e.extent,c=o.mask!=null&&o.mask.length>0,l=0,u=(s.xmax-s.xmin)/o.width,d=(s.ymax-s.ymin)/o.height;for(let e=0;e<o.height;e++)for(let t=0;t<o.width;t++,l++){let i=new b({x:s.xmin+t*u+u/2,y:s.ymax-e*d-d/2,spatialReference:s.spatialReference});i=(await le(i))[0];let a=n.some(e=>e.intersects(i));if((!c||o.mask[l])&&!a){let e={Magnitude:o.pixels[0][l],Direction:o.pixels[1][l]},t=new be({geometry:new b({x:i.x,y:i.y,spatialReference:s.spatialReference}),attributes:e});t.symbol=this._getVisualVariablesAppliedSymbol(t),r.push(t)}}return r}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new a({path:`M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z`,outline:new me({width:0}),size:20,color:e||new x([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;let t=this.styleRenderer?.getSymbol(e)?.clone(),n=this.sizeVariables,r=this.rotationVariables;if(n&&n.length&&this.sizeVariables.forEach(n=>He(t,ce([n],e))),r&&r.length){let n=this.flowRepresentation===`flow-to`==(this.style===`ocean-current-kn`||this.style===`ocean-current-m`)?0:180;e.attributes.Direction=e.attributes.Direction+n,this.rotationVariables.forEach(n=>Ve(t,ue(n,e),n.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case`single-arrow`:t=this._createSingleArrowRenderer();break;case`beaufort-kn`:t=this._createBeaufortKnotsRenderer();break;case`beaufort-m`:t=this._createBeaufortMeterRenderer();break;case`beaufort-ft`:t=this._createBeaufortFeetRenderer();break;case`beaufort-mi`:t=this._createBeaufortMilesRenderer();break;case`beaufort-km`:t=this._createBeaufortKilometersRenderer();break;case`ocean-current-m`:t=this._createCurrentMeterRenderer();break;case`ocean-current-kn`:t=this._createCurrentKnotsRenderer();break;case`simple-scalar`:t=this._createSimpleScalarRenderer();break;case`wind-barb`:t=this._createWindBarbsRenderer();break;case`classified-arrow`:t=this._createClassifiedArrowRenderer()}return new d(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}_createBeaufortMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortFeetRenderer(){let e=this._getDefaultSymbol(new x([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*3.28084),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortMilesRenderer(){let e=this._getDefaultSymbol(new x([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*2.23694),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortKilometersRenderer(){let e=this._getDefaultSymbol(new x([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*3.6),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createCurrentMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}_createCurrentKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}_createClassifiedArrowRenderer(){let e=this._getDefaultSymbol(new x([56,168,0])),t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){let e=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(e&&n){let r=(n-e)/5;t=Array.from([,,,,,,].keys()).map(t=>e+r*t)}}return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}_createSimpleScalarRenderer(){return{defaultSymbol:t.fromJSON({imageData:`iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=`,height:20,width:20,type:`esriPMS`,angle:0})}}_createWindBarbsRenderer(){let e=Array.from(Array(31).keys()).map(e=>5*e),n=[{range:`0-5`,path:`M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`5-10`,path:`M25 0 L25 40 M25 35 L17.5 37.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`10-15`,path:`M25 0 L25 40 L10 45 L25 40`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`15-20`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`20-25`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`25-30`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`30-35`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`35-40`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`40-45`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`45-50`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`50-55`,path:`M25 0 L25 40 L10 40 L25 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`55-60`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`60-65`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`65-70`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`70-75`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`75-80`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`80-85`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`85-90`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`90-95`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`95-100`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`100-105`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`105-110`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`110-115`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`115-120`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`120-125`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`125-130`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`130-135`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`135-140`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`140-145`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`145-150`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`}],r=t.fromJSON({imageData:`iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC`,height:20,width:20,type:`esriPMS`,angle:0}),i=e.map((i,a)=>{let o;if(a!==e.length-1)if(a===0)o={minValue:i,maxValue:e[a+1],symbol:r};else{let r=t.fromJSON({type:`esriPMS`,imageData:n[a].imageData,contentType:`image/svg+xml`,height:32,width:32,angle:0});o={minValue:i,maxValue:e[a+1],symbol:r}}return new p(o)});return{defaultSymbol:r,classBreakInfos:i}}_getClassBreaks(e,t){return t.map((t,n)=>new p({minValue:e[n],maxValue:e[n+1],symbol:this._getDefaultSymbol(new x(t))}))}};_([i({type:[`Magnitude`],json:{write:!0}})],K.prototype,`attributeField`,void 0),_([i({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],K.prototype,`flowRepresentation`,void 0),_([i({type:[`geographic`,`arithmetic`],json:{write:!0}})],K.prototype,`rotationType`,void 0),_([i({type:W.apiValues,json:{type:W.jsonValues,read:{reader:W.read},write:{writer:W.write}}})],K.prototype,`style`,void 0),_([i({json:{write:!0}})],K.prototype,`symbolTileSize`,void 0),_([i({type:w.apiValues,json:{type:w.jsonValues,write:{writer:w.write}}})],K.prototype,`inputUnit`,void 0),_([y(`inputUnit`)],K.prototype,`readInputUnit`,null),_([i({type:w.apiValues,json:{type:w.jsonValues,read:{reader:w.read},write:{writer:w.write}}})],K.prototype,`outputUnit`,void 0),_([y(`outputUnit`)],K.prototype,`readOutputUnit`,null),_([u({vectorField:`vector-field`})],K.prototype,`type`,void 0),_([i({type:d})],K.prototype,`styleRenderer`,null),_([i({type:ae})],K.prototype,`sizeVariables`,null),_([i({type:de})],K.prototype,`rotationVariables`,null),K=ct=_([m(`esri.renderers.VectorFieldRenderer`)],K);var ut=.25,dt=re.fromJSON({type:`multipart`,colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),ft=re.fromJSON(Ee[0]),pt=new Set([`scientific`,`standard-time`,`vector-uv`,`vector-magdir`,`vector-u`,`vector-v`,`vector-magnitude`,`vector-direction`]);function mt(e){return e.presetRenderers?.find(({method:t,value:n})=>t===`raster-function-template`?n===e.rasterFunctionName:t===`variable`&&n===e.variableName)}function ht(e,t){let{attributeTable:n,colormap:r}=e;if(Pe(e)){let t=At(e);if(t!=null)return t}if(t?.rasterFunctionColorRamp){let n=yt(e,t);return n.colorRamp=t.rasterFunctionColorRamp,n}if(r!=null){let t=Ot(e);if(t!=null)return t}if(n!=null){let t=Tt(e);if(t!=null)return t}return yt(e,t)}function gt(e,t=!1){let n=[`raster-stretch`];return Ne(e,t)&&n.push(`raster-colormap`),De(e)&&n.push(`unique-value`),ke(e,t)&&n.push(`class-breaks`),Fe(e)&&n.push(`raster-shaded-relief`),Pe(e)&&n.push(`vector-field`),je(e)&&n.push(`flow`),n}function _t(e){return Be(e)&&e.rasterFunction.functionName===`Colormap`?e.rasterFunction.colorRamp:void 0}function vt(e,t,n){let r=[`nearest`,`bilinear`,`cubic`,`majority`],i=n?.toLowerCase().replace(`bicubic`,`cubic`),a=r.find(e=>e===i);return t===`Map`?a??`bilinear`:e.dataType===`standard-time`?a??`nearest`:e.dataType===`thematic`||e.attributeTable||e.colormap?a===`nearest`||a===`majority`?a:`nearest`:a??`bilinear`}function yt(e,t){e=bt(e,t?.variableName);let{bandCount:n}=e,{bandIds:r,stretchType:i}=t||{};r?.some(e=>e>=n)&&(r=null);let a=e.statistics,o=e.histograms;n>1?(r=r?.length?r:xt(e),a=a==null?null:r?.map(e=>a[e]),o=o==null?null:r?.map(e=>o[e])):r=[0],i??=wt(e),t?.includeStatisticsInStretch&&(i===`percent-clip`||i===`histogram-equalization`)&&e.statistics?.length&&(i=`min-max`);let s=!1;switch(i){case`none`:s=!1;break;case`percent-clip`:s=!o?.length;break;default:s=!a?.length}let{dataType:c}=e,l=r?.length===1&&pt.has(c)?dt:null,u=new U({stretchType:i,dynamicRangeAdjustment:s,colorRamp:l,outputMin:0,outputMax:255,gamma:r?.length===1?[1]:[1,1,1],useGamma:!1});return i===`percent-clip`?u.maxPercent=u.minPercent=ut:i===`standard-deviation`&&(u.numberOfStandardDeviations=2),s||e.multidimensionalInfo==null&&!t?.includeStatisticsInStretch||(i===`percent-clip`?u.histograms=o:i!==`min-max`&&i!==`standard-deviation`||(u.customStatistics=a?.map(e=>({...e})))),u}function bt(e,t){let{multidimensionalInfo:n}=e;if(!t||!n)return e;let r=n.variables.find(e=>e.name===t);if(!r)return e;if(e=e.clone(),r){let{statistics:t,histograms:n}=r;t?.length&&(e.statistics=t.map(e=>({min:e.min,max:e.max,avg:e.avg,stddev:e.stddev}))),n?.length&&(e.histograms=n)}return e}function xt(e){let t=e.bandCount;if(t===1)return null;if(t===2)return[0];let{bandInfos:n}=e,r;if(n.length===t){let{red:e,green:t,blue:i,nir:a}=St(n);e!=null&&t!=null&&i!=null?r=[e,t,i]:a!=null&&e!=null&&t!=null&&(r=[a,e,t])}return!r&&t>=3&&(r=[0,1,2]),r}function St(e){let t={};for(let n=0;n<e.length;n++){let r=e[n].name.toLowerCase();r===`red`?t.red=n:r===`green`?t.green=n:r===`blue`?t.blue=n:r!==`nearinfrared`&&r!==`nearinfrared_1`&&r!==`nir`||(t.nir=n)}if(t.blue==null||t.green==null||t.red==null||t.nir==null){let n=Ct(e);if(t.blue??=q(n,480),t.green??=q(n,550),t.red??=q(n,660),t.nir==null){let r=Ct(e,800);t.nir=q(r,810)??q(n,810)}}return t}function q(e,t,n=60){let r,i=n;for(let n of e){let e=Math.abs(n.wavelength-t);e<=i&&(i=e,r=n.index)}return r}function Ct(e,t){return e.map(({name:e,minWavelength:n,maxWavelength:r},i)=>/thermal/i.test(e)||/pan/i.test(e)||t!=null&&r!=null&&r<t?null:{wavelength:n!=null&&r!=null?(n+r)/2:n??r??0,index:i}).filter(e=>e!=null)}function wt(e){let t=`percent-clip`,{pixelType:n,dataType:r,histograms:i,statistics:a,multidimensionalInfo:o}=e,s=pt.has(r)||r===`generic`&&o!=null;return n!==`u8`||r!==`processed`&&i!=null&&a!=null?n===`u8`||r===`elevation`||s?t=`min-max`:i==null?a!=null&&(t=`min-max`):t=`percent-clip`:t=`none`,t}function Tt(e,t,n,r){if(!De(e,t))return null;let{attributeTable:i,statistics:a}=e,o=Et(i,t),s=J(i,`red`),c=J(i,`green`),u=J(i,`blue`),d=new we,f=[],p=new Set,m=!!(s&&c&&u);if(i!=null)i.features.forEach(e=>{let t=e.attributes[o.name];if(!p.has(e.attributes[o.name])&&t!=null){p.add(t);let n=m&&(s.type===`single`||s.type===`double`)&&(c.type===`single`||c.type===`double`)&&(u.type===`single`||u.type===`double`)&&!i.features.some(e=>e.attributes[s.name]>1||e.attributes[c.name]>1||e.attributes[u.name]>1),r=n?255:1;f.push(new l({value:e.attributes[o.name],label:e.attributes[o.name]+``,symbol:new ee({style:`solid`,outline:null,color:new x(m?[e.attributes[s.name]*r,e.attributes[c.name]*r,e.attributes[u.name]*r,1]:[0,0,0,0])})}))}});else if(a?.[0])for(let e=a[0].min;e<=a[0].max;e++)f.push(new l({value:e,label:e.toString(),symbol:new ee({style:`solid`,outline:null,color:new x([0,0,0,0])})}));if(f.sort((e,t)=>e.value&&typeof e.value.valueOf()==`string`?0:e.value>t.value?1:-1),!m){let e=Me(ft,{numColors:f.length});f.forEach((t,n)=>t.symbol.color=new x(e[n].slice(1,4))),d.colorRamp=ft}if(n||r){let e=n||Me(r,{numColors:f.length}).map(e=>e.slice(1));f.forEach((t,n)=>t.symbol.color=new x(e[n])),d.colorRamp=r}return new he({field:o.name,uniqueValueInfos:f,authoringInfo:d})}function Et(e,t,n){let r;return e==null?r=new ye({name:`value`}):(r=t?e.fields.find(e=>t.toLowerCase()===e.name.toLowerCase()):Dt(e.fields),r||(n||(r=e.fields.find(e=>e.type===`string`)),r||=J(e,`value`))),r}function Dt(e){let t;for(let n=0;n<e.length;n++){let r=e[n].name.toLowerCase();if(e[n].type===`string`){if(r.startsWith(`class`)){t=e[n];break}t==null&&(r.endsWith(`name`)||r.endsWith(`type`))&&(t=e[n])}}return t}function J(e,t){return e==null?null:e.fields.find(e=>e.name.toLowerCase()===t)}function Ot(e){if(!Ne(e))return null;let t,{attributeTable:n,colormap:r}=e;if(n!=null){let e=J(n,`value`),r=Et(n,null,!0);r.type===`string`&&(t={},n.features.forEach(n=>{let i=n.attributes;t[i[e.name]]=r?i[r.name]:i[e.name]}))}return V.createFromColormap(r,t)}var kt=new Map([[`m/s`,`meter-per-second`],[`km/h`,`kilometer-per-hour`],[`knots`,`knots`],[`ft/s`,`feet-per-second`],[`mph`,`mile-per-hour`]]);function At(e){if(!Pe(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType===`vector-magdir`||e.dataType===`vector-uv`)){let{minMagnitude:n,maxMagnitude:r}=Nt(e.dataType,e.statistics);t=[new ae({field:`Magnitude`,minSize:10,maxSize:40,minDataValue:n,maxDataValue:r})]}let n=e.multidimensionalInfo==null?void 0:kt.get(e.multidimensionalInfo.variables[0].unit),r=new K({visualVariables:t,inputUnit:n,rotationType:`geographic`});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function jt(e){return{color:e.symbolLayers[0].material?.color,type:`esriSFS`,style:`esriSFSSolid`}}function Mt(e){if(e.type===`uniqueValue`){let t=e.uniqueValueInfos;return(t?.[0].symbol)?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(e=>({value:e.value,label:e.label,symbol:e.symbol?jt(e.symbol):null}))),e}if(e.type===`classBreaks`){let t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(e=>({classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?jt(e.symbol):null}))),e}return e}function Nt(e,t){let n,r;if(e===`vector-magdir`)n=t[0].min,r=t[0].max;else{let e=t[0].min,i=t[0].max,a=t[1].min,o=t[1].max;n=0,r=Math.max(Math.abs(e),Math.abs(a),Math.abs(i),Math.abs(o))}return{minMagnitude:n,maxMagnitude:r}}var Pt={key:`type`,base:null,typeMap:{"class-breaks":d,flow:R,"raster-colormap":V,"raster-shaded-relief":H,"raster-stretch":U,"unique-value":he,"vector-field":K}},Ft={...Pt,typeMap:{...Pt.typeMap}};delete Ft.typeMap[`vector-field`];var It={classBreaks:d,flowRenderer:R,rasterColormap:V,rasterShadedRelief:H,rasterStretch:U,uniqueValue:he,vectorField:K};function Lt(e){return e&&It[e.type]||null}function Rt(e,t){if(!e)return null;if(e.type===`classBreaks`&&e.classificationMethod){let t=e.authoringInfo||{classificationMethod:``};t.classificationMethod=e.classificationMethod,e.authoringInfo=t}e.type===`vectorField`&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);let n=Lt(e);if(n){let r=new n;return r.read(e,t),r}return t?.messages&&e&&t.messages.push(new c(`renderer:unsupported`,`Renderers of type '`+(e.type||`unknown`)+`' are not supported`,{definition:e,context:t})),null}var zt,Y=zt=class extends s{constructor(e){super(e),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,n){e!=null&&(t.geometryType=o(e),t[n]=e.toJSON())}clone(){return new zt(g({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};_([i({types:fe,json:{read:xe}})],Y.prototype,`geometry`,void 0),_([e(`geometry`)],Y.prototype,`writeGeometry`,null),_([i({type:F,json:{write:!0}})],Y.prototype,`mosaicRule`,void 0),_([i({type:M,json:{write:!0,name:`renderingRule`}})],Y.prototype,`rasterFunction`,void 0),_([i({type:b,json:{write:!0}})],Y.prototype,`pixelSize`,void 0),_([i({json:{write:!0}})],Y.prototype,`raster`,void 0),_([i({type:te,json:{read:{source:`time`},write:{target:`time`}}})],Y.prototype,`timeExtent`,void 0),Y=zt=_([m(`esri.rest.support.ImageHistogramParameters`)],Y);var Bt,X=Bt=class extends s{constructor(){super(...arguments),this.geometry=null,this.interpolation=`nearest`,this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.raster=void 0,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,n){e!=null&&(t.geometryType=o(e),t[n]=e.toJSON())}set locations(e){if(e?.length){let t=new ie({spatialReference:e[0].spatialReference,points:e.map(({x:e,y:t})=>[e,t])});this._set(`locations`,e),this.geometry=t}}clone(){return new Bt(g({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};_([i({types:fe,json:{read:xe}})],X.prototype,`geometry`,void 0),_([e(`geometry`)],X.prototype,`writeGeometry`,null),_([i({type:[b]})],X.prototype,`locations`,null),_([i({type:String,json:{type:Ie.jsonValues,read:Ie.read,write:Ie.write}})],X.prototype,`interpolation`,void 0),_([i({type:F,json:{write:!0}})],X.prototype,`mosaicRule`,void 0),_([i({type:[String],json:{write:!0}})],X.prototype,`outFields`,void 0),_([i({type:b,json:{write:!0}})],X.prototype,`pixelSize`,void 0),_([i({type:String,json:{write:!0}})],X.prototype,`raster`,void 0),_([i({type:Boolean,json:{write:!0}})],X.prototype,`returnFirstValueOnly`,void 0),_([i({type:Number,json:{write:!0}})],X.prototype,`sampleDistance`,void 0),_([i({type:Number,json:{write:!0}})],X.prototype,`sampleCount`,void 0),_([i({type:Number,json:{write:!0}})],X.prototype,`sliceId`,void 0),_([i({type:te,json:{read:{source:`time`},write:{target:`time`}}})],X.prototype,`timeExtent`,void 0),X=Bt=_([m(`esri.rest.support.ImageSampleParameters`)],X);var Z=class extends s{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};_([i({json:{write:!0}})],Z.prototype,`attributes`,void 0),_([i({type:b,json:{write:!0}})],Z.prototype,`location`,void 0),_([i({json:{write:!0}})],Z.prototype,`locationId`,void 0),_([i({json:{write:!0}})],Z.prototype,`rasterId`,void 0),_([i({json:{write:!0}})],Z.prototype,`resolution`,void 0),_([i({json:{write:!0}})],Z.prototype,`pixelValue`,void 0),Z=_([m(`esri.rest.support.ImageSample`)],Z);var Q=class extends s{constructor(e){super(e),this.samples=[]}};_([i({type:[Z],json:{write:!0}})],Q.prototype,`samples`,void 0),Q=_([m(`esri.rest.support.ImageSampleResult`)],Q);var Vt=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){let e=await Ce(`RasterWorker`);this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&=(this._workerThread.close(),null)}async convertVectorFieldData(e,t){$(this._workerThread);let n=e.pixelBlock.getTransferableObject().pixelBlock,r=await this._workerThread.invoke(`convertVectorFieldData`,{pixelBlock:n,type:e.dataType},t);return r?new C(r):null}async convertPixelBlockToFeatures(e,t){$(this._workerThread);let n=await this._workerThread.invoke(`convertPixelBlockToFeatures`,{pixelBlock:e.pixelBlock.toJSON(),extent:e.extent.toJSON(),fieldNames:e.fieldNames,skipFactor:e.skipFactor,pixelIdOffset:e.pixelIdOffset,imageRowSize:e.imageRowSize},t),r=e.extent.spatialReference?.toJSON();return n.forEach(e=>e.geometry.spatialReference=r),n}computeStatisticsHistograms(e,t){$(this._workerThread);let{transferList:n,pixelBlock:r}=e.pixelBlock.getTransferableObject();return t?.transferPixelsToWorker&&(t={...t,transferList:n}),this._workerThread.invoke(`computeStatisticsHistograms`,{...e,pixelBlock:r},t)}async transformPixels(e,t){$(this._workerThread);let{transferList:n,pixelBlock:r}=e.pixelBlock.getTransferableObject();t?.transferPixelsToWorker&&(t={...t,transferList:n});let i=await this._workerThread.invoke(`transformPixels`,{...e,pixelBlock:r},t);return C.fromJSON(i)}async compositeBands(e,t){$(this._workerThread);let n=e.pixelBlocks.map(e=>e?.getTransferableObject()),r={pixelBlocks:n.map(e=>e?.pixelBlock)};if(t?.transferPixelsToWorker){let e=n.flatMap(e=>e?.transferList).filter(e=>e!=null);t={...t,transferList:e}}let i=await this._workerThread.invoke(`compositeBands`,r,t);return i?C.fromJSON(i):null}async decode(e,t){$(this._workerThread);let n=await this._workerThread.invoke(`decode`,e,{...t,transferList:[e.data]});return n?new C(n):null}async symbolize(e,t){$(this._workerThread);let n=e.pixelBlock?.getTransferableObject().pixelBlock,r={extent:e.extent?.toJSON(),pixelBlock:n,simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},i=await this._workerThread.invoke(`symbolize`,r,t);return i?new C(i):null}async highlightPixels(e,t){$(this._workerThread);let n={pixelBlock:e.pixelBlock?.toJSON(),renderedPixelBlock:e.renderedPixelBlock?.toJSON(),highlightOptions:e.highlightOptions},r=await this._workerThread.invoke(`highlightPixels`,n,t);e.renderedPixelBlock.pixels=r.pixels,e.renderedPixelBlock.mask=r.mask,e.renderedPixelBlock.maskIsAlpha=r.maskIsAlpha}async updateSymbolizer(e,t){$(this._workerThread);let n=e?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast(`updateSymbolizer`,{symbolizerJSON:e.toJSON(),histograms:n},t))}async updateRasterFunction(e,t){$(this._workerThread),await Promise.all(this._workerThread.broadcast(`updateRasterFunction`,{rasterFunctionJSON:e.toJSON()},t))}async process(e,t){$(this._workerThread);let n=await this._workerThread.invoke(`process`,{extent:e.extent?.toJSON(),primaryPixelSizes:e.primaryPixelSizes?.map(e=>e==null?null:e.toJSON()),primaryPixelBlocks:e.primaryPixelBlocks.map(e=>e?.getTransferableObject().pixelBlock),primaryRasterIds:e.primaryRasterIds},t);return n?new C(n):null}async stretch(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock,stretchParams:e.stretchParams},r=await this._workerThread.invoke(`stretch`,n,t);return r?new C(r):null}async split(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock,tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel,useBilinear:e.useBilinear},r=await this._workerThread.invoke(`split`,n,t);return r&&r.forEach((e,t)=>{r.set(t,e?C.fromJSON(e):null)}),r}async clipTile(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n=e.pixelBlock.getTransferableObject().pixelBlock,r={...e,pixelBlock:n},i=await this._workerThread.invoke(`clipTile`,r,t);return i?C.fromJSON(i):null}async estimateStatisticsHistograms(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock};return await this._workerThread.invoke(`estimateStatisticsHistograms`,n,t)}async mosaicAndTransform(e,t){if($(this._workerThread),!e?.srcPixelBlocks?.length)return{pixelBlock:null};let n=e.srcPixelBlocks.map(e=>e?.getTransferableObject()),r={...e,srcPixelBlocks:n.map(e=>e?.pixelBlock)};if(t?.transferPixelsToWorker){let e=n.flatMap(e=>e?.transferList).filter(e=>e!=null);t={...t,transferList:e}}let i=await this._workerThread.invoke(`mosaicAndTransform`,r,t);return{pixelBlock:i.pixelBlock?new C(i.pixelBlock):null,localNorthDirections:i.localNorthDirections}}async createFlowMesh(e,t){$(this._workerThread);let n={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:r,simulationSettings:i}=e,a=await this._workerThread.invoke(`createFlowMesh`,{meshType:r,flowData:n,simulationSettings:i},{...t,transferList:[n.buffer,n.maskBuffer]});return{vertexData:new Float32Array(a.vertexBuffer),indexData:new Uint32Array(a.indexBuffer)}}getProjectionOffsetGrid(e,t){$(this._workerThread);let n=e.datumTransformation==null?null:e.datumTransformation.steps.map(e=>({wkid:e.wkid,wkt:e.wkt,isInverse:e.isInverse})),r=e.rasterTransform==null?null:e.rasterTransform.toJSON(),i={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:n,rasterTransform:r,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke(`getProjectionOffsetGrid`,i,t)}};function $(e){if(e==null)throw new n(`raster-jobhandler:no-connection`,`no available worker connection`)}var Ht=e=>{let t=e,n=class extends t{constructor(){super(...arguments),this._rasterJobHandlerConfig={instance:null,refCount:0,connectionPromise:null}}get _rasterJobHandler(){return this._rasterJobHandlerConfig.instance}increaseRasterJobHandlerUsage(){this._rasterJobHandlerConfig.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandlerConfig.refCount--,this._rasterJobHandlerConfig.refCount<=0&&this._shutdownJobHandler()}async convertVectorFieldData(e,t,n){if(e==null)return null;let r=this._rasterJobHandler;return r?r.convertVectorFieldData({pixelBlock:e,dataType:t},n):Le(e,t)}async createFlowMesh(e,t){let n=this._rasterJobHandler;return n?n.createFlowMesh(e,t):Ue(e.meshType,e.simulationSettings,e.flowData,t.signal==null?new AbortController().signal:t.signal)}_initJobHandler(){let{_rasterJobHandlerConfig:e}=this;if(e.connectionPromise)return e.connectionPromise;let t=new Vt;return e.connectionPromise=t.initialize().then(()=>{e.instance=t,this.notifyChange(`_rasterJobHandler`)},()=>{}),e.connectionPromise}_shutdownJobHandler(){let{_rasterJobHandlerConfig:e}=this;e.instance?.destroy(),e.instance=null,e.connectionPromise=null,e.refCount=0,this.notifyChange(`_rasterJobHandler`),this._cachedRendererJson=void 0}async _updateSymbolizer(e,t,n,r){let i=this._rasterJobHandlerConfig.instance;if(!i)return;let a=Mt({...t.toJSON(),variableName:n});JSON.stringify(this._cachedRendererJson)!==JSON.stringify(a)&&(r&&(e.rasterInfo=r),e.rendererJSON=a,e.bind(),await i.updateSymbolizer(e),this._cachedRendererJson=t.toJSON())}async _symbolize(e,t){let{pixelData:n,bandIds:r,simpleStretchParams:i}=e,a=this._rasterJobHandler;if(a){let e=await a.symbolize({...n,simpleStretchParams:i,bandIds:r},t);return{extent:n.extent,pixelBlock:e}}let o=e.symbolizer.symbolize({...n,simpleStretchParams:i,bandIds:r});return{extent:n.extent,pixelBlock:o}}};return _([i({clonable:!1})],n.prototype,`_rasterJobHandler`,null),_([i({clonable:!1})],n.prototype,`_cachedRendererJson`,void 0),_([i({clonable:!1})],n.prototype,`_rasterJobHandlerConfig`,void 0),n=_([m(`esri.layers.mixins.RasterJobHandlerMixin`)],n),n};export{I as _,Y as a,Ft as c,gt as d,vt as f,_t as g,mt as h,X as i,ht as l,Mt as m,Q as n,Rt as o,bt as p,Z as r,Pt as s,Ht as t,xt as u,F as v,M as y};