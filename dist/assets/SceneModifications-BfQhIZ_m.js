import{BT as e,Bv as t,FE as n,UT as r,VT as i,XT as a,ZS as o,e_ as s,hv as c,iw as l,kC as u,kD as d,rh as f,rw as p,zg as m}from"./index-BN8X5Ryz.js";var h,g=h=class extends l{constructor(e){super(e),this.geometry=null,this.type=`clip`}writeGeometry(e,n,r,i){if(i.layer?.spatialReference&&!i.layer.spatialReference.equals(this.geometry.spatialReference)){if(!m(e.spatialReference,i.layer.spatialReference))return void(i?.messages&&i.messages.push(new a(`scenemodification:unsupported`,`Scene modifications with incompatible spatial references are not supported`,{modification:this,spatialReference:i.layer.spatialReference,context:i})));let o=new t;s(e,o,i.layer.spatialReference),n[r]=o.toJSON(i)}else n[r]=e.toJSON(i)}clone(){return new h({geometry:n(this.geometry),type:this.type})}};d([e({type:t}),f()],g.prototype,`geometry`,void 0),d([r([`web-scene`,`portal-item`],`geometry`)],g.prototype,`writeGeometry`,null),d([e({type:[`clip`,`mask`,`replace`],nonNullable:!0}),f()],g.prototype,`type`,void 0),g=h=d([i(`esri.layers.support.SceneModification`)],g);var _,v=_=class extends p(c.ofType(g)){constructor(e){super(e),this.url=null}clone(){return new _({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}static fromJSON(e,t){let n=new _;for(let r of e)n.add(g.fromJSON(r,t));return n}static async fromUrl(e,t,n){let r={url:u(e),origin:`service`},i=await o(e,{responseType:`json`,signal:n?.signal}),a=t.toJSON(),s=[];for(let e of i.data)s.push(g.fromJSON({...e,geometry:{spatialReference:a,...e.geometry}},r));return new _({url:e,items:s})}};d([e({type:String})],v.prototype,`url`,void 0),v=_=d([i(`esri.layers.support.SceneModifications`)],v);export{v as t};