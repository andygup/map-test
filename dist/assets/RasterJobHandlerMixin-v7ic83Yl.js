import{$T as e,BT as t,Bd as n,Bv as r,Dv as i,Ex as a,FE as o,GT as s,HT as c,Ix as l,KT as u,Ld as d,Lr as f,Mn as p,Nn as m,Od as ee,Rd as te,Rr as ne,Rv as re,Si as ie,UT as h,VT as g,Vd as ae,WT as _,XT as oe,_E as v,ai as se,bd as ce,bi as le,ci as ue,cy as de,fi as fe,gi as pe,ii as me,iw as y,jr as he,kD as b,kv as ge,pg as _e,ph as x,qT as S,vx as ve,xi as ye,xu as be,ya as xe,yi as Se,zh as Ce}from"./index-BN8X5Ryz.js";import{p as we}from"./multidimensionalUtils-CoDZYrcG.js";import{A as Te,C as Ee,D as De,O as C,S as Oe,V as ke,b as Ae,k as je,w as Me,x as Ne,y as Pe,z as Fe}from"./RasterSymbolizer-C04g1f48.js";import{t as w}from"./PixelBlock-D0vUlFM9.js";import{a as Ie,c as Le,i as Re,l as T}from"./vectorFieldUtils-BkGOIhR4.js";import{r as ze}from"./datasetUtils-QzMOwZxx.js";import{i as Be,r as Ve}from"./utils-BGjabRH0.js";import{t as He}from"./dataUtils-CwkEyGtp.js";var E=class extends y{constructor(){super(...arguments),this.pixelType=`unknown`}};b([t({type:String,json:{write:{isRequired:!0}}})],E.prototype,`name`,void 0),b([t({type:String,json:{write:!0}})],E.prototype,`description`,void 0),b([t({type:v,json:{type:v,write:!0,name:`_object_id`}})],E.prototype,`id`,void 0),b([t({type:String,json:{type:ke.jsonValues,read:ke.read,write:{writer:ke.write,isRequired:!0}}})],E.prototype,`pixelType`,void 0),b([t({type:String,json:{write:{isRequired:!0}}})],E.prototype,`type`,void 0),E=b([g(`esri.layers.support.RasterFunctionInfo`)],E);var Ue=E,D=class extends y{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type=`RasterFunctionVariable`}};b([t({type:String,json:{write:!0}})],D.prototype,`name`,void 0),b([t({type:Number,json:{type:v,write:!0,name:`_object_id`}})],D.prototype,`id`,void 0),b([t({type:Boolean,json:{write:!0}})],D.prototype,`isDataset`,void 0),b([t({type:Boolean,json:{write:!0}})],D.prototype,`isPublic`,void 0),b([t({json:{write:!0}})],D.prototype,`value`,void 0),b([t({type:String,json:{write:!0}})],D.prototype,`type`,void 0),D=b([g(`esri.layers.support.RasterFunctionVariable`)],D);var O={key:`type`,base:null,typeMap:{RasterFunctionVariable:D}},k=class extends y{};b([t({types:O,json:{types:O,name:`MatchVariable`}})],k.prototype,`matchVariable`,void 0),b([t({types:O,json:{types:O,name:`UnionDimension`}})],k.prototype,`unionDimension`,void 0),b([t({type:Number,json:{type:v,write:!0,name:`_object_id`}})],k.prototype,`id`,void 0),b([t({type:String,json:{write:!0}})],k.prototype,`type`,void 0),k=b([g(`esri.layers.support.RasterFunctionProperties`)],k);var We=k,Ge=new S({0:`mosaic`,1:`item`,2:`item-group`},{useNumericKeys:!0}),A=class extends y{constructor(){super(...arguments),this.description=``,this.functionType=`mosaic`,this.type=`RasterFunctionTemplate`}};b([t({type:[String],json:{write:!0}})],A.prototype,`aliases`,void 0),b([t({type:Object,json:{write:{isRequired:!0}}})],A.prototype,`arguments`,void 0),b([t({type:String,json:{write:{isRequired:!0}}})],A.prototype,`description`,void 0),b([t({type:Ue,json:{write:{isRequired:!0},name:`function`}})],A.prototype,`functionInfo`,void 0),b([t({type:Ge.apiValues,json:{type:[0,1,2],read:Ge.read,write:{writer:Ge.write,isRequired:!0}}})],A.prototype,`functionType`,void 0),b([t({type:String,json:{write:!0}})],A.prototype,`group`,void 0),b([t({type:String,json:{write:!0}})],A.prototype,`help`,void 0),b([t({type:Number,json:{type:v,write:!0,name:`_object_id`}})],A.prototype,`id`,void 0),b([t({type:String,json:{write:{isRequired:!0}}})],A.prototype,`name`,void 0),b([t({type:String,json:{write:!0,name:`definition`}})],A.prototype,`queryDefinition`,void 0),b([t({type:String,json:{write:!0}})],A.prototype,`tag`,void 0),b([t({type:We,json:{write:!0}})],A.prototype,`properties`,void 0),b([t({type:String,json:{write:!0}})],A.prototype,`thumbnail`,void 0),b([t({type:String,json:{write:!0}})],A.prototype,`thumbnailEx`,void 0),b([t({json:{type:[`RasterFunctionTemplate`],write:!0}})],A.prototype,`type`,void 0),A=b([g(`esri.layers.support.RasterFunctionTemplate`)],A);var Ke,j=new Set([`raster`,`raster2`,`dem`,`fillraster`]),M=new Set([`rasters`]),qe=e=>e?.rasterFunction?N.fromJSON(e):e,Je=e=>e&&e instanceof N?e.toJSON():e,Ye=e=>e?.functionName&&!e.declaredClass,Xe=e=>Ye(e)?new N(e):e,Ze=e=>{if(e==null)return null;e=o(e);let t={};for(let n of Object.keys(e))j.has(n.toLowerCase())?t[n]=qe(e[n]):M.has(n.toLowerCase())&&Array.isArray(e[n])?t[n]=e[n].map(qe):t[n]=e[n];return t},Qe=e=>e?A.fromJSON({type:`RasterFunctionTemplate`,...e}):void 0,$e={types:{key:`type`,base:null,typeMap:{RasterFunctionTemplate:A}},json:{write:!0,name:`rasterFunctionDefinition`,read:Qe}},N=Ke=class extends y{constructor(e){super(e),this.functionName=null,this.outputPixelType=`unknown`,this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){let t=Object.keys(e);if(t.some(t=>j.has(t.toLowerCase())&&Ye(e[t]))||t.some(t=>M.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some(e=>Ye(e)))){e=o(e);for(let n of t)j.has(n.toLowerCase())?e[n]=Xe(e[n]):M.has(n.toLowerCase())&&Array.isArray(e[n])&&(e[n]=e[n].map(e=>Xe(e)))}}this._set(`functionArguments`,e)}readFunctionArguments(e){return Ze(e)}writeFunctionArguments(e,t,n){let r={};for(let t of Object.keys(e))j.has(t.toLowerCase())?r[t]=Je(e[t]):M.has(t.toLowerCase())&&Array.isArray(e[t])?r[t]=e[t].map(Je):r[t]=Je(e[t]);t[n]=r}readFunctionName(e,t){let n=t.rasterFunctionInfos;return t.name||(n?.length&&n[0].name!==`None`?n[0].name:t.rasterFunction||t.rasterFunctionDefinition?.name)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=Qe(e)}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes(`"type":"ClipFunction"`):JSON.stringify(this).includes(`"rasterFunction":"Clip"`)}clone(){return new Ke({functionName:this.functionName,functionArguments:o(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:o(this.rasterFunctionDefinition)})}};b([t({json:{type:Object,name:`rasterFunctionArguments`}})],N.prototype,`functionArguments`,null),b([_(`functionArguments`)],N.prototype,`readFunctionArguments`,null),b([h(`functionArguments`)],N.prototype,`writeFunctionArguments`,null),b([t({json:{type:String,write:{target:`rasterFunction`}}})],N.prototype,`functionName`,void 0),b([_(`functionName`,[`rasterFunction`,`rasterFunctionInfos`,`rasterFunctionDefinition`])],N.prototype,`readFunctionName`,null),b([s({C128:`c128`,C64:`c64`,F32:`f32`,F64:`f64`,S16:`s16`,S32:`s32`,S8:`s8`,U1:`u1`,U16:`u16`,U2:`u2`,U32:`u32`,U4:`u4`,U8:`u8`,UNKNOWN:`unknown`},{ignoreUnknown:!1,default:`unknown`})],N.prototype,`outputPixelType`,void 0),b([t({type:String,json:{read:!0,write:!0}})],N.prototype,`variableName`,void 0),b([t()],N.prototype,`rasterFunctionDefinition`,null),b([t($e)],N.prototype,`functionDefinition`,void 0),b([t()],N.prototype,`hasClipFunction`,null),N=Ke=b([g(`esri.layers.support.RasterFunction`)],N);var et,P=u()({MT_FIRST:`first`,MT_LAST:`last`,MT_MIN:`min`,MT_MAX:`max`,MT_MEAN:`mean`,MT_BLEND:`blend`,MT_SUM:`sum`}),F=u()({esriMosaicNone:`none`,esriMosaicCenter:`center`,esriMosaicNadir:`nadir`,esriMosaicViewpoint:`viewpoint`,esriMosaicAttribute:`attribute`,esriMosaicLockRaster:`lock-raster`,esriMosaicNorthwest:`northwest`,esriMosaicSeamline:`seamline`});function tt(e){let t;switch(e?e.toLowerCase().replace(`esrimosaic`,``):``){case`byattribute`:case`attribute`:t=`esriMosaicAttribute`;break;case`lockraster`:t=`esriMosaicLockRaster`;break;case`center`:t=`esriMosaicCenter`;break;case`northwest`:t=`esriMosaicNorthwest`;break;case`nadir`:t=`esriMosaicNadir`;break;case`viewpoint`:t=`esriMosaicViewpoint`;break;case`seamline`:t=`esriMosaicSeamline`;break;default:t=`esriMosaicNone`}return F.fromJSON(t)}var I=et=class extends y{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=`none`,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=`first`,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending==null?t.sortAscending==null||t.sortAscending:t.ascending}readMethod(e,t){return tt(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,n){e!=null&&(e=e.filter(({variableName:e,dimensionName:t})=>e&&e!==`*`||t)).length&&(t[n]=e.map(e=>e.toJSON()))}readOperation(e,t){let n=t.mosaicOperation,r=t.mosaicOperator?.toLowerCase(),i=n||(r?P.toJSON(r):null);return P.fromJSON(i)||`first`}castSortValue(e){return e==null||typeof e==`string`||typeof e==`number`?e:`${e}`}clone(){return new et({ascending:this.ascending,itemRasterFunction:o(this.itemRasterFunction),lockRasterIds:o(this.lockRasterIds),method:this.method,multidimensionalDefinition:o(this.multidimensionalDefinition),objectIds:o(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:o(this.viewpoint),where:this.where})}};b([t({type:Boolean,json:{write:!0}})],I.prototype,`ascending`,void 0),b([_(`ascending`,[`ascending`,`sortAscending`])],I.prototype,`readAscending`,null),b([t({type:N,json:{name:`itemRenderingRule`,write:!0}})],I.prototype,`itemRasterFunction`,void 0),b([t({type:[v],json:{write:{overridePolicy(){return{enabled:this.method===`lock-raster`}}}}})],I.prototype,`lockRasterIds`,void 0),b([t({type:F.apiValues,json:{type:F.jsonValues,write:{target:`mosaicMethod`,writer:F.write,isRequired:!0}}})],I.prototype,`method`,void 0),b([_(`method`,[`mosaicMethod`,`defaultMosaicMethod`])],I.prototype,`readMethod`,null),b([t({type:[we],json:{write:!0}})],I.prototype,`multidimensionalDefinition`,void 0),b([h(`multidimensionalDefinition`)],I.prototype,`writeMultidimensionalDefinition`,null),b([t({type:[v],json:{name:`fids`,write:!0}})],I.prototype,`objectIds`,void 0),b([t({type:P.apiValues,json:{type:P.jsonValues,read:{reader:P.read},write:{target:`mosaicOperation`,writer:P.write}}})],I.prototype,`operation`,void 0),b([_(`operation`,[`mosaicOperation`,`mosaicOperator`])],I.prototype,`readOperation`,null),b([t({type:String,json:{write:{overridePolicy(){return{enabled:this.method===`attribute`}}}}})],I.prototype,`sortField`,void 0),b([t({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method===`attribute`,allowNull:!0}}}}})],I.prototype,`sortValue`,void 0),b([c(`sortValue`)],I.prototype,`castSortValue`,null),b([t({type:a,json:{write:!0}})],I.prototype,`viewpoint`,void 0),b([t({type:String,json:{write:!0}})],I.prototype,`where`,void 0),I=et=b([g(`esri.layers.support.MosaicRule`)],I);var nt,rt={base:l,key:`type`,typeMap:{extent:ve,polygon:r}},L=nt=class extends y{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){let{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];let t=new Map;e.forEach(e=>{if(!e.dimensionName)return;let n,r;if(Array.isArray(e.values[0])){let t=e.values;n=t[0][0],r=t[e.values.length-1][1]}else{let t=e.values;n=t[0],r=t[e.values.length-1]}if(t.has(e.dimensionName)){let i=t.get(e.dimensionName);i[0]=Math.min(n,i[0]),i[1]=Math.max(r,i[1])}else t.set(e.dimensionName,[n,r])});let n=[];for(let e of t)n.push({name:e[0],extent:e[1]});return n}get variables(){let{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];let t=new Set;return e.forEach(e=>{e.variableName&&t.add(e.variableName)}),[...t]}clone(){let e=this.subsetDefinitions?.map(e=>e.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new nt({areaOfInterest:t,subsetDefinitions:e})}};b([t({types:rt,json:{read:ge,write:!0}})],L.prototype,`areaOfInterest`,void 0),b([t({readOnly:!0})],L.prototype,`dimensions`,null),b([t({readOnly:!0})],L.prototype,`variables`,null),b([t({type:[we],json:{write:!0}})],L.prototype,`subsetDefinitions`,void 0),L=nt=b([g(`esri.layers.support.MultidimensionalSubset`)],L);var it,R=new S({flow_from:`flow-from`,flow_to:`flow-to`}),z=it=class extends me(y){constructor(e){super(e),this.density=.8,this.color=new x([255,255,255,1]),this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation=`flow-from`,this.type=`flow`,this.authoringInfo=null,this.legendOptions=null,this.trailCap=`butt`,this.background=`none`}get maxPathLength(){return this._get(`maxPathLength`)??200}set maxPathLength(e){this._set(`maxPathLength`,e)}get trailWidth(){return this._get(`trailWidth`)??1.5}set trailWidth(e){this._set(`trailWidth`,e)}get visualVariables(){return super.visualVariables}set visualVariables(e){super.visualVariables=e}clone(){let{density:e,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,smoothing:a,flowRepresentation:o,trailCap:s,background:c}=this,l=this.color.clone(),u=(this.visualVariables||[]).map(e=>e.clone()),d=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new it({density:e,color:l,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,trailCap:s,background:c,smoothing:a,flowRepresentation:o,visualVariables:u,authoringInfo:d,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};b([t({type:Number,json:{write:!0}})],z.prototype,`density`,void 0),b([t({type:x,json:{type:[v],write:{allowNull:!0}}})],z.prototype,`color`,void 0),b([t({type:Number,cast:_e,json:{write:!0}})],z.prototype,`maxPathLength`,null),b([t({type:Number,cast:_e,json:{write:!0}})],z.prototype,`trailWidth`,null),b([t({type:Number,json:{write:!0}})],z.prototype,`flowSpeed`,void 0),b([t({type:Number,json:{write:!0}})],z.prototype,`trailLength`,void 0),b([t({type:Number,cast:_e,json:{write:!1}})],z.prototype,`smoothing`,void 0),b([t({type:R.apiValues,json:{type:R.jsonValues,read:{reader:R.read},write:{writer:R.write}}})],z.prototype,`flowRepresentation`,void 0),b([s({flowRenderer:`flow`}),t({json:{write:{isRequired:!0}}})],z.prototype,`type`,void 0),b([t({type:Se,json:{write:!0}})],z.prototype,`authoringInfo`,void 0),b([t({type:ne,json:{write:!0}})],z.prototype,`legendOptions`,void 0),b([t({type:[`butt`,`round`],json:{write:!0}})],z.prototype,`trailCap`,void 0),b([t({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],z.prototype,`background`,void 0),z=it=b([g(`esri.renderers.FlowRenderer`)],z);var B=class extends y{constructor(e){super(e),this.value=null,this.label=null,this.color=null}};b([t({type:Number,json:{write:{isRequired:!0}}})],B.prototype,`value`,void 0),b([t({type:String,json:{write:!0}})],B.prototype,`label`,void 0),b([t({type:x,json:{type:[v],write:{isRequired:!0}}})],B.prototype,`color`,void 0),B=b([g(`esri.renderers.support.ColormapInfo`)],B);var V,H=V=class extends y{constructor(e){super(e),this.colormapInfos=null,this.type=`raster-colormap`}static createFromColormap(e,t){if(!e)return null;let n=e[0].length===5,r=[...e].sort((e,t)=>e[0]-t[0]).map(e=>B.fromJSON({value:e[0],color:n?e.slice(1,5):e.slice(1,4).concat([255]),label:t?t[e[0]]??``:e[0]}));return new V({colormapInfos:r})}static createFromColorramp(e){let t=je(e);return V.createFromColormap(t)}clone(){return new V({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};b([t({type:[B],json:{write:{isRequired:!0}}})],H.prototype,`colormapInfos`,void 0),b([s({rasterColormap:`raster-colormap`}),t({json:{write:{isRequired:!0}}})],H.prototype,`type`,void 0),H=V=b([g(`esri.renderers.RasterColormapRenderer`)],H);var at,U=at=class extends y{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType=`traditional`,this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType=`none`,this.type=`raster-shaded-relief`,this.zFactor=1}readColorRamp(e){return ye(e)}clone(){return new at({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:o(this.colorRamp)})}};b([t({type:Number,json:{write:{isRequired:!0}}})],U.prototype,`altitude`,void 0),b([t({type:Number,json:{write:{isRequired:!0}}})],U.prototype,`azimuth`,void 0),b([t({types:le,json:{write:!0}})],U.prototype,`colorRamp`,void 0),b([_(`colorRamp`)],U.prototype,`readColorRamp`,null),b([t({type:[`traditional`,`multi-directional`],json:{write:{isRequired:!0}}})],U.prototype,`hillshadeType`,void 0),b([t({type:Number,json:{write:!0}})],U.prototype,`pixelSizePower`,void 0),b([t({type:Number,json:{write:!0}})],U.prototype,`pixelSizeFactor`,void 0),b([t({type:[`none`,`adjusted`],json:{write:{isRequired:!0}}})],U.prototype,`scalingType`,void 0),b([s({rasterShadedRelief:`raster-shaded-relief`}),t({json:{write:{isRequired:!0}}})],U.prototype,`type`,void 0),b([t({type:Number,json:{write:{isRequired:!0}}})],U.prototype,`zFactor`,void 0),U=at=b([g(`esri.renderers.RasterShadedReliefRenderer`)],U);var ot,W=ot=class extends y{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.histograms=null,this.customStatistics=null,this.useGamma=!1,this.stretchType=`none`,this.type=`raster-stretch`}readColorRamp(e){if(e)return ye(e)}readCustomStatistics(e){return e?.map(e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]}))}writeCustomStatistics(e,t,n){e?.length&&(t[n]=e.map(e=>[e.min,e.max,e.avg??0,e.stddev??1]))}readStretchType(e,t){let n=t.stretchType;return typeof n==`number`&&(n=De[n]),C.read(n)}clone(){return new ot({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,customStatistics:o(this.customStatistics),gamma:o(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:o(this.colorRamp),histograms:o(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};b([t({types:le,json:{write:!0}})],W.prototype,`colorRamp`,void 0),b([_(`colorRamp`)],W.prototype,`readColorRamp`,null),b([t({type:Boolean,json:{write:!0}})],W.prototype,`computeGamma`,void 0),b([t({type:Boolean,json:{write:{target:`dra`},read:{source:`dra`}}})],W.prototype,`dynamicRangeAdjustment`,void 0),b([t({type:[Number],json:{write:!0}})],W.prototype,`gamma`,void 0),b([t({type:Number,json:{write:!0}})],W.prototype,`maxPercent`,void 0),b([t({type:Number,json:{write:!0}})],W.prototype,`minPercent`,void 0),b([t({type:Number,json:{write:!0}})],W.prototype,`numberOfStandardDeviations`,void 0),b([t({type:Number,json:{read:{source:`max`},write:{target:`max`}}})],W.prototype,`outputMax`,void 0),b([t({type:Number,json:{read:{source:`min`},write:{target:`min`}}})],W.prototype,`outputMin`,void 0),b([t({type:Number,json:{write:!0}})],W.prototype,`sigmoidStrengthLevel`,void 0),b([t()],W.prototype,`histograms`,void 0),b([t({json:{type:[[Number]],name:`statistics`,write:!0}})],W.prototype,`customStatistics`,void 0),b([_(`customStatistics`)],W.prototype,`readCustomStatistics`,null),b([h(`customStatistics`)],W.prototype,`writeCustomStatistics`,null),b([t({type:Boolean,json:{write:!0}})],W.prototype,`useGamma`,void 0),b([t({type:C.apiValues,json:{type:C.jsonValues,write:C.write}})],W.prototype,`stretchType`,void 0),b([_(`stretchType`,[`stretchType`])],W.prototype,`readStretchType`,null),b([s({rasterStretch:`raster-stretch`})],W.prototype,`type`,void 0),W=ot=b([g(`esri.renderers.RasterStretchRenderer`)],W);var st,ct=new Set([`esriMetersPerSecond`,`esriKilometersPerHour`,`esriKnots`,`esriFeetPerSecond`,`esriMilesPerHour`]),G=new S({beaufort_ft:`beaufort-ft`,beaufort_km:`beaufort-km`,beaufort_kn:`beaufort-kn`,beaufort_m:`beaufort-m`,beaufort_mi:`beaufort-mi`,classified_arrow:`classified-arrow`,ocean_current_kn:`ocean-current-kn`,ocean_current_m:`ocean-current-m`,simple_scalar:`simple-scalar`,single_arrow:`single-arrow`,wind_speed:`wind-barb`}),K=new S({flow_from:`flow-from`,flow_to:`flow-to`}),q=st=class extends me(y){constructor(e){super(e),this.attributeField=`Magnitude`,this.flowRepresentation=`flow-from`,this.rotationType=`arithmetic`,this.style=`single-arrow`,this.symbolTileSize=50,this.type=`vector-field`}readInputUnit(e,t){return ct.has(e)?T.fromJSON(e):null}readOutputUnit(e,t){return ct.has(e)?T.fromJSON(e):null}get styleRenderer(){let e=this.style,t=this.attributeField,n=this._createStyleRenderer(e);return n.field=t,n}get visualVariables(){return super.visualVariables}set visualVariables(e){super.visualVariables=e}get sizeVariables(){let e=[];if(this.visualVariables)for(let t of this.visualVariables)t.type===`size`&&e.push(t);if(e.length===0){let t=new se({field:`Magnitude`,minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set(`visualVariables`,[t]),e.push(t)}return e}get rotationVariables(){let e=[];if(this.visualVariables)for(let t of this.visualVariables)t.type===`rotation`&&e.push(t);if(e.length===0){let t=new pe({field:`Direction`,rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set(`visualVariables`,[t]),e.push(t)}return e}clone(){return new st({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:o(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,n=[]){let r=[],i=Re(this.inputUnit,this.outputUnit),o=this.rotationVariables[0]?.rotationType||this.rotationType,s=t?Ie(e.pixelBlock,`vector-uv`,o,i):Le(e.pixelBlock,`vector-magdir`,i);if(s==null)return r;let c=e.extent,l=s.mask!=null&&s.mask.length>0,u=0,d=(c.xmax-c.xmin)/s.width,f=(c.ymax-c.ymin)/s.height;for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++,u++){let i=new a({x:c.xmin+t*d+d/2,y:c.ymax-e*f-f/2,spatialReference:c.spatialReference});i=(await be(i))[0];let o=n.some(e=>e.intersects(i));if((!l||s.mask[u])&&!o){let e={Magnitude:s.pixels[0][u],Direction:s.pixels[1][u]},t=new ee({geometry:new a({x:i.x,y:i.y,spatialReference:c.spatialReference}),attributes:e});t.symbol=this._getVisualVariablesAppliedSymbol(t),r.push(t)}}return r}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new d({path:`M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z`,outline:new ae({width:0}),size:20,color:e||new x([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;let t=this.styleRenderer?.getSymbol(e)?.clone(),n=this.sizeVariables,r=this.rotationVariables;if(n&&n.length&&this.sizeVariables.forEach(n=>Ve(t,ue([n],e))),r&&r.length){let n=this.flowRepresentation===`flow-to`==(this.style===`ocean-current-kn`||this.style===`ocean-current-m`)?0:180;e.attributes.Direction=e.attributes.Direction+n,this.rotationVariables.forEach(n=>Be(t,fe(n,e),n.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case`single-arrow`:t=this._createSingleArrowRenderer();break;case`beaufort-kn`:t=this._createBeaufortKnotsRenderer();break;case`beaufort-m`:t=this._createBeaufortMeterRenderer();break;case`beaufort-ft`:t=this._createBeaufortFeetRenderer();break;case`beaufort-mi`:t=this._createBeaufortMilesRenderer();break;case`beaufort-km`:t=this._createBeaufortKilometersRenderer();break;case`ocean-current-m`:t=this._createCurrentMeterRenderer();break;case`ocean-current-kn`:t=this._createCurrentKnotsRenderer();break;case`simple-scalar`:t=this._createSimpleScalarRenderer();break;case`wind-barb`:t=this._createWindBarbsRenderer();break;case`classified-arrow`:t=this._createClassifiedArrowRenderer()}return new p(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}_createBeaufortMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortFeetRenderer(){let e=this._getDefaultSymbol(new x([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*3.28084),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortMilesRenderer(){let e=this._getDefaultSymbol(new x([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*2.23694),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortKilometersRenderer(){let e=this._getDefaultSymbol(new x([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map(e=>e*3.6),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createCurrentMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}_createCurrentKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new x([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}_createClassifiedArrowRenderer(){let e=this._getDefaultSymbol(new x([56,168,0])),t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){let e=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(e&&n){let r=(n-e)/5;t=Array.from([,,,,,,].keys()).map(t=>e+r*t)}}return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}_createSimpleScalarRenderer(){return{defaultSymbol:n.fromJSON({imageData:`iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=`,height:20,width:20,type:`esriPMS`,angle:0})}}_createWindBarbsRenderer(){let e=Array.from(Array(31).keys()).map(e=>5*e),t=[{range:`0-5`,path:`M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`5-10`,path:`M25 0 L25 40 M25 35 L17.5 37.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`10-15`,path:`M25 0 L25 40 L10 45 L25 40`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`15-20`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`20-25`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`25-30`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5`,imageData:`PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`30-35`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`35-40`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`40-45`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`45-50`,path:`M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`50-55`,path:`M25 0 L25 40 L10 40 L25 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`55-60`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`60-65`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`65-70`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`70-75`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`75-80`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`80-85`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`85-90`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`90-95`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`95-100`,path:`M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`},{range:`100-105`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`105-110`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`110-115`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`115-120`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`120-125`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`125-130`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`130-135`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`135-140`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg==`},{range:`140-145`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+`},{range:`145-150`,path:`M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5`,imageData:`PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4=`}],r=n.fromJSON({imageData:`iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC`,height:20,width:20,type:`esriPMS`,angle:0}),i=e.map((i,a)=>{let o;if(a!==e.length-1)if(a===0)o={minValue:i,maxValue:e[a+1],symbol:r};else{let r=n.fromJSON({type:`esriPMS`,imageData:t[a].imageData,contentType:`image/svg+xml`,height:32,width:32,angle:0});o={minValue:i,maxValue:e[a+1],symbol:r}}return new m(o)});return{defaultSymbol:r,classBreakInfos:i}}_getClassBreaks(e,t){return t.map((t,n)=>new m({minValue:e[n],maxValue:e[n+1],symbol:this._getDefaultSymbol(new x(t))}))}};b([t({type:[`Magnitude`],json:{write:!0}})],q.prototype,`attributeField`,void 0),b([t({type:K.apiValues,json:{type:K.jsonValues,read:{reader:K.read},write:{writer:K.write}}})],q.prototype,`flowRepresentation`,void 0),b([t({type:[`geographic`,`arithmetic`],json:{write:!0}})],q.prototype,`rotationType`,void 0),b([t({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],q.prototype,`style`,void 0),b([t({json:{write:!0}})],q.prototype,`symbolTileSize`,void 0),b([t({type:T.apiValues,json:{type:T.jsonValues,write:{writer:T.write}}})],q.prototype,`inputUnit`,void 0),b([_(`inputUnit`)],q.prototype,`readInputUnit`,null),b([t({type:T.apiValues,json:{type:T.jsonValues,read:{reader:T.read},write:{writer:T.write}}})],q.prototype,`outputUnit`,void 0),b([_(`outputUnit`)],q.prototype,`readOutputUnit`,null),b([s({vectorField:`vector-field`})],q.prototype,`type`,void 0),b([t({type:p})],q.prototype,`styleRenderer`,null),b([t({type:se})],q.prototype,`sizeVariables`,null),b([t({type:pe})],q.prototype,`rotationVariables`,null),q=st=b([g(`esri.renderers.VectorFieldRenderer`)],q);var lt=.25,ut=ie.fromJSON({type:`multipart`,colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),dt=ie.fromJSON(Te[0]),ft=new Set([`scientific`,`standard-time`,`vector-uv`,`vector-magdir`,`vector-u`,`vector-v`,`vector-magnitude`,`vector-direction`]);function pt(e){return e.presetRenderers?.find(({method:t,value:n})=>t===`raster-function-template`?n===e.rasterFunctionName:t===`variable`&&n===e.variableName)}function mt(e,t){let{attributeTable:n,colormap:r}=e;if(Ne(e)){let t=kt(e);if(t!=null)return t}if(t?.rasterFunctionColorRamp){let n=vt(e,t);return n.colorRamp=t.rasterFunctionColorRamp,n}if(r!=null){let t=Dt(e);if(t!=null)return t}if(n!=null){let t=wt(e);if(t!=null)return t}return vt(e,t)}function ht(e,t=!1){let n=[`raster-stretch`];return Me(e,t)&&n.push(`raster-colormap`),Ee(e)&&n.push(`unique-value`),Oe(e,t)&&n.push(`class-breaks`),Pe(e)&&n.push(`raster-shaded-relief`),Ne(e)&&n.push(`vector-field`),Ae(e)&&n.push(`flow`),n}function gt(e){return ze(e)&&e.rasterFunction.functionName===`Colormap`?e.rasterFunction.colorRamp:void 0}function _t(e,t,n){let r=[`nearest`,`bilinear`,`cubic`,`majority`],i=n?.toLowerCase().replace(`bicubic`,`cubic`),a=r.find(e=>e===i);return t===`Map`?a??`bilinear`:e.dataType===`standard-time`?a??`nearest`:e.dataType===`thematic`||e.attributeTable||e.colormap?a===`nearest`||a===`majority`?a:`nearest`:a??`bilinear`}function vt(e,t){e=yt(e,t?.variableName);let{bandCount:n}=e,{bandIds:r,stretchType:i}=t||{};r?.some(e=>e>=n)&&(r=null);let a=e.statistics,o=e.histograms;n>1?(r=r?.length?r:bt(e),a=a==null?null:r?.map(e=>a[e]),o=o==null?null:r?.map(e=>o[e])):r=[0],i??=Ct(e),t?.includeStatisticsInStretch&&(i===`percent-clip`||i===`histogram-equalization`)&&e.statistics?.length&&(i=`min-max`);let s=!1;switch(i){case`none`:s=!1;break;case`percent-clip`:s=!o?.length;break;default:s=!a?.length}let{dataType:c}=e,l=r?.length===1&&ft.has(c)?ut:null,u=new W({stretchType:i,dynamicRangeAdjustment:s,colorRamp:l,outputMin:0,outputMax:255,gamma:r?.length===1?[1]:[1,1,1],useGamma:!1});return i===`percent-clip`?u.maxPercent=u.minPercent=lt:i===`standard-deviation`&&(u.numberOfStandardDeviations=2),s||e.multidimensionalInfo==null&&!t?.includeStatisticsInStretch||(i===`percent-clip`?u.histograms=o:i!==`min-max`&&i!==`standard-deviation`||(u.customStatistics=a?.map(e=>({...e})))),u}function yt(e,t){let{multidimensionalInfo:n}=e;if(!t||!n)return e;let r=n.variables.find(e=>e.name===t);if(!r)return e;if(e=e.clone(),r){let{statistics:t,histograms:n}=r;t?.length&&(e.statistics=t.map(e=>({min:e.min,max:e.max,avg:e.avg,stddev:e.stddev}))),n?.length&&(e.histograms=n)}return e}function bt(e){let t=e.bandCount;if(t===1)return null;if(t===2)return[0];let{bandInfos:n}=e,r;if(n.length===t){let{red:e,green:t,blue:i,nir:a}=xt(n);e!=null&&t!=null&&i!=null?r=[e,t,i]:a!=null&&e!=null&&t!=null&&(r=[a,e,t])}return!r&&t>=3&&(r=[0,1,2]),r}function xt(e){let t={};for(let n=0;n<e.length;n++){let r=e[n].name.toLowerCase();r===`red`?t.red=n:r===`green`?t.green=n:r===`blue`?t.blue=n:r!==`nearinfrared`&&r!==`nearinfrared_1`&&r!==`nir`||(t.nir=n)}if(t.blue==null||t.green==null||t.red==null||t.nir==null){let n=St(e);if(t.blue??=J(n,480),t.green??=J(n,550),t.red??=J(n,660),t.nir==null){let r=St(e,800);t.nir=J(r,810)??J(n,810)}}return t}function J(e,t,n=60){let r,i=n;for(let n of e){let e=Math.abs(n.wavelength-t);e<=i&&(i=e,r=n.index)}return r}function St(e,t){return e.map(({name:e,minWavelength:n,maxWavelength:r},i)=>/thermal/i.test(e)||/pan/i.test(e)||t!=null&&r!=null&&r<t?null:{wavelength:n!=null&&r!=null?(n+r)/2:n??r??0,index:i}).filter(e=>e!=null)}function Ct(e){let t=`percent-clip`,{pixelType:n,dataType:r,histograms:i,statistics:a,multidimensionalInfo:o}=e,s=ft.has(r)||r===`generic`&&o!=null;return n!==`u8`||r!==`processed`&&i!=null&&a!=null?n===`u8`||r===`elevation`||s?t=`min-max`:i==null?a!=null&&(t=`min-max`):t=`percent-clip`:t=`none`,t}function wt(e,t,n,r){if(!Ee(e,t))return null;let{attributeTable:i,statistics:a}=e,o=Tt(i,t),s=Y(i,`red`),c=Y(i,`green`),l=Y(i,`blue`),u=new Se,d=[],p=new Set,m=!!(s&&c&&l);if(i!=null)i.features.forEach(e=>{let t=e.attributes[o.name];if(!p.has(e.attributes[o.name])&&t!=null){p.add(t);let n=m&&(s.type===`single`||s.type===`double`)&&(c.type===`single`||c.type===`double`)&&(l.type===`single`||l.type===`double`)&&!i.features.some(e=>e.attributes[s.name]>1||e.attributes[c.name]>1||e.attributes[l.name]>1),r=n?255:1;d.push(new f({value:e.attributes[o.name],label:e.attributes[o.name]+``,symbol:new te({style:`solid`,outline:null,color:new x(m?[e.attributes[s.name]*r,e.attributes[c.name]*r,e.attributes[l.name]*r,1]:[0,0,0,0])})}))}});else if(a?.[0])for(let e=a[0].min;e<=a[0].max;e++)d.push(new f({value:e,label:e.toString(),symbol:new te({style:`solid`,outline:null,color:new x([0,0,0,0])})}));if(d.sort((e,t)=>e.value&&typeof e.value.valueOf()==`string`?0:e.value>t.value?1:-1),!m){let e=je(dt,{numColors:d.length});d.forEach((t,n)=>t.symbol.color=new x(e[n].slice(1,4))),u.colorRamp=dt}if(n||r){let e=n||je(r,{numColors:d.length}).map(e=>e.slice(1));d.forEach((t,n)=>t.symbol.color=new x(e[n])),u.colorRamp=r}return new he({field:o.name,uniqueValueInfos:d,authoringInfo:u})}function Tt(e,t,n){let r;return e==null?r=new ce({name:`value`}):(r=t?e.fields.find(e=>t.toLowerCase()===e.name.toLowerCase()):Et(e.fields),r||(n||(r=e.fields.find(e=>e.type===`string`)),r||=Y(e,`value`))),r}function Et(e){let t;for(let n=0;n<e.length;n++){let r=e[n].name.toLowerCase();if(e[n].type===`string`){if(r.startsWith(`class`)){t=e[n];break}t==null&&(r.endsWith(`name`)||r.endsWith(`type`))&&(t=e[n])}}return t}function Y(e,t){return e==null?null:e.fields.find(e=>e.name.toLowerCase()===t)}function Dt(e){if(!Me(e))return null;let t,{attributeTable:n,colormap:r}=e;if(n!=null){let e=Y(n,`value`),r=Tt(n,null,!0);r.type===`string`&&(t={},n.features.forEach(n=>{let i=n.attributes;t[i[e.name]]=r?i[r.name]:i[e.name]}))}return H.createFromColormap(r,t)}var Ot=new Map([[`m/s`,`meter-per-second`],[`km/h`,`kilometer-per-hour`],[`knots`,`knots`],[`ft/s`,`feet-per-second`],[`mph`,`mile-per-hour`]]);function kt(e){if(!Ne(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType===`vector-magdir`||e.dataType===`vector-uv`)){let{minMagnitude:n,maxMagnitude:r}=Mt(e.dataType,e.statistics);t=[new se({field:`Magnitude`,minSize:10,maxSize:40,minDataValue:n,maxDataValue:r})]}let n=e.multidimensionalInfo==null?void 0:Ot.get(e.multidimensionalInfo.variables[0].unit),r=new q({visualVariables:t,inputUnit:n,rotationType:`geographic`});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function At(e){return{color:e.symbolLayers[0].material?.color,type:`esriSFS`,style:`esriSFSSolid`}}function jt(e){if(e.type===`uniqueValue`){let t=e.uniqueValueInfos;return(t?.[0].symbol)?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(e=>({value:e.value,label:e.label,symbol:e.symbol?At(e.symbol):null}))),e}if(e.type===`classBreaks`){let t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(e=>({classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?At(e.symbol):null}))),e}return e}function Mt(e,t){let n,r;if(e===`vector-magdir`)n=t[0].min,r=t[0].max;else{let e=t[0].min,i=t[0].max,a=t[1].min,o=t[1].max;n=0,r=Math.max(Math.abs(e),Math.abs(a),Math.abs(i),Math.abs(o))}return{minMagnitude:n,maxMagnitude:r}}var Nt={key:`type`,base:null,typeMap:{"class-breaks":p,flow:z,"raster-colormap":H,"raster-shaded-relief":U,"raster-stretch":W,"unique-value":he,"vector-field":q}},Pt={...Nt,typeMap:{...Nt.typeMap}};delete Pt.typeMap[`vector-field`];var Ft={classBreaks:p,flowRenderer:z,rasterColormap:H,rasterShadedRelief:U,rasterStretch:W,uniqueValue:he,vectorField:q};function It(e){return e&&Ft[e.type]||null}function Lt(e,t){if(!e)return null;if(e.type===`classBreaks`&&e.classificationMethod){let t=e.authoringInfo||{classificationMethod:``};t.classificationMethod=e.classificationMethod,e.authoringInfo=t}e.type===`vectorField`&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);let n=It(e);if(n){let r=new n;return r.read(e,t),r}return t?.messages&&e&&t.messages.push(new oe(`renderer:unsupported`,`Renderers of type '`+(e.type||`unknown`)+`' are not supported`,{definition:e,context:t})),null}var Rt,X=Rt=class extends y{constructor(e){super(e),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,n){e!=null&&(t.geometryType=re(e),t[n]=e.toJSON())}clone(){return new Rt(o({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};b([t({types:i,json:{read:ge}})],X.prototype,`geometry`,void 0),b([h(`geometry`)],X.prototype,`writeGeometry`,null),b([t({type:I,json:{write:!0}})],X.prototype,`mosaicRule`,void 0),b([t({type:N,json:{write:!0,name:`renderingRule`}})],X.prototype,`rasterFunction`,void 0),b([t({type:a,json:{write:!0}})],X.prototype,`pixelSize`,void 0),b([t({json:{write:!0}})],X.prototype,`raster`,void 0),b([t({type:Ce,json:{read:{source:`time`},write:{target:`time`}}})],X.prototype,`timeExtent`,void 0),X=Rt=b([g(`esri.rest.support.ImageHistogramParameters`)],X);var zt,Z=zt=class extends y{constructor(){super(...arguments),this.geometry=null,this.interpolation=`nearest`,this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.raster=void 0,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,n){e!=null&&(t.geometryType=re(e),t[n]=e.toJSON())}set locations(e){if(e?.length){let t=new de({spatialReference:e[0].spatialReference,points:e.map(({x:e,y:t})=>[e,t])});this._set(`locations`,e),this.geometry=t}}clone(){return new zt(o({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};b([t({types:i,json:{read:ge}})],Z.prototype,`geometry`,void 0),b([h(`geometry`)],Z.prototype,`writeGeometry`,null),b([t({type:[a]})],Z.prototype,`locations`,null),b([t({type:String,json:{type:Fe.jsonValues,read:Fe.read,write:Fe.write}})],Z.prototype,`interpolation`,void 0),b([t({type:I,json:{write:!0}})],Z.prototype,`mosaicRule`,void 0),b([t({type:[String],json:{write:!0}})],Z.prototype,`outFields`,void 0),b([t({type:a,json:{write:!0}})],Z.prototype,`pixelSize`,void 0),b([t({type:String,json:{write:!0}})],Z.prototype,`raster`,void 0),b([t({type:Boolean,json:{write:!0}})],Z.prototype,`returnFirstValueOnly`,void 0),b([t({type:Number,json:{write:!0}})],Z.prototype,`sampleDistance`,void 0),b([t({type:Number,json:{write:!0}})],Z.prototype,`sampleCount`,void 0),b([t({type:Number,json:{write:!0}})],Z.prototype,`sliceId`,void 0),b([t({type:Ce,json:{read:{source:`time`},write:{target:`time`}}})],Z.prototype,`timeExtent`,void 0),Z=zt=b([g(`esri.rest.support.ImageSampleParameters`)],Z);var Q=class extends y{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};b([t({json:{write:!0}})],Q.prototype,`attributes`,void 0),b([t({type:a,json:{write:!0}})],Q.prototype,`location`,void 0),b([t({json:{write:!0}})],Q.prototype,`locationId`,void 0),b([t({json:{write:!0}})],Q.prototype,`rasterId`,void 0),b([t({json:{write:!0}})],Q.prototype,`resolution`,void 0),b([t({json:{write:!0}})],Q.prototype,`pixelValue`,void 0),Q=b([g(`esri.rest.support.ImageSample`)],Q);var Bt=class extends y{constructor(e){super(e),this.samples=[]}};b([t({type:[Q],json:{write:!0}})],Bt.prototype,`samples`,void 0),Bt=b([g(`esri.rest.support.ImageSampleResult`)],Bt);var Vt=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){let e=await xe(`RasterWorker`);this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&=(this._workerThread.close(),null)}async convertVectorFieldData(e,t){$(this._workerThread);let n=e.pixelBlock.getTransferableObject().pixelBlock,r=await this._workerThread.invoke(`convertVectorFieldData`,{pixelBlock:n,type:e.dataType},t);return r?new w(r):null}async convertPixelBlockToFeatures(e,t){$(this._workerThread);let n=await this._workerThread.invoke(`convertPixelBlockToFeatures`,{pixelBlock:e.pixelBlock.toJSON(),extent:e.extent.toJSON(),fieldNames:e.fieldNames,skipFactor:e.skipFactor,pixelIdOffset:e.pixelIdOffset,imageRowSize:e.imageRowSize},t),r=e.extent.spatialReference?.toJSON();return n.forEach(e=>e.geometry.spatialReference=r),n}computeStatisticsHistograms(e,t){$(this._workerThread);let{transferList:n,pixelBlock:r}=e.pixelBlock.getTransferableObject();return t?.transferPixelsToWorker&&(t={...t,transferList:n}),this._workerThread.invoke(`computeStatisticsHistograms`,{...e,pixelBlock:r},t)}async transformPixels(e,t){$(this._workerThread);let{transferList:n,pixelBlock:r}=e.pixelBlock.getTransferableObject();t?.transferPixelsToWorker&&(t={...t,transferList:n});let i=await this._workerThread.invoke(`transformPixels`,{...e,pixelBlock:r},t);return w.fromJSON(i)}async compositeBands(e,t){$(this._workerThread);let n=e.pixelBlocks.map(e=>e?.getTransferableObject()),r={pixelBlocks:n.map(e=>e?.pixelBlock)};if(t?.transferPixelsToWorker){let e=n.flatMap(e=>e?.transferList).filter(e=>e!=null);t={...t,transferList:e}}let i=await this._workerThread.invoke(`compositeBands`,r,t);return i?w.fromJSON(i):null}async decode(e,t){$(this._workerThread);let n=await this._workerThread.invoke(`decode`,e,{...t,transferList:[e.data]});return n?new w(n):null}async symbolize(e,t){$(this._workerThread);let n=e.pixelBlock?.getTransferableObject().pixelBlock,r={extent:e.extent?.toJSON(),pixelBlock:n,simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},i=await this._workerThread.invoke(`symbolize`,r,t);return i?new w(i):null}async highlightPixels(e,t){$(this._workerThread);let n={pixelBlock:e.pixelBlock?.toJSON(),renderedPixelBlock:e.renderedPixelBlock?.toJSON(),highlightOptions:e.highlightOptions},r=await this._workerThread.invoke(`highlightPixels`,n,t);e.renderedPixelBlock.pixels=r.pixels,e.renderedPixelBlock.mask=r.mask,e.renderedPixelBlock.maskIsAlpha=r.maskIsAlpha}async updateSymbolizer(e,t){$(this._workerThread);let n=e?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast(`updateSymbolizer`,{symbolizerJSON:e.toJSON(),histograms:n},t))}async updateRasterFunction(e,t){$(this._workerThread),await Promise.all(this._workerThread.broadcast(`updateRasterFunction`,{rasterFunctionJSON:e.toJSON()},t))}async process(e,t){$(this._workerThread);let n=await this._workerThread.invoke(`process`,{extent:e.extent?.toJSON(),primaryPixelSizes:e.primaryPixelSizes?.map(e=>e==null?null:e.toJSON()),primaryPixelBlocks:e.primaryPixelBlocks.map(e=>e?.getTransferableObject().pixelBlock),primaryRasterIds:e.primaryRasterIds},t);return n?new w(n):null}async stretch(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock,stretchParams:e.stretchParams},r=await this._workerThread.invoke(`stretch`,n,t);return r?new w(r):null}async split(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock,tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel,useBilinear:e.useBilinear},r=await this._workerThread.invoke(`split`,n,t);return r&&r.forEach((e,t)=>{r.set(t,e?w.fromJSON(e):null)}),r}async clipTile(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n=e.pixelBlock.getTransferableObject().pixelBlock,r={...e,pixelBlock:n},i=await this._workerThread.invoke(`clipTile`,r,t);return i?w.fromJSON(i):null}async estimateStatisticsHistograms(e,t){if($(this._workerThread),!e?.pixelBlock)return null;let n={srcPixelBlock:e.pixelBlock.getTransferableObject().pixelBlock};return await this._workerThread.invoke(`estimateStatisticsHistograms`,n,t)}async mosaicAndTransform(e,t){if($(this._workerThread),!e?.srcPixelBlocks?.length)return{pixelBlock:null};let n=e.srcPixelBlocks.map(e=>e?.getTransferableObject()),r={...e,srcPixelBlocks:n.map(e=>e?.pixelBlock)};if(t?.transferPixelsToWorker){let e=n.flatMap(e=>e?.transferList).filter(e=>e!=null);t={...t,transferList:e}}let i=await this._workerThread.invoke(`mosaicAndTransform`,r,t);return{pixelBlock:i.pixelBlock?new w(i.pixelBlock):null,localNorthDirections:i.localNorthDirections}}async createFlowMesh(e,t){$(this._workerThread);let n={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:r,simulationSettings:i}=e,a=await this._workerThread.invoke(`createFlowMesh`,{meshType:r,flowData:n,simulationSettings:i},{...t,transferList:[n.buffer,n.maskBuffer]});return{vertexData:new Float32Array(a.vertexBuffer),indexData:new Uint32Array(a.indexBuffer)}}getProjectionOffsetGrid(e,t){$(this._workerThread);let n=e.datumTransformation==null?null:e.datumTransformation.steps.map(e=>({wkid:e.wkid,wkt:e.wkt,isInverse:e.isInverse})),r=e.rasterTransform==null?null:e.rasterTransform.toJSON(),i={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:n,rasterTransform:r,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke(`getProjectionOffsetGrid`,i,t)}};function $(t){if(t==null)throw new e(`raster-jobhandler:no-connection`,`no available worker connection`)}var Ht=e=>{let n=e,r=class extends n{constructor(){super(...arguments),this._rasterJobHandlerConfig={instance:null,refCount:0,connectionPromise:null}}get _rasterJobHandler(){return this._rasterJobHandlerConfig.instance}increaseRasterJobHandlerUsage(){this._rasterJobHandlerConfig.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandlerConfig.refCount--,this._rasterJobHandlerConfig.refCount<=0&&this._shutdownJobHandler()}async convertVectorFieldData(e,t,n){if(e==null)return null;let r=this._rasterJobHandler;return r?r.convertVectorFieldData({pixelBlock:e,dataType:t},n):Ie(e,t)}async createFlowMesh(e,t){let n=this._rasterJobHandler;return n?n.createFlowMesh(e,t):He(e.meshType,e.simulationSettings,e.flowData,t.signal==null?new AbortController().signal:t.signal)}_initJobHandler(){let{_rasterJobHandlerConfig:e}=this;if(e.connectionPromise)return e.connectionPromise;let t=new Vt;return e.connectionPromise=t.initialize().then(()=>{e.instance=t,this.notifyChange(`_rasterJobHandler`)},()=>{}),e.connectionPromise}_shutdownJobHandler(){let{_rasterJobHandlerConfig:e}=this;e.instance?.destroy(),e.instance=null,e.connectionPromise=null,e.refCount=0,this.notifyChange(`_rasterJobHandler`),this._cachedRendererJson=void 0}async _updateSymbolizer(e,t,n,r){let i=this._rasterJobHandlerConfig.instance;if(!i)return;let a=jt({...t.toJSON(),variableName:n});JSON.stringify(this._cachedRendererJson)!==JSON.stringify(a)&&(r&&(e.rasterInfo=r),e.rendererJSON=a,e.bind(),await i.updateSymbolizer(e),this._cachedRendererJson=t.toJSON())}async _symbolize(e,t){let{pixelData:n,bandIds:r,simpleStretchParams:i}=e,a=this._rasterJobHandler;if(a){let e=await a.symbolize({...n,simpleStretchParams:i,bandIds:r},t);return{extent:n.extent,pixelBlock:e}}let o=e.symbolizer.symbolize({...n,simpleStretchParams:i,bandIds:r});return{extent:n.extent,pixelBlock:o}}};return b([t({clonable:!1})],r.prototype,`_rasterJobHandler`,null),b([t({clonable:!1})],r.prototype,`_cachedRendererJson`,void 0),b([t({clonable:!1})],r.prototype,`_rasterJobHandlerConfig`,void 0),r=b([g(`esri.layers.mixins.RasterJobHandlerMixin`)],r),r};export{L as _,X as a,Pt as c,ht as d,_t as f,gt as g,pt as h,Z as i,mt as l,jt as m,Bt as n,Lt as o,yt as p,Q as r,Nt as s,Ht as t,bt as u,I as v,N as y};