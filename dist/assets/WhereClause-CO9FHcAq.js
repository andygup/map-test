import{Dn as e,I_ as t,L_ as n,On as r,Qp as i,R_ as a,Xp as o,Yp as s,gE as c,gn as l,hE as u,kn as d,mw as ee,pD as f,pn as p}from"./index-CZ4oMP1N.js";function te(e){return Number.isNaN(e)||e===0?e:Math.trunc(e)}var ne=`esri.core.sql.SqlTimeStampOffset`,m=class e{constructor(e){this._timeStampOffset=e,this.declaredRootClass=ne,this._date=null}static isTimestampOffset(e){return typeof e==`object`&&!!e&&`declaredRootClass`in e&&e.declaredRootClass===ne}toDateTime(){return this._date??=t.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return te(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return te(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return e.fromDateTime(this.toDateTime().startOf(`day`))}static fromJSDate(n){return new e(t.fromJSDate(n).toISO({includeOffset:!0}))}static fromDateTime(t){return new e(t.toISO({includeOffset:!0}))}static fromParts(t,n,r=0,i=0,a=0,o=0,s=0,c=!1,l=0,u=0){let d=`${t.toString().padStart(4,`0`)}-${n.toString().padStart(2,`0`)}-${r.toString().padStart(2,`0`)}`,ee=``;o<10&&(ee=`0`);let f=`${i.toString().padStart(2,`0`)}:${a.toString().padStart(2,`0`)}:${ee+o.toString()}`;s!==0&&(f+=`.`+s.toString().padStart(3,`0`));let p=`${c?`-`:`+`}${l.toString().padStart(2,`0`)}:${u.toString().padStart(2,`0`)}`;return new e(d+`T`+f+p)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&=e.replace(`.000`,``),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(t){let n=this.toDateTime().plus(t);return e.fromDateTime(n)}},re={InvalidValueForAggregateFunction:`Invalid value used in aggregate function`,MissingStatisticParameters:`Statistic does not have 1 or 0 Parameters`,InvalidFunctionParameters:`Invalid parameters for call to {function}`,UnsupportedIsLhs:`Unsupported left hand expression in is statement`,UnsupportedIsRhs:`Unsupported right hand expression in is statement`,UnsupportedOperator:`Unsupported operator - {operator}`,UnsupportedSyntax:`Unsupported syntax - {node}`,UnsupportedSqlFunction:`Sql function not found = {function}`,InvalidDataType:`Invalid sql data type`,InvalidDate:`Invalid date encountered`,InvalidOperator:`Invalid operator encountered`,InvalidTime:`Invalid time encountered`,IllegalInterval:`Illegal interval`,FunctionNotRecognized:`Function not recognized`,InvalidTimeStamp:`Invalid timestamp encountered`,InvalidParameterCount:`Invalid parameter count for call to {name}`,PrimarySecondaryQualifiers:`Primary and Secondary SqlInterval qualifiers not supported`,YearMonthIntervals:`Year-Month Intervals not supported`,CannotCastValue:`Cannot cast value to the required data type`},h=class e extends Error{constructor(t,n){super(u(re[t],n)),this.declaredRootClass=`esri.arcade.featureset.support.sqlerror`,Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function ie(e,t){let n=oe[e.toLowerCase()];if(n==null)throw new h(`FunctionNotRecognized`);if(t.length<n.minParams||t.length>n.maxParams)throw new h(`InvalidParameterCount`,{name:e.toUpperCase()});return n.evaluate(t)}function ae(e,t){let n=oe[e.toLowerCase()];return n!=null&&t>=n.minParams&&t<=n.maxParams}var oe={min:{minParams:1,maxParams:1,evaluate:e=>le(e[0],`min`)},max:{minParams:1,maxParams:1,evaluate:e=>le(e[0],`max`)},avg:{minParams:1,maxParams:1,evaluate:e=>se(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>g(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>ue(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>de(e[0])}};function se(e){if(e===null)return null;let t=0,n=0;for(let r=0;r<e.length;r++){let i=e[r];if(i!==null){if(!ce(i))throw new h(`InvalidValueForAggregateFunction`);n++,t+=i}}return n===0?null:t/e.length}function ce(e){return typeof e==`number`}function le(e,n){if(e===null)return null;let r=null,i=null;for(let a of e){let e=a;e=l.isDateOnly(a)||p.isTimeOnly(a)?a.toNumber():t.isDateTime(a)?a.toMillis():m.isTimestampOffset(a)?a.toMilliseconds():a,(r===null||n===`max`&&i!==null&&e!==null&&i<=e||n===`min`&&i!==null&&e!==null&&i>=e)&&(r=a,i=e)}return r}function g(e){if(e===null)return null;let t=0;for(let n=0;n<e.length;n++){let r=e[n];if(r!==null){if(!ce(r))throw new h(`InvalidValueForAggregateFunction`);t+=r}}return t}function ue(e){if(e===null)return null;let t=de(e);return t===null?null:Math.sqrt(t)}function de(e){if(e===null||(e=e.filter(e=>e!==null)).length===0)return null;let t=se(e);if(t===null)return null;let n=0;for(let r of e){if(!ce(r))throw new h(`InvalidValueForAggregateFunction`);n+=(t-r)**2}return n/(e.length-1)}function fe(e){if(e.precision!==null||e.secondary!==null)throw new h(`PrimarySecondaryQualifiers`)}function pe(e,t){if(t.includes(`.`)){let n=t.split(`.`);e.second=parseFloat(n[0]),e.millis=parseInt(n[1],10)}else e.second=parseFloat(t)}var me=`esri.core.sql.SqlInterval`,_=class e{constructor(){this.declaredRootClass=me,this.op=`+`,this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(e){return typeof e==`object`&&!!e&&`declaredRootClass`in e&&e.declaredRootClass===me}static createFromMilliseconds(t){let n=new e;return n.second=t/1e3,n}static createFromValueAndQualifier(t,n,r){let i=null,a=new e;if(a.op=r===`-`?`-`:`+`,n.type===`interval-period`){fe(n);let e=RegExp(`^[0-9]{1,}$`);if(n.period===`year`||n.period===`month`)throw new h(`YearMonthIntervals`);if(n.period===`second`){if(!/^[0-9]{1,}(\.[0-9]{1,}){0,1}$/.test(t))throw new h(`IllegalInterval`);pe(a,t)}else{if(!e.test(t))throw new h(`IllegalInterval`);a[n.period]=parseFloat(t)}}else{if(fe(n.start),fe(n.end),n.start.period===`year`||n.start.period===`month`||n.end.period===`year`||n.end.period===`month`)throw new h(`YearMonthIntervals`);switch(n.start.period){case`day`:switch(n.end.period){case`hour`:if(i=RegExp(`^[0-9]{1,} [0-9]{1,}$`),!i.test(t))throw new h(`IllegalInterval`);a[n.start.period]=parseFloat(t.split(` `)[0]),a[n.end.period]=parseFloat(t.split(` `)[1]);break;case`minute`:if(i=RegExp(`^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$`),!i.test(t))throw new h(`IllegalInterval`);{a[n.start.period]=parseFloat(t.split(` `)[0]);let e=t.split(` `)[1].split(`:`);a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1])}break;case`second`:if(i=RegExp(`^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$`),!i.test(t))throw new h(`IllegalInterval`);{a[n.start.period]=parseFloat(t.split(` `)[0]);let e=t.split(` `)[1].split(`:`);a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1]),pe(a,e[2])}break;default:throw new h(`IllegalInterval`)}break;case`hour`:switch(n.end.period){case`minute`:if(i=RegExp(`^[0-9]{1,}:[0-9]{1,}$`),!i.test(t))throw new h(`IllegalInterval`);a.hour=parseFloat(t.split(`:`)[0]),a.minute=parseFloat(t.split(`:`)[1]);break;case`second`:if(i=RegExp(`^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$`),!i.test(t))throw new h(`IllegalInterval`);{let e=t.split(`:`);a.hour=parseFloat(e[0]),a.minute=parseFloat(e[1]),pe(a,e[2])}break;default:throw new h(`IllegalInterval`)}break;case`minute`:if(n.end.period!==`second`||(i=RegExp(`^[0-9]{1,}:[0-9]{1,}(\\.[0-9]{1,}){0,1}$`),!i.test(t)))throw new h(`IllegalInterval`);{let e=t.split(`:`);a.minute=parseFloat(e[0]),pe(a,e[1])}break;default:throw new h(`IllegalInterval`)}}return a}valueInMilliseconds(){return(this.op===`-`?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}},he=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,ge=/^(\d{1,2}):(\d{1,2})$/,_e=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,ve=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,ye=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,be=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,xe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})? {0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Se=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function Ce(e,n){if(n instanceof a)return n===d.instance?t.fromMillis(e.getTime(),{zone:d.instance}):t.fromJSDate(e,{zone:n});switch(n){case`system`:case`local`:case null:return t.fromJSDate(e);default:return n?.toLowerCase()===`unknown`?t.fromMillis(e.getTime(),{zone:d.instance}):t.fromJSDate(e,{zone:n})}}function v(e){return _.isInterval(e)}function y(e){return t.isDateTime(e)}function b(e){return l.isDateOnly(e)}function x(e){return p.isTimeOnly(e)}function S(e){return m.isTimestampOffset(e)}function we(e){let t=he.exec(e);if(t!==null){let[,e,n,r]=t,i=p.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),0);if(i!==null)return i;throw new h(`InvalidTime`)}if(t=ge.exec(e),t!==null){let[,e,n]=t,r=p.fromParts(parseInt(e,10),parseInt(n,10),0,0);if(r!==null)return r;throw new h(`InvalidTime`)}if(t=_e.exec(e),t!==null){let[,e,n,r,i]=t,a=p.fromParts(parseInt(e,10),parseInt(n,10),parseInt(r,10),parseInt(i,10));if(a!==null)return a;throw new h(`InvalidTime`)}throw new h(`InvalidTime`)}function C(e,n,i=!1){let a=ye.exec(e);if(a!==null){let[,e,i,o,s,c,l,u]=a,d=t.fromObject({year:parseInt(e,10),month:parseInt(i,10),day:parseInt(o,10),hour:parseInt(s,10),minute:parseInt(c,10),second:parseInt(l,10),millisecond:u?parseInt(u.replace(`.`,``),10):0},{zone:r(n)});if(!1===d.isValid)throw new h(`InvalidTimeStamp`);return d}if(a=be.exec(e),a!==null){let[,e,t,n,r,i,o,s,c,l,u]=a,d=m.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(r,10),parseInt(i,10),parseInt(o,10),s?parseInt(s.replace(`.`,``),10):0,c===`-`,parseInt(l,10),parseInt(u,10));if(!1===d.isValid)throw new h(`InvalidTimeStamp`);return d}if(a=xe.exec(e),a!==null){let[,e,t,n,r,i,o,s,c]=a,l=m.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(r,10),parseInt(i,10),0,0,o===`-`,parseInt(s,10),parseInt(c,10));if(!1===l.isValid)throw new h(`InvalidTimeStamp`);return l}if(a=Se.exec(e),a!==null){let[,e,i,o,s,c]=a,l=t.fromObject({year:parseInt(e,10),month:parseInt(i,10),day:parseInt(o,10),hour:parseInt(s,10),minute:parseInt(c,10),second:0},{zone:r(n)});if(!1===l.isValid)throw new h(`InvalidTimeStamp`);return l}if(a=ve.exec(e),a!==null){let[,e,i,o]=a,s=t.fromObject({year:parseInt(e,10),month:parseInt(i,10),day:parseInt(o,10),hour:0,minute:0,second:0},{zone:r(n)});if(!1===s.isValid)throw new h(`InvalidTimeStamp`);return s}throw new h(`InvalidTimeStamp`)}function Te(e,t){let n=ve.exec(e);if(n===null)try{return C(e,t)}catch{throw new h(`InvalidDate`)}let[,r,i,a]=n,o=l.fromParts(parseInt(r,10),parseInt(i,10),parseInt(a,10));if(o===null)throw new h(`InvalidDate`);return o}var Ee=321408e5,De=26784e5,Oe=864e5,ke=36e5,Ae=6e4;function je(e){return!!y(e)||!!S(e)}function Me(e){return!!y(e)||!!b(e)||!!S(e)||!!x(e)}function w(e){if(y(e))return e.toMillis();if(b(e))return e.toNumber();if(S(e))return e.toMilliseconds();throw new h(`InvalidDataType`)}function T(n,r,a){if(n==null||r==null)return null;if(i(n)){if(i(r))return E(n,r,a);if(o(r))return Ne(n,r,a);if(Me(r)||b(r))throw new h(`InvalidOperator`)}else if(o(n)){if(i(r))return Pe(n,r,a);if(o(r))return Fe(n,r,a);if(y(r)||b(r)||x(r)||S(r))throw new h(`InvalidOperator`)}else if(y(n)){if(je(r)){if(e(n.zone)){if(t.isDateTime(r)&&!e(r.zone)||m.isTimestampOffset(r))return Be(n,r,a)}else if(t.isDateTime(r)&&e(r.zone)&&(!e(n.zone)||m.isTimestampOffset(n)))return Be(n,r,a);return E(w(n),w(r),a)}if(o(r))throw new h(`InvalidOperator`);if(b(r))return Ie(n,r,a);if(x(r)||i(r))throw new h(`InvalidOperator`)}else if(b(n)){if(S(r))return ze(n,r,a);if(y(r))return Re(n,r,a);if(o(r))throw new h(`InvalidOperator`);if(b(r))return E(n.toNumber(),r.toNumber(),a);if(x(r)||i(r))throw new h(`InvalidOperator`)}else if(x(n)){if(x(r))return E(n.toNumber(),r.toNumber(),a);if(o(r)||i(r)||b(r)||je(r))throw new h(`InvalidOperator`)}else if(S(n)){if(je(r))return t.isDateTime(r)&&e(r.zone)?Be(n,r,a):E(w(n),w(r),a);if(o(r))throw new h(`InvalidOperator`);if(b(r))return Le(n,r,a);if(x(r)||i(r))throw new h(`InvalidOperator`)}switch(a){case`<>`:return n!==r;case`=`:return n===r;case`>`:return n>r;case`<`:return n<r;case`>=`:return n>=r;case`<=`:return n<=r}}function E(e,t,n){switch(n){case`<>`:return e!==t;case`=`:return e===t;case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}}function Ne(e,t,n){let r=parseFloat(t);if(!isNaN(r))return E(e,r,n);let i=e.toString();switch(n){case`<>`:return i!==t;case`=`:return i===t;case`>`:return i>t;case`<`:return i<t;case`>=`:return i>=t;case`<=`:return i<=t}}function Pe(e,t,n){let r=parseFloat(e);if(!isNaN(r))return E(r,t,n);let i=t.toString();switch(n){case`<>`:return e!==i;case`=`:return e===i;case`>`:return e>i;case`<`:return e<i;case`>=`:return e>=i;case`<=`:return e<=i}}function Fe(e,t,n){switch(n){case`<>`:return e!==t;case`=`:return e===t;case`>`:return e>t;case`<`:return e<t;case`>=`:return e>=t;case`<=`:return e<=t}}function Ie(e,t,n){let r=t.toDateTimeLuxon(e.zone);return E((e=e.startOf(`day`)).toMillis(),r.toMillis(),n)}function Le(e,t,n){let r=t.toDateTimeLuxon(e.toDateTime().zone);return E((e=e.startOfDay()).toMilliseconds(),r.toMillis(),n)}function Re(e,t,n){let r=e.toDateTimeLuxon(t.zone);return t=t.startOf(`day`),E(r.toMillis(),t.toMillis(),n)}function ze(e,t,n){let r=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),E(r.toMillis(),t.toMilliseconds(),n)}function Be(e,t,n){m.isTimestampOffset(e)&&(e=e.toDateTime()),m.isTimestampOffset(t)&&(t=t.toDateTime());let r=Ve(e),i=Ve(t);switch(n){case`<>`:return r!==i;case`=`:return r===i;case`>`:return r>i;case`<`:return r<i;case`>=`:return r>=i;case`<=`:return r<=i}}function Ve(e){return e.year*Ee+e.month*De+e.day*Oe+e.hour*ke+e.minute*Ae+1e3*e.second+e.millisecond}function He(e,t,n){let r=Ye[e.toLowerCase()];if(r==null)throw new h(`FunctionNotRecognized`);if(t.length<r.minParams||t.length>r.maxParams)throw new h(`InvalidParameterCount`,{name:e.toUpperCase()});return r.evaluate(t,n)}function Ue(e,t){let n=Ye[e.toLowerCase()];return n!=null&&t>=n.minParams&&t<=n.maxParams}function We(e){return!s(e)&&!b(e)&&!y(e)&&!x(e)&&!S(e)}function Ge(e){return b(e)||x(e)?e.toString():S(e)?e.toSQLValue():y(e)?e.millisecond===0?e.toFormat(`yyyy-LL-dd HH:mm:ss`):e.toSQL({includeOffset:!1}):s(e)?Ge(t.fromJSDate(e)):e.toString()}function Ke(e){if(s(e))return l.fromDateJS(e);if(y(e))return l.fromParts(e.year,e.month,e.day);if(b(e))return e;if(x(e)||S(e)&&l.fromParts(e.year,e.month,e.day)===null)throw new h(`CannotCastValue`);if(o(e)){let t=l.fromReader(e);if(t!==null&&t.isValid)return t}throw new h(`CannotCastValue`)}function qe(e,t,n){if(s(e))return Ce(e,t);if(y(e))return e;if(b(e))return e.toDateTimeLuxon(`unknown`);if(x(e))throw new h(`CannotCastValue`);if(S(e))return e;if(o(e))return C(e,`unknown`,n);throw new h(`CannotCastValue`)}function Je(e){if(s(e))return p.fromDateJS(e);if(y(e))return p.fromDateTime(e);if(b(e))throw new h(`CannotCastValue`);if(x(e))return e;if(S(e))return p.fromSqlTimeStampOffset(e);if(o(e))return we(e);throw new h(`CannotCastValue`)}var Ye={extract:{minParams:2,maxParams:2,evaluate:([e,n])=>{if(n==null)return null;if(s(n))switch(e.toUpperCase()){case`SECOND`:return n.getSeconds();case`MINUTE`:return n.getMinutes();case`HOUR`:return n.getHours();case`DAY`:return n.getDate();case`MONTH`:return n.getMonth()+1;case`YEAR`:return n.getFullYear();case`TIMEZONE_HOUR`:case`TIMEZONE_MINUTE`:return 0;case`DOW`:return t.fromJSDate(n,{zone:`system`}).weekday;case`DOY`:return t.fromJSDate(n,{zone:`system`}).ordinal;case`WEEK`:return t.fromJSDate(n,{zone:`system`}).weekNumber}else if(y(n))switch(e.toUpperCase()){case`SECOND`:return n.second;case`MINUTE`:return n.minute;case`HOUR`:return n.hour;case`DAY`:return n.day;case`MONTH`:return n.month;case`YEAR`:return n.year;case`TIMEZONE_HOUR`:case`TIMEZONE_MINUTE`:throw new h(`InvalidFunctionParameters`,{function:`EXTRACT`});case`DOW`:return n.weekday;case`DOY`:return n.ordinal;case`WEEK`:return n.weekNumber}else if(b(n))switch(e.toUpperCase()){case`DAY`:return n.day;case`MONTH`:return n.month;case`YEAR`:return n.year;case`TIMEZONE_HOUR`:case`TIMEZONE_MINUTE`:throw new h(`InvalidFunctionParameters`,{function:`EXTRACT`});case`DOW`:return n.toDateTime(`unknown`).weekday;case`DOY`:return n.toDateTime(`unknown`).ordinal;case`WEEK`:return n.toDateTime(`unknown`).weekNumber}else if(x(n))switch(e.toUpperCase()){case`SECOND`:return n.second;case`MINUTE`:return n.minute;case`HOUR`:return n.hour}else if(S(n))switch(e.toUpperCase()){case`SECOND`:return n.second;case`MINUTE`:return n.minute;case`HOUR`:return n.hour;case`DAY`:return n.day;case`MONTH`:return n.month;case`YEAR`:return n.year;case`TIMEZONE_HOUR`:return n.timezoneOffsetHour;case`TIMEZONE_MINUTE`:return n.timezoneOffsetMinutes;case`DOW`:return n.toDateTime().weekday;case`DOY`:return n.toDateTime().ordinal;case`WEEK`:return n.toDateTime().weekNumber}throw new h(`InvalidFunctionParameters`,{function:`EXTRACT`})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(e.length===2){let[t,n]=e;return t==null||n==null?null:t.toString().substring(n-1)}if(e.length===3){let[t,n,r]=e;return t==null||n==null||r==null?null:r<=0?``:t.toString().substring(n-1,n+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>e==null||t==null?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{let t=e.length===3,n=t?e[1]:` `,r=t?e[2]:e[1];if(n==null||r==null)return null;let i=`(${c(n)})`;switch(e[0]){case`BOTH`:return r.replaceAll(RegExp(`^${i}*|${i}*$`,`g`),``);case`LEADING`:return r.replaceAll(RegExp(`^${i}*`,`g`),``);case`TRAILING`:return r.replaceAll(RegExp(`${i}*$`,`g`),``)}throw new h(`InvalidFunctionParameters`,{function:`TRIM`})}},abs:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0]>0?1:e[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{let t=e[0],n=e.length===2?10**e[1]:1;return t==null?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:e=>e[0]==null?null:e.length===1||e[1]===0?Math.trunc(e[0]):ee(`trunc`,e[0],-Number(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>o(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t=``;for(let n=0;n<e.length;n++){if(e[n]==null)return null;t+=e[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(let t of e)if(t!==null)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:e=>T(e[0],e[1],`=`)?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,t)=>{let n=e[0],r=e[1];if(n===null)return null;switch(r.type){case`integer`:{if(!We(n))throw new h(`CannotCastValue`);let e=parseInt(n,10);if(isNaN(e))throw new h(`CannotCastValue`);return e}case`smallint`:{if(!We(n))throw new h(`CannotCastValue`);let e=parseInt(n,10);if(isNaN(e)||e>32767||e<-32767)throw new h(`CannotCastValue`);return e}case`float`:case`real`:{if(!We(n))throw new h(`CannotCastValue`);let e=parseFloat(n);if(isNaN(e))throw new h(`CannotCastValue`);return e}case`time`:return Je(n);case`date`:return Ke(n);case`timestamp`:return qe(n,t,!0===r.withtimezone);case`varchar`:{let e=Ge(n);if(e.length>r.size)throw new h(`CannotCastValue`);return e}default:throw new h(`InvalidDataType`)}}}};function Xe(e,t,n,r){if(e===`||`)return He(`concat`,[t,n],r);if(t===null||n===null)return null;if(i(t)){if(i(n))return Ze(t,n,e);if(v(n))return at(t,n,e);if(x(n))return ht();if(b(n))return gt();if(S(n))return mt();if(y(n))return ft();if(o(n))return _t(t,n,e);throw new h(`InvalidOperator`)}if(b(t)){if(i(n))return ut(t,n,e);if(v(n))return ot(t,n,e);if(x(n))return Tt();if(b(n))return wt(t,n,e);if(S(n))return Ct(t,n,e);if(y(n))return St(t,n,e);if(o(n))return Rt();throw new h(`InvalidOperator`)}if(x(t)){if(i(n))return dt(t,n,e);if(v(n))return tt(t,n,e);if(x(n))return Nt();if(b(n))return jt();if(S(n))return Mt();if(y(n))return At();if(o(n))return zt();throw new h(`InvalidOperator`)}if(v(t)){if(i(n))return it(t,n,e);if(v(n))return rt(t,n,e);if(x(n))return $e(t,n,e);if(b(n))return et(t,n,e);if(S(n))return nt(t,n,e);if(y(n))return Qe(t,n,e);if(o(n))return bt();throw new h(`InvalidOperator`)}if(y(t)){if(i(n))return lt(t,n,e);if(v(n))return st(t,n,e);if(x(n))return Lt();if(b(n))return Ft(t,n,e);if(S(n))return It(t,n,e);if(y(n))return Pt(t,n,e);if(o(n))return Bt();throw new h(`InvalidOperator`)}if(S(t)){if(i(n))return pt(t,n,e);if(v(n))return ct(t,n,e);if(x(n))return Et();if(b(n))return Dt(t,n,e);if(S(n))return kt(t,n,e);if(y(n))return Ot(t,n,e);if(o(n))return Vt();throw new h(`InvalidOperator`)}if(o(t)){if(i(n))return vt(t,n,e);if(v(n))return xt();if(x(n))return Ht();if(b(n))return Ut();if(S(n))return Gt();if(y(n))return Wt();if(o(n))return yt(t,n,e);throw new h(`InvalidOperator`)}throw new h(`InvalidOperator`)}function Ze(e,t,n){switch(n){case`+`:return e+t;case`-`:return e-t;case`*`:return e*t;case`/`:return e/t}throw new h(`InvalidOperator`)}function Qe(e,t,n){switch(n){case`+`:return t.plus({milliseconds:e.valueInMilliseconds()});case`-`:return e.valueInMilliseconds()-t.toMillis()}throw new h(`InvalidOperator`)}function $e(e,t,n){if(n===`+`)return t.plus(`milliseconds`,e.valueInMilliseconds());throw new h(`InvalidOperator`)}function et(e,t,n){if(n===`+`)return t.plus(`milliseconds`,e.valueInMilliseconds());throw new h(`InvalidOperator`)}function tt(e,t,n){switch(n){case`+`:return e.plus(`milliseconds`,t.valueInMilliseconds());case`-`:return e.plus(`milliseconds`,-1*t.valueInMilliseconds())}throw new h(`InvalidOperator`)}function nt(e,t,n){if(n===`+`)return t.addMilliseconds(e.valueInMilliseconds());throw new h(`InvalidOperator`)}function rt(e,t,n){switch(n){case`+`:return _.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case`-`:return _.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case`*`:return _.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case`/`:return _.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new h(`InvalidOperator`)}function it(e,t,n){switch(n){case`+`:return _.createFromMilliseconds(e.valueInMilliseconds()+t);case`-`:return _.createFromMilliseconds(e.valueInMilliseconds()-t);case`*`:return _.createFromMilliseconds(e.valueInMilliseconds()*t);case`/`:return _.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new h(`InvalidOperator`)}function at(e,t,n){switch(n){case`+`:return _.createFromMilliseconds(e+t.valueInMilliseconds());case`-`:return _.createFromMilliseconds(e-t.valueInMilliseconds());case`*`:return _.createFromMilliseconds(e*t.valueInMilliseconds());case`/`:return _.createFromMilliseconds(e/t.valueInMilliseconds())}throw new h(`InvalidOperator`)}function ot(e,t,n){switch(n){case`+`:return e.plus(`milliseconds`,t.valueInMilliseconds());case`-`:return e.plus(`milliseconds`,-1*t.valueInMilliseconds())}throw new h(`InvalidOperator`)}function st(e,t,n){switch(n){case`+`:return e.plus({milliseconds:t.valueInMilliseconds()});case`-`:return e.minus({milliseconds:t.valueInMilliseconds()})}throw new h(`InvalidOperator`)}function ct(e,t,n){switch(n){case`+`:return e.addMilliseconds(t.valueInMilliseconds());case`-`:return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new h(`InvalidOperator`)}function lt(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.plus({milliseconds:r});case`-`:return e.minus({milliseconds:r})}throw new h(`InvalidOperator`)}function ut(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.plus(`milliseconds`,r);case`-`:return e.plus(`milliseconds`,-1*r)}throw new h(`InvalidOperator`)}function dt(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.plus(`milliseconds`,r);case`-`:return e.plus(`milliseconds`,-1*r)}throw new h(`InvalidOperator`)}function ft(e,t,n){throw new h(`InvalidOperator`)}function pt(e,t,n){let r=1e3*t*24*60*60;switch(n){case`+`:return e.addMilliseconds(r);case`-`:return e.addMilliseconds(-1*r)}throw new h(`InvalidOperator`)}function mt(e,t,n){throw new h(`InvalidOperator`)}function ht(e,t,n){throw new h(`InvalidOperator`)}function gt(e,t,n){throw new h(`InvalidOperator`)}function _t(e,t,n){let r=parseFloat(t);if(isNaN(r))throw new h(`InvalidOperator`);return Ze(e,r,n)}function vt(e,t,n){let r=parseFloat(e);if(isNaN(r))throw new h(`InvalidOperator`);return Ze(r,t,n)}function yt(e,t,n){if(n===`+`)return e+t;throw new h(`InvalidOperator`)}function bt(e,t,n){throw new h(`InvalidOperator`)}function xt(e,t,n){throw new h(`InvalidOperator`)}function St(e,t,n){if(n===`-`)return e.toDateTimeLuxon(t.zone).diff(t).as(`days`);throw new h(`InvalidOperator`)}function Ct(e,t,n){if(n===`-`)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as(`days`);throw new h(`InvalidOperator`)}function wt(e,t,n){if(n===`-`)return e.toDateTimeLuxon(`UTC`).diff(t.toDateTimeLuxon(`UTC`)).as(`days`);throw new h(`InvalidOperator`)}function Tt(e,t,n){throw new h(`InvalidOperator`)}function Et(e,t,n){throw new h(`InvalidOperator`)}function Dt(e,t,n){if(n===`-`)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as(`days`);throw new h(`InvalidOperator`)}function Ot(e,t,n){if(n===`-`)return e.toDateTime().diff(t).as(`days`);throw new h(`InvalidOperator`)}function kt(e,t,n){if(n===`-`)return e.toDateTime().diff(t.toDateTime()).as(`days`);throw new h(`InvalidOperator`)}function At(e,t,n){throw new h(`InvalidOperator`)}function jt(e,t,n){throw new h(`InvalidOperator`)}function Mt(e,t,n){throw new h(`InvalidOperator`)}function Nt(e,t,n){throw new h(`InvalidOperator`)}function Pt(e,t,n){if(n===`-`)return e.diff(t).as(`days`);throw new h(`InvalidOperator`)}function Ft(e,t,n){if(n===`-`)return e.diff(t.toDateTimeLuxon(e.zone)).as(`days`);throw new h(`InvalidOperator`)}function It(e,t,n){if(n===`-`)return e.diff(t.toDateTime()).as(`days`);throw new h(`InvalidOperator`)}function Lt(e,t,n){throw new h(`InvalidOperator`)}function Rt(e,t,n){throw new h(`InvalidOperator`)}function zt(e,t,n){throw new h(`InvalidOperator`)}function Bt(e,t,n){throw new h(`InvalidOperator`)}function Vt(e,t,n){throw new h(`InvalidOperator`)}function Ht(e,t,n){throw new h(`InvalidOperator`)}function Ut(e,t,n){throw new h(`InvalidOperator`)}function Wt(e,t,n){throw new h(`InvalidOperator`)}function Gt(e,t,n){throw new h(`InvalidOperator`)}var Kt=class extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name=`SyntaxError`}format(e){let t=`Error: `+this.message;if(this.location){let n=null,r=e.find(e=>e.source===this.location.source);r&&(n=r.text.split(/\r\n|\n|\r/g));let i=this.location.start,a=this.location.source&&typeof this.location.source.offset==`function`?this.location.source.offset(i):i,o=this.location.source+`:`+a.line+`:`+a.column;if(n){let e=this.location.end,r=``.padEnd(a.line.toString().length,` `),s=n[i.line-1],c=(i.line===e.line?e.column:s.length+1)-i.column||1;t+=`
 --> `+o+`
`+r+` |
`+a.line+` | `+s+`
`+r+` | `+``.padEnd(i.column-1,` `)+``.padEnd(c,`^`)}else t+=`
 at `+o}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}let r=Object.prototype.hasOwnProperty.call(RegExp.prototype,`unicode`)?RegExp(`[\\p{C}\\p{Mn}\\p{Mc}]`,`gu`):null;function i(e){return r?e.replace(r,e=>`\\u{`+n(e)+`}`):e}function a(e){return i(e.replace(/\\/g,`\\\\`).replace(/"/g,`\\"`).replace(/\0/g,`\\0`).replace(/\t/g,`\\t`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/[\x00-\x0F]/g,e=>`\\x0`+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>`\\x`+n(e)))}function o(e){return i(e.replace(/\\/g,`\\\\`).replace(/\]/g,`\\]`).replace(/\^/g,`\\^`).replace(/-/g,`\\-`).replace(/\0/g,`\\0`).replace(/\t/g,`\\t`).replace(/\n/g,`\\n`).replace(/\r/g,`\\r`).replace(/[\x00-\x0F]/g,e=>`\\x0`+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>`\\x`+n(e)))}let s={literal:e=>`"`+a(e.text)+`"`,class(e){let t=e.parts.map(e=>Array.isArray(e)?o(e[0])+`-`+o(e[1]):o(e));return`[`+(e.inverted?`^`:``)+t.join(``)+`]`+(e.unicode?`u`:``)},any:()=>`any character`,end:()=>`end of input`,other:e=>e.description};function c(e){return s[e.type](e)}function l(e){let t=e.map(c);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+` or `+t[1];default:return t.slice(0,-1).join(`, `)+`, or `+t[t.length-1]}}function u(e){return e?`"`+a(e)+`"`:`end of input`}return`Expected `+l(e)+` but `+u(t)+` found.`}};function qt(e,t){let n={},r=(t=t===void 0?{}:t).grammarSource,i={start:mi},a=mi,o=/^[<-=]/,s=/^[+\-]/,c=/^[*\/]/,l=/^[A-Za-z_\x80-\uFFFF]/,u=/^[A-Za-z0-9_]/,d=/^[A-Za-z0-9_.\x80-\uFFFF]/,ee=/^["]/,f=/^[^']/,p=/^[0-9]/,te=/^[eE]/,ne=/^[ \t\n\r]/,m=/^[^`]/,re=z(`!`,!1),h=z(`=`,!1),ie=z(`>=`,!1),ae=z(`>`,!1),oe=z(`<=`,!1),se=z(`<>`,!1),ce=B([[`<`,`=`]],!1,!1,!1),le=z(`!=`,!1),g=B([`+`,`-`],!1,!1,!1),ue=z(`||`,!1),de=B([`*`,`/`],!1,!1,!1),fe=B([[`A`,`Z`],[`a`,`z`],`_`,[``,`￿`]],!1,!1,!1),pe=B([[`A`,`Z`],[`a`,`z`],[`0`,`9`],`_`],!1,!1,!1),me=B([[`A`,`Z`],[`a`,`z`],[`0`,`9`],`_`,`.`,[``,`￿`]],!1,!1,!1),_=B([`"`],!1,!1,!1),he=z(`@`,!1),ge=z(`'`,!1),_e=z(`N'`,!1),ve=z(`''`,!1),ye=B([`'`],!0,!1,!1),be=z(`.`,!1),xe=B([[`0`,`9`]],!1,!1,!1),Se=B([`e`,`E`],!1,!1,!1),Ce=z(`NULL`,!0),v=z(`TRUE`,!0),y=z(`FALSE`,!0),b=z(`IN`,!0),x=z(`IS`,!0),S=z(`LIKE`,!0),we=z(`ESCAPE`,!0),C=z(`NOT`,!0),Te=z(`AND`,!0),Ee=z(`OR`,!0),De=z(`BETWEEN`,!0),Oe=z(`FROM`,!0),ke=z(`FOR`,!0),Ae=z(`SUBSTRING`,!0),je=z(`EXTRACT`,!0),Me=z(`TRIM`,!0),w=z(`POSITION`,!0),T=z(`TIMESTAMP`,!0),E=z(`DATE`,!0),Ne=z(`TIME`,!0),Pe=z(`LEADING`,!0),Fe=z(`TRAILING`,!0),Ie=z(`BOTH`,!0),Le=z(`CAST`,!0),Re=z(`AS`,!0),ze=z(`INTEGER`,!0),Be=z(`INT`,!0),Ve=z(`SMALLINT`,!0),He=z(`FLOAT`,!0),Ue=z(`REAL`,!0),We=z(`VARCHAR`,!0),Ge=z(`TO`,!0),Ke=z(`INTERVAL`,!0),qe=z(`YEAR`,!0),Je=z(`TIMEZONE_HOUR`,!0),Ye=z(`TIMEZONE_MINUTE`,!0),Xe=z(`MONTH`,!0),Ze=z(`DAY`,!0),Qe=z(`HOUR`,!0),$e=z(`MINUTE`,!0),et=z(`SECOND`,!0),tt=z(`DOW`,!0),nt=z(`DOY`,!0),rt=z(`WEEK`,!0),it=z(`CASE`,!0),at=z(`END`,!0),ot=z(`WHEN`,!0),st=z(`THEN`,!0),ct=z(`ELSE`,!0),lt=z(`,`,!1),ut=z(`(`,!1),dt=z(`)`,!1),ft=B([` `,`	`,`
`,`\r`],!1,!1,!1),pt=z("`",!1),mt=B(["`"],!0,!1,!1);function ht(e){return e}function gt(e){return{type:`expression-list`,location:R(),value:e}}function _t(e,t,n){return{op:t,expr:n,location:R()}}function vt(e,t){return $(e,t)}function yt(e,t,n){return{op:t,expr:n,location:R()}}function bt(e,t){return $(e,t)}function xt(e){return To(`NOT`,e,R())}function St(e,t){return t==``||t==null||t==null?e:t.type==`arithmetic`?$(e,t.tail):Eo(t.op,e,t.right,t.escape,R())}function Ct(e,t){return{op:e,expr:t,location:R()}}function wt(e){return{type:`arithmetic`,tail:e}}function Tt(e,t){return{op:e+`NOT`,right:t}}function Et(e,t){return{op:e,right:t}}function Dt(e,t,n){return Q(R(),t,n)}function Ot(e,t){return{op:`NOT`+e,right:t}}function kt(e,t,n){return Q(R(),t,n)}function At(e,t){return{op:e,right:t}}function jt(e){return e[0]+` `+e[2]}function Mt(e){return e[0]+` `+e[2]}function Nt(e,t,n){return{op:e,right:t,escape:n.value}}function Pt(e,t){return{op:e,right:t,escape:``}}function Ft(e,t){return{op:e,right:t}}function It(e,t){return{op:e,right:t}}function Lt(e,t,n){return{op:t,expr:n,location:R()}}function Rt(e,t){return $(e,t)}function zt(e,t,n){return{op:t,expr:n,location:R()}}function Bt(e,t){return $(e,t)}function Vt(e){return e.paren=!0,e}function Ht(e){return/^CURRENT_DATE$/i.test(e)?{type:`current-time`,location:R(),mode:`date`}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:`current-time`,location:R(),mode:`timestamp`}:/^CURRENT_TIME$/i.test(e)?{type:`current-time`,location:R(),mode:`time`}:/^CURRENT_USER$/i.test(e)?{type:`current-user`,location:R()}:{type:`column-reference`,location:R(),table:``,column:e}}function Ut(e){return{type:`column-reference`,location:R(),table:``,column:e,delimited:!0}}function Wt(e){return e}function Gt(e,t){return e+t.join(``)}function qt(e,t){return e+t.join(``)}function Jt(e){return e}function D(e){return e.join(``)}function Yt(){return`"`}function Xt(e){return{type:`parameter`,location:R(),value:e[1]}}function O(e,t){return Q(R(),e,t)}function k(e,t){return Q(R(),e,t)}function Zt(e){return{type:`function`,location:R(),name:`extract`,args:e}}function Qt(e,t,n){return Q(R(),e,t,...n?[n]:[])}function $t(e,t,n){return Q(R(),e,t,n)}function en(e){return{type:`function`,location:R(),name:`substring`,args:e}}function tn(e,t){return Q(R(),e,t)}function nn(e,t){return Q(R(),e,t)}function rn(e){return{type:`function`,location:R(),name:`cast`,args:e}}function A(){return{type:`data-type`,location:R(),value:{type:`integer`}}}function an(){return{type:`data-type`,location:R(),value:{type:`smallint`}}}function on(){return{type:`data-type`,location:R(),value:{type:`float`}}}function sn(){return{type:`data-type`,location:R(),value:{type:`real`}}}function cn(){return{type:`data-type`,location:R(),value:{type:`date`}}}function ln(){return{type:`data-type`,location:R(),value:{type:`timestamp`}}}function j(){return{type:`data-type`,location:R(),value:{type:`time`}}}function un(e){return{type:`data-type`,location:R(),value:{type:`varchar`,size:parseInt(e)}}}function dn(e,t,n){return Q(R(),e,t,n)}function fn(e,t){return Q(R(),e,t)}function pn(e){return{type:`function`,location:R(),name:`trim`,args:e}}function mn(e){return{type:`string`,location:R(),value:e??`BOTH`}}function hn(e,t){return Q(R(),e,t)}function gn(e,t){return Q(R(),e,t)}function _n(e){return{type:`function`,location:R(),name:`position`,args:e}}function vn(e,t){return{type:`function`,location:R(),name:e,args:t}}function yn(e){return{type:`string`,location:R(),value:e}}function bn(e){return e.type===`string`&&Do(e.value),{type:`timestamp`,location:R(),value:e.value}}function M(e){return e.type===`string`&&Oo(e.value),{type:`time`,location:R(),value:e.value}}function xn(e,t,n){return{type:`interval`,location:R(),value:t,qualifier:n,op:e}}function Sn(e,t){return{type:`interval`,location:R(),value:e,qualifier:t,op:``}}function Cn(e,t){return{type:`interval-qualifier`,location:R(),start:e,end:t}}function wn(e,t){return{type:`interval-period`,location:R(),period:e.value,precision:t,secondary:null}}function Tn(e){return{type:`interval-period`,location:R(),period:e.value,precision:null,secondary:null}}function En(e){return{type:`interval-period`,location:R(),period:e.value,precision:null,secondary:null}}function Dn(e,t){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:t}}function On(e){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:null}}function kn(){return{type:`interval-period`,location:R(),period:`second`,precision:null,secondary:null}}function An(e,t){return{type:`interval-period`,location:R(),period:e.value,precision:t,secondary:null}}function jn(e){return{type:`interval-period`,location:R(),period:e.value,precision:null,secondary:null}}function Mn(e,t){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:t}}function Nn(e){return{type:`interval-period`,location:R(),period:`second`,precision:e,secondary:null}}function Pn(){return{type:`interval-period`,location:R(),period:`second`,precision:null,secondary:null}}function Fn(){return{type:`string`,location:R(),value:`day`}}function In(){return{type:`string`,location:R(),value:`hour`}}function Ln(){return{type:`string`,location:R(),value:`minute`}}function Rn(){return{type:`string`,location:R(),value:`month`}}function zn(){return{type:`string`,location:R(),value:`year`}}function Bn(e){return parseFloat(e)}function Vn(e){return parseFloat(e)}function Hn(e){return e.type===`string`&&ko(e.value),{type:`date`,location:R(),value:e.value}}function Un(){return{type:`null`,location:R(),value:null}}function Wn(){return{type:`boolean`,location:R(),value:!0}}function Gn(){return{type:`boolean`,location:R(),value:!1}}function Kn(){return`'`}function qn(e){return{type:`string`,location:R(),value:e.join(``)}}function Jn(e,t){return{type:`case-expression`,location:R(),format:`simple`,operand:e,clauses:t,else:null,elseLocation:null}}function Yn(e,t,n){return{type:`case-expression`,location:R(),format:`simple`,operand:e,clauses:t,else:n.value,elseLocation:n.location}}function Xn(e){return{type:`case-expression`,location:R(),format:`searched`,clauses:e,else:null,elseLocation:null}}function Zn(e,t){return{type:`case-expression`,location:R(),format:`searched`,clauses:e,else:t.value,elseLocation:t.location}}function Qn(e,t){return{type:`when-clause`,location:R(),operand:e,value:t}}function $n(e,t){return{type:`when-clause`,location:R(),operand:e,value:t}}function er(e){return{type:`else-clause`,location:R(),value:e}}function tr(e){return{type:`number`,location:R(),value:e}}function nr(e,t,n){return parseFloat(e+t+n)}function rr(e,t){return parseFloat(e+t)}function ir(e,t){return parseFloat(e+t)}function ar(e){return parseFloat(e)}function or(e,t){return e[0]+t}function sr(e){return`.`+(e??``)}function cr(e,t){return e+t}function lr(e){return e.join(``)}function ur(e,t){return`e`+(t===null?``:t)}function dr(){return`IN`}function fr(){return`IS`}function pr(){return`LIKE`}function mr(){return`ESCAPE`}function hr(){return`NOT`}function gr(){return`AND`}function _r(){return`OR`}function vr(){return`BETWEEN`}function yr(){return`FROM`}function br(){return`FOR`}function xr(){return`SUBSTRING`}function Sr(){return`EXTRACT`}function Cr(){return`TRIM`}function wr(){return`POSITION`}function Tr(){return`TIMESTAMP`}function Er(){return`DATE`}function Dr(){return`TIME`}function Or(){return`LEADING`}function kr(){return`TRAILING`}function Ar(){return`BOTH`}function jr(){return`CAST`}function Mr(){return`AS`}function Nr(){return`INTEGER`}function Pr(){return`INT`}function Fr(){return`SMALLINT`}function Ir(){return`FLOAT`}function Lr(){return`REAL`}function Rr(){return`VARCHAR`}function zr(){return`TO`}function Br(){return`INTERVAL`}function Vr(){return`YEAR`}function Hr(){return`TIMEZONE_HOUR`}function Ur(){return`TIMEZONE_MINUTE`}function Wr(){return`MONTH`}function Gr(){return`DAY`}function Kr(){return`HOUR`}function qr(){return`MINUTE`}function Jr(){return`SECOND`}function Yr(){return`DOW`}function Xr(){return`DOY`}function Zr(){return`WEEK`}function Qr(){return`CASE`}function $r(){return`END`}function ei(){return`WHEN`}function ti(){return`THEN`}function ni(){return`ELSE`}function ri(e){return e}function ii(e){return e.join(``)}let N=0|t.peg$currPos,P=N,F=[{line:1,column:1}],ai,I=N,oi=t.peg$maxFailExpected||[],L=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw Error(`Can't start parsing from rule "`+t.startRule+`".`);a=i[t.startRule]}function R(){return di(P,N)}function si(e,t){throw fi(e,t=t===void 0?di(P,N):t)}function ci(t=N){let n=e.codePointAt(t);return n===void 0?``:String.fromCodePoint(n)}function z(e,t){return{type:`literal`,text:e,ignoreCase:t}}function B(e,t,n,r){return{type:`class`,parts:e,inverted:t,ignoreCase:n,unicode:r}}function li(){return{type:`end`}}function ui(t){let n,r=F[t];if(r)return r;if(t>=F.length)n=F.length-1;else for(n=t;!F[--n];);for(r=F[n],r={line:r.line,column:r.column};n<t;)e.charCodeAt(n)===10?(r.line++,r.column=1):r.column++,n++;return F[t]=r,r}function di(e,t,n){let i=ui(e),a=ui(t);return{source:r,start:{offset:e,line:i.line,column:i.column},end:{offset:t,line:a.line,column:a.column}}}function V(e){N<I||(N>I&&(I=N,oi=[]),oi.push(e))}function fi(e,t){return new Kt(e,null,null,t)}function pi(e,t,n){return new Kt(Kt.buildMessage(e,t),e,t,n)}function mi(){let e,t;return e=N,Z(),t=H(),t===n?(N=e,e=n):(Z(),P=e,e=ht(t)),e}function hi(){let e,t,r,i,a,o,s,c;if(e=N,t=Y(),t!==n){for(Z(),r=[],i=H();i!==n;)r.push(i),i=N,a=N,o=Z(),s=J(),s===n?(N=a,a=n):(c=Z(),o=[o,s,c],a=o),a===n?i=a:(a=H(),a===n?(N=i,i=n):i=a);i=Z(),a=X(),a===n?(N=e,e=n):(P=e,e=gt(r))}else N=e,e=n;return e}function H(){let e,t,r,i,a,o;if(e=N,t=gi(),t!==n){for(r=[],i=N,Z(),a=La(),a===n?(N=i,i=n):(Z(),o=gi(),o===n?(N=i,i=n):(P=i,i=_t(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=La(),a===n?(N=i,i=n):(Z(),o=gi(),o===n?(N=i,i=n):(P=i,i=_t(t,a,o)));P=e,e=vt(t,r)}else N=e,e=n;return e}function gi(){let e,t,r,i,a,o;if(e=N,t=_i(),t!==n){for(r=[],i=N,Z(),a=Ia(),a===n?(N=i,i=n):(Z(),o=_i(),o===n?(N=i,i=n):(P=i,i=yt(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=Ia(),a===n?(N=i,i=n):(Z(),o=_i(),o===n?(N=i,i=n):(P=i,i=yt(t,a,o)));P=e,e=bt(t,r)}else N=e,e=n;return e}function _i(){let t,r,i,a,o;return t=N,r=Fa(),r===n&&(r=N,e.charCodeAt(N)===33?(i=`!`,N++):(i=n,L===0&&V(re)),i===n?(N=r,r=n):(a=N,L++,e.charCodeAt(N)===61?(o=`=`,N++):(o=n,L===0&&V(h)),L--,o===n?a=void 0:(N=a,a=n),a===n?(N=r,r=n):(i=[i,a],r=i))),r===n?(N=t,t=n):(i=Z(),a=_i(),a===n?(N=t,t=n):(P=t,t=xt(a))),t===n&&(t=vi()),t}function vi(){let e,t,r,i;return e=N,t=U(),t===n?(N=e,e=n):(r=N,Z(),i=yi(),i===n?(N=r,r=n):r=i,r===n&&(r=null),P=e,e=St(t,r)),e}function yi(){let e;return e=bi(),e===n&&(e=Di(),e===n&&(e=Ci(),e===n&&(e=Si(),e===n&&(e=Ei())))),e}function bi(){let e,t,r,i,a;if(e=N,t=[],r=N,Z(),i=xi(),i===n?(N=r,r=n):(Z(),a=U(),a===n?(N=r,r=n):(P=r,r=Ct(i,a))),r!==n)for(;r!==n;)t.push(r),r=N,Z(),i=xi(),i===n?(N=r,r=n):(Z(),a=U(),a===n?(N=r,r=n):(P=r,r=Ct(i,a)));else t=n;return t!==n&&(P=e,t=wt(t)),e=t,e}function xi(){let t;return e.substr(N,2)===`>=`?(t=`>=`,N+=2):(t=n,L===0&&V(ie)),t===n&&(e.charCodeAt(N)===62?(t=`>`,N++):(t=n,L===0&&V(ae)),t===n&&(e.substr(N,2)===`<=`?(t=`<=`,N+=2):(t=n,L===0&&V(oe)),t===n&&(e.substr(N,2)===`<>`?(t=`<>`,N+=2):(t=n,L===0&&V(se)),t===n&&(t=e.charAt(N),o.test(t)?N++:(t=n,L===0&&V(ce)),t===n&&(e.substr(N,2)===`!=`?(t=`!=`,N+=2):(t=n,L===0&&V(le))))))),t}function Si(){let e,t,r,i;return e=N,t=Ma(),t===n?(N=e,e=n):(Z(),r=Fa(),r===n?(N=e,e=n):(Z(),i=U(),i===n?(N=e,e=n):(P=e,e=Tt(t,i)))),e===n&&(e=N,t=Ma(),t===n?(N=e,e=n):(Z(),r=U(),r===n?(N=e,e=n):(P=e,e=Et(t,r)))),e}function Ci(){let e,t,r,i,a,o,s,c;return e=N,t=Fa(),t===n?(N=e,e=n):(Z(),r=Ra(),r===n?(N=e,e=n):(i=Z(),a=N,o=U(),o===n?(N=a,a=n):(Z(),s=Ia(),s===n?(N=a,a=n):(Z(),c=U(),c===n?(N=a,a=n):(P=a,a=Dt(r,o,c)))),a===n?(N=e,e=n):(P=e,e=Ot(r,a)))),e===n&&(e=N,t=Ra(),t===n?(N=e,e=n):(Z(),r=N,i=U(),i===n?(N=r,r=n):(a=Z(),o=Ia(),o===n?(N=r,r=n):(Z(),s=U(),s===n?(N=r,r=n):(P=r,r=kt(t,i,s)))),r===n?(N=e,e=n):(P=e,e=At(t,r)))),e}function wi(){let e,t,r,i,a;return e=N,t=N,r=Fa(),r===n?(N=t,t=n):(i=Z(),a=Na(),a===n?(N=t,t=n):(r=[r,i,a],t=r)),t!==n&&(P=e,t=jt(t)),e=t,e===n&&(e=Na()),e}function Ti(){let e,t,r,i,a;return e=N,t=N,r=Fa(),r===n?(N=t,t=n):(i=Z(),a=ja(),a===n?(N=t,t=n):(r=[r,i,a],t=r)),t!==n&&(P=e,t=Mt(t)),e=t,e===n&&(e=ja()),e}function Ei(){let e,t,r,i,a;return e=N,t=wi(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(Z(),i=Pa(),i===n?(N=e,e=n):(Z(),a=ma(),a===n?(N=e,e=n):(P=e,e=Nt(t,r,a))))),e===n&&(e=N,t=wi(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=Pt(t,r)))),e}function Di(){let e,t,r;return e=N,t=Ti(),t===n?(N=e,e=n):(Z(),r=hi(),r===n?(N=e,e=n):(P=e,e=Ft(t,r))),e===n&&(e=N,t=Ti(),t===n?(N=e,e=n):(Z(),r=Wi(),r===n?(N=e,e=n):(P=e,e=It(t,r)))),e}function U(){let e,t,r,i,a,o;if(e=N,t=ki(),t!==n){for(r=[],i=N,Z(),a=Oi(),a===n?(N=i,i=n):(Z(),o=ki(),o===n?(N=i,i=n):(P=i,i=Lt(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=Oi(),a===n?(N=i,i=n):(Z(),o=ki(),o===n?(N=i,i=n):(P=i,i=Lt(t,a,o)));P=e,e=Rt(t,r)}else N=e,e=n;return e}function Oi(){let t;return t=e.charAt(N),s.test(t)?N++:(t=n,L===0&&V(g)),t===n&&(e.substr(N,2)===`||`?(t=`||`,N+=2):(t=n,L===0&&V(ue))),t}function ki(){let e,t,r,i,a,o;if(e=N,t=ji(),t!==n){for(r=[],i=N,Z(),a=Ai(),a===n?(N=i,i=n):(Z(),o=ji(),o===n?(N=i,i=n):(P=i,i=zt(t,a,o)));i!==n;)r.push(i),i=N,Z(),a=Ai(),a===n?(N=i,i=n):(Z(),o=ji(),o===n?(N=i,i=n):(P=i,i=zt(t,a,o)));P=e,e=Bt(t,r)}else N=e,e=n;return e}function Ai(){let t;return t=e.charAt(N),c.test(t)?N++:(t=n,L===0&&V(de)),t}function ji(){let e,t,r,i;return e=ea(),e===n&&(e=Gi(),e===n&&(e=Ki(),e===n&&(e=Yi(),e===n&&(e=Zi(),e===n&&(e=qi(),e===n&&(e=Qi(),e===n&&(e=ha(),e===n&&(e=Mi(),e===n&&(e=Wi(),e===n&&(e=N,t=Y(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(Z(),i=X(),i===n?(N=e,e=n):(P=e,e=Vt(r)))))))))))))),e}function Mi(){let e,t;return e=N,t=Ni(),t!==n&&(P=e,t=Ht(t)),e=t,e===n&&(e=N,t=Ri(),t!==n&&(P=e,t=Ut(t)),e=t),e}function Ni(){let e,t;return e=N,t=Pi(),t!==n&&(P=e,t=Wt(t)),e=t,e}function Pi(){let e,t,r,i;if(e=N,t=Ii(),t!==n){for(r=[],i=Li();i!==n;)r.push(i),i=Li();P=e,e=Gt(t,r)}else N=e,e=n;return e}function Fi(){let e,t,r,i;if(e=N,t=Ii(),t!==n){for(r=[],i=W();i!==n;)r.push(i),i=W();P=e,e=qt(t,r)}else N=e,e=n;return e}function Ii(){let t;return t=e.charAt(N),l.test(t)?N++:(t=n,L===0&&V(fe)),t}function W(){let t;return t=e.charAt(N),u.test(t)?N++:(t=n,L===0&&V(pe)),t}function Li(){let t;return t=e.charAt(N),d.test(t)?N++:(t=n,L===0&&V(me)),t}function Ri(){let e,t,r,i;return e=N,t=Ui(),t===n?(N=e,e=n):(r=zi(),i=Ui(),i===n?(N=e,e=n):(P=e,e=Jt(r))),e}function zi(){let e,t,r;for(e=N,t=[],r=Bi();r!==n;)t.push(r),r=Bi();return P=e,t=D(t),e=t,e}function Bi(){let e;return e=Hi(),e===n&&(e=Vi()),e}function Vi(){let e,t,r;return e=N,t=Ui(),t===n?(N=e,e=n):(r=Ui(),r===n?(N=e,e=n):(P=e,e=Yt())),e}function Hi(){let t;return t=e.charAt(N),d.test(t)?N++:(t=n,L===0&&V(me)),t}function Ui(){let t;return t=e.charAt(N),ee.test(t)?N++:(t=n,L===0&&V(_)),t}function Wi(){let t,r,i,a;return t=N,r=N,e.charCodeAt(N)===64?(i=`@`,N++):(i=n,L===0&&V(he)),i===n?(N=r,r=n):(a=Fi(),a===n?(N=r,r=n):(i=[i,a],r=i)),r!==n&&(P=t,r=Xt(r)),t=r,t}function Gi(){let e,t,r,i,a,o,s,c;return e=N,t=Ha(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=$i(),a===n?(N=r,r=n):(Z(),o=za(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=O(a,s)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=$i(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=k(a,s))))))),r===n?(N=e,e=n):(P=e,e=Zt(r))),e}function Ki(){let e,t,r,i,a,o,s,c,l,u,d;return e=N,t=Va(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=za(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=N,l=Ba(),l===n?(N=c,c=n):(u=Z(),d=H(),d===n?(N=c,c=n):(Z(),c=d)),c===n&&(c=null),l=X(),l===n?(N=r,r=n):(P=r,r=Qt(a,s,c)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=J(),c===n?(N=r,r=n):(l=Z(),u=H(),u===n?(N=r,r=n):(d=X(),d===n?(N=r,r=n):(P=r,r=$t(a,s,u))))))))),r===n?(N=e,e=n):(P=e,e=en(r))),e}function qi(){let e,t,r,i,a,o,s,c;return e=N,t=Za(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=Qa(),o===n?(N=r,r=n):(Z(),s=Ji(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=tn(a,s)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=Ji(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=nn(a,s))))))),r===n?(N=e,e=n):(P=e,e=rn(r))),e}function Ji(){let e,t,r,i,a;return e=N,t=$a(),t===n&&(t=eo()),t!==n&&(P=e,t=A()),e=t,e===n&&(e=N,t=to(),t!==n&&(P=e,t=an()),e=t,e===n&&(e=N,t=no(),t!==n&&(P=e,t=on()),e=t,e===n&&(e=N,t=ro(),t!==n&&(P=e,t=sn()),e=t,e===n&&(e=N,t=Ka(),t!==n&&(P=e,t=cn()),e=t,e===n&&(e=N,t=Ga(),t!==n&&(P=e,t=ln()),e=t,e===n&&(e=N,t=qa(),t!==n&&(P=e,t=j()),e=t,e===n&&(e=N,t=io(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=K(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=un(i)))))))))))),e}function Yi(){let e,t,r,i,a,o,s,c,l;return e=N,t=Ua(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=Xi(),Z(),o=H(),o===n?(N=r,r=n):(Z(),s=za(),s===n?(N=r,r=n):(Z(),c=H(),c===n?(N=r,r=n):(Z(),l=X(),l===n?(N=r,r=n):(P=r,r=dn(a,o,c)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=Xi(),Z(),o=H(),o===n?(N=r,r=n):(Z(),s=X(),s===n?(N=r,r=n):(P=r,r=fn(a,o))))),r===n?(N=e,e=n):(P=e,e=pn(r))),e}function Xi(){let e,t;return e=N,t=Ja(),t===n&&(t=Ya(),t===n&&(t=Xa())),t===n&&(t=null),P=e,t=mn(t),e=t,e}function Zi(){let e,t,r,i,a,o,s,c;return e=N,t=Wa(),t===n?(N=e,e=n):(Z(),r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=ja(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=hn(a,s)))))),r===n&&(r=N,i=Y(),i===n?(N=r,r=n):(Z(),a=H(),a===n?(N=r,r=n):(Z(),o=J(),o===n?(N=r,r=n):(Z(),s=H(),s===n?(N=r,r=n):(Z(),c=X(),c===n?(N=r,r=n):(P=r,r=gn(a,s))))))),r===n?(N=e,e=n):(P=e,e=_n(r))),e}function Qi(){let e,t,r,i;return e=N,t=N,L++,r=Ha(),L--,r===n?t=void 0:(N=t,t=n),t===n?(N=e,e=n):(r=wo(),r===n?(N=e,e=n):(Z(),i=hi(),i===n?(N=e,e=n):(P=e,e=vn(r,i)))),e}function $i(){let e,t;return e=N,t=so(),t===n&&(t=uo(),t===n&&(t=fo(),t===n&&(t=po(),t===n&&(t=mo(),t===n&&(t=q(),t===n&&(t=co(),t===n&&(t=lo(),t===n&&(t=ho(),t===n&&(t=go(),t===n&&(t=_o())))))))))),t!==n&&(P=e,t=yn(t)),e=t,e}function ea(){let e;return e=ma(),e===n&&(e=xa(),e===n&&(e=pa(),e===n&&(e=fa(),e===n&&(e=da(),e===n&&(e=ta(),e===n&&(e=ra(),e===n&&(e=na()))))))),e}function ta(){let e,t,r;return e=N,t=Ga(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=bn(r))),e}function na(){let e,t,r;return e=N,t=qa(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=M(r))),e}function ra(){let t,r,i,a,o;return t=N,r=oo(),r===n?(N=t,t=n):(Z(),i=e.charAt(N),s.test(i)?N++:(i=n,L===0&&V(g)),i===n?(N=t,t=n):(Z(),a=G(),a===n?(N=t,t=n):(Z(),o=ia(),o===n?(N=t,t=n):(P=t,t=xn(i,a,o))))),t===n&&(t=N,r=oo(),r===n?(N=t,t=n):(Z(),i=G(),i===n?(N=t,t=n):(Z(),a=ia(),a===n?(N=t,t=n):(P=t,t=Sn(i,a))))),t}function ia(){let e,t,r,i;return e=N,t=aa(),t===n?(N=e,e=n):(Z(),r=ao(),r===n?(N=e,e=n):(Z(),i=oa(),i===n?(N=e,e=n):(P=e,e=Cn(t,i)))),e===n&&(e=sa()),e}function aa(){let e,t,r,i,a;return e=N,t=ca(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=wn(t,i))))),e===n&&(e=N,t=ca(),t!==n&&(P=e,t=Tn(t)),e=t),e}function oa(){let e,t,r,i,a,o,s;return e=N,t=ca(),t!==n&&(P=e,t=En(t)),e=t,e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=J(),a===n?(N=e,e=n):(Z(),o=la(),o===n?(N=e,e=n):(Z(),s=X(),s===n?(N=e,e=n):(P=e,e=Dn(i,o))))))),e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=On(i))))),e===n&&(e=N,t=q(),t!==n&&(P=e,t=kn()),e=t))),e}function sa(){let e,t,r,i,a,o,s;return e=N,t=ca(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=la(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=An(t,i))))),e===n&&(e=N,t=ca(),t!==n&&(P=e,t=jn(t)),e=t,e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=ua(),i===n?(N=e,e=n):(Z(),a=J(),a===n?(N=e,e=n):(Z(),o=la(),o===n?(N=e,e=n):(Z(),s=X(),s===n?(N=e,e=n):(P=e,e=Mn(i,o))))))),e===n&&(e=N,t=q(),t===n?(N=e,e=n):(Z(),r=Y(),r===n?(N=e,e=n):(Z(),i=la(),i===n?(N=e,e=n):(Z(),a=X(),a===n?(N=e,e=n):(P=e,e=Nn(i))))),e===n&&(e=N,t=q(),t!==n&&(P=e,t=Pn()),e=t)))),e}function ca(){let e,t;return e=N,t=fo(),t!==n&&(P=e,t=Fn()),e=t,e===n&&(e=N,t=po(),t!==n&&(P=e,t=In()),e=t,e===n&&(e=N,t=mo(),t!==n&&(P=e,t=Ln()),e=t,e===n&&(e=N,t=uo(),t!==n&&(P=e,t=Rn()),e=t,e===n&&(e=N,t=so(),t!==n&&(P=e,t=zn()),e=t)))),e}function la(){let e,t;return e=N,t=K(),t!==n&&(P=e,t=Bn(t)),e=t,e}function ua(){let e,t;return e=N,t=K(),t!==n&&(P=e,t=Vn(t)),e=t,e}function da(){let e,t,r;return e=N,t=Ka(),t===n?(N=e,e=n):(Z(),r=G(),r===n?(N=e,e=n):(P=e,e=Hn(r))),e}function fa(){let e,t;return e=N,t=Oa(),t!==n&&(P=e,t=Un()),e=t,e}function pa(){let e,t;return e=N,t=ka(),t!==n&&(P=e,t=Wn()),e=t,e===n&&(e=N,t=Aa(),t!==n&&(P=e,t=Gn()),e=t),e}function G(){let e;return e=ma(),e===n&&(e=Wi()),e}function ma(){let t,r,i,a,o;if(t=N,e.charCodeAt(N)===39?(r=`'`,N++):(r=n,L===0&&V(ge)),r===n&&(e.substr(N,2)===`N'`?(r=`N'`,N+=2):(r=n,L===0&&V(_e))),r!==n){for(i=[],a=N,e.substr(N,2)===`''`?(o=`''`,N+=2):(o=n,L===0&&V(ve)),o!==n&&(P=a,o=Kn()),a=o,a===n&&(a=e.charAt(N),f.test(a)?N++:(a=n,L===0&&V(ye)));a!==n;)i.push(a),a=N,e.substr(N,2)===`''`?(o=`''`,N+=2):(o=n,L===0&&V(ve)),o!==n&&(P=a,o=Kn()),a=o,a===n&&(a=e.charAt(N),f.test(a)?N++:(a=n,L===0&&V(ye)));e.charCodeAt(N)===39?(a=`'`,N++):(a=n,L===0&&V(ge)),a===n?(N=t,t=n):(P=t,t=qn(i))}else N=t,t=n;return t}function ha(){let e;return e=ga(),e===n&&(e=_a()),e}function ga(){let e,t,r,i,a,o,s;if(e=N,t=vo(),t!==n)if(Z(),r=H(),r!==n){for(Z(),i=[],a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a!==n;)i.push(a),a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a=yo(),a===n?(N=e,e=n):(P=e,e=Jn(r,i))}else N=e,e=n;else N=e,e=n;if(e===n)if(e=N,t=vo(),t!==n)if(Z(),r=H(),r!==n){for(Z(),i=[],a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a!==n;)i.push(a),a=N,o=ya(),o===n?(N=a,a=n):(s=Z(),a=o);a=ba(),a===n?(N=e,e=n):(o=Z(),s=yo(),s===n?(N=e,e=n):(P=e,e=Yn(r,i,a)))}else N=e,e=n;else N=e,e=n;return e}function _a(){let e,t,r,i,a,o;if(e=N,t=vo(),t!==n){for(Z(),r=[],i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i!==n;)r.push(i),i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i=yo(),i===n?(N=e,e=n):(P=e,e=Xn(r))}else N=e,e=n;if(e===n)if(e=N,t=vo(),t!==n){for(Z(),r=[],i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i!==n;)r.push(i),i=N,a=va(),a===n?(N=i,i=n):(o=Z(),i=a);i=ba(),i===n?(N=e,e=n):(a=Z(),o=yo(),o===n?(N=e,e=n):(P=e,e=Zn(r,i)))}else N=e,e=n;return e}function va(){let e,t,r,i,a;return e=N,t=bo(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(Z(),i=xo(),i===n?(N=e,e=n):(Z(),a=H(),a===n?(N=e,e=n):(P=e,e=Qn(r,a))))),e}function ya(){let e,t,r,i,a;return e=N,t=bo(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(Z(),i=xo(),i===n?(N=e,e=n):(Z(),a=H(),a===n?(N=e,e=n):(P=e,e=$n(r,a))))),e}function ba(){let e,t,r;return e=N,t=So(),t===n?(N=e,e=n):(Z(),r=H(),r===n?(N=e,e=n):(P=e,e=er(r))),e}function xa(){let e,t,r,i;return e=N,t=Sa(),t===n?(N=e,e=n):(r=N,L++,i=Ii(),L--,i===n?r=void 0:(N=r,r=n),r===n?(N=e,e=n):(P=e,e=tr(t))),e}function Sa(){let e,t,r,i;return e=N,t=Ca(),t===n?(N=e,e=n):(r=wa(),r===n?(N=e,e=n):(i=Ta(),i===n?(N=e,e=n):(P=e,e=nr(t,r,i)))),e===n&&(e=N,t=Ca(),t===n?(N=e,e=n):(r=wa(),r===n?(N=e,e=n):(P=e,e=rr(t,r))),e===n&&(e=N,t=Ca(),t===n?(N=e,e=n):(r=Ta(),r===n?(N=e,e=n):(P=e,e=ir(t,r))),e===n&&(e=N,t=Ca(),t!==n&&(P=e,t=ar(t)),e=t))),e}function Ca(){let t,r,i;return t=K(),t===n&&(t=N,r=e.charAt(N),s.test(r)?N++:(r=n,L===0&&V(g)),r===n?(N=t,t=n):(i=K(),i===n?(N=t,t=n):(P=t,t=or(r,i)))),t}function wa(){let t,r,i;return t=N,e.charCodeAt(N)===46?(r=`.`,N++):(r=n,L===0&&V(be)),r===n?(N=t,t=n):(i=K(),i===n&&(i=null),P=t,t=sr(i)),t}function Ta(){let e,t,r;return e=N,t=Da(),t===n?(N=e,e=n):(r=K(),r===n?(N=e,e=n):(P=e,e=cr(t,r))),e}function K(){let e,t,r;if(e=N,t=[],r=Ea(),r!==n)for(;r!==n;)t.push(r),r=Ea();else t=n;return t!==n&&(P=e,t=lr(t)),e=t,e}function Ea(){let t;return t=e.charAt(N),p.test(t)?N++:(t=n,L===0&&V(xe)),t}function Da(){let t,r,i;return t=N,r=e.charAt(N),te.test(r)?N++:(r=n,L===0&&V(Se)),r===n?(N=t,t=n):(i=e.charAt(N),s.test(i)?N++:(i=n,L===0&&V(g)),i===n&&(i=null),P=t,t=ur(r,i)),t}function Oa(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`null`?N+=4:(r=n,L===0&&V(Ce)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(r=[r,i],t=r)),t}function ka(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`true`?N+=4:(r=n,L===0&&V(v)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(r=[r,i],t=r)),t}function Aa(){let t,r,i,a;return t=N,r=e.substr(N,5),r.toLowerCase()===`false`?N+=5:(r=n,L===0&&V(y)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(r=[r,i],t=r)),t}function ja(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`in`?N+=2:(r=n,L===0&&V(b)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=dr())),t}function Ma(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`is`?N+=2:(r=n,L===0&&V(x)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=fr())),t}function Na(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`like`?N+=4:(r=n,L===0&&V(S)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=pr())),t}function Pa(){let t,r,i,a;return t=N,r=e.substr(N,6),r.toLowerCase()===`escape`?N+=6:(r=n,L===0&&V(we)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=mr())),t}function Fa(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`not`?N+=3:(r=n,L===0&&V(C)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=hr())),t}function Ia(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`and`?N+=3:(r=n,L===0&&V(Te)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=gr())),t}function La(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`or`?N+=2:(r=n,L===0&&V(Ee)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=_r())),t}function Ra(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`between`?N+=7:(r=n,L===0&&V(De)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=vr())),t}function za(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`from`?N+=4:(r=n,L===0&&V(Oe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=yr())),t}function Ba(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`for`?N+=3:(r=n,L===0&&V(ke)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=br())),t}function Va(){let t,r,i,a;return t=N,r=e.substr(N,9),r.toLowerCase()===`substring`?N+=9:(r=n,L===0&&V(Ae)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=xr())),t}function Ha(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`extract`?N+=7:(r=n,L===0&&V(je)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Sr())),t}function Ua(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`trim`?N+=4:(r=n,L===0&&V(Me)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Cr())),t}function Wa(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`position`?N+=8:(r=n,L===0&&V(w)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=wr())),t}function Ga(){let t,r,i,a;return t=N,r=e.substr(N,9),r.toLowerCase()===`timestamp`?N+=9:(r=n,L===0&&V(T)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Tr())),t}function Ka(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`date`?N+=4:(r=n,L===0&&V(E)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Er())),t}function qa(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`time`?N+=4:(r=n,L===0&&V(Ne)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Dr())),t}function Ja(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`leading`?N+=7:(r=n,L===0&&V(Pe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Or())),t}function Ya(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`trailing`?N+=8:(r=n,L===0&&V(Fe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=kr())),t}function Xa(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`both`?N+=4:(r=n,L===0&&V(Ie)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Ar())),t}function Za(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`cast`?N+=4:(r=n,L===0&&V(Le)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=jr())),t}function Qa(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`as`?N+=2:(r=n,L===0&&V(Re)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Mr())),t}function $a(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`integer`?N+=7:(r=n,L===0&&V(ze)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Nr())),t}function eo(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`int`?N+=3:(r=n,L===0&&V(Be)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Pr())),t}function to(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`smallint`?N+=8:(r=n,L===0&&V(Ve)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Fr())),t}function no(){let t,r,i,a;return t=N,r=e.substr(N,5),r.toLowerCase()===`float`?N+=5:(r=n,L===0&&V(He)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Ir())),t}function ro(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`real`?N+=4:(r=n,L===0&&V(Ue)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Lr())),t}function io(){let t,r,i,a;return t=N,r=e.substr(N,7),r.toLowerCase()===`varchar`?N+=7:(r=n,L===0&&V(We)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Rr())),t}function ao(){let t,r,i,a;return t=N,r=e.substr(N,2),r.toLowerCase()===`to`?N+=2:(r=n,L===0&&V(Ge)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=zr())),t}function oo(){let t,r,i,a;return t=N,r=e.substr(N,8),r.toLowerCase()===`interval`?N+=8:(r=n,L===0&&V(Ke)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Br())),t}function so(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`year`?N+=4:(r=n,L===0&&V(qe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Vr())),t}function co(){let t,r,i,a;return t=N,r=e.substr(N,13),r.toLowerCase()===`timezone_hour`?N+=13:(r=n,L===0&&V(Je)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Hr())),t}function lo(){let t,r,i,a;return t=N,r=e.substr(N,15),r.toLowerCase()===`timezone_minute`?N+=15:(r=n,L===0&&V(Ye)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Ur())),t}function uo(){let t,r,i,a;return t=N,r=e.substr(N,5),r.toLowerCase()===`month`?N+=5:(r=n,L===0&&V(Xe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Wr())),t}function fo(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`day`?N+=3:(r=n,L===0&&V(Ze)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Gr())),t}function po(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`hour`?N+=4:(r=n,L===0&&V(Qe)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Kr())),t}function mo(){let t,r,i,a;return t=N,r=e.substr(N,6),r.toLowerCase()===`minute`?N+=6:(r=n,L===0&&V($e)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=qr())),t}function q(){let t,r,i,a;return t=N,r=e.substr(N,6),r.toLowerCase()===`second`?N+=6:(r=n,L===0&&V(et)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Jr())),t}function ho(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`dow`?N+=3:(r=n,L===0&&V(tt)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Yr())),t}function go(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`doy`?N+=3:(r=n,L===0&&V(nt)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Xr())),t}function _o(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`week`?N+=4:(r=n,L===0&&V(rt)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Zr())),t}function vo(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`case`?N+=4:(r=n,L===0&&V(it)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=Qr())),t}function yo(){let t,r,i,a;return t=N,r=e.substr(N,3),r.toLowerCase()===`end`?N+=3:(r=n,L===0&&V(at)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=$r())),t}function bo(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`when`?N+=4:(r=n,L===0&&V(ot)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=ei())),t}function xo(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`then`?N+=4:(r=n,L===0&&V(st)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=ti())),t}function So(){let t,r,i,a;return t=N,r=e.substr(N,4),r.toLowerCase()===`else`?N+=4:(r=n,L===0&&V(ct)),r===n?(N=t,t=n):(i=N,L++,a=W(),L--,a===n?i=void 0:(N=i,i=n),i===n?(N=t,t=n):(P=t,t=ni())),t}function J(){let t;return e.charCodeAt(N)===44?(t=`,`,N++):(t=n,L===0&&V(lt)),t}function Y(){let t;return e.charCodeAt(N)===40?(t=`(`,N++):(t=n,L===0&&V(ut)),t}function X(){let t;return e.charCodeAt(N)===41?(t=`)`,N++):(t=n,L===0&&V(dt)),t}function Z(){let e,t;for(e=[],t=Co();t!==n;)e.push(t),t=Co();return e}function Co(){let t;return t=e.charAt(N),ne.test(t)?N++:(t=n,L===0&&V(ft)),t}function wo(){let t,r,i,a;if(t=N,r=Fi(),r!==n&&(P=t,r=ri(r)),t=r,t===n)if(t=N,e.charCodeAt(N)===96?(r="`",N++):(r=n,L===0&&V(pt)),r!==n){if(i=[],a=e.charAt(N),m.test(a)?N++:(a=n,L===0&&V(mt)),a!==n)for(;a!==n;)i.push(a),a=e.charAt(N),m.test(a)?N++:(a=n,L===0&&V(mt));else i=n;i===n?(N=t,t=n):(e.charCodeAt(N)===96?(a="`",N++):(a=n,L===0&&V(pt)),a===n?(N=t,t=n):(P=t,t=ii(i)))}else N=t,t=n;return t}function To(e,t,n){return{type:`unary-expression`,location:n,operator:e,expr:t}}function Eo(e,t,n,r,i){let a={type:`binary-expression`,location:i,operator:e,left:t,right:n};return r!==void 0&&(a.escape=r),a}function Q(e,...t){return{type:`expression-list`,location:e,value:t}}function $(e,t){let n=e;for(let{op:e,expr:r,location:{end:i}}of t)n=Eo(e,n,r,void 0,{...n.location,end:i});return n}function Do(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&si(`Timestamp literal is invalid`)}function Oo(e){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)&&si(`Time literal is invalid`)}function ko(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&si(`Date literal is invalid`)}ai=a();let Ao=ai!==n&&N===e.length;function jo(){throw ai!==n&&N<e.length&&V(li()),pi(oi,I<e.length?ci(I):null,I<e.length?di(I,I+1):di(I,I))}return t.peg$library?{peg$result:ai,peg$currPos:N,peg$FAILED:n,peg$maxFailExpected:oi,peg$maxFailPos:I,peg$success:Ao,peg$throw:Ao?void 0:jo}:Ao?ai:void jo()}var Jt=class{static parse(e){return qt(e)}};function D(e,t){if(e!=null)switch(t(e),e.type){case`when-clause`:D(e.operand,t),D(e.value,t);break;case`case-expression`:for(let n of e.clauses)D(n,t);e.format===`simple`&&D(e.operand,t),e.else!==null&&D(e.else,t);break;case`expression-list`:for(let n of e.value)D(n,t);break;case`unary-expression`:D(e.expr,t);break;case`binary-expression`:D(e.left,t),D(e.right,t);break;case`function`:D(e.args,t);break;case`interval`:D(e.value,t),D(e.qualifier,t);break;case`interval-qualifier`:D(e.start,t),D(e.end,t)}}var Yt=new Set([`current_timestamp`,`current_date`,`current_time`]),Xt=class{constructor(e){this.staticData=e}makeBool(e){return cn(e)}featureValue(e,t,n,r){return bn(e,t,n,r)}equalsNull(e){return e===null}applyLike(e,t,n){return vn(e,t,n)}ensureArray(e){return ln(e)}applyIn(e,t){return fn(e,t)}currentTimestamp(e){return pn(e)}currentDate(e){return mn(e)}currentTime(e){return hn(e)}makeSqlInterval(e,t,n){return _.createFromValueAndQualifier(e,t,n)}convertInterval(e){return _.isInterval(e)?e.valueInMilliseconds():e}compare(e,t,n){return T(t,n,e)}calculate(e,t,n,r){return Xe(e,t,n,r)}evaluateTime(e){return we(e)}evaluateTimestamp(e,t,n){return C(e,t,n)}evaluateDate(e,t){return Te(e,t)}evaluateFunction(e,t,n){return He(e,t,n)}lookup(e,t){let n=t[e];return n===void 0?null:n}between(e,t){return e==null||t[0]==null||t[1]==null?null:T(e,t[0],`>=`)&&T(e,t[1],`<=`)}notbetween(e,t){return e==null||t[0]==null||t[1]==null?null:T(e,t[0],`<`)||T(e,t[1],`>`)}ternaryNot(e){return j(e)}ternaryAnd(e,t){return un(e,t)}ternaryOr(e,t){return dn(e,t)}};function O(e,...t){return`this.${e}(${t.join(`, `)})`}function k(e){return e===void 0?`void 0`:JSON.stringify(e)}function Zt({type:e,start:t,end:n}){return`{type: ${k(e)}, start: ${Qt(t)}, end: ${Qt(n)}}`}function Qt({type:e,period:t,precision:n,secondary:r}){return JSON.stringify({type:e,period:t,precision:n,secondary:r})}function $t({type:e,size:t,withtimezone:n}){return JSON.stringify({type:e,size:t,withtimezone:n})}var en=`feature`,tn=`lookups`,nn=`attributeAdapter`,rn=`fieldsIndex`,A=`timeZone`,an=`currentUser`,on=class{constructor(e){this._parseTree=e,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){let e=this._compileNode(this._parseTree),t=`\n      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(`, `)};`:``}\n      return this.convertInterval(${e});\n    `;return Function(en,tn,nn,rn,A,an,t).bind(new Xt(this._staticData))}_storeStaticData(e){let t=`static$`+ this._nextStaticDataId++;return this._staticData[t]=e,t}_compileRefStaticData(e){return`this.staticData[${k(e)}]`}_generateTempVar(){let e=`temp$`+ this._nextTempVarId++;return this._tempVars.add(e),e}_compileSimpleCase(e){let t=this._compileNode(e.operand),n=this._generateTempVar(),r=[];for(let t of e.clauses){let e=O(`compare`,k(`=`),n,this._compileNode(t.operand)),i=this._compileNode(t.value);r.push(`${e} ? (${i}) :`)}return e.else==null?r.push(k(null)):r.push(this._compileNode(e.else)),`(${n} = ${t}, ${r.join(` `)})`}_compileSearchedCase(e){let t=[];for(let n of e.clauses){let e=O(`makeBool`,this._compileNode(n.operand)),r=this._compileNode(n.value);t.push(`${e} ? (${r}) :`)}return e.else==null?t.push(k(null)):t.push(this._compileNode(e.else)),t.join(` `)}_compileInExpr(e,t){let n=new Set,r=[];for(let e of t.value)e.type===`number`||e.type===`string`?n.add(e.value):r.push(e);let i=this._compileNode(e),a=O(`ensureArray`,this._compileNode({type:`expression-list`,location:t.location,value:r}));if(n.size>0){let e=this._compileRefStaticData(this._storeStaticData(n)),t=this._generateTempVar();return r.length>0?`(${t} = ${i}, ${e}.has(${t}) || ${O(`applyIn`,t,a)})`:`(${t} = ${i}, ${t} == null ? null : ${e}.has(${t}))`}return O(`applyIn`,i,a)}_compileNode(e){switch(e.type){case`interval`:return O(`makeSqlInterval`,this._compileNode(e.value),e.qualifier.type===`interval-qualifier`?Zt(e.qualifier):Qt(e.qualifier),k(e.op));case`case-expression`:return e.format===`simple`?this._compileSimpleCase(e):this._compileSearchedCase(e);case`parameter`:return O(`lookup`,k(e.value.toLowerCase()),tn);case`expression-list`:return`[${e.value.map(e=>this._compileNode(e)).join(`, `)}]`;case`unary-expression`:return O(`ternaryNot`,this._compileNode(e.expr));case`binary-expression`:switch(e.operator){case`AND`:return O(`ternaryAnd`,this._compileNode(e.left),this._compileNode(e.right));case`OR`:return O(`ternaryOr`,this._compileNode(e.left),this._compileNode(e.right));case`IS`:if(e.right.type!==`null`)throw new h(`UnsupportedIsRhs`);return O(`equalsNull`,this._compileNode(e.left));case`ISNOT`:if(e.right.type!==`null`)throw new h(`UnsupportedIsRhs`);return`!${O(`equalsNull`,this._compileNode(e.left))}`;case`IN`:return this._compileInExpr(e.left,e.right);case`NOT IN`:return O(`ternaryNot`,this._compileInExpr(e.left,e.right));case`BETWEEN`:return O(`between`,this._compileNode(e.left),this._compileNode(e.right));case`NOTBETWEEN`:return O(`notbetween`,this._compileNode(e.left),this._compileNode(e.right));case`LIKE`:return O(`applyLike`,this._compileNode(e.left),this._compileNode(e.right),k(e.escape));case`NOT LIKE`:return O(`ternaryNot`,O(`applyLike`,this._compileNode(e.left),this._compileNode(e.right),k(e.escape)));case`<>`:case`<`:case`>`:case`>=`:case`<=`:case`=`:return O(`compare`,k(e.operator),this._compileNode(e.left),this._compileNode(e.right));case`*`:case`-`:case`+`:case`/`:case`||`:return O(`calculate`,k(e.operator),this._compileNode(e.left),this._compileNode(e.right),A);default:throw new h(`UnsupportedOperator`,{operator:e.operator})}case`null`:case`boolean`:case`string`:case`number`:return k(e.value);case`time`:try{return this._compileRefStaticData(this._storeStaticData(we(e.value)))}catch{return O(`evaluateTime`,k(e.value))}case`date`:try{return this._compileRefStaticData(this._storeStaticData(Te(e.value,`unknown`)))}catch{return O(`evaluateDate`,k(e.value),k(`unknown`))}case`timestamp`:try{return this._compileRefStaticData(this._storeStaticData(C(e.value,`unknown`)))}catch{return O(`evaluateTimestamp`,k(e.value),k(`unknown`))}case`current-time`:return e.mode===`date`?O(`currentDate`,A):e.mode===`time`?O(`currentTime`,A):O(`currentTimestamp`,A);case`current-user`:return an;case`column-reference`:return O(`featureValue`,en,k(e.column),rn,nn);case`data-type`:return $t(e.value);case`function`:return O(`evaluateFunction`,k(e.name),this._compileNode(e.args),A)}throw new h(`UnsupportedSyntax`,{node:e.type})}},sn=class e{static create(t,n={}){return new e(t,n.fieldsIndex,n.timeZone??void 0,n.currentUser)}constructor(e,t,n=`UTC`,r=null){this.fieldsIndex=t,this.timeZone=n,this.currentUser=r,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=Jt.parse(e);let{isStandardized:i,isAggregate:a,currentUserRequired:o,referencedFieldNames:s}=this._extractExpressionInfo(t);this._referencedFieldNames=s,this.isStandardized=i,this.isAggregate=a,this.currentUserRequired=o}static convertValueToStorageFormat(e,t=null){if(t===null)return s(e)?e.getTime():y(e)?e.toMillis():S(e)?e.toStorageFormat():x(e)?e.toStorageString():b(e)?e.toStorageFormat():e;switch(t){case`date`:return s(e)?e.getTime():y(e)?e.toMillis():S(e)?e.toMilliseconds():b(e)?e.toNumber():e;case`date-only`:return s(e)?l.fromDateJS(e).toString():S(e)?l.fromSqlTimeStampOffset(e).toString():y(e)?l.fromDateTime(e).toString():e;case`time-only`:return s(e)?p.fromDateJS(e).toStorageString():y(e)?p.fromDateTime(e).toStorageString():S(e)?p.fromSqlTimeStampOffset(e).toStorageString():x(e)?e.toStorageString():e;case`timestamp-offset`:if(s(e))return m.fromJSDate(e).toStorageFormat();if(y(e))return m.fromDateTime(e).toStorageFormat();if(S(e))return e.toStorageFormat()}return e}get fieldNames(){return this._referencedFieldNames}testSet(e,t=M,n=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,n)}calculateValue(e,t=M,n=this.currentUser){let r=this._evaluateNode(this.parseTree,e,t,null,n);return _.isInterval(r)?r.valueInMilliseconds()/864e5:r}tryGetCompiledExecutor(){return this._compiledExecutor==null?f(`esri-csp-restrictions`)?null:(this._compiledExecutor=new on(this.parseTree).compile(),this._compiledExecutor):this._compiledExecutor}calculateValueCompiled(e,t=M,n=this.currentUser){let r=this.tryGetCompiledExecutor();return r==null?this.calculateValue(e,t):r(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null)}testFeature(e,t=M,n=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,n)}testFeatureCompiled(e,t=M,n=this.currentUser){let r=this.tryGetCompiledExecutor();return r==null?this.testFeature(e,t):!!r(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null)}get hasDateFunctions(){return this._hasDateFunctions??(this._hasDateFunctions=!1,D(this.parseTree,e=>{e.type===`current-time`?this._hasDateFunctions=!0:e.type===`function`&&(this._hasDateFunctions=this._hasDateFunctions||Yt.has(e.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){let e=new Set;return D(this.parseTree,t=>{t.type===`function`&&e.add(t.name.toLowerCase())}),Array.from(e)}getExpressions(){let e=new Map;return D(this.parseTree,t=>{if(t.type===`function`){let n=t.name.toLowerCase(),r=t.args.value[0];if(r.type===`column-reference`){let t=r.column,i=`${n}-${t}`;e.has(i)||e.set(i,{aggregateType:n,field:t})}}}),[...e.values()]}getVariables(){let e=new Set;return D(this.parseTree,t=>{t.type===`parameter`&&e.add(t.value.toLowerCase())}),Array.from(e)}_extractExpressionInfo(e){let t=[],n=new Set,r=!0,i=!1,a=!1;return D(this.parseTree,o=>{switch(o.type){case`column-reference`:{let r=e?.get(o.column),i,a;r?i=a=r.name??``:(a=o.column,i=a.toLowerCase()),n.has(i)||(n.add(i),t.push(a)),o.column=a;break}case`current-user`:a=!0;break;case`function`:{let{name:e,args:t}=o,n=t.value.length;r&&=Ue(e,n),!1===i&&(i=ae(e,n));break}}}),{referencedFieldNames:Array.from(t),isStandardized:r,isAggregate:i,currentUserRequired:a}}_evaluateNode(e,n,r,i,a){let o;switch(e.type){case`interval`:{let t=this._evaluateNode(e.value,n,r,i,a);return _.createFromValueAndQualifier(t,e.qualifier,e.op)}case`case-expression`:if(e.format===`simple`){let t=this._evaluateNode(e.operand,n,r,i,a);for(let o=0;o<e.clauses.length;o++)if(T(t,this._evaluateNode(e.clauses[o].operand,n,r,i,a),`=`))return this._evaluateNode(e.clauses[o].value,n,r,i,a);if(e.else!==null)return this._evaluateNode(e.else,n,r,i,a)}else{for(let t=0;t<e.clauses.length;t++)if(cn(this._evaluateNode(e.clauses[t].operand,n,r,i,a)))return this._evaluateNode(e.clauses[t].value,n,r,i,a);if(e.else!==null)return this._evaluateNode(e.else,n,r,i,a)}return null;case`parameter`:return o=this.parameters[e.value.toLowerCase()],s(o)?t.fromJSDate(o):typeof o==`object`&&o&&`toDateTime`in o?o.toDateTime():o;case`expression-list`:{let t=[];for(let o of e.value)t.push(this._evaluateNode(o,n,r,i,a));return t}case`unary-expression`:return j(this._evaluateNode(e.expr,n,r,i,a));case`binary-expression`:switch(e.operator){case`AND`:return un(this._evaluateNode(e.left,n,r,i,a),this._evaluateNode(e.right,n,r,i,a));case`OR`:return dn(this._evaluateNode(e.left,n,r,i,a),this._evaluateNode(e.right,n,r,i,a));case`IS`:if(e.right.type!==`null`)throw new h(`UnsupportedIsRhs`);return this._evaluateNode(e.left,n,r,i,a)===null;case`ISNOT`:if(e.right.type!==`null`)throw new h(`UnsupportedIsRhs`);return this._evaluateNode(e.left,n,r,i,a)!==null;case`IN`:{let t=ln(this._evaluateNode(e.right,n,r,i,a));return fn(this._evaluateNode(e.left,n,r,i,a),t)}case`NOT IN`:{let t=ln(this._evaluateNode(e.right,n,r,i,a));return j(fn(this._evaluateNode(e.left,n,r,i,a),t))}case`BETWEEN`:{let t=this._evaluateNode(e.left,n,r,i,a),o=this._evaluateNode(e.right,n,r,i,a);return t==null||o[0]==null||o[1]==null?null:T(t,o[0],`>=`)&&T(t,o[1],`<=`)}case`NOTBETWEEN`:{let t=this._evaluateNode(e.left,n,r,i,a),o=this._evaluateNode(e.right,n,r,i,a);return t==null||o[0]==null||o[1]==null?null:T(t,o[0],`<`)||T(t,o[1],`>`)}case`LIKE`:return vn(this._evaluateNode(e.left,n,r,i,a),this._evaluateNode(e.right,n,r,i,a),e.escape);case`NOT LIKE`:return j(vn(this._evaluateNode(e.left,n,r,i,a),this._evaluateNode(e.right,n,r,i,a),e.escape));case`<>`:case`<`:case`>`:case`>=`:case`<=`:case`=`:return T(this._evaluateNode(e.left,n,r,i,a),this._evaluateNode(e.right,n,r,i,a),e.operator);case`-`:case`+`:case`*`:case`/`:case`||`:return Xe(e.operator,this._evaluateNode(e.left,n,r,i,a),this._evaluateNode(e.right,n,r,i,a),this.timeZone)}case`null`:case`boolean`:case`string`:case`number`:return e.value;case`date`:return e.parsedValue??=Te(e.value,`unknown`),e.parsedValue;case`timestamp`:return e.parsedValue??=C(e.value,`unknown`),e.parsedValue;case`time`:return we(e.value);case`current-time`:return e.mode===`date`?mn(this.timeZone):e.mode===`time`?hn(this.timeZone):pn(this.timeZone);case`current-user`:return a??null;case`column-reference`:return bn(n,e.column,this.fieldsIndex,r);case`data-type`:return e.value;case`function`:{if(this.isAggregate&&ae(e.name,e.args.value.length)){let t=[];for(let n of e.args?.value||[]){let e=[];for(let t of i||[])e.push(this._evaluateNode(n,t,r,null,a));t.push(e)}return ie(e.name,t)}let t=this._evaluateNode(e.args,n,r,i,a);return He(e.name,t,this.timeZone)}}throw new h(`UnsupportedSyntax`,{node:e.type})}};function cn(e){return!0===e}function ln(e){return Array.isArray(e)?e:[e]}function j(e){return e===null?null:!0!==e}function un(e,t){return e!=null&&t!=null?!0===e&&!0===t:!1!==e&&!1!==t&&null}function dn(e,t){return e!=null&&t!=null?!0===e||!0===t:!0===e||!0===t||null}function fn(e,t){if(e==null)return null;let n=!1;for(let r of t)if(r==null)n=null;else{if(e===r){n=!0;break}if(Me(e)&&Me(r)&&(n=T(e,r,`=`),n))break}return n}function pn(e){return Ce(new Date,e)}function mn(e){return l.fromNow(e)}function hn(e){let t=Ce(new Date,e);return p.fromDateTime(t)}var gn=`-[]/{}()*+?.\\^$|`;function _n(e,t){let n=t,r=``,i=0;for(let t=0;t<e.length;t++){let a=e.charAt(t);switch(i){case 0:a===n?i=1:gn.includes(a)?r+=`\\`+a:r+=a===`%`?`.*`:a===`_`?`.`:a;break;case 1:gn.includes(a)?r+=`\\`+a:r+=a,i=0}}return RegExp(`^`+r+`$`,`m`)}function vn(e,t,n){return e==null?null:_n(t,n).test(e)}function yn(e){return e&&typeof e.attributes==`object`}function bn(e,t,r,i){if(`getAttributeSQL`in i)return i.getAttributeSQL(e,t);let a=i.getAttribute(e,t);if(a==null)return a;let o=r?.get(t);switch(o?.type){case`esriFieldTypeDate`:case`date`:return Ce(new Date(a),r?.getLuxonTimeZone(o.name)??n.utcInstance);case`esriFieldTypeDateOnly`:case`date-only`:return l.fromReader(a);case`esriFieldTypeTimeOnly`:case`time-only`:return p.fromReader(a);case`esriFieldTypeTimestampOffset`:case`timestamp-offset`:return new m(a)}return a}var M={getAttribute:(e,t)=>(yn(e)?e.attributes:e)[t]};export{m as i,ie as n,h as r,sn as t};