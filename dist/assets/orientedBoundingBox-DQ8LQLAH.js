import{Al as e,Cl as t,Dl as n,Dy as r,ES as i,El as a,Ey as o,Gg as s,Kg as c,Nl as l,Nu as u,Ny as d,Ol as f,Rf as p,Sl as m,Vy as h,Z as ee,_l as te,_t as ne,bl as re,c_ as g,dl as _,fl as v,gl as ie,hl as ae,i_ as oe,jl as se,n_ as ce,o_ as le,pl as ue,rS as de,u_ as fe,ul as pe,vl as me,xl as he}from"./index-CzMixifc.js";import{n as ge,t as _e}from"./quatf64-eO7UAs9K.js";import{l as ve,o as ye,r as be}from"./quat-XKFzqP_i.js";import{b as xe}from"./plane--nqwMDYx.js";import{r as Se,t as Ce}from"./vectorStacks-BQiry9fn.js";import{t as we}from"./computeTranslationToOriginAndRotation-DwwRDWAD.js";import{t as Te}from"./spatialReferenceEllipsoidUtils-b6wDfyu0.js";var Ee=class{constructor(e,t,n=t){this.data=e,this.size=t,this.stride=n}},De=class extends Ee{constructor(e,t,n,r=!1,i=n){super(e,n,i),this.indices=t,this.exclusive=r}},Oe=1e-6,ke=g(),Ae=g();function je(e,t){let{data:n,size:r}=e,i=n.length/r;if(i<=0)return;let a=new tt(e);it(ke,a.minProj,a.maxProj),at(ke,ke,.5),L(Ae,a.maxProj,a.minProj);let o=rt(Ae),s=new nt;s.quality=o,i<14&&(e=new Ee(new Float64Array(a.buffer,112,42),3));let c=g(),l=g(),u=g(),d=g(),f=g(),p=g(),m=g();switch(Me(a,e,m,c,l,u,d,f,p,s)){case 1:Ge(ke,Ae,t);return;case 2:Ye(e,d,t);return}Fe(e,m,c,l,u,d,f,p,s),Xe(e,s.b0,s.b1,s.b2,N,qe);let h=g();L(h,qe,N),s.quality=rt(h),s.quality<o?et(s.b0,s.b1,s.b2,N,qe,h,t):Ge(ke,Ae,t)}function Me(e,t,n,r,i,a,o,s,c,l){return Ie(e,r,i),st(r,i)<Oe?1:(L(o,r,i),B(o,o),Le(t,r,o,a)<Oe?2:(L(s,i,a),B(s,s),L(c,a,r),B(c,c),z(n,s,o),B(n,n),k(t,n,o,s,c,l),0))}var Ne=g(),Pe=g(),y=g(),b=g(),x=g(),S=g(),C=g(),w=g();function Fe(e,t,n,r,i,a,o,s,c){Re(e,t,n,Ne,Pe),Ne[0]!==void 0&&(L(y,Ne,n),B(y,y),L(b,Ne,r),B(b,b),L(x,Ne,i),B(x,x),z(S,b,a),B(S,S),z(C,x,o),B(C,C),z(w,y,s),B(w,w),k(e,S,a,b,y,c),k(e,C,o,x,b,c),k(e,w,s,y,x,c)),Pe[0]!==void 0&&(L(y,Pe,n),B(y,y),L(b,Pe,r),B(b,b),L(x,Pe,i),B(x,x),z(S,b,a),B(S,S),z(C,x,o),B(C,C),z(w,y,s),B(w,w),k(e,S,a,b,y,c),k(e,C,o,x,b,c),k(e,w,s,y,x,c))}function Ie(e,t,n){let r=st(e.maxVert[0],e.minVert[0]),i=0;for(let t=1;t<7;++t){let n=st(e.maxVert[t],e.minVert[t]);n>r&&(r=n,i=t)}R(t,e.minVert[i]),R(n,e.maxVert[i])}var T=[0,0,0];function Le(e,t,n,r){let{data:i,size:a}=e,o=-1/0,s=0;for(let e=0;e<i.length;e+=a){T[0]=i[e]-t[0],T[1]=i[e+1]-t[1],T[2]=i[e+2]-t[2];let r=n[0]*T[0]+n[1]*T[1]+n[2]*T[2],a=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],c=T[0]*T[0]+T[1]*T[1]+T[2]*T[2]-r*r/a;c>o&&(o=c,s=e)}return R(r,i,s),o}var E=u();function Re(e,t,n,r,i){We(e,t,E,i,r);let a=ct(n,t);E[1]-Oe<=a&&(r[0]=void 0),E[0]+Oe>=a&&(i[0]=void 0)}var ze=g(),Be=g(),Ve=g(),D=g(),O=g(),He=g();function k(e,t,n,r,i,a){if(ot(t)<Oe)return;z(ze,n,t),z(Be,r,t),z(Ve,i,t),A(e,t,E),O[1]=E[0],D[1]=E[1],He[1]=D[1]-O[1];let o=[n,r,i],s=[ze,Be,Ve];for(let n=0;n<3;++n){A(e,o[n],E),O[0]=E[0],D[0]=E[1],A(e,s[n],E),O[2]=E[0],D[2]=E[1],He[0]=D[0]-O[0],He[2]=D[2]-O[2];let r=rt(He);r<a.quality&&(R(a.b0,o[n]),R(a.b1,t),R(a.b2,s[n]),a.quality=r)}}var Ue=g();function A(e,t,n){let{data:r,size:i}=e;n[0]=1/0,n[1]=-1/0;for(let e=0;e<r.length;e+=i){let i=r[e]*t[0]+r[e+1]*t[1]+r[e+2]*t[2];n[0]=Math.min(n[0],i),n[1]=Math.max(n[1],i)}}function We(e,t,n,r,i){let{data:a,size:o}=e;R(r,a),R(i,r),n[0]=ct(Ue,t),n[1]=n[0];for(let e=o;e<a.length;e+=o){let o=a[e]*t[0]+a[e+1]*t[1]+a[e+2]*t[2];o<n[0]&&(n[0]=o,R(r,a,e)),o>n[1]&&(n[1]=o,R(i,a,e))}}function Ge(e,n,r){r.center=e,r.halfSize=t(n,n,.5),r.quaternion=ge}var j=g(),M=g(),Ke=g(),N=g(),qe=g(),Je=g();function Ye(e,t,n){R(j,t),Math.abs(t[0])>Math.abs(t[1])&&Math.abs(t[0])>Math.abs(t[2])?j[0]=0:Math.abs(t[1])>Math.abs(t[2])?j[1]=0:j[2]=0,ot(j)<Oe&&(j[0]=j[1]=j[2]=1),z(M,t,j),B(M,M),z(Ke,t,M),B(Ke,Ke),Xe(e,t,M,Ke,N,qe),L(Je,qe,N),et(t,M,Ke,N,qe,Je,n)}function Xe(e,t,n,r,i,a){A(e,t,E),i[0]=E[0],a[0]=E[1],A(e,n,E),i[1]=E[0],a[1]=E[1],A(e,r,E),i[2]=E[0],a[2]=E[1]}var P=g(),Ze=g(),Qe=g(),F=r(1,0,0,0,1,0,0,0,1),$e=_e();function et(e,n,r,i,a,o,s){F[0]=e[0],F[1]=e[1],F[2]=e[2],F[3]=n[0],F[4]=n[1],F[5]=n[2],F[6]=r[0],F[7]=r[1],F[8]=r[2],s.quaternion=lt($e,F),it(P,i,a),at(P,P,.5),at(Ze,e,P[0]),at(Qe,n,P[1]),it(Ze,Ze,Qe),at(Qe,r,P[2]),s.center=l(Ze,Ze,Qe),s.halfSize=t(P,o,.5)}var I=7,tt=class{constructor(e){this.minVert=Array(I),this.maxVert=Array(I);let t=64*I;this.buffer=new ArrayBuffer(t);let n=0;this.minProj=new Float64Array(this.buffer,n,I),n+=8*I,this.maxProj=new Float64Array(this.buffer,n,I),n+=8*I;for(let e=0;e<I;++e)this.minVert[e]=new Float64Array(this.buffer,n,3),n+=24;for(let e=0;e<I;++e)this.maxVert[e]=new Float64Array(this.buffer,n,3),n+=24;for(let e=0;e<I;++e)this.minProj[e]=1/0,this.maxProj[e]=-1/0;let r=Array(I),i=Array(I),{data:a,size:o}=e;for(let e=0;e<a.length;e+=o){let t=a[e];t<this.minProj[0]&&(this.minProj[0]=t,r[0]=e),t>this.maxProj[0]&&(this.maxProj[0]=t,i[0]=e),t=a[e+1],t<this.minProj[1]&&(this.minProj[1]=t,r[1]=e),t>this.maxProj[1]&&(this.maxProj[1]=t,i[1]=e),t=a[e+2],t<this.minProj[2]&&(this.minProj[2]=t,r[2]=e),t>this.maxProj[2]&&(this.maxProj[2]=t,i[2]=e),t=a[e]+a[e+1]+a[e+2],t<this.minProj[3]&&(this.minProj[3]=t,r[3]=e),t>this.maxProj[3]&&(this.maxProj[3]=t,i[3]=e),t=a[e]+a[e+1]-a[e+2],t<this.minProj[4]&&(this.minProj[4]=t,r[4]=e),t>this.maxProj[4]&&(this.maxProj[4]=t,i[4]=e),t=a[e]-a[e+1]+a[e+2],t<this.minProj[5]&&(this.minProj[5]=t,r[5]=e),t>this.maxProj[5]&&(this.maxProj[5]=t,i[5]=e),t=a[e]-a[e+1]-a[e+2],t<this.minProj[6]&&(this.minProj[6]=t,r[6]=e),t>this.maxProj[6]&&(this.maxProj[6]=t,i[6]=e)}for(let e=0;e<I;++e){let t=r[e];R(this.minVert[e],a,t),t=i[e],R(this.maxVert[e],a,t)}}},nt=class{constructor(){this.b0=fe(1,0,0),this.b1=fe(0,1,0),this.b2=fe(0,0,1),this.quality=0}};function rt(e){return e[0]*e[1]+e[0]*e[2]+e[1]*e[2]}function it(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}function L(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}function at(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}function R(e,t,n=0){e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}function z(e,t,n){let r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o}function B(e,t){let n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(n>0){let r=1/Math.sqrt(n);e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}}function ot(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function st(e,t){let n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function ct(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function lt(e,t){let n=t[0]+t[4]+t[8];if(n>0){let r=Math.sqrt(n+1);e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r}else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);let r=(n+1)%3,i=(n+2)%3,a=Math.sqrt(t[3*n+n]-t[3*r+r]-t[3*i+i]+1);e[n]=.5*a,a=.5/a,e[3]=(t[3*r+i]-t[3*i+r])*a,e[r]=(t[3*r+n]+t[3*n+r])*a,e[i]=(t[3*i+n]+t[3*n+i])*a}return e}var ut=class e{constructor(e=oe,t=Et,n=ge){this._data=[e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3]]}clone(){return e.fromData(this._data)}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(t){let n=new e;return n._copyFromData(t),n}static fromJSON(t){return new e(t.center,t.halfSize,t.quaternion)}copy(e){this._copyFromData(e.data)}_copyFromData(e){for(let t=0;t<10;++t)this._data[t]=e[t]}get center(){return f(Ce.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(e){return e[0]=this._data[0],e[1]=this._data[1],e[2]=this._data[2],e}set center(e){this._data[0]=e[0],this._data[1]=e[1],this._data[2]=e[2]}setCenter(e,t,n){this._data[0]=e,this._data[1]=t,this._data[2]=n}get halfSize(){return f(Ce.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(e){return e[0]=this._data[3],e[1]=this._data[4],e[2]=this._data[5],e}set halfSize(e){this._data[3]=e[0],this._data[4]=e[1],this._data[5]=e[2]}get quaternion(){return ye(Se.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(e){return e[0]=this._data[6],e[1]=this._data[7],e[2]=this._data[8],e[3]=this._data[9],e}set quaternion(e){this._data[6]=e[0],this._data[7]=e[1],this._data[8]=e[2],this._data[9]=e[3]}get data(){return this._data}getCorners(e){let t=this._data,n=ye(V,t[6],t[7],t[8],t[9]);for(let r=0;r<8;++r){let i=e[r];i[0]=(1&r?-1:1)*t[3],i[1]=(2&r?-1:1)*t[4],i[2]=(4&r?-1:1)*t[5],v(i,i,n),i[0]+=t[0],i[1]+=t[1],i[2]+=t[2]}return e}getAxes(e){let t=this._data,n=ye(V,t[6],t[7],t[8],t[9]);return v(e[0],[1,0,0],n),v(e[1],[0,1,0],n),v(e[2],[0,0,1],n),e}intersectsFrustum(e){let n=this.center,r=e.planes;for(let e of r){let t=xe(e),r=this.projectedRadius(t);if(_(t,n)+e[3]-r>0)return!1}let i=this.getAxes(Tt),a=e.points,o=this.halfSize;for(let e=0;e<3;++e){let t=i[e],r=-_(t,n),s=o[e],c=!0,l=!0;for(let e of a){let n=_(e,t)+r;c&&=n>s,l&&=n<-s}if(c||l)return!1}if(this.getCorners(wt).some(t=>e.intersectsPoint(t)))return!0;let s=Ot;for(let e=0;e<3;++e){let t=i[e];s[e]=_(t,n)}let c=e=>{for(let t=0;t<3;++t){let n=i[t],r=o[t],a=_(n,e)-s[t];if(a>r||a<-r)return!1}return!0};if(e.points.some(e=>c(e)))return!0;let l=e.lines,u=Dt;for(let e=0;e<8;++e){let r=l[e].direction;for(let e of i){me(u,r,e);let i=ie(u);if(!(i>0))continue;t(u,u,1/i);let o=this.projectedRadius(u),s=_(n,u),c=s-o,l=s+o,d=!1,f=!1,p=!0;for(let e of a){let t=_(u,e);if(t>l){if(f){p=!1;break}d=!0}else{if(!(t<c)){p=!1;break}if(d){p=!1;break}f=!0}}if(p)return!1}}return!0}doesIntersectFrustumConservativeApproximation(e){return this.intersectPlane(e[0])<=0&&this.intersectPlane(e[1])<=0&&this.intersectPlane(e[2])<=0&&this.intersectPlane(e[3])<=0&&this.intersectPlane(e[4])<=0&&this.intersectPlane(e[5])<=0}get radius(){let e=this._data[3],t=this._data[4],n=this._data[5];return Math.sqrt(e*e+t*t+n*n)}intersectsPoint(e){let t=this.getAxes(Tt),n=this.halfSize,{center:r}=this;for(let i=0;i<3;++i){let a=t[i],o=n[i],s=_(a,e)-_(a,r);if(s>o||s<-o)return!1}return!0}intersectSphere(e){let{center:t}=e,n=this._data;U[0]=n[0]-t[0],U[1]=n[1]-t[1],U[2]=n[2]-t[2];let r=this.getQuaternion(H);return be(V,r),v(U,U,V),m(U,U),W[0]=Math.min(U[0],n[3]),W[1]=Math.min(U[1],n[4]),W[2]=Math.min(U[2],n[5]),ae(W,U)<e.radius*e.radius}intersectSphereWithMBS(e,t=this.radius){let n=this._data,{center:r}=e;U[0]=n[0]-r[0],U[1]=n[1]-r[1],U[2]=n[2]-r[2];let i=e.radius,a=i+t;return!(te(U)>a*a)&&(V[0]=-n[6],V[1]=-n[7],V[2]=-n[8],V[3]=n[9],v(U,U,V),m(U,U),W[0]=Math.min(U[0],n[3]),W[1]=Math.min(U[1],n[4]),W[2]=Math.min(U[2],n[5]),ae(W,U)<i*i)}intersectPlane(e){let t=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3],n=this.projectedRadius(xe(e));return t>n?1:t<-n?-1:0}intersectRay(e,t,n=0){let r=this._data,i=V;i[0]=-r[6],i[1]=-r[7],i[2]=-r[8],i[3]=r[9],U[0]=e[0]-r[0],U[1]=e[1]-r[1],U[2]=e[2]-r[2];let a=v(U,U,V),o=v(W,t,V),s=-1/0,c=1/0,l=this.getHalfSize(Ct);for(let e=0;e<3;e++){let t=a[e],r=o[e],i=l[e]+n;if(Math.abs(r)>1e-6){let e=(i-t)/r,n=(-i-t)/r;s=Math.max(s,Math.min(e,n)),c=Math.min(c,Math.max(e,n))}else if(t>i||t<-i)return!1}return s<=c}projectedArea(e,t,n,r){let i=this.getQuaternion(H);be(V,i),U[0]=e[0]-this._data[0],U[1]=e[1]-this._data[1],U[2]=e[2]-this._data[2],v(U,U,V);let a=this.getHalfSize(Ct),o=U[0]<-a[0]?-1:U[0]>a[0]?1:0,s=U[1]<-a[1]?-1:U[1]>a[1]?1:0,c=U[2]<-a[2]?-1:U[2]>a[2]?1:0,u=Math.abs(o)+Math.abs(s)+Math.abs(c);if(u===0)return 1/0;let p=u===1?4:6,m=6*(o+3*s+9*c+13);h(Y,i),d(Y,Y,a);let ee=this.getCenter(J);for(let e=0;e<p;e++){let n=pt[m+e];f(U,((1&n)<<1)-1,(2&n)-1,((4&n)>>1)-1),pe(U,U,Y),l(G,ee,U),G[3]=1,ne(G,G,t);let r=1/Math.max(1e-6,G[3]);K[2*e]=G[0]*r,K[2*e+1]=G[1]*r}let te=2*p-2,re=K[0]*(K[3]-K[te+1])+K[te]*(K[1]-K[te-1]);for(let e=2;e<te;e+=2)re+=K[e]*(K[e+3]-K[e-1]);return Math.abs(re)*n*r*.125}projectedRadius(e){let t=this.getQuaternion(H);return be(V,t),v(U,e,V),Math.abs(U[0]*this._data[3])+Math.abs(U[1]*this._data[4])+Math.abs(U[2]*this._data[5])}minimumDistancePlane(e){return e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3]-this.projectedRadius(xe(e))}maximumDistancePlane(e){return e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3]+this.projectedRadius(xe(e))}toAaBoundingBox(e){let t=this.getQuaternion(H),n=h(Y,t),r=this._data[3]*Math.abs(n[0])+this._data[4]*Math.abs(n[3])+this._data[5]*Math.abs(n[6]),i=this._data[3]*Math.abs(n[1])+this._data[4]*Math.abs(n[4])+this._data[5]*Math.abs(n[7]),a=this._data[3]*Math.abs(n[2])+this._data[4]*Math.abs(n[5])+this._data[5]*Math.abs(n[8]);e[0]=this._data[0]-r,e[1]=this._data[1]-i,e[2]=this._data[2]-a,e[3]=this._data[0]+r,e[4]=this._data[1]+i,e[5]=this._data[2]+a}transform(e,t,n,r=0,a=Te(n),o=Te(t),l=c(t,o)){if(n===a)t.isGeographic?yt(this,e,t,r,o):vt(this,e,t,r,o,l);else if(t.isWGS84&&(n.isWebMercator||i(n)))ht(t,this,n,e,r);else if(t.isWebMercator&&i(n))gt(t,this,n,e,r);else{let i=this.getCenter(J);i[2]+=r,s(i,t,0,i,n,0),e.center=i,this!==e&&(e.quaternion=this.getQuaternion(H),e.halfSize=this.getHalfSize(Ct))}}},V=_e(),H=_e(),dt=_e(),U=g(),W=g(),G=ee();function ft(e,t=new ut){return je(e,t),t}var K=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],pt=(()=>{let e=new Int8Array(162),t=0,n=n=>{for(let r=0;r<n.length;r++)e[t+r]=n[r];t+=6};return n([6,2,3,1,5,4]),n([0,2,3,1,5,4]),n([0,2,3,7,5,4]),n([0,1,3,2,6,4]),n([0,1,3,2,0,0]),n([0,1,5,7,3,2]),n([0,1,3,7,6,4]),n([0,1,3,7,6,2]),n([0,1,5,7,6,2]),n([0,1,5,4,6,2]),n([0,1,5,4,0,0]),n([0,1,3,7,5,4]),n([0,2,6,4,0,0]),n([0,0,0,0,0,0]),n([1,3,7,5,0,0]),n([2,3,7,6,4,0]),n([2,3,7,6,0,0]),n([2,3,1,5,7,6]),n([0,1,5,7,6,2]),n([0,1,5,7,6,4]),n([0,1,3,7,6,4]),n([4,5,7,6,2,0]),n([4,5,7,6,0,0]),n([4,5,1,3,7,6]),n([0,2,3,7,5,4]),n([6,2,3,7,5,4]),n([6,2,3,1,5,4]),e})();function mt(r,i,o,s,c){let u=r.getQuaternion(H);c.quaternion=u,be(V,u);let d=r.getCenter(J),p=r.getHalfSize(Ct);if(s===1){v(Z,d,V),m(Q,Z),a($,Q,p),ue($,Q,$);let s=se($);l($,Q,p);let u=se($);if(s<o)c.center=d,f(Z,o,o,o),c.halfSize=l(Z,p,Z);else{let a=u>0?1+i/u:1,l=s>0?1+o/s:1,d=(l+a)/2,f=(l-a)/2;t($,Q,f),c.halfSize=e($,$,p,d),t($,Q,d),e($,$,p,f),n(Z,Z),he(Z,$,Z);let m=r.getQuaternion(dt);c.center=v(Z,Z,m)}}else{c.center=e(Z,d,ce,(o+i)/2);let t=v(Z,ce,V);m(t,t),c.halfSize=e(Q,p,t,(o-i)/2)}return c}function ht(e,t,n,r,i){t.getCenter(J),J[2]+=i;let a=Te(n);s(J,e,0,J,a,0),_t(a,t,J,n,r)}function gt(e,t,n,r,i){t.getCenter(J),J[2]+=i,_t(e,t,J,n,r)}function _t(e,t,n,r,i){let a=t.getQuaternion(H),o=h(Y,a),c=t.getHalfSize(Ct);for(let e=0;e<8;++e){for(let t=0;t<3;++t)q[t]=c[t]*(e&1<<t?-1:1);for(let t=0;t<3;++t){let r=n[t];for(let e=0;e<3;++e)r+=q[e]*o[3*e+t];bt[3*e+t]=r}}s(bt,e,0,bt,r,0,8),ft(xt,i)}function vt(e,t,n,r,i=Te(n),a=c(n,i)){e.getCorners(wt),e.getCenter(q),q[2]+=r,we(n,q,X,i),t.setCenter(X[12],X[13],X[14]);let o=2*Math.sqrt(1+X[0]+X[5]+X[10]);V[0]=(X[6]-X[9])/o,V[1]=(X[8]-X[2])/o,V[2]=(X[1]-X[4])/o,V[3]=.25*o;let s=e.getQuaternion(H);t.quaternion=ve(V,V,s),be(V,V),f(Q,0,0,0);let l=t.getCenter(St);for(let e of wt)e[2]+=r,a(e,0,e,0),ue(Z,e,l),v(Z,Z,V),m(Z,Z),re(Q,Q,Z);t.halfSize=Q}function yt(e,n,r,i,a=Te(r)){let o=de(r),c=1+Math.max(0,i)/(o.radius+e.centerZ);e.getCenter(q),q[2]+=i,s(q,r,0,q,a,0),n.center=q;let u=e.getQuaternion(H);n.quaternion=u,be(V,u),f(Z,0,0,1),v(Z,Z,V);let d=e.getHalfSize(Ct);f(Z,d[0]*Math.abs(Z[0]),d[1]*Math.abs(Z[1]),d[2]*Math.abs(Z[2])),t(Z,Z,o.inverseFlattening),l(Z,d,Z),n.halfSize=t(Z,Z,c)}var bt=Array(24),xt=new Ee(bt,3),q=g(),J=g(),St=g(),Ct=g(),Y=o(),X=p(),wt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Tt=[g(),g(),g()],Z=g(),Q=g(),$=g(),Et=le(-1,-1,-1),Dt=g(),Ot=[0,0,0];export{De as i,mt as n,Ee as r,ut as t};